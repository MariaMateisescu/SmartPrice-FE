import { bt as createComponent, y as ref, a1 as computed, b0 as watch, ak as h, ct as throttle, cf as stop, bC as QIcon, ca as hDir, ah as getCurrentInstance, as as nextTick, bZ as injectProp, _ as _export_sfc, c6 as useQuasar, o as openBlock, c as createElementBlock, a as createBaseVNode, M as toDisplayString, aa as createVNode, b5 as withCtx, bE as QBtn, aH as pushScopeId, aF as popScopeId, a2 as createBlock, n as normalizeStyle, bB as useDashHeaderStore, bA as useUserStore, a3 as createCommentVNode, Q as Fragment, aK as renderList, aL as resolveComponent, b7 as withDirectives } from "./index.0ce84b9b.js";
import { a as QDialog, Q as QSpace } from "./QDialog.27e255cd.js";
import { Q as QCard, a as QCardSection } from "./QCard.511536db.js";
import { Q as QCardActions } from "./QCardActions.9dd12f15.js";
import { t as testPattern, Q as QInput } from "./QInput.4104ffc2.js";
import { T as TouchPan } from "./TouchPan.43131768.js";
import { Q as QSlider } from "./QSlider.40059c2e.js";
import { Q as QTabs } from "./QTabs.fc3e4dc8.js";
import { Q as QTab, b as QTabPanel, a as QTabPanels } from "./QTabPanels.5a74d7c9.js";
import { u as useDarkProps, a as useDark } from "./use-dark.089fd8b8.js";
import { u as useCache } from "./use-cache.b0833c75.js";
import { u as useFormProps, a as useFormInject } from "./use-form.e754bc19.js";
import { u as useAnchorProps, a as useAnchor, Q as QMenu } from "./QMenu.73fdfda5.js";
import { C as ClosePopup } from "./ClosePopup.fcd43a0a.js";
import { E as EmptyState } from "./EmptyState.d30d7522.js";
import { E as EmptyData } from "./EmptyData.56f5e511.js";
import { c as commonjsGlobal, a as getDefaultExportFromCjs } from "./_commonjsHelpers.2cf1d77b.js";
import "./use-timeout.0140a5e1.js";
import "./focus-manager.d6507951.js";
import "./uid.42677368.js";
import "./selection.0c91ca54.js";
import "./format.2a3572e1.js";
import "./QResizeObserver.0123dcfa.js";
import "./rtl.b51694b1.js";
import "./Login.d1b99dd8.js";
import "./SignUp.0068903c.js";
import "./ForgotPassword.9cb51cc9.js";
function _mergeNamespaces(n, m) {
  m.forEach(function(e) {
    e && typeof e !== "string" && !Array.isArray(e) && Object.keys(e).forEach(function(k) {
      if (k !== "default" && !(k in n)) {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function() {
            return e[k];
          }
        });
      }
    });
  });
  return Object.freeze(Object.defineProperty(n, Symbol.toStringTag, { value: "Module" }));
}
const reRGBA = /^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;
function rgbToHex({ r, g, b, a }) {
  const alpha = a !== void 0;
  r = Math.round(r);
  g = Math.round(g);
  b = Math.round(b);
  if (r > 255 || g > 255 || b > 255 || alpha && a > 100) {
    throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");
  }
  a = alpha ? (Math.round(255 * a / 100) | 1 << 8).toString(16).slice(1) : "";
  return "#" + (b | g << 8 | r << 16 | 1 << 24).toString(16).slice(1) + a;
}
function rgbToString({ r, g, b, a }) {
  return `rgb${a !== void 0 ? "a" : ""}(${r},${g},${b}${a !== void 0 ? "," + a / 100 : ""})`;
}
function hexToRgb(hex) {
  if (typeof hex !== "string") {
    throw new TypeError("Expected a string");
  }
  hex = hex.replace(/^#/, "");
  if (hex.length === 3) {
    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
  } else if (hex.length === 4) {
    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3];
  }
  const num = parseInt(hex, 16);
  return hex.length > 6 ? { r: num >> 24 & 255, g: num >> 16 & 255, b: num >> 8 & 255, a: Math.round((num & 255) / 2.55) } : { r: num >> 16, g: num >> 8 & 255, b: num & 255 };
}
function hsvToRgb({ h: h2, s, v, a }) {
  let r, g, b;
  s = s / 100;
  v = v / 100;
  h2 = h2 / 360;
  const i = Math.floor(h2 * 6), f = h2 * 6 - i, p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s);
  switch (i % 6) {
    case 0:
      r = v;
      g = t;
      b = p;
      break;
    case 1:
      r = q;
      g = v;
      b = p;
      break;
    case 2:
      r = p;
      g = v;
      b = t;
      break;
    case 3:
      r = p;
      g = q;
      b = v;
      break;
    case 4:
      r = t;
      g = p;
      b = v;
      break;
    case 5:
      r = v;
      g = p;
      b = q;
      break;
  }
  return {
    r: Math.round(r * 255),
    g: Math.round(g * 255),
    b: Math.round(b * 255),
    a
  };
}
function rgbToHsv({ r, g, b, a }) {
  const max = Math.max(r, g, b), min = Math.min(r, g, b), d = max - min, s = max === 0 ? 0 : d / max, v = max / 255;
  let h2;
  switch (max) {
    case min:
      h2 = 0;
      break;
    case r:
      h2 = g - b + d * (g < b ? 6 : 0);
      h2 /= 6 * d;
      break;
    case g:
      h2 = b - r + d * 2;
      h2 /= 6 * d;
      break;
    case b:
      h2 = r - g + d * 4;
      h2 /= 6 * d;
      break;
  }
  return {
    h: Math.round(h2 * 360),
    s: Math.round(s * 100),
    v: Math.round(v * 100),
    a
  };
}
function textToRgb(str) {
  if (typeof str !== "string") {
    throw new TypeError("Expected a string");
  }
  const color = str.replace(/ /g, "");
  const m = reRGBA.exec(color);
  if (m === null) {
    return hexToRgb(color);
  }
  const rgb = {
    r: Math.min(255, parseInt(m[2], 10)),
    g: Math.min(255, parseInt(m[3], 10)),
    b: Math.min(255, parseInt(m[4], 10))
  };
  if (m[1]) {
    const alpha = parseFloat(m[5]);
    rgb.a = Math.min(1, isNaN(alpha) === true ? 1 : alpha) * 100;
  }
  return rgb;
}
function luminosity(color) {
  if (typeof color !== "string" && (!color || color.r === void 0)) {
    throw new TypeError("Expected a string or a {r, g, b} object as color");
  }
  const rgb = typeof color === "string" ? textToRgb(color) : color, r = rgb.r / 255, g = rgb.g / 255, b = rgb.b / 255, R = r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4), G = g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4), B = b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);
  return 0.2126 * R + 0.7152 * G + 0.0722 * B;
}
const palette = [
  "rgb(255,204,204)",
  "rgb(255,230,204)",
  "rgb(255,255,204)",
  "rgb(204,255,204)",
  "rgb(204,255,230)",
  "rgb(204,255,255)",
  "rgb(204,230,255)",
  "rgb(204,204,255)",
  "rgb(230,204,255)",
  "rgb(255,204,255)",
  "rgb(255,153,153)",
  "rgb(255,204,153)",
  "rgb(255,255,153)",
  "rgb(153,255,153)",
  "rgb(153,255,204)",
  "rgb(153,255,255)",
  "rgb(153,204,255)",
  "rgb(153,153,255)",
  "rgb(204,153,255)",
  "rgb(255,153,255)",
  "rgb(255,102,102)",
  "rgb(255,179,102)",
  "rgb(255,255,102)",
  "rgb(102,255,102)",
  "rgb(102,255,179)",
  "rgb(102,255,255)",
  "rgb(102,179,255)",
  "rgb(102,102,255)",
  "rgb(179,102,255)",
  "rgb(255,102,255)",
  "rgb(255,51,51)",
  "rgb(255,153,51)",
  "rgb(255,255,51)",
  "rgb(51,255,51)",
  "rgb(51,255,153)",
  "rgb(51,255,255)",
  "rgb(51,153,255)",
  "rgb(51,51,255)",
  "rgb(153,51,255)",
  "rgb(255,51,255)",
  "rgb(255,0,0)",
  "rgb(255,128,0)",
  "rgb(255,255,0)",
  "rgb(0,255,0)",
  "rgb(0,255,128)",
  "rgb(0,255,255)",
  "rgb(0,128,255)",
  "rgb(0,0,255)",
  "rgb(128,0,255)",
  "rgb(255,0,255)",
  "rgb(245,0,0)",
  "rgb(245,123,0)",
  "rgb(245,245,0)",
  "rgb(0,245,0)",
  "rgb(0,245,123)",
  "rgb(0,245,245)",
  "rgb(0,123,245)",
  "rgb(0,0,245)",
  "rgb(123,0,245)",
  "rgb(245,0,245)",
  "rgb(214,0,0)",
  "rgb(214,108,0)",
  "rgb(214,214,0)",
  "rgb(0,214,0)",
  "rgb(0,214,108)",
  "rgb(0,214,214)",
  "rgb(0,108,214)",
  "rgb(0,0,214)",
  "rgb(108,0,214)",
  "rgb(214,0,214)",
  "rgb(163,0,0)",
  "rgb(163,82,0)",
  "rgb(163,163,0)",
  "rgb(0,163,0)",
  "rgb(0,163,82)",
  "rgb(0,163,163)",
  "rgb(0,82,163)",
  "rgb(0,0,163)",
  "rgb(82,0,163)",
  "rgb(163,0,163)",
  "rgb(92,0,0)",
  "rgb(92,46,0)",
  "rgb(92,92,0)",
  "rgb(0,92,0)",
  "rgb(0,92,46)",
  "rgb(0,92,92)",
  "rgb(0,46,92)",
  "rgb(0,0,92)",
  "rgb(46,0,92)",
  "rgb(92,0,92)",
  "rgb(255,255,255)",
  "rgb(205,205,205)",
  "rgb(178,178,178)",
  "rgb(153,153,153)",
  "rgb(127,127,127)",
  "rgb(102,102,102)",
  "rgb(76,76,76)",
  "rgb(51,51,51)",
  "rgb(25,25,25)",
  "rgb(0,0,0)"
];
const thumbPath = "M5 5 h10 v10 h-10 v-10 z";
const alphaTrackImg = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==";
var QColor = createComponent({
  name: "QColor",
  props: {
    ...useDarkProps,
    ...useFormProps,
    modelValue: String,
    defaultValue: String,
    defaultView: {
      type: String,
      default: "spectrum",
      validator: (v) => ["spectrum", "tune", "palette"].includes(v)
    },
    formatModel: {
      type: String,
      default: "auto",
      validator: (v) => ["auto", "hex", "rgb", "hexa", "rgba"].includes(v)
    },
    palette: Array,
    noHeader: Boolean,
    noHeaderTabs: Boolean,
    noFooter: Boolean,
    square: Boolean,
    flat: Boolean,
    bordered: Boolean,
    disable: Boolean,
    readonly: Boolean
  },
  emits: ["update:modelValue", "change"],
  setup(props, { emit }) {
    const { proxy } = getCurrentInstance();
    const { $q } = proxy;
    const isDark = useDark(props, $q);
    const { getCache } = useCache();
    const spectrumRef = ref(null);
    const errorIconRef = ref(null);
    const forceHex = computed(() => props.formatModel === "auto" ? null : props.formatModel.indexOf("hex") > -1);
    const forceAlpha = computed(() => props.formatModel === "auto" ? null : props.formatModel.indexOf("a") > -1);
    const topView = ref(
      props.formatModel === "auto" ? props.modelValue === void 0 || props.modelValue === null || props.modelValue === "" || props.modelValue.startsWith("#") ? "hex" : "rgb" : props.formatModel.startsWith("hex") ? "hex" : "rgb"
    );
    const view = ref(props.defaultView);
    const model = ref(parseModel(props.modelValue || props.defaultValue));
    const editable = computed(() => props.disable !== true && props.readonly !== true);
    const isHex = computed(
      () => props.modelValue === void 0 || props.modelValue === null || props.modelValue === "" || props.modelValue.startsWith("#")
    );
    const isOutputHex = computed(() => forceHex.value !== null ? forceHex.value : isHex.value);
    const formAttrs = computed(() => ({
      type: "hidden",
      name: props.name,
      value: model.value[isOutputHex.value === true ? "hex" : "rgb"]
    }));
    const injectFormInput = useFormInject(formAttrs);
    const hasAlpha = computed(() => forceAlpha.value !== null ? forceAlpha.value : model.value.a !== void 0);
    const currentBgColor = computed(() => ({
      backgroundColor: model.value.rgb || "#000"
    }));
    const headerClass = computed(() => {
      const light = model.value.a !== void 0 && model.value.a < 65 ? true : luminosity(model.value) > 0.4;
      return `q-color-picker__header-content q-color-picker__header-content--${light ? "light" : "dark"}`;
    });
    const spectrumStyle = computed(() => ({
      background: `hsl(${model.value.h},100%,50%)`
    }));
    const spectrumPointerStyle = computed(() => ({
      top: `${100 - model.value.v}%`,
      [$q.lang.rtl === true ? "right" : "left"]: `${model.value.s}%`
    }));
    const computedPalette = computed(() => props.palette !== void 0 && props.palette.length > 0 ? props.palette : palette);
    const classes = computed(
      () => "q-color-picker" + (props.bordered === true ? " q-color-picker--bordered" : "") + (props.square === true ? " q-color-picker--square no-border-radius" : "") + (props.flat === true ? " q-color-picker--flat no-shadow" : "") + (props.disable === true ? " disabled" : "") + (isDark.value === true ? " q-color-picker--dark q-dark" : "")
    );
    const attributes = computed(() => {
      if (props.disable === true) {
        return { "aria-disabled": "true" };
      }
      if (props.readonly === true) {
        return { "aria-readonly": "true" };
      }
      return {};
    });
    const spectrumDirective = computed(() => {
      return [[
        TouchPan,
        onSpectrumPan,
        void 0,
        { prevent: true, stop: true, mouse: true }
      ]];
    });
    watch(() => props.modelValue, (v) => {
      const localModel = parseModel(v || props.defaultValue);
      if (localModel.hex !== model.value.hex) {
        model.value = localModel;
      }
    });
    watch(() => props.defaultValue, (v) => {
      if (!props.modelValue && v) {
        const localModel = parseModel(v);
        if (localModel.hex !== model.value.hex) {
          model.value = localModel;
        }
      }
    });
    function updateModel(rgb, change) {
      model.value.hex = rgbToHex(rgb);
      model.value.rgb = rgbToString(rgb);
      model.value.r = rgb.r;
      model.value.g = rgb.g;
      model.value.b = rgb.b;
      model.value.a = rgb.a;
      const value = model.value[isOutputHex.value === true ? "hex" : "rgb"];
      emit("update:modelValue", value);
      change === true && emit("change", value);
    }
    function parseModel(v) {
      const alpha = forceAlpha.value !== void 0 ? forceAlpha.value : props.formatModel === "auto" ? null : props.formatModel.indexOf("a") > -1;
      if (typeof v !== "string" || v.length === 0 || testPattern.anyColor(v.replace(/ /g, "")) !== true) {
        return {
          h: 0,
          s: 0,
          v: 0,
          r: 0,
          g: 0,
          b: 0,
          a: alpha === true ? 100 : void 0,
          hex: void 0,
          rgb: void 0
        };
      }
      const model2 = textToRgb(v);
      if (alpha === true && model2.a === void 0) {
        model2.a = 100;
      }
      model2.hex = rgbToHex(model2);
      model2.rgb = rgbToString(model2);
      return Object.assign(model2, rgbToHsv(model2));
    }
    function changeSpectrum(left, top, change) {
      const panel = spectrumRef.value;
      if (panel === null) {
        return;
      }
      const width = panel.clientWidth, height = panel.clientHeight, rect = panel.getBoundingClientRect();
      let x = Math.min(width, Math.max(0, left - rect.left));
      if ($q.lang.rtl === true) {
        x = width - x;
      }
      const y = Math.min(height, Math.max(0, top - rect.top)), s = Math.round(100 * x / width), v = Math.round(100 * Math.max(0, Math.min(1, -(y / height) + 1))), rgb = hsvToRgb({
        h: model.value.h,
        s,
        v,
        a: hasAlpha.value === true ? model.value.a : void 0
      });
      model.value.s = s;
      model.value.v = v;
      updateModel(rgb, change);
    }
    function onHueChange(val, change) {
      const h2 = Math.round(val);
      const rgb = hsvToRgb({
        h: h2,
        s: model.value.s,
        v: model.value.v,
        a: hasAlpha.value === true ? model.value.a : void 0
      });
      model.value.h = h2;
      updateModel(rgb, change);
    }
    function onNumericChange(value, formatModel, max, evt, change) {
      evt !== void 0 && stop(evt);
      if (!/^[0-9]+$/.test(value)) {
        change === true && proxy.$forceUpdate();
        return;
      }
      const val = Math.floor(Number(value));
      if (val < 0 || val > max) {
        change === true && proxy.$forceUpdate();
        return;
      }
      const rgb = {
        r: formatModel === "r" ? val : model.value.r,
        g: formatModel === "g" ? val : model.value.g,
        b: formatModel === "b" ? val : model.value.b,
        a: hasAlpha.value === true ? formatModel === "a" ? val : model.value.a : void 0
      };
      if (formatModel !== "a") {
        const hsv = rgbToHsv(rgb);
        model.value.h = hsv.h;
        model.value.s = hsv.s;
        model.value.v = hsv.v;
      }
      updateModel(rgb, change);
      if (evt !== void 0 && change !== true && evt.target.selectionEnd !== void 0) {
        const index = evt.target.selectionEnd;
        nextTick(() => {
          evt.target.setSelectionRange(index, index);
        });
      }
    }
    function onEditorChange(evt, change) {
      let rgb;
      const inp = evt.target.value;
      stop(evt);
      if (topView.value === "hex") {
        if (inp.length !== (hasAlpha.value === true ? 9 : 7) || !/^#[0-9A-Fa-f]+$/.test(inp)) {
          return true;
        }
        rgb = hexToRgb(inp);
      } else {
        let model2;
        if (!inp.endsWith(")")) {
          return true;
        } else if (hasAlpha.value !== true && inp.startsWith("rgb(")) {
          model2 = inp.substring(4, inp.length - 1).split(",").map((n) => parseInt(n, 10));
          if (model2.length !== 3 || !/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(inp)) {
            return true;
          }
        } else if (hasAlpha.value === true && inp.startsWith("rgba(")) {
          model2 = inp.substring(5, inp.length - 1).split(",");
          if (model2.length !== 4 || !/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(inp)) {
            return true;
          }
          for (let i = 0; i < 3; i++) {
            const v2 = parseInt(model2[i], 10);
            if (v2 < 0 || v2 > 255) {
              return true;
            }
            model2[i] = v2;
          }
          const v = parseFloat(model2[3]);
          if (v < 0 || v > 1) {
            return true;
          }
          model2[3] = v;
        } else {
          return true;
        }
        if (model2[0] < 0 || model2[0] > 255 || model2[1] < 0 || model2[1] > 255 || model2[2] < 0 || model2[2] > 255 || hasAlpha.value === true && (model2[3] < 0 || model2[3] > 1)) {
          return true;
        }
        rgb = {
          r: model2[0],
          g: model2[1],
          b: model2[2],
          a: hasAlpha.value === true ? model2[3] * 100 : void 0
        };
      }
      const hsv = rgbToHsv(rgb);
      model.value.h = hsv.h;
      model.value.s = hsv.s;
      model.value.v = hsv.v;
      updateModel(rgb, change);
      if (change !== true) {
        const index = evt.target.selectionEnd;
        nextTick(() => {
          evt.target.setSelectionRange(index, index);
        });
      }
    }
    function onPalettePick(color) {
      const def = parseModel(color);
      const rgb = { r: def.r, g: def.g, b: def.b, a: def.a };
      if (rgb.a === void 0) {
        rgb.a = model.value.a;
      }
      model.value.h = def.h;
      model.value.s = def.s;
      model.value.v = def.v;
      updateModel(rgb, true);
    }
    function onSpectrumPan(evt) {
      if (evt.isFinal) {
        changeSpectrum(
          evt.position.left,
          evt.position.top,
          true
        );
      } else {
        onSpectrumChange(evt);
      }
    }
    const onSpectrumChange = throttle(
      (evt) => {
        changeSpectrum(evt.position.left, evt.position.top);
      },
      20
    );
    function onSpectrumClick(evt) {
      changeSpectrum(
        evt.pageX - window.pageXOffset,
        evt.pageY - window.pageYOffset,
        true
      );
    }
    function onActivate(evt) {
      changeSpectrum(
        evt.pageX - window.pageXOffset,
        evt.pageY - window.pageYOffset
      );
    }
    function updateErrorIcon(val) {
      if (errorIconRef.value !== null) {
        errorIconRef.value.$el.style.opacity = val ? 1 : 0;
      }
    }
    function getHeader() {
      const child = [];
      props.noHeaderTabs !== true && child.push(
        h(QTabs, {
          class: "q-color-picker__header-tabs",
          modelValue: topView.value,
          dense: true,
          align: "justify",
          ...getCache("topVTab", {
            "onUpdate:modelValue": (val) => {
              topView.value = val;
            }
          })
        }, () => [
          h(QTab, {
            label: "HEX" + (hasAlpha.value === true ? "A" : ""),
            name: "hex",
            ripple: false
          }),
          h(QTab, {
            label: "RGB" + (hasAlpha.value === true ? "A" : ""),
            name: "rgb",
            ripple: false
          })
        ])
      );
      child.push(
        h("div", {
          class: "q-color-picker__header-banner row flex-center no-wrap"
        }, [
          h("input", {
            class: "fit",
            value: model.value[topView.value],
            ...editable.value !== true ? { readonly: true } : {},
            ...getCache("topIn", {
              onInput: (evt) => {
                updateErrorIcon(onEditorChange(evt) === true);
              },
              onChange: stop,
              onBlur: (evt) => {
                onEditorChange(evt, true) === true && proxy.$forceUpdate();
                updateErrorIcon(false);
              }
            })
          }),
          h(QIcon, {
            ref: errorIconRef,
            class: "q-color-picker__error-icon absolute no-pointer-events",
            name: $q.iconSet.type.negative
          })
        ])
      );
      return h("div", {
        class: "q-color-picker__header relative-position overflow-hidden"
      }, [
        h("div", { class: "q-color-picker__header-bg absolute-full" }),
        h("div", {
          class: headerClass.value,
          style: currentBgColor.value
        }, child)
      ]);
    }
    function getContent() {
      return h(QTabPanels, {
        modelValue: view.value,
        animated: true
      }, () => [
        h(QTabPanel, {
          class: "q-color-picker__spectrum-tab overflow-hidden",
          name: "spectrum"
        }, getSpectrumTab),
        h(QTabPanel, {
          class: "q-pa-md q-color-picker__tune-tab",
          name: "tune"
        }, getTuneTab),
        h(QTabPanel, {
          class: "q-color-picker__palette-tab",
          name: "palette"
        }, getPaletteTab)
      ]);
    }
    function getFooter() {
      return h("div", {
        class: "q-color-picker__footer relative-position overflow-hidden"
      }, [
        h(QTabs, {
          class: "absolute-full",
          modelValue: view.value,
          dense: true,
          align: "justify",
          ...getCache("ftIn", {
            "onUpdate:modelValue": (val) => {
              view.value = val;
            }
          })
        }, () => [
          h(QTab, {
            icon: $q.iconSet.colorPicker.spectrum,
            name: "spectrum",
            ripple: false
          }),
          h(QTab, {
            icon: $q.iconSet.colorPicker.tune,
            name: "tune",
            ripple: false
          }),
          h(QTab, {
            icon: $q.iconSet.colorPicker.palette,
            name: "palette",
            ripple: false
          })
        ])
      ]);
    }
    function getSpectrumTab() {
      const data = {
        ref: spectrumRef,
        class: "q-color-picker__spectrum non-selectable relative-position cursor-pointer" + (editable.value !== true ? " readonly" : ""),
        style: spectrumStyle.value,
        ...editable.value === true ? {
          onClick: onSpectrumClick,
          onMousedown: onActivate
        } : {}
      };
      const child = [
        h("div", { style: { paddingBottom: "100%" } }),
        h("div", { class: "q-color-picker__spectrum-white absolute-full" }),
        h("div", { class: "q-color-picker__spectrum-black absolute-full" }),
        h("div", {
          class: "absolute",
          style: spectrumPointerStyle.value
        }, [
          model.value.hex !== void 0 ? h("div", { class: "q-color-picker__spectrum-circle" }) : null
        ])
      ];
      const sliders = [
        h(QSlider, {
          class: "q-color-picker__hue non-selectable",
          modelValue: model.value.h,
          min: 0,
          max: 360,
          trackSize: "8px",
          innerTrackColor: "transparent",
          selectionColor: "transparent",
          readonly: editable.value !== true,
          thumbPath,
          "onUpdate:modelValue": onHueChange,
          ...getCache("lazyhue", {
            onChange: (val) => onHueChange(val, true)
          })
        })
      ];
      hasAlpha.value === true && sliders.push(
        h(QSlider, {
          class: "q-color-picker__alpha non-selectable",
          modelValue: model.value.a,
          min: 0,
          max: 100,
          trackSize: "8px",
          trackColor: "white",
          innerTrackColor: "transparent",
          selectionColor: "transparent",
          trackImg: alphaTrackImg,
          readonly: editable.value !== true,
          hideSelection: true,
          thumbPath,
          ...getCache("alphaSlide", {
            "onUpdate:modelValue": (value) => onNumericChange(value, "a", 100),
            onChange: (value) => onNumericChange(value, "a", 100, void 0, true)
          })
        })
      );
      return [
        hDir("div", data, child, "spec", editable.value, () => spectrumDirective.value),
        h("div", { class: "q-color-picker__sliders" }, sliders)
      ];
    }
    function getTuneTab() {
      return [
        h("div", { class: "row items-center no-wrap" }, [
          h("div", "R"),
          h(QSlider, {
            modelValue: model.value.r,
            min: 0,
            max: 255,
            color: "red",
            dark: isDark.value,
            readonly: editable.value !== true,
            ...getCache("rSlide", {
              "onUpdate:modelValue": (value) => onNumericChange(value, "r", 255),
              onChange: (value) => onNumericChange(value, "r", 255, void 0, true)
            })
          }),
          h("input", {
            value: model.value.r,
            maxlength: 3,
            readonly: editable.value !== true,
            onChange: stop,
            ...getCache("rIn", {
              onInput: (evt) => onNumericChange(evt.target.value, "r", 255, evt),
              onBlur: (evt) => onNumericChange(evt.target.value, "r", 255, evt, true)
            })
          })
        ]),
        h("div", { class: "row items-center no-wrap" }, [
          h("div", "G"),
          h(QSlider, {
            modelValue: model.value.g,
            min: 0,
            max: 255,
            color: "green",
            dark: isDark.value,
            readonly: editable.value !== true,
            ...getCache("gSlide", {
              "onUpdate:modelValue": (value) => onNumericChange(value, "g", 255),
              onChange: (value) => onNumericChange(value, "g", 255, void 0, true)
            })
          }),
          h("input", {
            value: model.value.g,
            maxlength: 3,
            readonly: editable.value !== true,
            onChange: stop,
            ...getCache("gIn", {
              onInput: (evt) => onNumericChange(evt.target.value, "g", 255, evt),
              onBlur: (evt) => onNumericChange(evt.target.value, "g", 255, evt, true)
            })
          })
        ]),
        h("div", { class: "row items-center no-wrap" }, [
          h("div", "B"),
          h(QSlider, {
            modelValue: model.value.b,
            min: 0,
            max: 255,
            color: "blue",
            readonly: editable.value !== true,
            dark: isDark.value,
            ...getCache("bSlide", {
              "onUpdate:modelValue": (value) => onNumericChange(value, "b", 255),
              onChange: (value) => onNumericChange(value, "b", 255, void 0, true)
            })
          }),
          h("input", {
            value: model.value.b,
            maxlength: 3,
            readonly: editable.value !== true,
            onChange: stop,
            ...getCache("bIn", {
              onInput: (evt) => onNumericChange(evt.target.value, "b", 255, evt),
              onBlur: (evt) => onNumericChange(evt.target.value, "b", 255, evt, true)
            })
          })
        ]),
        hasAlpha.value === true ? h("div", { class: "row items-center no-wrap" }, [
          h("div", "A"),
          h(QSlider, {
            modelValue: model.value.a,
            color: "grey",
            readonly: editable.value !== true,
            dark: isDark.value,
            ...getCache("aSlide", {
              "onUpdate:modelValue": (value) => onNumericChange(value, "a", 100),
              onChange: (value) => onNumericChange(value, "a", 100, void 0, true)
            })
          }),
          h("input", {
            value: model.value.a,
            maxlength: 3,
            readonly: editable.value !== true,
            onChange: stop,
            ...getCache("aIn", {
              onInput: (evt) => onNumericChange(evt.target.value, "a", 100, evt),
              onBlur: (evt) => onNumericChange(evt.target.value, "a", 100, evt, true)
            })
          })
        ]) : null
      ];
    }
    function getPaletteTab() {
      const fn = (color) => h("div", {
        class: "q-color-picker__cube col-auto",
        style: { backgroundColor: color },
        ...editable.value === true ? getCache("palette#" + color, {
          onClick: () => {
            onPalettePick(color);
          }
        }) : {}
      });
      return [
        h("div", {
          class: "row items-center q-color-picker__palette-rows" + (editable.value === true ? " q-color-picker__palette-rows--editable" : "")
        }, computedPalette.value.map(fn))
      ];
    }
    return () => {
      const child = [getContent()];
      if (props.name !== void 0 && props.disable !== true) {
        injectFormInput(child, "push");
      }
      props.noHeader !== true && child.unshift(
        getHeader()
      );
      props.noFooter !== true && child.push(
        getFooter()
      );
      return h("div", {
        class: classes.value,
        ...attributes.value
      }, child);
    };
  }
});
var QPopupProxy = createComponent({
  name: "QPopupProxy",
  props: {
    ...useAnchorProps,
    breakpoint: {
      type: [String, Number],
      default: 450
    }
  },
  emits: ["show", "hide"],
  setup(props, { slots, emit, attrs }) {
    const { proxy } = getCurrentInstance();
    const { $q } = proxy;
    const showing = ref(false);
    const popupRef = ref(null);
    const breakpoint = computed(() => parseInt(props.breakpoint, 10));
    const { canShow } = useAnchor({ showing });
    function getType() {
      return $q.screen.width < breakpoint.value || $q.screen.height < breakpoint.value ? "dialog" : "menu";
    }
    const type = ref(getType());
    const popupProps = computed(
      () => type.value === "menu" ? { maxHeight: "99vh" } : {}
    );
    watch(() => getType(), (val) => {
      if (showing.value !== true) {
        type.value = val;
      }
    });
    function onShow(evt) {
      showing.value = true;
      emit("show", evt);
    }
    function onHide(evt) {
      showing.value = false;
      type.value = getType();
      emit("hide", evt);
    }
    Object.assign(proxy, {
      show(evt) {
        canShow(evt) === true && popupRef.value.show(evt);
      },
      hide(evt) {
        popupRef.value.hide(evt);
      },
      toggle(evt) {
        popupRef.value.toggle(evt);
      }
    });
    injectProp(proxy, "currentComponent", () => ({
      type: type.value,
      ref: popupRef.value
    }));
    return () => {
      const data = {
        ref: popupRef,
        ...popupProps.value,
        ...attrs,
        onShow,
        onHide
      };
      let component;
      if (type.value === "dialog") {
        component = QDialog;
      } else {
        component = QMenu;
        Object.assign(data, {
          target: props.target,
          contextMenu: props.contextMenu,
          noParentEvent: true,
          separateClosePopup: true
        });
      }
      return h(component, data, slots.default);
    };
  }
});
var Html5QrcodeSupportedFormats;
(function(Html5QrcodeSupportedFormats2) {
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["QR_CODE"] = 0] = "QR_CODE";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["AZTEC"] = 1] = "AZTEC";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["CODABAR"] = 2] = "CODABAR";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["CODE_39"] = 3] = "CODE_39";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["CODE_93"] = 4] = "CODE_93";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["CODE_128"] = 5] = "CODE_128";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["DATA_MATRIX"] = 6] = "DATA_MATRIX";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["MAXICODE"] = 7] = "MAXICODE";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["ITF"] = 8] = "ITF";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["EAN_13"] = 9] = "EAN_13";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["EAN_8"] = 10] = "EAN_8";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["PDF_417"] = 11] = "PDF_417";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["RSS_14"] = 12] = "RSS_14";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["RSS_EXPANDED"] = 13] = "RSS_EXPANDED";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["UPC_A"] = 14] = "UPC_A";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["UPC_E"] = 15] = "UPC_E";
  Html5QrcodeSupportedFormats2[Html5QrcodeSupportedFormats2["UPC_EAN_EXTENSION"] = 16] = "UPC_EAN_EXTENSION";
})(Html5QrcodeSupportedFormats || (Html5QrcodeSupportedFormats = {}));
var html5QrcodeSupportedFormatsTextMap = /* @__PURE__ */ new Map([
  [Html5QrcodeSupportedFormats.QR_CODE, "QR_CODE"],
  [Html5QrcodeSupportedFormats.AZTEC, "AZTEC"],
  [Html5QrcodeSupportedFormats.CODABAR, "CODABAR"],
  [Html5QrcodeSupportedFormats.CODE_39, "CODE_39"],
  [Html5QrcodeSupportedFormats.CODE_93, "CODE_93"],
  [Html5QrcodeSupportedFormats.CODE_128, "CODE_128"],
  [Html5QrcodeSupportedFormats.DATA_MATRIX, "DATA_MATRIX"],
  [Html5QrcodeSupportedFormats.MAXICODE, "MAXICODE"],
  [Html5QrcodeSupportedFormats.ITF, "ITF"],
  [Html5QrcodeSupportedFormats.EAN_13, "EAN_13"],
  [Html5QrcodeSupportedFormats.EAN_8, "EAN_8"],
  [Html5QrcodeSupportedFormats.PDF_417, "PDF_417"],
  [Html5QrcodeSupportedFormats.RSS_14, "RSS_14"],
  [Html5QrcodeSupportedFormats.RSS_EXPANDED, "RSS_EXPANDED"],
  [Html5QrcodeSupportedFormats.UPC_A, "UPC_A"],
  [Html5QrcodeSupportedFormats.UPC_E, "UPC_E"],
  [Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION, "UPC_EAN_EXTENSION"]
]);
var DecodedTextType;
(function(DecodedTextType2) {
  DecodedTextType2[DecodedTextType2["UNKNOWN"] = 0] = "UNKNOWN";
  DecodedTextType2[DecodedTextType2["URL"] = 1] = "URL";
})(DecodedTextType || (DecodedTextType = {}));
function isValidHtml5QrcodeSupportedFormats(format) {
  return Object.values(Html5QrcodeSupportedFormats).includes(format);
}
var Html5QrcodeScanType;
(function(Html5QrcodeScanType2) {
  Html5QrcodeScanType2[Html5QrcodeScanType2["SCAN_TYPE_CAMERA"] = 0] = "SCAN_TYPE_CAMERA";
  Html5QrcodeScanType2[Html5QrcodeScanType2["SCAN_TYPE_FILE"] = 1] = "SCAN_TYPE_FILE";
})(Html5QrcodeScanType || (Html5QrcodeScanType = {}));
var Html5QrcodeConstants = function() {
  function Html5QrcodeConstants2() {
  }
  Html5QrcodeConstants2.GITHUB_PROJECT_URL = "https://github.com/mebjas/html5-qrcode";
  Html5QrcodeConstants2.SCAN_DEFAULT_FPS = 2;
  Html5QrcodeConstants2.DEFAULT_DISABLE_FLIP = false;
  Html5QrcodeConstants2.DEFAULT_REMEMBER_LAST_CAMERA_USED = true;
  Html5QrcodeConstants2.DEFAULT_SUPPORTED_SCAN_TYPE = [
    Html5QrcodeScanType.SCAN_TYPE_CAMERA,
    Html5QrcodeScanType.SCAN_TYPE_FILE
  ];
  return Html5QrcodeConstants2;
}();
var QrcodeResultFormat = function() {
  function QrcodeResultFormat2(format, formatName) {
    this.format = format;
    this.formatName = formatName;
  }
  QrcodeResultFormat2.prototype.toString = function() {
    return this.formatName;
  };
  QrcodeResultFormat2.create = function(format) {
    if (!html5QrcodeSupportedFormatsTextMap.has(format)) {
      throw "".concat(format, " not in html5QrcodeSupportedFormatsTextMap");
    }
    return new QrcodeResultFormat2(format, html5QrcodeSupportedFormatsTextMap.get(format));
  };
  return QrcodeResultFormat2;
}();
var Html5QrcodeResultFactory = function() {
  function Html5QrcodeResultFactory2() {
  }
  Html5QrcodeResultFactory2.createFromText = function(decodedText) {
    var qrcodeResult = {
      text: decodedText
    };
    return {
      decodedText,
      result: qrcodeResult
    };
  };
  Html5QrcodeResultFactory2.createFromQrcodeResult = function(qrcodeResult) {
    return {
      decodedText: qrcodeResult.text,
      result: qrcodeResult
    };
  };
  return Html5QrcodeResultFactory2;
}();
var Html5QrcodeErrorTypes;
(function(Html5QrcodeErrorTypes2) {
  Html5QrcodeErrorTypes2[Html5QrcodeErrorTypes2["UNKWOWN_ERROR"] = 0] = "UNKWOWN_ERROR";
  Html5QrcodeErrorTypes2[Html5QrcodeErrorTypes2["IMPLEMENTATION_ERROR"] = 1] = "IMPLEMENTATION_ERROR";
  Html5QrcodeErrorTypes2[Html5QrcodeErrorTypes2["NO_CODE_FOUND_ERROR"] = 2] = "NO_CODE_FOUND_ERROR";
})(Html5QrcodeErrorTypes || (Html5QrcodeErrorTypes = {}));
var Html5QrcodeErrorFactory = function() {
  function Html5QrcodeErrorFactory2() {
  }
  Html5QrcodeErrorFactory2.createFrom = function(error2) {
    return {
      errorMessage: error2,
      type: Html5QrcodeErrorTypes.UNKWOWN_ERROR
    };
  };
  return Html5QrcodeErrorFactory2;
}();
var BaseLoggger = function() {
  function BaseLoggger2(verbose) {
    this.verbose = verbose;
  }
  BaseLoggger2.prototype.log = function(message) {
    if (this.verbose) {
      console.log(message);
    }
  };
  BaseLoggger2.prototype.warn = function(message) {
    if (this.verbose) {
      console.warn(message);
    }
  };
  BaseLoggger2.prototype.logError = function(message, isExperimental) {
    if (this.verbose || isExperimental === true) {
      console.error(message);
    }
  };
  BaseLoggger2.prototype.logErrors = function(errors) {
    if (errors.length === 0) {
      throw "Logger#logError called without arguments";
    }
    if (this.verbose) {
      console.error(errors);
    }
  };
  return BaseLoggger2;
}();
function isNullOrUndefined(obj) {
  return typeof obj === "undefined" || obj === null;
}
var Html5QrcodeStrings = function() {
  function Html5QrcodeStrings2() {
  }
  Html5QrcodeStrings2.codeParseError = function(exception) {
    return "QR code parse error, error = ".concat(exception);
  };
  Html5QrcodeStrings2.errorGettingUserMedia = function(error2) {
    return "Error getting userMedia, error = ".concat(error2);
  };
  Html5QrcodeStrings2.onlyDeviceSupportedError = function() {
    return "The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string).";
  };
  Html5QrcodeStrings2.cameraStreamingNotSupported = function() {
    return "Camera streaming not supported by the browser.";
  };
  Html5QrcodeStrings2.unableToQuerySupportedDevices = function() {
    return "Unable to query supported devices, unknown error.";
  };
  Html5QrcodeStrings2.insecureContextCameraQueryError = function() {
    return "Camera access is only supported in secure context like https or localhost.";
  };
  Html5QrcodeStrings2.scannerPaused = function() {
    return "Scanner paused";
  };
  return Html5QrcodeStrings2;
}();
var VideoConstraintsUtil = function() {
  function VideoConstraintsUtil2() {
  }
  VideoConstraintsUtil2.isMediaStreamConstraintsValid = function(videoConstraints, logger) {
    if (typeof videoConstraints !== "object") {
      var typeofVideoConstraints = typeof videoConstraints;
      logger.logError("videoConstraints should be of type object, the " + "object passed is of type ".concat(typeofVideoConstraints, "."), true);
      return false;
    }
    var bannedKeys = [
      "autoGainControl",
      "channelCount",
      "echoCancellation",
      "latency",
      "noiseSuppression",
      "sampleRate",
      "sampleSize",
      "volume"
    ];
    var bannedkeysSet = new Set(bannedKeys);
    var keysInVideoConstraints = Object.keys(videoConstraints);
    for (var _i = 0, keysInVideoConstraints_1 = keysInVideoConstraints; _i < keysInVideoConstraints_1.length; _i++) {
      var key = keysInVideoConstraints_1[_i];
      if (bannedkeysSet.has(key)) {
        logger.logError("".concat(key, " is not supported videoConstaints."), true);
        return false;
      }
    }
    return true;
  };
  return VideoConstraintsUtil2;
}();
var zxingJs_umd$1 = { exports: {} };
(function(module, exports) {
  (function(global, factory) {
    factory(exports);
  })(commonjsGlobal, function(exports2) {
    function isNullOrUndefined2(obj) {
      return obj === null || obj === void 0;
    }
    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d, b) {
      d.__proto__ = b;
    } || function(d, b) {
      for (var p in b)
        if (b.hasOwnProperty(p))
          d[p] = b[p];
    };
    function __extends2(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    function fixProto(target, prototype) {
      var setPrototypeOf = Object.setPrototypeOf;
      setPrototypeOf ? setPrototypeOf(target, prototype) : target.__proto__ = prototype;
    }
    function fixStack(target, fn) {
      if (fn === void 0) {
        fn = target.constructor;
      }
      var captureStackTrace = Error.captureStackTrace;
      captureStackTrace && captureStackTrace(target, fn);
    }
    var CustomError = function(_super) {
      __extends2(CustomError2, _super);
      function CustomError2(message) {
        var _newTarget = this.constructor;
        var _this = _super.call(this, message) || this;
        Object.defineProperty(_this, "name", {
          value: _newTarget.name,
          enumerable: false
        });
        fixProto(_this, _newTarget.prototype);
        fixStack(_this);
        return _this;
      }
      return CustomError2;
    }(Error);
    class Exception extends CustomError {
      constructor(message = void 0) {
        super(message);
        this.message = message;
      }
      getKind() {
        const ex = this.constructor;
        return ex.kind;
      }
    }
    Exception.kind = "Exception";
    class ArgumentException extends Exception {
    }
    ArgumentException.kind = "ArgumentException";
    class IllegalArgumentException extends Exception {
    }
    IllegalArgumentException.kind = "IllegalArgumentException";
    class BinaryBitmap {
      constructor(binarizer) {
        this.binarizer = binarizer;
        if (binarizer === null) {
          throw new IllegalArgumentException("Binarizer must be non-null.");
        }
      }
      getWidth() {
        return this.binarizer.getWidth();
      }
      getHeight() {
        return this.binarizer.getHeight();
      }
      getBlackRow(y, row) {
        return this.binarizer.getBlackRow(y, row);
      }
      getBlackMatrix() {
        if (this.matrix === null || this.matrix === void 0) {
          this.matrix = this.binarizer.getBlackMatrix();
        }
        return this.matrix;
      }
      isCropSupported() {
        return this.binarizer.getLuminanceSource().isCropSupported();
      }
      crop(left, top, width, height) {
        const newSource = this.binarizer.getLuminanceSource().crop(left, top, width, height);
        return new BinaryBitmap(this.binarizer.createBinarizer(newSource));
      }
      isRotateSupported() {
        return this.binarizer.getLuminanceSource().isRotateSupported();
      }
      rotateCounterClockwise() {
        const newSource = this.binarizer.getLuminanceSource().rotateCounterClockwise();
        return new BinaryBitmap(this.binarizer.createBinarizer(newSource));
      }
      rotateCounterClockwise45() {
        const newSource = this.binarizer.getLuminanceSource().rotateCounterClockwise45();
        return new BinaryBitmap(this.binarizer.createBinarizer(newSource));
      }
      toString() {
        try {
          return this.getBlackMatrix().toString();
        } catch (e) {
          return "";
        }
      }
    }
    class ChecksumException extends Exception {
      static getChecksumInstance() {
        return new ChecksumException();
      }
    }
    ChecksumException.kind = "ChecksumException";
    class Binarizer {
      constructor(source) {
        this.source = source;
      }
      getLuminanceSource() {
        return this.source;
      }
      getWidth() {
        return this.source.getWidth();
      }
      getHeight() {
        return this.source.getHeight();
      }
    }
    class System {
      static arraycopy(src, srcPos, dest, destPos, length) {
        while (length--) {
          dest[destPos++] = src[srcPos++];
        }
      }
      static currentTimeMillis() {
        return Date.now();
      }
    }
    class IndexOutOfBoundsException extends Exception {
    }
    IndexOutOfBoundsException.kind = "IndexOutOfBoundsException";
    class ArrayIndexOutOfBoundsException extends IndexOutOfBoundsException {
      constructor(index = void 0, message = void 0) {
        super(message);
        this.index = index;
        this.message = message;
      }
    }
    ArrayIndexOutOfBoundsException.kind = "ArrayIndexOutOfBoundsException";
    class Arrays {
      static fill(a, val) {
        for (let i = 0, len = a.length; i < len; i++)
          a[i] = val;
      }
      static fillWithin(a, fromIndex, toIndex, val) {
        Arrays.rangeCheck(a.length, fromIndex, toIndex);
        for (let i = fromIndex; i < toIndex; i++)
          a[i] = val;
      }
      static rangeCheck(arrayLength, fromIndex, toIndex) {
        if (fromIndex > toIndex) {
          throw new IllegalArgumentException("fromIndex(" + fromIndex + ") > toIndex(" + toIndex + ")");
        }
        if (fromIndex < 0) {
          throw new ArrayIndexOutOfBoundsException(fromIndex);
        }
        if (toIndex > arrayLength) {
          throw new ArrayIndexOutOfBoundsException(toIndex);
        }
      }
      static asList(...args) {
        return args;
      }
      static create(rows, cols, value) {
        let arr = Array.from({ length: rows });
        return arr.map((x) => Array.from({ length: cols }).fill(value));
      }
      static createInt32Array(rows, cols, value) {
        let arr = Array.from({ length: rows });
        return arr.map((x) => Int32Array.from({ length: cols }).fill(value));
      }
      static equals(first, second) {
        if (!first) {
          return false;
        }
        if (!second) {
          return false;
        }
        if (!first.length) {
          return false;
        }
        if (!second.length) {
          return false;
        }
        if (first.length !== second.length) {
          return false;
        }
        for (let i = 0, length = first.length; i < length; i++) {
          if (first[i] !== second[i]) {
            return false;
          }
        }
        return true;
      }
      static hashCode(a) {
        if (a === null) {
          return 0;
        }
        let result = 1;
        for (const element of a) {
          result = 31 * result + element;
        }
        return result;
      }
      static fillUint8Array(a, value) {
        for (let i = 0; i !== a.length; i++) {
          a[i] = value;
        }
      }
      static copyOf(original, newLength) {
        return original.slice(0, newLength);
      }
      static copyOfUint8Array(original, newLength) {
        if (original.length <= newLength) {
          const newArray = new Uint8Array(newLength);
          newArray.set(original);
          return newArray;
        }
        return original.slice(0, newLength);
      }
      static copyOfRange(original, from, to) {
        const newLength = to - from;
        const copy = new Int32Array(newLength);
        System.arraycopy(original, from, copy, 0, newLength);
        return copy;
      }
      static binarySearch(ar, el, comparator) {
        if (void 0 === comparator) {
          comparator = Arrays.numberComparator;
        }
        let m = 0;
        let n = ar.length - 1;
        while (m <= n) {
          const k = n + m >> 1;
          const cmp = comparator(el, ar[k]);
          if (cmp > 0) {
            m = k + 1;
          } else if (cmp < 0) {
            n = k - 1;
          } else {
            return k;
          }
        }
        return -m - 1;
      }
      static numberComparator(a, b) {
        return a - b;
      }
    }
    class Integer {
      static numberOfTrailingZeros(i) {
        let y;
        if (i === 0)
          return 32;
        let n = 31;
        y = i << 16;
        if (y !== 0) {
          n -= 16;
          i = y;
        }
        y = i << 8;
        if (y !== 0) {
          n -= 8;
          i = y;
        }
        y = i << 4;
        if (y !== 0) {
          n -= 4;
          i = y;
        }
        y = i << 2;
        if (y !== 0) {
          n -= 2;
          i = y;
        }
        return n - (i << 1 >>> 31);
      }
      static numberOfLeadingZeros(i) {
        if (i === 0) {
          return 32;
        }
        let n = 1;
        if (i >>> 16 === 0) {
          n += 16;
          i <<= 16;
        }
        if (i >>> 24 === 0) {
          n += 8;
          i <<= 8;
        }
        if (i >>> 28 === 0) {
          n += 4;
          i <<= 4;
        }
        if (i >>> 30 === 0) {
          n += 2;
          i <<= 2;
        }
        n -= i >>> 31;
        return n;
      }
      static toHexString(i) {
        return i.toString(16);
      }
      static toBinaryString(intNumber) {
        return String(parseInt(String(intNumber), 2));
      }
      static bitCount(i) {
        i = i - (i >>> 1 & 1431655765);
        i = (i & 858993459) + (i >>> 2 & 858993459);
        i = i + (i >>> 4) & 252645135;
        i = i + (i >>> 8);
        i = i + (i >>> 16);
        return i & 63;
      }
      static truncDivision(dividend, divisor) {
        return Math.trunc(dividend / divisor);
      }
      static parseInt(num, radix = void 0) {
        return parseInt(num, radix);
      }
    }
    Integer.MIN_VALUE_32_BITS = -2147483648;
    Integer.MAX_VALUE = Number.MAX_SAFE_INTEGER;
    class BitArray {
      constructor(size, bits) {
        if (void 0 === size) {
          this.size = 0;
          this.bits = new Int32Array(1);
        } else {
          this.size = size;
          if (void 0 === bits || null === bits) {
            this.bits = BitArray.makeArray(size);
          } else {
            this.bits = bits;
          }
        }
      }
      getSize() {
        return this.size;
      }
      getSizeInBytes() {
        return Math.floor((this.size + 7) / 8);
      }
      ensureCapacity(size) {
        if (size > this.bits.length * 32) {
          const newBits = BitArray.makeArray(size);
          System.arraycopy(this.bits, 0, newBits, 0, this.bits.length);
          this.bits = newBits;
        }
      }
      get(i) {
        return (this.bits[Math.floor(i / 32)] & 1 << (i & 31)) !== 0;
      }
      set(i) {
        this.bits[Math.floor(i / 32)] |= 1 << (i & 31);
      }
      flip(i) {
        this.bits[Math.floor(i / 32)] ^= 1 << (i & 31);
      }
      getNextSet(from) {
        const size = this.size;
        if (from >= size) {
          return size;
        }
        const bits = this.bits;
        let bitsOffset = Math.floor(from / 32);
        let currentBits = bits[bitsOffset];
        currentBits &= ~((1 << (from & 31)) - 1);
        const length = bits.length;
        while (currentBits === 0) {
          if (++bitsOffset === length) {
            return size;
          }
          currentBits = bits[bitsOffset];
        }
        const result = bitsOffset * 32 + Integer.numberOfTrailingZeros(currentBits);
        return result > size ? size : result;
      }
      getNextUnset(from) {
        const size = this.size;
        if (from >= size) {
          return size;
        }
        const bits = this.bits;
        let bitsOffset = Math.floor(from / 32);
        let currentBits = ~bits[bitsOffset];
        currentBits &= ~((1 << (from & 31)) - 1);
        const length = bits.length;
        while (currentBits === 0) {
          if (++bitsOffset === length) {
            return size;
          }
          currentBits = ~bits[bitsOffset];
        }
        const result = bitsOffset * 32 + Integer.numberOfTrailingZeros(currentBits);
        return result > size ? size : result;
      }
      setBulk(i, newBits) {
        this.bits[Math.floor(i / 32)] = newBits;
      }
      setRange(start, end) {
        if (end < start || start < 0 || end > this.size) {
          throw new IllegalArgumentException();
        }
        if (end === start) {
          return;
        }
        end--;
        const firstInt = Math.floor(start / 32);
        const lastInt = Math.floor(end / 32);
        const bits = this.bits;
        for (let i = firstInt; i <= lastInt; i++) {
          const firstBit = i > firstInt ? 0 : start & 31;
          const lastBit = i < lastInt ? 31 : end & 31;
          const mask = (2 << lastBit) - (1 << firstBit);
          bits[i] |= mask;
        }
      }
      clear() {
        const max = this.bits.length;
        const bits = this.bits;
        for (let i = 0; i < max; i++) {
          bits[i] = 0;
        }
      }
      isRange(start, end, value) {
        if (end < start || start < 0 || end > this.size) {
          throw new IllegalArgumentException();
        }
        if (end === start) {
          return true;
        }
        end--;
        const firstInt = Math.floor(start / 32);
        const lastInt = Math.floor(end / 32);
        const bits = this.bits;
        for (let i = firstInt; i <= lastInt; i++) {
          const firstBit = i > firstInt ? 0 : start & 31;
          const lastBit = i < lastInt ? 31 : end & 31;
          const mask = (2 << lastBit) - (1 << firstBit) & 4294967295;
          if ((bits[i] & mask) !== (value ? mask : 0)) {
            return false;
          }
        }
        return true;
      }
      appendBit(bit) {
        this.ensureCapacity(this.size + 1);
        if (bit) {
          this.bits[Math.floor(this.size / 32)] |= 1 << (this.size & 31);
        }
        this.size++;
      }
      appendBits(value, numBits) {
        if (numBits < 0 || numBits > 32) {
          throw new IllegalArgumentException("Num bits must be between 0 and 32");
        }
        this.ensureCapacity(this.size + numBits);
        for (let numBitsLeft = numBits; numBitsLeft > 0; numBitsLeft--) {
          this.appendBit((value >> numBitsLeft - 1 & 1) === 1);
        }
      }
      appendBitArray(other) {
        const otherSize = other.size;
        this.ensureCapacity(this.size + otherSize);
        for (let i = 0; i < otherSize; i++) {
          this.appendBit(other.get(i));
        }
      }
      xor(other) {
        if (this.size !== other.size) {
          throw new IllegalArgumentException("Sizes don't match");
        }
        const bits = this.bits;
        for (let i = 0, length = bits.length; i < length; i++) {
          bits[i] ^= other.bits[i];
        }
      }
      toBytes(bitOffset, array, offset, numBytes) {
        for (let i = 0; i < numBytes; i++) {
          let theByte = 0;
          for (let j = 0; j < 8; j++) {
            if (this.get(bitOffset)) {
              theByte |= 1 << 7 - j;
            }
            bitOffset++;
          }
          array[offset + i] = theByte;
        }
      }
      getBitArray() {
        return this.bits;
      }
      reverse() {
        const newBits = new Int32Array(this.bits.length);
        const len = Math.floor((this.size - 1) / 32);
        const oldBitsLen = len + 1;
        const bits = this.bits;
        for (let i = 0; i < oldBitsLen; i++) {
          let x = bits[i];
          x = x >> 1 & 1431655765 | (x & 1431655765) << 1;
          x = x >> 2 & 858993459 | (x & 858993459) << 2;
          x = x >> 4 & 252645135 | (x & 252645135) << 4;
          x = x >> 8 & 16711935 | (x & 16711935) << 8;
          x = x >> 16 & 65535 | (x & 65535) << 16;
          newBits[len - i] = x;
        }
        if (this.size !== oldBitsLen * 32) {
          const leftOffset = oldBitsLen * 32 - this.size;
          let currentInt = newBits[0] >>> leftOffset;
          for (let i = 1; i < oldBitsLen; i++) {
            const nextInt = newBits[i];
            currentInt |= nextInt << 32 - leftOffset;
            newBits[i - 1] = currentInt;
            currentInt = nextInt >>> leftOffset;
          }
          newBits[oldBitsLen - 1] = currentInt;
        }
        this.bits = newBits;
      }
      static makeArray(size) {
        return new Int32Array(Math.floor((size + 31) / 32));
      }
      equals(o) {
        if (!(o instanceof BitArray)) {
          return false;
        }
        const other = o;
        return this.size === other.size && Arrays.equals(this.bits, other.bits);
      }
      hashCode() {
        return 31 * this.size + Arrays.hashCode(this.bits);
      }
      toString() {
        let result = "";
        for (let i = 0, size = this.size; i < size; i++) {
          if ((i & 7) === 0) {
            result += " ";
          }
          result += this.get(i) ? "X" : ".";
        }
        return result;
      }
      clone() {
        return new BitArray(this.size, this.bits.slice());
      }
    }
    var DecodeHintType;
    (function(DecodeHintType2) {
      DecodeHintType2[DecodeHintType2["OTHER"] = 0] = "OTHER";
      DecodeHintType2[DecodeHintType2["PURE_BARCODE"] = 1] = "PURE_BARCODE";
      DecodeHintType2[DecodeHintType2["POSSIBLE_FORMATS"] = 2] = "POSSIBLE_FORMATS";
      DecodeHintType2[DecodeHintType2["TRY_HARDER"] = 3] = "TRY_HARDER";
      DecodeHintType2[DecodeHintType2["CHARACTER_SET"] = 4] = "CHARACTER_SET";
      DecodeHintType2[DecodeHintType2["ALLOWED_LENGTHS"] = 5] = "ALLOWED_LENGTHS";
      DecodeHintType2[DecodeHintType2["ASSUME_CODE_39_CHECK_DIGIT"] = 6] = "ASSUME_CODE_39_CHECK_DIGIT";
      DecodeHintType2[DecodeHintType2["ASSUME_GS1"] = 7] = "ASSUME_GS1";
      DecodeHintType2[DecodeHintType2["RETURN_CODABAR_START_END"] = 8] = "RETURN_CODABAR_START_END";
      DecodeHintType2[DecodeHintType2["NEED_RESULT_POINT_CALLBACK"] = 9] = "NEED_RESULT_POINT_CALLBACK";
      DecodeHintType2[DecodeHintType2["ALLOWED_EAN_EXTENSIONS"] = 10] = "ALLOWED_EAN_EXTENSIONS";
    })(DecodeHintType || (DecodeHintType = {}));
    var DecodeHintType$1 = DecodeHintType;
    class FormatException extends Exception {
      static getFormatInstance() {
        return new FormatException();
      }
    }
    FormatException.kind = "FormatException";
    var CharacterSetValueIdentifiers;
    (function(CharacterSetValueIdentifiers2) {
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Cp437"] = 0] = "Cp437";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_1"] = 1] = "ISO8859_1";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_2"] = 2] = "ISO8859_2";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_3"] = 3] = "ISO8859_3";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_4"] = 4] = "ISO8859_4";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_5"] = 5] = "ISO8859_5";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_6"] = 6] = "ISO8859_6";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_7"] = 7] = "ISO8859_7";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_8"] = 8] = "ISO8859_8";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_9"] = 9] = "ISO8859_9";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_10"] = 10] = "ISO8859_10";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_11"] = 11] = "ISO8859_11";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_13"] = 12] = "ISO8859_13";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_14"] = 13] = "ISO8859_14";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_15"] = 14] = "ISO8859_15";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ISO8859_16"] = 15] = "ISO8859_16";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["SJIS"] = 16] = "SJIS";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Cp1250"] = 17] = "Cp1250";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Cp1251"] = 18] = "Cp1251";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Cp1252"] = 19] = "Cp1252";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Cp1256"] = 20] = "Cp1256";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["UnicodeBigUnmarked"] = 21] = "UnicodeBigUnmarked";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["UTF8"] = 22] = "UTF8";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["ASCII"] = 23] = "ASCII";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["Big5"] = 24] = "Big5";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["GB18030"] = 25] = "GB18030";
      CharacterSetValueIdentifiers2[CharacterSetValueIdentifiers2["EUC_KR"] = 26] = "EUC_KR";
    })(CharacterSetValueIdentifiers || (CharacterSetValueIdentifiers = {}));
    class CharacterSetECI {
      constructor(valueIdentifier, valuesParam, name, ...otherEncodingNames) {
        this.valueIdentifier = valueIdentifier;
        this.name = name;
        if (typeof valuesParam === "number") {
          this.values = Int32Array.from([valuesParam]);
        } else {
          this.values = valuesParam;
        }
        this.otherEncodingNames = otherEncodingNames;
        CharacterSetECI.VALUE_IDENTIFIER_TO_ECI.set(valueIdentifier, this);
        CharacterSetECI.NAME_TO_ECI.set(name, this);
        const values = this.values;
        for (let i = 0, length = values.length; i !== length; i++) {
          const v = values[i];
          CharacterSetECI.VALUES_TO_ECI.set(v, this);
        }
        for (const otherName of otherEncodingNames) {
          CharacterSetECI.NAME_TO_ECI.set(otherName, this);
        }
      }
      getValueIdentifier() {
        return this.valueIdentifier;
      }
      getName() {
        return this.name;
      }
      getValue() {
        return this.values[0];
      }
      static getCharacterSetECIByValue(value) {
        if (value < 0 || value >= 900) {
          throw new FormatException("incorect value");
        }
        const characterSet = CharacterSetECI.VALUES_TO_ECI.get(value);
        if (void 0 === characterSet) {
          throw new FormatException("incorect value");
        }
        return characterSet;
      }
      static getCharacterSetECIByName(name) {
        const characterSet = CharacterSetECI.NAME_TO_ECI.get(name);
        if (void 0 === characterSet) {
          throw new FormatException("incorect value");
        }
        return characterSet;
      }
      equals(o) {
        if (!(o instanceof CharacterSetECI)) {
          return false;
        }
        const other = o;
        return this.getName() === other.getName();
      }
    }
    CharacterSetECI.VALUE_IDENTIFIER_TO_ECI = /* @__PURE__ */ new Map();
    CharacterSetECI.VALUES_TO_ECI = /* @__PURE__ */ new Map();
    CharacterSetECI.NAME_TO_ECI = /* @__PURE__ */ new Map();
    CharacterSetECI.Cp437 = new CharacterSetECI(CharacterSetValueIdentifiers.Cp437, Int32Array.from([0, 2]), "Cp437");
    CharacterSetECI.ISO8859_1 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_1, Int32Array.from([1, 3]), "ISO-8859-1", "ISO88591", "ISO8859_1");
    CharacterSetECI.ISO8859_2 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_2, 4, "ISO-8859-2", "ISO88592", "ISO8859_2");
    CharacterSetECI.ISO8859_3 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_3, 5, "ISO-8859-3", "ISO88593", "ISO8859_3");
    CharacterSetECI.ISO8859_4 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_4, 6, "ISO-8859-4", "ISO88594", "ISO8859_4");
    CharacterSetECI.ISO8859_5 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_5, 7, "ISO-8859-5", "ISO88595", "ISO8859_5");
    CharacterSetECI.ISO8859_6 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_6, 8, "ISO-8859-6", "ISO88596", "ISO8859_6");
    CharacterSetECI.ISO8859_7 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_7, 9, "ISO-8859-7", "ISO88597", "ISO8859_7");
    CharacterSetECI.ISO8859_8 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_8, 10, "ISO-8859-8", "ISO88598", "ISO8859_8");
    CharacterSetECI.ISO8859_9 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_9, 11, "ISO-8859-9", "ISO88599", "ISO8859_9");
    CharacterSetECI.ISO8859_10 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_10, 12, "ISO-8859-10", "ISO885910", "ISO8859_10");
    CharacterSetECI.ISO8859_11 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_11, 13, "ISO-8859-11", "ISO885911", "ISO8859_11");
    CharacterSetECI.ISO8859_13 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_13, 15, "ISO-8859-13", "ISO885913", "ISO8859_13");
    CharacterSetECI.ISO8859_14 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_14, 16, "ISO-8859-14", "ISO885914", "ISO8859_14");
    CharacterSetECI.ISO8859_15 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_15, 17, "ISO-8859-15", "ISO885915", "ISO8859_15");
    CharacterSetECI.ISO8859_16 = new CharacterSetECI(CharacterSetValueIdentifiers.ISO8859_16, 18, "ISO-8859-16", "ISO885916", "ISO8859_16");
    CharacterSetECI.SJIS = new CharacterSetECI(CharacterSetValueIdentifiers.SJIS, 20, "SJIS", "Shift_JIS");
    CharacterSetECI.Cp1250 = new CharacterSetECI(CharacterSetValueIdentifiers.Cp1250, 21, "Cp1250", "windows-1250");
    CharacterSetECI.Cp1251 = new CharacterSetECI(CharacterSetValueIdentifiers.Cp1251, 22, "Cp1251", "windows-1251");
    CharacterSetECI.Cp1252 = new CharacterSetECI(CharacterSetValueIdentifiers.Cp1252, 23, "Cp1252", "windows-1252");
    CharacterSetECI.Cp1256 = new CharacterSetECI(CharacterSetValueIdentifiers.Cp1256, 24, "Cp1256", "windows-1256");
    CharacterSetECI.UnicodeBigUnmarked = new CharacterSetECI(CharacterSetValueIdentifiers.UnicodeBigUnmarked, 25, "UnicodeBigUnmarked", "UTF-16BE", "UnicodeBig");
    CharacterSetECI.UTF8 = new CharacterSetECI(CharacterSetValueIdentifiers.UTF8, 26, "UTF8", "UTF-8");
    CharacterSetECI.ASCII = new CharacterSetECI(CharacterSetValueIdentifiers.ASCII, Int32Array.from([27, 170]), "ASCII", "US-ASCII");
    CharacterSetECI.Big5 = new CharacterSetECI(CharacterSetValueIdentifiers.Big5, 28, "Big5");
    CharacterSetECI.GB18030 = new CharacterSetECI(CharacterSetValueIdentifiers.GB18030, 29, "GB18030", "GB2312", "EUC_CN", "GBK");
    CharacterSetECI.EUC_KR = new CharacterSetECI(CharacterSetValueIdentifiers.EUC_KR, 30, "EUC_KR", "EUC-KR");
    class UnsupportedOperationException extends Exception {
    }
    UnsupportedOperationException.kind = "UnsupportedOperationException";
    class StringEncoding {
      static decode(bytes, encoding) {
        const encodingName = this.encodingName(encoding);
        if (this.customDecoder) {
          return this.customDecoder(bytes, encodingName);
        }
        if (typeof TextDecoder === "undefined" || this.shouldDecodeOnFallback(encodingName)) {
          return this.decodeFallback(bytes, encodingName);
        }
        return new TextDecoder(encodingName).decode(bytes);
      }
      static shouldDecodeOnFallback(encodingName) {
        return !StringEncoding.isBrowser() && encodingName === "ISO-8859-1";
      }
      static encode(s, encoding) {
        const encodingName = this.encodingName(encoding);
        if (this.customEncoder) {
          return this.customEncoder(s, encodingName);
        }
        if (typeof TextEncoder === "undefined") {
          return this.encodeFallback(s);
        }
        return new TextEncoder().encode(s);
      }
      static isBrowser() {
        return typeof window !== "undefined" && {}.toString.call(window) === "[object Window]";
      }
      static encodingName(encoding) {
        return typeof encoding === "string" ? encoding : encoding.getName();
      }
      static encodingCharacterSet(encoding) {
        if (encoding instanceof CharacterSetECI) {
          return encoding;
        }
        return CharacterSetECI.getCharacterSetECIByName(encoding);
      }
      static decodeFallback(bytes, encoding) {
        const characterSet = this.encodingCharacterSet(encoding);
        if (StringEncoding.isDecodeFallbackSupported(characterSet)) {
          let s = "";
          for (let i = 0, length = bytes.length; i < length; i++) {
            let h2 = bytes[i].toString(16);
            if (h2.length < 2) {
              h2 = "0" + h2;
            }
            s += "%" + h2;
          }
          return decodeURIComponent(s);
        }
        if (characterSet.equals(CharacterSetECI.UnicodeBigUnmarked)) {
          return String.fromCharCode.apply(null, new Uint16Array(bytes.buffer));
        }
        throw new UnsupportedOperationException(`Encoding ${this.encodingName(encoding)} not supported by fallback.`);
      }
      static isDecodeFallbackSupported(characterSet) {
        return characterSet.equals(CharacterSetECI.UTF8) || characterSet.equals(CharacterSetECI.ISO8859_1) || characterSet.equals(CharacterSetECI.ASCII);
      }
      static encodeFallback(s) {
        const encodedURIstring = btoa(unescape(encodeURIComponent(s)));
        const charList = encodedURIstring.split("");
        const uintArray = [];
        for (let i = 0; i < charList.length; i++) {
          uintArray.push(charList[i].charCodeAt(0));
        }
        return new Uint8Array(uintArray);
      }
    }
    class StringUtils {
      static castAsNonUtf8Char(code, encoding = null) {
        const e = encoding ? encoding.getName() : this.ISO88591;
        return StringEncoding.decode(new Uint8Array([code]), e);
      }
      static guessEncoding(bytes, hints) {
        if (hints !== null && hints !== void 0 && void 0 !== hints.get(DecodeHintType$1.CHARACTER_SET)) {
          return hints.get(DecodeHintType$1.CHARACTER_SET).toString();
        }
        const length = bytes.length;
        let canBeISO88591 = true;
        let canBeShiftJIS = true;
        let canBeUTF8 = true;
        let utf8BytesLeft = 0;
        let utf2BytesChars = 0;
        let utf3BytesChars = 0;
        let utf4BytesChars = 0;
        let sjisBytesLeft = 0;
        let sjisKatakanaChars = 0;
        let sjisCurKatakanaWordLength = 0;
        let sjisCurDoubleBytesWordLength = 0;
        let sjisMaxKatakanaWordLength = 0;
        let sjisMaxDoubleBytesWordLength = 0;
        let isoHighOther = 0;
        const utf8bom = bytes.length > 3 && bytes[0] === 239 && bytes[1] === 187 && bytes[2] === 191;
        for (let i = 0; i < length && (canBeISO88591 || canBeShiftJIS || canBeUTF8); i++) {
          const value = bytes[i] & 255;
          if (canBeUTF8) {
            if (utf8BytesLeft > 0) {
              if ((value & 128) === 0) {
                canBeUTF8 = false;
              } else {
                utf8BytesLeft--;
              }
            } else if ((value & 128) !== 0) {
              if ((value & 64) === 0) {
                canBeUTF8 = false;
              } else {
                utf8BytesLeft++;
                if ((value & 32) === 0) {
                  utf2BytesChars++;
                } else {
                  utf8BytesLeft++;
                  if ((value & 16) === 0) {
                    utf3BytesChars++;
                  } else {
                    utf8BytesLeft++;
                    if ((value & 8) === 0) {
                      utf4BytesChars++;
                    } else {
                      canBeUTF8 = false;
                    }
                  }
                }
              }
            }
          }
          if (canBeISO88591) {
            if (value > 127 && value < 160) {
              canBeISO88591 = false;
            } else if (value > 159) {
              if (value < 192 || value === 215 || value === 247) {
                isoHighOther++;
              }
            }
          }
          if (canBeShiftJIS) {
            if (sjisBytesLeft > 0) {
              if (value < 64 || value === 127 || value > 252) {
                canBeShiftJIS = false;
              } else {
                sjisBytesLeft--;
              }
            } else if (value === 128 || value === 160 || value > 239) {
              canBeShiftJIS = false;
            } else if (value > 160 && value < 224) {
              sjisKatakanaChars++;
              sjisCurDoubleBytesWordLength = 0;
              sjisCurKatakanaWordLength++;
              if (sjisCurKatakanaWordLength > sjisMaxKatakanaWordLength) {
                sjisMaxKatakanaWordLength = sjisCurKatakanaWordLength;
              }
            } else if (value > 127) {
              sjisBytesLeft++;
              sjisCurKatakanaWordLength = 0;
              sjisCurDoubleBytesWordLength++;
              if (sjisCurDoubleBytesWordLength > sjisMaxDoubleBytesWordLength) {
                sjisMaxDoubleBytesWordLength = sjisCurDoubleBytesWordLength;
              }
            } else {
              sjisCurKatakanaWordLength = 0;
              sjisCurDoubleBytesWordLength = 0;
            }
          }
        }
        if (canBeUTF8 && utf8BytesLeft > 0) {
          canBeUTF8 = false;
        }
        if (canBeShiftJIS && sjisBytesLeft > 0) {
          canBeShiftJIS = false;
        }
        if (canBeUTF8 && (utf8bom || utf2BytesChars + utf3BytesChars + utf4BytesChars > 0)) {
          return StringUtils.UTF8;
        }
        if (canBeShiftJIS && (StringUtils.ASSUME_SHIFT_JIS || sjisMaxKatakanaWordLength >= 3 || sjisMaxDoubleBytesWordLength >= 3)) {
          return StringUtils.SHIFT_JIS;
        }
        if (canBeISO88591 && canBeShiftJIS) {
          return sjisMaxKatakanaWordLength === 2 && sjisKatakanaChars === 2 || isoHighOther * 10 >= length ? StringUtils.SHIFT_JIS : StringUtils.ISO88591;
        }
        if (canBeISO88591) {
          return StringUtils.ISO88591;
        }
        if (canBeShiftJIS) {
          return StringUtils.SHIFT_JIS;
        }
        if (canBeUTF8) {
          return StringUtils.UTF8;
        }
        return StringUtils.PLATFORM_DEFAULT_ENCODING;
      }
      static format(append, ...args) {
        let i = -1;
        function callback(exp, p0, p1, p2, p3, p4) {
          if (exp === "%%")
            return "%";
          if (args[++i] === void 0)
            return void 0;
          exp = p2 ? parseInt(p2.substr(1)) : void 0;
          let base = p3 ? parseInt(p3.substr(1)) : void 0;
          let val;
          switch (p4) {
            case "s":
              val = args[i];
              break;
            case "c":
              val = args[i][0];
              break;
            case "f":
              val = parseFloat(args[i]).toFixed(exp);
              break;
            case "p":
              val = parseFloat(args[i]).toPrecision(exp);
              break;
            case "e":
              val = parseFloat(args[i]).toExponential(exp);
              break;
            case "x":
              val = parseInt(args[i]).toString(base ? base : 16);
              break;
            case "d":
              val = parseFloat(parseInt(args[i], base ? base : 10).toPrecision(exp)).toFixed(0);
              break;
          }
          val = typeof val === "object" ? JSON.stringify(val) : (+val).toString(base);
          let size = parseInt(p1);
          let ch = p1 && p1[0] + "" === "0" ? "0" : " ";
          while (val.length < size)
            val = p0 !== void 0 ? val + ch : ch + val;
          return val;
        }
        let regex = /%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;
        return append.replace(regex, callback);
      }
      static getBytes(str, encoding) {
        return StringEncoding.encode(str, encoding);
      }
      static getCharCode(str, index = 0) {
        return str.charCodeAt(index);
      }
      static getCharAt(charCode) {
        return String.fromCharCode(charCode);
      }
    }
    StringUtils.SHIFT_JIS = CharacterSetECI.SJIS.getName();
    StringUtils.GB2312 = "GB2312";
    StringUtils.ISO88591 = CharacterSetECI.ISO8859_1.getName();
    StringUtils.EUC_JP = "EUC_JP";
    StringUtils.UTF8 = CharacterSetECI.UTF8.getName();
    StringUtils.PLATFORM_DEFAULT_ENCODING = StringUtils.UTF8;
    StringUtils.ASSUME_SHIFT_JIS = false;
    class StringBuilder {
      constructor(value = "") {
        this.value = value;
      }
      enableDecoding(encoding) {
        this.encoding = encoding;
        return this;
      }
      append(s) {
        if (typeof s === "string") {
          this.value += s.toString();
        } else if (this.encoding) {
          this.value += StringUtils.castAsNonUtf8Char(s, this.encoding);
        } else {
          this.value += String.fromCharCode(s);
        }
        return this;
      }
      appendChars(str, offset, len) {
        for (let i = offset; offset < offset + len; i++) {
          this.append(str[i]);
        }
        return this;
      }
      length() {
        return this.value.length;
      }
      charAt(n) {
        return this.value.charAt(n);
      }
      deleteCharAt(n) {
        this.value = this.value.substr(0, n) + this.value.substring(n + 1);
      }
      setCharAt(n, c) {
        this.value = this.value.substr(0, n) + c + this.value.substr(n + 1);
      }
      substring(start, end) {
        return this.value.substring(start, end);
      }
      setLengthToZero() {
        this.value = "";
      }
      toString() {
        return this.value;
      }
      insert(n, c) {
        this.value = this.value.substr(0, n) + c + this.value.substr(n + c.length);
      }
    }
    class BitMatrix {
      constructor(width, height, rowSize, bits) {
        this.width = width;
        this.height = height;
        this.rowSize = rowSize;
        this.bits = bits;
        if (void 0 === height || null === height) {
          height = width;
        }
        this.height = height;
        if (width < 1 || height < 1) {
          throw new IllegalArgumentException("Both dimensions must be greater than 0");
        }
        if (void 0 === rowSize || null === rowSize) {
          rowSize = Math.floor((width + 31) / 32);
        }
        this.rowSize = rowSize;
        if (void 0 === bits || null === bits) {
          this.bits = new Int32Array(this.rowSize * this.height);
        }
      }
      static parseFromBooleanArray(image) {
        const height = image.length;
        const width = image[0].length;
        const bits = new BitMatrix(width, height);
        for (let i = 0; i < height; i++) {
          const imageI = image[i];
          for (let j = 0; j < width; j++) {
            if (imageI[j]) {
              bits.set(j, i);
            }
          }
        }
        return bits;
      }
      static parseFromString(stringRepresentation, setString, unsetString) {
        if (stringRepresentation === null) {
          throw new IllegalArgumentException("stringRepresentation cannot be null");
        }
        const bits = new Array(stringRepresentation.length);
        let bitsPos = 0;
        let rowStartPos = 0;
        let rowLength = -1;
        let nRows = 0;
        let pos = 0;
        while (pos < stringRepresentation.length) {
          if (stringRepresentation.charAt(pos) === "\n" || stringRepresentation.charAt(pos) === "\r") {
            if (bitsPos > rowStartPos) {
              if (rowLength === -1) {
                rowLength = bitsPos - rowStartPos;
              } else if (bitsPos - rowStartPos !== rowLength) {
                throw new IllegalArgumentException("row lengths do not match");
              }
              rowStartPos = bitsPos;
              nRows++;
            }
            pos++;
          } else if (stringRepresentation.substring(pos, pos + setString.length) === setString) {
            pos += setString.length;
            bits[bitsPos] = true;
            bitsPos++;
          } else if (stringRepresentation.substring(pos, pos + unsetString.length) === unsetString) {
            pos += unsetString.length;
            bits[bitsPos] = false;
            bitsPos++;
          } else {
            throw new IllegalArgumentException("illegal character encountered: " + stringRepresentation.substring(pos));
          }
        }
        if (bitsPos > rowStartPos) {
          if (rowLength === -1) {
            rowLength = bitsPos - rowStartPos;
          } else if (bitsPos - rowStartPos !== rowLength) {
            throw new IllegalArgumentException("row lengths do not match");
          }
          nRows++;
        }
        const matrix = new BitMatrix(rowLength, nRows);
        for (let i = 0; i < bitsPos; i++) {
          if (bits[i]) {
            matrix.set(Math.floor(i % rowLength), Math.floor(i / rowLength));
          }
        }
        return matrix;
      }
      get(x, y) {
        const offset = y * this.rowSize + Math.floor(x / 32);
        return (this.bits[offset] >>> (x & 31) & 1) !== 0;
      }
      set(x, y) {
        const offset = y * this.rowSize + Math.floor(x / 32);
        this.bits[offset] |= 1 << (x & 31) & 4294967295;
      }
      unset(x, y) {
        const offset = y * this.rowSize + Math.floor(x / 32);
        this.bits[offset] &= ~(1 << (x & 31) & 4294967295);
      }
      flip(x, y) {
        const offset = y * this.rowSize + Math.floor(x / 32);
        this.bits[offset] ^= 1 << (x & 31) & 4294967295;
      }
      xor(mask) {
        if (this.width !== mask.getWidth() || this.height !== mask.getHeight() || this.rowSize !== mask.getRowSize()) {
          throw new IllegalArgumentException("input matrix dimensions do not match");
        }
        const rowArray = new BitArray(Math.floor(this.width / 32) + 1);
        const rowSize = this.rowSize;
        const bits = this.bits;
        for (let y = 0, height = this.height; y < height; y++) {
          const offset = y * rowSize;
          const row = mask.getRow(y, rowArray).getBitArray();
          for (let x = 0; x < rowSize; x++) {
            bits[offset + x] ^= row[x];
          }
        }
      }
      clear() {
        const bits = this.bits;
        const max = bits.length;
        for (let i = 0; i < max; i++) {
          bits[i] = 0;
        }
      }
      setRegion(left, top, width, height) {
        if (top < 0 || left < 0) {
          throw new IllegalArgumentException("Left and top must be nonnegative");
        }
        if (height < 1 || width < 1) {
          throw new IllegalArgumentException("Height and width must be at least 1");
        }
        const right = left + width;
        const bottom = top + height;
        if (bottom > this.height || right > this.width) {
          throw new IllegalArgumentException("The region must fit inside the matrix");
        }
        const rowSize = this.rowSize;
        const bits = this.bits;
        for (let y = top; y < bottom; y++) {
          const offset = y * rowSize;
          for (let x = left; x < right; x++) {
            bits[offset + Math.floor(x / 32)] |= 1 << (x & 31) & 4294967295;
          }
        }
      }
      getRow(y, row) {
        if (row === null || row === void 0 || row.getSize() < this.width) {
          row = new BitArray(this.width);
        } else {
          row.clear();
        }
        const rowSize = this.rowSize;
        const bits = this.bits;
        const offset = y * rowSize;
        for (let x = 0; x < rowSize; x++) {
          row.setBulk(x * 32, bits[offset + x]);
        }
        return row;
      }
      setRow(y, row) {
        System.arraycopy(row.getBitArray(), 0, this.bits, y * this.rowSize, this.rowSize);
      }
      rotate180() {
        const width = this.getWidth();
        const height = this.getHeight();
        let topRow = new BitArray(width);
        let bottomRow = new BitArray(width);
        for (let i = 0, length = Math.floor((height + 1) / 2); i < length; i++) {
          topRow = this.getRow(i, topRow);
          bottomRow = this.getRow(height - 1 - i, bottomRow);
          topRow.reverse();
          bottomRow.reverse();
          this.setRow(i, bottomRow);
          this.setRow(height - 1 - i, topRow);
        }
      }
      getEnclosingRectangle() {
        const width = this.width;
        const height = this.height;
        const rowSize = this.rowSize;
        const bits = this.bits;
        let left = width;
        let top = height;
        let right = -1;
        let bottom = -1;
        for (let y = 0; y < height; y++) {
          for (let x32 = 0; x32 < rowSize; x32++) {
            const theBits = bits[y * rowSize + x32];
            if (theBits !== 0) {
              if (y < top) {
                top = y;
              }
              if (y > bottom) {
                bottom = y;
              }
              if (x32 * 32 < left) {
                let bit = 0;
                while ((theBits << 31 - bit & 4294967295) === 0) {
                  bit++;
                }
                if (x32 * 32 + bit < left) {
                  left = x32 * 32 + bit;
                }
              }
              if (x32 * 32 + 31 > right) {
                let bit = 31;
                while (theBits >>> bit === 0) {
                  bit--;
                }
                if (x32 * 32 + bit > right) {
                  right = x32 * 32 + bit;
                }
              }
            }
          }
        }
        if (right < left || bottom < top) {
          return null;
        }
        return Int32Array.from([left, top, right - left + 1, bottom - top + 1]);
      }
      getTopLeftOnBit() {
        const rowSize = this.rowSize;
        const bits = this.bits;
        let bitsOffset = 0;
        while (bitsOffset < bits.length && bits[bitsOffset] === 0) {
          bitsOffset++;
        }
        if (bitsOffset === bits.length) {
          return null;
        }
        const y = bitsOffset / rowSize;
        let x = bitsOffset % rowSize * 32;
        const theBits = bits[bitsOffset];
        let bit = 0;
        while ((theBits << 31 - bit & 4294967295) === 0) {
          bit++;
        }
        x += bit;
        return Int32Array.from([x, y]);
      }
      getBottomRightOnBit() {
        const rowSize = this.rowSize;
        const bits = this.bits;
        let bitsOffset = bits.length - 1;
        while (bitsOffset >= 0 && bits[bitsOffset] === 0) {
          bitsOffset--;
        }
        if (bitsOffset < 0) {
          return null;
        }
        const y = Math.floor(bitsOffset / rowSize);
        let x = Math.floor(bitsOffset % rowSize) * 32;
        const theBits = bits[bitsOffset];
        let bit = 31;
        while (theBits >>> bit === 0) {
          bit--;
        }
        x += bit;
        return Int32Array.from([x, y]);
      }
      getWidth() {
        return this.width;
      }
      getHeight() {
        return this.height;
      }
      getRowSize() {
        return this.rowSize;
      }
      equals(o) {
        if (!(o instanceof BitMatrix)) {
          return false;
        }
        const other = o;
        return this.width === other.width && this.height === other.height && this.rowSize === other.rowSize && Arrays.equals(this.bits, other.bits);
      }
      hashCode() {
        let hash = this.width;
        hash = 31 * hash + this.width;
        hash = 31 * hash + this.height;
        hash = 31 * hash + this.rowSize;
        hash = 31 * hash + Arrays.hashCode(this.bits);
        return hash;
      }
      toString(setString = "X ", unsetString = "  ", lineSeparator = "\n") {
        return this.buildToString(setString, unsetString, lineSeparator);
      }
      buildToString(setString, unsetString, lineSeparator) {
        let result = new StringBuilder();
        for (let y = 0, height = this.height; y < height; y++) {
          for (let x = 0, width = this.width; x < width; x++) {
            result.append(this.get(x, y) ? setString : unsetString);
          }
          result.append(lineSeparator);
        }
        return result.toString();
      }
      clone() {
        return new BitMatrix(this.width, this.height, this.rowSize, this.bits.slice());
      }
    }
    class NotFoundException extends Exception {
      static getNotFoundInstance() {
        return new NotFoundException();
      }
    }
    NotFoundException.kind = "NotFoundException";
    class GlobalHistogramBinarizer extends Binarizer {
      constructor(source) {
        super(source);
        this.luminances = GlobalHistogramBinarizer.EMPTY;
        this.buckets = new Int32Array(GlobalHistogramBinarizer.LUMINANCE_BUCKETS);
      }
      getBlackRow(y, row) {
        const source = this.getLuminanceSource();
        const width = source.getWidth();
        if (row === void 0 || row === null || row.getSize() < width) {
          row = new BitArray(width);
        } else {
          row.clear();
        }
        this.initArrays(width);
        const localLuminances = source.getRow(y, this.luminances);
        const localBuckets = this.buckets;
        for (let x = 0; x < width; x++) {
          localBuckets[(localLuminances[x] & 255) >> GlobalHistogramBinarizer.LUMINANCE_SHIFT]++;
        }
        const blackPoint = GlobalHistogramBinarizer.estimateBlackPoint(localBuckets);
        if (width < 3) {
          for (let x = 0; x < width; x++) {
            if ((localLuminances[x] & 255) < blackPoint) {
              row.set(x);
            }
          }
        } else {
          let left = localLuminances[0] & 255;
          let center = localLuminances[1] & 255;
          for (let x = 1; x < width - 1; x++) {
            const right = localLuminances[x + 1] & 255;
            if ((center * 4 - left - right) / 2 < blackPoint) {
              row.set(x);
            }
            left = center;
            center = right;
          }
        }
        return row;
      }
      getBlackMatrix() {
        const source = this.getLuminanceSource();
        const width = source.getWidth();
        const height = source.getHeight();
        const matrix = new BitMatrix(width, height);
        this.initArrays(width);
        const localBuckets = this.buckets;
        for (let y = 1; y < 5; y++) {
          const row = Math.floor(height * y / 5);
          const localLuminances2 = source.getRow(row, this.luminances);
          const right = Math.floor(width * 4 / 5);
          for (let x = Math.floor(width / 5); x < right; x++) {
            const pixel = localLuminances2[x] & 255;
            localBuckets[pixel >> GlobalHistogramBinarizer.LUMINANCE_SHIFT]++;
          }
        }
        const blackPoint = GlobalHistogramBinarizer.estimateBlackPoint(localBuckets);
        const localLuminances = source.getMatrix();
        for (let y = 0; y < height; y++) {
          const offset = y * width;
          for (let x = 0; x < width; x++) {
            const pixel = localLuminances[offset + x] & 255;
            if (pixel < blackPoint) {
              matrix.set(x, y);
            }
          }
        }
        return matrix;
      }
      createBinarizer(source) {
        return new GlobalHistogramBinarizer(source);
      }
      initArrays(luminanceSize) {
        if (this.luminances.length < luminanceSize) {
          this.luminances = new Uint8ClampedArray(luminanceSize);
        }
        const buckets = this.buckets;
        for (let x = 0; x < GlobalHistogramBinarizer.LUMINANCE_BUCKETS; x++) {
          buckets[x] = 0;
        }
      }
      static estimateBlackPoint(buckets) {
        const numBuckets = buckets.length;
        let maxBucketCount = 0;
        let firstPeak = 0;
        let firstPeakSize = 0;
        for (let x = 0; x < numBuckets; x++) {
          if (buckets[x] > firstPeakSize) {
            firstPeak = x;
            firstPeakSize = buckets[x];
          }
          if (buckets[x] > maxBucketCount) {
            maxBucketCount = buckets[x];
          }
        }
        let secondPeak = 0;
        let secondPeakScore = 0;
        for (let x = 0; x < numBuckets; x++) {
          const distanceToBiggest = x - firstPeak;
          const score = buckets[x] * distanceToBiggest * distanceToBiggest;
          if (score > secondPeakScore) {
            secondPeak = x;
            secondPeakScore = score;
          }
        }
        if (firstPeak > secondPeak) {
          const temp = firstPeak;
          firstPeak = secondPeak;
          secondPeak = temp;
        }
        if (secondPeak - firstPeak <= numBuckets / 16) {
          throw new NotFoundException();
        }
        let bestValley = secondPeak - 1;
        let bestValleyScore = -1;
        for (let x = secondPeak - 1; x > firstPeak; x--) {
          const fromFirst = x - firstPeak;
          const score = fromFirst * fromFirst * (secondPeak - x) * (maxBucketCount - buckets[x]);
          if (score > bestValleyScore) {
            bestValley = x;
            bestValleyScore = score;
          }
        }
        return bestValley << GlobalHistogramBinarizer.LUMINANCE_SHIFT;
      }
    }
    GlobalHistogramBinarizer.LUMINANCE_BITS = 5;
    GlobalHistogramBinarizer.LUMINANCE_SHIFT = 8 - GlobalHistogramBinarizer.LUMINANCE_BITS;
    GlobalHistogramBinarizer.LUMINANCE_BUCKETS = 1 << GlobalHistogramBinarizer.LUMINANCE_BITS;
    GlobalHistogramBinarizer.EMPTY = Uint8ClampedArray.from([0]);
    class HybridBinarizer extends GlobalHistogramBinarizer {
      constructor(source) {
        super(source);
        this.matrix = null;
      }
      getBlackMatrix() {
        if (this.matrix !== null) {
          return this.matrix;
        }
        const source = this.getLuminanceSource();
        const width = source.getWidth();
        const height = source.getHeight();
        if (width >= HybridBinarizer.MINIMUM_DIMENSION && height >= HybridBinarizer.MINIMUM_DIMENSION) {
          const luminances = source.getMatrix();
          let subWidth = width >> HybridBinarizer.BLOCK_SIZE_POWER;
          if ((width & HybridBinarizer.BLOCK_SIZE_MASK) !== 0) {
            subWidth++;
          }
          let subHeight = height >> HybridBinarizer.BLOCK_SIZE_POWER;
          if ((height & HybridBinarizer.BLOCK_SIZE_MASK) !== 0) {
            subHeight++;
          }
          const blackPoints = HybridBinarizer.calculateBlackPoints(luminances, subWidth, subHeight, width, height);
          const newMatrix = new BitMatrix(width, height);
          HybridBinarizer.calculateThresholdForBlock(luminances, subWidth, subHeight, width, height, blackPoints, newMatrix);
          this.matrix = newMatrix;
        } else {
          this.matrix = super.getBlackMatrix();
        }
        return this.matrix;
      }
      createBinarizer(source) {
        return new HybridBinarizer(source);
      }
      static calculateThresholdForBlock(luminances, subWidth, subHeight, width, height, blackPoints, matrix) {
        const maxYOffset = height - HybridBinarizer.BLOCK_SIZE;
        const maxXOffset = width - HybridBinarizer.BLOCK_SIZE;
        for (let y = 0; y < subHeight; y++) {
          let yoffset = y << HybridBinarizer.BLOCK_SIZE_POWER;
          if (yoffset > maxYOffset) {
            yoffset = maxYOffset;
          }
          const top = HybridBinarizer.cap(y, 2, subHeight - 3);
          for (let x = 0; x < subWidth; x++) {
            let xoffset = x << HybridBinarizer.BLOCK_SIZE_POWER;
            if (xoffset > maxXOffset) {
              xoffset = maxXOffset;
            }
            const left = HybridBinarizer.cap(x, 2, subWidth - 3);
            let sum = 0;
            for (let z = -2; z <= 2; z++) {
              const blackRow = blackPoints[top + z];
              sum += blackRow[left - 2] + blackRow[left - 1] + blackRow[left] + blackRow[left + 1] + blackRow[left + 2];
            }
            const average = sum / 25;
            HybridBinarizer.thresholdBlock(luminances, xoffset, yoffset, average, width, matrix);
          }
        }
      }
      static cap(value, min, max) {
        return value < min ? min : value > max ? max : value;
      }
      static thresholdBlock(luminances, xoffset, yoffset, threshold, stride, matrix) {
        for (let y = 0, offset = yoffset * stride + xoffset; y < HybridBinarizer.BLOCK_SIZE; y++, offset += stride) {
          for (let x = 0; x < HybridBinarizer.BLOCK_SIZE; x++) {
            if ((luminances[offset + x] & 255) <= threshold) {
              matrix.set(xoffset + x, yoffset + y);
            }
          }
        }
      }
      static calculateBlackPoints(luminances, subWidth, subHeight, width, height) {
        const maxYOffset = height - HybridBinarizer.BLOCK_SIZE;
        const maxXOffset = width - HybridBinarizer.BLOCK_SIZE;
        const blackPoints = new Array(subHeight);
        for (let y = 0; y < subHeight; y++) {
          blackPoints[y] = new Int32Array(subWidth);
          let yoffset = y << HybridBinarizer.BLOCK_SIZE_POWER;
          if (yoffset > maxYOffset) {
            yoffset = maxYOffset;
          }
          for (let x = 0; x < subWidth; x++) {
            let xoffset = x << HybridBinarizer.BLOCK_SIZE_POWER;
            if (xoffset > maxXOffset) {
              xoffset = maxXOffset;
            }
            let sum = 0;
            let min = 255;
            let max = 0;
            for (let yy = 0, offset = yoffset * width + xoffset; yy < HybridBinarizer.BLOCK_SIZE; yy++, offset += width) {
              for (let xx = 0; xx < HybridBinarizer.BLOCK_SIZE; xx++) {
                const pixel = luminances[offset + xx] & 255;
                sum += pixel;
                if (pixel < min) {
                  min = pixel;
                }
                if (pixel > max) {
                  max = pixel;
                }
              }
              if (max - min > HybridBinarizer.MIN_DYNAMIC_RANGE) {
                for (yy++, offset += width; yy < HybridBinarizer.BLOCK_SIZE; yy++, offset += width) {
                  for (let xx = 0; xx < HybridBinarizer.BLOCK_SIZE; xx++) {
                    sum += luminances[offset + xx] & 255;
                  }
                }
              }
            }
            let average = sum >> HybridBinarizer.BLOCK_SIZE_POWER * 2;
            if (max - min <= HybridBinarizer.MIN_DYNAMIC_RANGE) {
              average = min / 2;
              if (y > 0 && x > 0) {
                const averageNeighborBlackPoint = (blackPoints[y - 1][x] + 2 * blackPoints[y][x - 1] + blackPoints[y - 1][x - 1]) / 4;
                if (min < averageNeighborBlackPoint) {
                  average = averageNeighborBlackPoint;
                }
              }
            }
            blackPoints[y][x] = average;
          }
        }
        return blackPoints;
      }
    }
    HybridBinarizer.BLOCK_SIZE_POWER = 3;
    HybridBinarizer.BLOCK_SIZE = 1 << HybridBinarizer.BLOCK_SIZE_POWER;
    HybridBinarizer.BLOCK_SIZE_MASK = HybridBinarizer.BLOCK_SIZE - 1;
    HybridBinarizer.MINIMUM_DIMENSION = HybridBinarizer.BLOCK_SIZE * 5;
    HybridBinarizer.MIN_DYNAMIC_RANGE = 24;
    class LuminanceSource {
      constructor(width, height) {
        this.width = width;
        this.height = height;
      }
      getWidth() {
        return this.width;
      }
      getHeight() {
        return this.height;
      }
      isCropSupported() {
        return false;
      }
      crop(left, top, width, height) {
        throw new UnsupportedOperationException("This luminance source does not support cropping.");
      }
      isRotateSupported() {
        return false;
      }
      rotateCounterClockwise() {
        throw new UnsupportedOperationException("This luminance source does not support rotation by 90 degrees.");
      }
      rotateCounterClockwise45() {
        throw new UnsupportedOperationException("This luminance source does not support rotation by 45 degrees.");
      }
      toString() {
        const row = new Uint8ClampedArray(this.width);
        let result = new StringBuilder();
        for (let y = 0; y < this.height; y++) {
          const sourceRow = this.getRow(y, row);
          for (let x = 0; x < this.width; x++) {
            const luminance = sourceRow[x] & 255;
            let c;
            if (luminance < 64) {
              c = "#";
            } else if (luminance < 128) {
              c = "+";
            } else if (luminance < 192) {
              c = ".";
            } else {
              c = " ";
            }
            result.append(c);
          }
          result.append("\n");
        }
        return result.toString();
      }
    }
    class InvertedLuminanceSource extends LuminanceSource {
      constructor(delegate) {
        super(delegate.getWidth(), delegate.getHeight());
        this.delegate = delegate;
      }
      getRow(y, row) {
        const sourceRow = this.delegate.getRow(y, row);
        const width = this.getWidth();
        for (let i = 0; i < width; i++) {
          sourceRow[i] = 255 - (sourceRow[i] & 255);
        }
        return sourceRow;
      }
      getMatrix() {
        const matrix = this.delegate.getMatrix();
        const length = this.getWidth() * this.getHeight();
        const invertedMatrix = new Uint8ClampedArray(length);
        for (let i = 0; i < length; i++) {
          invertedMatrix[i] = 255 - (matrix[i] & 255);
        }
        return invertedMatrix;
      }
      isCropSupported() {
        return this.delegate.isCropSupported();
      }
      crop(left, top, width, height) {
        return new InvertedLuminanceSource(this.delegate.crop(left, top, width, height));
      }
      isRotateSupported() {
        return this.delegate.isRotateSupported();
      }
      invert() {
        return this.delegate;
      }
      rotateCounterClockwise() {
        return new InvertedLuminanceSource(this.delegate.rotateCounterClockwise());
      }
      rotateCounterClockwise45() {
        return new InvertedLuminanceSource(this.delegate.rotateCounterClockwise45());
      }
    }
    class HTMLCanvasElementLuminanceSource extends LuminanceSource {
      constructor(canvas) {
        super(canvas.width, canvas.height);
        this.canvas = canvas;
        this.tempCanvasElement = null;
        this.buffer = HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(canvas);
      }
      static makeBufferFromCanvasImageData(canvas) {
        const imageData = canvas.getContext("2d").getImageData(0, 0, canvas.width, canvas.height);
        return HTMLCanvasElementLuminanceSource.toGrayscaleBuffer(imageData.data, canvas.width, canvas.height);
      }
      static toGrayscaleBuffer(imageBuffer, width, height) {
        const grayscaleBuffer = new Uint8ClampedArray(width * height);
        for (let i = 0, j = 0, length = imageBuffer.length; i < length; i += 4, j++) {
          let gray;
          const alpha = imageBuffer[i + 3];
          if (alpha === 0) {
            gray = 255;
          } else {
            const pixelR = imageBuffer[i];
            const pixelG = imageBuffer[i + 1];
            const pixelB = imageBuffer[i + 2];
            gray = 306 * pixelR + 601 * pixelG + 117 * pixelB + 512 >> 10;
          }
          grayscaleBuffer[j] = gray;
        }
        return grayscaleBuffer;
      }
      getRow(y, row) {
        if (y < 0 || y >= this.getHeight()) {
          throw new IllegalArgumentException("Requested row is outside the image: " + y);
        }
        const width = this.getWidth();
        const start = y * width;
        if (row === null) {
          row = this.buffer.slice(start, start + width);
        } else {
          if (row.length < width) {
            row = new Uint8ClampedArray(width);
          }
          row.set(this.buffer.slice(start, start + width));
        }
        return row;
      }
      getMatrix() {
        return this.buffer;
      }
      isCropSupported() {
        return true;
      }
      crop(left, top, width, height) {
        super.crop(left, top, width, height);
        return this;
      }
      isRotateSupported() {
        return true;
      }
      rotateCounterClockwise() {
        this.rotate(-90);
        return this;
      }
      rotateCounterClockwise45() {
        this.rotate(-45);
        return this;
      }
      getTempCanvasElement() {
        if (null === this.tempCanvasElement) {
          const tempCanvasElement = this.canvas.ownerDocument.createElement("canvas");
          tempCanvasElement.width = this.canvas.width;
          tempCanvasElement.height = this.canvas.height;
          this.tempCanvasElement = tempCanvasElement;
        }
        return this.tempCanvasElement;
      }
      rotate(angle) {
        const tempCanvasElement = this.getTempCanvasElement();
        const tempContext = tempCanvasElement.getContext("2d");
        const angleRadians = angle * HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS;
        const width = this.canvas.width;
        const height = this.canvas.height;
        const newWidth = Math.ceil(Math.abs(Math.cos(angleRadians)) * width + Math.abs(Math.sin(angleRadians)) * height);
        const newHeight = Math.ceil(Math.abs(Math.sin(angleRadians)) * width + Math.abs(Math.cos(angleRadians)) * height);
        tempCanvasElement.width = newWidth;
        tempCanvasElement.height = newHeight;
        tempContext.translate(newWidth / 2, newHeight / 2);
        tempContext.rotate(angleRadians);
        tempContext.drawImage(this.canvas, width / -2, height / -2);
        this.buffer = HTMLCanvasElementLuminanceSource.makeBufferFromCanvasImageData(tempCanvasElement);
        return this;
      }
      invert() {
        return new InvertedLuminanceSource(this);
      }
    }
    HTMLCanvasElementLuminanceSource.DEGREE_TO_RADIANS = Math.PI / 180;
    class VideoInputDevice {
      constructor(deviceId, label, groupId) {
        this.deviceId = deviceId;
        this.label = label;
        this.kind = "videoinput";
        this.groupId = groupId || void 0;
      }
      toJSON() {
        return {
          kind: this.kind,
          groupId: this.groupId,
          deviceId: this.deviceId,
          label: this.label
        };
      }
    }
    var __awaiter2 = (globalThis || commonjsGlobal || self || window || void 0) && (globalThis || commonjsGlobal || self || window || void 0).__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    class BrowserCodeReader {
      constructor(reader, timeBetweenScansMillis = 500, _hints) {
        this.reader = reader;
        this.timeBetweenScansMillis = timeBetweenScansMillis;
        this._hints = _hints;
        this._stopContinuousDecode = false;
        this._stopAsyncDecode = false;
        this._timeBetweenDecodingAttempts = 0;
      }
      get hasNavigator() {
        return typeof navigator !== "undefined";
      }
      get isMediaDevicesSuported() {
        return this.hasNavigator && !!navigator.mediaDevices;
      }
      get canEnumerateDevices() {
        return !!(this.isMediaDevicesSuported && navigator.mediaDevices.enumerateDevices);
      }
      get timeBetweenDecodingAttempts() {
        return this._timeBetweenDecodingAttempts;
      }
      set timeBetweenDecodingAttempts(millis) {
        this._timeBetweenDecodingAttempts = millis < 0 ? 0 : millis;
      }
      set hints(hints) {
        this._hints = hints || null;
      }
      get hints() {
        return this._hints;
      }
      listVideoInputDevices() {
        return __awaiter2(this, void 0, void 0, function* () {
          if (!this.hasNavigator) {
            throw new Error("Can't enumerate devices, navigator is not present.");
          }
          if (!this.canEnumerateDevices) {
            throw new Error("Can't enumerate devices, method not supported.");
          }
          const devices = yield navigator.mediaDevices.enumerateDevices();
          const videoDevices = [];
          for (const device of devices) {
            const kind = device.kind === "video" ? "videoinput" : device.kind;
            if (kind !== "videoinput") {
              continue;
            }
            const deviceId = device.deviceId || device.id;
            const label = device.label || `Video device ${videoDevices.length + 1}`;
            const groupId = device.groupId;
            const videoDevice = { deviceId, label, kind, groupId };
            videoDevices.push(videoDevice);
          }
          return videoDevices;
        });
      }
      getVideoInputDevices() {
        return __awaiter2(this, void 0, void 0, function* () {
          const devices = yield this.listVideoInputDevices();
          return devices.map((d) => new VideoInputDevice(d.deviceId, d.label));
        });
      }
      findDeviceById(deviceId) {
        return __awaiter2(this, void 0, void 0, function* () {
          const devices = yield this.listVideoInputDevices();
          if (!devices) {
            return null;
          }
          return devices.find((x) => x.deviceId === deviceId);
        });
      }
      decodeFromInputVideoDevice(deviceId, videoSource) {
        return __awaiter2(this, void 0, void 0, function* () {
          return yield this.decodeOnceFromVideoDevice(deviceId, videoSource);
        });
      }
      decodeOnceFromVideoDevice(deviceId, videoSource) {
        return __awaiter2(this, void 0, void 0, function* () {
          this.reset();
          let videoConstraints;
          if (!deviceId) {
            videoConstraints = { facingMode: "environment" };
          } else {
            videoConstraints = { deviceId: { exact: deviceId } };
          }
          const constraints = { video: videoConstraints };
          return yield this.decodeOnceFromConstraints(constraints, videoSource);
        });
      }
      decodeOnceFromConstraints(constraints, videoSource) {
        return __awaiter2(this, void 0, void 0, function* () {
          const stream = yield navigator.mediaDevices.getUserMedia(constraints);
          return yield this.decodeOnceFromStream(stream, videoSource);
        });
      }
      decodeOnceFromStream(stream, videoSource) {
        return __awaiter2(this, void 0, void 0, function* () {
          this.reset();
          const video = yield this.attachStreamToVideo(stream, videoSource);
          const result = yield this.decodeOnce(video);
          return result;
        });
      }
      decodeFromInputVideoDeviceContinuously(deviceId, videoSource, callbackFn) {
        return __awaiter2(this, void 0, void 0, function* () {
          return yield this.decodeFromVideoDevice(deviceId, videoSource, callbackFn);
        });
      }
      decodeFromVideoDevice(deviceId, videoSource, callbackFn) {
        return __awaiter2(this, void 0, void 0, function* () {
          let videoConstraints;
          if (!deviceId) {
            videoConstraints = { facingMode: "environment" };
          } else {
            videoConstraints = { deviceId: { exact: deviceId } };
          }
          const constraints = { video: videoConstraints };
          return yield this.decodeFromConstraints(constraints, videoSource, callbackFn);
        });
      }
      decodeFromConstraints(constraints, videoSource, callbackFn) {
        return __awaiter2(this, void 0, void 0, function* () {
          const stream = yield navigator.mediaDevices.getUserMedia(constraints);
          return yield this.decodeFromStream(stream, videoSource, callbackFn);
        });
      }
      decodeFromStream(stream, videoSource, callbackFn) {
        return __awaiter2(this, void 0, void 0, function* () {
          this.reset();
          const video = yield this.attachStreamToVideo(stream, videoSource);
          return yield this.decodeContinuously(video, callbackFn);
        });
      }
      stopAsyncDecode() {
        this._stopAsyncDecode = true;
      }
      stopContinuousDecode() {
        this._stopContinuousDecode = true;
      }
      attachStreamToVideo(stream, videoSource) {
        return __awaiter2(this, void 0, void 0, function* () {
          const videoElement = this.prepareVideoElement(videoSource);
          this.addVideoSource(videoElement, stream);
          this.videoElement = videoElement;
          this.stream = stream;
          yield this.playVideoOnLoadAsync(videoElement);
          return videoElement;
        });
      }
      playVideoOnLoadAsync(videoElement) {
        return new Promise((resolve, reject) => this.playVideoOnLoad(videoElement, () => resolve()));
      }
      playVideoOnLoad(element, callbackFn) {
        this.videoEndedListener = () => this.stopStreams();
        this.videoCanPlayListener = () => this.tryPlayVideo(element);
        element.addEventListener("ended", this.videoEndedListener);
        element.addEventListener("canplay", this.videoCanPlayListener);
        element.addEventListener("playing", callbackFn);
        this.tryPlayVideo(element);
      }
      isVideoPlaying(video) {
        return video.currentTime > 0 && !video.paused && !video.ended && video.readyState > 2;
      }
      tryPlayVideo(videoElement) {
        return __awaiter2(this, void 0, void 0, function* () {
          if (this.isVideoPlaying(videoElement)) {
            console.warn("Trying to play video that is already playing.");
            return;
          }
          try {
            yield videoElement.play();
          } catch (_a) {
            console.warn("It was not possible to play the video.");
          }
        });
      }
      getMediaElement(mediaElementId, type) {
        const mediaElement = document.getElementById(mediaElementId);
        if (!mediaElement) {
          throw new ArgumentException(`element with id '${mediaElementId}' not found`);
        }
        if (mediaElement.nodeName.toLowerCase() !== type.toLowerCase()) {
          throw new ArgumentException(`element with id '${mediaElementId}' must be an ${type} element`);
        }
        return mediaElement;
      }
      decodeFromImage(source, url) {
        if (!source && !url) {
          throw new ArgumentException("either imageElement with a src set or an url must be provided");
        }
        if (url && !source) {
          return this.decodeFromImageUrl(url);
        }
        return this.decodeFromImageElement(source);
      }
      decodeFromVideo(source, url) {
        if (!source && !url) {
          throw new ArgumentException("Either an element with a src set or an URL must be provided");
        }
        if (url && !source) {
          return this.decodeFromVideoUrl(url);
        }
        return this.decodeFromVideoElement(source);
      }
      decodeFromVideoContinuously(source, url, callbackFn) {
        if (void 0 === source && void 0 === url) {
          throw new ArgumentException("Either an element with a src set or an URL must be provided");
        }
        if (url && !source) {
          return this.decodeFromVideoUrlContinuously(url, callbackFn);
        }
        return this.decodeFromVideoElementContinuously(source, callbackFn);
      }
      decodeFromImageElement(source) {
        if (!source) {
          throw new ArgumentException("An image element must be provided.");
        }
        this.reset();
        const element = this.prepareImageElement(source);
        this.imageElement = element;
        let task;
        if (this.isImageLoaded(element)) {
          task = this.decodeOnce(element, false, true);
        } else {
          task = this._decodeOnLoadImage(element);
        }
        return task;
      }
      decodeFromVideoElement(source) {
        const element = this._decodeFromVideoElementSetup(source);
        return this._decodeOnLoadVideo(element);
      }
      decodeFromVideoElementContinuously(source, callbackFn) {
        const element = this._decodeFromVideoElementSetup(source);
        return this._decodeOnLoadVideoContinuously(element, callbackFn);
      }
      _decodeFromVideoElementSetup(source) {
        if (!source) {
          throw new ArgumentException("A video element must be provided.");
        }
        this.reset();
        const element = this.prepareVideoElement(source);
        this.videoElement = element;
        return element;
      }
      decodeFromImageUrl(url) {
        if (!url) {
          throw new ArgumentException("An URL must be provided.");
        }
        this.reset();
        const element = this.prepareImageElement();
        this.imageElement = element;
        const decodeTask = this._decodeOnLoadImage(element);
        element.src = url;
        return decodeTask;
      }
      decodeFromVideoUrl(url) {
        if (!url) {
          throw new ArgumentException("An URL must be provided.");
        }
        this.reset();
        const element = this.prepareVideoElement();
        const decodeTask = this.decodeFromVideoElement(element);
        element.src = url;
        return decodeTask;
      }
      decodeFromVideoUrlContinuously(url, callbackFn) {
        if (!url) {
          throw new ArgumentException("An URL must be provided.");
        }
        this.reset();
        const element = this.prepareVideoElement();
        const decodeTask = this.decodeFromVideoElementContinuously(element, callbackFn);
        element.src = url;
        return decodeTask;
      }
      _decodeOnLoadImage(element) {
        return new Promise((resolve, reject) => {
          this.imageLoadedListener = () => this.decodeOnce(element, false, true).then(resolve, reject);
          element.addEventListener("load", this.imageLoadedListener);
        });
      }
      _decodeOnLoadVideo(videoElement) {
        return __awaiter2(this, void 0, void 0, function* () {
          yield this.playVideoOnLoadAsync(videoElement);
          return yield this.decodeOnce(videoElement);
        });
      }
      _decodeOnLoadVideoContinuously(videoElement, callbackFn) {
        return __awaiter2(this, void 0, void 0, function* () {
          yield this.playVideoOnLoadAsync(videoElement);
          this.decodeContinuously(videoElement, callbackFn);
        });
      }
      isImageLoaded(img) {
        if (!img.complete) {
          return false;
        }
        if (img.naturalWidth === 0) {
          return false;
        }
        return true;
      }
      prepareImageElement(imageSource) {
        let imageElement;
        if (typeof imageSource === "undefined") {
          imageElement = document.createElement("img");
          imageElement.width = 200;
          imageElement.height = 200;
        }
        if (typeof imageSource === "string") {
          imageElement = this.getMediaElement(imageSource, "img");
        }
        if (imageSource instanceof HTMLImageElement) {
          imageElement = imageSource;
        }
        return imageElement;
      }
      prepareVideoElement(videoSource) {
        let videoElement;
        if (!videoSource && typeof document !== "undefined") {
          videoElement = document.createElement("video");
          videoElement.width = 200;
          videoElement.height = 200;
        }
        if (typeof videoSource === "string") {
          videoElement = this.getMediaElement(videoSource, "video");
        }
        if (videoSource instanceof HTMLVideoElement) {
          videoElement = videoSource;
        }
        videoElement.setAttribute("autoplay", "true");
        videoElement.setAttribute("muted", "true");
        videoElement.setAttribute("playsinline", "true");
        return videoElement;
      }
      decodeOnce(element, retryIfNotFound = true, retryIfChecksumOrFormatError = true) {
        this._stopAsyncDecode = false;
        const loop = (resolve, reject) => {
          if (this._stopAsyncDecode) {
            reject(new NotFoundException("Video stream has ended before any code could be detected."));
            this._stopAsyncDecode = void 0;
            return;
          }
          try {
            const result = this.decode(element);
            resolve(result);
          } catch (e) {
            const ifNotFound = retryIfNotFound && e instanceof NotFoundException;
            const isChecksumOrFormatError = e instanceof ChecksumException || e instanceof FormatException;
            const ifChecksumOrFormat = isChecksumOrFormatError && retryIfChecksumOrFormatError;
            if (ifNotFound || ifChecksumOrFormat) {
              return setTimeout(loop, this._timeBetweenDecodingAttempts, resolve, reject);
            }
            reject(e);
          }
        };
        return new Promise((resolve, reject) => loop(resolve, reject));
      }
      decodeContinuously(element, callbackFn) {
        this._stopContinuousDecode = false;
        const loop = () => {
          if (this._stopContinuousDecode) {
            this._stopContinuousDecode = void 0;
            return;
          }
          try {
            const result = this.decode(element);
            callbackFn(result, null);
            setTimeout(loop, this.timeBetweenScansMillis);
          } catch (e) {
            callbackFn(null, e);
            const isChecksumOrFormatError = e instanceof ChecksumException || e instanceof FormatException;
            const isNotFound = e instanceof NotFoundException;
            if (isChecksumOrFormatError || isNotFound) {
              setTimeout(loop, this._timeBetweenDecodingAttempts);
            }
          }
        };
        loop();
      }
      decode(element) {
        const binaryBitmap = this.createBinaryBitmap(element);
        return this.decodeBitmap(binaryBitmap);
      }
      _isHTMLVideoElement(mediaElement) {
        const potentialVideo = mediaElement;
        return potentialVideo.videoWidth !== 0;
      }
      drawFrameOnCanvas(srcElement, dimensions, canvasElementContext) {
        if (!dimensions) {
          dimensions = {
            sx: 0,
            sy: 0,
            sWidth: srcElement.videoWidth,
            sHeight: srcElement.videoHeight,
            dx: 0,
            dy: 0,
            dWidth: srcElement.videoWidth,
            dHeight: srcElement.videoHeight
          };
        }
        if (!canvasElementContext) {
          canvasElementContext = this.captureCanvasContext;
        }
        canvasElementContext.drawImage(
          srcElement,
          dimensions.sx,
          dimensions.sy,
          dimensions.sWidth,
          dimensions.sHeight,
          dimensions.dx,
          dimensions.dy,
          dimensions.dWidth,
          dimensions.dHeight
        );
      }
      drawImageOnCanvas(srcElement, dimensions, canvasElementContext = this.captureCanvasContext) {
        if (!dimensions) {
          dimensions = {
            sx: 0,
            sy: 0,
            sWidth: srcElement.naturalWidth,
            sHeight: srcElement.naturalHeight,
            dx: 0,
            dy: 0,
            dWidth: srcElement.naturalWidth,
            dHeight: srcElement.naturalHeight
          };
        }
        if (!canvasElementContext) {
          canvasElementContext = this.captureCanvasContext;
        }
        canvasElementContext.drawImage(
          srcElement,
          dimensions.sx,
          dimensions.sy,
          dimensions.sWidth,
          dimensions.sHeight,
          dimensions.dx,
          dimensions.dy,
          dimensions.dWidth,
          dimensions.dHeight
        );
      }
      createBinaryBitmap(mediaElement) {
        this.getCaptureCanvasContext(mediaElement);
        if (this._isHTMLVideoElement(mediaElement)) {
          this.drawFrameOnCanvas(mediaElement);
        } else {
          this.drawImageOnCanvas(mediaElement);
        }
        const canvas = this.getCaptureCanvas(mediaElement);
        const luminanceSource = new HTMLCanvasElementLuminanceSource(canvas);
        const hybridBinarizer = new HybridBinarizer(luminanceSource);
        return new BinaryBitmap(hybridBinarizer);
      }
      getCaptureCanvasContext(mediaElement) {
        if (!this.captureCanvasContext) {
          const elem = this.getCaptureCanvas(mediaElement);
          const ctx = elem.getContext("2d");
          this.captureCanvasContext = ctx;
        }
        return this.captureCanvasContext;
      }
      getCaptureCanvas(mediaElement) {
        if (!this.captureCanvas) {
          const elem = this.createCaptureCanvas(mediaElement);
          this.captureCanvas = elem;
        }
        return this.captureCanvas;
      }
      decodeBitmap(binaryBitmap) {
        return this.reader.decode(binaryBitmap, this._hints);
      }
      createCaptureCanvas(mediaElement) {
        if (typeof document === "undefined") {
          this._destroyCaptureCanvas();
          return null;
        }
        const canvasElement = document.createElement("canvas");
        let width;
        let height;
        if (typeof mediaElement !== "undefined") {
          if (mediaElement instanceof HTMLVideoElement) {
            width = mediaElement.videoWidth;
            height = mediaElement.videoHeight;
          } else if (mediaElement instanceof HTMLImageElement) {
            width = mediaElement.naturalWidth || mediaElement.width;
            height = mediaElement.naturalHeight || mediaElement.height;
          }
        }
        canvasElement.style.width = width + "px";
        canvasElement.style.height = height + "px";
        canvasElement.width = width;
        canvasElement.height = height;
        return canvasElement;
      }
      stopStreams() {
        if (this.stream) {
          this.stream.getVideoTracks().forEach((t) => t.stop());
          this.stream = void 0;
        }
        if (this._stopAsyncDecode === false) {
          this.stopAsyncDecode();
        }
        if (this._stopContinuousDecode === false) {
          this.stopContinuousDecode();
        }
      }
      reset() {
        this.stopStreams();
        this._destroyVideoElement();
        this._destroyImageElement();
        this._destroyCaptureCanvas();
      }
      _destroyVideoElement() {
        if (!this.videoElement) {
          return;
        }
        if (typeof this.videoEndedListener !== "undefined") {
          this.videoElement.removeEventListener("ended", this.videoEndedListener);
        }
        if (typeof this.videoPlayingEventListener !== "undefined") {
          this.videoElement.removeEventListener("playing", this.videoPlayingEventListener);
        }
        if (typeof this.videoCanPlayListener !== "undefined") {
          this.videoElement.removeEventListener("loadedmetadata", this.videoCanPlayListener);
        }
        this.cleanVideoSource(this.videoElement);
        this.videoElement = void 0;
      }
      _destroyImageElement() {
        if (!this.imageElement) {
          return;
        }
        if (void 0 !== this.imageLoadedListener) {
          this.imageElement.removeEventListener("load", this.imageLoadedListener);
        }
        this.imageElement.src = void 0;
        this.imageElement.removeAttribute("src");
        this.imageElement = void 0;
      }
      _destroyCaptureCanvas() {
        this.captureCanvasContext = void 0;
        this.captureCanvas = void 0;
      }
      addVideoSource(videoElement, stream) {
        try {
          videoElement.srcObject = stream;
        } catch (err) {
          videoElement.src = URL.createObjectURL(stream);
        }
      }
      cleanVideoSource(videoElement) {
        try {
          videoElement.srcObject = null;
        } catch (err) {
          videoElement.src = "";
        }
        this.videoElement.removeAttribute("src");
      }
    }
    class Result {
      constructor(text, rawBytes, numBits = rawBytes == null ? 0 : 8 * rawBytes.length, resultPoints, format, timestamp = System.currentTimeMillis()) {
        this.text = text;
        this.rawBytes = rawBytes;
        this.numBits = numBits;
        this.resultPoints = resultPoints;
        this.format = format;
        this.timestamp = timestamp;
        this.text = text;
        this.rawBytes = rawBytes;
        if (void 0 === numBits || null === numBits) {
          this.numBits = rawBytes === null || rawBytes === void 0 ? 0 : 8 * rawBytes.length;
        } else {
          this.numBits = numBits;
        }
        this.resultPoints = resultPoints;
        this.format = format;
        this.resultMetadata = null;
        if (void 0 === timestamp || null === timestamp) {
          this.timestamp = System.currentTimeMillis();
        } else {
          this.timestamp = timestamp;
        }
      }
      getText() {
        return this.text;
      }
      getRawBytes() {
        return this.rawBytes;
      }
      getNumBits() {
        return this.numBits;
      }
      getResultPoints() {
        return this.resultPoints;
      }
      getBarcodeFormat() {
        return this.format;
      }
      getResultMetadata() {
        return this.resultMetadata;
      }
      putMetadata(type, value) {
        if (this.resultMetadata === null) {
          this.resultMetadata = /* @__PURE__ */ new Map();
        }
        this.resultMetadata.set(type, value);
      }
      putAllMetadata(metadata) {
        if (metadata !== null) {
          if (this.resultMetadata === null) {
            this.resultMetadata = metadata;
          } else {
            this.resultMetadata = new Map(metadata);
          }
        }
      }
      addResultPoints(newPoints) {
        const oldPoints = this.resultPoints;
        if (oldPoints === null) {
          this.resultPoints = newPoints;
        } else if (newPoints !== null && newPoints.length > 0) {
          const allPoints = new Array(oldPoints.length + newPoints.length);
          System.arraycopy(oldPoints, 0, allPoints, 0, oldPoints.length);
          System.arraycopy(newPoints, 0, allPoints, oldPoints.length, newPoints.length);
          this.resultPoints = allPoints;
        }
      }
      getTimestamp() {
        return this.timestamp;
      }
      toString() {
        return this.text;
      }
    }
    var BarcodeFormat;
    (function(BarcodeFormat2) {
      BarcodeFormat2[BarcodeFormat2["AZTEC"] = 0] = "AZTEC";
      BarcodeFormat2[BarcodeFormat2["CODABAR"] = 1] = "CODABAR";
      BarcodeFormat2[BarcodeFormat2["CODE_39"] = 2] = "CODE_39";
      BarcodeFormat2[BarcodeFormat2["CODE_93"] = 3] = "CODE_93";
      BarcodeFormat2[BarcodeFormat2["CODE_128"] = 4] = "CODE_128";
      BarcodeFormat2[BarcodeFormat2["DATA_MATRIX"] = 5] = "DATA_MATRIX";
      BarcodeFormat2[BarcodeFormat2["EAN_8"] = 6] = "EAN_8";
      BarcodeFormat2[BarcodeFormat2["EAN_13"] = 7] = "EAN_13";
      BarcodeFormat2[BarcodeFormat2["ITF"] = 8] = "ITF";
      BarcodeFormat2[BarcodeFormat2["MAXICODE"] = 9] = "MAXICODE";
      BarcodeFormat2[BarcodeFormat2["PDF_417"] = 10] = "PDF_417";
      BarcodeFormat2[BarcodeFormat2["QR_CODE"] = 11] = "QR_CODE";
      BarcodeFormat2[BarcodeFormat2["RSS_14"] = 12] = "RSS_14";
      BarcodeFormat2[BarcodeFormat2["RSS_EXPANDED"] = 13] = "RSS_EXPANDED";
      BarcodeFormat2[BarcodeFormat2["UPC_A"] = 14] = "UPC_A";
      BarcodeFormat2[BarcodeFormat2["UPC_E"] = 15] = "UPC_E";
      BarcodeFormat2[BarcodeFormat2["UPC_EAN_EXTENSION"] = 16] = "UPC_EAN_EXTENSION";
    })(BarcodeFormat || (BarcodeFormat = {}));
    var BarcodeFormat$1 = BarcodeFormat;
    var ResultMetadataType;
    (function(ResultMetadataType2) {
      ResultMetadataType2[ResultMetadataType2["OTHER"] = 0] = "OTHER";
      ResultMetadataType2[ResultMetadataType2["ORIENTATION"] = 1] = "ORIENTATION";
      ResultMetadataType2[ResultMetadataType2["BYTE_SEGMENTS"] = 2] = "BYTE_SEGMENTS";
      ResultMetadataType2[ResultMetadataType2["ERROR_CORRECTION_LEVEL"] = 3] = "ERROR_CORRECTION_LEVEL";
      ResultMetadataType2[ResultMetadataType2["ISSUE_NUMBER"] = 4] = "ISSUE_NUMBER";
      ResultMetadataType2[ResultMetadataType2["SUGGESTED_PRICE"] = 5] = "SUGGESTED_PRICE";
      ResultMetadataType2[ResultMetadataType2["POSSIBLE_COUNTRY"] = 6] = "POSSIBLE_COUNTRY";
      ResultMetadataType2[ResultMetadataType2["UPC_EAN_EXTENSION"] = 7] = "UPC_EAN_EXTENSION";
      ResultMetadataType2[ResultMetadataType2["PDF417_EXTRA_METADATA"] = 8] = "PDF417_EXTRA_METADATA";
      ResultMetadataType2[ResultMetadataType2["STRUCTURED_APPEND_SEQUENCE"] = 9] = "STRUCTURED_APPEND_SEQUENCE";
      ResultMetadataType2[ResultMetadataType2["STRUCTURED_APPEND_PARITY"] = 10] = "STRUCTURED_APPEND_PARITY";
    })(ResultMetadataType || (ResultMetadataType = {}));
    var ResultMetadataType$1 = ResultMetadataType;
    class DecoderResult {
      constructor(rawBytes, text, byteSegments, ecLevel, structuredAppendSequenceNumber = -1, structuredAppendParity = -1) {
        this.rawBytes = rawBytes;
        this.text = text;
        this.byteSegments = byteSegments;
        this.ecLevel = ecLevel;
        this.structuredAppendSequenceNumber = structuredAppendSequenceNumber;
        this.structuredAppendParity = structuredAppendParity;
        this.numBits = rawBytes === void 0 || rawBytes === null ? 0 : 8 * rawBytes.length;
      }
      getRawBytes() {
        return this.rawBytes;
      }
      getNumBits() {
        return this.numBits;
      }
      setNumBits(numBits) {
        this.numBits = numBits;
      }
      getText() {
        return this.text;
      }
      getByteSegments() {
        return this.byteSegments;
      }
      getECLevel() {
        return this.ecLevel;
      }
      getErrorsCorrected() {
        return this.errorsCorrected;
      }
      setErrorsCorrected(errorsCorrected) {
        this.errorsCorrected = errorsCorrected;
      }
      getErasures() {
        return this.erasures;
      }
      setErasures(erasures) {
        this.erasures = erasures;
      }
      getOther() {
        return this.other;
      }
      setOther(other) {
        this.other = other;
      }
      hasStructuredAppend() {
        return this.structuredAppendParity >= 0 && this.structuredAppendSequenceNumber >= 0;
      }
      getStructuredAppendParity() {
        return this.structuredAppendParity;
      }
      getStructuredAppendSequenceNumber() {
        return this.structuredAppendSequenceNumber;
      }
    }
    class AbstractGenericGF {
      exp(a) {
        return this.expTable[a];
      }
      log(a) {
        if (a === 0) {
          throw new IllegalArgumentException();
        }
        return this.logTable[a];
      }
      static addOrSubtract(a, b) {
        return a ^ b;
      }
    }
    class GenericGFPoly {
      constructor(field, coefficients) {
        if (coefficients.length === 0) {
          throw new IllegalArgumentException();
        }
        this.field = field;
        const coefficientsLength = coefficients.length;
        if (coefficientsLength > 1 && coefficients[0] === 0) {
          let firstNonZero = 1;
          while (firstNonZero < coefficientsLength && coefficients[firstNonZero] === 0) {
            firstNonZero++;
          }
          if (firstNonZero === coefficientsLength) {
            this.coefficients = Int32Array.from([0]);
          } else {
            this.coefficients = new Int32Array(coefficientsLength - firstNonZero);
            System.arraycopy(coefficients, firstNonZero, this.coefficients, 0, this.coefficients.length);
          }
        } else {
          this.coefficients = coefficients;
        }
      }
      getCoefficients() {
        return this.coefficients;
      }
      getDegree() {
        return this.coefficients.length - 1;
      }
      isZero() {
        return this.coefficients[0] === 0;
      }
      getCoefficient(degree) {
        return this.coefficients[this.coefficients.length - 1 - degree];
      }
      evaluateAt(a) {
        if (a === 0) {
          return this.getCoefficient(0);
        }
        const coefficients = this.coefficients;
        let result;
        if (a === 1) {
          result = 0;
          for (let i = 0, length = coefficients.length; i !== length; i++) {
            const coefficient = coefficients[i];
            result = AbstractGenericGF.addOrSubtract(result, coefficient);
          }
          return result;
        }
        result = coefficients[0];
        const size = coefficients.length;
        const field = this.field;
        for (let i = 1; i < size; i++) {
          result = AbstractGenericGF.addOrSubtract(field.multiply(a, result), coefficients[i]);
        }
        return result;
      }
      addOrSubtract(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");
        }
        if (this.isZero()) {
          return other;
        }
        if (other.isZero()) {
          return this;
        }
        let smallerCoefficients = this.coefficients;
        let largerCoefficients = other.coefficients;
        if (smallerCoefficients.length > largerCoefficients.length) {
          const temp = smallerCoefficients;
          smallerCoefficients = largerCoefficients;
          largerCoefficients = temp;
        }
        let sumDiff = new Int32Array(largerCoefficients.length);
        const lengthDiff = largerCoefficients.length - smallerCoefficients.length;
        System.arraycopy(largerCoefficients, 0, sumDiff, 0, lengthDiff);
        for (let i = lengthDiff; i < largerCoefficients.length; i++) {
          sumDiff[i] = AbstractGenericGF.addOrSubtract(smallerCoefficients[i - lengthDiff], largerCoefficients[i]);
        }
        return new GenericGFPoly(this.field, sumDiff);
      }
      multiply(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");
        }
        if (this.isZero() || other.isZero()) {
          return this.field.getZero();
        }
        const aCoefficients = this.coefficients;
        const aLength = aCoefficients.length;
        const bCoefficients = other.coefficients;
        const bLength = bCoefficients.length;
        const product = new Int32Array(aLength + bLength - 1);
        const field = this.field;
        for (let i = 0; i < aLength; i++) {
          const aCoeff = aCoefficients[i];
          for (let j = 0; j < bLength; j++) {
            product[i + j] = AbstractGenericGF.addOrSubtract(product[i + j], field.multiply(aCoeff, bCoefficients[j]));
          }
        }
        return new GenericGFPoly(field, product);
      }
      multiplyScalar(scalar) {
        if (scalar === 0) {
          return this.field.getZero();
        }
        if (scalar === 1) {
          return this;
        }
        const size = this.coefficients.length;
        const field = this.field;
        const product = new Int32Array(size);
        const coefficients = this.coefficients;
        for (let i = 0; i < size; i++) {
          product[i] = field.multiply(coefficients[i], scalar);
        }
        return new GenericGFPoly(field, product);
      }
      multiplyByMonomial(degree, coefficient) {
        if (degree < 0) {
          throw new IllegalArgumentException();
        }
        if (coefficient === 0) {
          return this.field.getZero();
        }
        const coefficients = this.coefficients;
        const size = coefficients.length;
        const product = new Int32Array(size + degree);
        const field = this.field;
        for (let i = 0; i < size; i++) {
          product[i] = field.multiply(coefficients[i], coefficient);
        }
        return new GenericGFPoly(field, product);
      }
      divide(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("GenericGFPolys do not have same GenericGF field");
        }
        if (other.isZero()) {
          throw new IllegalArgumentException("Divide by 0");
        }
        const field = this.field;
        let quotient = field.getZero();
        let remainder = this;
        const denominatorLeadingTerm = other.getCoefficient(other.getDegree());
        const inverseDenominatorLeadingTerm = field.inverse(denominatorLeadingTerm);
        while (remainder.getDegree() >= other.getDegree() && !remainder.isZero()) {
          const degreeDifference = remainder.getDegree() - other.getDegree();
          const scale = field.multiply(remainder.getCoefficient(remainder.getDegree()), inverseDenominatorLeadingTerm);
          const term = other.multiplyByMonomial(degreeDifference, scale);
          const iterationQuotient = field.buildMonomial(degreeDifference, scale);
          quotient = quotient.addOrSubtract(iterationQuotient);
          remainder = remainder.addOrSubtract(term);
        }
        return [quotient, remainder];
      }
      toString() {
        let result = "";
        for (let degree = this.getDegree(); degree >= 0; degree--) {
          let coefficient = this.getCoefficient(degree);
          if (coefficient !== 0) {
            if (coefficient < 0) {
              result += " - ";
              coefficient = -coefficient;
            } else {
              if (result.length > 0) {
                result += " + ";
              }
            }
            if (degree === 0 || coefficient !== 1) {
              const alphaPower = this.field.log(coefficient);
              if (alphaPower === 0) {
                result += "1";
              } else if (alphaPower === 1) {
                result += "a";
              } else {
                result += "a^";
                result += alphaPower;
              }
            }
            if (degree !== 0) {
              if (degree === 1) {
                result += "x";
              } else {
                result += "x^";
                result += degree;
              }
            }
          }
        }
        return result;
      }
    }
    class ArithmeticException extends Exception {
    }
    ArithmeticException.kind = "ArithmeticException";
    class GenericGF extends AbstractGenericGF {
      constructor(primitive, size, generatorBase) {
        super();
        this.primitive = primitive;
        this.size = size;
        this.generatorBase = generatorBase;
        const expTable = new Int32Array(size);
        let x = 1;
        for (let i = 0; i < size; i++) {
          expTable[i] = x;
          x *= 2;
          if (x >= size) {
            x ^= primitive;
            x &= size - 1;
          }
        }
        this.expTable = expTable;
        const logTable = new Int32Array(size);
        for (let i = 0; i < size - 1; i++) {
          logTable[expTable[i]] = i;
        }
        this.logTable = logTable;
        this.zero = new GenericGFPoly(this, Int32Array.from([0]));
        this.one = new GenericGFPoly(this, Int32Array.from([1]));
      }
      getZero() {
        return this.zero;
      }
      getOne() {
        return this.one;
      }
      buildMonomial(degree, coefficient) {
        if (degree < 0) {
          throw new IllegalArgumentException();
        }
        if (coefficient === 0) {
          return this.zero;
        }
        const coefficients = new Int32Array(degree + 1);
        coefficients[0] = coefficient;
        return new GenericGFPoly(this, coefficients);
      }
      inverse(a) {
        if (a === 0) {
          throw new ArithmeticException();
        }
        return this.expTable[this.size - this.logTable[a] - 1];
      }
      multiply(a, b) {
        if (a === 0 || b === 0) {
          return 0;
        }
        return this.expTable[(this.logTable[a] + this.logTable[b]) % (this.size - 1)];
      }
      getSize() {
        return this.size;
      }
      getGeneratorBase() {
        return this.generatorBase;
      }
      toString() {
        return "GF(0x" + Integer.toHexString(this.primitive) + "," + this.size + ")";
      }
      equals(o) {
        return o === this;
      }
    }
    GenericGF.AZTEC_DATA_12 = new GenericGF(4201, 4096, 1);
    GenericGF.AZTEC_DATA_10 = new GenericGF(1033, 1024, 1);
    GenericGF.AZTEC_DATA_6 = new GenericGF(67, 64, 1);
    GenericGF.AZTEC_PARAM = new GenericGF(19, 16, 1);
    GenericGF.QR_CODE_FIELD_256 = new GenericGF(285, 256, 0);
    GenericGF.DATA_MATRIX_FIELD_256 = new GenericGF(301, 256, 1);
    GenericGF.AZTEC_DATA_8 = GenericGF.DATA_MATRIX_FIELD_256;
    GenericGF.MAXICODE_FIELD_64 = GenericGF.AZTEC_DATA_6;
    class ReedSolomonException extends Exception {
    }
    ReedSolomonException.kind = "ReedSolomonException";
    class IllegalStateException extends Exception {
    }
    IllegalStateException.kind = "IllegalStateException";
    class ReedSolomonDecoder {
      constructor(field) {
        this.field = field;
      }
      decode(received, twoS) {
        const field = this.field;
        const poly = new GenericGFPoly(field, received);
        const syndromeCoefficients = new Int32Array(twoS);
        let noError = true;
        for (let i = 0; i < twoS; i++) {
          const evalResult = poly.evaluateAt(field.exp(i + field.getGeneratorBase()));
          syndromeCoefficients[syndromeCoefficients.length - 1 - i] = evalResult;
          if (evalResult !== 0) {
            noError = false;
          }
        }
        if (noError) {
          return;
        }
        const syndrome = new GenericGFPoly(field, syndromeCoefficients);
        const sigmaOmega = this.runEuclideanAlgorithm(field.buildMonomial(twoS, 1), syndrome, twoS);
        const sigma = sigmaOmega[0];
        const omega = sigmaOmega[1];
        const errorLocations = this.findErrorLocations(sigma);
        const errorMagnitudes = this.findErrorMagnitudes(omega, errorLocations);
        for (let i = 0; i < errorLocations.length; i++) {
          const position = received.length - 1 - field.log(errorLocations[i]);
          if (position < 0) {
            throw new ReedSolomonException("Bad error location");
          }
          received[position] = GenericGF.addOrSubtract(received[position], errorMagnitudes[i]);
        }
      }
      runEuclideanAlgorithm(a, b, R) {
        if (a.getDegree() < b.getDegree()) {
          const temp = a;
          a = b;
          b = temp;
        }
        const field = this.field;
        let rLast = a;
        let r = b;
        let tLast = field.getZero();
        let t = field.getOne();
        while (r.getDegree() >= (R / 2 | 0)) {
          let rLastLast = rLast;
          let tLastLast = tLast;
          rLast = r;
          tLast = t;
          if (rLast.isZero()) {
            throw new ReedSolomonException("r_{i-1} was zero");
          }
          r = rLastLast;
          let q = field.getZero();
          const denominatorLeadingTerm = rLast.getCoefficient(rLast.getDegree());
          const dltInverse = field.inverse(denominatorLeadingTerm);
          while (r.getDegree() >= rLast.getDegree() && !r.isZero()) {
            const degreeDiff = r.getDegree() - rLast.getDegree();
            const scale = field.multiply(r.getCoefficient(r.getDegree()), dltInverse);
            q = q.addOrSubtract(field.buildMonomial(degreeDiff, scale));
            r = r.addOrSubtract(rLast.multiplyByMonomial(degreeDiff, scale));
          }
          t = q.multiply(tLast).addOrSubtract(tLastLast);
          if (r.getDegree() >= rLast.getDegree()) {
            throw new IllegalStateException("Division algorithm failed to reduce polynomial?");
          }
        }
        const sigmaTildeAtZero = t.getCoefficient(0);
        if (sigmaTildeAtZero === 0) {
          throw new ReedSolomonException("sigmaTilde(0) was zero");
        }
        const inverse = field.inverse(sigmaTildeAtZero);
        const sigma = t.multiplyScalar(inverse);
        const omega = r.multiplyScalar(inverse);
        return [sigma, omega];
      }
      findErrorLocations(errorLocator) {
        const numErrors = errorLocator.getDegree();
        if (numErrors === 1) {
          return Int32Array.from([errorLocator.getCoefficient(1)]);
        }
        const result = new Int32Array(numErrors);
        let e = 0;
        const field = this.field;
        for (let i = 1; i < field.getSize() && e < numErrors; i++) {
          if (errorLocator.evaluateAt(i) === 0) {
            result[e] = field.inverse(i);
            e++;
          }
        }
        if (e !== numErrors) {
          throw new ReedSolomonException("Error locator degree does not match number of roots");
        }
        return result;
      }
      findErrorMagnitudes(errorEvaluator, errorLocations) {
        const s = errorLocations.length;
        const result = new Int32Array(s);
        const field = this.field;
        for (let i = 0; i < s; i++) {
          const xiInverse = field.inverse(errorLocations[i]);
          let denominator = 1;
          for (let j = 0; j < s; j++) {
            if (i !== j) {
              const term = field.multiply(errorLocations[j], xiInverse);
              const termPlus1 = (term & 1) === 0 ? term | 1 : term & ~1;
              denominator = field.multiply(denominator, termPlus1);
            }
          }
          result[i] = field.multiply(errorEvaluator.evaluateAt(xiInverse), field.inverse(denominator));
          if (field.getGeneratorBase() !== 0) {
            result[i] = field.multiply(result[i], xiInverse);
          }
        }
        return result;
      }
    }
    var Table;
    (function(Table2) {
      Table2[Table2["UPPER"] = 0] = "UPPER";
      Table2[Table2["LOWER"] = 1] = "LOWER";
      Table2[Table2["MIXED"] = 2] = "MIXED";
      Table2[Table2["DIGIT"] = 3] = "DIGIT";
      Table2[Table2["PUNCT"] = 4] = "PUNCT";
      Table2[Table2["BINARY"] = 5] = "BINARY";
    })(Table || (Table = {}));
    class Decoder {
      decode(detectorResult) {
        this.ddata = detectorResult;
        let matrix = detectorResult.getBits();
        let rawbits = this.extractBits(matrix);
        let correctedBits = this.correctBits(rawbits);
        let rawBytes = Decoder.convertBoolArrayToByteArray(correctedBits);
        let result = Decoder.getEncodedData(correctedBits);
        let decoderResult = new DecoderResult(rawBytes, result, null, null);
        decoderResult.setNumBits(correctedBits.length);
        return decoderResult;
      }
      static highLevelDecode(correctedBits) {
        return this.getEncodedData(correctedBits);
      }
      static getEncodedData(correctedBits) {
        let endIndex = correctedBits.length;
        let latchTable = Table.UPPER;
        let shiftTable = Table.UPPER;
        let result = "";
        let index = 0;
        while (index < endIndex) {
          if (shiftTable === Table.BINARY) {
            if (endIndex - index < 5) {
              break;
            }
            let length = Decoder.readCode(correctedBits, index, 5);
            index += 5;
            if (length === 0) {
              if (endIndex - index < 11) {
                break;
              }
              length = Decoder.readCode(correctedBits, index, 11) + 31;
              index += 11;
            }
            for (let charCount = 0; charCount < length; charCount++) {
              if (endIndex - index < 8) {
                index = endIndex;
                break;
              }
              const code = Decoder.readCode(correctedBits, index, 8);
              result += StringUtils.castAsNonUtf8Char(code);
              index += 8;
            }
            shiftTable = latchTable;
          } else {
            let size = shiftTable === Table.DIGIT ? 4 : 5;
            if (endIndex - index < size) {
              break;
            }
            let code = Decoder.readCode(correctedBits, index, size);
            index += size;
            let str = Decoder.getCharacter(shiftTable, code);
            if (str.startsWith("CTRL_")) {
              latchTable = shiftTable;
              shiftTable = Decoder.getTable(str.charAt(5));
              if (str.charAt(6) === "L") {
                latchTable = shiftTable;
              }
            } else {
              result += str;
              shiftTable = latchTable;
            }
          }
        }
        return result;
      }
      static getTable(t) {
        switch (t) {
          case "L":
            return Table.LOWER;
          case "P":
            return Table.PUNCT;
          case "M":
            return Table.MIXED;
          case "D":
            return Table.DIGIT;
          case "B":
            return Table.BINARY;
          case "U":
          default:
            return Table.UPPER;
        }
      }
      static getCharacter(table, code) {
        switch (table) {
          case Table.UPPER:
            return Decoder.UPPER_TABLE[code];
          case Table.LOWER:
            return Decoder.LOWER_TABLE[code];
          case Table.MIXED:
            return Decoder.MIXED_TABLE[code];
          case Table.PUNCT:
            return Decoder.PUNCT_TABLE[code];
          case Table.DIGIT:
            return Decoder.DIGIT_TABLE[code];
          default:
            throw new IllegalStateException("Bad table");
        }
      }
      correctBits(rawbits) {
        let gf;
        let codewordSize;
        if (this.ddata.getNbLayers() <= 2) {
          codewordSize = 6;
          gf = GenericGF.AZTEC_DATA_6;
        } else if (this.ddata.getNbLayers() <= 8) {
          codewordSize = 8;
          gf = GenericGF.AZTEC_DATA_8;
        } else if (this.ddata.getNbLayers() <= 22) {
          codewordSize = 10;
          gf = GenericGF.AZTEC_DATA_10;
        } else {
          codewordSize = 12;
          gf = GenericGF.AZTEC_DATA_12;
        }
        let numDataCodewords = this.ddata.getNbDatablocks();
        let numCodewords = rawbits.length / codewordSize;
        if (numCodewords < numDataCodewords) {
          throw new FormatException();
        }
        let offset = rawbits.length % codewordSize;
        let dataWords = new Int32Array(numCodewords);
        for (let i = 0; i < numCodewords; i++, offset += codewordSize) {
          dataWords[i] = Decoder.readCode(rawbits, offset, codewordSize);
        }
        try {
          let rsDecoder = new ReedSolomonDecoder(gf);
          rsDecoder.decode(dataWords, numCodewords - numDataCodewords);
        } catch (ex) {
          throw new FormatException(ex);
        }
        let mask = (1 << codewordSize) - 1;
        let stuffedBits = 0;
        for (let i = 0; i < numDataCodewords; i++) {
          let dataWord = dataWords[i];
          if (dataWord === 0 || dataWord === mask) {
            throw new FormatException();
          } else if (dataWord === 1 || dataWord === mask - 1) {
            stuffedBits++;
          }
        }
        let correctedBits = new Array(numDataCodewords * codewordSize - stuffedBits);
        let index = 0;
        for (let i = 0; i < numDataCodewords; i++) {
          let dataWord = dataWords[i];
          if (dataWord === 1 || dataWord === mask - 1) {
            correctedBits.fill(dataWord > 1, index, index + codewordSize - 1);
            index += codewordSize - 1;
          } else {
            for (let bit = codewordSize - 1; bit >= 0; --bit) {
              correctedBits[index++] = (dataWord & 1 << bit) !== 0;
            }
          }
        }
        return correctedBits;
      }
      extractBits(matrix) {
        let compact = this.ddata.isCompact();
        let layers = this.ddata.getNbLayers();
        let baseMatrixSize = (compact ? 11 : 14) + layers * 4;
        let alignmentMap = new Int32Array(baseMatrixSize);
        let rawbits = new Array(this.totalBitsInLayer(layers, compact));
        if (compact) {
          for (let i = 0; i < alignmentMap.length; i++) {
            alignmentMap[i] = i;
          }
        } else {
          let matrixSize = baseMatrixSize + 1 + 2 * Integer.truncDivision(Integer.truncDivision(baseMatrixSize, 2) - 1, 15);
          let origCenter = baseMatrixSize / 2;
          let center = Integer.truncDivision(matrixSize, 2);
          for (let i = 0; i < origCenter; i++) {
            let newOffset = i + Integer.truncDivision(i, 15);
            alignmentMap[origCenter - i - 1] = center - newOffset - 1;
            alignmentMap[origCenter + i] = center + newOffset + 1;
          }
        }
        for (let i = 0, rowOffset = 0; i < layers; i++) {
          let rowSize = (layers - i) * 4 + (compact ? 9 : 12);
          let low = i * 2;
          let high = baseMatrixSize - 1 - low;
          for (let j = 0; j < rowSize; j++) {
            let columnOffset = j * 2;
            for (let k = 0; k < 2; k++) {
              rawbits[rowOffset + columnOffset + k] = matrix.get(alignmentMap[low + k], alignmentMap[low + j]);
              rawbits[rowOffset + 2 * rowSize + columnOffset + k] = matrix.get(alignmentMap[low + j], alignmentMap[high - k]);
              rawbits[rowOffset + 4 * rowSize + columnOffset + k] = matrix.get(alignmentMap[high - k], alignmentMap[high - j]);
              rawbits[rowOffset + 6 * rowSize + columnOffset + k] = matrix.get(alignmentMap[high - j], alignmentMap[low + k]);
            }
          }
          rowOffset += rowSize * 8;
        }
        return rawbits;
      }
      static readCode(rawbits, startIndex, length) {
        let res = 0;
        for (let i = startIndex; i < startIndex + length; i++) {
          res <<= 1;
          if (rawbits[i]) {
            res |= 1;
          }
        }
        return res;
      }
      static readByte(rawbits, startIndex) {
        let n = rawbits.length - startIndex;
        if (n >= 8) {
          return Decoder.readCode(rawbits, startIndex, 8);
        }
        return Decoder.readCode(rawbits, startIndex, n) << 8 - n;
      }
      static convertBoolArrayToByteArray(boolArr) {
        let byteArr = new Uint8Array((boolArr.length + 7) / 8);
        for (let i = 0; i < byteArr.length; i++) {
          byteArr[i] = Decoder.readByte(boolArr, 8 * i);
        }
        return byteArr;
      }
      totalBitsInLayer(layers, compact) {
        return ((compact ? 88 : 112) + 16 * layers) * layers;
      }
    }
    Decoder.UPPER_TABLE = [
      "CTRL_PS",
      " ",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "CTRL_LL",
      "CTRL_ML",
      "CTRL_DL",
      "CTRL_BS"
    ];
    Decoder.LOWER_TABLE = [
      "CTRL_PS",
      " ",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "CTRL_US",
      "CTRL_ML",
      "CTRL_DL",
      "CTRL_BS"
    ];
    Decoder.MIXED_TABLE = [
      "CTRL_PS",
      " ",
      "\\1",
      "\\2",
      "\\3",
      "\\4",
      "\\5",
      "\\6",
      "\\7",
      "\b",
      "	",
      "\n",
      "\\13",
      "\f",
      "\r",
      "\\33",
      "\\34",
      "\\35",
      "\\36",
      "\\37",
      "@",
      "\\",
      "^",
      "_",
      "`",
      "|",
      "~",
      "\\177",
      "CTRL_LL",
      "CTRL_UL",
      "CTRL_PL",
      "CTRL_BS"
    ];
    Decoder.PUNCT_TABLE = [
      "",
      "\r",
      "\r\n",
      ". ",
      ", ",
      ": ",
      "!",
      '"',
      "#",
      "$",
      "%",
      "&",
      "'",
      "(",
      ")",
      "*",
      "+",
      ",",
      "-",
      ".",
      "/",
      ":",
      ";",
      "<",
      "=",
      ">",
      "?",
      "[",
      "]",
      "{",
      "}",
      "CTRL_UL"
    ];
    Decoder.DIGIT_TABLE = [
      "CTRL_PS",
      " ",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      ",",
      ".",
      "CTRL_UL",
      "CTRL_US"
    ];
    class MathUtils {
      constructor() {
      }
      static round(d) {
        if (NaN === d)
          return 0;
        if (d <= Number.MIN_SAFE_INTEGER)
          return Number.MIN_SAFE_INTEGER;
        if (d >= Number.MAX_SAFE_INTEGER)
          return Number.MAX_SAFE_INTEGER;
        return d + (d < 0 ? -0.5 : 0.5) | 0;
      }
      static distance(aX, aY, bX, bY) {
        const xDiff = aX - bX;
        const yDiff = aY - bY;
        return Math.sqrt(xDiff * xDiff + yDiff * yDiff);
      }
      static sum(array) {
        let count = 0;
        for (let i = 0, length = array.length; i !== length; i++) {
          const a = array[i];
          count += a;
        }
        return count;
      }
    }
    class Float {
      static floatToIntBits(f) {
        return f;
      }
    }
    Float.MAX_VALUE = Number.MAX_SAFE_INTEGER;
    class ResultPoint {
      constructor(x, y) {
        this.x = x;
        this.y = y;
      }
      getX() {
        return this.x;
      }
      getY() {
        return this.y;
      }
      equals(other) {
        if (other instanceof ResultPoint) {
          const otherPoint = other;
          return this.x === otherPoint.x && this.y === otherPoint.y;
        }
        return false;
      }
      hashCode() {
        return 31 * Float.floatToIntBits(this.x) + Float.floatToIntBits(this.y);
      }
      toString() {
        return "(" + this.x + "," + this.y + ")";
      }
      static orderBestPatterns(patterns) {
        const zeroOneDistance = this.distance(patterns[0], patterns[1]);
        const oneTwoDistance = this.distance(patterns[1], patterns[2]);
        const zeroTwoDistance = this.distance(patterns[0], patterns[2]);
        let pointA;
        let pointB;
        let pointC;
        if (oneTwoDistance >= zeroOneDistance && oneTwoDistance >= zeroTwoDistance) {
          pointB = patterns[0];
          pointA = patterns[1];
          pointC = patterns[2];
        } else if (zeroTwoDistance >= oneTwoDistance && zeroTwoDistance >= zeroOneDistance) {
          pointB = patterns[1];
          pointA = patterns[0];
          pointC = patterns[2];
        } else {
          pointB = patterns[2];
          pointA = patterns[0];
          pointC = patterns[1];
        }
        if (this.crossProductZ(pointA, pointB, pointC) < 0) {
          const temp = pointA;
          pointA = pointC;
          pointC = temp;
        }
        patterns[0] = pointA;
        patterns[1] = pointB;
        patterns[2] = pointC;
      }
      static distance(pattern1, pattern2) {
        return MathUtils.distance(pattern1.x, pattern1.y, pattern2.x, pattern2.y);
      }
      static crossProductZ(pointA, pointB, pointC) {
        const bX = pointB.x;
        const bY = pointB.y;
        return (pointC.x - bX) * (pointA.y - bY) - (pointC.y - bY) * (pointA.x - bX);
      }
    }
    class DetectorResult {
      constructor(bits, points) {
        this.bits = bits;
        this.points = points;
      }
      getBits() {
        return this.bits;
      }
      getPoints() {
        return this.points;
      }
    }
    class AztecDetectorResult extends DetectorResult {
      constructor(bits, points, compact, nbDatablocks, nbLayers) {
        super(bits, points);
        this.compact = compact;
        this.nbDatablocks = nbDatablocks;
        this.nbLayers = nbLayers;
      }
      getNbLayers() {
        return this.nbLayers;
      }
      getNbDatablocks() {
        return this.nbDatablocks;
      }
      isCompact() {
        return this.compact;
      }
    }
    class WhiteRectangleDetector {
      constructor(image, initSize, x, y) {
        this.image = image;
        this.height = image.getHeight();
        this.width = image.getWidth();
        if (void 0 === initSize || null === initSize) {
          initSize = WhiteRectangleDetector.INIT_SIZE;
        }
        if (void 0 === x || null === x) {
          x = image.getWidth() / 2 | 0;
        }
        if (void 0 === y || null === y) {
          y = image.getHeight() / 2 | 0;
        }
        const halfsize = initSize / 2 | 0;
        this.leftInit = x - halfsize;
        this.rightInit = x + halfsize;
        this.upInit = y - halfsize;
        this.downInit = y + halfsize;
        if (this.upInit < 0 || this.leftInit < 0 || this.downInit >= this.height || this.rightInit >= this.width) {
          throw new NotFoundException();
        }
      }
      detect() {
        let left = this.leftInit;
        let right = this.rightInit;
        let up = this.upInit;
        let down = this.downInit;
        let sizeExceeded = false;
        let aBlackPointFoundOnBorder = true;
        let atLeastOneBlackPointFoundOnBorder = false;
        let atLeastOneBlackPointFoundOnRight = false;
        let atLeastOneBlackPointFoundOnBottom = false;
        let atLeastOneBlackPointFoundOnLeft = false;
        let atLeastOneBlackPointFoundOnTop = false;
        const width = this.width;
        const height = this.height;
        while (aBlackPointFoundOnBorder) {
          aBlackPointFoundOnBorder = false;
          let rightBorderNotWhite = true;
          while ((rightBorderNotWhite || !atLeastOneBlackPointFoundOnRight) && right < width) {
            rightBorderNotWhite = this.containsBlackPoint(up, down, right, false);
            if (rightBorderNotWhite) {
              right++;
              aBlackPointFoundOnBorder = true;
              atLeastOneBlackPointFoundOnRight = true;
            } else if (!atLeastOneBlackPointFoundOnRight) {
              right++;
            }
          }
          if (right >= width) {
            sizeExceeded = true;
            break;
          }
          let bottomBorderNotWhite = true;
          while ((bottomBorderNotWhite || !atLeastOneBlackPointFoundOnBottom) && down < height) {
            bottomBorderNotWhite = this.containsBlackPoint(left, right, down, true);
            if (bottomBorderNotWhite) {
              down++;
              aBlackPointFoundOnBorder = true;
              atLeastOneBlackPointFoundOnBottom = true;
            } else if (!atLeastOneBlackPointFoundOnBottom) {
              down++;
            }
          }
          if (down >= height) {
            sizeExceeded = true;
            break;
          }
          let leftBorderNotWhite = true;
          while ((leftBorderNotWhite || !atLeastOneBlackPointFoundOnLeft) && left >= 0) {
            leftBorderNotWhite = this.containsBlackPoint(up, down, left, false);
            if (leftBorderNotWhite) {
              left--;
              aBlackPointFoundOnBorder = true;
              atLeastOneBlackPointFoundOnLeft = true;
            } else if (!atLeastOneBlackPointFoundOnLeft) {
              left--;
            }
          }
          if (left < 0) {
            sizeExceeded = true;
            break;
          }
          let topBorderNotWhite = true;
          while ((topBorderNotWhite || !atLeastOneBlackPointFoundOnTop) && up >= 0) {
            topBorderNotWhite = this.containsBlackPoint(left, right, up, true);
            if (topBorderNotWhite) {
              up--;
              aBlackPointFoundOnBorder = true;
              atLeastOneBlackPointFoundOnTop = true;
            } else if (!atLeastOneBlackPointFoundOnTop) {
              up--;
            }
          }
          if (up < 0) {
            sizeExceeded = true;
            break;
          }
          if (aBlackPointFoundOnBorder) {
            atLeastOneBlackPointFoundOnBorder = true;
          }
        }
        if (!sizeExceeded && atLeastOneBlackPointFoundOnBorder) {
          const maxSize = right - left;
          let z = null;
          for (let i = 1; z === null && i < maxSize; i++) {
            z = this.getBlackPointOnSegment(left, down - i, left + i, down);
          }
          if (z == null) {
            throw new NotFoundException();
          }
          let t = null;
          for (let i = 1; t === null && i < maxSize; i++) {
            t = this.getBlackPointOnSegment(left, up + i, left + i, up);
          }
          if (t == null) {
            throw new NotFoundException();
          }
          let x = null;
          for (let i = 1; x === null && i < maxSize; i++) {
            x = this.getBlackPointOnSegment(right, up + i, right - i, up);
          }
          if (x == null) {
            throw new NotFoundException();
          }
          let y = null;
          for (let i = 1; y === null && i < maxSize; i++) {
            y = this.getBlackPointOnSegment(right, down - i, right - i, down);
          }
          if (y == null) {
            throw new NotFoundException();
          }
          return this.centerEdges(y, z, x, t);
        } else {
          throw new NotFoundException();
        }
      }
      getBlackPointOnSegment(aX, aY, bX, bY) {
        const dist = MathUtils.round(MathUtils.distance(aX, aY, bX, bY));
        const xStep = (bX - aX) / dist;
        const yStep = (bY - aY) / dist;
        const image = this.image;
        for (let i = 0; i < dist; i++) {
          const x = MathUtils.round(aX + i * xStep);
          const y = MathUtils.round(aY + i * yStep);
          if (image.get(x, y)) {
            return new ResultPoint(x, y);
          }
        }
        return null;
      }
      centerEdges(y, z, x, t) {
        const yi = y.getX();
        const yj = y.getY();
        const zi = z.getX();
        const zj = z.getY();
        const xi = x.getX();
        const xj = x.getY();
        const ti = t.getX();
        const tj = t.getY();
        const CORR = WhiteRectangleDetector.CORR;
        if (yi < this.width / 2) {
          return [
            new ResultPoint(ti - CORR, tj + CORR),
            new ResultPoint(zi + CORR, zj + CORR),
            new ResultPoint(xi - CORR, xj - CORR),
            new ResultPoint(yi + CORR, yj - CORR)
          ];
        } else {
          return [
            new ResultPoint(ti + CORR, tj + CORR),
            new ResultPoint(zi + CORR, zj - CORR),
            new ResultPoint(xi - CORR, xj + CORR),
            new ResultPoint(yi - CORR, yj - CORR)
          ];
        }
      }
      containsBlackPoint(a, b, fixed, horizontal) {
        const image = this.image;
        if (horizontal) {
          for (let x = a; x <= b; x++) {
            if (image.get(x, fixed)) {
              return true;
            }
          }
        } else {
          for (let y = a; y <= b; y++) {
            if (image.get(fixed, y)) {
              return true;
            }
          }
        }
        return false;
      }
    }
    WhiteRectangleDetector.INIT_SIZE = 10;
    WhiteRectangleDetector.CORR = 1;
    class GridSampler {
      static checkAndNudgePoints(image, points) {
        const width = image.getWidth();
        const height = image.getHeight();
        let nudged = true;
        for (let offset = 0; offset < points.length && nudged; offset += 2) {
          const x = Math.floor(points[offset]);
          const y = Math.floor(points[offset + 1]);
          if (x < -1 || x > width || y < -1 || y > height) {
            throw new NotFoundException();
          }
          nudged = false;
          if (x === -1) {
            points[offset] = 0;
            nudged = true;
          } else if (x === width) {
            points[offset] = width - 1;
            nudged = true;
          }
          if (y === -1) {
            points[offset + 1] = 0;
            nudged = true;
          } else if (y === height) {
            points[offset + 1] = height - 1;
            nudged = true;
          }
        }
        nudged = true;
        for (let offset = points.length - 2; offset >= 0 && nudged; offset -= 2) {
          const x = Math.floor(points[offset]);
          const y = Math.floor(points[offset + 1]);
          if (x < -1 || x > width || y < -1 || y > height) {
            throw new NotFoundException();
          }
          nudged = false;
          if (x === -1) {
            points[offset] = 0;
            nudged = true;
          } else if (x === width) {
            points[offset] = width - 1;
            nudged = true;
          }
          if (y === -1) {
            points[offset + 1] = 0;
            nudged = true;
          } else if (y === height) {
            points[offset + 1] = height - 1;
            nudged = true;
          }
        }
      }
    }
    class PerspectiveTransform {
      constructor(a11, a21, a31, a12, a22, a32, a13, a23, a33) {
        this.a11 = a11;
        this.a21 = a21;
        this.a31 = a31;
        this.a12 = a12;
        this.a22 = a22;
        this.a32 = a32;
        this.a13 = a13;
        this.a23 = a23;
        this.a33 = a33;
      }
      static quadrilateralToQuadrilateral(x0, y0, x1, y1, x2, y2, x3, y3, x0p, y0p, x1p, y1p, x2p, y2p, x3p, y3p) {
        const qToS = PerspectiveTransform.quadrilateralToSquare(x0, y0, x1, y1, x2, y2, x3, y3);
        const sToQ = PerspectiveTransform.squareToQuadrilateral(x0p, y0p, x1p, y1p, x2p, y2p, x3p, y3p);
        return sToQ.times(qToS);
      }
      transformPoints(points) {
        const max = points.length;
        const a11 = this.a11;
        const a12 = this.a12;
        const a13 = this.a13;
        const a21 = this.a21;
        const a22 = this.a22;
        const a23 = this.a23;
        const a31 = this.a31;
        const a32 = this.a32;
        const a33 = this.a33;
        for (let i = 0; i < max; i += 2) {
          const x = points[i];
          const y = points[i + 1];
          const denominator = a13 * x + a23 * y + a33;
          points[i] = (a11 * x + a21 * y + a31) / denominator;
          points[i + 1] = (a12 * x + a22 * y + a32) / denominator;
        }
      }
      transformPointsWithValues(xValues, yValues) {
        const a11 = this.a11;
        const a12 = this.a12;
        const a13 = this.a13;
        const a21 = this.a21;
        const a22 = this.a22;
        const a23 = this.a23;
        const a31 = this.a31;
        const a32 = this.a32;
        const a33 = this.a33;
        const n = xValues.length;
        for (let i = 0; i < n; i++) {
          const x = xValues[i];
          const y = yValues[i];
          const denominator = a13 * x + a23 * y + a33;
          xValues[i] = (a11 * x + a21 * y + a31) / denominator;
          yValues[i] = (a12 * x + a22 * y + a32) / denominator;
        }
      }
      static squareToQuadrilateral(x0, y0, x1, y1, x2, y2, x3, y3) {
        const dx3 = x0 - x1 + x2 - x3;
        const dy3 = y0 - y1 + y2 - y3;
        if (dx3 === 0 && dy3 === 0) {
          return new PerspectiveTransform(x1 - x0, x2 - x1, x0, y1 - y0, y2 - y1, y0, 0, 0, 1);
        } else {
          const dx1 = x1 - x2;
          const dx2 = x3 - x2;
          const dy1 = y1 - y2;
          const dy2 = y3 - y2;
          const denominator = dx1 * dy2 - dx2 * dy1;
          const a13 = (dx3 * dy2 - dx2 * dy3) / denominator;
          const a23 = (dx1 * dy3 - dx3 * dy1) / denominator;
          return new PerspectiveTransform(x1 - x0 + a13 * x1, x3 - x0 + a23 * x3, x0, y1 - y0 + a13 * y1, y3 - y0 + a23 * y3, y0, a13, a23, 1);
        }
      }
      static quadrilateralToSquare(x0, y0, x1, y1, x2, y2, x3, y3) {
        return PerspectiveTransform.squareToQuadrilateral(x0, y0, x1, y1, x2, y2, x3, y3).buildAdjoint();
      }
      buildAdjoint() {
        return new PerspectiveTransform(this.a22 * this.a33 - this.a23 * this.a32, this.a23 * this.a31 - this.a21 * this.a33, this.a21 * this.a32 - this.a22 * this.a31, this.a13 * this.a32 - this.a12 * this.a33, this.a11 * this.a33 - this.a13 * this.a31, this.a12 * this.a31 - this.a11 * this.a32, this.a12 * this.a23 - this.a13 * this.a22, this.a13 * this.a21 - this.a11 * this.a23, this.a11 * this.a22 - this.a12 * this.a21);
      }
      times(other) {
        return new PerspectiveTransform(this.a11 * other.a11 + this.a21 * other.a12 + this.a31 * other.a13, this.a11 * other.a21 + this.a21 * other.a22 + this.a31 * other.a23, this.a11 * other.a31 + this.a21 * other.a32 + this.a31 * other.a33, this.a12 * other.a11 + this.a22 * other.a12 + this.a32 * other.a13, this.a12 * other.a21 + this.a22 * other.a22 + this.a32 * other.a23, this.a12 * other.a31 + this.a22 * other.a32 + this.a32 * other.a33, this.a13 * other.a11 + this.a23 * other.a12 + this.a33 * other.a13, this.a13 * other.a21 + this.a23 * other.a22 + this.a33 * other.a23, this.a13 * other.a31 + this.a23 * other.a32 + this.a33 * other.a33);
      }
    }
    class DefaultGridSampler extends GridSampler {
      sampleGrid(image, dimensionX, dimensionY, p1ToX, p1ToY, p2ToX, p2ToY, p3ToX, p3ToY, p4ToX, p4ToY, p1FromX, p1FromY, p2FromX, p2FromY, p3FromX, p3FromY, p4FromX, p4FromY) {
        const transform = PerspectiveTransform.quadrilateralToQuadrilateral(p1ToX, p1ToY, p2ToX, p2ToY, p3ToX, p3ToY, p4ToX, p4ToY, p1FromX, p1FromY, p2FromX, p2FromY, p3FromX, p3FromY, p4FromX, p4FromY);
        return this.sampleGridWithTransform(image, dimensionX, dimensionY, transform);
      }
      sampleGridWithTransform(image, dimensionX, dimensionY, transform) {
        if (dimensionX <= 0 || dimensionY <= 0) {
          throw new NotFoundException();
        }
        const bits = new BitMatrix(dimensionX, dimensionY);
        const points = new Float32Array(2 * dimensionX);
        for (let y = 0; y < dimensionY; y++) {
          const max = points.length;
          const iValue = y + 0.5;
          for (let x = 0; x < max; x += 2) {
            points[x] = x / 2 + 0.5;
            points[x + 1] = iValue;
          }
          transform.transformPoints(points);
          GridSampler.checkAndNudgePoints(image, points);
          try {
            for (let x = 0; x < max; x += 2) {
              if (image.get(Math.floor(points[x]), Math.floor(points[x + 1]))) {
                bits.set(x / 2, y);
              }
            }
          } catch (aioobe) {
            throw new NotFoundException();
          }
        }
        return bits;
      }
    }
    class GridSamplerInstance {
      static setGridSampler(newGridSampler) {
        GridSamplerInstance.gridSampler = newGridSampler;
      }
      static getInstance() {
        return GridSamplerInstance.gridSampler;
      }
    }
    GridSamplerInstance.gridSampler = new DefaultGridSampler();
    class Point {
      constructor(x, y) {
        this.x = x;
        this.y = y;
      }
      toResultPoint() {
        return new ResultPoint(this.getX(), this.getY());
      }
      getX() {
        return this.x;
      }
      getY() {
        return this.y;
      }
    }
    class Detector {
      constructor(image) {
        this.EXPECTED_CORNER_BITS = new Int32Array([
          3808,
          476,
          2107,
          1799
        ]);
        this.image = image;
      }
      detect() {
        return this.detectMirror(false);
      }
      detectMirror(isMirror) {
        let pCenter = this.getMatrixCenter();
        let bullsEyeCorners = this.getBullsEyeCorners(pCenter);
        if (isMirror) {
          let temp = bullsEyeCorners[0];
          bullsEyeCorners[0] = bullsEyeCorners[2];
          bullsEyeCorners[2] = temp;
        }
        this.extractParameters(bullsEyeCorners);
        let bits = this.sampleGrid(this.image, bullsEyeCorners[this.shift % 4], bullsEyeCorners[(this.shift + 1) % 4], bullsEyeCorners[(this.shift + 2) % 4], bullsEyeCorners[(this.shift + 3) % 4]);
        let corners = this.getMatrixCornerPoints(bullsEyeCorners);
        return new AztecDetectorResult(bits, corners, this.compact, this.nbDataBlocks, this.nbLayers);
      }
      extractParameters(bullsEyeCorners) {
        if (!this.isValidPoint(bullsEyeCorners[0]) || !this.isValidPoint(bullsEyeCorners[1]) || !this.isValidPoint(bullsEyeCorners[2]) || !this.isValidPoint(bullsEyeCorners[3])) {
          throw new NotFoundException();
        }
        let length = 2 * this.nbCenterLayers;
        let sides = new Int32Array([
          this.sampleLine(bullsEyeCorners[0], bullsEyeCorners[1], length),
          this.sampleLine(bullsEyeCorners[1], bullsEyeCorners[2], length),
          this.sampleLine(bullsEyeCorners[2], bullsEyeCorners[3], length),
          this.sampleLine(bullsEyeCorners[3], bullsEyeCorners[0], length)
        ]);
        this.shift = this.getRotation(sides, length);
        let parameterData = 0;
        for (let i = 0; i < 4; i++) {
          let side = sides[(this.shift + i) % 4];
          if (this.compact) {
            parameterData <<= 7;
            parameterData += side >> 1 & 127;
          } else {
            parameterData <<= 10;
            parameterData += (side >> 2 & 31 << 5) + (side >> 1 & 31);
          }
        }
        let correctedData = this.getCorrectedParameterData(parameterData, this.compact);
        if (this.compact) {
          this.nbLayers = (correctedData >> 6) + 1;
          this.nbDataBlocks = (correctedData & 63) + 1;
        } else {
          this.nbLayers = (correctedData >> 11) + 1;
          this.nbDataBlocks = (correctedData & 2047) + 1;
        }
      }
      getRotation(sides, length) {
        let cornerBits = 0;
        sides.forEach((side, idx, arr) => {
          let t = (side >> length - 2 << 1) + (side & 1);
          cornerBits = (cornerBits << 3) + t;
        });
        cornerBits = ((cornerBits & 1) << 11) + (cornerBits >> 1);
        for (let shift = 0; shift < 4; shift++) {
          if (Integer.bitCount(cornerBits ^ this.EXPECTED_CORNER_BITS[shift]) <= 2) {
            return shift;
          }
        }
        throw new NotFoundException();
      }
      getCorrectedParameterData(parameterData, compact) {
        let numCodewords;
        let numDataCodewords;
        if (compact) {
          numCodewords = 7;
          numDataCodewords = 2;
        } else {
          numCodewords = 10;
          numDataCodewords = 4;
        }
        let numECCodewords = numCodewords - numDataCodewords;
        let parameterWords = new Int32Array(numCodewords);
        for (let i = numCodewords - 1; i >= 0; --i) {
          parameterWords[i] = parameterData & 15;
          parameterData >>= 4;
        }
        try {
          let rsDecoder = new ReedSolomonDecoder(GenericGF.AZTEC_PARAM);
          rsDecoder.decode(parameterWords, numECCodewords);
        } catch (ignored) {
          throw new NotFoundException();
        }
        let result = 0;
        for (let i = 0; i < numDataCodewords; i++) {
          result = (result << 4) + parameterWords[i];
        }
        return result;
      }
      getBullsEyeCorners(pCenter) {
        let pina = pCenter;
        let pinb = pCenter;
        let pinc = pCenter;
        let pind = pCenter;
        let color = true;
        for (this.nbCenterLayers = 1; this.nbCenterLayers < 9; this.nbCenterLayers++) {
          let pouta = this.getFirstDifferent(pina, color, 1, -1);
          let poutb = this.getFirstDifferent(pinb, color, 1, 1);
          let poutc = this.getFirstDifferent(pinc, color, -1, 1);
          let poutd = this.getFirstDifferent(pind, color, -1, -1);
          if (this.nbCenterLayers > 2) {
            let q = this.distancePoint(poutd, pouta) * this.nbCenterLayers / (this.distancePoint(pind, pina) * (this.nbCenterLayers + 2));
            if (q < 0.75 || q > 1.25 || !this.isWhiteOrBlackRectangle(pouta, poutb, poutc, poutd)) {
              break;
            }
          }
          pina = pouta;
          pinb = poutb;
          pinc = poutc;
          pind = poutd;
          color = !color;
        }
        if (this.nbCenterLayers !== 5 && this.nbCenterLayers !== 7) {
          throw new NotFoundException();
        }
        this.compact = this.nbCenterLayers === 5;
        let pinax = new ResultPoint(pina.getX() + 0.5, pina.getY() - 0.5);
        let pinbx = new ResultPoint(pinb.getX() + 0.5, pinb.getY() + 0.5);
        let pincx = new ResultPoint(pinc.getX() - 0.5, pinc.getY() + 0.5);
        let pindx = new ResultPoint(pind.getX() - 0.5, pind.getY() - 0.5);
        return this.expandSquare([pinax, pinbx, pincx, pindx], 2 * this.nbCenterLayers - 3, 2 * this.nbCenterLayers);
      }
      getMatrixCenter() {
        let pointA;
        let pointB;
        let pointC;
        let pointD;
        try {
          let cornerPoints = new WhiteRectangleDetector(this.image).detect();
          pointA = cornerPoints[0];
          pointB = cornerPoints[1];
          pointC = cornerPoints[2];
          pointD = cornerPoints[3];
        } catch (e) {
          let cx2 = this.image.getWidth() / 2;
          let cy2 = this.image.getHeight() / 2;
          pointA = this.getFirstDifferent(new Point(cx2 + 7, cy2 - 7), false, 1, -1).toResultPoint();
          pointB = this.getFirstDifferent(new Point(cx2 + 7, cy2 + 7), false, 1, 1).toResultPoint();
          pointC = this.getFirstDifferent(new Point(cx2 - 7, cy2 + 7), false, -1, 1).toResultPoint();
          pointD = this.getFirstDifferent(new Point(cx2 - 7, cy2 - 7), false, -1, -1).toResultPoint();
        }
        let cx = MathUtils.round((pointA.getX() + pointD.getX() + pointB.getX() + pointC.getX()) / 4);
        let cy = MathUtils.round((pointA.getY() + pointD.getY() + pointB.getY() + pointC.getY()) / 4);
        try {
          let cornerPoints = new WhiteRectangleDetector(this.image, 15, cx, cy).detect();
          pointA = cornerPoints[0];
          pointB = cornerPoints[1];
          pointC = cornerPoints[2];
          pointD = cornerPoints[3];
        } catch (e) {
          pointA = this.getFirstDifferent(new Point(cx + 7, cy - 7), false, 1, -1).toResultPoint();
          pointB = this.getFirstDifferent(new Point(cx + 7, cy + 7), false, 1, 1).toResultPoint();
          pointC = this.getFirstDifferent(new Point(cx - 7, cy + 7), false, -1, 1).toResultPoint();
          pointD = this.getFirstDifferent(new Point(cx - 7, cy - 7), false, -1, -1).toResultPoint();
        }
        cx = MathUtils.round((pointA.getX() + pointD.getX() + pointB.getX() + pointC.getX()) / 4);
        cy = MathUtils.round((pointA.getY() + pointD.getY() + pointB.getY() + pointC.getY()) / 4);
        return new Point(cx, cy);
      }
      getMatrixCornerPoints(bullsEyeCorners) {
        return this.expandSquare(bullsEyeCorners, 2 * this.nbCenterLayers, this.getDimension());
      }
      sampleGrid(image, topLeft, topRight, bottomRight, bottomLeft) {
        let sampler = GridSamplerInstance.getInstance();
        let dimension = this.getDimension();
        let low = dimension / 2 - this.nbCenterLayers;
        let high = dimension / 2 + this.nbCenterLayers;
        return sampler.sampleGrid(
          image,
          dimension,
          dimension,
          low,
          low,
          high,
          low,
          high,
          high,
          low,
          high,
          topLeft.getX(),
          topLeft.getY(),
          topRight.getX(),
          topRight.getY(),
          bottomRight.getX(),
          bottomRight.getY(),
          bottomLeft.getX(),
          bottomLeft.getY()
        );
      }
      sampleLine(p1, p2, size) {
        let result = 0;
        let d = this.distanceResultPoint(p1, p2);
        let moduleSize = d / size;
        let px = p1.getX();
        let py = p1.getY();
        let dx = moduleSize * (p2.getX() - p1.getX()) / d;
        let dy = moduleSize * (p2.getY() - p1.getY()) / d;
        for (let i = 0; i < size; i++) {
          if (this.image.get(MathUtils.round(px + i * dx), MathUtils.round(py + i * dy))) {
            result |= 1 << size - i - 1;
          }
        }
        return result;
      }
      isWhiteOrBlackRectangle(p1, p2, p3, p4) {
        let corr = 3;
        p1 = new Point(p1.getX() - corr, p1.getY() + corr);
        p2 = new Point(p2.getX() - corr, p2.getY() - corr);
        p3 = new Point(p3.getX() + corr, p3.getY() - corr);
        p4 = new Point(p4.getX() + corr, p4.getY() + corr);
        let cInit = this.getColor(p4, p1);
        if (cInit === 0) {
          return false;
        }
        let c = this.getColor(p1, p2);
        if (c !== cInit) {
          return false;
        }
        c = this.getColor(p2, p3);
        if (c !== cInit) {
          return false;
        }
        c = this.getColor(p3, p4);
        return c === cInit;
      }
      getColor(p1, p2) {
        let d = this.distancePoint(p1, p2);
        let dx = (p2.getX() - p1.getX()) / d;
        let dy = (p2.getY() - p1.getY()) / d;
        let error2 = 0;
        let px = p1.getX();
        let py = p1.getY();
        let colorModel = this.image.get(p1.getX(), p1.getY());
        let iMax = Math.ceil(d);
        for (let i = 0; i < iMax; i++) {
          px += dx;
          py += dy;
          if (this.image.get(MathUtils.round(px), MathUtils.round(py)) !== colorModel) {
            error2++;
          }
        }
        let errRatio = error2 / d;
        if (errRatio > 0.1 && errRatio < 0.9) {
          return 0;
        }
        return errRatio <= 0.1 === colorModel ? 1 : -1;
      }
      getFirstDifferent(init, color, dx, dy) {
        let x = init.getX() + dx;
        let y = init.getY() + dy;
        while (this.isValid(x, y) && this.image.get(x, y) === color) {
          x += dx;
          y += dy;
        }
        x -= dx;
        y -= dy;
        while (this.isValid(x, y) && this.image.get(x, y) === color) {
          x += dx;
        }
        x -= dx;
        while (this.isValid(x, y) && this.image.get(x, y) === color) {
          y += dy;
        }
        y -= dy;
        return new Point(x, y);
      }
      expandSquare(cornerPoints, oldSide, newSide) {
        let ratio = newSide / (2 * oldSide);
        let dx = cornerPoints[0].getX() - cornerPoints[2].getX();
        let dy = cornerPoints[0].getY() - cornerPoints[2].getY();
        let centerx = (cornerPoints[0].getX() + cornerPoints[2].getX()) / 2;
        let centery = (cornerPoints[0].getY() + cornerPoints[2].getY()) / 2;
        let result0 = new ResultPoint(centerx + ratio * dx, centery + ratio * dy);
        let result2 = new ResultPoint(centerx - ratio * dx, centery - ratio * dy);
        dx = cornerPoints[1].getX() - cornerPoints[3].getX();
        dy = cornerPoints[1].getY() - cornerPoints[3].getY();
        centerx = (cornerPoints[1].getX() + cornerPoints[3].getX()) / 2;
        centery = (cornerPoints[1].getY() + cornerPoints[3].getY()) / 2;
        let result1 = new ResultPoint(centerx + ratio * dx, centery + ratio * dy);
        let result3 = new ResultPoint(centerx - ratio * dx, centery - ratio * dy);
        let results = [result0, result1, result2, result3];
        return results;
      }
      isValid(x, y) {
        return x >= 0 && x < this.image.getWidth() && y > 0 && y < this.image.getHeight();
      }
      isValidPoint(point) {
        let x = MathUtils.round(point.getX());
        let y = MathUtils.round(point.getY());
        return this.isValid(x, y);
      }
      distancePoint(a, b) {
        return MathUtils.distance(a.getX(), a.getY(), b.getX(), b.getY());
      }
      distanceResultPoint(a, b) {
        return MathUtils.distance(a.getX(), a.getY(), b.getX(), b.getY());
      }
      getDimension() {
        if (this.compact) {
          return 4 * this.nbLayers + 11;
        }
        if (this.nbLayers <= 4) {
          return 4 * this.nbLayers + 15;
        }
        return 4 * this.nbLayers + 2 * (Integer.truncDivision(this.nbLayers - 4, 8) + 1) + 15;
      }
    }
    class AztecReader {
      decode(image, hints = null) {
        let exception = null;
        let detector = new Detector(image.getBlackMatrix());
        let points = null;
        let decoderResult = null;
        try {
          let detectorResult = detector.detectMirror(false);
          points = detectorResult.getPoints();
          this.reportFoundResultPoints(hints, points);
          decoderResult = new Decoder().decode(detectorResult);
        } catch (e) {
          exception = e;
        }
        if (decoderResult == null) {
          try {
            let detectorResult = detector.detectMirror(true);
            points = detectorResult.getPoints();
            this.reportFoundResultPoints(hints, points);
            decoderResult = new Decoder().decode(detectorResult);
          } catch (e) {
            if (exception != null) {
              throw exception;
            }
            throw e;
          }
        }
        let result = new Result(decoderResult.getText(), decoderResult.getRawBytes(), decoderResult.getNumBits(), points, BarcodeFormat$1.AZTEC, System.currentTimeMillis());
        let byteSegments = decoderResult.getByteSegments();
        if (byteSegments != null) {
          result.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS, byteSegments);
        }
        let ecLevel = decoderResult.getECLevel();
        if (ecLevel != null) {
          result.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL, ecLevel);
        }
        return result;
      }
      reportFoundResultPoints(hints, points) {
        if (hints != null) {
          let rpcb = hints.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);
          if (rpcb != null) {
            points.forEach((point, idx, arr) => {
              rpcb.foundPossibleResultPoint(point);
            });
          }
        }
      }
      reset() {
      }
    }
    class BrowserAztecCodeReader extends BrowserCodeReader {
      constructor(timeBetweenScansMillis = 500) {
        super(new AztecReader(), timeBetweenScansMillis);
      }
    }
    class OneDReader {
      decode(image, hints) {
        try {
          return this.doDecode(image, hints);
        } catch (nfe) {
          const tryHarder = hints && hints.get(DecodeHintType$1.TRY_HARDER) === true;
          if (tryHarder && image.isRotateSupported()) {
            const rotatedImage = image.rotateCounterClockwise();
            const result = this.doDecode(rotatedImage, hints);
            const metadata = result.getResultMetadata();
            let orientation = 270;
            if (metadata !== null && metadata.get(ResultMetadataType$1.ORIENTATION) === true) {
              orientation = orientation + metadata.get(ResultMetadataType$1.ORIENTATION) % 360;
            }
            result.putMetadata(ResultMetadataType$1.ORIENTATION, orientation);
            const points = result.getResultPoints();
            if (points !== null) {
              const height = rotatedImage.getHeight();
              for (let i = 0; i < points.length; i++) {
                points[i] = new ResultPoint(height - points[i].getY() - 1, points[i].getX());
              }
            }
            return result;
          } else {
            throw new NotFoundException();
          }
        }
      }
      reset() {
      }
      doDecode(image, hints) {
        const width = image.getWidth();
        const height = image.getHeight();
        let row = new BitArray(width);
        const tryHarder = hints && hints.get(DecodeHintType$1.TRY_HARDER) === true;
        const rowStep = Math.max(1, height >> (tryHarder ? 8 : 5));
        let maxLines;
        if (tryHarder) {
          maxLines = height;
        } else {
          maxLines = 15;
        }
        const middle = Math.trunc(height / 2);
        for (let x = 0; x < maxLines; x++) {
          const rowStepsAboveOrBelow = Math.trunc((x + 1) / 2);
          const isAbove = (x & 1) === 0;
          const rowNumber = middle + rowStep * (isAbove ? rowStepsAboveOrBelow : -rowStepsAboveOrBelow);
          if (rowNumber < 0 || rowNumber >= height) {
            break;
          }
          try {
            row = image.getBlackRow(rowNumber, row);
          } catch (ignored) {
            continue;
          }
          for (let attempt = 0; attempt < 2; attempt++) {
            if (attempt === 1) {
              row.reverse();
              if (hints && hints.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK) === true) {
                const newHints = /* @__PURE__ */ new Map();
                hints.forEach((hint, key) => newHints.set(key, hint));
                newHints.delete(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);
                hints = newHints;
              }
            }
            try {
              const result = this.decodeRow(rowNumber, row, hints);
              if (attempt === 1) {
                result.putMetadata(ResultMetadataType$1.ORIENTATION, 180);
                const points = result.getResultPoints();
                if (points !== null) {
                  points[0] = new ResultPoint(width - points[0].getX() - 1, points[0].getY());
                  points[1] = new ResultPoint(width - points[1].getX() - 1, points[1].getY());
                }
              }
              return result;
            } catch (re) {
            }
          }
        }
        throw new NotFoundException();
      }
      static recordPattern(row, start, counters) {
        const numCounters = counters.length;
        for (let index = 0; index < numCounters; index++)
          counters[index] = 0;
        const end = row.getSize();
        if (start >= end) {
          throw new NotFoundException();
        }
        let isWhite = !row.get(start);
        let counterPosition = 0;
        let i = start;
        while (i < end) {
          if (row.get(i) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (++counterPosition === numCounters) {
              break;
            } else {
              counters[counterPosition] = 1;
              isWhite = !isWhite;
            }
          }
          i++;
        }
        if (!(counterPosition === numCounters || counterPosition === numCounters - 1 && i === end)) {
          throw new NotFoundException();
        }
      }
      static recordPatternInReverse(row, start, counters) {
        let numTransitionsLeft = counters.length;
        let last = row.get(start);
        while (start > 0 && numTransitionsLeft >= 0) {
          if (row.get(--start) !== last) {
            numTransitionsLeft--;
            last = !last;
          }
        }
        if (numTransitionsLeft >= 0) {
          throw new NotFoundException();
        }
        OneDReader.recordPattern(row, start + 1, counters);
      }
      static patternMatchVariance(counters, pattern, maxIndividualVariance) {
        const numCounters = counters.length;
        let total = 0;
        let patternLength = 0;
        for (let i = 0; i < numCounters; i++) {
          total += counters[i];
          patternLength += pattern[i];
        }
        if (total < patternLength) {
          return Number.POSITIVE_INFINITY;
        }
        const unitBarWidth = total / patternLength;
        maxIndividualVariance *= unitBarWidth;
        let totalVariance = 0;
        for (let x = 0; x < numCounters; x++) {
          const counter = counters[x];
          const scaledPattern = pattern[x] * unitBarWidth;
          const variance = counter > scaledPattern ? counter - scaledPattern : scaledPattern - counter;
          if (variance > maxIndividualVariance) {
            return Number.POSITIVE_INFINITY;
          }
          totalVariance += variance;
        }
        return totalVariance / total;
      }
    }
    class Code128Reader extends OneDReader {
      static findStartPattern(row) {
        const width = row.getSize();
        const rowOffset = row.getNextSet(0);
        let counterPosition = 0;
        let counters = Int32Array.from([0, 0, 0, 0, 0, 0]);
        let patternStart = rowOffset;
        let isWhite = false;
        const patternLength = 6;
        for (let i = rowOffset; i < width; i++) {
          if (row.get(i) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === patternLength - 1) {
              let bestVariance = Code128Reader.MAX_AVG_VARIANCE;
              let bestMatch = -1;
              for (let startCode = Code128Reader.CODE_START_A; startCode <= Code128Reader.CODE_START_C; startCode++) {
                const variance = OneDReader.patternMatchVariance(counters, Code128Reader.CODE_PATTERNS[startCode], Code128Reader.MAX_INDIVIDUAL_VARIANCE);
                if (variance < bestVariance) {
                  bestVariance = variance;
                  bestMatch = startCode;
                }
              }
              if (bestMatch >= 0 && row.isRange(Math.max(0, patternStart - (i - patternStart) / 2), patternStart, false)) {
                return Int32Array.from([patternStart, i, bestMatch]);
              }
              patternStart += counters[0] + counters[1];
              counters = counters.slice(2, counters.length - 1);
              counters[counterPosition - 1] = 0;
              counters[counterPosition] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      static decodeCode(row, counters, rowOffset) {
        OneDReader.recordPattern(row, rowOffset, counters);
        let bestVariance = Code128Reader.MAX_AVG_VARIANCE;
        let bestMatch = -1;
        for (let d = 0; d < Code128Reader.CODE_PATTERNS.length; d++) {
          const pattern = Code128Reader.CODE_PATTERNS[d];
          const variance = this.patternMatchVariance(counters, pattern, Code128Reader.MAX_INDIVIDUAL_VARIANCE);
          if (variance < bestVariance) {
            bestVariance = variance;
            bestMatch = d;
          }
        }
        if (bestMatch >= 0) {
          return bestMatch;
        } else {
          throw new NotFoundException();
        }
      }
      decodeRow(rowNumber, row, hints) {
        const convertFNC1 = hints && hints.get(DecodeHintType$1.ASSUME_GS1) === true;
        const startPatternInfo = Code128Reader.findStartPattern(row);
        const startCode = startPatternInfo[2];
        let currentRawCodesIndex = 0;
        const rawCodes = new Uint8Array(20);
        rawCodes[currentRawCodesIndex++] = startCode;
        let codeSet;
        switch (startCode) {
          case Code128Reader.CODE_START_A:
            codeSet = Code128Reader.CODE_CODE_A;
            break;
          case Code128Reader.CODE_START_B:
            codeSet = Code128Reader.CODE_CODE_B;
            break;
          case Code128Reader.CODE_START_C:
            codeSet = Code128Reader.CODE_CODE_C;
            break;
          default:
            throw new FormatException();
        }
        let done = false;
        let isNextShifted = false;
        let result = "";
        let lastStart = startPatternInfo[0];
        let nextStart = startPatternInfo[1];
        const counters = Int32Array.from([0, 0, 0, 0, 0, 0]);
        let lastCode = 0;
        let code = 0;
        let checksumTotal = startCode;
        let multiplier = 0;
        let lastCharacterWasPrintable = true;
        let upperMode = false;
        let shiftUpperMode = false;
        while (!done) {
          const unshift = isNextShifted;
          isNextShifted = false;
          lastCode = code;
          code = Code128Reader.decodeCode(row, counters, nextStart);
          rawCodes[currentRawCodesIndex++] = code;
          if (code !== Code128Reader.CODE_STOP) {
            lastCharacterWasPrintable = true;
          }
          if (code !== Code128Reader.CODE_STOP) {
            multiplier++;
            checksumTotal += multiplier * code;
          }
          lastStart = nextStart;
          nextStart += counters.reduce((previous, current) => previous + current, 0);
          switch (code) {
            case Code128Reader.CODE_START_A:
            case Code128Reader.CODE_START_B:
            case Code128Reader.CODE_START_C:
              throw new FormatException();
          }
          switch (codeSet) {
            case Code128Reader.CODE_CODE_A:
              if (code < 64) {
                if (shiftUpperMode === upperMode) {
                  result += String.fromCharCode(" ".charCodeAt(0) + code);
                } else {
                  result += String.fromCharCode(" ".charCodeAt(0) + code + 128);
                }
                shiftUpperMode = false;
              } else if (code < 96) {
                if (shiftUpperMode === upperMode) {
                  result += String.fromCharCode(code - 64);
                } else {
                  result += String.fromCharCode(code + 64);
                }
                shiftUpperMode = false;
              } else {
                if (code !== Code128Reader.CODE_STOP) {
                  lastCharacterWasPrintable = false;
                }
                switch (code) {
                  case Code128Reader.CODE_FNC_1:
                    if (convertFNC1) {
                      if (result.length === 0) {
                        result += "]C1";
                      } else {
                        result += String.fromCharCode(29);
                      }
                    }
                    break;
                  case Code128Reader.CODE_FNC_2:
                  case Code128Reader.CODE_FNC_3:
                    break;
                  case Code128Reader.CODE_FNC_4_A:
                    if (!upperMode && shiftUpperMode) {
                      upperMode = true;
                      shiftUpperMode = false;
                    } else if (upperMode && shiftUpperMode) {
                      upperMode = false;
                      shiftUpperMode = false;
                    } else {
                      shiftUpperMode = true;
                    }
                    break;
                  case Code128Reader.CODE_SHIFT:
                    isNextShifted = true;
                    codeSet = Code128Reader.CODE_CODE_B;
                    break;
                  case Code128Reader.CODE_CODE_B:
                    codeSet = Code128Reader.CODE_CODE_B;
                    break;
                  case Code128Reader.CODE_CODE_C:
                    codeSet = Code128Reader.CODE_CODE_C;
                    break;
                  case Code128Reader.CODE_STOP:
                    done = true;
                    break;
                }
              }
              break;
            case Code128Reader.CODE_CODE_B:
              if (code < 96) {
                if (shiftUpperMode === upperMode) {
                  result += String.fromCharCode(" ".charCodeAt(0) + code);
                } else {
                  result += String.fromCharCode(" ".charCodeAt(0) + code + 128);
                }
                shiftUpperMode = false;
              } else {
                if (code !== Code128Reader.CODE_STOP) {
                  lastCharacterWasPrintable = false;
                }
                switch (code) {
                  case Code128Reader.CODE_FNC_1:
                    if (convertFNC1) {
                      if (result.length === 0) {
                        result += "]C1";
                      } else {
                        result += String.fromCharCode(29);
                      }
                    }
                    break;
                  case Code128Reader.CODE_FNC_2:
                  case Code128Reader.CODE_FNC_3:
                    break;
                  case Code128Reader.CODE_FNC_4_B:
                    if (!upperMode && shiftUpperMode) {
                      upperMode = true;
                      shiftUpperMode = false;
                    } else if (upperMode && shiftUpperMode) {
                      upperMode = false;
                      shiftUpperMode = false;
                    } else {
                      shiftUpperMode = true;
                    }
                    break;
                  case Code128Reader.CODE_SHIFT:
                    isNextShifted = true;
                    codeSet = Code128Reader.CODE_CODE_A;
                    break;
                  case Code128Reader.CODE_CODE_A:
                    codeSet = Code128Reader.CODE_CODE_A;
                    break;
                  case Code128Reader.CODE_CODE_C:
                    codeSet = Code128Reader.CODE_CODE_C;
                    break;
                  case Code128Reader.CODE_STOP:
                    done = true;
                    break;
                }
              }
              break;
            case Code128Reader.CODE_CODE_C:
              if (code < 100) {
                if (code < 10) {
                  result += "0";
                }
                result += code;
              } else {
                if (code !== Code128Reader.CODE_STOP) {
                  lastCharacterWasPrintable = false;
                }
                switch (code) {
                  case Code128Reader.CODE_FNC_1:
                    if (convertFNC1) {
                      if (result.length === 0) {
                        result += "]C1";
                      } else {
                        result += String.fromCharCode(29);
                      }
                    }
                    break;
                  case Code128Reader.CODE_CODE_A:
                    codeSet = Code128Reader.CODE_CODE_A;
                    break;
                  case Code128Reader.CODE_CODE_B:
                    codeSet = Code128Reader.CODE_CODE_B;
                    break;
                  case Code128Reader.CODE_STOP:
                    done = true;
                    break;
                }
              }
              break;
          }
          if (unshift) {
            codeSet = codeSet === Code128Reader.CODE_CODE_A ? Code128Reader.CODE_CODE_B : Code128Reader.CODE_CODE_A;
          }
        }
        const lastPatternSize = nextStart - lastStart;
        nextStart = row.getNextUnset(nextStart);
        if (!row.isRange(nextStart, Math.min(row.getSize(), nextStart + (nextStart - lastStart) / 2), false)) {
          throw new NotFoundException();
        }
        checksumTotal -= multiplier * lastCode;
        if (checksumTotal % 103 !== lastCode) {
          throw new ChecksumException();
        }
        const resultLength = result.length;
        if (resultLength === 0) {
          throw new NotFoundException();
        }
        if (resultLength > 0 && lastCharacterWasPrintable) {
          if (codeSet === Code128Reader.CODE_CODE_C) {
            result = result.substring(0, resultLength - 2);
          } else {
            result = result.substring(0, resultLength - 1);
          }
        }
        const left = (startPatternInfo[1] + startPatternInfo[0]) / 2;
        const right = lastStart + lastPatternSize / 2;
        const rawCodesSize = rawCodes.length;
        const rawBytes = new Uint8Array(rawCodesSize);
        for (let i = 0; i < rawCodesSize; i++) {
          rawBytes[i] = rawCodes[i];
        }
        const points = [new ResultPoint(left, rowNumber), new ResultPoint(right, rowNumber)];
        return new Result(result, rawBytes, 0, points, BarcodeFormat$1.CODE_128, new Date().getTime());
      }
    }
    Code128Reader.CODE_PATTERNS = [
      Int32Array.from([2, 1, 2, 2, 2, 2]),
      Int32Array.from([2, 2, 2, 1, 2, 2]),
      Int32Array.from([2, 2, 2, 2, 2, 1]),
      Int32Array.from([1, 2, 1, 2, 2, 3]),
      Int32Array.from([1, 2, 1, 3, 2, 2]),
      Int32Array.from([1, 3, 1, 2, 2, 2]),
      Int32Array.from([1, 2, 2, 2, 1, 3]),
      Int32Array.from([1, 2, 2, 3, 1, 2]),
      Int32Array.from([1, 3, 2, 2, 1, 2]),
      Int32Array.from([2, 2, 1, 2, 1, 3]),
      Int32Array.from([2, 2, 1, 3, 1, 2]),
      Int32Array.from([2, 3, 1, 2, 1, 2]),
      Int32Array.from([1, 1, 2, 2, 3, 2]),
      Int32Array.from([1, 2, 2, 1, 3, 2]),
      Int32Array.from([1, 2, 2, 2, 3, 1]),
      Int32Array.from([1, 1, 3, 2, 2, 2]),
      Int32Array.from([1, 2, 3, 1, 2, 2]),
      Int32Array.from([1, 2, 3, 2, 2, 1]),
      Int32Array.from([2, 2, 3, 2, 1, 1]),
      Int32Array.from([2, 2, 1, 1, 3, 2]),
      Int32Array.from([2, 2, 1, 2, 3, 1]),
      Int32Array.from([2, 1, 3, 2, 1, 2]),
      Int32Array.from([2, 2, 3, 1, 1, 2]),
      Int32Array.from([3, 1, 2, 1, 3, 1]),
      Int32Array.from([3, 1, 1, 2, 2, 2]),
      Int32Array.from([3, 2, 1, 1, 2, 2]),
      Int32Array.from([3, 2, 1, 2, 2, 1]),
      Int32Array.from([3, 1, 2, 2, 1, 2]),
      Int32Array.from([3, 2, 2, 1, 1, 2]),
      Int32Array.from([3, 2, 2, 2, 1, 1]),
      Int32Array.from([2, 1, 2, 1, 2, 3]),
      Int32Array.from([2, 1, 2, 3, 2, 1]),
      Int32Array.from([2, 3, 2, 1, 2, 1]),
      Int32Array.from([1, 1, 1, 3, 2, 3]),
      Int32Array.from([1, 3, 1, 1, 2, 3]),
      Int32Array.from([1, 3, 1, 3, 2, 1]),
      Int32Array.from([1, 1, 2, 3, 1, 3]),
      Int32Array.from([1, 3, 2, 1, 1, 3]),
      Int32Array.from([1, 3, 2, 3, 1, 1]),
      Int32Array.from([2, 1, 1, 3, 1, 3]),
      Int32Array.from([2, 3, 1, 1, 1, 3]),
      Int32Array.from([2, 3, 1, 3, 1, 1]),
      Int32Array.from([1, 1, 2, 1, 3, 3]),
      Int32Array.from([1, 1, 2, 3, 3, 1]),
      Int32Array.from([1, 3, 2, 1, 3, 1]),
      Int32Array.from([1, 1, 3, 1, 2, 3]),
      Int32Array.from([1, 1, 3, 3, 2, 1]),
      Int32Array.from([1, 3, 3, 1, 2, 1]),
      Int32Array.from([3, 1, 3, 1, 2, 1]),
      Int32Array.from([2, 1, 1, 3, 3, 1]),
      Int32Array.from([2, 3, 1, 1, 3, 1]),
      Int32Array.from([2, 1, 3, 1, 1, 3]),
      Int32Array.from([2, 1, 3, 3, 1, 1]),
      Int32Array.from([2, 1, 3, 1, 3, 1]),
      Int32Array.from([3, 1, 1, 1, 2, 3]),
      Int32Array.from([3, 1, 1, 3, 2, 1]),
      Int32Array.from([3, 3, 1, 1, 2, 1]),
      Int32Array.from([3, 1, 2, 1, 1, 3]),
      Int32Array.from([3, 1, 2, 3, 1, 1]),
      Int32Array.from([3, 3, 2, 1, 1, 1]),
      Int32Array.from([3, 1, 4, 1, 1, 1]),
      Int32Array.from([2, 2, 1, 4, 1, 1]),
      Int32Array.from([4, 3, 1, 1, 1, 1]),
      Int32Array.from([1, 1, 1, 2, 2, 4]),
      Int32Array.from([1, 1, 1, 4, 2, 2]),
      Int32Array.from([1, 2, 1, 1, 2, 4]),
      Int32Array.from([1, 2, 1, 4, 2, 1]),
      Int32Array.from([1, 4, 1, 1, 2, 2]),
      Int32Array.from([1, 4, 1, 2, 2, 1]),
      Int32Array.from([1, 1, 2, 2, 1, 4]),
      Int32Array.from([1, 1, 2, 4, 1, 2]),
      Int32Array.from([1, 2, 2, 1, 1, 4]),
      Int32Array.from([1, 2, 2, 4, 1, 1]),
      Int32Array.from([1, 4, 2, 1, 1, 2]),
      Int32Array.from([1, 4, 2, 2, 1, 1]),
      Int32Array.from([2, 4, 1, 2, 1, 1]),
      Int32Array.from([2, 2, 1, 1, 1, 4]),
      Int32Array.from([4, 1, 3, 1, 1, 1]),
      Int32Array.from([2, 4, 1, 1, 1, 2]),
      Int32Array.from([1, 3, 4, 1, 1, 1]),
      Int32Array.from([1, 1, 1, 2, 4, 2]),
      Int32Array.from([1, 2, 1, 1, 4, 2]),
      Int32Array.from([1, 2, 1, 2, 4, 1]),
      Int32Array.from([1, 1, 4, 2, 1, 2]),
      Int32Array.from([1, 2, 4, 1, 1, 2]),
      Int32Array.from([1, 2, 4, 2, 1, 1]),
      Int32Array.from([4, 1, 1, 2, 1, 2]),
      Int32Array.from([4, 2, 1, 1, 1, 2]),
      Int32Array.from([4, 2, 1, 2, 1, 1]),
      Int32Array.from([2, 1, 2, 1, 4, 1]),
      Int32Array.from([2, 1, 4, 1, 2, 1]),
      Int32Array.from([4, 1, 2, 1, 2, 1]),
      Int32Array.from([1, 1, 1, 1, 4, 3]),
      Int32Array.from([1, 1, 1, 3, 4, 1]),
      Int32Array.from([1, 3, 1, 1, 4, 1]),
      Int32Array.from([1, 1, 4, 1, 1, 3]),
      Int32Array.from([1, 1, 4, 3, 1, 1]),
      Int32Array.from([4, 1, 1, 1, 1, 3]),
      Int32Array.from([4, 1, 1, 3, 1, 1]),
      Int32Array.from([1, 1, 3, 1, 4, 1]),
      Int32Array.from([1, 1, 4, 1, 3, 1]),
      Int32Array.from([3, 1, 1, 1, 4, 1]),
      Int32Array.from([4, 1, 1, 1, 3, 1]),
      Int32Array.from([2, 1, 1, 4, 1, 2]),
      Int32Array.from([2, 1, 1, 2, 1, 4]),
      Int32Array.from([2, 1, 1, 2, 3, 2]),
      Int32Array.from([2, 3, 3, 1, 1, 1, 2])
    ];
    Code128Reader.MAX_AVG_VARIANCE = 0.25;
    Code128Reader.MAX_INDIVIDUAL_VARIANCE = 0.7;
    Code128Reader.CODE_SHIFT = 98;
    Code128Reader.CODE_CODE_C = 99;
    Code128Reader.CODE_CODE_B = 100;
    Code128Reader.CODE_CODE_A = 101;
    Code128Reader.CODE_FNC_1 = 102;
    Code128Reader.CODE_FNC_2 = 97;
    Code128Reader.CODE_FNC_3 = 96;
    Code128Reader.CODE_FNC_4_A = 101;
    Code128Reader.CODE_FNC_4_B = 100;
    Code128Reader.CODE_START_A = 103;
    Code128Reader.CODE_START_B = 104;
    Code128Reader.CODE_START_C = 105;
    Code128Reader.CODE_STOP = 106;
    class Code39Reader extends OneDReader {
      constructor(usingCheckDigit = false, extendedMode = false) {
        super();
        this.usingCheckDigit = usingCheckDigit;
        this.extendedMode = extendedMode;
        this.decodeRowResult = "";
        this.counters = new Int32Array(9);
      }
      decodeRow(rowNumber, row, hints) {
        let theCounters = this.counters;
        theCounters.fill(0);
        this.decodeRowResult = "";
        let start = Code39Reader.findAsteriskPattern(row, theCounters);
        let nextStart = row.getNextSet(start[1]);
        let end = row.getSize();
        let decodedChar;
        let lastStart;
        do {
          Code39Reader.recordPattern(row, nextStart, theCounters);
          let pattern = Code39Reader.toNarrowWidePattern(theCounters);
          if (pattern < 0) {
            throw new NotFoundException();
          }
          decodedChar = Code39Reader.patternToChar(pattern);
          this.decodeRowResult += decodedChar;
          lastStart = nextStart;
          for (let counter of theCounters) {
            nextStart += counter;
          }
          nextStart = row.getNextSet(nextStart);
        } while (decodedChar !== "*");
        this.decodeRowResult = this.decodeRowResult.substring(0, this.decodeRowResult.length - 1);
        let lastPatternSize = 0;
        for (let counter of theCounters) {
          lastPatternSize += counter;
        }
        let whiteSpaceAfterEnd = nextStart - lastStart - lastPatternSize;
        if (nextStart !== end && whiteSpaceAfterEnd * 2 < lastPatternSize) {
          throw new NotFoundException();
        }
        if (this.usingCheckDigit) {
          let max = this.decodeRowResult.length - 1;
          let total = 0;
          for (let i = 0; i < max; i++) {
            total += Code39Reader.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(i));
          }
          if (this.decodeRowResult.charAt(max) !== Code39Reader.ALPHABET_STRING.charAt(total % 43)) {
            throw new ChecksumException();
          }
          this.decodeRowResult = this.decodeRowResult.substring(0, max);
        }
        if (this.decodeRowResult.length === 0) {
          throw new NotFoundException();
        }
        let resultString;
        if (this.extendedMode) {
          resultString = Code39Reader.decodeExtended(this.decodeRowResult);
        } else {
          resultString = this.decodeRowResult;
        }
        let left = (start[1] + start[0]) / 2;
        let right = lastStart + lastPatternSize / 2;
        return new Result(resultString, null, 0, [new ResultPoint(left, rowNumber), new ResultPoint(right, rowNumber)], BarcodeFormat$1.CODE_39, new Date().getTime());
      }
      static findAsteriskPattern(row, counters) {
        let width = row.getSize();
        let rowOffset = row.getNextSet(0);
        let counterPosition = 0;
        let patternStart = rowOffset;
        let isWhite = false;
        let patternLength = counters.length;
        for (let i = rowOffset; i < width; i++) {
          if (row.get(i) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === patternLength - 1) {
              if (this.toNarrowWidePattern(counters) === Code39Reader.ASTERISK_ENCODING && row.isRange(Math.max(0, patternStart - Math.floor((i - patternStart) / 2)), patternStart, false)) {
                return [patternStart, i];
              }
              patternStart += counters[0] + counters[1];
              counters.copyWithin(0, 2, 2 + counterPosition - 1);
              counters[counterPosition - 1] = 0;
              counters[counterPosition] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      static toNarrowWidePattern(counters) {
        let numCounters = counters.length;
        let maxNarrowCounter = 0;
        let wideCounters;
        do {
          let minCounter = 2147483647;
          for (let counter of counters) {
            if (counter < minCounter && counter > maxNarrowCounter) {
              minCounter = counter;
            }
          }
          maxNarrowCounter = minCounter;
          wideCounters = 0;
          let totalWideCountersWidth = 0;
          let pattern = 0;
          for (let i = 0; i < numCounters; i++) {
            let counter = counters[i];
            if (counter > maxNarrowCounter) {
              pattern |= 1 << numCounters - 1 - i;
              wideCounters++;
              totalWideCountersWidth += counter;
            }
          }
          if (wideCounters === 3) {
            for (let i = 0; i < numCounters && wideCounters > 0; i++) {
              let counter = counters[i];
              if (counter > maxNarrowCounter) {
                wideCounters--;
                if (counter * 2 >= totalWideCountersWidth) {
                  return -1;
                }
              }
            }
            return pattern;
          }
        } while (wideCounters > 3);
        return -1;
      }
      static patternToChar(pattern) {
        for (let i = 0; i < Code39Reader.CHARACTER_ENCODINGS.length; i++) {
          if (Code39Reader.CHARACTER_ENCODINGS[i] === pattern) {
            return Code39Reader.ALPHABET_STRING.charAt(i);
          }
        }
        if (pattern === Code39Reader.ASTERISK_ENCODING) {
          return "*";
        }
        throw new NotFoundException();
      }
      static decodeExtended(encoded) {
        let length = encoded.length;
        let decoded = "";
        for (let i = 0; i < length; i++) {
          let c = encoded.charAt(i);
          if (c === "+" || c === "$" || c === "%" || c === "/") {
            let next = encoded.charAt(i + 1);
            let decodedChar = "\0";
            switch (c) {
              case "+":
                if (next >= "A" && next <= "Z") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) + 32);
                } else {
                  throw new FormatException();
                }
                break;
              case "$":
                if (next >= "A" && next <= "Z") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) - 64);
                } else {
                  throw new FormatException();
                }
                break;
              case "%":
                if (next >= "A" && next <= "E") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) - 38);
                } else if (next >= "F" && next <= "J") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) - 11);
                } else if (next >= "K" && next <= "O") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) + 16);
                } else if (next >= "P" && next <= "T") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) + 43);
                } else if (next === "U") {
                  decodedChar = "\0";
                } else if (next === "V") {
                  decodedChar = "@";
                } else if (next === "W") {
                  decodedChar = "`";
                } else if (next === "X" || next === "Y" || next === "Z") {
                  decodedChar = "\x7F";
                } else {
                  throw new FormatException();
                }
                break;
              case "/":
                if (next >= "A" && next <= "O") {
                  decodedChar = String.fromCharCode(next.charCodeAt(0) - 32);
                } else if (next === "Z") {
                  decodedChar = ":";
                } else {
                  throw new FormatException();
                }
                break;
            }
            decoded += decodedChar;
            i++;
          } else {
            decoded += c;
          }
        }
        return decoded;
      }
    }
    Code39Reader.ALPHABET_STRING = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%";
    Code39Reader.CHARACTER_ENCODINGS = [
      52,
      289,
      97,
      352,
      49,
      304,
      112,
      37,
      292,
      100,
      265,
      73,
      328,
      25,
      280,
      88,
      13,
      268,
      76,
      28,
      259,
      67,
      322,
      19,
      274,
      82,
      7,
      262,
      70,
      22,
      385,
      193,
      448,
      145,
      400,
      208,
      133,
      388,
      196,
      168,
      162,
      138,
      42
    ];
    Code39Reader.ASTERISK_ENCODING = 148;
    class ITFReader extends OneDReader {
      constructor() {
        super(...arguments);
        this.narrowLineWidth = -1;
      }
      decodeRow(rowNumber, row, hints) {
        let startRange = this.decodeStart(row);
        let endRange = this.decodeEnd(row);
        let result = new StringBuilder();
        ITFReader.decodeMiddle(row, startRange[1], endRange[0], result);
        let resultString = result.toString();
        let allowedLengths = null;
        if (hints != null) {
          allowedLengths = hints.get(DecodeHintType$1.ALLOWED_LENGTHS);
        }
        if (allowedLengths == null) {
          allowedLengths = ITFReader.DEFAULT_ALLOWED_LENGTHS;
        }
        let length = resultString.length;
        let lengthOK = false;
        let maxAllowedLength = 0;
        for (let value of allowedLengths) {
          if (length === value) {
            lengthOK = true;
            break;
          }
          if (value > maxAllowedLength) {
            maxAllowedLength = value;
          }
        }
        if (!lengthOK && length > maxAllowedLength) {
          lengthOK = true;
        }
        if (!lengthOK) {
          throw new FormatException();
        }
        const points = [new ResultPoint(startRange[1], rowNumber), new ResultPoint(endRange[0], rowNumber)];
        let resultReturn = new Result(
          resultString,
          null,
          0,
          points,
          BarcodeFormat$1.ITF,
          new Date().getTime()
        );
        return resultReturn;
      }
      static decodeMiddle(row, payloadStart, payloadEnd, resultString) {
        let counterDigitPair = new Int32Array(10);
        let counterBlack = new Int32Array(5);
        let counterWhite = new Int32Array(5);
        counterDigitPair.fill(0);
        counterBlack.fill(0);
        counterWhite.fill(0);
        while (payloadStart < payloadEnd) {
          OneDReader.recordPattern(row, payloadStart, counterDigitPair);
          for (let k = 0; k < 5; k++) {
            let twoK = 2 * k;
            counterBlack[k] = counterDigitPair[twoK];
            counterWhite[k] = counterDigitPair[twoK + 1];
          }
          let bestMatch = ITFReader.decodeDigit(counterBlack);
          resultString.append(bestMatch.toString());
          bestMatch = this.decodeDigit(counterWhite);
          resultString.append(bestMatch.toString());
          counterDigitPair.forEach(function(counterDigit) {
            payloadStart += counterDigit;
          });
        }
      }
      decodeStart(row) {
        let endStart = ITFReader.skipWhiteSpace(row);
        let startPattern = ITFReader.findGuardPattern(row, endStart, ITFReader.START_PATTERN);
        this.narrowLineWidth = (startPattern[1] - startPattern[0]) / 4;
        this.validateQuietZone(row, startPattern[0]);
        return startPattern;
      }
      validateQuietZone(row, startPattern) {
        let quietCount = this.narrowLineWidth * 10;
        quietCount = quietCount < startPattern ? quietCount : startPattern;
        for (let i = startPattern - 1; quietCount > 0 && i >= 0; i--) {
          if (row.get(i)) {
            break;
          }
          quietCount--;
        }
        if (quietCount !== 0) {
          throw new NotFoundException();
        }
      }
      static skipWhiteSpace(row) {
        const width = row.getSize();
        const endStart = row.getNextSet(0);
        if (endStart === width) {
          throw new NotFoundException();
        }
        return endStart;
      }
      decodeEnd(row) {
        row.reverse();
        try {
          let endStart = ITFReader.skipWhiteSpace(row);
          let endPattern;
          try {
            endPattern = ITFReader.findGuardPattern(row, endStart, ITFReader.END_PATTERN_REVERSED[0]);
          } catch (error2) {
            if (error2 instanceof NotFoundException) {
              endPattern = ITFReader.findGuardPattern(row, endStart, ITFReader.END_PATTERN_REVERSED[1]);
            }
          }
          this.validateQuietZone(row, endPattern[0]);
          let temp = endPattern[0];
          endPattern[0] = row.getSize() - endPattern[1];
          endPattern[1] = row.getSize() - temp;
          return endPattern;
        } finally {
          row.reverse();
        }
      }
      static findGuardPattern(row, rowOffset, pattern) {
        let patternLength = pattern.length;
        let counters = new Int32Array(patternLength);
        let width = row.getSize();
        let isWhite = false;
        let counterPosition = 0;
        let patternStart = rowOffset;
        counters.fill(0);
        for (let x = rowOffset; x < width; x++) {
          if (row.get(x) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === patternLength - 1) {
              if (OneDReader.patternMatchVariance(counters, pattern, ITFReader.MAX_INDIVIDUAL_VARIANCE) < ITFReader.MAX_AVG_VARIANCE) {
                return [patternStart, x];
              }
              patternStart += counters[0] + counters[1];
              System.arraycopy(counters, 2, counters, 0, counterPosition - 1);
              counters[counterPosition - 1] = 0;
              counters[counterPosition] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      static decodeDigit(counters) {
        let bestVariance = ITFReader.MAX_AVG_VARIANCE;
        let bestMatch = -1;
        let max = ITFReader.PATTERNS.length;
        for (let i = 0; i < max; i++) {
          let pattern = ITFReader.PATTERNS[i];
          let variance = OneDReader.patternMatchVariance(counters, pattern, ITFReader.MAX_INDIVIDUAL_VARIANCE);
          if (variance < bestVariance) {
            bestVariance = variance;
            bestMatch = i;
          } else if (variance === bestVariance) {
            bestMatch = -1;
          }
        }
        if (bestMatch >= 0) {
          return bestMatch % 10;
        } else {
          throw new NotFoundException();
        }
      }
    }
    ITFReader.PATTERNS = [
      Int32Array.from([1, 1, 2, 2, 1]),
      Int32Array.from([2, 1, 1, 1, 2]),
      Int32Array.from([1, 2, 1, 1, 2]),
      Int32Array.from([2, 2, 1, 1, 1]),
      Int32Array.from([1, 1, 2, 1, 2]),
      Int32Array.from([2, 1, 2, 1, 1]),
      Int32Array.from([1, 2, 2, 1, 1]),
      Int32Array.from([1, 1, 1, 2, 2]),
      Int32Array.from([2, 1, 1, 2, 1]),
      Int32Array.from([1, 2, 1, 2, 1]),
      Int32Array.from([1, 1, 3, 3, 1]),
      Int32Array.from([3, 1, 1, 1, 3]),
      Int32Array.from([1, 3, 1, 1, 3]),
      Int32Array.from([3, 3, 1, 1, 1]),
      Int32Array.from([1, 1, 3, 1, 3]),
      Int32Array.from([3, 1, 3, 1, 1]),
      Int32Array.from([1, 3, 3, 1, 1]),
      Int32Array.from([1, 1, 1, 3, 3]),
      Int32Array.from([3, 1, 1, 3, 1]),
      Int32Array.from([1, 3, 1, 3, 1])
    ];
    ITFReader.MAX_AVG_VARIANCE = 0.38;
    ITFReader.MAX_INDIVIDUAL_VARIANCE = 0.5;
    ITFReader.DEFAULT_ALLOWED_LENGTHS = [6, 8, 10, 12, 14];
    ITFReader.START_PATTERN = Int32Array.from([1, 1, 1, 1]);
    ITFReader.END_PATTERN_REVERSED = [
      Int32Array.from([1, 1, 2]),
      Int32Array.from([1, 1, 3])
    ];
    class AbstractUPCEANReader extends OneDReader {
      constructor() {
        super(...arguments);
        this.decodeRowStringBuffer = "";
      }
      static findStartGuardPattern(row) {
        let foundStart = false;
        let startRange;
        let nextStart = 0;
        let counters = Int32Array.from([0, 0, 0]);
        while (!foundStart) {
          counters = Int32Array.from([0, 0, 0]);
          startRange = AbstractUPCEANReader.findGuardPattern(row, nextStart, false, this.START_END_PATTERN, counters);
          let start = startRange[0];
          nextStart = startRange[1];
          let quietStart = start - (nextStart - start);
          if (quietStart >= 0) {
            foundStart = row.isRange(quietStart, start, false);
          }
        }
        return startRange;
      }
      static checkChecksum(s) {
        return AbstractUPCEANReader.checkStandardUPCEANChecksum(s);
      }
      static checkStandardUPCEANChecksum(s) {
        let length = s.length;
        if (length === 0)
          return false;
        let check = parseInt(s.charAt(length - 1), 10);
        return AbstractUPCEANReader.getStandardUPCEANChecksum(s.substring(0, length - 1)) === check;
      }
      static getStandardUPCEANChecksum(s) {
        let length = s.length;
        let sum = 0;
        for (let i = length - 1; i >= 0; i -= 2) {
          let digit = s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
          if (digit < 0 || digit > 9) {
            throw new FormatException();
          }
          sum += digit;
        }
        sum *= 3;
        for (let i = length - 2; i >= 0; i -= 2) {
          let digit = s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
          if (digit < 0 || digit > 9) {
            throw new FormatException();
          }
          sum += digit;
        }
        return (1e3 - sum) % 10;
      }
      static decodeEnd(row, endStart) {
        return AbstractUPCEANReader.findGuardPattern(row, endStart, false, AbstractUPCEANReader.START_END_PATTERN, new Int32Array(AbstractUPCEANReader.START_END_PATTERN.length).fill(0));
      }
      static findGuardPatternWithoutCounters(row, rowOffset, whiteFirst, pattern) {
        return this.findGuardPattern(row, rowOffset, whiteFirst, pattern, new Int32Array(pattern.length));
      }
      static findGuardPattern(row, rowOffset, whiteFirst, pattern, counters) {
        let width = row.getSize();
        rowOffset = whiteFirst ? row.getNextUnset(rowOffset) : row.getNextSet(rowOffset);
        let counterPosition = 0;
        let patternStart = rowOffset;
        let patternLength = pattern.length;
        let isWhite = whiteFirst;
        for (let x = rowOffset; x < width; x++) {
          if (row.get(x) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === patternLength - 1) {
              if (OneDReader.patternMatchVariance(counters, pattern, AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE) < AbstractUPCEANReader.MAX_AVG_VARIANCE) {
                return Int32Array.from([patternStart, x]);
              }
              patternStart += counters[0] + counters[1];
              let slice = counters.slice(2, counters.length - 1);
              for (let i = 0; i < counterPosition - 1; i++) {
                counters[i] = slice[i];
              }
              counters[counterPosition - 1] = 0;
              counters[counterPosition] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      static decodeDigit(row, counters, rowOffset, patterns) {
        this.recordPattern(row, rowOffset, counters);
        let bestVariance = this.MAX_AVG_VARIANCE;
        let bestMatch = -1;
        let max = patterns.length;
        for (let i = 0; i < max; i++) {
          let pattern = patterns[i];
          let variance = OneDReader.patternMatchVariance(counters, pattern, AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE);
          if (variance < bestVariance) {
            bestVariance = variance;
            bestMatch = i;
          }
        }
        if (bestMatch >= 0) {
          return bestMatch;
        } else {
          throw new NotFoundException();
        }
      }
    }
    AbstractUPCEANReader.MAX_AVG_VARIANCE = 0.48;
    AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE = 0.7;
    AbstractUPCEANReader.START_END_PATTERN = Int32Array.from([1, 1, 1]);
    AbstractUPCEANReader.MIDDLE_PATTERN = Int32Array.from([1, 1, 1, 1, 1]);
    AbstractUPCEANReader.END_PATTERN = Int32Array.from([1, 1, 1, 1, 1, 1]);
    AbstractUPCEANReader.L_PATTERNS = [
      Int32Array.from([3, 2, 1, 1]),
      Int32Array.from([2, 2, 2, 1]),
      Int32Array.from([2, 1, 2, 2]),
      Int32Array.from([1, 4, 1, 1]),
      Int32Array.from([1, 1, 3, 2]),
      Int32Array.from([1, 2, 3, 1]),
      Int32Array.from([1, 1, 1, 4]),
      Int32Array.from([1, 3, 1, 2]),
      Int32Array.from([1, 2, 1, 3]),
      Int32Array.from([3, 1, 1, 2])
    ];
    class UPCEANExtension5Support {
      constructor() {
        this.CHECK_DIGIT_ENCODINGS = [24, 20, 18, 17, 12, 6, 3, 10, 9, 5];
        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);
        this.decodeRowStringBuffer = "";
      }
      decodeRow(rowNumber, row, extensionStartRange) {
        let result = this.decodeRowStringBuffer;
        let end = this.decodeMiddle(row, extensionStartRange, result);
        let resultString = result.toString();
        let extensionData = UPCEANExtension5Support.parseExtensionString(resultString);
        let resultPoints = [
          new ResultPoint((extensionStartRange[0] + extensionStartRange[1]) / 2, rowNumber),
          new ResultPoint(end, rowNumber)
        ];
        let extensionResult = new Result(resultString, null, 0, resultPoints, BarcodeFormat$1.UPC_EAN_EXTENSION, new Date().getTime());
        if (extensionData != null) {
          extensionResult.putAllMetadata(extensionData);
        }
        return extensionResult;
      }
      decodeMiddle(row, startRange, resultString) {
        let counters = this.decodeMiddleCounters;
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let end = row.getSize();
        let rowOffset = startRange[1];
        let lgPatternFound = 0;
        for (let x = 0; x < 5 && rowOffset < end; x++) {
          let bestMatch = AbstractUPCEANReader.decodeDigit(
            row,
            counters,
            rowOffset,
            AbstractUPCEANReader.L_AND_G_PATTERNS
          );
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch % 10);
          for (let counter of counters) {
            rowOffset += counter;
          }
          if (bestMatch >= 10) {
            lgPatternFound |= 1 << 4 - x;
          }
          if (x !== 4) {
            rowOffset = row.getNextSet(rowOffset);
            rowOffset = row.getNextUnset(rowOffset);
          }
        }
        if (resultString.length !== 5) {
          throw new NotFoundException();
        }
        let checkDigit = this.determineCheckDigit(lgPatternFound);
        if (UPCEANExtension5Support.extensionChecksum(resultString.toString()) !== checkDigit) {
          throw new NotFoundException();
        }
        return rowOffset;
      }
      static extensionChecksum(s) {
        let length = s.length;
        let sum = 0;
        for (let i = length - 2; i >= 0; i -= 2) {
          sum += s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
        }
        sum *= 3;
        for (let i = length - 1; i >= 0; i -= 2) {
          sum += s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
        }
        sum *= 3;
        return sum % 10;
      }
      determineCheckDigit(lgPatternFound) {
        for (let d = 0; d < 10; d++) {
          if (lgPatternFound === this.CHECK_DIGIT_ENCODINGS[d]) {
            return d;
          }
        }
        throw new NotFoundException();
      }
      static parseExtensionString(raw) {
        if (raw.length !== 5) {
          return null;
        }
        let value = UPCEANExtension5Support.parseExtension5String(raw);
        if (value == null) {
          return null;
        }
        return /* @__PURE__ */ new Map([[ResultMetadataType$1.SUGGESTED_PRICE, value]]);
      }
      static parseExtension5String(raw) {
        let currency;
        switch (raw.charAt(0)) {
          case "0":
            currency = "\xA3";
            break;
          case "5":
            currency = "$";
            break;
          case "9":
            switch (raw) {
              case "90000":
                return null;
              case "99991":
                return "0.00";
              case "99990":
                return "Used";
            }
            currency = "";
            break;
          default:
            currency = "";
            break;
        }
        let rawAmount = parseInt(raw.substring(1));
        let unitsString = (rawAmount / 100).toString();
        let hundredths = rawAmount % 100;
        let hundredthsString = hundredths < 10 ? "0" + hundredths : hundredths.toString();
        return currency + unitsString + "." + hundredthsString;
      }
    }
    class UPCEANExtension2Support {
      constructor() {
        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);
        this.decodeRowStringBuffer = "";
      }
      decodeRow(rowNumber, row, extensionStartRange) {
        let result = this.decodeRowStringBuffer;
        let end = this.decodeMiddle(row, extensionStartRange, result);
        let resultString = result.toString();
        let extensionData = UPCEANExtension2Support.parseExtensionString(resultString);
        let resultPoints = [
          new ResultPoint((extensionStartRange[0] + extensionStartRange[1]) / 2, rowNumber),
          new ResultPoint(end, rowNumber)
        ];
        let extensionResult = new Result(resultString, null, 0, resultPoints, BarcodeFormat$1.UPC_EAN_EXTENSION, new Date().getTime());
        if (extensionData != null) {
          extensionResult.putAllMetadata(extensionData);
        }
        return extensionResult;
      }
      decodeMiddle(row, startRange, resultString) {
        let counters = this.decodeMiddleCounters;
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let end = row.getSize();
        let rowOffset = startRange[1];
        let checkParity = 0;
        for (let x = 0; x < 2 && rowOffset < end; x++) {
          let bestMatch = AbstractUPCEANReader.decodeDigit(row, counters, rowOffset, AbstractUPCEANReader.L_AND_G_PATTERNS);
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch % 10);
          for (let counter of counters) {
            rowOffset += counter;
          }
          if (bestMatch >= 10) {
            checkParity |= 1 << 1 - x;
          }
          if (x !== 1) {
            rowOffset = row.getNextSet(rowOffset);
            rowOffset = row.getNextUnset(rowOffset);
          }
        }
        if (resultString.length !== 2) {
          throw new NotFoundException();
        }
        if (parseInt(resultString.toString()) % 4 !== checkParity) {
          throw new NotFoundException();
        }
        return rowOffset;
      }
      static parseExtensionString(raw) {
        if (raw.length !== 2) {
          return null;
        }
        return /* @__PURE__ */ new Map([[ResultMetadataType$1.ISSUE_NUMBER, parseInt(raw)]]);
      }
    }
    class UPCEANExtensionSupport {
      static decodeRow(rowNumber, row, rowOffset) {
        let extensionStartRange = AbstractUPCEANReader.findGuardPattern(
          row,
          rowOffset,
          false,
          this.EXTENSION_START_PATTERN,
          new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0)
        );
        try {
          let fiveSupport = new UPCEANExtension5Support();
          return fiveSupport.decodeRow(rowNumber, row, extensionStartRange);
        } catch (err) {
          let twoSupport = new UPCEANExtension2Support();
          return twoSupport.decodeRow(rowNumber, row, extensionStartRange);
        }
      }
    }
    UPCEANExtensionSupport.EXTENSION_START_PATTERN = Int32Array.from([1, 1, 2]);
    class UPCEANReader extends AbstractUPCEANReader {
      constructor() {
        super();
        this.decodeRowStringBuffer = "";
        UPCEANReader.L_AND_G_PATTERNS = UPCEANReader.L_PATTERNS.map((arr) => Int32Array.from(arr));
        for (let i = 10; i < 20; i++) {
          let widths = UPCEANReader.L_PATTERNS[i - 10];
          let reversedWidths = new Int32Array(widths.length);
          for (let j = 0; j < widths.length; j++) {
            reversedWidths[j] = widths[widths.length - j - 1];
          }
          UPCEANReader.L_AND_G_PATTERNS[i] = reversedWidths;
        }
      }
      decodeRow(rowNumber, row, hints) {
        let startGuardRange = UPCEANReader.findStartGuardPattern(row);
        let resultPointCallback = hints == null ? null : hints.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);
        if (resultPointCallback != null) {
          const resultPoint2 = new ResultPoint((startGuardRange[0] + startGuardRange[1]) / 2, rowNumber);
          resultPointCallback.foundPossibleResultPoint(resultPoint2);
        }
        let budello = this.decodeMiddle(row, startGuardRange, this.decodeRowStringBuffer);
        let endStart = budello.rowOffset;
        let result = budello.resultString;
        if (resultPointCallback != null) {
          const resultPoint2 = new ResultPoint(endStart, rowNumber);
          resultPointCallback.foundPossibleResultPoint(resultPoint2);
        }
        let endRange = this.decodeEnd(row, endStart);
        if (resultPointCallback != null) {
          const resultPoint2 = new ResultPoint((endRange[0] + endRange[1]) / 2, rowNumber);
          resultPointCallback.foundPossibleResultPoint(resultPoint2);
        }
        let end = endRange[1];
        let quietEnd = end + (end - endRange[0]);
        if (quietEnd >= row.getSize() || !row.isRange(end, quietEnd, false)) {
          throw new NotFoundException();
        }
        let resultString = result.toString();
        if (resultString.length < 8) {
          throw new FormatException();
        }
        if (!UPCEANReader.checkChecksum(resultString)) {
          throw new ChecksumException();
        }
        let left = (startGuardRange[1] + startGuardRange[0]) / 2;
        let right = (endRange[1] + endRange[0]) / 2;
        let format = this.getBarcodeFormat();
        let resultPoint = [new ResultPoint(left, rowNumber), new ResultPoint(right, rowNumber)];
        let decodeResult = new Result(resultString, null, 0, resultPoint, format, new Date().getTime());
        let extensionLength = 0;
        try {
          let extensionResult = UPCEANExtensionSupport.decodeRow(rowNumber, row, endRange[1]);
          decodeResult.putMetadata(ResultMetadataType$1.UPC_EAN_EXTENSION, extensionResult.getText());
          decodeResult.putAllMetadata(extensionResult.getResultMetadata());
          decodeResult.addResultPoints(extensionResult.getResultPoints());
          extensionLength = extensionResult.getText().length;
        } catch (ignoreError) {
        }
        let allowedExtensions = hints == null ? null : hints.get(DecodeHintType$1.ALLOWED_EAN_EXTENSIONS);
        if (allowedExtensions != null) {
          let valid = false;
          for (let length in allowedExtensions) {
            if (extensionLength.toString() === length) {
              valid = true;
              break;
            }
          }
          if (!valid) {
            throw new NotFoundException();
          }
        }
        return decodeResult;
      }
      decodeEnd(row, endStart) {
        return UPCEANReader.findGuardPattern(
          row,
          endStart,
          false,
          UPCEANReader.START_END_PATTERN,
          new Int32Array(UPCEANReader.START_END_PATTERN.length).fill(0)
        );
      }
      static checkChecksum(s) {
        return UPCEANReader.checkStandardUPCEANChecksum(s);
      }
      static checkStandardUPCEANChecksum(s) {
        let length = s.length;
        if (length === 0)
          return false;
        let check = parseInt(s.charAt(length - 1), 10);
        return UPCEANReader.getStandardUPCEANChecksum(s.substring(0, length - 1)) === check;
      }
      static getStandardUPCEANChecksum(s) {
        let length = s.length;
        let sum = 0;
        for (let i = length - 1; i >= 0; i -= 2) {
          let digit = s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
          if (digit < 0 || digit > 9) {
            throw new FormatException();
          }
          sum += digit;
        }
        sum *= 3;
        for (let i = length - 2; i >= 0; i -= 2) {
          let digit = s.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
          if (digit < 0 || digit > 9) {
            throw new FormatException();
          }
          sum += digit;
        }
        return (1e3 - sum) % 10;
      }
    }
    class EAN13Reader extends UPCEANReader {
      constructor() {
        super();
        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);
      }
      decodeMiddle(row, startRange, resultString) {
        let counters = this.decodeMiddleCounters;
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let end = row.getSize();
        let rowOffset = startRange[1];
        let lgPatternFound = 0;
        for (let x = 0; x < 6 && rowOffset < end; x++) {
          let bestMatch = UPCEANReader.decodeDigit(row, counters, rowOffset, UPCEANReader.L_AND_G_PATTERNS);
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch % 10);
          for (let counter of counters) {
            rowOffset += counter;
          }
          if (bestMatch >= 10) {
            lgPatternFound |= 1 << 5 - x;
          }
        }
        resultString = EAN13Reader.determineFirstDigit(resultString, lgPatternFound);
        let middleRange = UPCEANReader.findGuardPattern(
          row,
          rowOffset,
          true,
          UPCEANReader.MIDDLE_PATTERN,
          new Int32Array(UPCEANReader.MIDDLE_PATTERN.length).fill(0)
        );
        rowOffset = middleRange[1];
        for (let x = 0; x < 6 && rowOffset < end; x++) {
          let bestMatch = UPCEANReader.decodeDigit(row, counters, rowOffset, UPCEANReader.L_PATTERNS);
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch);
          for (let counter of counters) {
            rowOffset += counter;
          }
        }
        return { rowOffset, resultString };
      }
      getBarcodeFormat() {
        return BarcodeFormat$1.EAN_13;
      }
      static determineFirstDigit(resultString, lgPatternFound) {
        for (let d = 0; d < 10; d++) {
          if (lgPatternFound === this.FIRST_DIGIT_ENCODINGS[d]) {
            resultString = String.fromCharCode("0".charCodeAt(0) + d) + resultString;
            return resultString;
          }
        }
        throw new NotFoundException();
      }
    }
    EAN13Reader.FIRST_DIGIT_ENCODINGS = [0, 11, 13, 14, 19, 25, 28, 21, 22, 26];
    class EAN8Reader extends UPCEANReader {
      constructor() {
        super();
        this.decodeMiddleCounters = Int32Array.from([0, 0, 0, 0]);
      }
      decodeMiddle(row, startRange, resultString) {
        const counters = this.decodeMiddleCounters;
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let end = row.getSize();
        let rowOffset = startRange[1];
        for (let x = 0; x < 4 && rowOffset < end; x++) {
          let bestMatch = UPCEANReader.decodeDigit(row, counters, rowOffset, UPCEANReader.L_PATTERNS);
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch);
          for (let counter of counters) {
            rowOffset += counter;
          }
        }
        let middleRange = UPCEANReader.findGuardPattern(row, rowOffset, true, UPCEANReader.MIDDLE_PATTERN, new Int32Array(UPCEANReader.MIDDLE_PATTERN.length).fill(0));
        rowOffset = middleRange[1];
        for (let x = 0; x < 4 && rowOffset < end; x++) {
          let bestMatch = UPCEANReader.decodeDigit(row, counters, rowOffset, UPCEANReader.L_PATTERNS);
          resultString += String.fromCharCode("0".charCodeAt(0) + bestMatch);
          for (let counter of counters) {
            rowOffset += counter;
          }
        }
        return { rowOffset, resultString };
      }
      getBarcodeFormat() {
        return BarcodeFormat$1.EAN_8;
      }
    }
    class UPCAReader extends UPCEANReader {
      constructor() {
        super(...arguments);
        this.ean13Reader = new EAN13Reader();
      }
      getBarcodeFormat() {
        return BarcodeFormat$1.UPC_A;
      }
      decode(image, hints) {
        return this.maybeReturnResult(this.ean13Reader.decode(image));
      }
      decodeRow(rowNumber, row, hints) {
        return this.maybeReturnResult(this.ean13Reader.decodeRow(rowNumber, row, hints));
      }
      decodeMiddle(row, startRange, resultString) {
        return this.ean13Reader.decodeMiddle(row, startRange, resultString);
      }
      maybeReturnResult(result) {
        let text = result.getText();
        if (text.charAt(0) === "0") {
          let upcaResult = new Result(text.substring(1), null, null, result.getResultPoints(), BarcodeFormat$1.UPC_A);
          if (result.getResultMetadata() != null) {
            upcaResult.putAllMetadata(result.getResultMetadata());
          }
          return upcaResult;
        } else {
          throw new NotFoundException();
        }
      }
      reset() {
        this.ean13Reader.reset();
      }
    }
    class UPCEReader extends UPCEANReader {
      constructor() {
        super();
        this.decodeMiddleCounters = new Int32Array(4);
      }
      decodeMiddle(row, startRange, result) {
        const counters = this.decodeMiddleCounters.map((x) => x);
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        const end = row.getSize();
        let rowOffset = startRange[1];
        let lgPatternFound = 0;
        for (let x = 0; x < 6 && rowOffset < end; x++) {
          const bestMatch = UPCEReader.decodeDigit(
            row,
            counters,
            rowOffset,
            UPCEReader.L_AND_G_PATTERNS
          );
          result += String.fromCharCode("0".charCodeAt(0) + bestMatch % 10);
          for (let counter of counters) {
            rowOffset += counter;
          }
          if (bestMatch >= 10) {
            lgPatternFound |= 1 << 5 - x;
          }
        }
        let resultString = UPCEReader.determineNumSysAndCheckDigit(
          result,
          lgPatternFound
        );
        return { rowOffset, resultString };
      }
      decodeEnd(row, endStart) {
        return UPCEReader.findGuardPatternWithoutCounters(
          row,
          endStart,
          true,
          UPCEReader.MIDDLE_END_PATTERN
        );
      }
      checkChecksum(s) {
        return UPCEANReader.checkChecksum(UPCEReader.convertUPCEtoUPCA(s));
      }
      static determineNumSysAndCheckDigit(resultString, lgPatternFound) {
        for (let numSys = 0; numSys <= 1; numSys++) {
          for (let d = 0; d < 10; d++) {
            if (lgPatternFound === this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[numSys][d]) {
              let prefix = String.fromCharCode("0".charCodeAt(0) + numSys);
              let suffix = String.fromCharCode("0".charCodeAt(0) + d);
              return prefix + resultString + suffix;
            }
          }
        }
        throw NotFoundException.getNotFoundInstance();
      }
      getBarcodeFormat() {
        return BarcodeFormat$1.UPC_E;
      }
      static convertUPCEtoUPCA(upce) {
        const upceChars = upce.slice(1, 7).split("").map((x) => x.charCodeAt(0));
        const result = new StringBuilder();
        result.append(upce.charAt(0));
        let lastChar = upceChars[5];
        switch (lastChar) {
          case 0:
          case 1:
          case 2:
            result.appendChars(upceChars, 0, 2);
            result.append(lastChar);
            result.append("0000");
            result.appendChars(upceChars, 2, 3);
            break;
          case 3:
            result.appendChars(upceChars, 0, 3);
            result.append("00000");
            result.appendChars(upceChars, 3, 2);
            break;
          case 4:
            result.appendChars(upceChars, 0, 4);
            result.append("00000");
            result.append(upceChars[4]);
            break;
          default:
            result.appendChars(upceChars, 0, 5);
            result.append("0000");
            result.append(lastChar);
            break;
        }
        if (upce.length >= 8) {
          result.append(upce.charAt(7));
        }
        return result.toString();
      }
    }
    UPCEReader.MIDDLE_END_PATTERN = Int32Array.from([1, 1, 1, 1, 1, 1]);
    UPCEReader.NUMSYS_AND_CHECK_DIGIT_PATTERNS = [
      Int32Array.from([56, 52, 50, 49, 44, 38, 35, 42, 41, 37]),
      Int32Array.from([7, 11, 13, 14, 19, 25, 28, 21, 22, 26])
    ];
    class MultiFormatUPCEANReader extends OneDReader {
      constructor(hints) {
        super();
        let possibleFormats = hints == null ? null : hints.get(DecodeHintType$1.POSSIBLE_FORMATS);
        let readers = [];
        if (!isNullOrUndefined2(possibleFormats)) {
          if (possibleFormats.indexOf(BarcodeFormat$1.EAN_13) > -1) {
            readers.push(new EAN13Reader());
          }
          if (possibleFormats.indexOf(BarcodeFormat$1.UPC_A) > -1) {
            readers.push(new UPCAReader());
          }
          if (possibleFormats.indexOf(BarcodeFormat$1.EAN_8) > -1) {
            readers.push(new EAN8Reader());
          }
          if (possibleFormats.indexOf(BarcodeFormat$1.UPC_E) > -1) {
            readers.push(new UPCEReader());
          }
        } else {
          readers.push(new EAN13Reader());
          readers.push(new UPCAReader());
          readers.push(new EAN8Reader());
          readers.push(new UPCEReader());
        }
        this.readers = readers;
      }
      decodeRow(rowNumber, row, hints) {
        for (let reader of this.readers) {
          try {
            const result = reader.decodeRow(rowNumber, row, hints);
            const ean13MayBeUPCA = result.getBarcodeFormat() === BarcodeFormat$1.EAN_13 && result.getText().charAt(0) === "0";
            const possibleFormats = hints == null ? null : hints.get(DecodeHintType$1.POSSIBLE_FORMATS);
            const canReturnUPCA = possibleFormats == null || possibleFormats.includes(BarcodeFormat$1.UPC_A);
            if (ean13MayBeUPCA && canReturnUPCA) {
              const rawBytes = result.getRawBytes();
              const resultUPCA = new Result(
                result.getText().substring(1),
                rawBytes,
                rawBytes ? rawBytes.length : null,
                result.getResultPoints(),
                BarcodeFormat$1.UPC_A
              );
              resultUPCA.putAllMetadata(result.getResultMetadata());
              return resultUPCA;
            }
            return result;
          } catch (err) {
          }
        }
        throw new NotFoundException();
      }
      reset() {
        for (let reader of this.readers) {
          reader.reset();
        }
      }
    }
    class AbstractRSSReader extends OneDReader {
      constructor() {
        super();
        this.decodeFinderCounters = new Int32Array(4);
        this.dataCharacterCounters = new Int32Array(8);
        this.oddRoundingErrors = new Array(4);
        this.evenRoundingErrors = new Array(4);
        this.oddCounts = new Array(this.dataCharacterCounters.length / 2);
        this.evenCounts = new Array(this.dataCharacterCounters.length / 2);
      }
      getDecodeFinderCounters() {
        return this.decodeFinderCounters;
      }
      getDataCharacterCounters() {
        return this.dataCharacterCounters;
      }
      getOddRoundingErrors() {
        return this.oddRoundingErrors;
      }
      getEvenRoundingErrors() {
        return this.evenRoundingErrors;
      }
      getOddCounts() {
        return this.oddCounts;
      }
      getEvenCounts() {
        return this.evenCounts;
      }
      parseFinderValue(counters, finderPatterns) {
        for (let value = 0; value < finderPatterns.length; value++) {
          if (OneDReader.patternMatchVariance(counters, finderPatterns[value], AbstractRSSReader.MAX_INDIVIDUAL_VARIANCE) < AbstractRSSReader.MAX_AVG_VARIANCE) {
            return value;
          }
        }
        throw new NotFoundException();
      }
      static count(array) {
        return MathUtils.sum(new Int32Array(array));
      }
      static increment(array, errors) {
        let index = 0;
        let biggestError = errors[0];
        for (let i = 1; i < array.length; i++) {
          if (errors[i] > biggestError) {
            biggestError = errors[i];
            index = i;
          }
        }
        array[index]++;
      }
      static decrement(array, errors) {
        let index = 0;
        let biggestError = errors[0];
        for (let i = 1; i < array.length; i++) {
          if (errors[i] < biggestError) {
            biggestError = errors[i];
            index = i;
          }
        }
        array[index]--;
      }
      static isFinderPattern(counters) {
        let firstTwoSum = counters[0] + counters[1];
        let sum = firstTwoSum + counters[2] + counters[3];
        let ratio = firstTwoSum / sum;
        if (ratio >= AbstractRSSReader.MIN_FINDER_PATTERN_RATIO && ratio <= AbstractRSSReader.MAX_FINDER_PATTERN_RATIO) {
          let minCounter = Number.MAX_SAFE_INTEGER;
          let maxCounter = Number.MIN_SAFE_INTEGER;
          for (let counter of counters) {
            if (counter > maxCounter) {
              maxCounter = counter;
            }
            if (counter < minCounter) {
              minCounter = counter;
            }
          }
          return maxCounter < 10 * minCounter;
        }
        return false;
      }
    }
    AbstractRSSReader.MAX_AVG_VARIANCE = 0.2;
    AbstractRSSReader.MAX_INDIVIDUAL_VARIANCE = 0.45;
    AbstractRSSReader.MIN_FINDER_PATTERN_RATIO = 9.5 / 12;
    AbstractRSSReader.MAX_FINDER_PATTERN_RATIO = 12.5 / 14;
    class DataCharacter {
      constructor(value, checksumPortion) {
        this.value = value;
        this.checksumPortion = checksumPortion;
      }
      getValue() {
        return this.value;
      }
      getChecksumPortion() {
        return this.checksumPortion;
      }
      toString() {
        return this.value + "(" + this.checksumPortion + ")";
      }
      equals(o) {
        if (!(o instanceof DataCharacter)) {
          return false;
        }
        const that = o;
        return this.value === that.value && this.checksumPortion === that.checksumPortion;
      }
      hashCode() {
        return this.value ^ this.checksumPortion;
      }
    }
    class FinderPattern {
      constructor(value, startEnd, start, end, rowNumber) {
        this.value = value;
        this.startEnd = startEnd;
        this.value = value;
        this.startEnd = startEnd;
        this.resultPoints = new Array();
        this.resultPoints.push(new ResultPoint(start, rowNumber));
        this.resultPoints.push(new ResultPoint(end, rowNumber));
      }
      getValue() {
        return this.value;
      }
      getStartEnd() {
        return this.startEnd;
      }
      getResultPoints() {
        return this.resultPoints;
      }
      equals(o) {
        if (!(o instanceof FinderPattern)) {
          return false;
        }
        const that = o;
        return this.value === that.value;
      }
      hashCode() {
        return this.value;
      }
    }
    class RSSUtils {
      constructor() {
      }
      static getRSSvalue(widths, maxWidth, noNarrow) {
        let n = 0;
        for (let width of widths) {
          n += width;
        }
        let val = 0;
        let narrowMask = 0;
        let elements = widths.length;
        for (let bar = 0; bar < elements - 1; bar++) {
          let elmWidth;
          for (elmWidth = 1, narrowMask |= 1 << bar; elmWidth < widths[bar]; elmWidth++, narrowMask &= ~(1 << bar)) {
            let subVal = RSSUtils.combins(n - elmWidth - 1, elements - bar - 2);
            if (noNarrow && narrowMask === 0 && n - elmWidth - (elements - bar - 1) >= elements - bar - 1) {
              subVal -= RSSUtils.combins(n - elmWidth - (elements - bar), elements - bar - 2);
            }
            if (elements - bar - 1 > 1) {
              let lessVal = 0;
              for (let mxwElement = n - elmWidth - (elements - bar - 2); mxwElement > maxWidth; mxwElement--) {
                lessVal += RSSUtils.combins(n - elmWidth - mxwElement - 1, elements - bar - 3);
              }
              subVal -= lessVal * (elements - 1 - bar);
            } else if (n - elmWidth > maxWidth) {
              subVal--;
            }
            val += subVal;
          }
          n -= elmWidth;
        }
        return val;
      }
      static combins(n, r) {
        let maxDenom;
        let minDenom;
        if (n - r > r) {
          minDenom = r;
          maxDenom = n - r;
        } else {
          minDenom = n - r;
          maxDenom = r;
        }
        let val = 1;
        let j = 1;
        for (let i = n; i > maxDenom; i--) {
          val *= i;
          if (j <= minDenom) {
            val /= j;
            j++;
          }
        }
        while (j <= minDenom) {
          val /= j;
          j++;
        }
        return val;
      }
    }
    class BitArrayBuilder {
      static buildBitArray(pairs) {
        let charNumber = pairs.length * 2 - 1;
        if (pairs[pairs.length - 1].getRightChar() == null) {
          charNumber -= 1;
        }
        let size = 12 * charNumber;
        let binary = new BitArray(size);
        let accPos = 0;
        let firstPair = pairs[0];
        let firstValue = firstPair.getRightChar().getValue();
        for (let i = 11; i >= 0; --i) {
          if ((firstValue & 1 << i) != 0) {
            binary.set(accPos);
          }
          accPos++;
        }
        for (let i = 1; i < pairs.length; ++i) {
          let currentPair = pairs[i];
          let leftValue = currentPair.getLeftChar().getValue();
          for (let j = 11; j >= 0; --j) {
            if ((leftValue & 1 << j) != 0) {
              binary.set(accPos);
            }
            accPos++;
          }
          if (currentPair.getRightChar() != null) {
            let rightValue = currentPair.getRightChar().getValue();
            for (let j = 11; j >= 0; --j) {
              if ((rightValue & 1 << j) != 0) {
                binary.set(accPos);
              }
              accPos++;
            }
          }
        }
        return binary;
      }
    }
    class BlockParsedResult {
      constructor(finished, decodedInformation) {
        if (decodedInformation) {
          this.decodedInformation = null;
        } else {
          this.finished = finished;
          this.decodedInformation = decodedInformation;
        }
      }
      getDecodedInformation() {
        return this.decodedInformation;
      }
      isFinished() {
        return this.finished;
      }
    }
    class DecodedObject {
      constructor(newPosition) {
        this.newPosition = newPosition;
      }
      getNewPosition() {
        return this.newPosition;
      }
    }
    class DecodedChar extends DecodedObject {
      constructor(newPosition, value) {
        super(newPosition);
        this.value = value;
      }
      getValue() {
        return this.value;
      }
      isFNC1() {
        return this.value === DecodedChar.FNC1;
      }
    }
    DecodedChar.FNC1 = "$";
    class DecodedInformation extends DecodedObject {
      constructor(newPosition, newString, remainingValue) {
        super(newPosition);
        if (remainingValue) {
          this.remaining = true;
          this.remainingValue = this.remainingValue;
        } else {
          this.remaining = false;
          this.remainingValue = 0;
        }
        this.newString = newString;
      }
      getNewString() {
        return this.newString;
      }
      isRemaining() {
        return this.remaining;
      }
      getRemainingValue() {
        return this.remainingValue;
      }
    }
    class DecodedNumeric extends DecodedObject {
      constructor(newPosition, firstDigit, secondDigit) {
        super(newPosition);
        if (firstDigit < 0 || firstDigit > 10 || secondDigit < 0 || secondDigit > 10) {
          throw new FormatException();
        }
        this.firstDigit = firstDigit;
        this.secondDigit = secondDigit;
      }
      getFirstDigit() {
        return this.firstDigit;
      }
      getSecondDigit() {
        return this.secondDigit;
      }
      getValue() {
        return this.firstDigit * 10 + this.secondDigit;
      }
      isFirstDigitFNC1() {
        return this.firstDigit === DecodedNumeric.FNC1;
      }
      isSecondDigitFNC1() {
        return this.secondDigit === DecodedNumeric.FNC1;
      }
      isAnyFNC1() {
        return this.firstDigit === DecodedNumeric.FNC1 || this.secondDigit === DecodedNumeric.FNC1;
      }
    }
    DecodedNumeric.FNC1 = 10;
    class FieldParser {
      constructor() {
      }
      static parseFieldsInGeneralPurpose(rawInformation) {
        if (!rawInformation) {
          return null;
        }
        if (rawInformation.length < 2) {
          throw new NotFoundException();
        }
        let firstTwoDigits = rawInformation.substring(0, 2);
        for (let dataLength of FieldParser.TWO_DIGIT_DATA_LENGTH) {
          if (dataLength[0] === firstTwoDigits) {
            if (dataLength[1] === FieldParser.VARIABLE_LENGTH) {
              return FieldParser.processVariableAI(2, dataLength[2], rawInformation);
            }
            return FieldParser.processFixedAI(2, dataLength[1], rawInformation);
          }
        }
        if (rawInformation.length < 3) {
          throw new NotFoundException();
        }
        let firstThreeDigits = rawInformation.substring(0, 3);
        for (let dataLength of FieldParser.THREE_DIGIT_DATA_LENGTH) {
          if (dataLength[0] === firstThreeDigits) {
            if (dataLength[1] === FieldParser.VARIABLE_LENGTH) {
              return FieldParser.processVariableAI(3, dataLength[2], rawInformation);
            }
            return FieldParser.processFixedAI(3, dataLength[1], rawInformation);
          }
        }
        for (let dataLength of FieldParser.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH) {
          if (dataLength[0] === firstThreeDigits) {
            if (dataLength[1] === FieldParser.VARIABLE_LENGTH) {
              return FieldParser.processVariableAI(4, dataLength[2], rawInformation);
            }
            return FieldParser.processFixedAI(4, dataLength[1], rawInformation);
          }
        }
        if (rawInformation.length < 4) {
          throw new NotFoundException();
        }
        let firstFourDigits = rawInformation.substring(0, 4);
        for (let dataLength of FieldParser.FOUR_DIGIT_DATA_LENGTH) {
          if (dataLength[0] === firstFourDigits) {
            if (dataLength[1] === FieldParser.VARIABLE_LENGTH) {
              return FieldParser.processVariableAI(4, dataLength[2], rawInformation);
            }
            return FieldParser.processFixedAI(4, dataLength[1], rawInformation);
          }
        }
        throw new NotFoundException();
      }
      static processFixedAI(aiSize, fieldSize, rawInformation) {
        if (rawInformation.length < aiSize) {
          throw new NotFoundException();
        }
        let ai = rawInformation.substring(0, aiSize);
        if (rawInformation.length < aiSize + fieldSize) {
          throw new NotFoundException();
        }
        let field = rawInformation.substring(aiSize, aiSize + fieldSize);
        let remaining = rawInformation.substring(aiSize + fieldSize);
        let result = "(" + ai + ")" + field;
        let parsedAI = FieldParser.parseFieldsInGeneralPurpose(remaining);
        return parsedAI == null ? result : result + parsedAI;
      }
      static processVariableAI(aiSize, variableFieldSize, rawInformation) {
        let ai = rawInformation.substring(0, aiSize);
        let maxSize;
        if (rawInformation.length < aiSize + variableFieldSize) {
          maxSize = rawInformation.length;
        } else {
          maxSize = aiSize + variableFieldSize;
        }
        let field = rawInformation.substring(aiSize, maxSize);
        let remaining = rawInformation.substring(maxSize);
        let result = "(" + ai + ")" + field;
        let parsedAI = FieldParser.parseFieldsInGeneralPurpose(remaining);
        return parsedAI == null ? result : result + parsedAI;
      }
    }
    FieldParser.VARIABLE_LENGTH = [];
    FieldParser.TWO_DIGIT_DATA_LENGTH = [
      ["00", 18],
      ["01", 14],
      ["02", 14],
      ["10", FieldParser.VARIABLE_LENGTH, 20],
      ["11", 6],
      ["12", 6],
      ["13", 6],
      ["15", 6],
      ["17", 6],
      ["20", 2],
      ["21", FieldParser.VARIABLE_LENGTH, 20],
      ["22", FieldParser.VARIABLE_LENGTH, 29],
      ["30", FieldParser.VARIABLE_LENGTH, 8],
      ["37", FieldParser.VARIABLE_LENGTH, 8],
      ["90", FieldParser.VARIABLE_LENGTH, 30],
      ["91", FieldParser.VARIABLE_LENGTH, 30],
      ["92", FieldParser.VARIABLE_LENGTH, 30],
      ["93", FieldParser.VARIABLE_LENGTH, 30],
      ["94", FieldParser.VARIABLE_LENGTH, 30],
      ["95", FieldParser.VARIABLE_LENGTH, 30],
      ["96", FieldParser.VARIABLE_LENGTH, 30],
      ["97", FieldParser.VARIABLE_LENGTH, 3],
      ["98", FieldParser.VARIABLE_LENGTH, 30],
      ["99", FieldParser.VARIABLE_LENGTH, 30]
    ];
    FieldParser.THREE_DIGIT_DATA_LENGTH = [
      ["240", FieldParser.VARIABLE_LENGTH, 30],
      ["241", FieldParser.VARIABLE_LENGTH, 30],
      ["242", FieldParser.VARIABLE_LENGTH, 6],
      ["250", FieldParser.VARIABLE_LENGTH, 30],
      ["251", FieldParser.VARIABLE_LENGTH, 30],
      ["253", FieldParser.VARIABLE_LENGTH, 17],
      ["254", FieldParser.VARIABLE_LENGTH, 20],
      ["400", FieldParser.VARIABLE_LENGTH, 30],
      ["401", FieldParser.VARIABLE_LENGTH, 30],
      ["402", 17],
      ["403", FieldParser.VARIABLE_LENGTH, 30],
      ["410", 13],
      ["411", 13],
      ["412", 13],
      ["413", 13],
      ["414", 13],
      ["420", FieldParser.VARIABLE_LENGTH, 20],
      ["421", FieldParser.VARIABLE_LENGTH, 15],
      ["422", 3],
      ["423", FieldParser.VARIABLE_LENGTH, 15],
      ["424", 3],
      ["425", 3],
      ["426", 3]
    ];
    FieldParser.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH = [
      ["310", 6],
      ["311", 6],
      ["312", 6],
      ["313", 6],
      ["314", 6],
      ["315", 6],
      ["316", 6],
      ["320", 6],
      ["321", 6],
      ["322", 6],
      ["323", 6],
      ["324", 6],
      ["325", 6],
      ["326", 6],
      ["327", 6],
      ["328", 6],
      ["329", 6],
      ["330", 6],
      ["331", 6],
      ["332", 6],
      ["333", 6],
      ["334", 6],
      ["335", 6],
      ["336", 6],
      ["340", 6],
      ["341", 6],
      ["342", 6],
      ["343", 6],
      ["344", 6],
      ["345", 6],
      ["346", 6],
      ["347", 6],
      ["348", 6],
      ["349", 6],
      ["350", 6],
      ["351", 6],
      ["352", 6],
      ["353", 6],
      ["354", 6],
      ["355", 6],
      ["356", 6],
      ["357", 6],
      ["360", 6],
      ["361", 6],
      ["362", 6],
      ["363", 6],
      ["364", 6],
      ["365", 6],
      ["366", 6],
      ["367", 6],
      ["368", 6],
      ["369", 6],
      ["390", FieldParser.VARIABLE_LENGTH, 15],
      ["391", FieldParser.VARIABLE_LENGTH, 18],
      ["392", FieldParser.VARIABLE_LENGTH, 15],
      ["393", FieldParser.VARIABLE_LENGTH, 18],
      ["703", FieldParser.VARIABLE_LENGTH, 30]
    ];
    FieldParser.FOUR_DIGIT_DATA_LENGTH = [
      ["7001", 13],
      ["7002", FieldParser.VARIABLE_LENGTH, 30],
      ["7003", 10],
      ["8001", 14],
      ["8002", FieldParser.VARIABLE_LENGTH, 20],
      ["8003", FieldParser.VARIABLE_LENGTH, 30],
      ["8004", FieldParser.VARIABLE_LENGTH, 30],
      ["8005", 6],
      ["8006", 18],
      ["8007", FieldParser.VARIABLE_LENGTH, 30],
      ["8008", FieldParser.VARIABLE_LENGTH, 12],
      ["8018", 18],
      ["8020", FieldParser.VARIABLE_LENGTH, 25],
      ["8100", 6],
      ["8101", 10],
      ["8102", 2],
      ["8110", FieldParser.VARIABLE_LENGTH, 70],
      ["8200", FieldParser.VARIABLE_LENGTH, 70]
    ];
    class GeneralAppIdDecoder {
      constructor(information) {
        this.buffer = new StringBuilder();
        this.information = information;
      }
      decodeAllCodes(buff, initialPosition) {
        let currentPosition = initialPosition;
        let remaining = null;
        do {
          let info = this.decodeGeneralPurposeField(currentPosition, remaining);
          let parsedFields = FieldParser.parseFieldsInGeneralPurpose(info.getNewString());
          if (parsedFields != null) {
            buff.append(parsedFields);
          }
          if (info.isRemaining()) {
            remaining = "" + info.getRemainingValue();
          } else {
            remaining = null;
          }
          if (currentPosition === info.getNewPosition()) {
            break;
          }
          currentPosition = info.getNewPosition();
        } while (true);
        return buff.toString();
      }
      isStillNumeric(pos) {
        if (pos + 7 > this.information.getSize()) {
          return pos + 4 <= this.information.getSize();
        }
        for (let i = pos; i < pos + 3; ++i) {
          if (this.information.get(i)) {
            return true;
          }
        }
        return this.information.get(pos + 3);
      }
      decodeNumeric(pos) {
        if (pos + 7 > this.information.getSize()) {
          let numeric2 = this.extractNumericValueFromBitArray(pos, 4);
          if (numeric2 === 0) {
            return new DecodedNumeric(this.information.getSize(), DecodedNumeric.FNC1, DecodedNumeric.FNC1);
          }
          return new DecodedNumeric(this.information.getSize(), numeric2 - 1, DecodedNumeric.FNC1);
        }
        let numeric = this.extractNumericValueFromBitArray(pos, 7);
        let digit1 = (numeric - 8) / 11;
        let digit2 = (numeric - 8) % 11;
        return new DecodedNumeric(pos + 7, digit1, digit2);
      }
      extractNumericValueFromBitArray(pos, bits) {
        return GeneralAppIdDecoder.extractNumericValueFromBitArray(this.information, pos, bits);
      }
      static extractNumericValueFromBitArray(information, pos, bits) {
        let value = 0;
        for (let i = 0; i < bits; ++i) {
          if (information.get(pos + i)) {
            value |= 1 << bits - i - 1;
          }
        }
        return value;
      }
      decodeGeneralPurposeField(pos, remaining) {
        this.buffer.setLengthToZero();
        if (remaining != null) {
          this.buffer.append(remaining);
        }
        this.current.setPosition(pos);
        let lastDecoded = this.parseBlocks();
        if (lastDecoded != null && lastDecoded.isRemaining()) {
          return new DecodedInformation(this.current.getPosition(), this.buffer.toString(), lastDecoded.getRemainingValue());
        }
        return new DecodedInformation(this.current.getPosition(), this.buffer.toString());
      }
      parseBlocks() {
        let isFinished;
        let result;
        do {
          let initialPosition = this.current.getPosition();
          if (this.current.isAlpha()) {
            result = this.parseAlphaBlock();
            isFinished = result.isFinished();
          } else if (this.current.isIsoIec646()) {
            result = this.parseIsoIec646Block();
            isFinished = result.isFinished();
          } else {
            result = this.parseNumericBlock();
            isFinished = result.isFinished();
          }
          let positionChanged = initialPosition !== this.current.getPosition();
          if (!positionChanged && !isFinished) {
            break;
          }
        } while (!isFinished);
        return result.getDecodedInformation();
      }
      parseNumericBlock() {
        while (this.isStillNumeric(this.current.getPosition())) {
          let numeric = this.decodeNumeric(this.current.getPosition());
          this.current.setPosition(numeric.getNewPosition());
          if (numeric.isFirstDigitFNC1()) {
            let information;
            if (numeric.isSecondDigitFNC1()) {
              information = new DecodedInformation(this.current.getPosition(), this.buffer.toString());
            } else {
              information = new DecodedInformation(this.current.getPosition(), this.buffer.toString(), numeric.getSecondDigit());
            }
            return new BlockParsedResult(true, information);
          }
          this.buffer.append(numeric.getFirstDigit());
          if (numeric.isSecondDigitFNC1()) {
            let information = new DecodedInformation(this.current.getPosition(), this.buffer.toString());
            return new BlockParsedResult(true, information);
          }
          this.buffer.append(numeric.getSecondDigit());
        }
        if (this.isNumericToAlphaNumericLatch(this.current.getPosition())) {
          this.current.setAlpha();
          this.current.incrementPosition(4);
        }
        return new BlockParsedResult(false);
      }
      parseIsoIec646Block() {
        while (this.isStillIsoIec646(this.current.getPosition())) {
          let iso = this.decodeIsoIec646(this.current.getPosition());
          this.current.setPosition(iso.getNewPosition());
          if (iso.isFNC1()) {
            let information = new DecodedInformation(this.current.getPosition(), this.buffer.toString());
            return new BlockParsedResult(true, information);
          }
          this.buffer.append(iso.getValue());
        }
        if (this.isAlphaOr646ToNumericLatch(this.current.getPosition())) {
          this.current.incrementPosition(3);
          this.current.setNumeric();
        } else if (this.isAlphaTo646ToAlphaLatch(this.current.getPosition())) {
          if (this.current.getPosition() + 5 < this.information.getSize()) {
            this.current.incrementPosition(5);
          } else {
            this.current.setPosition(this.information.getSize());
          }
          this.current.setAlpha();
        }
        return new BlockParsedResult(false);
      }
      parseAlphaBlock() {
        while (this.isStillAlpha(this.current.getPosition())) {
          let alpha = this.decodeAlphanumeric(this.current.getPosition());
          this.current.setPosition(alpha.getNewPosition());
          if (alpha.isFNC1()) {
            let information = new DecodedInformation(this.current.getPosition(), this.buffer.toString());
            return new BlockParsedResult(true, information);
          }
          this.buffer.append(alpha.getValue());
        }
        if (this.isAlphaOr646ToNumericLatch(this.current.getPosition())) {
          this.current.incrementPosition(3);
          this.current.setNumeric();
        } else if (this.isAlphaTo646ToAlphaLatch(this.current.getPosition())) {
          if (this.current.getPosition() + 5 < this.information.getSize()) {
            this.current.incrementPosition(5);
          } else {
            this.current.setPosition(this.information.getSize());
          }
          this.current.setIsoIec646();
        }
        return new BlockParsedResult(false);
      }
      isStillIsoIec646(pos) {
        if (pos + 5 > this.information.getSize()) {
          return false;
        }
        let fiveBitValue = this.extractNumericValueFromBitArray(pos, 5);
        if (fiveBitValue >= 5 && fiveBitValue < 16) {
          return true;
        }
        if (pos + 7 > this.information.getSize()) {
          return false;
        }
        let sevenBitValue = this.extractNumericValueFromBitArray(pos, 7);
        if (sevenBitValue >= 64 && sevenBitValue < 116) {
          return true;
        }
        if (pos + 8 > this.information.getSize()) {
          return false;
        }
        let eightBitValue = this.extractNumericValueFromBitArray(pos, 8);
        return eightBitValue >= 232 && eightBitValue < 253;
      }
      decodeIsoIec646(pos) {
        let fiveBitValue = this.extractNumericValueFromBitArray(pos, 5);
        if (fiveBitValue === 15) {
          return new DecodedChar(pos + 5, DecodedChar.FNC1);
        }
        if (fiveBitValue >= 5 && fiveBitValue < 15) {
          return new DecodedChar(pos + 5, "0" + (fiveBitValue - 5));
        }
        let sevenBitValue = this.extractNumericValueFromBitArray(pos, 7);
        if (sevenBitValue >= 64 && sevenBitValue < 90) {
          return new DecodedChar(pos + 7, "" + (sevenBitValue + 1));
        }
        if (sevenBitValue >= 90 && sevenBitValue < 116) {
          return new DecodedChar(pos + 7, "" + (sevenBitValue + 7));
        }
        let eightBitValue = this.extractNumericValueFromBitArray(pos, 8);
        let c;
        switch (eightBitValue) {
          case 232:
            c = "!";
            break;
          case 233:
            c = '"';
            break;
          case 234:
            c = "%";
            break;
          case 235:
            c = "&";
            break;
          case 236:
            c = "'";
            break;
          case 237:
            c = "(";
            break;
          case 238:
            c = ")";
            break;
          case 239:
            c = "*";
            break;
          case 240:
            c = "+";
            break;
          case 241:
            c = ",";
            break;
          case 242:
            c = "-";
            break;
          case 243:
            c = ".";
            break;
          case 244:
            c = "/";
            break;
          case 245:
            c = ":";
            break;
          case 246:
            c = ";";
            break;
          case 247:
            c = "<";
            break;
          case 248:
            c = "=";
            break;
          case 249:
            c = ">";
            break;
          case 250:
            c = "?";
            break;
          case 251:
            c = "_";
            break;
          case 252:
            c = " ";
            break;
          default:
            throw new FormatException();
        }
        return new DecodedChar(pos + 8, c);
      }
      isStillAlpha(pos) {
        if (pos + 5 > this.information.getSize()) {
          return false;
        }
        let fiveBitValue = this.extractNumericValueFromBitArray(pos, 5);
        if (fiveBitValue >= 5 && fiveBitValue < 16) {
          return true;
        }
        if (pos + 6 > this.information.getSize()) {
          return false;
        }
        let sixBitValue = this.extractNumericValueFromBitArray(pos, 6);
        return sixBitValue >= 16 && sixBitValue < 63;
      }
      decodeAlphanumeric(pos) {
        let fiveBitValue = this.extractNumericValueFromBitArray(pos, 5);
        if (fiveBitValue === 15) {
          return new DecodedChar(pos + 5, DecodedChar.FNC1);
        }
        if (fiveBitValue >= 5 && fiveBitValue < 15) {
          return new DecodedChar(pos + 5, "0" + (fiveBitValue - 5));
        }
        let sixBitValue = this.extractNumericValueFromBitArray(pos, 6);
        if (sixBitValue >= 32 && sixBitValue < 58) {
          return new DecodedChar(pos + 6, "" + (sixBitValue + 33));
        }
        let c;
        switch (sixBitValue) {
          case 58:
            c = "*";
            break;
          case 59:
            c = ",";
            break;
          case 60:
            c = "-";
            break;
          case 61:
            c = ".";
            break;
          case 62:
            c = "/";
            break;
          default:
            throw new IllegalStateException("Decoding invalid alphanumeric value: " + sixBitValue);
        }
        return new DecodedChar(pos + 6, c);
      }
      isAlphaTo646ToAlphaLatch(pos) {
        if (pos + 1 > this.information.getSize()) {
          return false;
        }
        for (let i = 0; i < 5 && i + pos < this.information.getSize(); ++i) {
          if (i === 2) {
            if (!this.information.get(pos + 2)) {
              return false;
            }
          } else if (this.information.get(pos + i)) {
            return false;
          }
        }
        return true;
      }
      isAlphaOr646ToNumericLatch(pos) {
        if (pos + 3 > this.information.getSize()) {
          return false;
        }
        for (let i = pos; i < pos + 3; ++i) {
          if (this.information.get(i)) {
            return false;
          }
        }
        return true;
      }
      isNumericToAlphaNumericLatch(pos) {
        if (pos + 1 > this.information.getSize()) {
          return false;
        }
        for (let i = 0; i < 4 && i + pos < this.information.getSize(); ++i) {
          if (this.information.get(pos + i)) {
            return false;
          }
        }
        return true;
      }
    }
    class AbstractExpandedDecoder {
      constructor(information) {
        this.information = information;
        this.generalDecoder = new GeneralAppIdDecoder(information);
      }
      getInformation() {
        return this.information;
      }
      getGeneralDecoder() {
        return this.generalDecoder;
      }
    }
    class AI01decoder extends AbstractExpandedDecoder {
      constructor(information) {
        super(information);
      }
      encodeCompressedGtin(buf, currentPos) {
        buf.append("(01)");
        let initialPosition = buf.length();
        buf.append("9");
        this.encodeCompressedGtinWithoutAI(buf, currentPos, initialPosition);
      }
      encodeCompressedGtinWithoutAI(buf, currentPos, initialBufferPosition) {
        for (let i = 0; i < 4; ++i) {
          let currentBlock = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos + 10 * i, 10);
          if (currentBlock / 100 === 0) {
            buf.append("0");
          }
          if (currentBlock / 10 === 0) {
            buf.append("0");
          }
          buf.append(currentBlock);
        }
        AI01decoder.appendCheckDigit(buf, initialBufferPosition);
      }
      static appendCheckDigit(buf, currentPos) {
        let checkDigit = 0;
        for (let i = 0; i < 13; i++) {
          let digit = buf.charAt(i + currentPos).charCodeAt(0) - "0".charCodeAt(0);
          checkDigit += (i & 1) === 0 ? 3 * digit : digit;
        }
        checkDigit = 10 - checkDigit % 10;
        if (checkDigit === 10) {
          checkDigit = 0;
        }
        buf.append(checkDigit);
      }
    }
    AI01decoder.GTIN_SIZE = 40;
    class AI01AndOtherAIs extends AI01decoder {
      constructor(information) {
        super(information);
      }
      parseInformation() {
        let buff = new StringBuilder();
        buff.append("(01)");
        let initialGtinPosition = buff.length();
        let firstGtinDigit = this.getGeneralDecoder().extractNumericValueFromBitArray(AI01AndOtherAIs.HEADER_SIZE, 4);
        buff.append(firstGtinDigit);
        this.encodeCompressedGtinWithoutAI(buff, AI01AndOtherAIs.HEADER_SIZE + 4, initialGtinPosition);
        return this.getGeneralDecoder().decodeAllCodes(buff, AI01AndOtherAIs.HEADER_SIZE + 44);
      }
    }
    AI01AndOtherAIs.HEADER_SIZE = 1 + 1 + 2;
    class AnyAIDecoder extends AbstractExpandedDecoder {
      constructor(information) {
        super(information);
      }
      parseInformation() {
        let buf = new StringBuilder();
        return this.getGeneralDecoder().decodeAllCodes(buf, AnyAIDecoder.HEADER_SIZE);
      }
    }
    AnyAIDecoder.HEADER_SIZE = 2 + 1 + 2;
    class AI01weightDecoder extends AI01decoder {
      constructor(information) {
        super(information);
      }
      encodeCompressedWeight(buf, currentPos, weightSize) {
        let originalWeightNumeric = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos, weightSize);
        this.addWeightCode(buf, originalWeightNumeric);
        let weightNumeric = this.checkWeight(originalWeightNumeric);
        let currentDivisor = 1e5;
        for (let i = 0; i < 5; ++i) {
          if (weightNumeric / currentDivisor === 0) {
            buf.append("0");
          }
          currentDivisor /= 10;
        }
        buf.append(weightNumeric);
      }
    }
    class AI013x0xDecoder extends AI01weightDecoder {
      constructor(information) {
        super(information);
      }
      parseInformation() {
        if (this.getInformation().getSize() != AI013x0xDecoder.HEADER_SIZE + AI01weightDecoder.GTIN_SIZE + AI013x0xDecoder.WEIGHT_SIZE) {
          throw new NotFoundException();
        }
        let buf = new StringBuilder();
        this.encodeCompressedGtin(buf, AI013x0xDecoder.HEADER_SIZE);
        this.encodeCompressedWeight(buf, AI013x0xDecoder.HEADER_SIZE + AI01weightDecoder.GTIN_SIZE, AI013x0xDecoder.WEIGHT_SIZE);
        return buf.toString();
      }
    }
    AI013x0xDecoder.HEADER_SIZE = 4 + 1;
    AI013x0xDecoder.WEIGHT_SIZE = 15;
    class AI013103decoder extends AI013x0xDecoder {
      constructor(information) {
        super(information);
      }
      addWeightCode(buf, weight) {
        buf.append("(3103)");
      }
      checkWeight(weight) {
        return weight;
      }
    }
    class AI01320xDecoder extends AI013x0xDecoder {
      constructor(information) {
        super(information);
      }
      addWeightCode(buf, weight) {
        if (weight < 1e4) {
          buf.append("(3202)");
        } else {
          buf.append("(3203)");
        }
      }
      checkWeight(weight) {
        if (weight < 1e4) {
          return weight;
        }
        return weight - 1e4;
      }
    }
    class AI01392xDecoder extends AI01decoder {
      constructor(information) {
        super(information);
      }
      parseInformation() {
        if (this.getInformation().getSize() < AI01392xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE) {
          throw new NotFoundException();
        }
        let buf = new StringBuilder();
        this.encodeCompressedGtin(buf, AI01392xDecoder.HEADER_SIZE);
        let lastAIdigit = this.getGeneralDecoder().extractNumericValueFromBitArray(AI01392xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE, AI01392xDecoder.LAST_DIGIT_SIZE);
        buf.append("(392");
        buf.append(lastAIdigit);
        buf.append(")");
        let decodedInformation = this.getGeneralDecoder().decodeGeneralPurposeField(AI01392xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE + AI01392xDecoder.LAST_DIGIT_SIZE, null);
        buf.append(decodedInformation.getNewString());
        return buf.toString();
      }
    }
    AI01392xDecoder.HEADER_SIZE = 5 + 1 + 2;
    AI01392xDecoder.LAST_DIGIT_SIZE = 2;
    class AI01393xDecoder extends AI01decoder {
      constructor(information) {
        super(information);
      }
      parseInformation() {
        if (this.getInformation().getSize() < AI01393xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE) {
          throw new NotFoundException();
        }
        let buf = new StringBuilder();
        this.encodeCompressedGtin(buf, AI01393xDecoder.HEADER_SIZE);
        let lastAIdigit = this.getGeneralDecoder().extractNumericValueFromBitArray(AI01393xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE, AI01393xDecoder.LAST_DIGIT_SIZE);
        buf.append("(393");
        buf.append(lastAIdigit);
        buf.append(")");
        let firstThreeDigits = this.getGeneralDecoder().extractNumericValueFromBitArray(AI01393xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE + AI01393xDecoder.LAST_DIGIT_SIZE, AI01393xDecoder.FIRST_THREE_DIGITS_SIZE);
        if (firstThreeDigits / 100 == 0) {
          buf.append("0");
        }
        if (firstThreeDigits / 10 == 0) {
          buf.append("0");
        }
        buf.append(firstThreeDigits);
        let generalInformation = this.getGeneralDecoder().decodeGeneralPurposeField(AI01393xDecoder.HEADER_SIZE + AI01decoder.GTIN_SIZE + AI01393xDecoder.LAST_DIGIT_SIZE + AI01393xDecoder.FIRST_THREE_DIGITS_SIZE, null);
        buf.append(generalInformation.getNewString());
        return buf.toString();
      }
    }
    AI01393xDecoder.HEADER_SIZE = 5 + 1 + 2;
    AI01393xDecoder.LAST_DIGIT_SIZE = 2;
    AI01393xDecoder.FIRST_THREE_DIGITS_SIZE = 10;
    class AI013x0x1xDecoder extends AI01weightDecoder {
      constructor(information, firstAIdigits, dateCode) {
        super(information);
        this.dateCode = dateCode;
        this.firstAIdigits = firstAIdigits;
      }
      parseInformation() {
        if (this.getInformation().getSize() != AI013x0x1xDecoder.HEADER_SIZE + AI013x0x1xDecoder.GTIN_SIZE + AI013x0x1xDecoder.WEIGHT_SIZE + AI013x0x1xDecoder.DATE_SIZE) {
          throw new NotFoundException();
        }
        let buf = new StringBuilder();
        this.encodeCompressedGtin(buf, AI013x0x1xDecoder.HEADER_SIZE);
        this.encodeCompressedWeight(buf, AI013x0x1xDecoder.HEADER_SIZE + AI013x0x1xDecoder.GTIN_SIZE, AI013x0x1xDecoder.WEIGHT_SIZE);
        this.encodeCompressedDate(buf, AI013x0x1xDecoder.HEADER_SIZE + AI013x0x1xDecoder.GTIN_SIZE + AI013x0x1xDecoder.WEIGHT_SIZE);
        return buf.toString();
      }
      encodeCompressedDate(buf, currentPos) {
        let numericDate = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos, AI013x0x1xDecoder.DATE_SIZE);
        if (numericDate == 38400) {
          return;
        }
        buf.append("(");
        buf.append(this.dateCode);
        buf.append(")");
        let day = numericDate % 32;
        numericDate /= 32;
        let month = numericDate % 12 + 1;
        numericDate /= 12;
        let year = numericDate;
        if (year / 10 == 0) {
          buf.append("0");
        }
        buf.append(year);
        if (month / 10 == 0) {
          buf.append("0");
        }
        buf.append(month);
        if (day / 10 == 0) {
          buf.append("0");
        }
        buf.append(day);
      }
      addWeightCode(buf, weight) {
        buf.append("(");
        buf.append(this.firstAIdigits);
        buf.append(weight / 1e5);
        buf.append(")");
      }
      checkWeight(weight) {
        return weight % 1e5;
      }
    }
    AI013x0x1xDecoder.HEADER_SIZE = 7 + 1;
    AI013x0x1xDecoder.WEIGHT_SIZE = 20;
    AI013x0x1xDecoder.DATE_SIZE = 16;
    function createDecoder(information) {
      try {
        if (information.get(1)) {
          return new AI01AndOtherAIs(information);
        }
        if (!information.get(2)) {
          return new AnyAIDecoder(information);
        }
        let fourBitEncodationMethod = GeneralAppIdDecoder.extractNumericValueFromBitArray(information, 1, 4);
        switch (fourBitEncodationMethod) {
          case 4:
            return new AI013103decoder(information);
          case 5:
            return new AI01320xDecoder(information);
        }
        let fiveBitEncodationMethod = GeneralAppIdDecoder.extractNumericValueFromBitArray(information, 1, 5);
        switch (fiveBitEncodationMethod) {
          case 12:
            return new AI01392xDecoder(information);
          case 13:
            return new AI01393xDecoder(information);
        }
        let sevenBitEncodationMethod = GeneralAppIdDecoder.extractNumericValueFromBitArray(information, 1, 7);
        switch (sevenBitEncodationMethod) {
          case 56:
            return new AI013x0x1xDecoder(information, "310", "11");
          case 57:
            return new AI013x0x1xDecoder(information, "320", "11");
          case 58:
            return new AI013x0x1xDecoder(information, "310", "13");
          case 59:
            return new AI013x0x1xDecoder(information, "320", "13");
          case 60:
            return new AI013x0x1xDecoder(information, "310", "15");
          case 61:
            return new AI013x0x1xDecoder(information, "320", "15");
          case 62:
            return new AI013x0x1xDecoder(information, "310", "17");
          case 63:
            return new AI013x0x1xDecoder(information, "320", "17");
        }
      } catch (e) {
        console.log(e);
        throw new IllegalStateException("unknown decoder: " + information);
      }
    }
    class ExpandedPair {
      constructor(leftChar, rightChar, finderPatter, mayBeLast) {
        this.leftchar = leftChar;
        this.rightchar = rightChar;
        this.finderpattern = finderPatter;
        this.maybeLast = mayBeLast;
      }
      mayBeLast() {
        return this.maybeLast;
      }
      getLeftChar() {
        return this.leftchar;
      }
      getRightChar() {
        return this.rightchar;
      }
      getFinderPattern() {
        return this.finderpattern;
      }
      mustBeLast() {
        return this.rightchar == null;
      }
      toString() {
        return "[ " + this.leftchar + ", " + this.rightchar + " : " + (this.finderpattern == null ? "null" : this.finderpattern.getValue()) + " ]";
      }
      static equals(o1, o2) {
        if (!(o1 instanceof ExpandedPair)) {
          return false;
        }
        return ExpandedPair.equalsOrNull(o1.leftchar, o2.leftchar) && ExpandedPair.equalsOrNull(o1.rightchar, o2.rightchar) && ExpandedPair.equalsOrNull(o1.finderpattern, o2.finderpattern);
      }
      static equalsOrNull(o1, o2) {
        return o1 === null ? o2 === null : ExpandedPair.equals(o1, o2);
      }
      hashCode() {
        let value = this.leftchar.getValue() ^ this.rightchar.getValue() ^ this.finderpattern.getValue();
        return value;
      }
    }
    class ExpandedRow {
      constructor(pairs, rowNumber, wasReversed) {
        this.pairs = pairs;
        this.rowNumber = rowNumber;
        this.wasReversed = wasReversed;
      }
      getPairs() {
        return this.pairs;
      }
      getRowNumber() {
        return this.rowNumber;
      }
      isReversed() {
        return this.wasReversed;
      }
      isEquivalent(otherPairs) {
        return this.checkEqualitity(this, otherPairs);
      }
      toString() {
        return "{ " + this.pairs + " }";
      }
      equals(o1, o2) {
        if (!(o1 instanceof ExpandedRow)) {
          return false;
        }
        return this.checkEqualitity(o1, o2) && o1.wasReversed === o2.wasReversed;
      }
      checkEqualitity(pair1, pair2) {
        if (!pair1 || !pair2)
          return;
        let result;
        pair1.forEach((e1, i) => {
          pair2.forEach((e2) => {
            if (e1.getLeftChar().getValue() === e2.getLeftChar().getValue() && e1.getRightChar().getValue() === e2.getRightChar().getValue() && e1.getFinderPatter().getValue() === e2.getFinderPatter().getValue()) {
              result = true;
            }
          });
        });
        return result;
      }
    }
    class RSSExpandedReader extends AbstractRSSReader {
      constructor(verbose) {
        super(...arguments);
        this.pairs = new Array(RSSExpandedReader.MAX_PAIRS);
        this.rows = new Array();
        this.startEnd = [2];
        this.verbose = verbose === true;
      }
      decodeRow(rowNumber, row, hints) {
        this.pairs.length = 0;
        this.startFromEven = false;
        try {
          return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));
        } catch (e) {
          if (this.verbose) {
            console.log(e);
          }
        }
        this.pairs.length = 0;
        this.startFromEven = true;
        return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));
      }
      reset() {
        this.pairs.length = 0;
        this.rows.length = 0;
      }
      decodeRow2pairs(rowNumber, row) {
        let done = false;
        while (!done) {
          try {
            this.pairs.push(this.retrieveNextPair(row, this.pairs, rowNumber));
          } catch (error2) {
            if (error2 instanceof NotFoundException) {
              if (!this.pairs.length) {
                throw new NotFoundException();
              }
              done = true;
            }
          }
        }
        if (this.checkChecksum()) {
          return this.pairs;
        }
        let tryStackedDecode;
        if (this.rows.length) {
          tryStackedDecode = true;
        } else {
          tryStackedDecode = false;
        }
        this.storeRow(rowNumber, false);
        if (tryStackedDecode) {
          let ps = this.checkRowsBoolean(false);
          if (ps != null) {
            return ps;
          }
          ps = this.checkRowsBoolean(true);
          if (ps != null) {
            return ps;
          }
        }
        throw new NotFoundException();
      }
      checkRowsBoolean(reverse) {
        if (this.rows.length > 25) {
          this.rows.length = 0;
          return null;
        }
        this.pairs.length = 0;
        if (reverse) {
          this.rows = this.rows.reverse();
        }
        let ps = null;
        try {
          ps = this.checkRows(new Array(), 0);
        } catch (e) {
          if (this.verbose) {
            console.log(e);
          }
        }
        if (reverse) {
          this.rows = this.rows.reverse();
        }
        return ps;
      }
      checkRows(collectedRows, currentRow) {
        for (let i = currentRow; i < this.rows.length; i++) {
          let row = this.rows[i];
          this.pairs.length = 0;
          for (let collectedRow of collectedRows) {
            this.pairs.push(collectedRow.getPairs());
          }
          this.pairs.push(row.getPairs());
          if (!RSSExpandedReader.isValidSequence(this.pairs)) {
            continue;
          }
          if (this.checkChecksum()) {
            return this.pairs;
          }
          let rs = new Array(collectedRows);
          rs.push(row);
          try {
            return this.checkRows(rs, i + 1);
          } catch (e) {
            if (this.verbose) {
              console.log(e);
            }
          }
        }
        throw new NotFoundException();
      }
      static isValidSequence(pairs) {
        for (let sequence of RSSExpandedReader.FINDER_PATTERN_SEQUENCES) {
          if (pairs.length > sequence.length) {
            continue;
          }
          let stop2 = true;
          for (let j = 0; j < pairs.length; j++) {
            if (pairs[j].getFinderPattern().getValue() != sequence[j]) {
              stop2 = false;
              break;
            }
          }
          if (stop2) {
            return true;
          }
        }
        return false;
      }
      storeRow(rowNumber, wasReversed) {
        let insertPos = 0;
        let prevIsSame = false;
        let nextIsSame = false;
        while (insertPos < this.rows.length) {
          let erow = this.rows[insertPos];
          if (erow.getRowNumber() > rowNumber) {
            nextIsSame = erow.isEquivalent(this.pairs);
            break;
          }
          prevIsSame = erow.isEquivalent(this.pairs);
          insertPos++;
        }
        if (nextIsSame || prevIsSame) {
          return;
        }
        if (RSSExpandedReader.isPartialRow(this.pairs, this.rows)) {
          return;
        }
        this.rows.push(insertPos, new ExpandedRow(this.pairs, rowNumber, wasReversed));
        this.removePartialRows(this.pairs, this.rows);
      }
      removePartialRows(pairs, rows) {
        for (let row of rows) {
          if (row.getPairs().length === pairs.length) {
            continue;
          }
          for (let p of row.getPairs()) {
            for (let pp of pairs) {
              if (ExpandedPair.equals(p, pp)) {
                break;
              }
            }
          }
        }
      }
      static isPartialRow(pairs, rows) {
        for (let r of rows) {
          let allFound = true;
          for (let p of pairs) {
            let found = false;
            for (let pp of r.getPairs()) {
              if (p.equals(pp)) {
                found = true;
                break;
              }
            }
            if (!found) {
              allFound = false;
              break;
            }
          }
          if (allFound) {
            return true;
          }
        }
        return false;
      }
      getRows() {
        return this.rows;
      }
      static constructResult(pairs) {
        let binary = BitArrayBuilder.buildBitArray(pairs);
        let decoder = createDecoder(binary);
        let resultingString = decoder.parseInformation();
        let firstPoints = pairs[0].getFinderPattern().getResultPoints();
        let lastPoints = pairs[pairs.length - 1].getFinderPattern().getResultPoints();
        let points = [firstPoints[0], firstPoints[1], lastPoints[0], lastPoints[1]];
        return new Result(resultingString, null, null, points, BarcodeFormat$1.RSS_EXPANDED, null);
      }
      checkChecksum() {
        let firstPair = this.pairs.get(0);
        let checkCharacter = firstPair.getLeftChar();
        let firstCharacter = firstPair.getRightChar();
        if (firstCharacter == null) {
          return false;
        }
        let checksum = firstCharacter.getChecksumPortion();
        let s = 2;
        for (let i = 1; i < this.pairs.size(); ++i) {
          let currentPair = this.pairs.get(i);
          checksum += currentPair.getLeftChar().getChecksumPortion();
          s++;
          let currentRightChar = currentPair.getRightChar();
          if (currentRightChar != null) {
            checksum += currentRightChar.getChecksumPortion();
            s++;
          }
        }
        checksum %= 211;
        let checkCharacterValue = 211 * (s - 4) + checksum;
        return checkCharacterValue == checkCharacter.getValue();
      }
      static getNextSecondBar(row, initialPos) {
        let currentPos;
        if (row.get(initialPos)) {
          currentPos = row.getNextUnset(initialPos);
          currentPos = row.getNextSet(currentPos);
        } else {
          currentPos = row.getNextSet(initialPos);
          currentPos = row.getNextUnset(currentPos);
        }
        return currentPos;
      }
      retrieveNextPair(row, previousPairs, rowNumber) {
        let isOddPattern = previousPairs.length % 2 == 0;
        if (this.startFromEven) {
          isOddPattern = !isOddPattern;
        }
        let pattern;
        let keepFinding = true;
        let forcedOffset = -1;
        do {
          this.findNextPair(row, previousPairs, forcedOffset);
          pattern = this.parseFoundFinderPattern(row, rowNumber, isOddPattern);
          if (pattern == null) {
            forcedOffset = RSSExpandedReader.getNextSecondBar(row, this.startEnd[0]);
          } else {
            keepFinding = false;
          }
        } while (keepFinding);
        let leftChar = this.decodeDataCharacter(row, pattern, isOddPattern, true);
        if (!this.isEmptyPair(previousPairs) && previousPairs[previousPairs.length - 1].mustBeLast()) {
          throw new NotFoundException();
        }
        let rightChar;
        try {
          rightChar = this.decodeDataCharacter(row, pattern, isOddPattern, false);
        } catch (e) {
          rightChar = null;
          if (this.verbose) {
            console.log(e);
          }
        }
        return new ExpandedPair(leftChar, rightChar, pattern, true);
      }
      isEmptyPair(pairs) {
        if (pairs.length === 0) {
          return true;
        }
        return false;
      }
      findNextPair(row, previousPairs, forcedOffset) {
        let counters = this.getDecodeFinderCounters();
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let width = row.getSize();
        let rowOffset;
        if (forcedOffset >= 0) {
          rowOffset = forcedOffset;
        } else if (this.isEmptyPair(previousPairs)) {
          rowOffset = 0;
        } else {
          let lastPair = previousPairs[previousPairs.length - 1];
          rowOffset = lastPair.getFinderPattern().getStartEnd()[1];
        }
        let searchingEvenPair = previousPairs.length % 2 != 0;
        if (this.startFromEven) {
          searchingEvenPair = !searchingEvenPair;
        }
        let isWhite = false;
        while (rowOffset < width) {
          isWhite = !row.get(rowOffset);
          if (!isWhite) {
            break;
          }
          rowOffset++;
        }
        let counterPosition = 0;
        let patternStart = rowOffset;
        for (let x = rowOffset; x < width; x++) {
          if (row.get(x) != isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition == 3) {
              if (searchingEvenPair) {
                RSSExpandedReader.reverseCounters(counters);
              }
              if (RSSExpandedReader.isFinderPattern(counters)) {
                this.startEnd[0] = patternStart;
                this.startEnd[1] = x;
                return;
              }
              if (searchingEvenPair) {
                RSSExpandedReader.reverseCounters(counters);
              }
              patternStart += counters[0] + counters[1];
              counters[0] = counters[2];
              counters[1] = counters[3];
              counters[2] = 0;
              counters[3] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      static reverseCounters(counters) {
        let length = counters.length;
        for (let i = 0; i < length / 2; ++i) {
          let tmp = counters[i];
          counters[i] = counters[length - i - 1];
          counters[length - i - 1] = tmp;
        }
      }
      parseFoundFinderPattern(row, rowNumber, oddPattern) {
        let firstCounter;
        let start;
        let end;
        if (oddPattern) {
          let firstElementStart = this.startEnd[0] - 1;
          while (firstElementStart >= 0 && !row.get(firstElementStart)) {
            firstElementStart--;
          }
          firstElementStart++;
          firstCounter = this.startEnd[0] - firstElementStart;
          start = firstElementStart;
          end = this.startEnd[1];
        } else {
          start = this.startEnd[0];
          end = row.getNextUnset(this.startEnd[1] + 1);
          firstCounter = end - this.startEnd[1];
        }
        let counters = this.getDecodeFinderCounters();
        System.arraycopy(counters, 0, counters, 1, counters.length - 1);
        counters[0] = firstCounter;
        let value;
        try {
          value = this.parseFinderValue(counters, RSSExpandedReader.FINDER_PATTERNS);
        } catch (e) {
          return null;
        }
        return new FinderPattern(value, [start, end], start, end, rowNumber);
      }
      decodeDataCharacter(row, pattern, isOddPattern, leftChar) {
        let counters = this.getDataCharacterCounters();
        for (let x = 0; x < counters.length; x++) {
          counters[x] = 0;
        }
        if (leftChar) {
          RSSExpandedReader.recordPatternInReverse(row, pattern.getStartEnd()[0], counters);
        } else {
          RSSExpandedReader.recordPattern(row, pattern.getStartEnd()[1], counters);
          for (let i = 0, j = counters.length - 1; i < j; i++, j--) {
            let temp = counters[i];
            counters[i] = counters[j];
            counters[j] = temp;
          }
        }
        let numModules = 17;
        let elementWidth = MathUtils.sum(new Int32Array(counters)) / numModules;
        let expectedElementWidth = (pattern.getStartEnd()[1] - pattern.getStartEnd()[0]) / 15;
        if (Math.abs(elementWidth - expectedElementWidth) / expectedElementWidth > 0.3) {
          throw new NotFoundException();
        }
        let oddCounts = this.getOddCounts();
        let evenCounts = this.getEvenCounts();
        let oddRoundingErrors = this.getOddRoundingErrors();
        let evenRoundingErrors = this.getEvenRoundingErrors();
        for (let i = 0; i < counters.length; i++) {
          let value2 = 1 * counters[i] / elementWidth;
          let count = value2 + 0.5;
          if (count < 1) {
            if (value2 < 0.3) {
              throw new NotFoundException();
            }
            count = 1;
          } else if (count > 8) {
            if (value2 > 8.7) {
              throw new NotFoundException();
            }
            count = 8;
          }
          let offset = i / 2;
          if ((i & 1) == 0) {
            oddCounts[offset] = count;
            oddRoundingErrors[offset] = value2 - count;
          } else {
            evenCounts[offset] = count;
            evenRoundingErrors[offset] = value2 - count;
          }
        }
        this.adjustOddEvenCounts(numModules);
        let weightRowNumber = 4 * pattern.getValue() + (isOddPattern ? 0 : 2) + (leftChar ? 0 : 1) - 1;
        let oddSum = 0;
        let oddChecksumPortion = 0;
        for (let i = oddCounts.length - 1; i >= 0; i--) {
          if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {
            let weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i];
            oddChecksumPortion += oddCounts[i] * weight;
          }
          oddSum += oddCounts[i];
        }
        let evenChecksumPortion = 0;
        for (let i = evenCounts.length - 1; i >= 0; i--) {
          if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {
            let weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i + 1];
            evenChecksumPortion += evenCounts[i] * weight;
          }
        }
        let checksumPortion = oddChecksumPortion + evenChecksumPortion;
        if ((oddSum & 1) != 0 || oddSum > 13 || oddSum < 4) {
          throw new NotFoundException();
        }
        let group = (13 - oddSum) / 2;
        let oddWidest = RSSExpandedReader.SYMBOL_WIDEST[group];
        let evenWidest = 9 - oddWidest;
        let vOdd = RSSUtils.getRSSvalue(oddCounts, oddWidest, true);
        let vEven = RSSUtils.getRSSvalue(evenCounts, evenWidest, false);
        let tEven = RSSExpandedReader.EVEN_TOTAL_SUBSET[group];
        let gSum = RSSExpandedReader.GSUM[group];
        let value = vOdd * tEven + vEven + gSum;
        return new DataCharacter(value, checksumPortion);
      }
      static isNotA1left(pattern, isOddPattern, leftChar) {
        return !(pattern.getValue() == 0 && isOddPattern && leftChar);
      }
      adjustOddEvenCounts(numModules) {
        let oddSum = MathUtils.sum(new Int32Array(this.getOddCounts()));
        let evenSum = MathUtils.sum(new Int32Array(this.getEvenCounts()));
        let incrementOdd = false;
        let decrementOdd = false;
        if (oddSum > 13) {
          decrementOdd = true;
        } else if (oddSum < 4) {
          incrementOdd = true;
        }
        let incrementEven = false;
        let decrementEven = false;
        if (evenSum > 13) {
          decrementEven = true;
        } else if (evenSum < 4) {
          incrementEven = true;
        }
        let mismatch = oddSum + evenSum - numModules;
        let oddParityBad = (oddSum & 1) == 1;
        let evenParityBad = (evenSum & 1) == 0;
        if (mismatch == 1) {
          if (oddParityBad) {
            if (evenParityBad) {
              throw new NotFoundException();
            }
            decrementOdd = true;
          } else {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            decrementEven = true;
          }
        } else if (mismatch == -1) {
          if (oddParityBad) {
            if (evenParityBad) {
              throw new NotFoundException();
            }
            incrementOdd = true;
          } else {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            incrementEven = true;
          }
        } else if (mismatch == 0) {
          if (oddParityBad) {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            if (oddSum < evenSum) {
              incrementOdd = true;
              decrementEven = true;
            } else {
              decrementOdd = true;
              incrementEven = true;
            }
          } else {
            if (evenParityBad) {
              throw new NotFoundException();
            }
          }
        } else {
          throw new NotFoundException();
        }
        if (incrementOdd) {
          if (decrementOdd) {
            throw new NotFoundException();
          }
          RSSExpandedReader.increment(this.getOddCounts(), this.getOddRoundingErrors());
        }
        if (decrementOdd) {
          RSSExpandedReader.decrement(this.getOddCounts(), this.getOddRoundingErrors());
        }
        if (incrementEven) {
          if (decrementEven) {
            throw new NotFoundException();
          }
          RSSExpandedReader.increment(this.getEvenCounts(), this.getOddRoundingErrors());
        }
        if (decrementEven) {
          RSSExpandedReader.decrement(this.getEvenCounts(), this.getEvenRoundingErrors());
        }
      }
    }
    RSSExpandedReader.SYMBOL_WIDEST = [7, 5, 4, 3, 1];
    RSSExpandedReader.EVEN_TOTAL_SUBSET = [4, 20, 52, 104, 204];
    RSSExpandedReader.GSUM = [0, 348, 1388, 2948, 3988];
    RSSExpandedReader.FINDER_PATTERNS = [
      Int32Array.from([1, 8, 4, 1]),
      Int32Array.from([3, 6, 4, 1]),
      Int32Array.from([3, 4, 6, 1]),
      Int32Array.from([3, 2, 8, 1]),
      Int32Array.from([2, 6, 5, 1]),
      Int32Array.from([2, 2, 9, 1])
    ];
    RSSExpandedReader.WEIGHTS = [
      [1, 3, 9, 27, 81, 32, 96, 77],
      [20, 60, 180, 118, 143, 7, 21, 63],
      [189, 145, 13, 39, 117, 140, 209, 205],
      [193, 157, 49, 147, 19, 57, 171, 91],
      [62, 186, 136, 197, 169, 85, 44, 132],
      [185, 133, 188, 142, 4, 12, 36, 108],
      [113, 128, 173, 97, 80, 29, 87, 50],
      [150, 28, 84, 41, 123, 158, 52, 156],
      [46, 138, 203, 187, 139, 206, 196, 166],
      [76, 17, 51, 153, 37, 111, 122, 155],
      [43, 129, 176, 106, 107, 110, 119, 146],
      [16, 48, 144, 10, 30, 90, 59, 177],
      [109, 116, 137, 200, 178, 112, 125, 164],
      [70, 210, 208, 202, 184, 130, 179, 115],
      [134, 191, 151, 31, 93, 68, 204, 190],
      [148, 22, 66, 198, 172, 94, 71, 2],
      [6, 18, 54, 162, 64, 192, 154, 40],
      [120, 149, 25, 75, 14, 42, 126, 167],
      [79, 26, 78, 23, 69, 207, 199, 175],
      [103, 98, 83, 38, 114, 131, 182, 124],
      [161, 61, 183, 127, 170, 88, 53, 159],
      [55, 165, 73, 8, 24, 72, 5, 15],
      [45, 135, 194, 160, 58, 174, 100, 89]
    ];
    RSSExpandedReader.FINDER_PAT_A = 0;
    RSSExpandedReader.FINDER_PAT_B = 1;
    RSSExpandedReader.FINDER_PAT_C = 2;
    RSSExpandedReader.FINDER_PAT_D = 3;
    RSSExpandedReader.FINDER_PAT_E = 4;
    RSSExpandedReader.FINDER_PAT_F = 5;
    RSSExpandedReader.FINDER_PATTERN_SEQUENCES = [
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_C],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_F],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F],
      [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F]
    ];
    RSSExpandedReader.MAX_PAIRS = 11;
    class Pair extends DataCharacter {
      constructor(value, checksumPortion, finderPattern) {
        super(value, checksumPortion);
        this.count = 0;
        this.finderPattern = finderPattern;
      }
      getFinderPattern() {
        return this.finderPattern;
      }
      getCount() {
        return this.count;
      }
      incrementCount() {
        this.count++;
      }
    }
    class RSS14Reader extends AbstractRSSReader {
      constructor() {
        super(...arguments);
        this.possibleLeftPairs = [];
        this.possibleRightPairs = [];
      }
      decodeRow(rowNumber, row, hints) {
        const leftPair = this.decodePair(row, false, rowNumber, hints);
        RSS14Reader.addOrTally(this.possibleLeftPairs, leftPair);
        row.reverse();
        let rightPair = this.decodePair(row, true, rowNumber, hints);
        RSS14Reader.addOrTally(this.possibleRightPairs, rightPair);
        row.reverse();
        for (let left of this.possibleLeftPairs) {
          if (left.getCount() > 1) {
            for (let right of this.possibleRightPairs) {
              if (right.getCount() > 1 && RSS14Reader.checkChecksum(left, right)) {
                return RSS14Reader.constructResult(left, right);
              }
            }
          }
        }
        throw new NotFoundException();
      }
      static addOrTally(possiblePairs, pair) {
        if (pair == null) {
          return;
        }
        let found = false;
        for (let other of possiblePairs) {
          if (other.getValue() === pair.getValue()) {
            other.incrementCount();
            found = true;
            break;
          }
        }
        if (!found) {
          possiblePairs.push(pair);
        }
      }
      reset() {
        this.possibleLeftPairs.length = 0;
        this.possibleRightPairs.length = 0;
      }
      static constructResult(leftPair, rightPair) {
        let symbolValue = 4537077 * leftPair.getValue() + rightPair.getValue();
        let text = new String(symbolValue).toString();
        let buffer = new StringBuilder();
        for (let i = 13 - text.length; i > 0; i--) {
          buffer.append("0");
        }
        buffer.append(text);
        let checkDigit = 0;
        for (let i = 0; i < 13; i++) {
          let digit = buffer.charAt(i).charCodeAt(0) - "0".charCodeAt(0);
          checkDigit += (i & 1) === 0 ? 3 * digit : digit;
        }
        checkDigit = 10 - checkDigit % 10;
        if (checkDigit === 10) {
          checkDigit = 0;
        }
        buffer.append(checkDigit.toString());
        let leftPoints = leftPair.getFinderPattern().getResultPoints();
        let rightPoints = rightPair.getFinderPattern().getResultPoints();
        return new Result(buffer.toString(), null, 0, [leftPoints[0], leftPoints[1], rightPoints[0], rightPoints[1]], BarcodeFormat$1.RSS_14, new Date().getTime());
      }
      static checkChecksum(leftPair, rightPair) {
        let checkValue = (leftPair.getChecksumPortion() + 16 * rightPair.getChecksumPortion()) % 79;
        let targetCheckValue = 9 * leftPair.getFinderPattern().getValue() + rightPair.getFinderPattern().getValue();
        if (targetCheckValue > 72) {
          targetCheckValue--;
        }
        if (targetCheckValue > 8) {
          targetCheckValue--;
        }
        return checkValue === targetCheckValue;
      }
      decodePair(row, right, rowNumber, hints) {
        try {
          let startEnd = this.findFinderPattern(row, right);
          let pattern = this.parseFoundFinderPattern(row, rowNumber, right, startEnd);
          let resultPointCallback = hints == null ? null : hints.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);
          if (resultPointCallback != null) {
            let center = (startEnd[0] + startEnd[1]) / 2;
            if (right) {
              center = row.getSize() - 1 - center;
            }
            resultPointCallback.foundPossibleResultPoint(new ResultPoint(center, rowNumber));
          }
          let outside = this.decodeDataCharacter(row, pattern, true);
          let inside = this.decodeDataCharacter(row, pattern, false);
          return new Pair(1597 * outside.getValue() + inside.getValue(), outside.getChecksumPortion() + 4 * inside.getChecksumPortion(), pattern);
        } catch (err) {
          return null;
        }
      }
      decodeDataCharacter(row, pattern, outsideChar) {
        let counters = this.getDataCharacterCounters();
        for (let x = 0; x < counters.length; x++) {
          counters[x] = 0;
        }
        if (outsideChar) {
          OneDReader.recordPatternInReverse(row, pattern.getStartEnd()[0], counters);
        } else {
          OneDReader.recordPattern(row, pattern.getStartEnd()[1] + 1, counters);
          for (let i = 0, j = counters.length - 1; i < j; i++, j--) {
            let temp = counters[i];
            counters[i] = counters[j];
            counters[j] = temp;
          }
        }
        let numModules = outsideChar ? 16 : 15;
        let elementWidth = MathUtils.sum(new Int32Array(counters)) / numModules;
        let oddCounts = this.getOddCounts();
        let evenCounts = this.getEvenCounts();
        let oddRoundingErrors = this.getOddRoundingErrors();
        let evenRoundingErrors = this.getEvenRoundingErrors();
        for (let i = 0; i < counters.length; i++) {
          let value = counters[i] / elementWidth;
          let count = Math.floor(value + 0.5);
          if (count < 1) {
            count = 1;
          } else if (count > 8) {
            count = 8;
          }
          let offset = Math.floor(i / 2);
          if ((i & 1) === 0) {
            oddCounts[offset] = count;
            oddRoundingErrors[offset] = value - count;
          } else {
            evenCounts[offset] = count;
            evenRoundingErrors[offset] = value - count;
          }
        }
        this.adjustOddEvenCounts(outsideChar, numModules);
        let oddSum = 0;
        let oddChecksumPortion = 0;
        for (let i = oddCounts.length - 1; i >= 0; i--) {
          oddChecksumPortion *= 9;
          oddChecksumPortion += oddCounts[i];
          oddSum += oddCounts[i];
        }
        let evenChecksumPortion = 0;
        let evenSum = 0;
        for (let i = evenCounts.length - 1; i >= 0; i--) {
          evenChecksumPortion *= 9;
          evenChecksumPortion += evenCounts[i];
          evenSum += evenCounts[i];
        }
        let checksumPortion = oddChecksumPortion + 3 * evenChecksumPortion;
        if (outsideChar) {
          if ((oddSum & 1) !== 0 || oddSum > 12 || oddSum < 4) {
            throw new NotFoundException();
          }
          let group = (12 - oddSum) / 2;
          let oddWidest = RSS14Reader.OUTSIDE_ODD_WIDEST[group];
          let evenWidest = 9 - oddWidest;
          let vOdd = RSSUtils.getRSSvalue(oddCounts, oddWidest, false);
          let vEven = RSSUtils.getRSSvalue(evenCounts, evenWidest, true);
          let tEven = RSS14Reader.OUTSIDE_EVEN_TOTAL_SUBSET[group];
          let gSum = RSS14Reader.OUTSIDE_GSUM[group];
          return new DataCharacter(vOdd * tEven + vEven + gSum, checksumPortion);
        } else {
          if ((evenSum & 1) !== 0 || evenSum > 10 || evenSum < 4) {
            throw new NotFoundException();
          }
          let group = (10 - evenSum) / 2;
          let oddWidest = RSS14Reader.INSIDE_ODD_WIDEST[group];
          let evenWidest = 9 - oddWidest;
          let vOdd = RSSUtils.getRSSvalue(oddCounts, oddWidest, true);
          let vEven = RSSUtils.getRSSvalue(evenCounts, evenWidest, false);
          let tOdd = RSS14Reader.INSIDE_ODD_TOTAL_SUBSET[group];
          let gSum = RSS14Reader.INSIDE_GSUM[group];
          return new DataCharacter(vEven * tOdd + vOdd + gSum, checksumPortion);
        }
      }
      findFinderPattern(row, rightFinderPattern) {
        let counters = this.getDecodeFinderCounters();
        counters[0] = 0;
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;
        let width = row.getSize();
        let isWhite = false;
        let rowOffset = 0;
        while (rowOffset < width) {
          isWhite = !row.get(rowOffset);
          if (rightFinderPattern === isWhite) {
            break;
          }
          rowOffset++;
        }
        let counterPosition = 0;
        let patternStart = rowOffset;
        for (let x = rowOffset; x < width; x++) {
          if (row.get(x) !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === 3) {
              if (AbstractRSSReader.isFinderPattern(counters)) {
                return [patternStart, x];
              }
              patternStart += counters[0] + counters[1];
              counters[0] = counters[2];
              counters[1] = counters[3];
              counters[2] = 0;
              counters[3] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        throw new NotFoundException();
      }
      parseFoundFinderPattern(row, rowNumber, right, startEnd) {
        let firstIsBlack = row.get(startEnd[0]);
        let firstElementStart = startEnd[0] - 1;
        while (firstElementStart >= 0 && firstIsBlack !== row.get(firstElementStart)) {
          firstElementStart--;
        }
        firstElementStart++;
        const firstCounter = startEnd[0] - firstElementStart;
        const counters = this.getDecodeFinderCounters();
        const copy = new Int32Array(counters.length);
        System.arraycopy(counters, 0, copy, 1, counters.length - 1);
        copy[0] = firstCounter;
        const value = this.parseFinderValue(copy, RSS14Reader.FINDER_PATTERNS);
        let start = firstElementStart;
        let end = startEnd[1];
        if (right) {
          start = row.getSize() - 1 - start;
          end = row.getSize() - 1 - end;
        }
        return new FinderPattern(value, [firstElementStart, startEnd[1]], start, end, rowNumber);
      }
      adjustOddEvenCounts(outsideChar, numModules) {
        let oddSum = MathUtils.sum(new Int32Array(this.getOddCounts()));
        let evenSum = MathUtils.sum(new Int32Array(this.getEvenCounts()));
        let incrementOdd = false;
        let decrementOdd = false;
        let incrementEven = false;
        let decrementEven = false;
        if (outsideChar) {
          if (oddSum > 12) {
            decrementOdd = true;
          } else if (oddSum < 4) {
            incrementOdd = true;
          }
          if (evenSum > 12) {
            decrementEven = true;
          } else if (evenSum < 4) {
            incrementEven = true;
          }
        } else {
          if (oddSum > 11) {
            decrementOdd = true;
          } else if (oddSum < 5) {
            incrementOdd = true;
          }
          if (evenSum > 10) {
            decrementEven = true;
          } else if (evenSum < 4) {
            incrementEven = true;
          }
        }
        let mismatch = oddSum + evenSum - numModules;
        let oddParityBad = (oddSum & 1) === (outsideChar ? 1 : 0);
        let evenParityBad = (evenSum & 1) === 1;
        if (mismatch === 1) {
          if (oddParityBad) {
            if (evenParityBad) {
              throw new NotFoundException();
            }
            decrementOdd = true;
          } else {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            decrementEven = true;
          }
        } else if (mismatch === -1) {
          if (oddParityBad) {
            if (evenParityBad) {
              throw new NotFoundException();
            }
            incrementOdd = true;
          } else {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            incrementEven = true;
          }
        } else if (mismatch === 0) {
          if (oddParityBad) {
            if (!evenParityBad) {
              throw new NotFoundException();
            }
            if (oddSum < evenSum) {
              incrementOdd = true;
              decrementEven = true;
            } else {
              decrementOdd = true;
              incrementEven = true;
            }
          } else {
            if (evenParityBad) {
              throw new NotFoundException();
            }
          }
        } else {
          throw new NotFoundException();
        }
        if (incrementOdd) {
          if (decrementOdd) {
            throw new NotFoundException();
          }
          AbstractRSSReader.increment(this.getOddCounts(), this.getOddRoundingErrors());
        }
        if (decrementOdd) {
          AbstractRSSReader.decrement(this.getOddCounts(), this.getOddRoundingErrors());
        }
        if (incrementEven) {
          if (decrementEven) {
            throw new NotFoundException();
          }
          AbstractRSSReader.increment(this.getEvenCounts(), this.getOddRoundingErrors());
        }
        if (decrementEven) {
          AbstractRSSReader.decrement(this.getEvenCounts(), this.getEvenRoundingErrors());
        }
      }
    }
    RSS14Reader.OUTSIDE_EVEN_TOTAL_SUBSET = [1, 10, 34, 70, 126];
    RSS14Reader.INSIDE_ODD_TOTAL_SUBSET = [4, 20, 48, 81];
    RSS14Reader.OUTSIDE_GSUM = [0, 161, 961, 2015, 2715];
    RSS14Reader.INSIDE_GSUM = [0, 336, 1036, 1516];
    RSS14Reader.OUTSIDE_ODD_WIDEST = [8, 6, 4, 3, 1];
    RSS14Reader.INSIDE_ODD_WIDEST = [2, 4, 6, 8];
    RSS14Reader.FINDER_PATTERNS = [
      Int32Array.from([3, 8, 2, 1]),
      Int32Array.from([3, 5, 5, 1]),
      Int32Array.from([3, 3, 7, 1]),
      Int32Array.from([3, 1, 9, 1]),
      Int32Array.from([2, 7, 4, 1]),
      Int32Array.from([2, 5, 6, 1]),
      Int32Array.from([2, 3, 8, 1]),
      Int32Array.from([1, 5, 7, 1]),
      Int32Array.from([1, 3, 9, 1])
    ];
    class MultiFormatOneDReader extends OneDReader {
      constructor(hints, verbose) {
        super();
        this.readers = [];
        this.verbose = verbose === true;
        const possibleFormats = !hints ? null : hints.get(DecodeHintType$1.POSSIBLE_FORMATS);
        const useCode39CheckDigit = hints && hints.get(DecodeHintType$1.ASSUME_CODE_39_CHECK_DIGIT) !== void 0;
        if (possibleFormats) {
          if (possibleFormats.includes(BarcodeFormat$1.EAN_13) || possibleFormats.includes(BarcodeFormat$1.UPC_A) || possibleFormats.includes(BarcodeFormat$1.EAN_8) || possibleFormats.includes(BarcodeFormat$1.UPC_E)) {
            this.readers.push(new MultiFormatUPCEANReader(hints));
          }
          if (possibleFormats.includes(BarcodeFormat$1.CODE_39)) {
            this.readers.push(new Code39Reader(useCode39CheckDigit));
          }
          if (possibleFormats.includes(BarcodeFormat$1.CODE_128)) {
            this.readers.push(new Code128Reader());
          }
          if (possibleFormats.includes(BarcodeFormat$1.ITF)) {
            this.readers.push(new ITFReader());
          }
          if (possibleFormats.includes(BarcodeFormat$1.RSS_14)) {
            this.readers.push(new RSS14Reader());
          }
          if (possibleFormats.includes(BarcodeFormat$1.RSS_EXPANDED)) {
            this.readers.push(new RSSExpandedReader(this.verbose));
          }
        } else {
          this.readers.push(new MultiFormatUPCEANReader(hints));
          this.readers.push(new Code39Reader());
          this.readers.push(new MultiFormatUPCEANReader(hints));
          this.readers.push(new Code128Reader());
          this.readers.push(new ITFReader());
          this.readers.push(new RSS14Reader());
          this.readers.push(new RSSExpandedReader(this.verbose));
        }
      }
      decodeRow(rowNumber, row, hints) {
        for (let i = 0; i < this.readers.length; i++) {
          try {
            return this.readers[i].decodeRow(rowNumber, row, hints);
          } catch (re) {
          }
        }
        throw new NotFoundException();
      }
      reset() {
        this.readers.forEach((reader) => reader.reset());
      }
    }
    class BrowserBarcodeReader extends BrowserCodeReader {
      constructor(timeBetweenScansMillis = 500, hints) {
        super(new MultiFormatOneDReader(hints), timeBetweenScansMillis, hints);
      }
    }
    class ECBlocks {
      constructor(ecCodewords, ecBlocks1, ecBlocks2) {
        this.ecCodewords = ecCodewords;
        this.ecBlocks = [ecBlocks1];
        ecBlocks2 && this.ecBlocks.push(ecBlocks2);
      }
      getECCodewords() {
        return this.ecCodewords;
      }
      getECBlocks() {
        return this.ecBlocks;
      }
    }
    class ECB {
      constructor(count, dataCodewords) {
        this.count = count;
        this.dataCodewords = dataCodewords;
      }
      getCount() {
        return this.count;
      }
      getDataCodewords() {
        return this.dataCodewords;
      }
    }
    class Version {
      constructor(versionNumber, symbolSizeRows, symbolSizeColumns, dataRegionSizeRows, dataRegionSizeColumns, ecBlocks) {
        this.versionNumber = versionNumber;
        this.symbolSizeRows = symbolSizeRows;
        this.symbolSizeColumns = symbolSizeColumns;
        this.dataRegionSizeRows = dataRegionSizeRows;
        this.dataRegionSizeColumns = dataRegionSizeColumns;
        this.ecBlocks = ecBlocks;
        let total = 0;
        const ecCodewords = ecBlocks.getECCodewords();
        const ecbArray = ecBlocks.getECBlocks();
        for (let ecBlock of ecbArray) {
          total += ecBlock.getCount() * (ecBlock.getDataCodewords() + ecCodewords);
        }
        this.totalCodewords = total;
      }
      getVersionNumber() {
        return this.versionNumber;
      }
      getSymbolSizeRows() {
        return this.symbolSizeRows;
      }
      getSymbolSizeColumns() {
        return this.symbolSizeColumns;
      }
      getDataRegionSizeRows() {
        return this.dataRegionSizeRows;
      }
      getDataRegionSizeColumns() {
        return this.dataRegionSizeColumns;
      }
      getTotalCodewords() {
        return this.totalCodewords;
      }
      getECBlocks() {
        return this.ecBlocks;
      }
      static getVersionForDimensions(numRows, numColumns) {
        if ((numRows & 1) !== 0 || (numColumns & 1) !== 0) {
          throw new FormatException();
        }
        for (let version of Version.VERSIONS) {
          if (version.symbolSizeRows === numRows && version.symbolSizeColumns === numColumns) {
            return version;
          }
        }
        throw new FormatException();
      }
      toString() {
        return "" + this.versionNumber;
      }
      static buildVersions() {
        return [
          new Version(1, 10, 10, 8, 8, new ECBlocks(5, new ECB(1, 3))),
          new Version(2, 12, 12, 10, 10, new ECBlocks(7, new ECB(1, 5))),
          new Version(3, 14, 14, 12, 12, new ECBlocks(10, new ECB(1, 8))),
          new Version(4, 16, 16, 14, 14, new ECBlocks(12, new ECB(1, 12))),
          new Version(5, 18, 18, 16, 16, new ECBlocks(14, new ECB(1, 18))),
          new Version(6, 20, 20, 18, 18, new ECBlocks(18, new ECB(1, 22))),
          new Version(7, 22, 22, 20, 20, new ECBlocks(20, new ECB(1, 30))),
          new Version(8, 24, 24, 22, 22, new ECBlocks(24, new ECB(1, 36))),
          new Version(9, 26, 26, 24, 24, new ECBlocks(28, new ECB(1, 44))),
          new Version(10, 32, 32, 14, 14, new ECBlocks(36, new ECB(1, 62))),
          new Version(11, 36, 36, 16, 16, new ECBlocks(42, new ECB(1, 86))),
          new Version(12, 40, 40, 18, 18, new ECBlocks(48, new ECB(1, 114))),
          new Version(13, 44, 44, 20, 20, new ECBlocks(56, new ECB(1, 144))),
          new Version(14, 48, 48, 22, 22, new ECBlocks(68, new ECB(1, 174))),
          new Version(15, 52, 52, 24, 24, new ECBlocks(42, new ECB(2, 102))),
          new Version(16, 64, 64, 14, 14, new ECBlocks(56, new ECB(2, 140))),
          new Version(17, 72, 72, 16, 16, new ECBlocks(36, new ECB(4, 92))),
          new Version(18, 80, 80, 18, 18, new ECBlocks(48, new ECB(4, 114))),
          new Version(19, 88, 88, 20, 20, new ECBlocks(56, new ECB(4, 144))),
          new Version(20, 96, 96, 22, 22, new ECBlocks(68, new ECB(4, 174))),
          new Version(21, 104, 104, 24, 24, new ECBlocks(56, new ECB(6, 136))),
          new Version(22, 120, 120, 18, 18, new ECBlocks(68, new ECB(6, 175))),
          new Version(23, 132, 132, 20, 20, new ECBlocks(62, new ECB(8, 163))),
          new Version(24, 144, 144, 22, 22, new ECBlocks(62, new ECB(8, 156), new ECB(2, 155))),
          new Version(25, 8, 18, 6, 16, new ECBlocks(7, new ECB(1, 5))),
          new Version(26, 8, 32, 6, 14, new ECBlocks(11, new ECB(1, 10))),
          new Version(27, 12, 26, 10, 24, new ECBlocks(14, new ECB(1, 16))),
          new Version(28, 12, 36, 10, 16, new ECBlocks(18, new ECB(1, 22))),
          new Version(29, 16, 36, 14, 16, new ECBlocks(24, new ECB(1, 32))),
          new Version(30, 16, 48, 14, 22, new ECBlocks(28, new ECB(1, 49)))
        ];
      }
    }
    Version.VERSIONS = Version.buildVersions();
    class BitMatrixParser {
      constructor(bitMatrix) {
        const dimension = bitMatrix.getHeight();
        if (dimension < 8 || dimension > 144 || (dimension & 1) !== 0) {
          throw new FormatException();
        }
        this.version = BitMatrixParser.readVersion(bitMatrix);
        this.mappingBitMatrix = this.extractDataRegion(bitMatrix);
        this.readMappingMatrix = new BitMatrix(this.mappingBitMatrix.getWidth(), this.mappingBitMatrix.getHeight());
      }
      getVersion() {
        return this.version;
      }
      static readVersion(bitMatrix) {
        const numRows = bitMatrix.getHeight();
        const numColumns = bitMatrix.getWidth();
        return Version.getVersionForDimensions(numRows, numColumns);
      }
      readCodewords() {
        const result = new Int8Array(this.version.getTotalCodewords());
        let resultOffset = 0;
        let row = 4;
        let column = 0;
        const numRows = this.mappingBitMatrix.getHeight();
        const numColumns = this.mappingBitMatrix.getWidth();
        let corner1Read = false;
        let corner2Read = false;
        let corner3Read = false;
        let corner4Read = false;
        do {
          if (row === numRows && column === 0 && !corner1Read) {
            result[resultOffset++] = this.readCorner1(numRows, numColumns) & 255;
            row -= 2;
            column += 2;
            corner1Read = true;
          } else if (row === numRows - 2 && column === 0 && (numColumns & 3) !== 0 && !corner2Read) {
            result[resultOffset++] = this.readCorner2(numRows, numColumns) & 255;
            row -= 2;
            column += 2;
            corner2Read = true;
          } else if (row === numRows + 4 && column === 2 && (numColumns & 7) === 0 && !corner3Read) {
            result[resultOffset++] = this.readCorner3(numRows, numColumns) & 255;
            row -= 2;
            column += 2;
            corner3Read = true;
          } else if (row === numRows - 2 && column === 0 && (numColumns & 7) === 4 && !corner4Read) {
            result[resultOffset++] = this.readCorner4(numRows, numColumns) & 255;
            row -= 2;
            column += 2;
            corner4Read = true;
          } else {
            do {
              if (row < numRows && column >= 0 && !this.readMappingMatrix.get(column, row)) {
                result[resultOffset++] = this.readUtah(row, column, numRows, numColumns) & 255;
              }
              row -= 2;
              column += 2;
            } while (row >= 0 && column < numColumns);
            row += 1;
            column += 3;
            do {
              if (row >= 0 && column < numColumns && !this.readMappingMatrix.get(column, row)) {
                result[resultOffset++] = this.readUtah(row, column, numRows, numColumns) & 255;
              }
              row += 2;
              column -= 2;
            } while (row < numRows && column >= 0);
            row += 3;
            column += 1;
          }
        } while (row < numRows || column < numColumns);
        if (resultOffset !== this.version.getTotalCodewords()) {
          throw new FormatException();
        }
        return result;
      }
      readModule(row, column, numRows, numColumns) {
        if (row < 0) {
          row += numRows;
          column += 4 - (numRows + 4 & 7);
        }
        if (column < 0) {
          column += numColumns;
          row += 4 - (numColumns + 4 & 7);
        }
        this.readMappingMatrix.set(column, row);
        return this.mappingBitMatrix.get(column, row);
      }
      readUtah(row, column, numRows, numColumns) {
        let currentByte = 0;
        if (this.readModule(row - 2, column - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row - 2, column - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row - 1, column - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row - 1, column - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row - 1, column, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row, column - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row, column - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(row, column, numRows, numColumns)) {
          currentByte |= 1;
        }
        return currentByte;
      }
      readCorner1(numRows, numColumns) {
        let currentByte = 0;
        if (this.readModule(numRows - 1, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 1, 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 1, 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(2, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(3, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        return currentByte;
      }
      readCorner2(numRows, numColumns) {
        let currentByte = 0;
        if (this.readModule(numRows - 3, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 2, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 1, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 4, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 3, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        return currentByte;
      }
      readCorner3(numRows, numColumns) {
        let currentByte = 0;
        if (this.readModule(numRows - 1, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 1, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 3, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 3, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        return currentByte;
      }
      readCorner4(numRows, numColumns) {
        let currentByte = 0;
        if (this.readModule(numRows - 3, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 2, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(numRows - 1, 0, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 2, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(0, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(1, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(2, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        currentByte <<= 1;
        if (this.readModule(3, numColumns - 1, numRows, numColumns)) {
          currentByte |= 1;
        }
        return currentByte;
      }
      extractDataRegion(bitMatrix) {
        const symbolSizeRows = this.version.getSymbolSizeRows();
        const symbolSizeColumns = this.version.getSymbolSizeColumns();
        if (bitMatrix.getHeight() !== symbolSizeRows) {
          throw new IllegalArgumentException("Dimension of bitMatrix must match the version size");
        }
        const dataRegionSizeRows = this.version.getDataRegionSizeRows();
        const dataRegionSizeColumns = this.version.getDataRegionSizeColumns();
        const numDataRegionsRow = symbolSizeRows / dataRegionSizeRows | 0;
        const numDataRegionsColumn = symbolSizeColumns / dataRegionSizeColumns | 0;
        const sizeDataRegionRow = numDataRegionsRow * dataRegionSizeRows;
        const sizeDataRegionColumn = numDataRegionsColumn * dataRegionSizeColumns;
        const bitMatrixWithoutAlignment = new BitMatrix(sizeDataRegionColumn, sizeDataRegionRow);
        for (let dataRegionRow = 0; dataRegionRow < numDataRegionsRow; ++dataRegionRow) {
          const dataRegionRowOffset = dataRegionRow * dataRegionSizeRows;
          for (let dataRegionColumn = 0; dataRegionColumn < numDataRegionsColumn; ++dataRegionColumn) {
            const dataRegionColumnOffset = dataRegionColumn * dataRegionSizeColumns;
            for (let i = 0; i < dataRegionSizeRows; ++i) {
              const readRowOffset = dataRegionRow * (dataRegionSizeRows + 2) + 1 + i;
              const writeRowOffset = dataRegionRowOffset + i;
              for (let j = 0; j < dataRegionSizeColumns; ++j) {
                const readColumnOffset = dataRegionColumn * (dataRegionSizeColumns + 2) + 1 + j;
                if (bitMatrix.get(readColumnOffset, readRowOffset)) {
                  const writeColumnOffset = dataRegionColumnOffset + j;
                  bitMatrixWithoutAlignment.set(writeColumnOffset, writeRowOffset);
                }
              }
            }
          }
        }
        return bitMatrixWithoutAlignment;
      }
    }
    class DataBlock {
      constructor(numDataCodewords, codewords) {
        this.numDataCodewords = numDataCodewords;
        this.codewords = codewords;
      }
      static getDataBlocks(rawCodewords, version) {
        const ecBlocks = version.getECBlocks();
        let totalBlocks = 0;
        const ecBlockArray = ecBlocks.getECBlocks();
        for (let ecBlock of ecBlockArray) {
          totalBlocks += ecBlock.getCount();
        }
        const result = new Array(totalBlocks);
        let numResultBlocks = 0;
        for (let ecBlock of ecBlockArray) {
          for (let i = 0; i < ecBlock.getCount(); i++) {
            const numDataCodewords = ecBlock.getDataCodewords();
            const numBlockCodewords = ecBlocks.getECCodewords() + numDataCodewords;
            result[numResultBlocks++] = new DataBlock(numDataCodewords, new Uint8Array(numBlockCodewords));
          }
        }
        const longerBlocksTotalCodewords = result[0].codewords.length;
        const longerBlocksNumDataCodewords = longerBlocksTotalCodewords - ecBlocks.getECCodewords();
        const shorterBlocksNumDataCodewords = longerBlocksNumDataCodewords - 1;
        let rawCodewordsOffset = 0;
        for (let i = 0; i < shorterBlocksNumDataCodewords; i++) {
          for (let j = 0; j < numResultBlocks; j++) {
            result[j].codewords[i] = rawCodewords[rawCodewordsOffset++];
          }
        }
        const specialVersion = version.getVersionNumber() === 24;
        const numLongerBlocks = specialVersion ? 8 : numResultBlocks;
        for (let j = 0; j < numLongerBlocks; j++) {
          result[j].codewords[longerBlocksNumDataCodewords - 1] = rawCodewords[rawCodewordsOffset++];
        }
        const max = result[0].codewords.length;
        for (let i = longerBlocksNumDataCodewords; i < max; i++) {
          for (let j = 0; j < numResultBlocks; j++) {
            const jOffset = specialVersion ? (j + 8) % numResultBlocks : j;
            const iOffset = specialVersion && jOffset > 7 ? i - 1 : i;
            result[jOffset].codewords[iOffset] = rawCodewords[rawCodewordsOffset++];
          }
        }
        if (rawCodewordsOffset !== rawCodewords.length) {
          throw new IllegalArgumentException();
        }
        return result;
      }
      getNumDataCodewords() {
        return this.numDataCodewords;
      }
      getCodewords() {
        return this.codewords;
      }
    }
    class BitSource {
      constructor(bytes) {
        this.bytes = bytes;
        this.byteOffset = 0;
        this.bitOffset = 0;
      }
      getBitOffset() {
        return this.bitOffset;
      }
      getByteOffset() {
        return this.byteOffset;
      }
      readBits(numBits) {
        if (numBits < 1 || numBits > 32 || numBits > this.available()) {
          throw new IllegalArgumentException("" + numBits);
        }
        let result = 0;
        let bitOffset = this.bitOffset;
        let byteOffset = this.byteOffset;
        const bytes = this.bytes;
        if (bitOffset > 0) {
          const bitsLeft = 8 - bitOffset;
          const toRead = numBits < bitsLeft ? numBits : bitsLeft;
          const bitsToNotRead = bitsLeft - toRead;
          const mask = 255 >> 8 - toRead << bitsToNotRead;
          result = (bytes[byteOffset] & mask) >> bitsToNotRead;
          numBits -= toRead;
          bitOffset += toRead;
          if (bitOffset === 8) {
            bitOffset = 0;
            byteOffset++;
          }
        }
        if (numBits > 0) {
          while (numBits >= 8) {
            result = result << 8 | bytes[byteOffset] & 255;
            byteOffset++;
            numBits -= 8;
          }
          if (numBits > 0) {
            const bitsToNotRead = 8 - numBits;
            const mask = 255 >> bitsToNotRead << bitsToNotRead;
            result = result << numBits | (bytes[byteOffset] & mask) >> bitsToNotRead;
            bitOffset += numBits;
          }
        }
        this.bitOffset = bitOffset;
        this.byteOffset = byteOffset;
        return result;
      }
      available() {
        return 8 * (this.bytes.length - this.byteOffset) - this.bitOffset;
      }
    }
    var Mode;
    (function(Mode2) {
      Mode2[Mode2["PAD_ENCODE"] = 0] = "PAD_ENCODE";
      Mode2[Mode2["ASCII_ENCODE"] = 1] = "ASCII_ENCODE";
      Mode2[Mode2["C40_ENCODE"] = 2] = "C40_ENCODE";
      Mode2[Mode2["TEXT_ENCODE"] = 3] = "TEXT_ENCODE";
      Mode2[Mode2["ANSIX12_ENCODE"] = 4] = "ANSIX12_ENCODE";
      Mode2[Mode2["EDIFACT_ENCODE"] = 5] = "EDIFACT_ENCODE";
      Mode2[Mode2["BASE256_ENCODE"] = 6] = "BASE256_ENCODE";
    })(Mode || (Mode = {}));
    class DecodedBitStreamParser {
      static decode(bytes) {
        const bits = new BitSource(bytes);
        const result = new StringBuilder();
        const resultTrailer = new StringBuilder();
        const byteSegments = new Array();
        let mode = Mode.ASCII_ENCODE;
        do {
          if (mode === Mode.ASCII_ENCODE) {
            mode = this.decodeAsciiSegment(bits, result, resultTrailer);
          } else {
            switch (mode) {
              case Mode.C40_ENCODE:
                this.decodeC40Segment(bits, result);
                break;
              case Mode.TEXT_ENCODE:
                this.decodeTextSegment(bits, result);
                break;
              case Mode.ANSIX12_ENCODE:
                this.decodeAnsiX12Segment(bits, result);
                break;
              case Mode.EDIFACT_ENCODE:
                this.decodeEdifactSegment(bits, result);
                break;
              case Mode.BASE256_ENCODE:
                this.decodeBase256Segment(bits, result, byteSegments);
                break;
              default:
                throw new FormatException();
            }
            mode = Mode.ASCII_ENCODE;
          }
        } while (mode !== Mode.PAD_ENCODE && bits.available() > 0);
        if (resultTrailer.length() > 0) {
          result.append(resultTrailer.toString());
        }
        return new DecoderResult(bytes, result.toString(), byteSegments.length === 0 ? null : byteSegments, null);
      }
      static decodeAsciiSegment(bits, result, resultTrailer) {
        let upperShift = false;
        do {
          let oneByte = bits.readBits(8);
          if (oneByte === 0) {
            throw new FormatException();
          } else if (oneByte <= 128) {
            if (upperShift) {
              oneByte += 128;
            }
            result.append(String.fromCharCode(oneByte - 1));
            return Mode.ASCII_ENCODE;
          } else if (oneByte === 129) {
            return Mode.PAD_ENCODE;
          } else if (oneByte <= 229) {
            const value = oneByte - 130;
            if (value < 10) {
              result.append("0");
            }
            result.append("" + value);
          } else {
            switch (oneByte) {
              case 230:
                return Mode.C40_ENCODE;
              case 231:
                return Mode.BASE256_ENCODE;
              case 232:
                result.append(String.fromCharCode(29));
                break;
              case 233:
              case 234:
                break;
              case 235:
                upperShift = true;
                break;
              case 236:
                result.append("[)>05");
                resultTrailer.insert(0, "");
                break;
              case 237:
                result.append("[)>06");
                resultTrailer.insert(0, "");
                break;
              case 238:
                return Mode.ANSIX12_ENCODE;
              case 239:
                return Mode.TEXT_ENCODE;
              case 240:
                return Mode.EDIFACT_ENCODE;
              case 241:
                break;
              default:
                if (oneByte !== 254 || bits.available() !== 0) {
                  throw new FormatException();
                }
                break;
            }
          }
        } while (bits.available() > 0);
        return Mode.ASCII_ENCODE;
      }
      static decodeC40Segment(bits, result) {
        let upperShift = false;
        const cValues = [];
        let shift = 0;
        do {
          if (bits.available() === 8) {
            return;
          }
          const firstByte = bits.readBits(8);
          if (firstByte === 254) {
            return;
          }
          this.parseTwoBytes(firstByte, bits.readBits(8), cValues);
          for (let i = 0; i < 3; i++) {
            const cValue = cValues[i];
            switch (shift) {
              case 0:
                if (cValue < 3) {
                  shift = cValue + 1;
                } else if (cValue < this.C40_BASIC_SET_CHARS.length) {
                  const c40char = this.C40_BASIC_SET_CHARS[cValue];
                  if (upperShift) {
                    result.append(String.fromCharCode(c40char.charCodeAt(0) + 128));
                    upperShift = false;
                  } else {
                    result.append(c40char);
                  }
                } else {
                  throw new FormatException();
                }
                break;
              case 1:
                if (upperShift) {
                  result.append(String.fromCharCode(cValue + 128));
                  upperShift = false;
                } else {
                  result.append(String.fromCharCode(cValue));
                }
                shift = 0;
                break;
              case 2:
                if (cValue < this.C40_SHIFT2_SET_CHARS.length) {
                  const c40char = this.C40_SHIFT2_SET_CHARS[cValue];
                  if (upperShift) {
                    result.append(String.fromCharCode(c40char.charCodeAt(0) + 128));
                    upperShift = false;
                  } else {
                    result.append(c40char);
                  }
                } else {
                  switch (cValue) {
                    case 27:
                      result.append(String.fromCharCode(29));
                      break;
                    case 30:
                      upperShift = true;
                      break;
                    default:
                      throw new FormatException();
                  }
                }
                shift = 0;
                break;
              case 3:
                if (upperShift) {
                  result.append(String.fromCharCode(cValue + 224));
                  upperShift = false;
                } else {
                  result.append(String.fromCharCode(cValue + 96));
                }
                shift = 0;
                break;
              default:
                throw new FormatException();
            }
          }
        } while (bits.available() > 0);
      }
      static decodeTextSegment(bits, result) {
        let upperShift = false;
        let cValues = [];
        let shift = 0;
        do {
          if (bits.available() === 8) {
            return;
          }
          const firstByte = bits.readBits(8);
          if (firstByte === 254) {
            return;
          }
          this.parseTwoBytes(firstByte, bits.readBits(8), cValues);
          for (let i = 0; i < 3; i++) {
            const cValue = cValues[i];
            switch (shift) {
              case 0:
                if (cValue < 3) {
                  shift = cValue + 1;
                } else if (cValue < this.TEXT_BASIC_SET_CHARS.length) {
                  const textChar = this.TEXT_BASIC_SET_CHARS[cValue];
                  if (upperShift) {
                    result.append(String.fromCharCode(textChar.charCodeAt(0) + 128));
                    upperShift = false;
                  } else {
                    result.append(textChar);
                  }
                } else {
                  throw new FormatException();
                }
                break;
              case 1:
                if (upperShift) {
                  result.append(String.fromCharCode(cValue + 128));
                  upperShift = false;
                } else {
                  result.append(String.fromCharCode(cValue));
                }
                shift = 0;
                break;
              case 2:
                if (cValue < this.TEXT_SHIFT2_SET_CHARS.length) {
                  const textChar = this.TEXT_SHIFT2_SET_CHARS[cValue];
                  if (upperShift) {
                    result.append(String.fromCharCode(textChar.charCodeAt(0) + 128));
                    upperShift = false;
                  } else {
                    result.append(textChar);
                  }
                } else {
                  switch (cValue) {
                    case 27:
                      result.append(String.fromCharCode(29));
                      break;
                    case 30:
                      upperShift = true;
                      break;
                    default:
                      throw new FormatException();
                  }
                }
                shift = 0;
                break;
              case 3:
                if (cValue < this.TEXT_SHIFT3_SET_CHARS.length) {
                  const textChar = this.TEXT_SHIFT3_SET_CHARS[cValue];
                  if (upperShift) {
                    result.append(String.fromCharCode(textChar.charCodeAt(0) + 128));
                    upperShift = false;
                  } else {
                    result.append(textChar);
                  }
                  shift = 0;
                } else {
                  throw new FormatException();
                }
                break;
              default:
                throw new FormatException();
            }
          }
        } while (bits.available() > 0);
      }
      static decodeAnsiX12Segment(bits, result) {
        const cValues = [];
        do {
          if (bits.available() === 8) {
            return;
          }
          const firstByte = bits.readBits(8);
          if (firstByte === 254) {
            return;
          }
          this.parseTwoBytes(firstByte, bits.readBits(8), cValues);
          for (let i = 0; i < 3; i++) {
            const cValue = cValues[i];
            switch (cValue) {
              case 0:
                result.append("\r");
                break;
              case 1:
                result.append("*");
                break;
              case 2:
                result.append(">");
                break;
              case 3:
                result.append(" ");
                break;
              default:
                if (cValue < 14) {
                  result.append(String.fromCharCode(cValue + 44));
                } else if (cValue < 40) {
                  result.append(String.fromCharCode(cValue + 51));
                } else {
                  throw new FormatException();
                }
                break;
            }
          }
        } while (bits.available() > 0);
      }
      static parseTwoBytes(firstByte, secondByte, result) {
        let fullBitValue = (firstByte << 8) + secondByte - 1;
        let temp = Math.floor(fullBitValue / 1600);
        result[0] = temp;
        fullBitValue -= temp * 1600;
        temp = Math.floor(fullBitValue / 40);
        result[1] = temp;
        result[2] = fullBitValue - temp * 40;
      }
      static decodeEdifactSegment(bits, result) {
        do {
          if (bits.available() <= 16) {
            return;
          }
          for (let i = 0; i < 4; i++) {
            let edifactValue = bits.readBits(6);
            if (edifactValue === 31) {
              const bitsLeft = 8 - bits.getBitOffset();
              if (bitsLeft !== 8) {
                bits.readBits(bitsLeft);
              }
              return;
            }
            if ((edifactValue & 32) === 0) {
              edifactValue |= 64;
            }
            result.append(String.fromCharCode(edifactValue));
          }
        } while (bits.available() > 0);
      }
      static decodeBase256Segment(bits, result, byteSegments) {
        let codewordPosition = 1 + bits.getByteOffset();
        const d1 = this.unrandomize255State(bits.readBits(8), codewordPosition++);
        let count;
        if (d1 === 0) {
          count = bits.available() / 8 | 0;
        } else if (d1 < 250) {
          count = d1;
        } else {
          count = 250 * (d1 - 249) + this.unrandomize255State(bits.readBits(8), codewordPosition++);
        }
        if (count < 0) {
          throw new FormatException();
        }
        const bytes = new Uint8Array(count);
        for (let i = 0; i < count; i++) {
          if (bits.available() < 8) {
            throw new FormatException();
          }
          bytes[i] = this.unrandomize255State(bits.readBits(8), codewordPosition++);
        }
        byteSegments.push(bytes);
        try {
          result.append(StringEncoding.decode(bytes, StringUtils.ISO88591));
        } catch (uee) {
          throw new IllegalStateException("Platform does not support required encoding: " + uee.message);
        }
      }
      static unrandomize255State(randomizedBase256Codeword, base256CodewordPosition) {
        const pseudoRandomNumber = 149 * base256CodewordPosition % 255 + 1;
        const tempVariable = randomizedBase256Codeword - pseudoRandomNumber;
        return tempVariable >= 0 ? tempVariable : tempVariable + 256;
      }
    }
    DecodedBitStreamParser.C40_BASIC_SET_CHARS = [
      "*",
      "*",
      "*",
      " ",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z"
    ];
    DecodedBitStreamParser.C40_SHIFT2_SET_CHARS = [
      "!",
      '"',
      "#",
      "$",
      "%",
      "&",
      "'",
      "(",
      ")",
      "*",
      "+",
      ",",
      "-",
      ".",
      "/",
      ":",
      ";",
      "<",
      "=",
      ">",
      "?",
      "@",
      "[",
      "\\",
      "]",
      "^",
      "_"
    ];
    DecodedBitStreamParser.TEXT_BASIC_SET_CHARS = [
      "*",
      "*",
      "*",
      " ",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z"
    ];
    DecodedBitStreamParser.TEXT_SHIFT2_SET_CHARS = DecodedBitStreamParser.C40_SHIFT2_SET_CHARS;
    DecodedBitStreamParser.TEXT_SHIFT3_SET_CHARS = [
      "`",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "{",
      "|",
      "}",
      "~",
      String.fromCharCode(127)
    ];
    class Decoder$1 {
      constructor() {
        this.rsDecoder = new ReedSolomonDecoder(GenericGF.DATA_MATRIX_FIELD_256);
      }
      decode(bits) {
        const parser = new BitMatrixParser(bits);
        const version = parser.getVersion();
        const codewords = parser.readCodewords();
        const dataBlocks = DataBlock.getDataBlocks(codewords, version);
        let totalBytes = 0;
        for (let db of dataBlocks) {
          totalBytes += db.getNumDataCodewords();
        }
        const resultBytes = new Uint8Array(totalBytes);
        const dataBlocksCount = dataBlocks.length;
        for (let j = 0; j < dataBlocksCount; j++) {
          const dataBlock = dataBlocks[j];
          const codewordBytes = dataBlock.getCodewords();
          const numDataCodewords = dataBlock.getNumDataCodewords();
          this.correctErrors(codewordBytes, numDataCodewords);
          for (let i = 0; i < numDataCodewords; i++) {
            resultBytes[i * dataBlocksCount + j] = codewordBytes[i];
          }
        }
        return DecodedBitStreamParser.decode(resultBytes);
      }
      correctErrors(codewordBytes, numDataCodewords) {
        const codewordsInts = new Int32Array(codewordBytes);
        try {
          this.rsDecoder.decode(codewordsInts, codewordBytes.length - numDataCodewords);
        } catch (ignored) {
          throw new ChecksumException();
        }
        for (let i = 0; i < numDataCodewords; i++) {
          codewordBytes[i] = codewordsInts[i];
        }
      }
    }
    class Detector$1 {
      constructor(image) {
        this.image = image;
        this.rectangleDetector = new WhiteRectangleDetector(this.image);
      }
      detect() {
        const cornerPoints = this.rectangleDetector.detect();
        let points = this.detectSolid1(cornerPoints);
        points = this.detectSolid2(points);
        points[3] = this.correctTopRight(points);
        if (!points[3]) {
          throw new NotFoundException();
        }
        points = this.shiftToModuleCenter(points);
        const topLeft = points[0];
        const bottomLeft = points[1];
        const bottomRight = points[2];
        const topRight = points[3];
        let dimensionTop = this.transitionsBetween(topLeft, topRight) + 1;
        let dimensionRight = this.transitionsBetween(bottomRight, topRight) + 1;
        if ((dimensionTop & 1) === 1) {
          dimensionTop += 1;
        }
        if ((dimensionRight & 1) === 1) {
          dimensionRight += 1;
        }
        if (4 * dimensionTop < 7 * dimensionRight && 4 * dimensionRight < 7 * dimensionTop) {
          dimensionTop = dimensionRight = Math.max(dimensionTop, dimensionRight);
        }
        let bits = Detector$1.sampleGrid(this.image, topLeft, bottomLeft, bottomRight, topRight, dimensionTop, dimensionRight);
        return new DetectorResult(bits, [topLeft, bottomLeft, bottomRight, topRight]);
      }
      static shiftPoint(point, to, div) {
        let x = (to.getX() - point.getX()) / (div + 1);
        let y = (to.getY() - point.getY()) / (div + 1);
        return new ResultPoint(point.getX() + x, point.getY() + y);
      }
      static moveAway(point, fromX, fromY) {
        let x = point.getX();
        let y = point.getY();
        if (x < fromX) {
          x -= 1;
        } else {
          x += 1;
        }
        if (y < fromY) {
          y -= 1;
        } else {
          y += 1;
        }
        return new ResultPoint(x, y);
      }
      detectSolid1(cornerPoints) {
        let pointA = cornerPoints[0];
        let pointB = cornerPoints[1];
        let pointC = cornerPoints[3];
        let pointD = cornerPoints[2];
        let trAB = this.transitionsBetween(pointA, pointB);
        let trBC = this.transitionsBetween(pointB, pointC);
        let trCD = this.transitionsBetween(pointC, pointD);
        let trDA = this.transitionsBetween(pointD, pointA);
        let min = trAB;
        let points = [pointD, pointA, pointB, pointC];
        if (min > trBC) {
          min = trBC;
          points[0] = pointA;
          points[1] = pointB;
          points[2] = pointC;
          points[3] = pointD;
        }
        if (min > trCD) {
          min = trCD;
          points[0] = pointB;
          points[1] = pointC;
          points[2] = pointD;
          points[3] = pointA;
        }
        if (min > trDA) {
          points[0] = pointC;
          points[1] = pointD;
          points[2] = pointA;
          points[3] = pointB;
        }
        return points;
      }
      detectSolid2(points) {
        let pointA = points[0];
        let pointB = points[1];
        let pointC = points[2];
        let pointD = points[3];
        let tr = this.transitionsBetween(pointA, pointD);
        let pointBs = Detector$1.shiftPoint(pointB, pointC, (tr + 1) * 4);
        let pointCs = Detector$1.shiftPoint(pointC, pointB, (tr + 1) * 4);
        let trBA = this.transitionsBetween(pointBs, pointA);
        let trCD = this.transitionsBetween(pointCs, pointD);
        if (trBA < trCD) {
          points[0] = pointA;
          points[1] = pointB;
          points[2] = pointC;
          points[3] = pointD;
        } else {
          points[0] = pointB;
          points[1] = pointC;
          points[2] = pointD;
          points[3] = pointA;
        }
        return points;
      }
      correctTopRight(points) {
        let pointA = points[0];
        let pointB = points[1];
        let pointC = points[2];
        let pointD = points[3];
        let trTop = this.transitionsBetween(pointA, pointD);
        let trRight = this.transitionsBetween(pointB, pointD);
        let pointAs = Detector$1.shiftPoint(pointA, pointB, (trRight + 1) * 4);
        let pointCs = Detector$1.shiftPoint(pointC, pointB, (trTop + 1) * 4);
        trTop = this.transitionsBetween(pointAs, pointD);
        trRight = this.transitionsBetween(pointCs, pointD);
        let candidate1 = new ResultPoint(pointD.getX() + (pointC.getX() - pointB.getX()) / (trTop + 1), pointD.getY() + (pointC.getY() - pointB.getY()) / (trTop + 1));
        let candidate2 = new ResultPoint(pointD.getX() + (pointA.getX() - pointB.getX()) / (trRight + 1), pointD.getY() + (pointA.getY() - pointB.getY()) / (trRight + 1));
        if (!this.isValid(candidate1)) {
          if (this.isValid(candidate2)) {
            return candidate2;
          }
          return null;
        }
        if (!this.isValid(candidate2)) {
          return candidate1;
        }
        let sumc1 = this.transitionsBetween(pointAs, candidate1) + this.transitionsBetween(pointCs, candidate1);
        let sumc2 = this.transitionsBetween(pointAs, candidate2) + this.transitionsBetween(pointCs, candidate2);
        if (sumc1 > sumc2) {
          return candidate1;
        } else {
          return candidate2;
        }
      }
      shiftToModuleCenter(points) {
        let pointA = points[0];
        let pointB = points[1];
        let pointC = points[2];
        let pointD = points[3];
        let dimH = this.transitionsBetween(pointA, pointD) + 1;
        let dimV = this.transitionsBetween(pointC, pointD) + 1;
        let pointAs = Detector$1.shiftPoint(pointA, pointB, dimV * 4);
        let pointCs = Detector$1.shiftPoint(pointC, pointB, dimH * 4);
        dimH = this.transitionsBetween(pointAs, pointD) + 1;
        dimV = this.transitionsBetween(pointCs, pointD) + 1;
        if ((dimH & 1) === 1) {
          dimH += 1;
        }
        if ((dimV & 1) === 1) {
          dimV += 1;
        }
        let centerX = (pointA.getX() + pointB.getX() + pointC.getX() + pointD.getX()) / 4;
        let centerY = (pointA.getY() + pointB.getY() + pointC.getY() + pointD.getY()) / 4;
        pointA = Detector$1.moveAway(pointA, centerX, centerY);
        pointB = Detector$1.moveAway(pointB, centerX, centerY);
        pointC = Detector$1.moveAway(pointC, centerX, centerY);
        pointD = Detector$1.moveAway(pointD, centerX, centerY);
        let pointBs;
        let pointDs;
        pointAs = Detector$1.shiftPoint(pointA, pointB, dimV * 4);
        pointAs = Detector$1.shiftPoint(pointAs, pointD, dimH * 4);
        pointBs = Detector$1.shiftPoint(pointB, pointA, dimV * 4);
        pointBs = Detector$1.shiftPoint(pointBs, pointC, dimH * 4);
        pointCs = Detector$1.shiftPoint(pointC, pointD, dimV * 4);
        pointCs = Detector$1.shiftPoint(pointCs, pointB, dimH * 4);
        pointDs = Detector$1.shiftPoint(pointD, pointC, dimV * 4);
        pointDs = Detector$1.shiftPoint(pointDs, pointA, dimH * 4);
        return [pointAs, pointBs, pointCs, pointDs];
      }
      isValid(p) {
        return p.getX() >= 0 && p.getX() < this.image.getWidth() && p.getY() > 0 && p.getY() < this.image.getHeight();
      }
      static sampleGrid(image, topLeft, bottomLeft, bottomRight, topRight, dimensionX, dimensionY) {
        const sampler = GridSamplerInstance.getInstance();
        return sampler.sampleGrid(image, dimensionX, dimensionY, 0.5, 0.5, dimensionX - 0.5, 0.5, dimensionX - 0.5, dimensionY - 0.5, 0.5, dimensionY - 0.5, topLeft.getX(), topLeft.getY(), topRight.getX(), topRight.getY(), bottomRight.getX(), bottomRight.getY(), bottomLeft.getX(), bottomLeft.getY());
      }
      transitionsBetween(from, to) {
        let fromX = Math.trunc(from.getX());
        let fromY = Math.trunc(from.getY());
        let toX = Math.trunc(to.getX());
        let toY = Math.trunc(to.getY());
        let steep = Math.abs(toY - fromY) > Math.abs(toX - fromX);
        if (steep) {
          let temp = fromX;
          fromX = fromY;
          fromY = temp;
          temp = toX;
          toX = toY;
          toY = temp;
        }
        let dx = Math.abs(toX - fromX);
        let dy = Math.abs(toY - fromY);
        let error2 = -dx / 2;
        let ystep = fromY < toY ? 1 : -1;
        let xstep = fromX < toX ? 1 : -1;
        let transitions = 0;
        let inBlack = this.image.get(steep ? fromY : fromX, steep ? fromX : fromY);
        for (let x = fromX, y = fromY; x !== toX; x += xstep) {
          let isBlack = this.image.get(steep ? y : x, steep ? x : y);
          if (isBlack !== inBlack) {
            transitions++;
            inBlack = isBlack;
          }
          error2 += dy;
          if (error2 > 0) {
            if (y === toY) {
              break;
            }
            y += ystep;
            error2 -= dx;
          }
        }
        return transitions;
      }
    }
    class DataMatrixReader {
      constructor() {
        this.decoder = new Decoder$1();
      }
      decode(image, hints = null) {
        let decoderResult;
        let points;
        if (hints != null && hints.has(DecodeHintType$1.PURE_BARCODE)) {
          const bits = DataMatrixReader.extractPureBits(image.getBlackMatrix());
          decoderResult = this.decoder.decode(bits);
          points = DataMatrixReader.NO_POINTS;
        } else {
          const detectorResult = new Detector$1(image.getBlackMatrix()).detect();
          decoderResult = this.decoder.decode(detectorResult.getBits());
          points = detectorResult.getPoints();
        }
        const rawBytes = decoderResult.getRawBytes();
        const result = new Result(decoderResult.getText(), rawBytes, 8 * rawBytes.length, points, BarcodeFormat$1.DATA_MATRIX, System.currentTimeMillis());
        const byteSegments = decoderResult.getByteSegments();
        if (byteSegments != null) {
          result.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS, byteSegments);
        }
        const ecLevel = decoderResult.getECLevel();
        if (ecLevel != null) {
          result.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL, ecLevel);
        }
        return result;
      }
      reset() {
      }
      static extractPureBits(image) {
        const leftTopBlack = image.getTopLeftOnBit();
        const rightBottomBlack = image.getBottomRightOnBit();
        if (leftTopBlack == null || rightBottomBlack == null) {
          throw new NotFoundException();
        }
        const moduleSize = this.moduleSize(leftTopBlack, image);
        let top = leftTopBlack[1];
        const bottom = rightBottomBlack[1];
        let left = leftTopBlack[0];
        const right = rightBottomBlack[0];
        const matrixWidth = (right - left + 1) / moduleSize;
        const matrixHeight = (bottom - top + 1) / moduleSize;
        if (matrixWidth <= 0 || matrixHeight <= 0) {
          throw new NotFoundException();
        }
        const nudge = moduleSize / 2;
        top += nudge;
        left += nudge;
        const bits = new BitMatrix(matrixWidth, matrixHeight);
        for (let y = 0; y < matrixHeight; y++) {
          const iOffset = top + y * moduleSize;
          for (let x = 0; x < matrixWidth; x++) {
            if (image.get(left + x * moduleSize, iOffset)) {
              bits.set(x, y);
            }
          }
        }
        return bits;
      }
      static moduleSize(leftTopBlack, image) {
        const width = image.getWidth();
        let x = leftTopBlack[0];
        const y = leftTopBlack[1];
        while (x < width && image.get(x, y)) {
          x++;
        }
        if (x === width) {
          throw new NotFoundException();
        }
        const moduleSize = x - leftTopBlack[0];
        if (moduleSize === 0) {
          throw new NotFoundException();
        }
        return moduleSize;
      }
    }
    DataMatrixReader.NO_POINTS = [];
    class BrowserDatamatrixCodeReader extends BrowserCodeReader {
      constructor(timeBetweenScansMillis = 500) {
        super(new DataMatrixReader(), timeBetweenScansMillis);
      }
    }
    var ErrorCorrectionLevelValues;
    (function(ErrorCorrectionLevelValues2) {
      ErrorCorrectionLevelValues2[ErrorCorrectionLevelValues2["L"] = 0] = "L";
      ErrorCorrectionLevelValues2[ErrorCorrectionLevelValues2["M"] = 1] = "M";
      ErrorCorrectionLevelValues2[ErrorCorrectionLevelValues2["Q"] = 2] = "Q";
      ErrorCorrectionLevelValues2[ErrorCorrectionLevelValues2["H"] = 3] = "H";
    })(ErrorCorrectionLevelValues || (ErrorCorrectionLevelValues = {}));
    class ErrorCorrectionLevel {
      constructor(value, stringValue, bits) {
        this.value = value;
        this.stringValue = stringValue;
        this.bits = bits;
        ErrorCorrectionLevel.FOR_BITS.set(bits, this);
        ErrorCorrectionLevel.FOR_VALUE.set(value, this);
      }
      getValue() {
        return this.value;
      }
      getBits() {
        return this.bits;
      }
      static fromString(s) {
        switch (s) {
          case "L":
            return ErrorCorrectionLevel.L;
          case "M":
            return ErrorCorrectionLevel.M;
          case "Q":
            return ErrorCorrectionLevel.Q;
          case "H":
            return ErrorCorrectionLevel.H;
          default:
            throw new ArgumentException(s + "not available");
        }
      }
      toString() {
        return this.stringValue;
      }
      equals(o) {
        if (!(o instanceof ErrorCorrectionLevel)) {
          return false;
        }
        const other = o;
        return this.value === other.value;
      }
      static forBits(bits) {
        if (bits < 0 || bits >= ErrorCorrectionLevel.FOR_BITS.size) {
          throw new IllegalArgumentException();
        }
        return ErrorCorrectionLevel.FOR_BITS.get(bits);
      }
    }
    ErrorCorrectionLevel.FOR_BITS = /* @__PURE__ */ new Map();
    ErrorCorrectionLevel.FOR_VALUE = /* @__PURE__ */ new Map();
    ErrorCorrectionLevel.L = new ErrorCorrectionLevel(ErrorCorrectionLevelValues.L, "L", 1);
    ErrorCorrectionLevel.M = new ErrorCorrectionLevel(ErrorCorrectionLevelValues.M, "M", 0);
    ErrorCorrectionLevel.Q = new ErrorCorrectionLevel(ErrorCorrectionLevelValues.Q, "Q", 3);
    ErrorCorrectionLevel.H = new ErrorCorrectionLevel(ErrorCorrectionLevelValues.H, "H", 2);
    class FormatInformation {
      constructor(formatInfo) {
        this.errorCorrectionLevel = ErrorCorrectionLevel.forBits(formatInfo >> 3 & 3);
        this.dataMask = formatInfo & 7;
      }
      static numBitsDiffering(a, b) {
        return Integer.bitCount(a ^ b);
      }
      static decodeFormatInformation(maskedFormatInfo1, maskedFormatInfo2) {
        const formatInfo = FormatInformation.doDecodeFormatInformation(maskedFormatInfo1, maskedFormatInfo2);
        if (formatInfo !== null) {
          return formatInfo;
        }
        return FormatInformation.doDecodeFormatInformation(maskedFormatInfo1 ^ FormatInformation.FORMAT_INFO_MASK_QR, maskedFormatInfo2 ^ FormatInformation.FORMAT_INFO_MASK_QR);
      }
      static doDecodeFormatInformation(maskedFormatInfo1, maskedFormatInfo2) {
        let bestDifference = Number.MAX_SAFE_INTEGER;
        let bestFormatInfo = 0;
        for (const decodeInfo of FormatInformation.FORMAT_INFO_DECODE_LOOKUP) {
          const targetInfo = decodeInfo[0];
          if (targetInfo === maskedFormatInfo1 || targetInfo === maskedFormatInfo2) {
            return new FormatInformation(decodeInfo[1]);
          }
          let bitsDifference = FormatInformation.numBitsDiffering(maskedFormatInfo1, targetInfo);
          if (bitsDifference < bestDifference) {
            bestFormatInfo = decodeInfo[1];
            bestDifference = bitsDifference;
          }
          if (maskedFormatInfo1 !== maskedFormatInfo2) {
            bitsDifference = FormatInformation.numBitsDiffering(maskedFormatInfo2, targetInfo);
            if (bitsDifference < bestDifference) {
              bestFormatInfo = decodeInfo[1];
              bestDifference = bitsDifference;
            }
          }
        }
        if (bestDifference <= 3) {
          return new FormatInformation(bestFormatInfo);
        }
        return null;
      }
      getErrorCorrectionLevel() {
        return this.errorCorrectionLevel;
      }
      getDataMask() {
        return this.dataMask;
      }
      hashCode() {
        return this.errorCorrectionLevel.getBits() << 3 | this.dataMask;
      }
      equals(o) {
        if (!(o instanceof FormatInformation)) {
          return false;
        }
        const other = o;
        return this.errorCorrectionLevel === other.errorCorrectionLevel && this.dataMask === other.dataMask;
      }
    }
    FormatInformation.FORMAT_INFO_MASK_QR = 21522;
    FormatInformation.FORMAT_INFO_DECODE_LOOKUP = [
      Int32Array.from([21522, 0]),
      Int32Array.from([20773, 1]),
      Int32Array.from([24188, 2]),
      Int32Array.from([23371, 3]),
      Int32Array.from([17913, 4]),
      Int32Array.from([16590, 5]),
      Int32Array.from([20375, 6]),
      Int32Array.from([19104, 7]),
      Int32Array.from([30660, 8]),
      Int32Array.from([29427, 9]),
      Int32Array.from([32170, 10]),
      Int32Array.from([30877, 11]),
      Int32Array.from([26159, 12]),
      Int32Array.from([25368, 13]),
      Int32Array.from([27713, 14]),
      Int32Array.from([26998, 15]),
      Int32Array.from([5769, 16]),
      Int32Array.from([5054, 17]),
      Int32Array.from([7399, 18]),
      Int32Array.from([6608, 19]),
      Int32Array.from([1890, 20]),
      Int32Array.from([597, 21]),
      Int32Array.from([3340, 22]),
      Int32Array.from([2107, 23]),
      Int32Array.from([13663, 24]),
      Int32Array.from([12392, 25]),
      Int32Array.from([16177, 26]),
      Int32Array.from([14854, 27]),
      Int32Array.from([9396, 28]),
      Int32Array.from([8579, 29]),
      Int32Array.from([11994, 30]),
      Int32Array.from([11245, 31])
    ];
    class ECBlocks$1 {
      constructor(ecCodewordsPerBlock, ...ecBlocks) {
        this.ecCodewordsPerBlock = ecCodewordsPerBlock;
        this.ecBlocks = ecBlocks;
      }
      getECCodewordsPerBlock() {
        return this.ecCodewordsPerBlock;
      }
      getNumBlocks() {
        let total = 0;
        const ecBlocks = this.ecBlocks;
        for (const ecBlock of ecBlocks) {
          total += ecBlock.getCount();
        }
        return total;
      }
      getTotalECCodewords() {
        return this.ecCodewordsPerBlock * this.getNumBlocks();
      }
      getECBlocks() {
        return this.ecBlocks;
      }
    }
    class ECB$1 {
      constructor(count, dataCodewords) {
        this.count = count;
        this.dataCodewords = dataCodewords;
      }
      getCount() {
        return this.count;
      }
      getDataCodewords() {
        return this.dataCodewords;
      }
    }
    class Version$1 {
      constructor(versionNumber, alignmentPatternCenters, ...ecBlocks) {
        this.versionNumber = versionNumber;
        this.alignmentPatternCenters = alignmentPatternCenters;
        this.ecBlocks = ecBlocks;
        let total = 0;
        const ecCodewords = ecBlocks[0].getECCodewordsPerBlock();
        const ecbArray = ecBlocks[0].getECBlocks();
        for (const ecBlock of ecbArray) {
          total += ecBlock.getCount() * (ecBlock.getDataCodewords() + ecCodewords);
        }
        this.totalCodewords = total;
      }
      getVersionNumber() {
        return this.versionNumber;
      }
      getAlignmentPatternCenters() {
        return this.alignmentPatternCenters;
      }
      getTotalCodewords() {
        return this.totalCodewords;
      }
      getDimensionForVersion() {
        return 17 + 4 * this.versionNumber;
      }
      getECBlocksForLevel(ecLevel) {
        return this.ecBlocks[ecLevel.getValue()];
      }
      static getProvisionalVersionForDimension(dimension) {
        if (dimension % 4 !== 1) {
          throw new FormatException();
        }
        try {
          return this.getVersionForNumber((dimension - 17) / 4);
        } catch (ignored) {
          throw new FormatException();
        }
      }
      static getVersionForNumber(versionNumber) {
        if (versionNumber < 1 || versionNumber > 40) {
          throw new IllegalArgumentException();
        }
        return Version$1.VERSIONS[versionNumber - 1];
      }
      static decodeVersionInformation(versionBits) {
        let bestDifference = Number.MAX_SAFE_INTEGER;
        let bestVersion = 0;
        for (let i = 0; i < Version$1.VERSION_DECODE_INFO.length; i++) {
          const targetVersion = Version$1.VERSION_DECODE_INFO[i];
          if (targetVersion === versionBits) {
            return Version$1.getVersionForNumber(i + 7);
          }
          const bitsDifference = FormatInformation.numBitsDiffering(versionBits, targetVersion);
          if (bitsDifference < bestDifference) {
            bestVersion = i + 7;
            bestDifference = bitsDifference;
          }
        }
        if (bestDifference <= 3) {
          return Version$1.getVersionForNumber(bestVersion);
        }
        return null;
      }
      buildFunctionPattern() {
        const dimension = this.getDimensionForVersion();
        const bitMatrix = new BitMatrix(dimension);
        bitMatrix.setRegion(0, 0, 9, 9);
        bitMatrix.setRegion(dimension - 8, 0, 8, 9);
        bitMatrix.setRegion(0, dimension - 8, 9, 8);
        const max = this.alignmentPatternCenters.length;
        for (let x = 0; x < max; x++) {
          const i = this.alignmentPatternCenters[x] - 2;
          for (let y = 0; y < max; y++) {
            if (x === 0 && (y === 0 || y === max - 1) || x === max - 1 && y === 0) {
              continue;
            }
            bitMatrix.setRegion(this.alignmentPatternCenters[y] - 2, i, 5, 5);
          }
        }
        bitMatrix.setRegion(6, 9, 1, dimension - 17);
        bitMatrix.setRegion(9, 6, dimension - 17, 1);
        if (this.versionNumber > 6) {
          bitMatrix.setRegion(dimension - 11, 0, 3, 6);
          bitMatrix.setRegion(0, dimension - 11, 6, 3);
        }
        return bitMatrix;
      }
      toString() {
        return "" + this.versionNumber;
      }
    }
    Version$1.VERSION_DECODE_INFO = Int32Array.from([
      31892,
      34236,
      39577,
      42195,
      48118,
      51042,
      55367,
      58893,
      63784,
      68472,
      70749,
      76311,
      79154,
      84390,
      87683,
      92361,
      96236,
      102084,
      102881,
      110507,
      110734,
      117786,
      119615,
      126325,
      127568,
      133589,
      136944,
      141498,
      145311,
      150283,
      152622,
      158308,
      161089,
      167017
    ]);
    Version$1.VERSIONS = [
      new Version$1(1, new Int32Array(0), new ECBlocks$1(7, new ECB$1(1, 19)), new ECBlocks$1(10, new ECB$1(1, 16)), new ECBlocks$1(13, new ECB$1(1, 13)), new ECBlocks$1(17, new ECB$1(1, 9))),
      new Version$1(2, Int32Array.from([6, 18]), new ECBlocks$1(10, new ECB$1(1, 34)), new ECBlocks$1(16, new ECB$1(1, 28)), new ECBlocks$1(22, new ECB$1(1, 22)), new ECBlocks$1(28, new ECB$1(1, 16))),
      new Version$1(3, Int32Array.from([6, 22]), new ECBlocks$1(15, new ECB$1(1, 55)), new ECBlocks$1(26, new ECB$1(1, 44)), new ECBlocks$1(18, new ECB$1(2, 17)), new ECBlocks$1(22, new ECB$1(2, 13))),
      new Version$1(4, Int32Array.from([6, 26]), new ECBlocks$1(20, new ECB$1(1, 80)), new ECBlocks$1(18, new ECB$1(2, 32)), new ECBlocks$1(26, new ECB$1(2, 24)), new ECBlocks$1(16, new ECB$1(4, 9))),
      new Version$1(5, Int32Array.from([6, 30]), new ECBlocks$1(26, new ECB$1(1, 108)), new ECBlocks$1(24, new ECB$1(2, 43)), new ECBlocks$1(18, new ECB$1(2, 15), new ECB$1(2, 16)), new ECBlocks$1(22, new ECB$1(2, 11), new ECB$1(2, 12))),
      new Version$1(6, Int32Array.from([6, 34]), new ECBlocks$1(18, new ECB$1(2, 68)), new ECBlocks$1(16, new ECB$1(4, 27)), new ECBlocks$1(24, new ECB$1(4, 19)), new ECBlocks$1(28, new ECB$1(4, 15))),
      new Version$1(7, Int32Array.from([6, 22, 38]), new ECBlocks$1(20, new ECB$1(2, 78)), new ECBlocks$1(18, new ECB$1(4, 31)), new ECBlocks$1(18, new ECB$1(2, 14), new ECB$1(4, 15)), new ECBlocks$1(26, new ECB$1(4, 13), new ECB$1(1, 14))),
      new Version$1(8, Int32Array.from([6, 24, 42]), new ECBlocks$1(24, new ECB$1(2, 97)), new ECBlocks$1(22, new ECB$1(2, 38), new ECB$1(2, 39)), new ECBlocks$1(22, new ECB$1(4, 18), new ECB$1(2, 19)), new ECBlocks$1(26, new ECB$1(4, 14), new ECB$1(2, 15))),
      new Version$1(9, Int32Array.from([6, 26, 46]), new ECBlocks$1(30, new ECB$1(2, 116)), new ECBlocks$1(22, new ECB$1(3, 36), new ECB$1(2, 37)), new ECBlocks$1(20, new ECB$1(4, 16), new ECB$1(4, 17)), new ECBlocks$1(24, new ECB$1(4, 12), new ECB$1(4, 13))),
      new Version$1(10, Int32Array.from([6, 28, 50]), new ECBlocks$1(18, new ECB$1(2, 68), new ECB$1(2, 69)), new ECBlocks$1(26, new ECB$1(4, 43), new ECB$1(1, 44)), new ECBlocks$1(24, new ECB$1(6, 19), new ECB$1(2, 20)), new ECBlocks$1(28, new ECB$1(6, 15), new ECB$1(2, 16))),
      new Version$1(11, Int32Array.from([6, 30, 54]), new ECBlocks$1(20, new ECB$1(4, 81)), new ECBlocks$1(30, new ECB$1(1, 50), new ECB$1(4, 51)), new ECBlocks$1(28, new ECB$1(4, 22), new ECB$1(4, 23)), new ECBlocks$1(24, new ECB$1(3, 12), new ECB$1(8, 13))),
      new Version$1(12, Int32Array.from([6, 32, 58]), new ECBlocks$1(24, new ECB$1(2, 92), new ECB$1(2, 93)), new ECBlocks$1(22, new ECB$1(6, 36), new ECB$1(2, 37)), new ECBlocks$1(26, new ECB$1(4, 20), new ECB$1(6, 21)), new ECBlocks$1(28, new ECB$1(7, 14), new ECB$1(4, 15))),
      new Version$1(13, Int32Array.from([6, 34, 62]), new ECBlocks$1(26, new ECB$1(4, 107)), new ECBlocks$1(22, new ECB$1(8, 37), new ECB$1(1, 38)), new ECBlocks$1(24, new ECB$1(8, 20), new ECB$1(4, 21)), new ECBlocks$1(22, new ECB$1(12, 11), new ECB$1(4, 12))),
      new Version$1(14, Int32Array.from([6, 26, 46, 66]), new ECBlocks$1(30, new ECB$1(3, 115), new ECB$1(1, 116)), new ECBlocks$1(24, new ECB$1(4, 40), new ECB$1(5, 41)), new ECBlocks$1(20, new ECB$1(11, 16), new ECB$1(5, 17)), new ECBlocks$1(24, new ECB$1(11, 12), new ECB$1(5, 13))),
      new Version$1(15, Int32Array.from([6, 26, 48, 70]), new ECBlocks$1(22, new ECB$1(5, 87), new ECB$1(1, 88)), new ECBlocks$1(24, new ECB$1(5, 41), new ECB$1(5, 42)), new ECBlocks$1(30, new ECB$1(5, 24), new ECB$1(7, 25)), new ECBlocks$1(24, new ECB$1(11, 12), new ECB$1(7, 13))),
      new Version$1(16, Int32Array.from([6, 26, 50, 74]), new ECBlocks$1(24, new ECB$1(5, 98), new ECB$1(1, 99)), new ECBlocks$1(28, new ECB$1(7, 45), new ECB$1(3, 46)), new ECBlocks$1(24, new ECB$1(15, 19), new ECB$1(2, 20)), new ECBlocks$1(30, new ECB$1(3, 15), new ECB$1(13, 16))),
      new Version$1(17, Int32Array.from([6, 30, 54, 78]), new ECBlocks$1(28, new ECB$1(1, 107), new ECB$1(5, 108)), new ECBlocks$1(28, new ECB$1(10, 46), new ECB$1(1, 47)), new ECBlocks$1(28, new ECB$1(1, 22), new ECB$1(15, 23)), new ECBlocks$1(28, new ECB$1(2, 14), new ECB$1(17, 15))),
      new Version$1(18, Int32Array.from([6, 30, 56, 82]), new ECBlocks$1(30, new ECB$1(5, 120), new ECB$1(1, 121)), new ECBlocks$1(26, new ECB$1(9, 43), new ECB$1(4, 44)), new ECBlocks$1(28, new ECB$1(17, 22), new ECB$1(1, 23)), new ECBlocks$1(28, new ECB$1(2, 14), new ECB$1(19, 15))),
      new Version$1(19, Int32Array.from([6, 30, 58, 86]), new ECBlocks$1(28, new ECB$1(3, 113), new ECB$1(4, 114)), new ECBlocks$1(26, new ECB$1(3, 44), new ECB$1(11, 45)), new ECBlocks$1(26, new ECB$1(17, 21), new ECB$1(4, 22)), new ECBlocks$1(26, new ECB$1(9, 13), new ECB$1(16, 14))),
      new Version$1(20, Int32Array.from([6, 34, 62, 90]), new ECBlocks$1(28, new ECB$1(3, 107), new ECB$1(5, 108)), new ECBlocks$1(26, new ECB$1(3, 41), new ECB$1(13, 42)), new ECBlocks$1(30, new ECB$1(15, 24), new ECB$1(5, 25)), new ECBlocks$1(28, new ECB$1(15, 15), new ECB$1(10, 16))),
      new Version$1(21, Int32Array.from([6, 28, 50, 72, 94]), new ECBlocks$1(28, new ECB$1(4, 116), new ECB$1(4, 117)), new ECBlocks$1(26, new ECB$1(17, 42)), new ECBlocks$1(28, new ECB$1(17, 22), new ECB$1(6, 23)), new ECBlocks$1(30, new ECB$1(19, 16), new ECB$1(6, 17))),
      new Version$1(22, Int32Array.from([6, 26, 50, 74, 98]), new ECBlocks$1(28, new ECB$1(2, 111), new ECB$1(7, 112)), new ECBlocks$1(28, new ECB$1(17, 46)), new ECBlocks$1(30, new ECB$1(7, 24), new ECB$1(16, 25)), new ECBlocks$1(24, new ECB$1(34, 13))),
      new Version$1(23, Int32Array.from([6, 30, 54, 78, 102]), new ECBlocks$1(30, new ECB$1(4, 121), new ECB$1(5, 122)), new ECBlocks$1(28, new ECB$1(4, 47), new ECB$1(14, 48)), new ECBlocks$1(30, new ECB$1(11, 24), new ECB$1(14, 25)), new ECBlocks$1(30, new ECB$1(16, 15), new ECB$1(14, 16))),
      new Version$1(24, Int32Array.from([6, 28, 54, 80, 106]), new ECBlocks$1(30, new ECB$1(6, 117), new ECB$1(4, 118)), new ECBlocks$1(28, new ECB$1(6, 45), new ECB$1(14, 46)), new ECBlocks$1(30, new ECB$1(11, 24), new ECB$1(16, 25)), new ECBlocks$1(30, new ECB$1(30, 16), new ECB$1(2, 17))),
      new Version$1(25, Int32Array.from([6, 32, 58, 84, 110]), new ECBlocks$1(26, new ECB$1(8, 106), new ECB$1(4, 107)), new ECBlocks$1(28, new ECB$1(8, 47), new ECB$1(13, 48)), new ECBlocks$1(30, new ECB$1(7, 24), new ECB$1(22, 25)), new ECBlocks$1(30, new ECB$1(22, 15), new ECB$1(13, 16))),
      new Version$1(26, Int32Array.from([6, 30, 58, 86, 114]), new ECBlocks$1(28, new ECB$1(10, 114), new ECB$1(2, 115)), new ECBlocks$1(28, new ECB$1(19, 46), new ECB$1(4, 47)), new ECBlocks$1(28, new ECB$1(28, 22), new ECB$1(6, 23)), new ECBlocks$1(30, new ECB$1(33, 16), new ECB$1(4, 17))),
      new Version$1(27, Int32Array.from([6, 34, 62, 90, 118]), new ECBlocks$1(30, new ECB$1(8, 122), new ECB$1(4, 123)), new ECBlocks$1(28, new ECB$1(22, 45), new ECB$1(3, 46)), new ECBlocks$1(30, new ECB$1(8, 23), new ECB$1(26, 24)), new ECBlocks$1(30, new ECB$1(12, 15), new ECB$1(28, 16))),
      new Version$1(28, Int32Array.from([6, 26, 50, 74, 98, 122]), new ECBlocks$1(30, new ECB$1(3, 117), new ECB$1(10, 118)), new ECBlocks$1(28, new ECB$1(3, 45), new ECB$1(23, 46)), new ECBlocks$1(30, new ECB$1(4, 24), new ECB$1(31, 25)), new ECBlocks$1(30, new ECB$1(11, 15), new ECB$1(31, 16))),
      new Version$1(29, Int32Array.from([6, 30, 54, 78, 102, 126]), new ECBlocks$1(30, new ECB$1(7, 116), new ECB$1(7, 117)), new ECBlocks$1(28, new ECB$1(21, 45), new ECB$1(7, 46)), new ECBlocks$1(30, new ECB$1(1, 23), new ECB$1(37, 24)), new ECBlocks$1(30, new ECB$1(19, 15), new ECB$1(26, 16))),
      new Version$1(30, Int32Array.from([6, 26, 52, 78, 104, 130]), new ECBlocks$1(30, new ECB$1(5, 115), new ECB$1(10, 116)), new ECBlocks$1(28, new ECB$1(19, 47), new ECB$1(10, 48)), new ECBlocks$1(30, new ECB$1(15, 24), new ECB$1(25, 25)), new ECBlocks$1(30, new ECB$1(23, 15), new ECB$1(25, 16))),
      new Version$1(31, Int32Array.from([6, 30, 56, 82, 108, 134]), new ECBlocks$1(30, new ECB$1(13, 115), new ECB$1(3, 116)), new ECBlocks$1(28, new ECB$1(2, 46), new ECB$1(29, 47)), new ECBlocks$1(30, new ECB$1(42, 24), new ECB$1(1, 25)), new ECBlocks$1(30, new ECB$1(23, 15), new ECB$1(28, 16))),
      new Version$1(32, Int32Array.from([6, 34, 60, 86, 112, 138]), new ECBlocks$1(30, new ECB$1(17, 115)), new ECBlocks$1(28, new ECB$1(10, 46), new ECB$1(23, 47)), new ECBlocks$1(30, new ECB$1(10, 24), new ECB$1(35, 25)), new ECBlocks$1(30, new ECB$1(19, 15), new ECB$1(35, 16))),
      new Version$1(33, Int32Array.from([6, 30, 58, 86, 114, 142]), new ECBlocks$1(30, new ECB$1(17, 115), new ECB$1(1, 116)), new ECBlocks$1(28, new ECB$1(14, 46), new ECB$1(21, 47)), new ECBlocks$1(30, new ECB$1(29, 24), new ECB$1(19, 25)), new ECBlocks$1(30, new ECB$1(11, 15), new ECB$1(46, 16))),
      new Version$1(34, Int32Array.from([6, 34, 62, 90, 118, 146]), new ECBlocks$1(30, new ECB$1(13, 115), new ECB$1(6, 116)), new ECBlocks$1(28, new ECB$1(14, 46), new ECB$1(23, 47)), new ECBlocks$1(30, new ECB$1(44, 24), new ECB$1(7, 25)), new ECBlocks$1(30, new ECB$1(59, 16), new ECB$1(1, 17))),
      new Version$1(35, Int32Array.from([6, 30, 54, 78, 102, 126, 150]), new ECBlocks$1(30, new ECB$1(12, 121), new ECB$1(7, 122)), new ECBlocks$1(28, new ECB$1(12, 47), new ECB$1(26, 48)), new ECBlocks$1(30, new ECB$1(39, 24), new ECB$1(14, 25)), new ECBlocks$1(30, new ECB$1(22, 15), new ECB$1(41, 16))),
      new Version$1(36, Int32Array.from([6, 24, 50, 76, 102, 128, 154]), new ECBlocks$1(30, new ECB$1(6, 121), new ECB$1(14, 122)), new ECBlocks$1(28, new ECB$1(6, 47), new ECB$1(34, 48)), new ECBlocks$1(30, new ECB$1(46, 24), new ECB$1(10, 25)), new ECBlocks$1(30, new ECB$1(2, 15), new ECB$1(64, 16))),
      new Version$1(37, Int32Array.from([6, 28, 54, 80, 106, 132, 158]), new ECBlocks$1(30, new ECB$1(17, 122), new ECB$1(4, 123)), new ECBlocks$1(28, new ECB$1(29, 46), new ECB$1(14, 47)), new ECBlocks$1(30, new ECB$1(49, 24), new ECB$1(10, 25)), new ECBlocks$1(30, new ECB$1(24, 15), new ECB$1(46, 16))),
      new Version$1(38, Int32Array.from([6, 32, 58, 84, 110, 136, 162]), new ECBlocks$1(30, new ECB$1(4, 122), new ECB$1(18, 123)), new ECBlocks$1(28, new ECB$1(13, 46), new ECB$1(32, 47)), new ECBlocks$1(30, new ECB$1(48, 24), new ECB$1(14, 25)), new ECBlocks$1(30, new ECB$1(42, 15), new ECB$1(32, 16))),
      new Version$1(39, Int32Array.from([6, 26, 54, 82, 110, 138, 166]), new ECBlocks$1(30, new ECB$1(20, 117), new ECB$1(4, 118)), new ECBlocks$1(28, new ECB$1(40, 47), new ECB$1(7, 48)), new ECBlocks$1(30, new ECB$1(43, 24), new ECB$1(22, 25)), new ECBlocks$1(30, new ECB$1(10, 15), new ECB$1(67, 16))),
      new Version$1(40, Int32Array.from([6, 30, 58, 86, 114, 142, 170]), new ECBlocks$1(30, new ECB$1(19, 118), new ECB$1(6, 119)), new ECBlocks$1(28, new ECB$1(18, 47), new ECB$1(31, 48)), new ECBlocks$1(30, new ECB$1(34, 24), new ECB$1(34, 25)), new ECBlocks$1(30, new ECB$1(20, 15), new ECB$1(61, 16)))
    ];
    var DataMaskValues;
    (function(DataMaskValues2) {
      DataMaskValues2[DataMaskValues2["DATA_MASK_000"] = 0] = "DATA_MASK_000";
      DataMaskValues2[DataMaskValues2["DATA_MASK_001"] = 1] = "DATA_MASK_001";
      DataMaskValues2[DataMaskValues2["DATA_MASK_010"] = 2] = "DATA_MASK_010";
      DataMaskValues2[DataMaskValues2["DATA_MASK_011"] = 3] = "DATA_MASK_011";
      DataMaskValues2[DataMaskValues2["DATA_MASK_100"] = 4] = "DATA_MASK_100";
      DataMaskValues2[DataMaskValues2["DATA_MASK_101"] = 5] = "DATA_MASK_101";
      DataMaskValues2[DataMaskValues2["DATA_MASK_110"] = 6] = "DATA_MASK_110";
      DataMaskValues2[DataMaskValues2["DATA_MASK_111"] = 7] = "DATA_MASK_111";
    })(DataMaskValues || (DataMaskValues = {}));
    class DataMask {
      constructor(value, isMasked) {
        this.value = value;
        this.isMasked = isMasked;
      }
      unmaskBitMatrix(bits, dimension) {
        for (let i = 0; i < dimension; i++) {
          for (let j = 0; j < dimension; j++) {
            if (this.isMasked(i, j)) {
              bits.flip(j, i);
            }
          }
        }
      }
    }
    DataMask.values = /* @__PURE__ */ new Map([
      [DataMaskValues.DATA_MASK_000, new DataMask(DataMaskValues.DATA_MASK_000, (i, j) => {
        return (i + j & 1) === 0;
      })],
      [DataMaskValues.DATA_MASK_001, new DataMask(DataMaskValues.DATA_MASK_001, (i, j) => {
        return (i & 1) === 0;
      })],
      [DataMaskValues.DATA_MASK_010, new DataMask(DataMaskValues.DATA_MASK_010, (i, j) => {
        return j % 3 === 0;
      })],
      [DataMaskValues.DATA_MASK_011, new DataMask(DataMaskValues.DATA_MASK_011, (i, j) => {
        return (i + j) % 3 === 0;
      })],
      [DataMaskValues.DATA_MASK_100, new DataMask(DataMaskValues.DATA_MASK_100, (i, j) => {
        return (Math.floor(i / 2) + Math.floor(j / 3) & 1) === 0;
      })],
      [DataMaskValues.DATA_MASK_101, new DataMask(DataMaskValues.DATA_MASK_101, (i, j) => {
        return i * j % 6 === 0;
      })],
      [DataMaskValues.DATA_MASK_110, new DataMask(DataMaskValues.DATA_MASK_110, (i, j) => {
        return i * j % 6 < 3;
      })],
      [DataMaskValues.DATA_MASK_111, new DataMask(DataMaskValues.DATA_MASK_111, (i, j) => {
        return (i + j + i * j % 3 & 1) === 0;
      })]
    ]);
    class BitMatrixParser$1 {
      constructor(bitMatrix) {
        const dimension = bitMatrix.getHeight();
        if (dimension < 21 || (dimension & 3) !== 1) {
          throw new FormatException();
        }
        this.bitMatrix = bitMatrix;
      }
      readFormatInformation() {
        if (this.parsedFormatInfo !== null && this.parsedFormatInfo !== void 0) {
          return this.parsedFormatInfo;
        }
        let formatInfoBits1 = 0;
        for (let i = 0; i < 6; i++) {
          formatInfoBits1 = this.copyBit(i, 8, formatInfoBits1);
        }
        formatInfoBits1 = this.copyBit(7, 8, formatInfoBits1);
        formatInfoBits1 = this.copyBit(8, 8, formatInfoBits1);
        formatInfoBits1 = this.copyBit(8, 7, formatInfoBits1);
        for (let j = 5; j >= 0; j--) {
          formatInfoBits1 = this.copyBit(8, j, formatInfoBits1);
        }
        const dimension = this.bitMatrix.getHeight();
        let formatInfoBits2 = 0;
        const jMin = dimension - 7;
        for (let j = dimension - 1; j >= jMin; j--) {
          formatInfoBits2 = this.copyBit(8, j, formatInfoBits2);
        }
        for (let i = dimension - 8; i < dimension; i++) {
          formatInfoBits2 = this.copyBit(i, 8, formatInfoBits2);
        }
        this.parsedFormatInfo = FormatInformation.decodeFormatInformation(formatInfoBits1, formatInfoBits2);
        if (this.parsedFormatInfo !== null) {
          return this.parsedFormatInfo;
        }
        throw new FormatException();
      }
      readVersion() {
        if (this.parsedVersion !== null && this.parsedVersion !== void 0) {
          return this.parsedVersion;
        }
        const dimension = this.bitMatrix.getHeight();
        const provisionalVersion = Math.floor((dimension - 17) / 4);
        if (provisionalVersion <= 6) {
          return Version$1.getVersionForNumber(provisionalVersion);
        }
        let versionBits = 0;
        const ijMin = dimension - 11;
        for (let j = 5; j >= 0; j--) {
          for (let i = dimension - 9; i >= ijMin; i--) {
            versionBits = this.copyBit(i, j, versionBits);
          }
        }
        let theParsedVersion = Version$1.decodeVersionInformation(versionBits);
        if (theParsedVersion !== null && theParsedVersion.getDimensionForVersion() === dimension) {
          this.parsedVersion = theParsedVersion;
          return theParsedVersion;
        }
        versionBits = 0;
        for (let i = 5; i >= 0; i--) {
          for (let j = dimension - 9; j >= ijMin; j--) {
            versionBits = this.copyBit(i, j, versionBits);
          }
        }
        theParsedVersion = Version$1.decodeVersionInformation(versionBits);
        if (theParsedVersion !== null && theParsedVersion.getDimensionForVersion() === dimension) {
          this.parsedVersion = theParsedVersion;
          return theParsedVersion;
        }
        throw new FormatException();
      }
      copyBit(i, j, versionBits) {
        const bit = this.isMirror ? this.bitMatrix.get(j, i) : this.bitMatrix.get(i, j);
        return bit ? versionBits << 1 | 1 : versionBits << 1;
      }
      readCodewords() {
        const formatInfo = this.readFormatInformation();
        const version = this.readVersion();
        const dataMask = DataMask.values.get(formatInfo.getDataMask());
        const dimension = this.bitMatrix.getHeight();
        dataMask.unmaskBitMatrix(this.bitMatrix, dimension);
        const functionPattern = version.buildFunctionPattern();
        let readingUp = true;
        const result = new Uint8Array(version.getTotalCodewords());
        let resultOffset = 0;
        let currentByte = 0;
        let bitsRead = 0;
        for (let j = dimension - 1; j > 0; j -= 2) {
          if (j === 6) {
            j--;
          }
          for (let count = 0; count < dimension; count++) {
            const i = readingUp ? dimension - 1 - count : count;
            for (let col = 0; col < 2; col++) {
              if (!functionPattern.get(j - col, i)) {
                bitsRead++;
                currentByte <<= 1;
                if (this.bitMatrix.get(j - col, i)) {
                  currentByte |= 1;
                }
                if (bitsRead === 8) {
                  result[resultOffset++] = currentByte;
                  bitsRead = 0;
                  currentByte = 0;
                }
              }
            }
          }
          readingUp = !readingUp;
        }
        if (resultOffset !== version.getTotalCodewords()) {
          throw new FormatException();
        }
        return result;
      }
      remask() {
        if (this.parsedFormatInfo === null) {
          return;
        }
        const dataMask = DataMask.values[this.parsedFormatInfo.getDataMask()];
        const dimension = this.bitMatrix.getHeight();
        dataMask.unmaskBitMatrix(this.bitMatrix, dimension);
      }
      setMirror(isMirror) {
        this.parsedVersion = null;
        this.parsedFormatInfo = null;
        this.isMirror = isMirror;
      }
      mirror() {
        const bitMatrix = this.bitMatrix;
        for (let x = 0, width = bitMatrix.getWidth(); x < width; x++) {
          for (let y = x + 1, height = bitMatrix.getHeight(); y < height; y++) {
            if (bitMatrix.get(x, y) !== bitMatrix.get(y, x)) {
              bitMatrix.flip(y, x);
              bitMatrix.flip(x, y);
            }
          }
        }
      }
    }
    class DataBlock$1 {
      constructor(numDataCodewords, codewords) {
        this.numDataCodewords = numDataCodewords;
        this.codewords = codewords;
      }
      static getDataBlocks(rawCodewords, version, ecLevel) {
        if (rawCodewords.length !== version.getTotalCodewords()) {
          throw new IllegalArgumentException();
        }
        const ecBlocks = version.getECBlocksForLevel(ecLevel);
        let totalBlocks = 0;
        const ecBlockArray = ecBlocks.getECBlocks();
        for (const ecBlock of ecBlockArray) {
          totalBlocks += ecBlock.getCount();
        }
        const result = new Array(totalBlocks);
        let numResultBlocks = 0;
        for (const ecBlock of ecBlockArray) {
          for (let i = 0; i < ecBlock.getCount(); i++) {
            const numDataCodewords = ecBlock.getDataCodewords();
            const numBlockCodewords = ecBlocks.getECCodewordsPerBlock() + numDataCodewords;
            result[numResultBlocks++] = new DataBlock$1(numDataCodewords, new Uint8Array(numBlockCodewords));
          }
        }
        const shorterBlocksTotalCodewords = result[0].codewords.length;
        let longerBlocksStartAt = result.length - 1;
        while (longerBlocksStartAt >= 0) {
          const numCodewords = result[longerBlocksStartAt].codewords.length;
          if (numCodewords === shorterBlocksTotalCodewords) {
            break;
          }
          longerBlocksStartAt--;
        }
        longerBlocksStartAt++;
        const shorterBlocksNumDataCodewords = shorterBlocksTotalCodewords - ecBlocks.getECCodewordsPerBlock();
        let rawCodewordsOffset = 0;
        for (let i = 0; i < shorterBlocksNumDataCodewords; i++) {
          for (let j = 0; j < numResultBlocks; j++) {
            result[j].codewords[i] = rawCodewords[rawCodewordsOffset++];
          }
        }
        for (let j = longerBlocksStartAt; j < numResultBlocks; j++) {
          result[j].codewords[shorterBlocksNumDataCodewords] = rawCodewords[rawCodewordsOffset++];
        }
        const max = result[0].codewords.length;
        for (let i = shorterBlocksNumDataCodewords; i < max; i++) {
          for (let j = 0; j < numResultBlocks; j++) {
            const iOffset = j < longerBlocksStartAt ? i : i + 1;
            result[j].codewords[iOffset] = rawCodewords[rawCodewordsOffset++];
          }
        }
        return result;
      }
      getNumDataCodewords() {
        return this.numDataCodewords;
      }
      getCodewords() {
        return this.codewords;
      }
    }
    var ModeValues;
    (function(ModeValues2) {
      ModeValues2[ModeValues2["TERMINATOR"] = 0] = "TERMINATOR";
      ModeValues2[ModeValues2["NUMERIC"] = 1] = "NUMERIC";
      ModeValues2[ModeValues2["ALPHANUMERIC"] = 2] = "ALPHANUMERIC";
      ModeValues2[ModeValues2["STRUCTURED_APPEND"] = 3] = "STRUCTURED_APPEND";
      ModeValues2[ModeValues2["BYTE"] = 4] = "BYTE";
      ModeValues2[ModeValues2["ECI"] = 5] = "ECI";
      ModeValues2[ModeValues2["KANJI"] = 6] = "KANJI";
      ModeValues2[ModeValues2["FNC1_FIRST_POSITION"] = 7] = "FNC1_FIRST_POSITION";
      ModeValues2[ModeValues2["FNC1_SECOND_POSITION"] = 8] = "FNC1_SECOND_POSITION";
      ModeValues2[ModeValues2["HANZI"] = 9] = "HANZI";
    })(ModeValues || (ModeValues = {}));
    class Mode$1 {
      constructor(value, stringValue, characterCountBitsForVersions, bits) {
        this.value = value;
        this.stringValue = stringValue;
        this.characterCountBitsForVersions = characterCountBitsForVersions;
        this.bits = bits;
        Mode$1.FOR_BITS.set(bits, this);
        Mode$1.FOR_VALUE.set(value, this);
      }
      static forBits(bits) {
        const mode = Mode$1.FOR_BITS.get(bits);
        if (void 0 === mode) {
          throw new IllegalArgumentException();
        }
        return mode;
      }
      getCharacterCountBits(version) {
        const versionNumber = version.getVersionNumber();
        let offset;
        if (versionNumber <= 9) {
          offset = 0;
        } else if (versionNumber <= 26) {
          offset = 1;
        } else {
          offset = 2;
        }
        return this.characterCountBitsForVersions[offset];
      }
      getValue() {
        return this.value;
      }
      getBits() {
        return this.bits;
      }
      equals(o) {
        if (!(o instanceof Mode$1)) {
          return false;
        }
        const other = o;
        return this.value === other.value;
      }
      toString() {
        return this.stringValue;
      }
    }
    Mode$1.FOR_BITS = /* @__PURE__ */ new Map();
    Mode$1.FOR_VALUE = /* @__PURE__ */ new Map();
    Mode$1.TERMINATOR = new Mode$1(ModeValues.TERMINATOR, "TERMINATOR", Int32Array.from([0, 0, 0]), 0);
    Mode$1.NUMERIC = new Mode$1(ModeValues.NUMERIC, "NUMERIC", Int32Array.from([10, 12, 14]), 1);
    Mode$1.ALPHANUMERIC = new Mode$1(ModeValues.ALPHANUMERIC, "ALPHANUMERIC", Int32Array.from([9, 11, 13]), 2);
    Mode$1.STRUCTURED_APPEND = new Mode$1(ModeValues.STRUCTURED_APPEND, "STRUCTURED_APPEND", Int32Array.from([0, 0, 0]), 3);
    Mode$1.BYTE = new Mode$1(ModeValues.BYTE, "BYTE", Int32Array.from([8, 16, 16]), 4);
    Mode$1.ECI = new Mode$1(ModeValues.ECI, "ECI", Int32Array.from([0, 0, 0]), 7);
    Mode$1.KANJI = new Mode$1(ModeValues.KANJI, "KANJI", Int32Array.from([8, 10, 12]), 8);
    Mode$1.FNC1_FIRST_POSITION = new Mode$1(ModeValues.FNC1_FIRST_POSITION, "FNC1_FIRST_POSITION", Int32Array.from([0, 0, 0]), 5);
    Mode$1.FNC1_SECOND_POSITION = new Mode$1(ModeValues.FNC1_SECOND_POSITION, "FNC1_SECOND_POSITION", Int32Array.from([0, 0, 0]), 9);
    Mode$1.HANZI = new Mode$1(ModeValues.HANZI, "HANZI", Int32Array.from([8, 10, 12]), 13);
    class DecodedBitStreamParser$1 {
      static decode(bytes, version, ecLevel, hints) {
        const bits = new BitSource(bytes);
        let result = new StringBuilder();
        const byteSegments = new Array();
        let symbolSequence = -1;
        let parityData = -1;
        try {
          let currentCharacterSetECI = null;
          let fc1InEffect = false;
          let mode;
          do {
            if (bits.available() < 4) {
              mode = Mode$1.TERMINATOR;
            } else {
              const modeBits = bits.readBits(4);
              mode = Mode$1.forBits(modeBits);
            }
            switch (mode) {
              case Mode$1.TERMINATOR:
                break;
              case Mode$1.FNC1_FIRST_POSITION:
              case Mode$1.FNC1_SECOND_POSITION:
                fc1InEffect = true;
                break;
              case Mode$1.STRUCTURED_APPEND:
                if (bits.available() < 16) {
                  throw new FormatException();
                }
                symbolSequence = bits.readBits(8);
                parityData = bits.readBits(8);
                break;
              case Mode$1.ECI:
                const value = DecodedBitStreamParser$1.parseECIValue(bits);
                currentCharacterSetECI = CharacterSetECI.getCharacterSetECIByValue(value);
                if (currentCharacterSetECI === null) {
                  throw new FormatException();
                }
                break;
              case Mode$1.HANZI:
                const subset = bits.readBits(4);
                const countHanzi = bits.readBits(mode.getCharacterCountBits(version));
                if (subset === DecodedBitStreamParser$1.GB2312_SUBSET) {
                  DecodedBitStreamParser$1.decodeHanziSegment(bits, result, countHanzi);
                }
                break;
              default:
                const count = bits.readBits(mode.getCharacterCountBits(version));
                switch (mode) {
                  case Mode$1.NUMERIC:
                    DecodedBitStreamParser$1.decodeNumericSegment(bits, result, count);
                    break;
                  case Mode$1.ALPHANUMERIC:
                    DecodedBitStreamParser$1.decodeAlphanumericSegment(bits, result, count, fc1InEffect);
                    break;
                  case Mode$1.BYTE:
                    DecodedBitStreamParser$1.decodeByteSegment(bits, result, count, currentCharacterSetECI, byteSegments, hints);
                    break;
                  case Mode$1.KANJI:
                    DecodedBitStreamParser$1.decodeKanjiSegment(bits, result, count);
                    break;
                  default:
                    throw new FormatException();
                }
                break;
            }
          } while (mode !== Mode$1.TERMINATOR);
        } catch (iae) {
          throw new FormatException();
        }
        return new DecoderResult(bytes, result.toString(), byteSegments.length === 0 ? null : byteSegments, ecLevel === null ? null : ecLevel.toString(), symbolSequence, parityData);
      }
      static decodeHanziSegment(bits, result, count) {
        if (count * 13 > bits.available()) {
          throw new FormatException();
        }
        const buffer = new Uint8Array(2 * count);
        let offset = 0;
        while (count > 0) {
          const twoBytes = bits.readBits(13);
          let assembledTwoBytes = twoBytes / 96 << 8 & 4294967295 | twoBytes % 96;
          if (assembledTwoBytes < 959) {
            assembledTwoBytes += 41377;
          } else {
            assembledTwoBytes += 42657;
          }
          buffer[offset] = assembledTwoBytes >> 8 & 255;
          buffer[offset + 1] = assembledTwoBytes & 255;
          offset += 2;
          count--;
        }
        try {
          result.append(StringEncoding.decode(buffer, StringUtils.GB2312));
        } catch (ignored) {
          throw new FormatException(ignored);
        }
      }
      static decodeKanjiSegment(bits, result, count) {
        if (count * 13 > bits.available()) {
          throw new FormatException();
        }
        const buffer = new Uint8Array(2 * count);
        let offset = 0;
        while (count > 0) {
          const twoBytes = bits.readBits(13);
          let assembledTwoBytes = twoBytes / 192 << 8 & 4294967295 | twoBytes % 192;
          if (assembledTwoBytes < 7936) {
            assembledTwoBytes += 33088;
          } else {
            assembledTwoBytes += 49472;
          }
          buffer[offset] = assembledTwoBytes >> 8;
          buffer[offset + 1] = assembledTwoBytes;
          offset += 2;
          count--;
        }
        try {
          result.append(StringEncoding.decode(buffer, StringUtils.SHIFT_JIS));
        } catch (ignored) {
          throw new FormatException(ignored);
        }
      }
      static decodeByteSegment(bits, result, count, currentCharacterSetECI, byteSegments, hints) {
        if (8 * count > bits.available()) {
          throw new FormatException();
        }
        const readBytes = new Uint8Array(count);
        for (let i = 0; i < count; i++) {
          readBytes[i] = bits.readBits(8);
        }
        let encoding;
        if (currentCharacterSetECI === null) {
          encoding = StringUtils.guessEncoding(readBytes, hints);
        } else {
          encoding = currentCharacterSetECI.getName();
        }
        try {
          result.append(StringEncoding.decode(readBytes, encoding));
        } catch (ignored) {
          throw new FormatException(ignored);
        }
        byteSegments.push(readBytes);
      }
      static toAlphaNumericChar(value) {
        if (value >= DecodedBitStreamParser$1.ALPHANUMERIC_CHARS.length) {
          throw new FormatException();
        }
        return DecodedBitStreamParser$1.ALPHANUMERIC_CHARS[value];
      }
      static decodeAlphanumericSegment(bits, result, count, fc1InEffect) {
        const start = result.length();
        while (count > 1) {
          if (bits.available() < 11) {
            throw new FormatException();
          }
          const nextTwoCharsBits = bits.readBits(11);
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(Math.floor(nextTwoCharsBits / 45)));
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(nextTwoCharsBits % 45));
          count -= 2;
        }
        if (count === 1) {
          if (bits.available() < 6) {
            throw new FormatException();
          }
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(bits.readBits(6)));
        }
        if (fc1InEffect) {
          for (let i = start; i < result.length(); i++) {
            if (result.charAt(i) === "%") {
              if (i < result.length() - 1 && result.charAt(i + 1) === "%") {
                result.deleteCharAt(i + 1);
              } else {
                result.setCharAt(i, String.fromCharCode(29));
              }
            }
          }
        }
      }
      static decodeNumericSegment(bits, result, count) {
        while (count >= 3) {
          if (bits.available() < 10) {
            throw new FormatException();
          }
          const threeDigitsBits = bits.readBits(10);
          if (threeDigitsBits >= 1e3) {
            throw new FormatException();
          }
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(Math.floor(threeDigitsBits / 100)));
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(Math.floor(threeDigitsBits / 10) % 10));
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(threeDigitsBits % 10));
          count -= 3;
        }
        if (count === 2) {
          if (bits.available() < 7) {
            throw new FormatException();
          }
          const twoDigitsBits = bits.readBits(7);
          if (twoDigitsBits >= 100) {
            throw new FormatException();
          }
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(Math.floor(twoDigitsBits / 10)));
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(twoDigitsBits % 10));
        } else if (count === 1) {
          if (bits.available() < 4) {
            throw new FormatException();
          }
          const digitBits = bits.readBits(4);
          if (digitBits >= 10) {
            throw new FormatException();
          }
          result.append(DecodedBitStreamParser$1.toAlphaNumericChar(digitBits));
        }
      }
      static parseECIValue(bits) {
        const firstByte = bits.readBits(8);
        if ((firstByte & 128) === 0) {
          return firstByte & 127;
        }
        if ((firstByte & 192) === 128) {
          const secondByte = bits.readBits(8);
          return (firstByte & 63) << 8 & 4294967295 | secondByte;
        }
        if ((firstByte & 224) === 192) {
          const secondThirdBytes = bits.readBits(16);
          return (firstByte & 31) << 16 & 4294967295 | secondThirdBytes;
        }
        throw new FormatException();
      }
    }
    DecodedBitStreamParser$1.ALPHANUMERIC_CHARS = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";
    DecodedBitStreamParser$1.GB2312_SUBSET = 1;
    class QRCodeDecoderMetaData {
      constructor(mirrored) {
        this.mirrored = mirrored;
      }
      isMirrored() {
        return this.mirrored;
      }
      applyMirroredCorrection(points) {
        if (!this.mirrored || points === null || points.length < 3) {
          return;
        }
        const bottomLeft = points[0];
        points[0] = points[2];
        points[2] = bottomLeft;
      }
    }
    class Decoder$2 {
      constructor() {
        this.rsDecoder = new ReedSolomonDecoder(GenericGF.QR_CODE_FIELD_256);
      }
      decodeBooleanArray(image, hints) {
        return this.decodeBitMatrix(BitMatrix.parseFromBooleanArray(image), hints);
      }
      decodeBitMatrix(bits, hints) {
        const parser = new BitMatrixParser$1(bits);
        let ex = null;
        try {
          return this.decodeBitMatrixParser(parser, hints);
        } catch (e) {
          ex = e;
        }
        try {
          parser.remask();
          parser.setMirror(true);
          parser.readVersion();
          parser.readFormatInformation();
          parser.mirror();
          const result = this.decodeBitMatrixParser(parser, hints);
          result.setOther(new QRCodeDecoderMetaData(true));
          return result;
        } catch (e) {
          if (ex !== null) {
            throw ex;
          }
          throw e;
        }
      }
      decodeBitMatrixParser(parser, hints) {
        const version = parser.readVersion();
        const ecLevel = parser.readFormatInformation().getErrorCorrectionLevel();
        const codewords = parser.readCodewords();
        const dataBlocks = DataBlock$1.getDataBlocks(codewords, version, ecLevel);
        let totalBytes = 0;
        for (const dataBlock of dataBlocks) {
          totalBytes += dataBlock.getNumDataCodewords();
        }
        const resultBytes = new Uint8Array(totalBytes);
        let resultOffset = 0;
        for (const dataBlock of dataBlocks) {
          const codewordBytes = dataBlock.getCodewords();
          const numDataCodewords = dataBlock.getNumDataCodewords();
          this.correctErrors(codewordBytes, numDataCodewords);
          for (let i = 0; i < numDataCodewords; i++) {
            resultBytes[resultOffset++] = codewordBytes[i];
          }
        }
        return DecodedBitStreamParser$1.decode(resultBytes, version, ecLevel, hints);
      }
      correctErrors(codewordBytes, numDataCodewords) {
        const codewordsInts = new Int32Array(codewordBytes);
        try {
          this.rsDecoder.decode(codewordsInts, codewordBytes.length - numDataCodewords);
        } catch (ignored) {
          throw new ChecksumException();
        }
        for (let i = 0; i < numDataCodewords; i++) {
          codewordBytes[i] = codewordsInts[i];
        }
      }
    }
    class AlignmentPattern extends ResultPoint {
      constructor(posX, posY, estimatedModuleSize) {
        super(posX, posY);
        this.estimatedModuleSize = estimatedModuleSize;
      }
      aboutEquals(moduleSize, i, j) {
        if (Math.abs(i - this.getY()) <= moduleSize && Math.abs(j - this.getX()) <= moduleSize) {
          const moduleSizeDiff = Math.abs(moduleSize - this.estimatedModuleSize);
          return moduleSizeDiff <= 1 || moduleSizeDiff <= this.estimatedModuleSize;
        }
        return false;
      }
      combineEstimate(i, j, newModuleSize) {
        const combinedX = (this.getX() + j) / 2;
        const combinedY = (this.getY() + i) / 2;
        const combinedModuleSize = (this.estimatedModuleSize + newModuleSize) / 2;
        return new AlignmentPattern(combinedX, combinedY, combinedModuleSize);
      }
    }
    class AlignmentPatternFinder {
      constructor(image, startX, startY, width, height, moduleSize, resultPointCallback) {
        this.image = image;
        this.startX = startX;
        this.startY = startY;
        this.width = width;
        this.height = height;
        this.moduleSize = moduleSize;
        this.resultPointCallback = resultPointCallback;
        this.possibleCenters = [];
        this.crossCheckStateCount = new Int32Array(3);
      }
      find() {
        const startX = this.startX;
        const height = this.height;
        const width = this.width;
        const maxJ = startX + width;
        const middleI = this.startY + height / 2;
        const stateCount = new Int32Array(3);
        const image = this.image;
        for (let iGen = 0; iGen < height; iGen++) {
          const i = middleI + ((iGen & 1) === 0 ? Math.floor((iGen + 1) / 2) : -Math.floor((iGen + 1) / 2));
          stateCount[0] = 0;
          stateCount[1] = 0;
          stateCount[2] = 0;
          let j = startX;
          while (j < maxJ && !image.get(j, i)) {
            j++;
          }
          let currentState = 0;
          while (j < maxJ) {
            if (image.get(j, i)) {
              if (currentState === 1) {
                stateCount[1]++;
              } else {
                if (currentState === 2) {
                  if (this.foundPatternCross(stateCount)) {
                    const confirmed = this.handlePossibleCenter(stateCount, i, j);
                    if (confirmed !== null) {
                      return confirmed;
                    }
                  }
                  stateCount[0] = stateCount[2];
                  stateCount[1] = 1;
                  stateCount[2] = 0;
                  currentState = 1;
                } else {
                  stateCount[++currentState]++;
                }
              }
            } else {
              if (currentState === 1) {
                currentState++;
              }
              stateCount[currentState]++;
            }
            j++;
          }
          if (this.foundPatternCross(stateCount)) {
            const confirmed = this.handlePossibleCenter(stateCount, i, maxJ);
            if (confirmed !== null) {
              return confirmed;
            }
          }
        }
        if (this.possibleCenters.length !== 0) {
          return this.possibleCenters[0];
        }
        throw new NotFoundException();
      }
      static centerFromEnd(stateCount, end) {
        return end - stateCount[2] - stateCount[1] / 2;
      }
      foundPatternCross(stateCount) {
        const moduleSize = this.moduleSize;
        const maxVariance = moduleSize / 2;
        for (let i = 0; i < 3; i++) {
          if (Math.abs(moduleSize - stateCount[i]) >= maxVariance) {
            return false;
          }
        }
        return true;
      }
      crossCheckVertical(startI, centerJ, maxCount, originalStateCountTotal) {
        const image = this.image;
        const maxI = image.getHeight();
        const stateCount = this.crossCheckStateCount;
        stateCount[0] = 0;
        stateCount[1] = 0;
        stateCount[2] = 0;
        let i = startI;
        while (i >= 0 && image.get(centerJ, i) && stateCount[1] <= maxCount) {
          stateCount[1]++;
          i--;
        }
        if (i < 0 || stateCount[1] > maxCount) {
          return NaN;
        }
        while (i >= 0 && !image.get(centerJ, i) && stateCount[0] <= maxCount) {
          stateCount[0]++;
          i--;
        }
        if (stateCount[0] > maxCount) {
          return NaN;
        }
        i = startI + 1;
        while (i < maxI && image.get(centerJ, i) && stateCount[1] <= maxCount) {
          stateCount[1]++;
          i++;
        }
        if (i === maxI || stateCount[1] > maxCount) {
          return NaN;
        }
        while (i < maxI && !image.get(centerJ, i) && stateCount[2] <= maxCount) {
          stateCount[2]++;
          i++;
        }
        if (stateCount[2] > maxCount) {
          return NaN;
        }
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2];
        if (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= 2 * originalStateCountTotal) {
          return NaN;
        }
        return this.foundPatternCross(stateCount) ? AlignmentPatternFinder.centerFromEnd(stateCount, i) : NaN;
      }
      handlePossibleCenter(stateCount, i, j) {
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2];
        const centerJ = AlignmentPatternFinder.centerFromEnd(stateCount, j);
        const centerI = this.crossCheckVertical(i, centerJ, 2 * stateCount[1], stateCountTotal);
        if (!isNaN(centerI)) {
          const estimatedModuleSize = (stateCount[0] + stateCount[1] + stateCount[2]) / 3;
          for (const center of this.possibleCenters) {
            if (center.aboutEquals(estimatedModuleSize, centerI, centerJ)) {
              return center.combineEstimate(centerI, centerJ, estimatedModuleSize);
            }
          }
          const point = new AlignmentPattern(centerJ, centerI, estimatedModuleSize);
          this.possibleCenters.push(point);
          if (this.resultPointCallback !== null && this.resultPointCallback !== void 0) {
            this.resultPointCallback.foundPossibleResultPoint(point);
          }
        }
        return null;
      }
    }
    class FinderPattern$1 extends ResultPoint {
      constructor(posX, posY, estimatedModuleSize, count) {
        super(posX, posY);
        this.estimatedModuleSize = estimatedModuleSize;
        this.count = count;
        if (void 0 === count) {
          this.count = 1;
        }
      }
      getEstimatedModuleSize() {
        return this.estimatedModuleSize;
      }
      getCount() {
        return this.count;
      }
      aboutEquals(moduleSize, i, j) {
        if (Math.abs(i - this.getY()) <= moduleSize && Math.abs(j - this.getX()) <= moduleSize) {
          const moduleSizeDiff = Math.abs(moduleSize - this.estimatedModuleSize);
          return moduleSizeDiff <= 1 || moduleSizeDiff <= this.estimatedModuleSize;
        }
        return false;
      }
      combineEstimate(i, j, newModuleSize) {
        const combinedCount = this.count + 1;
        const combinedX = (this.count * this.getX() + j) / combinedCount;
        const combinedY = (this.count * this.getY() + i) / combinedCount;
        const combinedModuleSize = (this.count * this.estimatedModuleSize + newModuleSize) / combinedCount;
        return new FinderPattern$1(combinedX, combinedY, combinedModuleSize, combinedCount);
      }
    }
    class FinderPatternInfo {
      constructor(patternCenters) {
        this.bottomLeft = patternCenters[0];
        this.topLeft = patternCenters[1];
        this.topRight = patternCenters[2];
      }
      getBottomLeft() {
        return this.bottomLeft;
      }
      getTopLeft() {
        return this.topLeft;
      }
      getTopRight() {
        return this.topRight;
      }
    }
    class FinderPatternFinder {
      constructor(image, resultPointCallback) {
        this.image = image;
        this.resultPointCallback = resultPointCallback;
        this.possibleCenters = [];
        this.crossCheckStateCount = new Int32Array(5);
        this.resultPointCallback = resultPointCallback;
      }
      getImage() {
        return this.image;
      }
      getPossibleCenters() {
        return this.possibleCenters;
      }
      find(hints) {
        const tryHarder = hints !== null && hints !== void 0 && void 0 !== hints.get(DecodeHintType$1.TRY_HARDER);
        const pureBarcode = hints !== null && hints !== void 0 && void 0 !== hints.get(DecodeHintType$1.PURE_BARCODE);
        const image = this.image;
        const maxI = image.getHeight();
        const maxJ = image.getWidth();
        let iSkip = Math.floor(3 * maxI / (4 * FinderPatternFinder.MAX_MODULES));
        if (iSkip < FinderPatternFinder.MIN_SKIP || tryHarder) {
          iSkip = FinderPatternFinder.MIN_SKIP;
        }
        let done = false;
        const stateCount = new Int32Array(5);
        for (let i = iSkip - 1; i < maxI && !done; i += iSkip) {
          stateCount[0] = 0;
          stateCount[1] = 0;
          stateCount[2] = 0;
          stateCount[3] = 0;
          stateCount[4] = 0;
          let currentState = 0;
          for (let j = 0; j < maxJ; j++) {
            if (image.get(j, i)) {
              if ((currentState & 1) === 1) {
                currentState++;
              }
              stateCount[currentState]++;
            } else {
              if ((currentState & 1) === 0) {
                if (currentState === 4) {
                  if (FinderPatternFinder.foundPatternCross(stateCount)) {
                    const confirmed = this.handlePossibleCenter(stateCount, i, j, pureBarcode);
                    if (confirmed === true) {
                      iSkip = 2;
                      if (this.hasSkipped === true) {
                        done = this.haveMultiplyConfirmedCenters();
                      } else {
                        const rowSkip = this.findRowSkip();
                        if (rowSkip > stateCount[2]) {
                          i += rowSkip - stateCount[2] - iSkip;
                          j = maxJ - 1;
                        }
                      }
                    } else {
                      stateCount[0] = stateCount[2];
                      stateCount[1] = stateCount[3];
                      stateCount[2] = stateCount[4];
                      stateCount[3] = 1;
                      stateCount[4] = 0;
                      currentState = 3;
                      continue;
                    }
                    currentState = 0;
                    stateCount[0] = 0;
                    stateCount[1] = 0;
                    stateCount[2] = 0;
                    stateCount[3] = 0;
                    stateCount[4] = 0;
                  } else {
                    stateCount[0] = stateCount[2];
                    stateCount[1] = stateCount[3];
                    stateCount[2] = stateCount[4];
                    stateCount[3] = 1;
                    stateCount[4] = 0;
                    currentState = 3;
                  }
                } else {
                  stateCount[++currentState]++;
                }
              } else {
                stateCount[currentState]++;
              }
            }
          }
          if (FinderPatternFinder.foundPatternCross(stateCount)) {
            const confirmed = this.handlePossibleCenter(stateCount, i, maxJ, pureBarcode);
            if (confirmed === true) {
              iSkip = stateCount[0];
              if (this.hasSkipped) {
                done = this.haveMultiplyConfirmedCenters();
              }
            }
          }
        }
        const patternInfo = this.selectBestPatterns();
        ResultPoint.orderBestPatterns(patternInfo);
        return new FinderPatternInfo(patternInfo);
      }
      static centerFromEnd(stateCount, end) {
        return end - stateCount[4] - stateCount[3] - stateCount[2] / 2;
      }
      static foundPatternCross(stateCount) {
        let totalModuleSize = 0;
        for (let i = 0; i < 5; i++) {
          const count = stateCount[i];
          if (count === 0) {
            return false;
          }
          totalModuleSize += count;
        }
        if (totalModuleSize < 7) {
          return false;
        }
        const moduleSize = totalModuleSize / 7;
        const maxVariance = moduleSize / 2;
        return Math.abs(moduleSize - stateCount[0]) < maxVariance && Math.abs(moduleSize - stateCount[1]) < maxVariance && Math.abs(3 * moduleSize - stateCount[2]) < 3 * maxVariance && Math.abs(moduleSize - stateCount[3]) < maxVariance && Math.abs(moduleSize - stateCount[4]) < maxVariance;
      }
      getCrossCheckStateCount() {
        const crossCheckStateCount = this.crossCheckStateCount;
        crossCheckStateCount[0] = 0;
        crossCheckStateCount[1] = 0;
        crossCheckStateCount[2] = 0;
        crossCheckStateCount[3] = 0;
        crossCheckStateCount[4] = 0;
        return crossCheckStateCount;
      }
      crossCheckDiagonal(startI, centerJ, maxCount, originalStateCountTotal) {
        const stateCount = this.getCrossCheckStateCount();
        let i = 0;
        const image = this.image;
        while (startI >= i && centerJ >= i && image.get(centerJ - i, startI - i)) {
          stateCount[2]++;
          i++;
        }
        if (startI < i || centerJ < i) {
          return false;
        }
        while (startI >= i && centerJ >= i && !image.get(centerJ - i, startI - i) && stateCount[1] <= maxCount) {
          stateCount[1]++;
          i++;
        }
        if (startI < i || centerJ < i || stateCount[1] > maxCount) {
          return false;
        }
        while (startI >= i && centerJ >= i && image.get(centerJ - i, startI - i) && stateCount[0] <= maxCount) {
          stateCount[0]++;
          i++;
        }
        if (stateCount[0] > maxCount) {
          return false;
        }
        const maxI = image.getHeight();
        const maxJ = image.getWidth();
        i = 1;
        while (startI + i < maxI && centerJ + i < maxJ && image.get(centerJ + i, startI + i)) {
          stateCount[2]++;
          i++;
        }
        if (startI + i >= maxI || centerJ + i >= maxJ) {
          return false;
        }
        while (startI + i < maxI && centerJ + i < maxJ && !image.get(centerJ + i, startI + i) && stateCount[3] < maxCount) {
          stateCount[3]++;
          i++;
        }
        if (startI + i >= maxI || centerJ + i >= maxJ || stateCount[3] >= maxCount) {
          return false;
        }
        while (startI + i < maxI && centerJ + i < maxJ && image.get(centerJ + i, startI + i) && stateCount[4] < maxCount) {
          stateCount[4]++;
          i++;
        }
        if (stateCount[4] >= maxCount) {
          return false;
        }
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];
        return Math.abs(stateCountTotal - originalStateCountTotal) < 2 * originalStateCountTotal && FinderPatternFinder.foundPatternCross(stateCount);
      }
      crossCheckVertical(startI, centerJ, maxCount, originalStateCountTotal) {
        const image = this.image;
        const maxI = image.getHeight();
        const stateCount = this.getCrossCheckStateCount();
        let i = startI;
        while (i >= 0 && image.get(centerJ, i)) {
          stateCount[2]++;
          i--;
        }
        if (i < 0) {
          return NaN;
        }
        while (i >= 0 && !image.get(centerJ, i) && stateCount[1] <= maxCount) {
          stateCount[1]++;
          i--;
        }
        if (i < 0 || stateCount[1] > maxCount) {
          return NaN;
        }
        while (i >= 0 && image.get(centerJ, i) && stateCount[0] <= maxCount) {
          stateCount[0]++;
          i--;
        }
        if (stateCount[0] > maxCount) {
          return NaN;
        }
        i = startI + 1;
        while (i < maxI && image.get(centerJ, i)) {
          stateCount[2]++;
          i++;
        }
        if (i === maxI) {
          return NaN;
        }
        while (i < maxI && !image.get(centerJ, i) && stateCount[3] < maxCount) {
          stateCount[3]++;
          i++;
        }
        if (i === maxI || stateCount[3] >= maxCount) {
          return NaN;
        }
        while (i < maxI && image.get(centerJ, i) && stateCount[4] < maxCount) {
          stateCount[4]++;
          i++;
        }
        if (stateCount[4] >= maxCount) {
          return NaN;
        }
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];
        if (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= 2 * originalStateCountTotal) {
          return NaN;
        }
        return FinderPatternFinder.foundPatternCross(stateCount) ? FinderPatternFinder.centerFromEnd(stateCount, i) : NaN;
      }
      crossCheckHorizontal(startJ, centerI, maxCount, originalStateCountTotal) {
        const image = this.image;
        const maxJ = image.getWidth();
        const stateCount = this.getCrossCheckStateCount();
        let j = startJ;
        while (j >= 0 && image.get(j, centerI)) {
          stateCount[2]++;
          j--;
        }
        if (j < 0) {
          return NaN;
        }
        while (j >= 0 && !image.get(j, centerI) && stateCount[1] <= maxCount) {
          stateCount[1]++;
          j--;
        }
        if (j < 0 || stateCount[1] > maxCount) {
          return NaN;
        }
        while (j >= 0 && image.get(j, centerI) && stateCount[0] <= maxCount) {
          stateCount[0]++;
          j--;
        }
        if (stateCount[0] > maxCount) {
          return NaN;
        }
        j = startJ + 1;
        while (j < maxJ && image.get(j, centerI)) {
          stateCount[2]++;
          j++;
        }
        if (j === maxJ) {
          return NaN;
        }
        while (j < maxJ && !image.get(j, centerI) && stateCount[3] < maxCount) {
          stateCount[3]++;
          j++;
        }
        if (j === maxJ || stateCount[3] >= maxCount) {
          return NaN;
        }
        while (j < maxJ && image.get(j, centerI) && stateCount[4] < maxCount) {
          stateCount[4]++;
          j++;
        }
        if (stateCount[4] >= maxCount) {
          return NaN;
        }
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];
        if (5 * Math.abs(stateCountTotal - originalStateCountTotal) >= originalStateCountTotal) {
          return NaN;
        }
        return FinderPatternFinder.foundPatternCross(stateCount) ? FinderPatternFinder.centerFromEnd(stateCount, j) : NaN;
      }
      handlePossibleCenter(stateCount, i, j, pureBarcode) {
        const stateCountTotal = stateCount[0] + stateCount[1] + stateCount[2] + stateCount[3] + stateCount[4];
        let centerJ = FinderPatternFinder.centerFromEnd(stateCount, j);
        let centerI = this.crossCheckVertical(i, Math.floor(centerJ), stateCount[2], stateCountTotal);
        if (!isNaN(centerI)) {
          centerJ = this.crossCheckHorizontal(Math.floor(centerJ), Math.floor(centerI), stateCount[2], stateCountTotal);
          if (!isNaN(centerJ) && (!pureBarcode || this.crossCheckDiagonal(Math.floor(centerI), Math.floor(centerJ), stateCount[2], stateCountTotal))) {
            const estimatedModuleSize = stateCountTotal / 7;
            let found = false;
            const possibleCenters = this.possibleCenters;
            for (let index = 0, length = possibleCenters.length; index < length; index++) {
              const center = possibleCenters[index];
              if (center.aboutEquals(estimatedModuleSize, centerI, centerJ)) {
                possibleCenters[index] = center.combineEstimate(centerI, centerJ, estimatedModuleSize);
                found = true;
                break;
              }
            }
            if (!found) {
              const point = new FinderPattern$1(centerJ, centerI, estimatedModuleSize);
              possibleCenters.push(point);
              if (this.resultPointCallback !== null && this.resultPointCallback !== void 0) {
                this.resultPointCallback.foundPossibleResultPoint(point);
              }
            }
            return true;
          }
        }
        return false;
      }
      findRowSkip() {
        const max = this.possibleCenters.length;
        if (max <= 1) {
          return 0;
        }
        let firstConfirmedCenter = null;
        for (const center of this.possibleCenters) {
          if (center.getCount() >= FinderPatternFinder.CENTER_QUORUM) {
            if (firstConfirmedCenter == null) {
              firstConfirmedCenter = center;
            } else {
              this.hasSkipped = true;
              return Math.floor((Math.abs(firstConfirmedCenter.getX() - center.getX()) - Math.abs(firstConfirmedCenter.getY() - center.getY())) / 2);
            }
          }
        }
        return 0;
      }
      haveMultiplyConfirmedCenters() {
        let confirmedCount = 0;
        let totalModuleSize = 0;
        const max = this.possibleCenters.length;
        for (const pattern of this.possibleCenters) {
          if (pattern.getCount() >= FinderPatternFinder.CENTER_QUORUM) {
            confirmedCount++;
            totalModuleSize += pattern.getEstimatedModuleSize();
          }
        }
        if (confirmedCount < 3) {
          return false;
        }
        const average = totalModuleSize / max;
        let totalDeviation = 0;
        for (const pattern of this.possibleCenters) {
          totalDeviation += Math.abs(pattern.getEstimatedModuleSize() - average);
        }
        return totalDeviation <= 0.05 * totalModuleSize;
      }
      selectBestPatterns() {
        const startSize = this.possibleCenters.length;
        if (startSize < 3) {
          throw new NotFoundException();
        }
        const possibleCenters = this.possibleCenters;
        let average;
        if (startSize > 3) {
          let totalModuleSize = 0;
          let square = 0;
          for (const center of this.possibleCenters) {
            const size = center.getEstimatedModuleSize();
            totalModuleSize += size;
            square += size * size;
          }
          average = totalModuleSize / startSize;
          let stdDev = Math.sqrt(square / startSize - average * average);
          possibleCenters.sort(
            (center1, center2) => {
              const dA = Math.abs(center2.getEstimatedModuleSize() - average);
              const dB = Math.abs(center1.getEstimatedModuleSize() - average);
              return dA < dB ? -1 : dA > dB ? 1 : 0;
            }
          );
          const limit = Math.max(0.2 * average, stdDev);
          for (let i = 0; i < possibleCenters.length && possibleCenters.length > 3; i++) {
            const pattern = possibleCenters[i];
            if (Math.abs(pattern.getEstimatedModuleSize() - average) > limit) {
              possibleCenters.splice(i, 1);
              i--;
            }
          }
        }
        if (possibleCenters.length > 3) {
          let totalModuleSize = 0;
          for (const possibleCenter of possibleCenters) {
            totalModuleSize += possibleCenter.getEstimatedModuleSize();
          }
          average = totalModuleSize / possibleCenters.length;
          possibleCenters.sort(
            (center1, center2) => {
              if (center2.getCount() === center1.getCount()) {
                const dA = Math.abs(center2.getEstimatedModuleSize() - average);
                const dB = Math.abs(center1.getEstimatedModuleSize() - average);
                return dA < dB ? 1 : dA > dB ? -1 : 0;
              } else {
                return center2.getCount() - center1.getCount();
              }
            }
          );
          possibleCenters.splice(3);
        }
        return [
          possibleCenters[0],
          possibleCenters[1],
          possibleCenters[2]
        ];
      }
    }
    FinderPatternFinder.CENTER_QUORUM = 2;
    FinderPatternFinder.MIN_SKIP = 3;
    FinderPatternFinder.MAX_MODULES = 57;
    class Detector$2 {
      constructor(image) {
        this.image = image;
      }
      getImage() {
        return this.image;
      }
      getResultPointCallback() {
        return this.resultPointCallback;
      }
      detect(hints) {
        this.resultPointCallback = hints === null || hints === void 0 ? null : hints.get(DecodeHintType$1.NEED_RESULT_POINT_CALLBACK);
        const finder = new FinderPatternFinder(this.image, this.resultPointCallback);
        const info = finder.find(hints);
        return this.processFinderPatternInfo(info);
      }
      processFinderPatternInfo(info) {
        const topLeft = info.getTopLeft();
        const topRight = info.getTopRight();
        const bottomLeft = info.getBottomLeft();
        const moduleSize = this.calculateModuleSize(topLeft, topRight, bottomLeft);
        if (moduleSize < 1) {
          throw new NotFoundException("No pattern found in proccess finder.");
        }
        const dimension = Detector$2.computeDimension(topLeft, topRight, bottomLeft, moduleSize);
        const provisionalVersion = Version$1.getProvisionalVersionForDimension(dimension);
        const modulesBetweenFPCenters = provisionalVersion.getDimensionForVersion() - 7;
        let alignmentPattern = null;
        if (provisionalVersion.getAlignmentPatternCenters().length > 0) {
          const bottomRightX = topRight.getX() - topLeft.getX() + bottomLeft.getX();
          const bottomRightY = topRight.getY() - topLeft.getY() + bottomLeft.getY();
          const correctionToTopLeft = 1 - 3 / modulesBetweenFPCenters;
          const estAlignmentX = Math.floor(topLeft.getX() + correctionToTopLeft * (bottomRightX - topLeft.getX()));
          const estAlignmentY = Math.floor(topLeft.getY() + correctionToTopLeft * (bottomRightY - topLeft.getY()));
          for (let i = 4; i <= 16; i <<= 1) {
            try {
              alignmentPattern = this.findAlignmentInRegion(moduleSize, estAlignmentX, estAlignmentY, i);
              break;
            } catch (re) {
              if (!(re instanceof NotFoundException)) {
                throw re;
              }
            }
          }
        }
        const transform = Detector$2.createTransform(topLeft, topRight, bottomLeft, alignmentPattern, dimension);
        const bits = Detector$2.sampleGrid(this.image, transform, dimension);
        let points;
        if (alignmentPattern === null) {
          points = [bottomLeft, topLeft, topRight];
        } else {
          points = [bottomLeft, topLeft, topRight, alignmentPattern];
        }
        return new DetectorResult(bits, points);
      }
      static createTransform(topLeft, topRight, bottomLeft, alignmentPattern, dimension) {
        const dimMinusThree = dimension - 3.5;
        let bottomRightX;
        let bottomRightY;
        let sourceBottomRightX;
        let sourceBottomRightY;
        if (alignmentPattern !== null) {
          bottomRightX = alignmentPattern.getX();
          bottomRightY = alignmentPattern.getY();
          sourceBottomRightX = dimMinusThree - 3;
          sourceBottomRightY = sourceBottomRightX;
        } else {
          bottomRightX = topRight.getX() - topLeft.getX() + bottomLeft.getX();
          bottomRightY = topRight.getY() - topLeft.getY() + bottomLeft.getY();
          sourceBottomRightX = dimMinusThree;
          sourceBottomRightY = dimMinusThree;
        }
        return PerspectiveTransform.quadrilateralToQuadrilateral(3.5, 3.5, dimMinusThree, 3.5, sourceBottomRightX, sourceBottomRightY, 3.5, dimMinusThree, topLeft.getX(), topLeft.getY(), topRight.getX(), topRight.getY(), bottomRightX, bottomRightY, bottomLeft.getX(), bottomLeft.getY());
      }
      static sampleGrid(image, transform, dimension) {
        const sampler = GridSamplerInstance.getInstance();
        return sampler.sampleGridWithTransform(image, dimension, dimension, transform);
      }
      static computeDimension(topLeft, topRight, bottomLeft, moduleSize) {
        const tltrCentersDimension = MathUtils.round(ResultPoint.distance(topLeft, topRight) / moduleSize);
        const tlblCentersDimension = MathUtils.round(ResultPoint.distance(topLeft, bottomLeft) / moduleSize);
        let dimension = Math.floor((tltrCentersDimension + tlblCentersDimension) / 2) + 7;
        switch (dimension & 3) {
          case 0:
            dimension++;
            break;
          case 2:
            dimension--;
            break;
          case 3:
            throw new NotFoundException("Dimensions could be not found.");
        }
        return dimension;
      }
      calculateModuleSize(topLeft, topRight, bottomLeft) {
        return (this.calculateModuleSizeOneWay(topLeft, topRight) + this.calculateModuleSizeOneWay(topLeft, bottomLeft)) / 2;
      }
      calculateModuleSizeOneWay(pattern, otherPattern) {
        const moduleSizeEst1 = this.sizeOfBlackWhiteBlackRunBothWays(
          Math.floor(pattern.getX()),
          Math.floor(pattern.getY()),
          Math.floor(otherPattern.getX()),
          Math.floor(otherPattern.getY())
        );
        const moduleSizeEst2 = this.sizeOfBlackWhiteBlackRunBothWays(
          Math.floor(otherPattern.getX()),
          Math.floor(otherPattern.getY()),
          Math.floor(pattern.getX()),
          Math.floor(pattern.getY())
        );
        if (isNaN(moduleSizeEst1)) {
          return moduleSizeEst2 / 7;
        }
        if (isNaN(moduleSizeEst2)) {
          return moduleSizeEst1 / 7;
        }
        return (moduleSizeEst1 + moduleSizeEst2) / 14;
      }
      sizeOfBlackWhiteBlackRunBothWays(fromX, fromY, toX, toY) {
        let result = this.sizeOfBlackWhiteBlackRun(fromX, fromY, toX, toY);
        let scale = 1;
        let otherToX = fromX - (toX - fromX);
        if (otherToX < 0) {
          scale = fromX / (fromX - otherToX);
          otherToX = 0;
        } else if (otherToX >= this.image.getWidth()) {
          scale = (this.image.getWidth() - 1 - fromX) / (otherToX - fromX);
          otherToX = this.image.getWidth() - 1;
        }
        let otherToY = Math.floor(fromY - (toY - fromY) * scale);
        scale = 1;
        if (otherToY < 0) {
          scale = fromY / (fromY - otherToY);
          otherToY = 0;
        } else if (otherToY >= this.image.getHeight()) {
          scale = (this.image.getHeight() - 1 - fromY) / (otherToY - fromY);
          otherToY = this.image.getHeight() - 1;
        }
        otherToX = Math.floor(fromX + (otherToX - fromX) * scale);
        result += this.sizeOfBlackWhiteBlackRun(fromX, fromY, otherToX, otherToY);
        return result - 1;
      }
      sizeOfBlackWhiteBlackRun(fromX, fromY, toX, toY) {
        const steep = Math.abs(toY - fromY) > Math.abs(toX - fromX);
        if (steep) {
          let temp = fromX;
          fromX = fromY;
          fromY = temp;
          temp = toX;
          toX = toY;
          toY = temp;
        }
        const dx = Math.abs(toX - fromX);
        const dy = Math.abs(toY - fromY);
        let error2 = -dx / 2;
        const xstep = fromX < toX ? 1 : -1;
        const ystep = fromY < toY ? 1 : -1;
        let state = 0;
        const xLimit = toX + xstep;
        for (let x = fromX, y = fromY; x !== xLimit; x += xstep) {
          const realX = steep ? y : x;
          const realY = steep ? x : y;
          if (state === 1 === this.image.get(realX, realY)) {
            if (state === 2) {
              return MathUtils.distance(x, y, fromX, fromY);
            }
            state++;
          }
          error2 += dy;
          if (error2 > 0) {
            if (y === toY) {
              break;
            }
            y += ystep;
            error2 -= dx;
          }
        }
        if (state === 2) {
          return MathUtils.distance(toX + xstep, toY, fromX, fromY);
        }
        return NaN;
      }
      findAlignmentInRegion(overallEstModuleSize, estAlignmentX, estAlignmentY, allowanceFactor) {
        const allowance = Math.floor(allowanceFactor * overallEstModuleSize);
        const alignmentAreaLeftX = Math.max(0, estAlignmentX - allowance);
        const alignmentAreaRightX = Math.min(this.image.getWidth() - 1, estAlignmentX + allowance);
        if (alignmentAreaRightX - alignmentAreaLeftX < overallEstModuleSize * 3) {
          throw new NotFoundException("Alignment top exceeds estimated module size.");
        }
        const alignmentAreaTopY = Math.max(0, estAlignmentY - allowance);
        const alignmentAreaBottomY = Math.min(this.image.getHeight() - 1, estAlignmentY + allowance);
        if (alignmentAreaBottomY - alignmentAreaTopY < overallEstModuleSize * 3) {
          throw new NotFoundException("Alignment bottom exceeds estimated module size.");
        }
        const alignmentFinder = new AlignmentPatternFinder(this.image, alignmentAreaLeftX, alignmentAreaTopY, alignmentAreaRightX - alignmentAreaLeftX, alignmentAreaBottomY - alignmentAreaTopY, overallEstModuleSize, this.resultPointCallback);
        return alignmentFinder.find();
      }
    }
    class QRCodeReader {
      constructor() {
        this.decoder = new Decoder$2();
      }
      getDecoder() {
        return this.decoder;
      }
      decode(image, hints) {
        let decoderResult;
        let points;
        if (hints !== void 0 && hints !== null && void 0 !== hints.get(DecodeHintType$1.PURE_BARCODE)) {
          const bits = QRCodeReader.extractPureBits(image.getBlackMatrix());
          decoderResult = this.decoder.decodeBitMatrix(bits, hints);
          points = QRCodeReader.NO_POINTS;
        } else {
          const detectorResult = new Detector$2(image.getBlackMatrix()).detect(hints);
          decoderResult = this.decoder.decodeBitMatrix(detectorResult.getBits(), hints);
          points = detectorResult.getPoints();
        }
        if (decoderResult.getOther() instanceof QRCodeDecoderMetaData) {
          decoderResult.getOther().applyMirroredCorrection(points);
        }
        const result = new Result(decoderResult.getText(), decoderResult.getRawBytes(), void 0, points, BarcodeFormat$1.QR_CODE, void 0);
        const byteSegments = decoderResult.getByteSegments();
        if (byteSegments !== null) {
          result.putMetadata(ResultMetadataType$1.BYTE_SEGMENTS, byteSegments);
        }
        const ecLevel = decoderResult.getECLevel();
        if (ecLevel !== null) {
          result.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL, ecLevel);
        }
        if (decoderResult.hasStructuredAppend()) {
          result.putMetadata(ResultMetadataType$1.STRUCTURED_APPEND_SEQUENCE, decoderResult.getStructuredAppendSequenceNumber());
          result.putMetadata(ResultMetadataType$1.STRUCTURED_APPEND_PARITY, decoderResult.getStructuredAppendParity());
        }
        return result;
      }
      reset() {
      }
      static extractPureBits(image) {
        const leftTopBlack = image.getTopLeftOnBit();
        const rightBottomBlack = image.getBottomRightOnBit();
        if (leftTopBlack === null || rightBottomBlack === null) {
          throw new NotFoundException();
        }
        const moduleSize = this.moduleSize(leftTopBlack, image);
        let top = leftTopBlack[1];
        let bottom = rightBottomBlack[1];
        let left = leftTopBlack[0];
        let right = rightBottomBlack[0];
        if (left >= right || top >= bottom) {
          throw new NotFoundException();
        }
        if (bottom - top !== right - left) {
          right = left + (bottom - top);
          if (right >= image.getWidth()) {
            throw new NotFoundException();
          }
        }
        const matrixWidth = Math.round((right - left + 1) / moduleSize);
        const matrixHeight = Math.round((bottom - top + 1) / moduleSize);
        if (matrixWidth <= 0 || matrixHeight <= 0) {
          throw new NotFoundException();
        }
        if (matrixHeight !== matrixWidth) {
          throw new NotFoundException();
        }
        const nudge = Math.floor(moduleSize / 2);
        top += nudge;
        left += nudge;
        const nudgedTooFarRight = left + Math.floor((matrixWidth - 1) * moduleSize) - right;
        if (nudgedTooFarRight > 0) {
          if (nudgedTooFarRight > nudge) {
            throw new NotFoundException();
          }
          left -= nudgedTooFarRight;
        }
        const nudgedTooFarDown = top + Math.floor((matrixHeight - 1) * moduleSize) - bottom;
        if (nudgedTooFarDown > 0) {
          if (nudgedTooFarDown > nudge) {
            throw new NotFoundException();
          }
          top -= nudgedTooFarDown;
        }
        const bits = new BitMatrix(matrixWidth, matrixHeight);
        for (let y = 0; y < matrixHeight; y++) {
          const iOffset = top + Math.floor(y * moduleSize);
          for (let x = 0; x < matrixWidth; x++) {
            if (image.get(left + Math.floor(x * moduleSize), iOffset)) {
              bits.set(x, y);
            }
          }
        }
        return bits;
      }
      static moduleSize(leftTopBlack, image) {
        const height = image.getHeight();
        const width = image.getWidth();
        let x = leftTopBlack[0];
        let y = leftTopBlack[1];
        let inBlack = true;
        let transitions = 0;
        while (x < width && y < height) {
          if (inBlack !== image.get(x, y)) {
            if (++transitions === 5) {
              break;
            }
            inBlack = !inBlack;
          }
          x++;
          y++;
        }
        if (x === width || y === height) {
          throw new NotFoundException();
        }
        return (x - leftTopBlack[0]) / 7;
      }
    }
    QRCodeReader.NO_POINTS = new Array();
    class PDF417Common {
      PDF417Common() {
      }
      static getBitCountSum(moduleBitCount) {
        return MathUtils.sum(moduleBitCount);
      }
      static toIntArray(list) {
        if (list == null || !list.length) {
          return PDF417Common.EMPTY_INT_ARRAY;
        }
        const result = new Int32Array(list.length);
        let i = 0;
        for (const integer of list) {
          result[i++] = integer;
        }
        return result;
      }
      static getCodeword(symbol) {
        const i = Arrays.binarySearch(PDF417Common.SYMBOL_TABLE, symbol & 262143);
        if (i < 0) {
          return -1;
        }
        return (PDF417Common.CODEWORD_TABLE[i] - 1) % PDF417Common.NUMBER_OF_CODEWORDS;
      }
    }
    PDF417Common.NUMBER_OF_CODEWORDS = 929;
    PDF417Common.MAX_CODEWORDS_IN_BARCODE = PDF417Common.NUMBER_OF_CODEWORDS - 1;
    PDF417Common.MIN_ROWS_IN_BARCODE = 3;
    PDF417Common.MAX_ROWS_IN_BARCODE = 90;
    PDF417Common.MODULES_IN_CODEWORD = 17;
    PDF417Common.MODULES_IN_STOP_PATTERN = 18;
    PDF417Common.BARS_IN_MODULE = 8;
    PDF417Common.EMPTY_INT_ARRAY = new Int32Array([]);
    PDF417Common.SYMBOL_TABLE = Int32Array.from([
      66142,
      66170,
      66206,
      66236,
      66290,
      66292,
      66350,
      66382,
      66396,
      66454,
      66470,
      66476,
      66594,
      66600,
      66614,
      66626,
      66628,
      66632,
      66640,
      66654,
      66662,
      66668,
      66682,
      66690,
      66718,
      66720,
      66748,
      66758,
      66776,
      66798,
      66802,
      66804,
      66820,
      66824,
      66832,
      66846,
      66848,
      66876,
      66880,
      66936,
      66950,
      66956,
      66968,
      66992,
      67006,
      67022,
      67036,
      67042,
      67044,
      67048,
      67062,
      67118,
      67150,
      67164,
      67214,
      67228,
      67256,
      67294,
      67322,
      67350,
      67366,
      67372,
      67398,
      67404,
      67416,
      67438,
      67474,
      67476,
      67490,
      67492,
      67496,
      67510,
      67618,
      67624,
      67650,
      67656,
      67664,
      67678,
      67686,
      67692,
      67706,
      67714,
      67716,
      67728,
      67742,
      67744,
      67772,
      67782,
      67788,
      67800,
      67822,
      67826,
      67828,
      67842,
      67848,
      67870,
      67872,
      67900,
      67904,
      67960,
      67974,
      67992,
      68016,
      68030,
      68046,
      68060,
      68066,
      68068,
      68072,
      68086,
      68104,
      68112,
      68126,
      68128,
      68156,
      68160,
      68216,
      68336,
      68358,
      68364,
      68376,
      68400,
      68414,
      68448,
      68476,
      68494,
      68508,
      68536,
      68546,
      68548,
      68552,
      68560,
      68574,
      68582,
      68588,
      68654,
      68686,
      68700,
      68706,
      68708,
      68712,
      68726,
      68750,
      68764,
      68792,
      68802,
      68804,
      68808,
      68816,
      68830,
      68838,
      68844,
      68858,
      68878,
      68892,
      68920,
      68976,
      68990,
      68994,
      68996,
      69e3,
      69008,
      69022,
      69024,
      69052,
      69062,
      69068,
      69080,
      69102,
      69106,
      69108,
      69142,
      69158,
      69164,
      69190,
      69208,
      69230,
      69254,
      69260,
      69272,
      69296,
      69310,
      69326,
      69340,
      69386,
      69394,
      69396,
      69410,
      69416,
      69430,
      69442,
      69444,
      69448,
      69456,
      69470,
      69478,
      69484,
      69554,
      69556,
      69666,
      69672,
      69698,
      69704,
      69712,
      69726,
      69754,
      69762,
      69764,
      69776,
      69790,
      69792,
      69820,
      69830,
      69836,
      69848,
      69870,
      69874,
      69876,
      69890,
      69918,
      69920,
      69948,
      69952,
      70008,
      70022,
      70040,
      70064,
      70078,
      70094,
      70108,
      70114,
      70116,
      70120,
      70134,
      70152,
      70174,
      70176,
      70264,
      70384,
      70412,
      70448,
      70462,
      70496,
      70524,
      70542,
      70556,
      70584,
      70594,
      70600,
      70608,
      70622,
      70630,
      70636,
      70664,
      70672,
      70686,
      70688,
      70716,
      70720,
      70776,
      70896,
      71136,
      71180,
      71192,
      71216,
      71230,
      71264,
      71292,
      71360,
      71416,
      71452,
      71480,
      71536,
      71550,
      71554,
      71556,
      71560,
      71568,
      71582,
      71584,
      71612,
      71622,
      71628,
      71640,
      71662,
      71726,
      71732,
      71758,
      71772,
      71778,
      71780,
      71784,
      71798,
      71822,
      71836,
      71864,
      71874,
      71880,
      71888,
      71902,
      71910,
      71916,
      71930,
      71950,
      71964,
      71992,
      72048,
      72062,
      72066,
      72068,
      72080,
      72094,
      72096,
      72124,
      72134,
      72140,
      72152,
      72174,
      72178,
      72180,
      72206,
      72220,
      72248,
      72304,
      72318,
      72416,
      72444,
      72456,
      72464,
      72478,
      72480,
      72508,
      72512,
      72568,
      72588,
      72600,
      72624,
      72638,
      72654,
      72668,
      72674,
      72676,
      72680,
      72694,
      72726,
      72742,
      72748,
      72774,
      72780,
      72792,
      72814,
      72838,
      72856,
      72880,
      72894,
      72910,
      72924,
      72930,
      72932,
      72936,
      72950,
      72966,
      72972,
      72984,
      73008,
      73022,
      73056,
      73084,
      73102,
      73116,
      73144,
      73156,
      73160,
      73168,
      73182,
      73190,
      73196,
      73210,
      73226,
      73234,
      73236,
      73250,
      73252,
      73256,
      73270,
      73282,
      73284,
      73296,
      73310,
      73318,
      73324,
      73346,
      73348,
      73352,
      73360,
      73374,
      73376,
      73404,
      73414,
      73420,
      73432,
      73454,
      73498,
      73518,
      73522,
      73524,
      73550,
      73564,
      73570,
      73572,
      73576,
      73590,
      73800,
      73822,
      73858,
      73860,
      73872,
      73886,
      73888,
      73916,
      73944,
      73970,
      73972,
      73992,
      74014,
      74016,
      74044,
      74048,
      74104,
      74118,
      74136,
      74160,
      74174,
      74210,
      74212,
      74216,
      74230,
      74244,
      74256,
      74270,
      74272,
      74360,
      74480,
      74502,
      74508,
      74544,
      74558,
      74592,
      74620,
      74638,
      74652,
      74680,
      74690,
      74696,
      74704,
      74726,
      74732,
      74782,
      74784,
      74812,
      74992,
      75232,
      75288,
      75326,
      75360,
      75388,
      75456,
      75512,
      75576,
      75632,
      75646,
      75650,
      75652,
      75664,
      75678,
      75680,
      75708,
      75718,
      75724,
      75736,
      75758,
      75808,
      75836,
      75840,
      75896,
      76016,
      76256,
      76736,
      76824,
      76848,
      76862,
      76896,
      76924,
      76992,
      77048,
      77296,
      77340,
      77368,
      77424,
      77438,
      77536,
      77564,
      77572,
      77576,
      77584,
      77600,
      77628,
      77632,
      77688,
      77702,
      77708,
      77720,
      77744,
      77758,
      77774,
      77788,
      77870,
      77902,
      77916,
      77922,
      77928,
      77966,
      77980,
      78008,
      78018,
      78024,
      78032,
      78046,
      78060,
      78074,
      78094,
      78136,
      78192,
      78206,
      78210,
      78212,
      78224,
      78238,
      78240,
      78268,
      78278,
      78284,
      78296,
      78322,
      78324,
      78350,
      78364,
      78448,
      78462,
      78560,
      78588,
      78600,
      78622,
      78624,
      78652,
      78656,
      78712,
      78726,
      78744,
      78768,
      78782,
      78798,
      78812,
      78818,
      78820,
      78824,
      78838,
      78862,
      78876,
      78904,
      78960,
      78974,
      79072,
      79100,
      79296,
      79352,
      79368,
      79376,
      79390,
      79392,
      79420,
      79424,
      79480,
      79600,
      79628,
      79640,
      79664,
      79678,
      79712,
      79740,
      79772,
      79800,
      79810,
      79812,
      79816,
      79824,
      79838,
      79846,
      79852,
      79894,
      79910,
      79916,
      79942,
      79948,
      79960,
      79982,
      79988,
      80006,
      80024,
      80048,
      80062,
      80078,
      80092,
      80098,
      80100,
      80104,
      80134,
      80140,
      80176,
      80190,
      80224,
      80252,
      80270,
      80284,
      80312,
      80328,
      80336,
      80350,
      80358,
      80364,
      80378,
      80390,
      80396,
      80408,
      80432,
      80446,
      80480,
      80508,
      80576,
      80632,
      80654,
      80668,
      80696,
      80752,
      80766,
      80776,
      80784,
      80798,
      80800,
      80828,
      80844,
      80856,
      80878,
      80882,
      80884,
      80914,
      80916,
      80930,
      80932,
      80936,
      80950,
      80962,
      80968,
      80976,
      80990,
      80998,
      81004,
      81026,
      81028,
      81040,
      81054,
      81056,
      81084,
      81094,
      81100,
      81112,
      81134,
      81154,
      81156,
      81160,
      81168,
      81182,
      81184,
      81212,
      81216,
      81272,
      81286,
      81292,
      81304,
      81328,
      81342,
      81358,
      81372,
      81380,
      81384,
      81398,
      81434,
      81454,
      81458,
      81460,
      81486,
      81500,
      81506,
      81508,
      81512,
      81526,
      81550,
      81564,
      81592,
      81602,
      81604,
      81608,
      81616,
      81630,
      81638,
      81644,
      81702,
      81708,
      81722,
      81734,
      81740,
      81752,
      81774,
      81778,
      81780,
      82050,
      82078,
      82080,
      82108,
      82180,
      82184,
      82192,
      82206,
      82208,
      82236,
      82240,
      82296,
      82316,
      82328,
      82352,
      82366,
      82402,
      82404,
      82408,
      82440,
      82448,
      82462,
      82464,
      82492,
      82496,
      82552,
      82672,
      82694,
      82700,
      82712,
      82736,
      82750,
      82784,
      82812,
      82830,
      82882,
      82884,
      82888,
      82896,
      82918,
      82924,
      82952,
      82960,
      82974,
      82976,
      83004,
      83008,
      83064,
      83184,
      83424,
      83468,
      83480,
      83504,
      83518,
      83552,
      83580,
      83648,
      83704,
      83740,
      83768,
      83824,
      83838,
      83842,
      83844,
      83848,
      83856,
      83872,
      83900,
      83910,
      83916,
      83928,
      83950,
      83984,
      84e3,
      84028,
      84032,
      84088,
      84208,
      84448,
      84928,
      85040,
      85054,
      85088,
      85116,
      85184,
      85240,
      85488,
      85560,
      85616,
      85630,
      85728,
      85756,
      85764,
      85768,
      85776,
      85790,
      85792,
      85820,
      85824,
      85880,
      85894,
      85900,
      85912,
      85936,
      85966,
      85980,
      86048,
      86080,
      86136,
      86256,
      86496,
      86976,
      88160,
      88188,
      88256,
      88312,
      88560,
      89056,
      89200,
      89214,
      89312,
      89340,
      89536,
      89592,
      89608,
      89616,
      89632,
      89664,
      89720,
      89840,
      89868,
      89880,
      89904,
      89952,
      89980,
      89998,
      90012,
      90040,
      90190,
      90204,
      90254,
      90268,
      90296,
      90306,
      90308,
      90312,
      90334,
      90382,
      90396,
      90424,
      90480,
      90494,
      90500,
      90504,
      90512,
      90526,
      90528,
      90556,
      90566,
      90572,
      90584,
      90610,
      90612,
      90638,
      90652,
      90680,
      90736,
      90750,
      90848,
      90876,
      90884,
      90888,
      90896,
      90910,
      90912,
      90940,
      90944,
      91e3,
      91014,
      91020,
      91032,
      91056,
      91070,
      91086,
      91100,
      91106,
      91108,
      91112,
      91126,
      91150,
      91164,
      91192,
      91248,
      91262,
      91360,
      91388,
      91584,
      91640,
      91664,
      91678,
      91680,
      91708,
      91712,
      91768,
      91888,
      91928,
      91952,
      91966,
      92e3,
      92028,
      92046,
      92060,
      92088,
      92098,
      92100,
      92104,
      92112,
      92126,
      92134,
      92140,
      92188,
      92216,
      92272,
      92384,
      92412,
      92608,
      92664,
      93168,
      93200,
      93214,
      93216,
      93244,
      93248,
      93304,
      93424,
      93664,
      93720,
      93744,
      93758,
      93792,
      93820,
      93888,
      93944,
      93980,
      94008,
      94064,
      94078,
      94084,
      94088,
      94096,
      94110,
      94112,
      94140,
      94150,
      94156,
      94168,
      94246,
      94252,
      94278,
      94284,
      94296,
      94318,
      94342,
      94348,
      94360,
      94384,
      94398,
      94414,
      94428,
      94440,
      94470,
      94476,
      94488,
      94512,
      94526,
      94560,
      94588,
      94606,
      94620,
      94648,
      94658,
      94660,
      94664,
      94672,
      94686,
      94694,
      94700,
      94714,
      94726,
      94732,
      94744,
      94768,
      94782,
      94816,
      94844,
      94912,
      94968,
      94990,
      95004,
      95032,
      95088,
      95102,
      95112,
      95120,
      95134,
      95136,
      95164,
      95180,
      95192,
      95214,
      95218,
      95220,
      95244,
      95256,
      95280,
      95294,
      95328,
      95356,
      95424,
      95480,
      95728,
      95758,
      95772,
      95800,
      95856,
      95870,
      95968,
      95996,
      96008,
      96016,
      96030,
      96032,
      96060,
      96064,
      96120,
      96152,
      96176,
      96190,
      96220,
      96226,
      96228,
      96232,
      96290,
      96292,
      96296,
      96310,
      96322,
      96324,
      96328,
      96336,
      96350,
      96358,
      96364,
      96386,
      96388,
      96392,
      96400,
      96414,
      96416,
      96444,
      96454,
      96460,
      96472,
      96494,
      96498,
      96500,
      96514,
      96516,
      96520,
      96528,
      96542,
      96544,
      96572,
      96576,
      96632,
      96646,
      96652,
      96664,
      96688,
      96702,
      96718,
      96732,
      96738,
      96740,
      96744,
      96758,
      96772,
      96776,
      96784,
      96798,
      96800,
      96828,
      96832,
      96888,
      97008,
      97030,
      97036,
      97048,
      97072,
      97086,
      97120,
      97148,
      97166,
      97180,
      97208,
      97220,
      97224,
      97232,
      97246,
      97254,
      97260,
      97326,
      97330,
      97332,
      97358,
      97372,
      97378,
      97380,
      97384,
      97398,
      97422,
      97436,
      97464,
      97474,
      97476,
      97480,
      97488,
      97502,
      97510,
      97516,
      97550,
      97564,
      97592,
      97648,
      97666,
      97668,
      97672,
      97680,
      97694,
      97696,
      97724,
      97734,
      97740,
      97752,
      97774,
      97830,
      97836,
      97850,
      97862,
      97868,
      97880,
      97902,
      97906,
      97908,
      97926,
      97932,
      97944,
      97968,
      97998,
      98012,
      98018,
      98020,
      98024,
      98038,
      98618,
      98674,
      98676,
      98838,
      98854,
      98874,
      98892,
      98904,
      98926,
      98930,
      98932,
      98968,
      99006,
      99042,
      99044,
      99048,
      99062,
      99166,
      99194,
      99246,
      99286,
      99350,
      99366,
      99372,
      99386,
      99398,
      99416,
      99438,
      99442,
      99444,
      99462,
      99504,
      99518,
      99534,
      99548,
      99554,
      99556,
      99560,
      99574,
      99590,
      99596,
      99608,
      99632,
      99646,
      99680,
      99708,
      99726,
      99740,
      99768,
      99778,
      99780,
      99784,
      99792,
      99806,
      99814,
      99820,
      99834,
      99858,
      99860,
      99874,
      99880,
      99894,
      99906,
      99920,
      99934,
      99962,
      99970,
      99972,
      99976,
      99984,
      99998,
      1e5,
      100028,
      100038,
      100044,
      100056,
      100078,
      100082,
      100084,
      100142,
      100174,
      100188,
      100246,
      100262,
      100268,
      100306,
      100308,
      100390,
      100396,
      100410,
      100422,
      100428,
      100440,
      100462,
      100466,
      100468,
      100486,
      100504,
      100528,
      100542,
      100558,
      100572,
      100578,
      100580,
      100584,
      100598,
      100620,
      100656,
      100670,
      100704,
      100732,
      100750,
      100792,
      100802,
      100808,
      100816,
      100830,
      100838,
      100844,
      100858,
      100888,
      100912,
      100926,
      100960,
      100988,
      101056,
      101112,
      101148,
      101176,
      101232,
      101246,
      101250,
      101252,
      101256,
      101264,
      101278,
      101280,
      101308,
      101318,
      101324,
      101336,
      101358,
      101362,
      101364,
      101410,
      101412,
      101416,
      101430,
      101442,
      101448,
      101456,
      101470,
      101478,
      101498,
      101506,
      101508,
      101520,
      101534,
      101536,
      101564,
      101580,
      101618,
      101620,
      101636,
      101640,
      101648,
      101662,
      101664,
      101692,
      101696,
      101752,
      101766,
      101784,
      101838,
      101858,
      101860,
      101864,
      101934,
      101938,
      101940,
      101966,
      101980,
      101986,
      101988,
      101992,
      102030,
      102044,
      102072,
      102082,
      102084,
      102088,
      102096,
      102138,
      102166,
      102182,
      102188,
      102214,
      102220,
      102232,
      102254,
      102282,
      102290,
      102292,
      102306,
      102308,
      102312,
      102326,
      102444,
      102458,
      102470,
      102476,
      102488,
      102514,
      102516,
      102534,
      102552,
      102576,
      102590,
      102606,
      102620,
      102626,
      102632,
      102646,
      102662,
      102668,
      102704,
      102718,
      102752,
      102780,
      102798,
      102812,
      102840,
      102850,
      102856,
      102864,
      102878,
      102886,
      102892,
      102906,
      102936,
      102974,
      103008,
      103036,
      103104,
      103160,
      103224,
      103280,
      103294,
      103298,
      103300,
      103312,
      103326,
      103328,
      103356,
      103366,
      103372,
      103384,
      103406,
      103410,
      103412,
      103472,
      103486,
      103520,
      103548,
      103616,
      103672,
      103920,
      103992,
      104048,
      104062,
      104160,
      104188,
      104194,
      104196,
      104200,
      104208,
      104224,
      104252,
      104256,
      104312,
      104326,
      104332,
      104344,
      104368,
      104382,
      104398,
      104412,
      104418,
      104420,
      104424,
      104482,
      104484,
      104514,
      104520,
      104528,
      104542,
      104550,
      104570,
      104578,
      104580,
      104592,
      104606,
      104608,
      104636,
      104652,
      104690,
      104692,
      104706,
      104712,
      104734,
      104736,
      104764,
      104768,
      104824,
      104838,
      104856,
      104910,
      104930,
      104932,
      104936,
      104968,
      104976,
      104990,
      104992,
      105020,
      105024,
      105080,
      105200,
      105240,
      105278,
      105312,
      105372,
      105410,
      105412,
      105416,
      105424,
      105446,
      105518,
      105524,
      105550,
      105564,
      105570,
      105572,
      105576,
      105614,
      105628,
      105656,
      105666,
      105672,
      105680,
      105702,
      105722,
      105742,
      105756,
      105784,
      105840,
      105854,
      105858,
      105860,
      105864,
      105872,
      105888,
      105932,
      105970,
      105972,
      106006,
      106022,
      106028,
      106054,
      106060,
      106072,
      106100,
      106118,
      106124,
      106136,
      106160,
      106174,
      106190,
      106210,
      106212,
      106216,
      106250,
      106258,
      106260,
      106274,
      106276,
      106280,
      106306,
      106308,
      106312,
      106320,
      106334,
      106348,
      106394,
      106414,
      106418,
      106420,
      106566,
      106572,
      106610,
      106612,
      106630,
      106636,
      106648,
      106672,
      106686,
      106722,
      106724,
      106728,
      106742,
      106758,
      106764,
      106776,
      106800,
      106814,
      106848,
      106876,
      106894,
      106908,
      106936,
      106946,
      106948,
      106952,
      106960,
      106974,
      106982,
      106988,
      107032,
      107056,
      107070,
      107104,
      107132,
      107200,
      107256,
      107292,
      107320,
      107376,
      107390,
      107394,
      107396,
      107400,
      107408,
      107422,
      107424,
      107452,
      107462,
      107468,
      107480,
      107502,
      107506,
      107508,
      107544,
      107568,
      107582,
      107616,
      107644,
      107712,
      107768,
      108016,
      108060,
      108088,
      108144,
      108158,
      108256,
      108284,
      108290,
      108292,
      108296,
      108304,
      108318,
      108320,
      108348,
      108352,
      108408,
      108422,
      108428,
      108440,
      108464,
      108478,
      108494,
      108508,
      108514,
      108516,
      108520,
      108592,
      108640,
      108668,
      108736,
      108792,
      109040,
      109536,
      109680,
      109694,
      109792,
      109820,
      110016,
      110072,
      110084,
      110088,
      110096,
      110112,
      110140,
      110144,
      110200,
      110320,
      110342,
      110348,
      110360,
      110384,
      110398,
      110432,
      110460,
      110478,
      110492,
      110520,
      110532,
      110536,
      110544,
      110558,
      110658,
      110686,
      110714,
      110722,
      110724,
      110728,
      110736,
      110750,
      110752,
      110780,
      110796,
      110834,
      110836,
      110850,
      110852,
      110856,
      110864,
      110878,
      110880,
      110908,
      110912,
      110968,
      110982,
      111e3,
      111054,
      111074,
      111076,
      111080,
      111108,
      111112,
      111120,
      111134,
      111136,
      111164,
      111168,
      111224,
      111344,
      111372,
      111422,
      111456,
      111516,
      111554,
      111556,
      111560,
      111568,
      111590,
      111632,
      111646,
      111648,
      111676,
      111680,
      111736,
      111856,
      112096,
      112152,
      112224,
      112252,
      112320,
      112440,
      112514,
      112516,
      112520,
      112528,
      112542,
      112544,
      112588,
      112686,
      112718,
      112732,
      112782,
      112796,
      112824,
      112834,
      112836,
      112840,
      112848,
      112870,
      112890,
      112910,
      112924,
      112952,
      113008,
      113022,
      113026,
      113028,
      113032,
      113040,
      113054,
      113056,
      113100,
      113138,
      113140,
      113166,
      113180,
      113208,
      113264,
      113278,
      113376,
      113404,
      113416,
      113424,
      113440,
      113468,
      113472,
      113560,
      113614,
      113634,
      113636,
      113640,
      113686,
      113702,
      113708,
      113734,
      113740,
      113752,
      113778,
      113780,
      113798,
      113804,
      113816,
      113840,
      113854,
      113870,
      113890,
      113892,
      113896,
      113926,
      113932,
      113944,
      113968,
      113982,
      114016,
      114044,
      114076,
      114114,
      114116,
      114120,
      114128,
      114150,
      114170,
      114194,
      114196,
      114210,
      114212,
      114216,
      114242,
      114244,
      114248,
      114256,
      114270,
      114278,
      114306,
      114308,
      114312,
      114320,
      114334,
      114336,
      114364,
      114380,
      114420,
      114458,
      114478,
      114482,
      114484,
      114510,
      114524,
      114530,
      114532,
      114536,
      114842,
      114866,
      114868,
      114970,
      114994,
      114996,
      115042,
      115044,
      115048,
      115062,
      115130,
      115226,
      115250,
      115252,
      115278,
      115292,
      115298,
      115300,
      115304,
      115318,
      115342,
      115394,
      115396,
      115400,
      115408,
      115422,
      115430,
      115436,
      115450,
      115478,
      115494,
      115514,
      115526,
      115532,
      115570,
      115572,
      115738,
      115758,
      115762,
      115764,
      115790,
      115804,
      115810,
      115812,
      115816,
      115830,
      115854,
      115868,
      115896,
      115906,
      115912,
      115920,
      115934,
      115942,
      115948,
      115962,
      115996,
      116024,
      116080,
      116094,
      116098,
      116100,
      116104,
      116112,
      116126,
      116128,
      116156,
      116166,
      116172,
      116184,
      116206,
      116210,
      116212,
      116246,
      116262,
      116268,
      116282,
      116294,
      116300,
      116312,
      116334,
      116338,
      116340,
      116358,
      116364,
      116376,
      116400,
      116414,
      116430,
      116444,
      116450,
      116452,
      116456,
      116498,
      116500,
      116514,
      116520,
      116534,
      116546,
      116548,
      116552,
      116560,
      116574,
      116582,
      116588,
      116602,
      116654,
      116694,
      116714,
      116762,
      116782,
      116786,
      116788,
      116814,
      116828,
      116834,
      116836,
      116840,
      116854,
      116878,
      116892,
      116920,
      116930,
      116936,
      116944,
      116958,
      116966,
      116972,
      116986,
      117006,
      117048,
      117104,
      117118,
      117122,
      117124,
      117136,
      117150,
      117152,
      117180,
      117190,
      117196,
      117208,
      117230,
      117234,
      117236,
      117304,
      117360,
      117374,
      117472,
      117500,
      117506,
      117508,
      117512,
      117520,
      117536,
      117564,
      117568,
      117624,
      117638,
      117644,
      117656,
      117680,
      117694,
      117710,
      117724,
      117730,
      117732,
      117736,
      117750,
      117782,
      117798,
      117804,
      117818,
      117830,
      117848,
      117874,
      117876,
      117894,
      117936,
      117950,
      117966,
      117986,
      117988,
      117992,
      118022,
      118028,
      118040,
      118064,
      118078,
      118112,
      118140,
      118172,
      118210,
      118212,
      118216,
      118224,
      118238,
      118246,
      118266,
      118306,
      118312,
      118338,
      118352,
      118366,
      118374,
      118394,
      118402,
      118404,
      118408,
      118416,
      118430,
      118432,
      118460,
      118476,
      118514,
      118516,
      118574,
      118578,
      118580,
      118606,
      118620,
      118626,
      118628,
      118632,
      118678,
      118694,
      118700,
      118730,
      118738,
      118740,
      118830,
      118834,
      118836,
      118862,
      118876,
      118882,
      118884,
      118888,
      118902,
      118926,
      118940,
      118968,
      118978,
      118980,
      118984,
      118992,
      119006,
      119014,
      119020,
      119034,
      119068,
      119096,
      119152,
      119166,
      119170,
      119172,
      119176,
      119184,
      119198,
      119200,
      119228,
      119238,
      119244,
      119256,
      119278,
      119282,
      119284,
      119324,
      119352,
      119408,
      119422,
      119520,
      119548,
      119554,
      119556,
      119560,
      119568,
      119582,
      119584,
      119612,
      119616,
      119672,
      119686,
      119692,
      119704,
      119728,
      119742,
      119758,
      119772,
      119778,
      119780,
      119784,
      119798,
      119920,
      119934,
      120032,
      120060,
      120256,
      120312,
      120324,
      120328,
      120336,
      120352,
      120384,
      120440,
      120560,
      120582,
      120588,
      120600,
      120624,
      120638,
      120672,
      120700,
      120718,
      120732,
      120760,
      120770,
      120772,
      120776,
      120784,
      120798,
      120806,
      120812,
      120870,
      120876,
      120890,
      120902,
      120908,
      120920,
      120946,
      120948,
      120966,
      120972,
      120984,
      121008,
      121022,
      121038,
      121058,
      121060,
      121064,
      121078,
      121100,
      121112,
      121136,
      121150,
      121184,
      121212,
      121244,
      121282,
      121284,
      121288,
      121296,
      121318,
      121338,
      121356,
      121368,
      121392,
      121406,
      121440,
      121468,
      121536,
      121592,
      121656,
      121730,
      121732,
      121736,
      121744,
      121758,
      121760,
      121804,
      121842,
      121844,
      121890,
      121922,
      121924,
      121928,
      121936,
      121950,
      121958,
      121978,
      121986,
      121988,
      121992,
      122e3,
      122014,
      122016,
      122044,
      122060,
      122098,
      122100,
      122116,
      122120,
      122128,
      122142,
      122144,
      122172,
      122176,
      122232,
      122246,
      122264,
      122318,
      122338,
      122340,
      122344,
      122414,
      122418,
      122420,
      122446,
      122460,
      122466,
      122468,
      122472,
      122510,
      122524,
      122552,
      122562,
      122564,
      122568,
      122576,
      122598,
      122618,
      122646,
      122662,
      122668,
      122694,
      122700,
      122712,
      122738,
      122740,
      122762,
      122770,
      122772,
      122786,
      122788,
      122792,
      123018,
      123026,
      123028,
      123042,
      123044,
      123048,
      123062,
      123098,
      123146,
      123154,
      123156,
      123170,
      123172,
      123176,
      123190,
      123202,
      123204,
      123208,
      123216,
      123238,
      123244,
      123258,
      123290,
      123314,
      123316,
      123402,
      123410,
      123412,
      123426,
      123428,
      123432,
      123446,
      123458,
      123464,
      123472,
      123486,
      123494,
      123500,
      123514,
      123522,
      123524,
      123528,
      123536,
      123552,
      123580,
      123590,
      123596,
      123608,
      123630,
      123634,
      123636,
      123674,
      123698,
      123700,
      123740,
      123746,
      123748,
      123752,
      123834,
      123914,
      123922,
      123924,
      123938,
      123944,
      123958,
      123970,
      123976,
      123984,
      123998,
      124006,
      124012,
      124026,
      124034,
      124036,
      124048,
      124062,
      124064,
      124092,
      124102,
      124108,
      124120,
      124142,
      124146,
      124148,
      124162,
      124164,
      124168,
      124176,
      124190,
      124192,
      124220,
      124224,
      124280,
      124294,
      124300,
      124312,
      124336,
      124350,
      124366,
      124380,
      124386,
      124388,
      124392,
      124406,
      124442,
      124462,
      124466,
      124468,
      124494,
      124508,
      124514,
      124520,
      124558,
      124572,
      124600,
      124610,
      124612,
      124616,
      124624,
      124646,
      124666,
      124694,
      124710,
      124716,
      124730,
      124742,
      124748,
      124760,
      124786,
      124788,
      124818,
      124820,
      124834,
      124836,
      124840,
      124854,
      124946,
      124948,
      124962,
      124964,
      124968,
      124982,
      124994,
      124996,
      125e3,
      125008,
      125022,
      125030,
      125036,
      125050,
      125058,
      125060,
      125064,
      125072,
      125086,
      125088,
      125116,
      125126,
      125132,
      125144,
      125166,
      125170,
      125172,
      125186,
      125188,
      125192,
      125200,
      125216,
      125244,
      125248,
      125304,
      125318,
      125324,
      125336,
      125360,
      125374,
      125390,
      125404,
      125410,
      125412,
      125416,
      125430,
      125444,
      125448,
      125456,
      125472,
      125504,
      125560,
      125680,
      125702,
      125708,
      125720,
      125744,
      125758,
      125792,
      125820,
      125838,
      125852,
      125880,
      125890,
      125892,
      125896,
      125904,
      125918,
      125926,
      125932,
      125978,
      125998,
      126002,
      126004,
      126030,
      126044,
      126050,
      126052,
      126056,
      126094,
      126108,
      126136,
      126146,
      126148,
      126152,
      126160,
      126182,
      126202,
      126222,
      126236,
      126264,
      126320,
      126334,
      126338,
      126340,
      126344,
      126352,
      126366,
      126368,
      126412,
      126450,
      126452,
      126486,
      126502,
      126508,
      126522,
      126534,
      126540,
      126552,
      126574,
      126578,
      126580,
      126598,
      126604,
      126616,
      126640,
      126654,
      126670,
      126684,
      126690,
      126692,
      126696,
      126738,
      126754,
      126756,
      126760,
      126774,
      126786,
      126788,
      126792,
      126800,
      126814,
      126822,
      126828,
      126842,
      126894,
      126898,
      126900,
      126934,
      127126,
      127142,
      127148,
      127162,
      127178,
      127186,
      127188,
      127254,
      127270,
      127276,
      127290,
      127302,
      127308,
      127320,
      127342,
      127346,
      127348,
      127370,
      127378,
      127380,
      127394,
      127396,
      127400,
      127450,
      127510,
      127526,
      127532,
      127546,
      127558,
      127576,
      127598,
      127602,
      127604,
      127622,
      127628,
      127640,
      127664,
      127678,
      127694,
      127708,
      127714,
      127716,
      127720,
      127734,
      127754,
      127762,
      127764,
      127778,
      127784,
      127810,
      127812,
      127816,
      127824,
      127838,
      127846,
      127866,
      127898,
      127918,
      127922,
      127924,
      128022,
      128038,
      128044,
      128058,
      128070,
      128076,
      128088,
      128110,
      128114,
      128116,
      128134,
      128140,
      128152,
      128176,
      128190,
      128206,
      128220,
      128226,
      128228,
      128232,
      128246,
      128262,
      128268,
      128280,
      128304,
      128318,
      128352,
      128380,
      128398,
      128412,
      128440,
      128450,
      128452,
      128456,
      128464,
      128478,
      128486,
      128492,
      128506,
      128522,
      128530,
      128532,
      128546,
      128548,
      128552,
      128566,
      128578,
      128580,
      128584,
      128592,
      128606,
      128614,
      128634,
      128642,
      128644,
      128648,
      128656,
      128670,
      128672,
      128700,
      128716,
      128754,
      128756,
      128794,
      128814,
      128818,
      128820,
      128846,
      128860,
      128866,
      128868,
      128872,
      128886,
      128918,
      128934,
      128940,
      128954,
      128978,
      128980,
      129178,
      129198,
      129202,
      129204,
      129238,
      129258,
      129306,
      129326,
      129330,
      129332,
      129358,
      129372,
      129378,
      129380,
      129384,
      129398,
      129430,
      129446,
      129452,
      129466,
      129482,
      129490,
      129492,
      129562,
      129582,
      129586,
      129588,
      129614,
      129628,
      129634,
      129636,
      129640,
      129654,
      129678,
      129692,
      129720,
      129730,
      129732,
      129736,
      129744,
      129758,
      129766,
      129772,
      129814,
      129830,
      129836,
      129850,
      129862,
      129868,
      129880,
      129902,
      129906,
      129908,
      129930,
      129938,
      129940,
      129954,
      129956,
      129960,
      129974,
      130010
    ]);
    PDF417Common.CODEWORD_TABLE = Int32Array.from([
      2627,
      1819,
      2622,
      2621,
      1813,
      1812,
      2729,
      2724,
      2723,
      2779,
      2774,
      2773,
      902,
      896,
      908,
      868,
      865,
      861,
      859,
      2511,
      873,
      871,
      1780,
      835,
      2493,
      825,
      2491,
      842,
      837,
      844,
      1764,
      1762,
      811,
      810,
      809,
      2483,
      807,
      2482,
      806,
      2480,
      815,
      814,
      813,
      812,
      2484,
      817,
      816,
      1745,
      1744,
      1742,
      1746,
      2655,
      2637,
      2635,
      2626,
      2625,
      2623,
      2628,
      1820,
      2752,
      2739,
      2737,
      2728,
      2727,
      2725,
      2730,
      2785,
      2783,
      2778,
      2777,
      2775,
      2780,
      787,
      781,
      747,
      739,
      736,
      2413,
      754,
      752,
      1719,
      692,
      689,
      681,
      2371,
      678,
      2369,
      700,
      697,
      694,
      703,
      1688,
      1686,
      642,
      638,
      2343,
      631,
      2341,
      627,
      2338,
      651,
      646,
      643,
      2345,
      654,
      652,
      1652,
      1650,
      1647,
      1654,
      601,
      599,
      2322,
      596,
      2321,
      594,
      2319,
      2317,
      611,
      610,
      608,
      606,
      2324,
      603,
      2323,
      615,
      614,
      612,
      1617,
      1616,
      1614,
      1612,
      616,
      1619,
      1618,
      2575,
      2538,
      2536,
      905,
      901,
      898,
      909,
      2509,
      2507,
      2504,
      870,
      867,
      864,
      860,
      2512,
      875,
      872,
      1781,
      2490,
      2489,
      2487,
      2485,
      1748,
      836,
      834,
      832,
      830,
      2494,
      827,
      2492,
      843,
      841,
      839,
      845,
      1765,
      1763,
      2701,
      2676,
      2674,
      2653,
      2648,
      2656,
      2634,
      2633,
      2631,
      2629,
      1821,
      2638,
      2636,
      2770,
      2763,
      2761,
      2750,
      2745,
      2753,
      2736,
      2735,
      2733,
      2731,
      1848,
      2740,
      2738,
      2786,
      2784,
      591,
      588,
      576,
      569,
      566,
      2296,
      1590,
      537,
      534,
      526,
      2276,
      522,
      2274,
      545,
      542,
      539,
      548,
      1572,
      1570,
      481,
      2245,
      466,
      2242,
      462,
      2239,
      492,
      485,
      482,
      2249,
      496,
      494,
      1534,
      1531,
      1528,
      1538,
      413,
      2196,
      406,
      2191,
      2188,
      425,
      419,
      2202,
      415,
      2199,
      432,
      430,
      427,
      1472,
      1467,
      1464,
      433,
      1476,
      1474,
      368,
      367,
      2160,
      365,
      2159,
      362,
      2157,
      2155,
      2152,
      378,
      377,
      375,
      2166,
      372,
      2165,
      369,
      2162,
      383,
      381,
      379,
      2168,
      1419,
      1418,
      1416,
      1414,
      385,
      1411,
      384,
      1423,
      1422,
      1420,
      1424,
      2461,
      802,
      2441,
      2439,
      790,
      786,
      783,
      794,
      2409,
      2406,
      2403,
      750,
      742,
      738,
      2414,
      756,
      753,
      1720,
      2367,
      2365,
      2362,
      2359,
      1663,
      693,
      691,
      684,
      2373,
      680,
      2370,
      702,
      699,
      696,
      704,
      1690,
      1687,
      2337,
      2336,
      2334,
      2332,
      1624,
      2329,
      1622,
      640,
      637,
      2344,
      634,
      2342,
      630,
      2340,
      650,
      648,
      645,
      2346,
      655,
      653,
      1653,
      1651,
      1649,
      1655,
      2612,
      2597,
      2595,
      2571,
      2568,
      2565,
      2576,
      2534,
      2529,
      2526,
      1787,
      2540,
      2537,
      907,
      904,
      900,
      910,
      2503,
      2502,
      2500,
      2498,
      1768,
      2495,
      1767,
      2510,
      2508,
      2506,
      869,
      866,
      863,
      2513,
      876,
      874,
      1782,
      2720,
      2713,
      2711,
      2697,
      2694,
      2691,
      2702,
      2672,
      2670,
      2664,
      1828,
      2678,
      2675,
      2647,
      2646,
      2644,
      2642,
      1823,
      2639,
      1822,
      2654,
      2652,
      2650,
      2657,
      2771,
      1855,
      2765,
      2762,
      1850,
      1849,
      2751,
      2749,
      2747,
      2754,
      353,
      2148,
      344,
      342,
      336,
      2142,
      332,
      2140,
      345,
      1375,
      1373,
      306,
      2130,
      299,
      2128,
      295,
      2125,
      319,
      314,
      311,
      2132,
      1354,
      1352,
      1349,
      1356,
      262,
      257,
      2101,
      253,
      2096,
      2093,
      274,
      273,
      267,
      2107,
      263,
      2104,
      280,
      278,
      275,
      1316,
      1311,
      1308,
      1320,
      1318,
      2052,
      202,
      2050,
      2044,
      2040,
      219,
      2063,
      212,
      2060,
      208,
      2055,
      224,
      221,
      2066,
      1260,
      1258,
      1252,
      231,
      1248,
      229,
      1266,
      1264,
      1261,
      1268,
      155,
      1998,
      153,
      1996,
      1994,
      1991,
      1988,
      165,
      164,
      2007,
      162,
      2006,
      159,
      2003,
      2e3,
      172,
      171,
      169,
      2012,
      166,
      2010,
      1186,
      1184,
      1182,
      1179,
      175,
      1176,
      173,
      1192,
      1191,
      1189,
      1187,
      176,
      1194,
      1193,
      2313,
      2307,
      2305,
      592,
      589,
      2294,
      2292,
      2289,
      578,
      572,
      568,
      2297,
      580,
      1591,
      2272,
      2267,
      2264,
      1547,
      538,
      536,
      529,
      2278,
      525,
      2275,
      547,
      544,
      541,
      1574,
      1571,
      2237,
      2235,
      2229,
      1493,
      2225,
      1489,
      478,
      2247,
      470,
      2244,
      465,
      2241,
      493,
      488,
      484,
      2250,
      498,
      495,
      1536,
      1533,
      1530,
      1539,
      2187,
      2186,
      2184,
      2182,
      1432,
      2179,
      1430,
      2176,
      1427,
      414,
      412,
      2197,
      409,
      2195,
      405,
      2193,
      2190,
      426,
      424,
      421,
      2203,
      418,
      2201,
      431,
      429,
      1473,
      1471,
      1469,
      1466,
      434,
      1477,
      1475,
      2478,
      2472,
      2470,
      2459,
      2457,
      2454,
      2462,
      803,
      2437,
      2432,
      2429,
      1726,
      2443,
      2440,
      792,
      789,
      785,
      2401,
      2399,
      2393,
      1702,
      2389,
      1699,
      2411,
      2408,
      2405,
      745,
      741,
      2415,
      758,
      755,
      1721,
      2358,
      2357,
      2355,
      2353,
      1661,
      2350,
      1660,
      2347,
      1657,
      2368,
      2366,
      2364,
      2361,
      1666,
      690,
      687,
      2374,
      683,
      2372,
      701,
      698,
      705,
      1691,
      1689,
      2619,
      2617,
      2610,
      2608,
      2605,
      2613,
      2593,
      2588,
      2585,
      1803,
      2599,
      2596,
      2563,
      2561,
      2555,
      1797,
      2551,
      1795,
      2573,
      2570,
      2567,
      2577,
      2525,
      2524,
      2522,
      2520,
      1786,
      2517,
      1785,
      2514,
      1783,
      2535,
      2533,
      2531,
      2528,
      1788,
      2541,
      2539,
      906,
      903,
      911,
      2721,
      1844,
      2715,
      2712,
      1838,
      1836,
      2699,
      2696,
      2693,
      2703,
      1827,
      1826,
      1824,
      2673,
      2671,
      2669,
      2666,
      1829,
      2679,
      2677,
      1858,
      1857,
      2772,
      1854,
      1853,
      1851,
      1856,
      2766,
      2764,
      143,
      1987,
      139,
      1986,
      135,
      133,
      131,
      1984,
      128,
      1983,
      125,
      1981,
      138,
      137,
      136,
      1985,
      1133,
      1132,
      1130,
      112,
      110,
      1974,
      107,
      1973,
      104,
      1971,
      1969,
      122,
      121,
      119,
      117,
      1977,
      114,
      1976,
      124,
      1115,
      1114,
      1112,
      1110,
      1117,
      1116,
      84,
      83,
      1953,
      81,
      1952,
      78,
      1950,
      1948,
      1945,
      94,
      93,
      91,
      1959,
      88,
      1958,
      85,
      1955,
      99,
      97,
      95,
      1961,
      1086,
      1085,
      1083,
      1081,
      1078,
      100,
      1090,
      1089,
      1087,
      1091,
      49,
      47,
      1917,
      44,
      1915,
      1913,
      1910,
      1907,
      59,
      1926,
      56,
      1925,
      53,
      1922,
      1919,
      66,
      64,
      1931,
      61,
      1929,
      1042,
      1040,
      1038,
      71,
      1035,
      70,
      1032,
      68,
      1048,
      1047,
      1045,
      1043,
      1050,
      1049,
      12,
      10,
      1869,
      1867,
      1864,
      1861,
      21,
      1880,
      19,
      1877,
      1874,
      1871,
      28,
      1888,
      25,
      1886,
      22,
      1883,
      982,
      980,
      977,
      974,
      32,
      30,
      991,
      989,
      987,
      984,
      34,
      995,
      994,
      992,
      2151,
      2150,
      2147,
      2146,
      2144,
      356,
      355,
      354,
      2149,
      2139,
      2138,
      2136,
      2134,
      1359,
      343,
      341,
      338,
      2143,
      335,
      2141,
      348,
      347,
      346,
      1376,
      1374,
      2124,
      2123,
      2121,
      2119,
      1326,
      2116,
      1324,
      310,
      308,
      305,
      2131,
      302,
      2129,
      298,
      2127,
      320,
      318,
      316,
      313,
      2133,
      322,
      321,
      1355,
      1353,
      1351,
      1357,
      2092,
      2091,
      2089,
      2087,
      1276,
      2084,
      1274,
      2081,
      1271,
      259,
      2102,
      256,
      2100,
      252,
      2098,
      2095,
      272,
      269,
      2108,
      266,
      2106,
      281,
      279,
      277,
      1317,
      1315,
      1313,
      1310,
      282,
      1321,
      1319,
      2039,
      2037,
      2035,
      2032,
      1203,
      2029,
      1200,
      1197,
      207,
      2053,
      205,
      2051,
      201,
      2049,
      2046,
      2043,
      220,
      218,
      2064,
      215,
      2062,
      211,
      2059,
      228,
      226,
      223,
      2069,
      1259,
      1257,
      1254,
      232,
      1251,
      230,
      1267,
      1265,
      1263,
      2316,
      2315,
      2312,
      2311,
      2309,
      2314,
      2304,
      2303,
      2301,
      2299,
      1593,
      2308,
      2306,
      590,
      2288,
      2287,
      2285,
      2283,
      1578,
      2280,
      1577,
      2295,
      2293,
      2291,
      579,
      577,
      574,
      571,
      2298,
      582,
      581,
      1592,
      2263,
      2262,
      2260,
      2258,
      1545,
      2255,
      1544,
      2252,
      1541,
      2273,
      2271,
      2269,
      2266,
      1550,
      535,
      532,
      2279,
      528,
      2277,
      546,
      543,
      549,
      1575,
      1573,
      2224,
      2222,
      2220,
      1486,
      2217,
      1485,
      2214,
      1482,
      1479,
      2238,
      2236,
      2234,
      2231,
      1496,
      2228,
      1492,
      480,
      477,
      2248,
      473,
      2246,
      469,
      2243,
      490,
      487,
      2251,
      497,
      1537,
      1535,
      1532,
      2477,
      2476,
      2474,
      2479,
      2469,
      2468,
      2466,
      2464,
      1730,
      2473,
      2471,
      2453,
      2452,
      2450,
      2448,
      1729,
      2445,
      1728,
      2460,
      2458,
      2456,
      2463,
      805,
      804,
      2428,
      2427,
      2425,
      2423,
      1725,
      2420,
      1724,
      2417,
      1722,
      2438,
      2436,
      2434,
      2431,
      1727,
      2444,
      2442,
      793,
      791,
      788,
      795,
      2388,
      2386,
      2384,
      1697,
      2381,
      1696,
      2378,
      1694,
      1692,
      2402,
      2400,
      2398,
      2395,
      1703,
      2392,
      1701,
      2412,
      2410,
      2407,
      751,
      748,
      744,
      2416,
      759,
      757,
      1807,
      2620,
      2618,
      1806,
      1805,
      2611,
      2609,
      2607,
      2614,
      1802,
      1801,
      1799,
      2594,
      2592,
      2590,
      2587,
      1804,
      2600,
      2598,
      1794,
      1793,
      1791,
      1789,
      2564,
      2562,
      2560,
      2557,
      1798,
      2554,
      1796,
      2574,
      2572,
      2569,
      2578,
      1847,
      1846,
      2722,
      1843,
      1842,
      1840,
      1845,
      2716,
      2714,
      1835,
      1834,
      1832,
      1830,
      1839,
      1837,
      2700,
      2698,
      2695,
      2704,
      1817,
      1811,
      1810,
      897,
      862,
      1777,
      829,
      826,
      838,
      1760,
      1758,
      808,
      2481,
      1741,
      1740,
      1738,
      1743,
      2624,
      1818,
      2726,
      2776,
      782,
      740,
      737,
      1715,
      686,
      679,
      695,
      1682,
      1680,
      639,
      628,
      2339,
      647,
      644,
      1645,
      1643,
      1640,
      1648,
      602,
      600,
      597,
      595,
      2320,
      593,
      2318,
      609,
      607,
      604,
      1611,
      1610,
      1608,
      1606,
      613,
      1615,
      1613,
      2328,
      926,
      924,
      892,
      886,
      899,
      857,
      850,
      2505,
      1778,
      824,
      823,
      821,
      819,
      2488,
      818,
      2486,
      833,
      831,
      828,
      840,
      1761,
      1759,
      2649,
      2632,
      2630,
      2746,
      2734,
      2732,
      2782,
      2781,
      570,
      567,
      1587,
      531,
      527,
      523,
      540,
      1566,
      1564,
      476,
      467,
      463,
      2240,
      486,
      483,
      1524,
      1521,
      1518,
      1529,
      411,
      403,
      2192,
      399,
      2189,
      423,
      416,
      1462,
      1457,
      1454,
      428,
      1468,
      1465,
      2210,
      366,
      363,
      2158,
      360,
      2156,
      357,
      2153,
      376,
      373,
      370,
      2163,
      1410,
      1409,
      1407,
      1405,
      382,
      1402,
      380,
      1417,
      1415,
      1412,
      1421,
      2175,
      2174,
      777,
      774,
      771,
      784,
      732,
      725,
      722,
      2404,
      743,
      1716,
      676,
      674,
      668,
      2363,
      665,
      2360,
      685,
      1684,
      1681,
      626,
      624,
      622,
      2335,
      620,
      2333,
      617,
      2330,
      641,
      635,
      649,
      1646,
      1644,
      1642,
      2566,
      928,
      925,
      2530,
      2527,
      894,
      891,
      888,
      2501,
      2499,
      2496,
      858,
      856,
      854,
      851,
      1779,
      2692,
      2668,
      2665,
      2645,
      2643,
      2640,
      2651,
      2768,
      2759,
      2757,
      2744,
      2743,
      2741,
      2748,
      352,
      1382,
      340,
      337,
      333,
      1371,
      1369,
      307,
      300,
      296,
      2126,
      315,
      312,
      1347,
      1342,
      1350,
      261,
      258,
      250,
      2097,
      246,
      2094,
      271,
      268,
      264,
      1306,
      1301,
      1298,
      276,
      1312,
      1309,
      2115,
      203,
      2048,
      195,
      2045,
      191,
      2041,
      213,
      209,
      2056,
      1246,
      1244,
      1238,
      225,
      1234,
      222,
      1256,
      1253,
      1249,
      1262,
      2080,
      2079,
      154,
      1997,
      150,
      1995,
      147,
      1992,
      1989,
      163,
      160,
      2004,
      156,
      2001,
      1175,
      1174,
      1172,
      1170,
      1167,
      170,
      1164,
      167,
      1185,
      1183,
      1180,
      1177,
      174,
      1190,
      1188,
      2025,
      2024,
      2022,
      587,
      586,
      564,
      559,
      556,
      2290,
      573,
      1588,
      520,
      518,
      512,
      2268,
      508,
      2265,
      530,
      1568,
      1565,
      461,
      457,
      2233,
      450,
      2230,
      446,
      2226,
      479,
      471,
      489,
      1526,
      1523,
      1520,
      397,
      395,
      2185,
      392,
      2183,
      389,
      2180,
      2177,
      410,
      2194,
      402,
      422,
      1463,
      1461,
      1459,
      1456,
      1470,
      2455,
      799,
      2433,
      2430,
      779,
      776,
      773,
      2397,
      2394,
      2390,
      734,
      728,
      724,
      746,
      1717,
      2356,
      2354,
      2351,
      2348,
      1658,
      677,
      675,
      673,
      670,
      667,
      688,
      1685,
      1683,
      2606,
      2589,
      2586,
      2559,
      2556,
      2552,
      927,
      2523,
      2521,
      2518,
      2515,
      1784,
      2532,
      895,
      893,
      890,
      2718,
      2709,
      2707,
      2689,
      2687,
      2684,
      2663,
      2662,
      2660,
      2658,
      1825,
      2667,
      2769,
      1852,
      2760,
      2758,
      142,
      141,
      1139,
      1138,
      134,
      132,
      129,
      126,
      1982,
      1129,
      1128,
      1126,
      1131,
      113,
      111,
      108,
      105,
      1972,
      101,
      1970,
      120,
      118,
      115,
      1109,
      1108,
      1106,
      1104,
      123,
      1113,
      1111,
      82,
      79,
      1951,
      75,
      1949,
      72,
      1946,
      92,
      89,
      86,
      1956,
      1077,
      1076,
      1074,
      1072,
      98,
      1069,
      96,
      1084,
      1082,
      1079,
      1088,
      1968,
      1967,
      48,
      45,
      1916,
      42,
      1914,
      39,
      1911,
      1908,
      60,
      57,
      54,
      1923,
      50,
      1920,
      1031,
      1030,
      1028,
      1026,
      67,
      1023,
      65,
      1020,
      62,
      1041,
      1039,
      1036,
      1033,
      69,
      1046,
      1044,
      1944,
      1943,
      1941,
      11,
      9,
      1868,
      7,
      1865,
      1862,
      1859,
      20,
      1878,
      16,
      1875,
      13,
      1872,
      970,
      968,
      966,
      963,
      29,
      960,
      26,
      23,
      983,
      981,
      978,
      975,
      33,
      971,
      31,
      990,
      988,
      985,
      1906,
      1904,
      1902,
      993,
      351,
      2145,
      1383,
      331,
      330,
      328,
      326,
      2137,
      323,
      2135,
      339,
      1372,
      1370,
      294,
      293,
      291,
      289,
      2122,
      286,
      2120,
      283,
      2117,
      309,
      303,
      317,
      1348,
      1346,
      1344,
      245,
      244,
      242,
      2090,
      239,
      2088,
      236,
      2085,
      2082,
      260,
      2099,
      249,
      270,
      1307,
      1305,
      1303,
      1300,
      1314,
      189,
      2038,
      186,
      2036,
      183,
      2033,
      2030,
      2026,
      206,
      198,
      2047,
      194,
      216,
      1247,
      1245,
      1243,
      1240,
      227,
      1237,
      1255,
      2310,
      2302,
      2300,
      2286,
      2284,
      2281,
      565,
      563,
      561,
      558,
      575,
      1589,
      2261,
      2259,
      2256,
      2253,
      1542,
      521,
      519,
      517,
      514,
      2270,
      511,
      533,
      1569,
      1567,
      2223,
      2221,
      2218,
      2215,
      1483,
      2211,
      1480,
      459,
      456,
      453,
      2232,
      449,
      474,
      491,
      1527,
      1525,
      1522,
      2475,
      2467,
      2465,
      2451,
      2449,
      2446,
      801,
      800,
      2426,
      2424,
      2421,
      2418,
      1723,
      2435,
      780,
      778,
      775,
      2387,
      2385,
      2382,
      2379,
      1695,
      2375,
      1693,
      2396,
      735,
      733,
      730,
      727,
      749,
      1718,
      2616,
      2615,
      2604,
      2603,
      2601,
      2584,
      2583,
      2581,
      2579,
      1800,
      2591,
      2550,
      2549,
      2547,
      2545,
      1792,
      2542,
      1790,
      2558,
      929,
      2719,
      1841,
      2710,
      2708,
      1833,
      1831,
      2690,
      2688,
      2686,
      1815,
      1809,
      1808,
      1774,
      1756,
      1754,
      1737,
      1736,
      1734,
      1739,
      1816,
      1711,
      1676,
      1674,
      633,
      629,
      1638,
      1636,
      1633,
      1641,
      598,
      1605,
      1604,
      1602,
      1600,
      605,
      1609,
      1607,
      2327,
      887,
      853,
      1775,
      822,
      820,
      1757,
      1755,
      1584,
      524,
      1560,
      1558,
      468,
      464,
      1514,
      1511,
      1508,
      1519,
      408,
      404,
      400,
      1452,
      1447,
      1444,
      417,
      1458,
      1455,
      2208,
      364,
      361,
      358,
      2154,
      1401,
      1400,
      1398,
      1396,
      374,
      1393,
      371,
      1408,
      1406,
      1403,
      1413,
      2173,
      2172,
      772,
      726,
      723,
      1712,
      672,
      669,
      666,
      682,
      1678,
      1675,
      625,
      623,
      621,
      618,
      2331,
      636,
      632,
      1639,
      1637,
      1635,
      920,
      918,
      884,
      880,
      889,
      849,
      848,
      847,
      846,
      2497,
      855,
      852,
      1776,
      2641,
      2742,
      2787,
      1380,
      334,
      1367,
      1365,
      301,
      297,
      1340,
      1338,
      1335,
      1343,
      255,
      251,
      247,
      1296,
      1291,
      1288,
      265,
      1302,
      1299,
      2113,
      204,
      196,
      192,
      2042,
      1232,
      1230,
      1224,
      214,
      1220,
      210,
      1242,
      1239,
      1235,
      1250,
      2077,
      2075,
      151,
      148,
      1993,
      144,
      1990,
      1163,
      1162,
      1160,
      1158,
      1155,
      161,
      1152,
      157,
      1173,
      1171,
      1168,
      1165,
      168,
      1181,
      1178,
      2021,
      2020,
      2018,
      2023,
      585,
      560,
      557,
      1585,
      516,
      509,
      1562,
      1559,
      458,
      447,
      2227,
      472,
      1516,
      1513,
      1510,
      398,
      396,
      393,
      390,
      2181,
      386,
      2178,
      407,
      1453,
      1451,
      1449,
      1446,
      420,
      1460,
      2209,
      769,
      764,
      720,
      712,
      2391,
      729,
      1713,
      664,
      663,
      661,
      659,
      2352,
      656,
      2349,
      671,
      1679,
      1677,
      2553,
      922,
      919,
      2519,
      2516,
      885,
      883,
      881,
      2685,
      2661,
      2659,
      2767,
      2756,
      2755,
      140,
      1137,
      1136,
      130,
      127,
      1125,
      1124,
      1122,
      1127,
      109,
      106,
      102,
      1103,
      1102,
      1100,
      1098,
      116,
      1107,
      1105,
      1980,
      80,
      76,
      73,
      1947,
      1068,
      1067,
      1065,
      1063,
      90,
      1060,
      87,
      1075,
      1073,
      1070,
      1080,
      1966,
      1965,
      46,
      43,
      40,
      1912,
      36,
      1909,
      1019,
      1018,
      1016,
      1014,
      58,
      1011,
      55,
      1008,
      51,
      1029,
      1027,
      1024,
      1021,
      63,
      1037,
      1034,
      1940,
      1939,
      1937,
      1942,
      8,
      1866,
      4,
      1863,
      1,
      1860,
      956,
      954,
      952,
      949,
      946,
      17,
      14,
      969,
      967,
      964,
      961,
      27,
      957,
      24,
      979,
      976,
      972,
      1901,
      1900,
      1898,
      1896,
      986,
      1905,
      1903,
      350,
      349,
      1381,
      329,
      327,
      324,
      1368,
      1366,
      292,
      290,
      287,
      284,
      2118,
      304,
      1341,
      1339,
      1337,
      1345,
      243,
      240,
      237,
      2086,
      233,
      2083,
      254,
      1297,
      1295,
      1293,
      1290,
      1304,
      2114,
      190,
      187,
      184,
      2034,
      180,
      2031,
      177,
      2027,
      199,
      1233,
      1231,
      1229,
      1226,
      217,
      1223,
      1241,
      2078,
      2076,
      584,
      555,
      554,
      552,
      550,
      2282,
      562,
      1586,
      507,
      506,
      504,
      502,
      2257,
      499,
      2254,
      515,
      1563,
      1561,
      445,
      443,
      441,
      2219,
      438,
      2216,
      435,
      2212,
      460,
      454,
      475,
      1517,
      1515,
      1512,
      2447,
      798,
      797,
      2422,
      2419,
      770,
      768,
      766,
      2383,
      2380,
      2376,
      721,
      719,
      717,
      714,
      731,
      1714,
      2602,
      2582,
      2580,
      2548,
      2546,
      2543,
      923,
      921,
      2717,
      2706,
      2705,
      2683,
      2682,
      2680,
      1771,
      1752,
      1750,
      1733,
      1732,
      1731,
      1735,
      1814,
      1707,
      1670,
      1668,
      1631,
      1629,
      1626,
      1634,
      1599,
      1598,
      1596,
      1594,
      1603,
      1601,
      2326,
      1772,
      1753,
      1751,
      1581,
      1554,
      1552,
      1504,
      1501,
      1498,
      1509,
      1442,
      1437,
      1434,
      401,
      1448,
      1445,
      2206,
      1392,
      1391,
      1389,
      1387,
      1384,
      359,
      1399,
      1397,
      1394,
      1404,
      2171,
      2170,
      1708,
      1672,
      1669,
      619,
      1632,
      1630,
      1628,
      1773,
      1378,
      1363,
      1361,
      1333,
      1328,
      1336,
      1286,
      1281,
      1278,
      248,
      1292,
      1289,
      2111,
      1218,
      1216,
      1210,
      197,
      1206,
      193,
      1228,
      1225,
      1221,
      1236,
      2073,
      2071,
      1151,
      1150,
      1148,
      1146,
      152,
      1143,
      149,
      1140,
      145,
      1161,
      1159,
      1156,
      1153,
      158,
      1169,
      1166,
      2017,
      2016,
      2014,
      2019,
      1582,
      510,
      1556,
      1553,
      452,
      448,
      1506,
      1500,
      394,
      391,
      387,
      1443,
      1441,
      1439,
      1436,
      1450,
      2207,
      765,
      716,
      713,
      1709,
      662,
      660,
      657,
      1673,
      1671,
      916,
      914,
      879,
      878,
      877,
      882,
      1135,
      1134,
      1121,
      1120,
      1118,
      1123,
      1097,
      1096,
      1094,
      1092,
      103,
      1101,
      1099,
      1979,
      1059,
      1058,
      1056,
      1054,
      77,
      1051,
      74,
      1066,
      1064,
      1061,
      1071,
      1964,
      1963,
      1007,
      1006,
      1004,
      1002,
      999,
      41,
      996,
      37,
      1017,
      1015,
      1012,
      1009,
      52,
      1025,
      1022,
      1936,
      1935,
      1933,
      1938,
      942,
      940,
      938,
      935,
      932,
      5,
      2,
      955,
      953,
      950,
      947,
      18,
      943,
      15,
      965,
      962,
      958,
      1895,
      1894,
      1892,
      1890,
      973,
      1899,
      1897,
      1379,
      325,
      1364,
      1362,
      288,
      285,
      1334,
      1332,
      1330,
      241,
      238,
      234,
      1287,
      1285,
      1283,
      1280,
      1294,
      2112,
      188,
      185,
      181,
      178,
      2028,
      1219,
      1217,
      1215,
      1212,
      200,
      1209,
      1227,
      2074,
      2072,
      583,
      553,
      551,
      1583,
      505,
      503,
      500,
      513,
      1557,
      1555,
      444,
      442,
      439,
      436,
      2213,
      455,
      451,
      1507,
      1505,
      1502,
      796,
      763,
      762,
      760,
      767,
      711,
      710,
      708,
      706,
      2377,
      718,
      715,
      1710,
      2544,
      917,
      915,
      2681,
      1627,
      1597,
      1595,
      2325,
      1769,
      1749,
      1747,
      1499,
      1438,
      1435,
      2204,
      1390,
      1388,
      1385,
      1395,
      2169,
      2167,
      1704,
      1665,
      1662,
      1625,
      1623,
      1620,
      1770,
      1329,
      1282,
      1279,
      2109,
      1214,
      1207,
      1222,
      2068,
      2065,
      1149,
      1147,
      1144,
      1141,
      146,
      1157,
      1154,
      2013,
      2011,
      2008,
      2015,
      1579,
      1549,
      1546,
      1495,
      1487,
      1433,
      1431,
      1428,
      1425,
      388,
      1440,
      2205,
      1705,
      658,
      1667,
      1664,
      1119,
      1095,
      1093,
      1978,
      1057,
      1055,
      1052,
      1062,
      1962,
      1960,
      1005,
      1003,
      1e3,
      997,
      38,
      1013,
      1010,
      1932,
      1930,
      1927,
      1934,
      941,
      939,
      936,
      933,
      6,
      930,
      3,
      951,
      948,
      944,
      1889,
      1887,
      1884,
      1881,
      959,
      1893,
      1891,
      35,
      1377,
      1360,
      1358,
      1327,
      1325,
      1322,
      1331,
      1277,
      1275,
      1272,
      1269,
      235,
      1284,
      2110,
      1205,
      1204,
      1201,
      1198,
      182,
      1195,
      179,
      1213,
      2070,
      2067,
      1580,
      501,
      1551,
      1548,
      440,
      437,
      1497,
      1494,
      1490,
      1503,
      761,
      709,
      707,
      1706,
      913,
      912,
      2198,
      1386,
      2164,
      2161,
      1621,
      1766,
      2103,
      1208,
      2058,
      2054,
      1145,
      1142,
      2005,
      2002,
      1999,
      2009,
      1488,
      1429,
      1426,
      2200,
      1698,
      1659,
      1656,
      1975,
      1053,
      1957,
      1954,
      1001,
      998,
      1924,
      1921,
      1918,
      1928,
      937,
      934,
      931,
      1879,
      1876,
      1873,
      1870,
      945,
      1885,
      1882,
      1323,
      1273,
      1270,
      2105,
      1202,
      1199,
      1196,
      1211,
      2061,
      2057,
      1576,
      1543,
      1540,
      1484,
      1481,
      1478,
      1491,
      1700
    ]);
    class PDF417DetectorResult {
      constructor(bits, points) {
        this.bits = bits;
        this.points = points;
      }
      getBits() {
        return this.bits;
      }
      getPoints() {
        return this.points;
      }
    }
    class Detector$3 {
      static detectMultiple(image, hints, multiple) {
        let bitMatrix = image.getBlackMatrix();
        let barcodeCoordinates = Detector$3.detect(multiple, bitMatrix);
        if (!barcodeCoordinates.length) {
          bitMatrix = bitMatrix.clone();
          bitMatrix.rotate180();
          barcodeCoordinates = Detector$3.detect(multiple, bitMatrix);
        }
        return new PDF417DetectorResult(bitMatrix, barcodeCoordinates);
      }
      static detect(multiple, bitMatrix) {
        const barcodeCoordinates = new Array();
        let row = 0;
        let column = 0;
        let foundBarcodeInRow = false;
        while (row < bitMatrix.getHeight()) {
          const vertices = Detector$3.findVertices(bitMatrix, row, column);
          if (vertices[0] == null && vertices[3] == null) {
            if (!foundBarcodeInRow) {
              break;
            }
            foundBarcodeInRow = false;
            column = 0;
            for (const barcodeCoordinate of barcodeCoordinates) {
              if (barcodeCoordinate[1] != null) {
                row = Math.trunc(Math.max(row, barcodeCoordinate[1].getY()));
              }
              if (barcodeCoordinate[3] != null) {
                row = Math.max(row, Math.trunc(barcodeCoordinate[3].getY()));
              }
            }
            row += Detector$3.ROW_STEP;
            continue;
          }
          foundBarcodeInRow = true;
          barcodeCoordinates.push(vertices);
          if (!multiple) {
            break;
          }
          if (vertices[2] != null) {
            column = Math.trunc(vertices[2].getX());
            row = Math.trunc(vertices[2].getY());
          } else {
            column = Math.trunc(vertices[4].getX());
            row = Math.trunc(vertices[4].getY());
          }
        }
        return barcodeCoordinates;
      }
      static findVertices(matrix, startRow, startColumn) {
        const height = matrix.getHeight();
        const width = matrix.getWidth();
        const result = new Array(8);
        Detector$3.copyToResult(result, Detector$3.findRowsWithPattern(matrix, height, width, startRow, startColumn, Detector$3.START_PATTERN), Detector$3.INDEXES_START_PATTERN);
        if (result[4] != null) {
          startColumn = Math.trunc(result[4].getX());
          startRow = Math.trunc(result[4].getY());
        }
        Detector$3.copyToResult(result, Detector$3.findRowsWithPattern(matrix, height, width, startRow, startColumn, Detector$3.STOP_PATTERN), Detector$3.INDEXES_STOP_PATTERN);
        return result;
      }
      static copyToResult(result, tmpResult, destinationIndexes) {
        for (let i = 0; i < destinationIndexes.length; i++) {
          result[destinationIndexes[i]] = tmpResult[i];
        }
      }
      static findRowsWithPattern(matrix, height, width, startRow, startColumn, pattern) {
        const result = new Array(4);
        let found = false;
        const counters = new Int32Array(pattern.length);
        for (; startRow < height; startRow += Detector$3.ROW_STEP) {
          let loc = Detector$3.findGuardPattern(matrix, startColumn, startRow, width, false, pattern, counters);
          if (loc != null) {
            while (startRow > 0) {
              const previousRowLoc = Detector$3.findGuardPattern(matrix, startColumn, --startRow, width, false, pattern, counters);
              if (previousRowLoc != null) {
                loc = previousRowLoc;
              } else {
                startRow++;
                break;
              }
            }
            result[0] = new ResultPoint(loc[0], startRow);
            result[1] = new ResultPoint(loc[1], startRow);
            found = true;
            break;
          }
        }
        let stopRow = startRow + 1;
        if (found) {
          let skippedRowCount = 0;
          let previousRowLoc = Int32Array.from([Math.trunc(result[0].getX()), Math.trunc(result[1].getX())]);
          for (; stopRow < height; stopRow++) {
            const loc = Detector$3.findGuardPattern(matrix, previousRowLoc[0], stopRow, width, false, pattern, counters);
            if (loc != null && Math.abs(previousRowLoc[0] - loc[0]) < Detector$3.MAX_PATTERN_DRIFT && Math.abs(previousRowLoc[1] - loc[1]) < Detector$3.MAX_PATTERN_DRIFT) {
              previousRowLoc = loc;
              skippedRowCount = 0;
            } else {
              if (skippedRowCount > Detector$3.SKIPPED_ROW_COUNT_MAX) {
                break;
              } else {
                skippedRowCount++;
              }
            }
          }
          stopRow -= skippedRowCount + 1;
          result[2] = new ResultPoint(previousRowLoc[0], stopRow);
          result[3] = new ResultPoint(previousRowLoc[1], stopRow);
        }
        if (stopRow - startRow < Detector$3.BARCODE_MIN_HEIGHT) {
          Arrays.fill(result, null);
        }
        return result;
      }
      static findGuardPattern(matrix, column, row, width, whiteFirst, pattern, counters) {
        Arrays.fillWithin(counters, 0, counters.length, 0);
        let patternStart = column;
        let pixelDrift = 0;
        while (matrix.get(patternStart, row) && patternStart > 0 && pixelDrift++ < Detector$3.MAX_PIXEL_DRIFT) {
          patternStart--;
        }
        let x = patternStart;
        let counterPosition = 0;
        let patternLength = pattern.length;
        for (let isWhite = whiteFirst; x < width; x++) {
          let pixel = matrix.get(x, row);
          if (pixel !== isWhite) {
            counters[counterPosition]++;
          } else {
            if (counterPosition === patternLength - 1) {
              if (Detector$3.patternMatchVariance(counters, pattern, Detector$3.MAX_INDIVIDUAL_VARIANCE) < Detector$3.MAX_AVG_VARIANCE) {
                return new Int32Array([patternStart, x]);
              }
              patternStart += counters[0] + counters[1];
              System.arraycopy(counters, 2, counters, 0, counterPosition - 1);
              counters[counterPosition - 1] = 0;
              counters[counterPosition] = 0;
              counterPosition--;
            } else {
              counterPosition++;
            }
            counters[counterPosition] = 1;
            isWhite = !isWhite;
          }
        }
        if (counterPosition === patternLength - 1 && Detector$3.patternMatchVariance(counters, pattern, Detector$3.MAX_INDIVIDUAL_VARIANCE) < Detector$3.MAX_AVG_VARIANCE) {
          return new Int32Array([patternStart, x - 1]);
        }
        return null;
      }
      static patternMatchVariance(counters, pattern, maxIndividualVariance) {
        let numCounters = counters.length;
        let total = 0;
        let patternLength = 0;
        for (let i = 0; i < numCounters; i++) {
          total += counters[i];
          patternLength += pattern[i];
        }
        if (total < patternLength) {
          return Infinity;
        }
        let unitBarWidth = total / patternLength;
        maxIndividualVariance *= unitBarWidth;
        let totalVariance = 0;
        for (let x = 0; x < numCounters; x++) {
          let counter = counters[x];
          let scaledPattern = pattern[x] * unitBarWidth;
          let variance = counter > scaledPattern ? counter - scaledPattern : scaledPattern - counter;
          if (variance > maxIndividualVariance) {
            return Infinity;
          }
          totalVariance += variance;
        }
        return totalVariance / total;
      }
    }
    Detector$3.INDEXES_START_PATTERN = Int32Array.from([0, 4, 1, 5]);
    Detector$3.INDEXES_STOP_PATTERN = Int32Array.from([6, 2, 7, 3]);
    Detector$3.MAX_AVG_VARIANCE = 0.42;
    Detector$3.MAX_INDIVIDUAL_VARIANCE = 0.8;
    Detector$3.START_PATTERN = Int32Array.from([8, 1, 1, 1, 1, 1, 1, 3]);
    Detector$3.STOP_PATTERN = Int32Array.from([7, 1, 1, 3, 1, 1, 1, 2, 1]);
    Detector$3.MAX_PIXEL_DRIFT = 3;
    Detector$3.MAX_PATTERN_DRIFT = 5;
    Detector$3.SKIPPED_ROW_COUNT_MAX = 25;
    Detector$3.ROW_STEP = 5;
    Detector$3.BARCODE_MIN_HEIGHT = 10;
    class ModulusPoly {
      constructor(field, coefficients) {
        if (coefficients.length === 0) {
          throw new IllegalArgumentException();
        }
        this.field = field;
        let coefficientsLength = coefficients.length;
        if (coefficientsLength > 1 && coefficients[0] === 0) {
          let firstNonZero = 1;
          while (firstNonZero < coefficientsLength && coefficients[firstNonZero] === 0) {
            firstNonZero++;
          }
          if (firstNonZero === coefficientsLength) {
            this.coefficients = new Int32Array([0]);
          } else {
            this.coefficients = new Int32Array(coefficientsLength - firstNonZero);
            System.arraycopy(coefficients, firstNonZero, this.coefficients, 0, this.coefficients.length);
          }
        } else {
          this.coefficients = coefficients;
        }
      }
      getCoefficients() {
        return this.coefficients;
      }
      getDegree() {
        return this.coefficients.length - 1;
      }
      isZero() {
        return this.coefficients[0] === 0;
      }
      getCoefficient(degree) {
        return this.coefficients[this.coefficients.length - 1 - degree];
      }
      evaluateAt(a) {
        if (a === 0) {
          return this.getCoefficient(0);
        }
        if (a === 1) {
          let sum = 0;
          for (let coefficient of this.coefficients) {
            sum = this.field.add(sum, coefficient);
          }
          return sum;
        }
        let result = this.coefficients[0];
        let size = this.coefficients.length;
        for (let i = 1; i < size; i++) {
          result = this.field.add(this.field.multiply(a, result), this.coefficients[i]);
        }
        return result;
      }
      add(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");
        }
        if (this.isZero()) {
          return other;
        }
        if (other.isZero()) {
          return this;
        }
        let smallerCoefficients = this.coefficients;
        let largerCoefficients = other.coefficients;
        if (smallerCoefficients.length > largerCoefficients.length) {
          let temp = smallerCoefficients;
          smallerCoefficients = largerCoefficients;
          largerCoefficients = temp;
        }
        let sumDiff = new Int32Array(largerCoefficients.length);
        let lengthDiff = largerCoefficients.length - smallerCoefficients.length;
        System.arraycopy(largerCoefficients, 0, sumDiff, 0, lengthDiff);
        for (let i = lengthDiff; i < largerCoefficients.length; i++) {
          sumDiff[i] = this.field.add(smallerCoefficients[i - lengthDiff], largerCoefficients[i]);
        }
        return new ModulusPoly(this.field, sumDiff);
      }
      subtract(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");
        }
        if (other.isZero()) {
          return this;
        }
        return this.add(other.negative());
      }
      multiply(other) {
        if (other instanceof ModulusPoly) {
          return this.multiplyOther(other);
        }
        return this.multiplyScalar(other);
      }
      multiplyOther(other) {
        if (!this.field.equals(other.field)) {
          throw new IllegalArgumentException("ModulusPolys do not have same ModulusGF field");
        }
        if (this.isZero() || other.isZero()) {
          return new ModulusPoly(this.field, new Int32Array([0]));
        }
        let aCoefficients = this.coefficients;
        let aLength = aCoefficients.length;
        let bCoefficients = other.coefficients;
        let bLength = bCoefficients.length;
        let product = new Int32Array(aLength + bLength - 1);
        for (let i = 0; i < aLength; i++) {
          let aCoeff = aCoefficients[i];
          for (let j = 0; j < bLength; j++) {
            product[i + j] = this.field.add(product[i + j], this.field.multiply(aCoeff, bCoefficients[j]));
          }
        }
        return new ModulusPoly(this.field, product);
      }
      negative() {
        let size = this.coefficients.length;
        let negativeCoefficients = new Int32Array(size);
        for (let i = 0; i < size; i++) {
          negativeCoefficients[i] = this.field.subtract(0, this.coefficients[i]);
        }
        return new ModulusPoly(this.field, negativeCoefficients);
      }
      multiplyScalar(scalar) {
        if (scalar === 0) {
          return new ModulusPoly(this.field, new Int32Array([0]));
        }
        if (scalar === 1) {
          return this;
        }
        let size = this.coefficients.length;
        let product = new Int32Array(size);
        for (let i = 0; i < size; i++) {
          product[i] = this.field.multiply(this.coefficients[i], scalar);
        }
        return new ModulusPoly(this.field, product);
      }
      multiplyByMonomial(degree, coefficient) {
        if (degree < 0) {
          throw new IllegalArgumentException();
        }
        if (coefficient === 0) {
          return new ModulusPoly(this.field, new Int32Array([0]));
        }
        let size = this.coefficients.length;
        let product = new Int32Array(size + degree);
        for (let i = 0; i < size; i++) {
          product[i] = this.field.multiply(this.coefficients[i], coefficient);
        }
        return new ModulusPoly(this.field, product);
      }
      toString() {
        let result = new StringBuilder();
        for (let degree = this.getDegree(); degree >= 0; degree--) {
          let coefficient = this.getCoefficient(degree);
          if (coefficient !== 0) {
            if (coefficient < 0) {
              result.append(" - ");
              coefficient = -coefficient;
            } else {
              if (result.length() > 0) {
                result.append(" + ");
              }
            }
            if (degree === 0 || coefficient !== 1) {
              result.append(coefficient);
            }
            if (degree !== 0) {
              if (degree === 1) {
                result.append("x");
              } else {
                result.append("x^");
                result.append(degree);
              }
            }
          }
        }
        return result.toString();
      }
    }
    class ModulusBase {
      add(a, b) {
        return (a + b) % this.modulus;
      }
      subtract(a, b) {
        return (this.modulus + a - b) % this.modulus;
      }
      exp(a) {
        return this.expTable[a];
      }
      log(a) {
        if (a === 0) {
          throw new IllegalArgumentException();
        }
        return this.logTable[a];
      }
      inverse(a) {
        if (a === 0) {
          throw new ArithmeticException();
        }
        return this.expTable[this.modulus - this.logTable[a] - 1];
      }
      multiply(a, b) {
        if (a === 0 || b === 0) {
          return 0;
        }
        return this.expTable[(this.logTable[a] + this.logTable[b]) % (this.modulus - 1)];
      }
      getSize() {
        return this.modulus;
      }
      equals(o) {
        return o === this;
      }
    }
    class ModulusGF extends ModulusBase {
      constructor(modulus, generator) {
        super();
        this.modulus = modulus;
        this.expTable = new Int32Array(modulus);
        this.logTable = new Int32Array(modulus);
        let x = 1;
        for (let i = 0; i < modulus; i++) {
          this.expTable[i] = x;
          x = x * generator % modulus;
        }
        for (let i = 0; i < modulus - 1; i++) {
          this.logTable[this.expTable[i]] = i;
        }
        this.zero = new ModulusPoly(this, new Int32Array([0]));
        this.one = new ModulusPoly(this, new Int32Array([1]));
      }
      getZero() {
        return this.zero;
      }
      getOne() {
        return this.one;
      }
      buildMonomial(degree, coefficient) {
        if (degree < 0) {
          throw new IllegalArgumentException();
        }
        if (coefficient === 0) {
          return this.zero;
        }
        let coefficients = new Int32Array(degree + 1);
        coefficients[0] = coefficient;
        return new ModulusPoly(this, coefficients);
      }
    }
    ModulusGF.PDF417_GF = new ModulusGF(PDF417Common.NUMBER_OF_CODEWORDS, 3);
    class ErrorCorrection {
      constructor() {
        this.field = ModulusGF.PDF417_GF;
      }
      decode(received, numECCodewords, erasures) {
        let poly = new ModulusPoly(this.field, received);
        let S = new Int32Array(numECCodewords);
        let error2 = false;
        for (let i = numECCodewords; i > 0; i--) {
          let evaluation = poly.evaluateAt(this.field.exp(i));
          S[numECCodewords - i] = evaluation;
          if (evaluation !== 0) {
            error2 = true;
          }
        }
        if (!error2) {
          return 0;
        }
        let knownErrors = this.field.getOne();
        if (erasures != null) {
          for (const erasure of erasures) {
            let b = this.field.exp(received.length - 1 - erasure);
            let term = new ModulusPoly(this.field, new Int32Array([this.field.subtract(0, b), 1]));
            knownErrors = knownErrors.multiply(term);
          }
        }
        let syndrome = new ModulusPoly(this.field, S);
        let sigmaOmega = this.runEuclideanAlgorithm(this.field.buildMonomial(numECCodewords, 1), syndrome, numECCodewords);
        let sigma = sigmaOmega[0];
        let omega = sigmaOmega[1];
        let errorLocations = this.findErrorLocations(sigma);
        let errorMagnitudes = this.findErrorMagnitudes(omega, sigma, errorLocations);
        for (let i = 0; i < errorLocations.length; i++) {
          let position = received.length - 1 - this.field.log(errorLocations[i]);
          if (position < 0) {
            throw ChecksumException.getChecksumInstance();
          }
          received[position] = this.field.subtract(received[position], errorMagnitudes[i]);
        }
        return errorLocations.length;
      }
      runEuclideanAlgorithm(a, b, R) {
        if (a.getDegree() < b.getDegree()) {
          let temp = a;
          a = b;
          b = temp;
        }
        let rLast = a;
        let r = b;
        let tLast = this.field.getZero();
        let t = this.field.getOne();
        while (r.getDegree() >= Math.round(R / 2)) {
          let rLastLast = rLast;
          let tLastLast = tLast;
          rLast = r;
          tLast = t;
          if (rLast.isZero()) {
            throw ChecksumException.getChecksumInstance();
          }
          r = rLastLast;
          let q = this.field.getZero();
          let denominatorLeadingTerm = rLast.getCoefficient(rLast.getDegree());
          let dltInverse = this.field.inverse(denominatorLeadingTerm);
          while (r.getDegree() >= rLast.getDegree() && !r.isZero()) {
            let degreeDiff = r.getDegree() - rLast.getDegree();
            let scale = this.field.multiply(r.getCoefficient(r.getDegree()), dltInverse);
            q = q.add(this.field.buildMonomial(degreeDiff, scale));
            r = r.subtract(rLast.multiplyByMonomial(degreeDiff, scale));
          }
          t = q.multiply(tLast).subtract(tLastLast).negative();
        }
        let sigmaTildeAtZero = t.getCoefficient(0);
        if (sigmaTildeAtZero === 0) {
          throw ChecksumException.getChecksumInstance();
        }
        let inverse = this.field.inverse(sigmaTildeAtZero);
        let sigma = t.multiply(inverse);
        let omega = r.multiply(inverse);
        return [sigma, omega];
      }
      findErrorLocations(errorLocator) {
        let numErrors = errorLocator.getDegree();
        let result = new Int32Array(numErrors);
        let e = 0;
        for (let i = 1; i < this.field.getSize() && e < numErrors; i++) {
          if (errorLocator.evaluateAt(i) === 0) {
            result[e] = this.field.inverse(i);
            e++;
          }
        }
        if (e !== numErrors) {
          throw ChecksumException.getChecksumInstance();
        }
        return result;
      }
      findErrorMagnitudes(errorEvaluator, errorLocator, errorLocations) {
        let errorLocatorDegree = errorLocator.getDegree();
        let formalDerivativeCoefficients = new Int32Array(errorLocatorDegree);
        for (let i = 1; i <= errorLocatorDegree; i++) {
          formalDerivativeCoefficients[errorLocatorDegree - i] = this.field.multiply(i, errorLocator.getCoefficient(i));
        }
        let formalDerivative = new ModulusPoly(this.field, formalDerivativeCoefficients);
        let s = errorLocations.length;
        let result = new Int32Array(s);
        for (let i = 0; i < s; i++) {
          let xiInverse = this.field.inverse(errorLocations[i]);
          let numerator = this.field.subtract(0, errorEvaluator.evaluateAt(xiInverse));
          let denominator = this.field.inverse(formalDerivative.evaluateAt(xiInverse));
          result[i] = this.field.multiply(numerator, denominator);
        }
        return result;
      }
    }
    class BoundingBox {
      constructor(image, topLeft, bottomLeft, topRight, bottomRight) {
        if (image instanceof BoundingBox) {
          this.constructor_2(image);
        } else {
          this.constructor_1(image, topLeft, bottomLeft, topRight, bottomRight);
        }
      }
      constructor_1(image, topLeft, bottomLeft, topRight, bottomRight) {
        const leftUnspecified = topLeft == null || bottomLeft == null;
        const rightUnspecified = topRight == null || bottomRight == null;
        if (leftUnspecified && rightUnspecified) {
          throw new NotFoundException();
        }
        if (leftUnspecified) {
          topLeft = new ResultPoint(0, topRight.getY());
          bottomLeft = new ResultPoint(0, bottomRight.getY());
        } else if (rightUnspecified) {
          topRight = new ResultPoint(image.getWidth() - 1, topLeft.getY());
          bottomRight = new ResultPoint(image.getWidth() - 1, bottomLeft.getY());
        }
        this.image = image;
        this.topLeft = topLeft;
        this.bottomLeft = bottomLeft;
        this.topRight = topRight;
        this.bottomRight = bottomRight;
        this.minX = Math.trunc(Math.min(topLeft.getX(), bottomLeft.getX()));
        this.maxX = Math.trunc(Math.max(topRight.getX(), bottomRight.getX()));
        this.minY = Math.trunc(Math.min(topLeft.getY(), topRight.getY()));
        this.maxY = Math.trunc(Math.max(bottomLeft.getY(), bottomRight.getY()));
      }
      constructor_2(boundingBox) {
        this.image = boundingBox.image;
        this.topLeft = boundingBox.getTopLeft();
        this.bottomLeft = boundingBox.getBottomLeft();
        this.topRight = boundingBox.getTopRight();
        this.bottomRight = boundingBox.getBottomRight();
        this.minX = boundingBox.getMinX();
        this.maxX = boundingBox.getMaxX();
        this.minY = boundingBox.getMinY();
        this.maxY = boundingBox.getMaxY();
      }
      static merge(leftBox, rightBox) {
        if (leftBox == null) {
          return rightBox;
        }
        if (rightBox == null) {
          return leftBox;
        }
        return new BoundingBox(leftBox.image, leftBox.topLeft, leftBox.bottomLeft, rightBox.topRight, rightBox.bottomRight);
      }
      addMissingRows(missingStartRows, missingEndRows, isLeft) {
        let newTopLeft = this.topLeft;
        let newBottomLeft = this.bottomLeft;
        let newTopRight = this.topRight;
        let newBottomRight = this.bottomRight;
        if (missingStartRows > 0) {
          let top = isLeft ? this.topLeft : this.topRight;
          let newMinY = Math.trunc(top.getY() - missingStartRows);
          if (newMinY < 0) {
            newMinY = 0;
          }
          let newTop = new ResultPoint(top.getX(), newMinY);
          if (isLeft) {
            newTopLeft = newTop;
          } else {
            newTopRight = newTop;
          }
        }
        if (missingEndRows > 0) {
          let bottom = isLeft ? this.bottomLeft : this.bottomRight;
          let newMaxY = Math.trunc(bottom.getY() + missingEndRows);
          if (newMaxY >= this.image.getHeight()) {
            newMaxY = this.image.getHeight() - 1;
          }
          let newBottom = new ResultPoint(bottom.getX(), newMaxY);
          if (isLeft) {
            newBottomLeft = newBottom;
          } else {
            newBottomRight = newBottom;
          }
        }
        return new BoundingBox(this.image, newTopLeft, newBottomLeft, newTopRight, newBottomRight);
      }
      getMinX() {
        return this.minX;
      }
      getMaxX() {
        return this.maxX;
      }
      getMinY() {
        return this.minY;
      }
      getMaxY() {
        return this.maxY;
      }
      getTopLeft() {
        return this.topLeft;
      }
      getTopRight() {
        return this.topRight;
      }
      getBottomLeft() {
        return this.bottomLeft;
      }
      getBottomRight() {
        return this.bottomRight;
      }
    }
    class BarcodeMetadata {
      constructor(columnCount, rowCountUpperPart, rowCountLowerPart, errorCorrectionLevel) {
        this.columnCount = columnCount;
        this.errorCorrectionLevel = errorCorrectionLevel;
        this.rowCountUpperPart = rowCountUpperPart;
        this.rowCountLowerPart = rowCountLowerPart;
        this.rowCount = rowCountUpperPart + rowCountLowerPart;
      }
      getColumnCount() {
        return this.columnCount;
      }
      getErrorCorrectionLevel() {
        return this.errorCorrectionLevel;
      }
      getRowCount() {
        return this.rowCount;
      }
      getRowCountUpperPart() {
        return this.rowCountUpperPart;
      }
      getRowCountLowerPart() {
        return this.rowCountLowerPart;
      }
    }
    class Formatter {
      constructor() {
        this.buffer = "";
      }
      static form(str, arr) {
        let i = -1;
        function callback(exp, p0, p1, p2, p3, p4) {
          if (exp === "%%")
            return "%";
          if (arr[++i] === void 0)
            return void 0;
          exp = p2 ? parseInt(p2.substr(1)) : void 0;
          let base = p3 ? parseInt(p3.substr(1)) : void 0;
          let val;
          switch (p4) {
            case "s":
              val = arr[i];
              break;
            case "c":
              val = arr[i][0];
              break;
            case "f":
              val = parseFloat(arr[i]).toFixed(exp);
              break;
            case "p":
              val = parseFloat(arr[i]).toPrecision(exp);
              break;
            case "e":
              val = parseFloat(arr[i]).toExponential(exp);
              break;
            case "x":
              val = parseInt(arr[i]).toString(base ? base : 16);
              break;
            case "d":
              val = parseFloat(parseInt(arr[i], base ? base : 10).toPrecision(exp)).toFixed(0);
              break;
          }
          val = typeof val === "object" ? JSON.stringify(val) : (+val).toString(base);
          let size = parseInt(p1);
          let ch = p1 && p1[0] + "" === "0" ? "0" : " ";
          while (val.length < size)
            val = p0 !== void 0 ? val + ch : ch + val;
          return val;
        }
        let regex = /%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;
        return str.replace(regex, callback);
      }
      format(append, ...args) {
        this.buffer += Formatter.form(append, args);
      }
      toString() {
        return this.buffer;
      }
    }
    class DetectionResultColumn {
      constructor(boundingBox) {
        this.boundingBox = new BoundingBox(boundingBox);
        this.codewords = new Array(boundingBox.getMaxY() - boundingBox.getMinY() + 1);
      }
      getCodewordNearby(imageRow) {
        let codeword = this.getCodeword(imageRow);
        if (codeword != null) {
          return codeword;
        }
        for (let i = 1; i < DetectionResultColumn.MAX_NEARBY_DISTANCE; i++) {
          let nearImageRow = this.imageRowToCodewordIndex(imageRow) - i;
          if (nearImageRow >= 0) {
            codeword = this.codewords[nearImageRow];
            if (codeword != null) {
              return codeword;
            }
          }
          nearImageRow = this.imageRowToCodewordIndex(imageRow) + i;
          if (nearImageRow < this.codewords.length) {
            codeword = this.codewords[nearImageRow];
            if (codeword != null) {
              return codeword;
            }
          }
        }
        return null;
      }
      imageRowToCodewordIndex(imageRow) {
        return imageRow - this.boundingBox.getMinY();
      }
      setCodeword(imageRow, codeword) {
        this.codewords[this.imageRowToCodewordIndex(imageRow)] = codeword;
      }
      getCodeword(imageRow) {
        return this.codewords[this.imageRowToCodewordIndex(imageRow)];
      }
      getBoundingBox() {
        return this.boundingBox;
      }
      getCodewords() {
        return this.codewords;
      }
      toString() {
        const formatter = new Formatter();
        let row = 0;
        for (const codeword of this.codewords) {
          if (codeword == null) {
            formatter.format("%3d:    |   %n", row++);
            continue;
          }
          formatter.format("%3d: %3d|%3d%n", row++, codeword.getRowNumber(), codeword.getValue());
        }
        return formatter.toString();
      }
    }
    DetectionResultColumn.MAX_NEARBY_DISTANCE = 5;
    class BarcodeValue {
      constructor() {
        this.values = /* @__PURE__ */ new Map();
      }
      setValue(value) {
        value = Math.trunc(value);
        let confidence = this.values.get(value);
        if (confidence == null) {
          confidence = 0;
        }
        confidence++;
        this.values.set(value, confidence);
      }
      getValue() {
        let maxConfidence = -1;
        let result = new Array();
        for (const [key, value] of this.values.entries()) {
          const entry = {
            getKey: () => key,
            getValue: () => value
          };
          if (entry.getValue() > maxConfidence) {
            maxConfidence = entry.getValue();
            result = [];
            result.push(entry.getKey());
          } else if (entry.getValue() === maxConfidence) {
            result.push(entry.getKey());
          }
        }
        return PDF417Common.toIntArray(result);
      }
      getConfidence(value) {
        return this.values.get(value);
      }
    }
    class DetectionResultRowIndicatorColumn extends DetectionResultColumn {
      constructor(boundingBox, isLeft) {
        super(boundingBox);
        this._isLeft = isLeft;
      }
      setRowNumbers() {
        for (let codeword of this.getCodewords()) {
          if (codeword != null) {
            codeword.setRowNumberAsRowIndicatorColumn();
          }
        }
      }
      adjustCompleteIndicatorColumnRowNumbers(barcodeMetadata) {
        let codewords = this.getCodewords();
        this.setRowNumbers();
        this.removeIncorrectCodewords(codewords, barcodeMetadata);
        let boundingBox = this.getBoundingBox();
        let top = this._isLeft ? boundingBox.getTopLeft() : boundingBox.getTopRight();
        let bottom = this._isLeft ? boundingBox.getBottomLeft() : boundingBox.getBottomRight();
        let firstRow = this.imageRowToCodewordIndex(Math.trunc(top.getY()));
        let lastRow = this.imageRowToCodewordIndex(Math.trunc(bottom.getY()));
        let barcodeRow = -1;
        let maxRowHeight = 1;
        let currentRowHeight = 0;
        for (let codewordsRow = firstRow; codewordsRow < lastRow; codewordsRow++) {
          if (codewords[codewordsRow] == null) {
            continue;
          }
          let codeword = codewords[codewordsRow];
          let rowDifference = codeword.getRowNumber() - barcodeRow;
          if (rowDifference === 0) {
            currentRowHeight++;
          } else if (rowDifference === 1) {
            maxRowHeight = Math.max(maxRowHeight, currentRowHeight);
            currentRowHeight = 1;
            barcodeRow = codeword.getRowNumber();
          } else if (rowDifference < 0 || codeword.getRowNumber() >= barcodeMetadata.getRowCount() || rowDifference > codewordsRow) {
            codewords[codewordsRow] = null;
          } else {
            let checkedRows;
            if (maxRowHeight > 2) {
              checkedRows = (maxRowHeight - 2) * rowDifference;
            } else {
              checkedRows = rowDifference;
            }
            let closePreviousCodewordFound = checkedRows >= codewordsRow;
            for (let i = 1; i <= checkedRows && !closePreviousCodewordFound; i++) {
              closePreviousCodewordFound = codewords[codewordsRow - i] != null;
            }
            if (closePreviousCodewordFound) {
              codewords[codewordsRow] = null;
            } else {
              barcodeRow = codeword.getRowNumber();
              currentRowHeight = 1;
            }
          }
        }
      }
      getRowHeights() {
        let barcodeMetadata = this.getBarcodeMetadata();
        if (barcodeMetadata == null) {
          return null;
        }
        this.adjustIncompleteIndicatorColumnRowNumbers(barcodeMetadata);
        let result = new Int32Array(barcodeMetadata.getRowCount());
        for (let codeword of this.getCodewords()) {
          if (codeword != null) {
            let rowNumber = codeword.getRowNumber();
            if (rowNumber >= result.length) {
              continue;
            }
            result[rowNumber]++;
          }
        }
        return result;
      }
      adjustIncompleteIndicatorColumnRowNumbers(barcodeMetadata) {
        let boundingBox = this.getBoundingBox();
        let top = this._isLeft ? boundingBox.getTopLeft() : boundingBox.getTopRight();
        let bottom = this._isLeft ? boundingBox.getBottomLeft() : boundingBox.getBottomRight();
        let firstRow = this.imageRowToCodewordIndex(Math.trunc(top.getY()));
        let lastRow = this.imageRowToCodewordIndex(Math.trunc(bottom.getY()));
        let codewords = this.getCodewords();
        let barcodeRow = -1;
        for (let codewordsRow = firstRow; codewordsRow < lastRow; codewordsRow++) {
          if (codewords[codewordsRow] == null) {
            continue;
          }
          let codeword = codewords[codewordsRow];
          codeword.setRowNumberAsRowIndicatorColumn();
          let rowDifference = codeword.getRowNumber() - barcodeRow;
          if (rowDifference === 0)
            ;
          else if (rowDifference === 1) {
            barcodeRow = codeword.getRowNumber();
          } else if (codeword.getRowNumber() >= barcodeMetadata.getRowCount()) {
            codewords[codewordsRow] = null;
          } else {
            barcodeRow = codeword.getRowNumber();
          }
        }
      }
      getBarcodeMetadata() {
        let codewords = this.getCodewords();
        let barcodeColumnCount = new BarcodeValue();
        let barcodeRowCountUpperPart = new BarcodeValue();
        let barcodeRowCountLowerPart = new BarcodeValue();
        let barcodeECLevel = new BarcodeValue();
        for (let codeword of codewords) {
          if (codeword == null) {
            continue;
          }
          codeword.setRowNumberAsRowIndicatorColumn();
          let rowIndicatorValue = codeword.getValue() % 30;
          let codewordRowNumber = codeword.getRowNumber();
          if (!this._isLeft) {
            codewordRowNumber += 2;
          }
          switch (codewordRowNumber % 3) {
            case 0:
              barcodeRowCountUpperPart.setValue(rowIndicatorValue * 3 + 1);
              break;
            case 1:
              barcodeECLevel.setValue(rowIndicatorValue / 3);
              barcodeRowCountLowerPart.setValue(rowIndicatorValue % 3);
              break;
            case 2:
              barcodeColumnCount.setValue(rowIndicatorValue + 1);
              break;
          }
        }
        if (barcodeColumnCount.getValue().length === 0 || barcodeRowCountUpperPart.getValue().length === 0 || barcodeRowCountLowerPart.getValue().length === 0 || barcodeECLevel.getValue().length === 0 || barcodeColumnCount.getValue()[0] < 1 || barcodeRowCountUpperPart.getValue()[0] + barcodeRowCountLowerPart.getValue()[0] < PDF417Common.MIN_ROWS_IN_BARCODE || barcodeRowCountUpperPart.getValue()[0] + barcodeRowCountLowerPart.getValue()[0] > PDF417Common.MAX_ROWS_IN_BARCODE) {
          return null;
        }
        let barcodeMetadata = new BarcodeMetadata(barcodeColumnCount.getValue()[0], barcodeRowCountUpperPart.getValue()[0], barcodeRowCountLowerPart.getValue()[0], barcodeECLevel.getValue()[0]);
        this.removeIncorrectCodewords(codewords, barcodeMetadata);
        return barcodeMetadata;
      }
      removeIncorrectCodewords(codewords, barcodeMetadata) {
        for (let codewordRow = 0; codewordRow < codewords.length; codewordRow++) {
          let codeword = codewords[codewordRow];
          if (codewords[codewordRow] == null) {
            continue;
          }
          let rowIndicatorValue = codeword.getValue() % 30;
          let codewordRowNumber = codeword.getRowNumber();
          if (codewordRowNumber > barcodeMetadata.getRowCount()) {
            codewords[codewordRow] = null;
            continue;
          }
          if (!this._isLeft) {
            codewordRowNumber += 2;
          }
          switch (codewordRowNumber % 3) {
            case 0:
              if (rowIndicatorValue * 3 + 1 !== barcodeMetadata.getRowCountUpperPart()) {
                codewords[codewordRow] = null;
              }
              break;
            case 1:
              if (Math.trunc(rowIndicatorValue / 3) !== barcodeMetadata.getErrorCorrectionLevel() || rowIndicatorValue % 3 !== barcodeMetadata.getRowCountLowerPart()) {
                codewords[codewordRow] = null;
              }
              break;
            case 2:
              if (rowIndicatorValue + 1 !== barcodeMetadata.getColumnCount()) {
                codewords[codewordRow] = null;
              }
              break;
          }
        }
      }
      isLeft() {
        return this._isLeft;
      }
      toString() {
        return "IsLeft: " + this._isLeft + "\n" + super.toString();
      }
    }
    class DetectionResult {
      constructor(barcodeMetadata, boundingBox) {
        this.ADJUST_ROW_NUMBER_SKIP = 2;
        this.barcodeMetadata = barcodeMetadata;
        this.barcodeColumnCount = barcodeMetadata.getColumnCount();
        this.boundingBox = boundingBox;
        this.detectionResultColumns = new Array(this.barcodeColumnCount + 2);
      }
      getDetectionResultColumns() {
        this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]);
        this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount + 1]);
        let unadjustedCodewordCount = PDF417Common.MAX_CODEWORDS_IN_BARCODE;
        let previousUnadjustedCount;
        do {
          previousUnadjustedCount = unadjustedCodewordCount;
          unadjustedCodewordCount = this.adjustRowNumbersAndGetCount();
        } while (unadjustedCodewordCount > 0 && unadjustedCodewordCount < previousUnadjustedCount);
        return this.detectionResultColumns;
      }
      adjustIndicatorColumnRowNumbers(detectionResultColumn) {
        if (detectionResultColumn != null) {
          detectionResultColumn.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata);
        }
      }
      adjustRowNumbersAndGetCount() {
        let unadjustedCount = this.adjustRowNumbersByRow();
        if (unadjustedCount === 0) {
          return 0;
        }
        for (let barcodeColumn = 1; barcodeColumn < this.barcodeColumnCount + 1; barcodeColumn++) {
          let codewords = this.detectionResultColumns[barcodeColumn].getCodewords();
          for (let codewordsRow = 0; codewordsRow < codewords.length; codewordsRow++) {
            if (codewords[codewordsRow] == null) {
              continue;
            }
            if (!codewords[codewordsRow].hasValidRowNumber()) {
              this.adjustRowNumbers(barcodeColumn, codewordsRow, codewords);
            }
          }
        }
        return unadjustedCount;
      }
      adjustRowNumbersByRow() {
        this.adjustRowNumbersFromBothRI();
        let unadjustedCount = this.adjustRowNumbersFromLRI();
        return unadjustedCount + this.adjustRowNumbersFromRRI();
      }
      adjustRowNumbersFromBothRI() {
        if (this.detectionResultColumns[0] == null || this.detectionResultColumns[this.barcodeColumnCount + 1] == null) {
          return;
        }
        let LRIcodewords = this.detectionResultColumns[0].getCodewords();
        let RRIcodewords = this.detectionResultColumns[this.barcodeColumnCount + 1].getCodewords();
        for (let codewordsRow = 0; codewordsRow < LRIcodewords.length; codewordsRow++) {
          if (LRIcodewords[codewordsRow] != null && RRIcodewords[codewordsRow] != null && LRIcodewords[codewordsRow].getRowNumber() === RRIcodewords[codewordsRow].getRowNumber()) {
            for (let barcodeColumn = 1; barcodeColumn <= this.barcodeColumnCount; barcodeColumn++) {
              let codeword = this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];
              if (codeword == null) {
                continue;
              }
              codeword.setRowNumber(LRIcodewords[codewordsRow].getRowNumber());
              if (!codeword.hasValidRowNumber()) {
                this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow] = null;
              }
            }
          }
        }
      }
      adjustRowNumbersFromRRI() {
        if (this.detectionResultColumns[this.barcodeColumnCount + 1] == null) {
          return 0;
        }
        let unadjustedCount = 0;
        let codewords = this.detectionResultColumns[this.barcodeColumnCount + 1].getCodewords();
        for (let codewordsRow = 0; codewordsRow < codewords.length; codewordsRow++) {
          if (codewords[codewordsRow] == null) {
            continue;
          }
          let rowIndicatorRowNumber = codewords[codewordsRow].getRowNumber();
          let invalidRowCounts = 0;
          for (let barcodeColumn = this.barcodeColumnCount + 1; barcodeColumn > 0 && invalidRowCounts < this.ADJUST_ROW_NUMBER_SKIP; barcodeColumn--) {
            let codeword = this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];
            if (codeword != null) {
              invalidRowCounts = DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber, invalidRowCounts, codeword);
              if (!codeword.hasValidRowNumber()) {
                unadjustedCount++;
              }
            }
          }
        }
        return unadjustedCount;
      }
      adjustRowNumbersFromLRI() {
        if (this.detectionResultColumns[0] == null) {
          return 0;
        }
        let unadjustedCount = 0;
        let codewords = this.detectionResultColumns[0].getCodewords();
        for (let codewordsRow = 0; codewordsRow < codewords.length; codewordsRow++) {
          if (codewords[codewordsRow] == null) {
            continue;
          }
          let rowIndicatorRowNumber = codewords[codewordsRow].getRowNumber();
          let invalidRowCounts = 0;
          for (let barcodeColumn = 1; barcodeColumn < this.barcodeColumnCount + 1 && invalidRowCounts < this.ADJUST_ROW_NUMBER_SKIP; barcodeColumn++) {
            let codeword = this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];
            if (codeword != null) {
              invalidRowCounts = DetectionResult.adjustRowNumberIfValid(rowIndicatorRowNumber, invalidRowCounts, codeword);
              if (!codeword.hasValidRowNumber()) {
                unadjustedCount++;
              }
            }
          }
        }
        return unadjustedCount;
      }
      static adjustRowNumberIfValid(rowIndicatorRowNumber, invalidRowCounts, codeword) {
        if (codeword == null) {
          return invalidRowCounts;
        }
        if (!codeword.hasValidRowNumber()) {
          if (codeword.isValidRowNumber(rowIndicatorRowNumber)) {
            codeword.setRowNumber(rowIndicatorRowNumber);
            invalidRowCounts = 0;
          } else {
            ++invalidRowCounts;
          }
        }
        return invalidRowCounts;
      }
      adjustRowNumbers(barcodeColumn, codewordsRow, codewords) {
        if (!this.detectionResultColumns[barcodeColumn - 1]) {
          return;
        }
        let codeword = codewords[codewordsRow];
        let previousColumnCodewords = this.detectionResultColumns[barcodeColumn - 1].getCodewords();
        let nextColumnCodewords = previousColumnCodewords;
        if (this.detectionResultColumns[barcodeColumn + 1] != null) {
          nextColumnCodewords = this.detectionResultColumns[barcodeColumn + 1].getCodewords();
        }
        let otherCodewords = new Array(14);
        otherCodewords[2] = previousColumnCodewords[codewordsRow];
        otherCodewords[3] = nextColumnCodewords[codewordsRow];
        if (codewordsRow > 0) {
          otherCodewords[0] = codewords[codewordsRow - 1];
          otherCodewords[4] = previousColumnCodewords[codewordsRow - 1];
          otherCodewords[5] = nextColumnCodewords[codewordsRow - 1];
        }
        if (codewordsRow > 1) {
          otherCodewords[8] = codewords[codewordsRow - 2];
          otherCodewords[10] = previousColumnCodewords[codewordsRow - 2];
          otherCodewords[11] = nextColumnCodewords[codewordsRow - 2];
        }
        if (codewordsRow < codewords.length - 1) {
          otherCodewords[1] = codewords[codewordsRow + 1];
          otherCodewords[6] = previousColumnCodewords[codewordsRow + 1];
          otherCodewords[7] = nextColumnCodewords[codewordsRow + 1];
        }
        if (codewordsRow < codewords.length - 2) {
          otherCodewords[9] = codewords[codewordsRow + 2];
          otherCodewords[12] = previousColumnCodewords[codewordsRow + 2];
          otherCodewords[13] = nextColumnCodewords[codewordsRow + 2];
        }
        for (let otherCodeword of otherCodewords) {
          if (DetectionResult.adjustRowNumber(codeword, otherCodeword)) {
            return;
          }
        }
      }
      static adjustRowNumber(codeword, otherCodeword) {
        if (otherCodeword == null) {
          return false;
        }
        if (otherCodeword.hasValidRowNumber() && otherCodeword.getBucket() === codeword.getBucket()) {
          codeword.setRowNumber(otherCodeword.getRowNumber());
          return true;
        }
        return false;
      }
      getBarcodeColumnCount() {
        return this.barcodeColumnCount;
      }
      getBarcodeRowCount() {
        return this.barcodeMetadata.getRowCount();
      }
      getBarcodeECLevel() {
        return this.barcodeMetadata.getErrorCorrectionLevel();
      }
      setBoundingBox(boundingBox) {
        this.boundingBox = boundingBox;
      }
      getBoundingBox() {
        return this.boundingBox;
      }
      setDetectionResultColumn(barcodeColumn, detectionResultColumn) {
        this.detectionResultColumns[barcodeColumn] = detectionResultColumn;
      }
      getDetectionResultColumn(barcodeColumn) {
        return this.detectionResultColumns[barcodeColumn];
      }
      toString() {
        let rowIndicatorColumn = this.detectionResultColumns[0];
        if (rowIndicatorColumn == null) {
          rowIndicatorColumn = this.detectionResultColumns[this.barcodeColumnCount + 1];
        }
        let formatter = new Formatter();
        for (let codewordsRow = 0; codewordsRow < rowIndicatorColumn.getCodewords().length; codewordsRow++) {
          formatter.format("CW %3d:", codewordsRow);
          for (let barcodeColumn = 0; barcodeColumn < this.barcodeColumnCount + 2; barcodeColumn++) {
            if (this.detectionResultColumns[barcodeColumn] == null) {
              formatter.format("    |   ");
              continue;
            }
            let codeword = this.detectionResultColumns[barcodeColumn].getCodewords()[codewordsRow];
            if (codeword == null) {
              formatter.format("    |   ");
              continue;
            }
            formatter.format(" %3d|%3d", codeword.getRowNumber(), codeword.getValue());
          }
          formatter.format("%n");
        }
        return formatter.toString();
      }
    }
    class Codeword {
      constructor(startX, endX, bucket, value) {
        this.rowNumber = Codeword.BARCODE_ROW_UNKNOWN;
        this.startX = Math.trunc(startX);
        this.endX = Math.trunc(endX);
        this.bucket = Math.trunc(bucket);
        this.value = Math.trunc(value);
      }
      hasValidRowNumber() {
        return this.isValidRowNumber(this.rowNumber);
      }
      isValidRowNumber(rowNumber) {
        return rowNumber !== Codeword.BARCODE_ROW_UNKNOWN && this.bucket === rowNumber % 3 * 3;
      }
      setRowNumberAsRowIndicatorColumn() {
        this.rowNumber = Math.trunc(Math.trunc(this.value / 30) * 3 + Math.trunc(this.bucket / 3));
      }
      getWidth() {
        return this.endX - this.startX;
      }
      getStartX() {
        return this.startX;
      }
      getEndX() {
        return this.endX;
      }
      getBucket() {
        return this.bucket;
      }
      getValue() {
        return this.value;
      }
      getRowNumber() {
        return this.rowNumber;
      }
      setRowNumber(rowNumber) {
        this.rowNumber = rowNumber;
      }
      toString() {
        return this.rowNumber + "|" + this.value;
      }
    }
    Codeword.BARCODE_ROW_UNKNOWN = -1;
    class PDF417CodewordDecoder {
      static initialize() {
        for (let i = 0; i < PDF417Common.SYMBOL_TABLE.length; i++) {
          let currentSymbol = PDF417Common.SYMBOL_TABLE[i];
          let currentBit = currentSymbol & 1;
          for (let j = 0; j < PDF417Common.BARS_IN_MODULE; j++) {
            let size = 0;
            while ((currentSymbol & 1) === currentBit) {
              size += 1;
              currentSymbol >>= 1;
            }
            currentBit = currentSymbol & 1;
            if (!PDF417CodewordDecoder.RATIOS_TABLE[i]) {
              PDF417CodewordDecoder.RATIOS_TABLE[i] = new Array(PDF417Common.BARS_IN_MODULE);
            }
            PDF417CodewordDecoder.RATIOS_TABLE[i][PDF417Common.BARS_IN_MODULE - j - 1] = Math.fround(size / PDF417Common.MODULES_IN_CODEWORD);
          }
        }
        this.bSymbolTableReady = true;
      }
      static getDecodedValue(moduleBitCount) {
        let decodedValue = PDF417CodewordDecoder.getDecodedCodewordValue(PDF417CodewordDecoder.sampleBitCounts(moduleBitCount));
        if (decodedValue !== -1) {
          return decodedValue;
        }
        return PDF417CodewordDecoder.getClosestDecodedValue(moduleBitCount);
      }
      static sampleBitCounts(moduleBitCount) {
        let bitCountSum = MathUtils.sum(moduleBitCount);
        let result = new Int32Array(PDF417Common.BARS_IN_MODULE);
        let bitCountIndex = 0;
        let sumPreviousBits = 0;
        for (let i = 0; i < PDF417Common.MODULES_IN_CODEWORD; i++) {
          let sampleIndex = bitCountSum / (2 * PDF417Common.MODULES_IN_CODEWORD) + i * bitCountSum / PDF417Common.MODULES_IN_CODEWORD;
          if (sumPreviousBits + moduleBitCount[bitCountIndex] <= sampleIndex) {
            sumPreviousBits += moduleBitCount[bitCountIndex];
            bitCountIndex++;
          }
          result[bitCountIndex]++;
        }
        return result;
      }
      static getDecodedCodewordValue(moduleBitCount) {
        let decodedValue = PDF417CodewordDecoder.getBitValue(moduleBitCount);
        return PDF417Common.getCodeword(decodedValue) === -1 ? -1 : decodedValue;
      }
      static getBitValue(moduleBitCount) {
        let result = 0;
        for (let i = 0; i < moduleBitCount.length; i++) {
          for (let bit = 0; bit < moduleBitCount[i]; bit++) {
            result = result << 1 | (i % 2 === 0 ? 1 : 0);
          }
        }
        return Math.trunc(result);
      }
      static getClosestDecodedValue(moduleBitCount) {
        let bitCountSum = MathUtils.sum(moduleBitCount);
        let bitCountRatios = new Array(PDF417Common.BARS_IN_MODULE);
        if (bitCountSum > 1) {
          for (let i = 0; i < bitCountRatios.length; i++) {
            bitCountRatios[i] = Math.fround(moduleBitCount[i] / bitCountSum);
          }
        }
        let bestMatchError = Float.MAX_VALUE;
        let bestMatch = -1;
        if (!this.bSymbolTableReady) {
          PDF417CodewordDecoder.initialize();
        }
        for (let j = 0; j < PDF417CodewordDecoder.RATIOS_TABLE.length; j++) {
          let error2 = 0;
          let ratioTableRow = PDF417CodewordDecoder.RATIOS_TABLE[j];
          for (let k = 0; k < PDF417Common.BARS_IN_MODULE; k++) {
            let diff = Math.fround(ratioTableRow[k] - bitCountRatios[k]);
            error2 += Math.fround(diff * diff);
            if (error2 >= bestMatchError) {
              break;
            }
          }
          if (error2 < bestMatchError) {
            bestMatchError = error2;
            bestMatch = PDF417Common.SYMBOL_TABLE[j];
          }
        }
        return bestMatch;
      }
    }
    PDF417CodewordDecoder.bSymbolTableReady = false;
    PDF417CodewordDecoder.RATIOS_TABLE = new Array(PDF417Common.SYMBOL_TABLE.length).map((x) => new Array(PDF417Common.BARS_IN_MODULE));
    class PDF417ResultMetadata {
      constructor() {
        this.segmentCount = -1;
        this.fileSize = -1;
        this.timestamp = -1;
        this.checksum = -1;
      }
      getSegmentIndex() {
        return this.segmentIndex;
      }
      setSegmentIndex(segmentIndex) {
        this.segmentIndex = segmentIndex;
      }
      getFileId() {
        return this.fileId;
      }
      setFileId(fileId) {
        this.fileId = fileId;
      }
      getOptionalData() {
        return this.optionalData;
      }
      setOptionalData(optionalData) {
        this.optionalData = optionalData;
      }
      isLastSegment() {
        return this.lastSegment;
      }
      setLastSegment(lastSegment) {
        this.lastSegment = lastSegment;
      }
      getSegmentCount() {
        return this.segmentCount;
      }
      setSegmentCount(segmentCount) {
        this.segmentCount = segmentCount;
      }
      getSender() {
        return this.sender || null;
      }
      setSender(sender) {
        this.sender = sender;
      }
      getAddressee() {
        return this.addressee || null;
      }
      setAddressee(addressee) {
        this.addressee = addressee;
      }
      getFileName() {
        return this.fileName;
      }
      setFileName(fileName) {
        this.fileName = fileName;
      }
      getFileSize() {
        return this.fileSize;
      }
      setFileSize(fileSize) {
        this.fileSize = fileSize;
      }
      getChecksum() {
        return this.checksum;
      }
      setChecksum(checksum) {
        this.checksum = checksum;
      }
      getTimestamp() {
        return this.timestamp;
      }
      setTimestamp(timestamp) {
        this.timestamp = timestamp;
      }
    }
    class Long {
      static parseLong(num, radix = void 0) {
        return parseInt(num, radix);
      }
    }
    class NullPointerException extends Exception {
    }
    NullPointerException.kind = "NullPointerException";
    class OutputStream {
      writeBytes(b) {
        this.writeBytesOffset(b, 0, b.length);
      }
      writeBytesOffset(b, off, len) {
        if (b == null) {
          throw new NullPointerException();
        } else if (off < 0 || off > b.length || len < 0 || off + len > b.length || off + len < 0) {
          throw new IndexOutOfBoundsException();
        } else if (len === 0) {
          return;
        }
        for (let i = 0; i < len; i++) {
          this.write(b[off + i]);
        }
      }
      flush() {
      }
      close() {
      }
    }
    class OutOfMemoryError extends Exception {
    }
    class ByteArrayOutputStream extends OutputStream {
      constructor(size = 32) {
        super();
        this.count = 0;
        if (size < 0) {
          throw new IllegalArgumentException("Negative initial size: " + size);
        }
        this.buf = new Uint8Array(size);
      }
      ensureCapacity(minCapacity) {
        if (minCapacity - this.buf.length > 0)
          this.grow(minCapacity);
      }
      grow(minCapacity) {
        let oldCapacity = this.buf.length;
        let newCapacity = oldCapacity << 1;
        if (newCapacity - minCapacity < 0)
          newCapacity = minCapacity;
        if (newCapacity < 0) {
          if (minCapacity < 0)
            throw new OutOfMemoryError();
          newCapacity = Integer.MAX_VALUE;
        }
        this.buf = Arrays.copyOfUint8Array(this.buf, newCapacity);
      }
      write(b) {
        this.ensureCapacity(this.count + 1);
        this.buf[this.count] = b;
        this.count += 1;
      }
      writeBytesOffset(b, off, len) {
        if (off < 0 || off > b.length || len < 0 || off + len - b.length > 0) {
          throw new IndexOutOfBoundsException();
        }
        this.ensureCapacity(this.count + len);
        System.arraycopy(b, off, this.buf, this.count, len);
        this.count += len;
      }
      writeTo(out) {
        out.writeBytesOffset(this.buf, 0, this.count);
      }
      reset() {
        this.count = 0;
      }
      toByteArray() {
        return Arrays.copyOfUint8Array(this.buf, this.count);
      }
      size() {
        return this.count;
      }
      toString(param) {
        if (!param) {
          return this.toString_void();
        }
        if (typeof param === "string") {
          return this.toString_string(param);
        }
        return this.toString_number(param);
      }
      toString_void() {
        return new String(this.buf).toString();
      }
      toString_string(charsetName) {
        return new String(this.buf).toString();
      }
      toString_number(hibyte) {
        return new String(this.buf).toString();
      }
      close() {
      }
    }
    var Mode$2;
    (function(Mode2) {
      Mode2[Mode2["ALPHA"] = 0] = "ALPHA";
      Mode2[Mode2["LOWER"] = 1] = "LOWER";
      Mode2[Mode2["MIXED"] = 2] = "MIXED";
      Mode2[Mode2["PUNCT"] = 3] = "PUNCT";
      Mode2[Mode2["ALPHA_SHIFT"] = 4] = "ALPHA_SHIFT";
      Mode2[Mode2["PUNCT_SHIFT"] = 5] = "PUNCT_SHIFT";
    })(Mode$2 || (Mode$2 = {}));
    function getBigIntConstructor() {
      if (typeof window !== "undefined") {
        return window["BigInt"] || null;
      }
      if (typeof commonjsGlobal !== "undefined") {
        return commonjsGlobal["BigInt"] || null;
      }
      if (typeof self !== "undefined") {
        return self["BigInt"] || null;
      }
      throw new Error("Can't search globals for BigInt!");
    }
    let BigInteger;
    function createBigInt(num) {
      if (typeof BigInteger === "undefined") {
        BigInteger = getBigIntConstructor();
      }
      if (BigInteger === null) {
        throw new Error("BigInt is not supported!");
      }
      return BigInteger(num);
    }
    function getEXP900() {
      let EXP900 = [];
      EXP900[0] = createBigInt(1);
      let nineHundred = createBigInt(900);
      EXP900[1] = nineHundred;
      for (let i = 2; i < 16; i++) {
        EXP900[i] = EXP900[i - 1] * nineHundred;
      }
      return EXP900;
    }
    class DecodedBitStreamParser$2 {
      static decode(codewords, ecLevel) {
        let result = new StringBuilder("");
        let encoding = CharacterSetECI.ISO8859_1;
        result.enableDecoding(encoding);
        let codeIndex = 1;
        let code = codewords[codeIndex++];
        let resultMetadata = new PDF417ResultMetadata();
        while (codeIndex < codewords[0]) {
          switch (code) {
            case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
              codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex, result);
              break;
            case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
            case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
              codeIndex = DecodedBitStreamParser$2.byteCompaction(code, codewords, encoding, codeIndex, result);
              break;
            case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
              result.append(codewords[codeIndex++]);
              break;
            case DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH:
              codeIndex = DecodedBitStreamParser$2.numericCompaction(codewords, codeIndex, result);
              break;
            case DecodedBitStreamParser$2.ECI_CHARSET:
              CharacterSetECI.getCharacterSetECIByValue(codewords[codeIndex++]);
              break;
            case DecodedBitStreamParser$2.ECI_GENERAL_PURPOSE:
              codeIndex += 2;
              break;
            case DecodedBitStreamParser$2.ECI_USER_DEFINED:
              codeIndex++;
              break;
            case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:
              codeIndex = DecodedBitStreamParser$2.decodeMacroBlock(codewords, codeIndex, resultMetadata);
              break;
            case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
            case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
              throw new FormatException();
            default:
              codeIndex--;
              codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex, result);
              break;
          }
          if (codeIndex < codewords.length) {
            code = codewords[codeIndex++];
          } else {
            throw FormatException.getFormatInstance();
          }
        }
        if (result.length() === 0) {
          throw FormatException.getFormatInstance();
        }
        let decoderResult = new DecoderResult(null, result.toString(), null, ecLevel);
        decoderResult.setOther(resultMetadata);
        return decoderResult;
      }
      static decodeMacroBlock(codewords, codeIndex, resultMetadata) {
        if (codeIndex + DecodedBitStreamParser$2.NUMBER_OF_SEQUENCE_CODEWORDS > codewords[0]) {
          throw FormatException.getFormatInstance();
        }
        let segmentIndexArray = new Int32Array(DecodedBitStreamParser$2.NUMBER_OF_SEQUENCE_CODEWORDS);
        for (let i = 0; i < DecodedBitStreamParser$2.NUMBER_OF_SEQUENCE_CODEWORDS; i++, codeIndex++) {
          segmentIndexArray[i] = codewords[codeIndex];
        }
        resultMetadata.setSegmentIndex(Integer.parseInt(DecodedBitStreamParser$2.decodeBase900toBase10(segmentIndexArray, DecodedBitStreamParser$2.NUMBER_OF_SEQUENCE_CODEWORDS)));
        let fileId = new StringBuilder();
        codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex, fileId);
        resultMetadata.setFileId(fileId.toString());
        let optionalFieldsStart = -1;
        if (codewords[codeIndex] === DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD) {
          optionalFieldsStart = codeIndex + 1;
        }
        while (codeIndex < codewords[0]) {
          switch (codewords[codeIndex]) {
            case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
              codeIndex++;
              switch (codewords[codeIndex]) {
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:
                  let fileName = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex + 1, fileName);
                  resultMetadata.setFileName(fileName.toString());
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_SENDER:
                  let sender = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex + 1, sender);
                  resultMetadata.setSender(sender.toString());
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:
                  let addressee = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.textCompaction(codewords, codeIndex + 1, addressee);
                  resultMetadata.setAddressee(addressee.toString());
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:
                  let segmentCount = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.numericCompaction(codewords, codeIndex + 1, segmentCount);
                  resultMetadata.setSegmentCount(Integer.parseInt(segmentCount.toString()));
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:
                  let timestamp = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.numericCompaction(codewords, codeIndex + 1, timestamp);
                  resultMetadata.setTimestamp(Long.parseLong(timestamp.toString()));
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:
                  let checksum = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.numericCompaction(codewords, codeIndex + 1, checksum);
                  resultMetadata.setChecksum(Integer.parseInt(checksum.toString()));
                  break;
                case DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:
                  let fileSize = new StringBuilder();
                  codeIndex = DecodedBitStreamParser$2.numericCompaction(codewords, codeIndex + 1, fileSize);
                  resultMetadata.setFileSize(Long.parseLong(fileSize.toString()));
                  break;
                default:
                  throw FormatException.getFormatInstance();
              }
              break;
            case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
              codeIndex++;
              resultMetadata.setLastSegment(true);
              break;
            default:
              throw FormatException.getFormatInstance();
          }
        }
        if (optionalFieldsStart !== -1) {
          let optionalFieldsLength = codeIndex - optionalFieldsStart;
          if (resultMetadata.isLastSegment()) {
            optionalFieldsLength--;
          }
          resultMetadata.setOptionalData(Arrays.copyOfRange(codewords, optionalFieldsStart, optionalFieldsStart + optionalFieldsLength));
        }
        return codeIndex;
      }
      static textCompaction(codewords, codeIndex, result) {
        let textCompactionData = new Int32Array((codewords[0] - codeIndex) * 2);
        let byteCompactionData = new Int32Array((codewords[0] - codeIndex) * 2);
        let index = 0;
        let end = false;
        while (codeIndex < codewords[0] && !end) {
          let code = codewords[codeIndex++];
          if (code < DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH) {
            textCompactionData[index] = code / 30;
            textCompactionData[index + 1] = code % 30;
            index += 2;
          } else {
            switch (code) {
              case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                textCompactionData[index++] = DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH;
                break;
              case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
              case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
              case DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH:
              case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:
              case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
              case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
                codeIndex--;
                end = true;
                break;
              case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                textCompactionData[index] = DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE;
                code = codewords[codeIndex++];
                byteCompactionData[index] = code;
                index++;
                break;
            }
          }
        }
        DecodedBitStreamParser$2.decodeTextCompaction(textCompactionData, byteCompactionData, index, result);
        return codeIndex;
      }
      static decodeTextCompaction(textCompactionData, byteCompactionData, length, result) {
        let subMode = Mode$2.ALPHA;
        let priorToShiftMode = Mode$2.ALPHA;
        let i = 0;
        while (i < length) {
          let subModeCh = textCompactionData[i];
          let ch = "";
          switch (subMode) {
            case Mode$2.ALPHA:
              if (subModeCh < 26) {
                ch = String.fromCharCode(65 + subModeCh);
              } else {
                switch (subModeCh) {
                  case 26:
                    ch = " ";
                    break;
                  case DecodedBitStreamParser$2.LL:
                    subMode = Mode$2.LOWER;
                    break;
                  case DecodedBitStreamParser$2.ML:
                    subMode = Mode$2.MIXED;
                    break;
                  case DecodedBitStreamParser$2.PS:
                    priorToShiftMode = subMode;
                    subMode = Mode$2.PUNCT_SHIFT;
                    break;
                  case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                    result.append(byteCompactionData[i]);
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
            case Mode$2.LOWER:
              if (subModeCh < 26) {
                ch = String.fromCharCode(97 + subModeCh);
              } else {
                switch (subModeCh) {
                  case 26:
                    ch = " ";
                    break;
                  case DecodedBitStreamParser$2.AS:
                    priorToShiftMode = subMode;
                    subMode = Mode$2.ALPHA_SHIFT;
                    break;
                  case DecodedBitStreamParser$2.ML:
                    subMode = Mode$2.MIXED;
                    break;
                  case DecodedBitStreamParser$2.PS:
                    priorToShiftMode = subMode;
                    subMode = Mode$2.PUNCT_SHIFT;
                    break;
                  case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                    result.append(byteCompactionData[i]);
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
            case Mode$2.MIXED:
              if (subModeCh < DecodedBitStreamParser$2.PL) {
                ch = DecodedBitStreamParser$2.MIXED_CHARS[subModeCh];
              } else {
                switch (subModeCh) {
                  case DecodedBitStreamParser$2.PL:
                    subMode = Mode$2.PUNCT;
                    break;
                  case 26:
                    ch = " ";
                    break;
                  case DecodedBitStreamParser$2.LL:
                    subMode = Mode$2.LOWER;
                    break;
                  case DecodedBitStreamParser$2.AL:
                    subMode = Mode$2.ALPHA;
                    break;
                  case DecodedBitStreamParser$2.PS:
                    priorToShiftMode = subMode;
                    subMode = Mode$2.PUNCT_SHIFT;
                    break;
                  case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                    result.append(byteCompactionData[i]);
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
            case Mode$2.PUNCT:
              if (subModeCh < DecodedBitStreamParser$2.PAL) {
                ch = DecodedBitStreamParser$2.PUNCT_CHARS[subModeCh];
              } else {
                switch (subModeCh) {
                  case DecodedBitStreamParser$2.PAL:
                    subMode = Mode$2.ALPHA;
                    break;
                  case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                    result.append(byteCompactionData[i]);
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
            case Mode$2.ALPHA_SHIFT:
              subMode = priorToShiftMode;
              if (subModeCh < 26) {
                ch = String.fromCharCode(65 + subModeCh);
              } else {
                switch (subModeCh) {
                  case 26:
                    ch = " ";
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
            case Mode$2.PUNCT_SHIFT:
              subMode = priorToShiftMode;
              if (subModeCh < DecodedBitStreamParser$2.PAL) {
                ch = DecodedBitStreamParser$2.PUNCT_CHARS[subModeCh];
              } else {
                switch (subModeCh) {
                  case DecodedBitStreamParser$2.PAL:
                    subMode = Mode$2.ALPHA;
                    break;
                  case DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:
                    result.append(byteCompactionData[i]);
                    break;
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                    subMode = Mode$2.ALPHA;
                    break;
                }
              }
              break;
          }
          if (ch !== "") {
            result.append(ch);
          }
          i++;
        }
      }
      static byteCompaction(mode, codewords, encoding, codeIndex, result) {
        let decodedBytes = new ByteArrayOutputStream();
        let count = 0;
        let value = 0;
        let end = false;
        switch (mode) {
          case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
            let byteCompactedCodewords = new Int32Array(6);
            let nextCode = codewords[codeIndex++];
            while (codeIndex < codewords[0] && !end) {
              byteCompactedCodewords[count++] = nextCode;
              value = 900 * value + nextCode;
              nextCode = codewords[codeIndex++];
              switch (nextCode) {
                case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
                case DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH:
                case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
                case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:
                case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
                case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
                  codeIndex--;
                  end = true;
                  break;
                default:
                  if (count % 5 === 0 && count > 0) {
                    for (let j = 0; j < 6; ++j) {
                      decodedBytes.write(Number(createBigInt(value) >> createBigInt(8 * (5 - j))));
                    }
                    value = 0;
                    count = 0;
                  }
                  break;
              }
            }
            if (codeIndex === codewords[0] && nextCode < DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH) {
              byteCompactedCodewords[count++] = nextCode;
            }
            for (let i = 0; i < count; i++) {
              decodedBytes.write(byteCompactedCodewords[i]);
            }
            break;
          case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
            while (codeIndex < codewords[0] && !end) {
              let code = codewords[codeIndex++];
              if (code < DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH) {
                count++;
                value = 900 * value + code;
              } else {
                switch (code) {
                  case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
                  case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
                  case DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH:
                  case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
                  case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:
                  case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
                  case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
                    codeIndex--;
                    end = true;
                    break;
                }
              }
              if (count % 5 === 0 && count > 0) {
                for (let j = 0; j < 6; ++j) {
                  decodedBytes.write(Number(createBigInt(value) >> createBigInt(8 * (5 - j))));
                }
                value = 0;
                count = 0;
              }
            }
            break;
        }
        result.append(StringEncoding.decode(decodedBytes.toByteArray(), encoding));
        return codeIndex;
      }
      static numericCompaction(codewords, codeIndex, result) {
        let count = 0;
        let end = false;
        let numericCodewords = new Int32Array(DecodedBitStreamParser$2.MAX_NUMERIC_CODEWORDS);
        while (codeIndex < codewords[0] && !end) {
          let code = codewords[codeIndex++];
          if (codeIndex === codewords[0]) {
            end = true;
          }
          if (code < DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH) {
            numericCodewords[count] = code;
            count++;
          } else {
            switch (code) {
              case DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH:
              case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH:
              case DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6:
              case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK:
              case DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:
              case DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR:
                codeIndex--;
                end = true;
                break;
            }
          }
          if ((count % DecodedBitStreamParser$2.MAX_NUMERIC_CODEWORDS === 0 || code === DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH || end) && count > 0) {
            result.append(DecodedBitStreamParser$2.decodeBase900toBase10(numericCodewords, count));
            count = 0;
          }
        }
        return codeIndex;
      }
      static decodeBase900toBase10(codewords, count) {
        let result = createBigInt(0);
        for (let i = 0; i < count; i++) {
          result += DecodedBitStreamParser$2.EXP900[count - i - 1] * createBigInt(codewords[i]);
        }
        let resultString = result.toString();
        if (resultString.charAt(0) !== "1") {
          throw new FormatException();
        }
        return resultString.substring(1);
      }
    }
    DecodedBitStreamParser$2.TEXT_COMPACTION_MODE_LATCH = 900;
    DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH = 901;
    DecodedBitStreamParser$2.NUMERIC_COMPACTION_MODE_LATCH = 902;
    DecodedBitStreamParser$2.BYTE_COMPACTION_MODE_LATCH_6 = 924;
    DecodedBitStreamParser$2.ECI_USER_DEFINED = 925;
    DecodedBitStreamParser$2.ECI_GENERAL_PURPOSE = 926;
    DecodedBitStreamParser$2.ECI_CHARSET = 927;
    DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_CONTROL_BLOCK = 928;
    DecodedBitStreamParser$2.BEGIN_MACRO_PDF417_OPTIONAL_FIELD = 923;
    DecodedBitStreamParser$2.MACRO_PDF417_TERMINATOR = 922;
    DecodedBitStreamParser$2.MODE_SHIFT_TO_BYTE_COMPACTION_MODE = 913;
    DecodedBitStreamParser$2.MAX_NUMERIC_CODEWORDS = 15;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME = 0;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT = 1;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP = 2;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_SENDER = 3;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE = 4;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE = 5;
    DecodedBitStreamParser$2.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM = 6;
    DecodedBitStreamParser$2.PL = 25;
    DecodedBitStreamParser$2.LL = 27;
    DecodedBitStreamParser$2.AS = 27;
    DecodedBitStreamParser$2.ML = 28;
    DecodedBitStreamParser$2.AL = 28;
    DecodedBitStreamParser$2.PS = 29;
    DecodedBitStreamParser$2.PAL = 29;
    DecodedBitStreamParser$2.PUNCT_CHARS = ";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'";
    DecodedBitStreamParser$2.MIXED_CHARS = "0123456789&\r	,:#-.$/+%*=^";
    DecodedBitStreamParser$2.EXP900 = getBigIntConstructor() ? getEXP900() : [];
    DecodedBitStreamParser$2.NUMBER_OF_SEQUENCE_CODEWORDS = 2;
    class PDF417ScanningDecoder {
      constructor() {
      }
      static decode(image, imageTopLeft, imageBottomLeft, imageTopRight, imageBottomRight, minCodewordWidth, maxCodewordWidth) {
        let boundingBox = new BoundingBox(image, imageTopLeft, imageBottomLeft, imageTopRight, imageBottomRight);
        let leftRowIndicatorColumn = null;
        let rightRowIndicatorColumn = null;
        let detectionResult;
        for (let firstPass = true; ; firstPass = false) {
          if (imageTopLeft != null) {
            leftRowIndicatorColumn = PDF417ScanningDecoder.getRowIndicatorColumn(image, boundingBox, imageTopLeft, true, minCodewordWidth, maxCodewordWidth);
          }
          if (imageTopRight != null) {
            rightRowIndicatorColumn = PDF417ScanningDecoder.getRowIndicatorColumn(image, boundingBox, imageTopRight, false, minCodewordWidth, maxCodewordWidth);
          }
          detectionResult = PDF417ScanningDecoder.merge(leftRowIndicatorColumn, rightRowIndicatorColumn);
          if (detectionResult == null) {
            throw NotFoundException.getNotFoundInstance();
          }
          let resultBox = detectionResult.getBoundingBox();
          if (firstPass && resultBox != null && (resultBox.getMinY() < boundingBox.getMinY() || resultBox.getMaxY() > boundingBox.getMaxY())) {
            boundingBox = resultBox;
          } else {
            break;
          }
        }
        detectionResult.setBoundingBox(boundingBox);
        let maxBarcodeColumn = detectionResult.getBarcodeColumnCount() + 1;
        detectionResult.setDetectionResultColumn(0, leftRowIndicatorColumn);
        detectionResult.setDetectionResultColumn(maxBarcodeColumn, rightRowIndicatorColumn);
        let leftToRight = leftRowIndicatorColumn != null;
        for (let barcodeColumnCount = 1; barcodeColumnCount <= maxBarcodeColumn; barcodeColumnCount++) {
          let barcodeColumn = leftToRight ? barcodeColumnCount : maxBarcodeColumn - barcodeColumnCount;
          if (detectionResult.getDetectionResultColumn(barcodeColumn) !== void 0) {
            continue;
          }
          let detectionResultColumn;
          if (barcodeColumn === 0 || barcodeColumn === maxBarcodeColumn) {
            detectionResultColumn = new DetectionResultRowIndicatorColumn(boundingBox, barcodeColumn === 0);
          } else {
            detectionResultColumn = new DetectionResultColumn(boundingBox);
          }
          detectionResult.setDetectionResultColumn(barcodeColumn, detectionResultColumn);
          let startColumn = -1;
          let previousStartColumn = startColumn;
          for (let imageRow = boundingBox.getMinY(); imageRow <= boundingBox.getMaxY(); imageRow++) {
            startColumn = PDF417ScanningDecoder.getStartColumn(detectionResult, barcodeColumn, imageRow, leftToRight);
            if (startColumn < 0 || startColumn > boundingBox.getMaxX()) {
              if (previousStartColumn === -1) {
                continue;
              }
              startColumn = previousStartColumn;
            }
            let codeword = PDF417ScanningDecoder.detectCodeword(image, boundingBox.getMinX(), boundingBox.getMaxX(), leftToRight, startColumn, imageRow, minCodewordWidth, maxCodewordWidth);
            if (codeword != null) {
              detectionResultColumn.setCodeword(imageRow, codeword);
              previousStartColumn = startColumn;
              minCodewordWidth = Math.min(minCodewordWidth, codeword.getWidth());
              maxCodewordWidth = Math.max(maxCodewordWidth, codeword.getWidth());
            }
          }
        }
        return PDF417ScanningDecoder.createDecoderResult(detectionResult);
      }
      static merge(leftRowIndicatorColumn, rightRowIndicatorColumn) {
        if (leftRowIndicatorColumn == null && rightRowIndicatorColumn == null) {
          return null;
        }
        let barcodeMetadata = PDF417ScanningDecoder.getBarcodeMetadata(leftRowIndicatorColumn, rightRowIndicatorColumn);
        if (barcodeMetadata == null) {
          return null;
        }
        let boundingBox = BoundingBox.merge(PDF417ScanningDecoder.adjustBoundingBox(leftRowIndicatorColumn), PDF417ScanningDecoder.adjustBoundingBox(rightRowIndicatorColumn));
        return new DetectionResult(barcodeMetadata, boundingBox);
      }
      static adjustBoundingBox(rowIndicatorColumn) {
        if (rowIndicatorColumn == null) {
          return null;
        }
        let rowHeights = rowIndicatorColumn.getRowHeights();
        if (rowHeights == null) {
          return null;
        }
        let maxRowHeight = PDF417ScanningDecoder.getMax(rowHeights);
        let missingStartRows = 0;
        for (let rowHeight of rowHeights) {
          missingStartRows += maxRowHeight - rowHeight;
          if (rowHeight > 0) {
            break;
          }
        }
        let codewords = rowIndicatorColumn.getCodewords();
        for (let row = 0; missingStartRows > 0 && codewords[row] == null; row++) {
          missingStartRows--;
        }
        let missingEndRows = 0;
        for (let row = rowHeights.length - 1; row >= 0; row--) {
          missingEndRows += maxRowHeight - rowHeights[row];
          if (rowHeights[row] > 0) {
            break;
          }
        }
        for (let row = codewords.length - 1; missingEndRows > 0 && codewords[row] == null; row--) {
          missingEndRows--;
        }
        return rowIndicatorColumn.getBoundingBox().addMissingRows(missingStartRows, missingEndRows, rowIndicatorColumn.isLeft());
      }
      static getMax(values) {
        let maxValue = -1;
        for (let value of values) {
          maxValue = Math.max(maxValue, value);
        }
        return maxValue;
      }
      static getBarcodeMetadata(leftRowIndicatorColumn, rightRowIndicatorColumn) {
        let leftBarcodeMetadata;
        if (leftRowIndicatorColumn == null || (leftBarcodeMetadata = leftRowIndicatorColumn.getBarcodeMetadata()) == null) {
          return rightRowIndicatorColumn == null ? null : rightRowIndicatorColumn.getBarcodeMetadata();
        }
        let rightBarcodeMetadata;
        if (rightRowIndicatorColumn == null || (rightBarcodeMetadata = rightRowIndicatorColumn.getBarcodeMetadata()) == null) {
          return leftBarcodeMetadata;
        }
        if (leftBarcodeMetadata.getColumnCount() !== rightBarcodeMetadata.getColumnCount() && leftBarcodeMetadata.getErrorCorrectionLevel() !== rightBarcodeMetadata.getErrorCorrectionLevel() && leftBarcodeMetadata.getRowCount() !== rightBarcodeMetadata.getRowCount()) {
          return null;
        }
        return leftBarcodeMetadata;
      }
      static getRowIndicatorColumn(image, boundingBox, startPoint, leftToRight, minCodewordWidth, maxCodewordWidth) {
        let rowIndicatorColumn = new DetectionResultRowIndicatorColumn(boundingBox, leftToRight);
        for (let i = 0; i < 2; i++) {
          let increment = i === 0 ? 1 : -1;
          let startColumn = Math.trunc(Math.trunc(startPoint.getX()));
          for (let imageRow = Math.trunc(Math.trunc(startPoint.getY())); imageRow <= boundingBox.getMaxY() && imageRow >= boundingBox.getMinY(); imageRow += increment) {
            let codeword = PDF417ScanningDecoder.detectCodeword(image, 0, image.getWidth(), leftToRight, startColumn, imageRow, minCodewordWidth, maxCodewordWidth);
            if (codeword != null) {
              rowIndicatorColumn.setCodeword(imageRow, codeword);
              if (leftToRight) {
                startColumn = codeword.getStartX();
              } else {
                startColumn = codeword.getEndX();
              }
            }
          }
        }
        return rowIndicatorColumn;
      }
      static adjustCodewordCount(detectionResult, barcodeMatrix) {
        let barcodeMatrix01 = barcodeMatrix[0][1];
        let numberOfCodewords = barcodeMatrix01.getValue();
        let calculatedNumberOfCodewords = detectionResult.getBarcodeColumnCount() * detectionResult.getBarcodeRowCount() - PDF417ScanningDecoder.getNumberOfECCodeWords(detectionResult.getBarcodeECLevel());
        if (numberOfCodewords.length === 0) {
          if (calculatedNumberOfCodewords < 1 || calculatedNumberOfCodewords > PDF417Common.MAX_CODEWORDS_IN_BARCODE) {
            throw NotFoundException.getNotFoundInstance();
          }
          barcodeMatrix01.setValue(calculatedNumberOfCodewords);
        } else if (numberOfCodewords[0] !== calculatedNumberOfCodewords) {
          barcodeMatrix01.setValue(calculatedNumberOfCodewords);
        }
      }
      static createDecoderResult(detectionResult) {
        let barcodeMatrix = PDF417ScanningDecoder.createBarcodeMatrix(detectionResult);
        PDF417ScanningDecoder.adjustCodewordCount(detectionResult, barcodeMatrix);
        let erasures = new Array();
        let codewords = new Int32Array(detectionResult.getBarcodeRowCount() * detectionResult.getBarcodeColumnCount());
        let ambiguousIndexValuesList = [];
        let ambiguousIndexesList = new Array();
        for (let row = 0; row < detectionResult.getBarcodeRowCount(); row++) {
          for (let column = 0; column < detectionResult.getBarcodeColumnCount(); column++) {
            let values = barcodeMatrix[row][column + 1].getValue();
            let codewordIndex = row * detectionResult.getBarcodeColumnCount() + column;
            if (values.length === 0) {
              erasures.push(codewordIndex);
            } else if (values.length === 1) {
              codewords[codewordIndex] = values[0];
            } else {
              ambiguousIndexesList.push(codewordIndex);
              ambiguousIndexValuesList.push(values);
            }
          }
        }
        let ambiguousIndexValues = new Array(ambiguousIndexValuesList.length);
        for (let i = 0; i < ambiguousIndexValues.length; i++) {
          ambiguousIndexValues[i] = ambiguousIndexValuesList[i];
        }
        return PDF417ScanningDecoder.createDecoderResultFromAmbiguousValues(detectionResult.getBarcodeECLevel(), codewords, PDF417Common.toIntArray(erasures), PDF417Common.toIntArray(ambiguousIndexesList), ambiguousIndexValues);
      }
      static createDecoderResultFromAmbiguousValues(ecLevel, codewords, erasureArray, ambiguousIndexes, ambiguousIndexValues) {
        let ambiguousIndexCount = new Int32Array(ambiguousIndexes.length);
        let tries = 100;
        while (tries-- > 0) {
          for (let i = 0; i < ambiguousIndexCount.length; i++) {
            codewords[ambiguousIndexes[i]] = ambiguousIndexValues[i][ambiguousIndexCount[i]];
          }
          try {
            return PDF417ScanningDecoder.decodeCodewords(codewords, ecLevel, erasureArray);
          } catch (err) {
            let ignored = err instanceof ChecksumException;
            if (!ignored) {
              throw err;
            }
          }
          if (ambiguousIndexCount.length === 0) {
            throw ChecksumException.getChecksumInstance();
          }
          for (let i = 0; i < ambiguousIndexCount.length; i++) {
            if (ambiguousIndexCount[i] < ambiguousIndexValues[i].length - 1) {
              ambiguousIndexCount[i]++;
              break;
            } else {
              ambiguousIndexCount[i] = 0;
              if (i === ambiguousIndexCount.length - 1) {
                throw ChecksumException.getChecksumInstance();
              }
            }
          }
        }
        throw ChecksumException.getChecksumInstance();
      }
      static createBarcodeMatrix(detectionResult) {
        let barcodeMatrix = Array.from({ length: detectionResult.getBarcodeRowCount() }, () => new Array(detectionResult.getBarcodeColumnCount() + 2));
        for (let row = 0; row < barcodeMatrix.length; row++) {
          for (let column2 = 0; column2 < barcodeMatrix[row].length; column2++) {
            barcodeMatrix[row][column2] = new BarcodeValue();
          }
        }
        let column = 0;
        for (let detectionResultColumn of detectionResult.getDetectionResultColumns()) {
          if (detectionResultColumn != null) {
            for (let codeword of detectionResultColumn.getCodewords()) {
              if (codeword != null) {
                let rowNumber = codeword.getRowNumber();
                if (rowNumber >= 0) {
                  if (rowNumber >= barcodeMatrix.length) {
                    continue;
                  }
                  barcodeMatrix[rowNumber][column].setValue(codeword.getValue());
                }
              }
            }
          }
          column++;
        }
        return barcodeMatrix;
      }
      static isValidBarcodeColumn(detectionResult, barcodeColumn) {
        return barcodeColumn >= 0 && barcodeColumn <= detectionResult.getBarcodeColumnCount() + 1;
      }
      static getStartColumn(detectionResult, barcodeColumn, imageRow, leftToRight) {
        let offset = leftToRight ? 1 : -1;
        let codeword = null;
        if (PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult, barcodeColumn - offset)) {
          codeword = detectionResult.getDetectionResultColumn(barcodeColumn - offset).getCodeword(imageRow);
        }
        if (codeword != null) {
          return leftToRight ? codeword.getEndX() : codeword.getStartX();
        }
        codeword = detectionResult.getDetectionResultColumn(barcodeColumn).getCodewordNearby(imageRow);
        if (codeword != null) {
          return leftToRight ? codeword.getStartX() : codeword.getEndX();
        }
        if (PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult, barcodeColumn - offset)) {
          codeword = detectionResult.getDetectionResultColumn(barcodeColumn - offset).getCodewordNearby(imageRow);
        }
        if (codeword != null) {
          return leftToRight ? codeword.getEndX() : codeword.getStartX();
        }
        let skippedColumns = 0;
        while (PDF417ScanningDecoder.isValidBarcodeColumn(detectionResult, barcodeColumn - offset)) {
          barcodeColumn -= offset;
          for (let previousRowCodeword of detectionResult.getDetectionResultColumn(barcodeColumn).getCodewords()) {
            if (previousRowCodeword != null) {
              return (leftToRight ? previousRowCodeword.getEndX() : previousRowCodeword.getStartX()) + offset * skippedColumns * (previousRowCodeword.getEndX() - previousRowCodeword.getStartX());
            }
          }
          skippedColumns++;
        }
        return leftToRight ? detectionResult.getBoundingBox().getMinX() : detectionResult.getBoundingBox().getMaxX();
      }
      static detectCodeword(image, minColumn, maxColumn, leftToRight, startColumn, imageRow, minCodewordWidth, maxCodewordWidth) {
        startColumn = PDF417ScanningDecoder.adjustCodewordStartColumn(image, minColumn, maxColumn, leftToRight, startColumn, imageRow);
        let moduleBitCount = PDF417ScanningDecoder.getModuleBitCount(image, minColumn, maxColumn, leftToRight, startColumn, imageRow);
        if (moduleBitCount == null) {
          return null;
        }
        let endColumn;
        let codewordBitCount = MathUtils.sum(moduleBitCount);
        if (leftToRight) {
          endColumn = startColumn + codewordBitCount;
        } else {
          for (let i = 0; i < moduleBitCount.length / 2; i++) {
            let tmpCount = moduleBitCount[i];
            moduleBitCount[i] = moduleBitCount[moduleBitCount.length - 1 - i];
            moduleBitCount[moduleBitCount.length - 1 - i] = tmpCount;
          }
          endColumn = startColumn;
          startColumn = endColumn - codewordBitCount;
        }
        if (!PDF417ScanningDecoder.checkCodewordSkew(codewordBitCount, minCodewordWidth, maxCodewordWidth)) {
          return null;
        }
        let decodedValue = PDF417CodewordDecoder.getDecodedValue(moduleBitCount);
        let codeword = PDF417Common.getCodeword(decodedValue);
        if (codeword === -1) {
          return null;
        }
        return new Codeword(startColumn, endColumn, PDF417ScanningDecoder.getCodewordBucketNumber(decodedValue), codeword);
      }
      static getModuleBitCount(image, minColumn, maxColumn, leftToRight, startColumn, imageRow) {
        let imageColumn = startColumn;
        let moduleBitCount = new Int32Array(8);
        let moduleNumber = 0;
        let increment = leftToRight ? 1 : -1;
        let previousPixelValue = leftToRight;
        while ((leftToRight ? imageColumn < maxColumn : imageColumn >= minColumn) && moduleNumber < moduleBitCount.length) {
          if (image.get(imageColumn, imageRow) === previousPixelValue) {
            moduleBitCount[moduleNumber]++;
            imageColumn += increment;
          } else {
            moduleNumber++;
            previousPixelValue = !previousPixelValue;
          }
        }
        if (moduleNumber === moduleBitCount.length || imageColumn === (leftToRight ? maxColumn : minColumn) && moduleNumber === moduleBitCount.length - 1) {
          return moduleBitCount;
        }
        return null;
      }
      static getNumberOfECCodeWords(barcodeECLevel) {
        return 2 << barcodeECLevel;
      }
      static adjustCodewordStartColumn(image, minColumn, maxColumn, leftToRight, codewordStartColumn, imageRow) {
        let correctedStartColumn = codewordStartColumn;
        let increment = leftToRight ? -1 : 1;
        for (let i = 0; i < 2; i++) {
          while ((leftToRight ? correctedStartColumn >= minColumn : correctedStartColumn < maxColumn) && leftToRight === image.get(correctedStartColumn, imageRow)) {
            if (Math.abs(codewordStartColumn - correctedStartColumn) > PDF417ScanningDecoder.CODEWORD_SKEW_SIZE) {
              return codewordStartColumn;
            }
            correctedStartColumn += increment;
          }
          increment = -increment;
          leftToRight = !leftToRight;
        }
        return correctedStartColumn;
      }
      static checkCodewordSkew(codewordSize, minCodewordWidth, maxCodewordWidth) {
        return minCodewordWidth - PDF417ScanningDecoder.CODEWORD_SKEW_SIZE <= codewordSize && codewordSize <= maxCodewordWidth + PDF417ScanningDecoder.CODEWORD_SKEW_SIZE;
      }
      static decodeCodewords(codewords, ecLevel, erasures) {
        if (codewords.length === 0) {
          throw FormatException.getFormatInstance();
        }
        let numECCodewords = 1 << ecLevel + 1;
        let correctedErrorsCount = PDF417ScanningDecoder.correctErrors(codewords, erasures, numECCodewords);
        PDF417ScanningDecoder.verifyCodewordCount(codewords, numECCodewords);
        let decoderResult = DecodedBitStreamParser$2.decode(codewords, "" + ecLevel);
        decoderResult.setErrorsCorrected(correctedErrorsCount);
        decoderResult.setErasures(erasures.length);
        return decoderResult;
      }
      static correctErrors(codewords, erasures, numECCodewords) {
        if (erasures != null && erasures.length > numECCodewords / 2 + PDF417ScanningDecoder.MAX_ERRORS || numECCodewords < 0 || numECCodewords > PDF417ScanningDecoder.MAX_EC_CODEWORDS) {
          throw ChecksumException.getChecksumInstance();
        }
        return PDF417ScanningDecoder.errorCorrection.decode(codewords, numECCodewords, erasures);
      }
      static verifyCodewordCount(codewords, numECCodewords) {
        if (codewords.length < 4) {
          throw FormatException.getFormatInstance();
        }
        let numberOfCodewords = codewords[0];
        if (numberOfCodewords > codewords.length) {
          throw FormatException.getFormatInstance();
        }
        if (numberOfCodewords === 0) {
          if (numECCodewords < codewords.length) {
            codewords[0] = codewords.length - numECCodewords;
          } else {
            throw FormatException.getFormatInstance();
          }
        }
      }
      static getBitCountForCodeword(codeword) {
        let result = new Int32Array(8);
        let previousValue = 0;
        let i = result.length - 1;
        while (true) {
          if ((codeword & 1) !== previousValue) {
            previousValue = codeword & 1;
            i--;
            if (i < 0) {
              break;
            }
          }
          result[i]++;
          codeword >>= 1;
        }
        return result;
      }
      static getCodewordBucketNumber(codeword) {
        if (codeword instanceof Int32Array) {
          return this.getCodewordBucketNumber_Int32Array(codeword);
        }
        return this.getCodewordBucketNumber_number(codeword);
      }
      static getCodewordBucketNumber_number(codeword) {
        return PDF417ScanningDecoder.getCodewordBucketNumber(PDF417ScanningDecoder.getBitCountForCodeword(codeword));
      }
      static getCodewordBucketNumber_Int32Array(moduleBitCount) {
        return (moduleBitCount[0] - moduleBitCount[2] + moduleBitCount[4] - moduleBitCount[6] + 9) % 9;
      }
      static toString(barcodeMatrix) {
        let formatter = new Formatter();
        for (let row = 0; row < barcodeMatrix.length; row++) {
          formatter.format("Row %2d: ", row);
          for (let column = 0; column < barcodeMatrix[row].length; column++) {
            let barcodeValue = barcodeMatrix[row][column];
            if (barcodeValue.getValue().length === 0) {
              formatter.format("        ", null);
            } else {
              formatter.format("%4d(%2d)", barcodeValue.getValue()[0], barcodeValue.getConfidence(barcodeValue.getValue()[0]));
            }
          }
          formatter.format("%n");
        }
        return formatter.toString();
      }
    }
    PDF417ScanningDecoder.CODEWORD_SKEW_SIZE = 2;
    PDF417ScanningDecoder.MAX_ERRORS = 3;
    PDF417ScanningDecoder.MAX_EC_CODEWORDS = 512;
    PDF417ScanningDecoder.errorCorrection = new ErrorCorrection();
    class PDF417Reader {
      decode(image, hints = null) {
        let result = PDF417Reader.decode(image, hints, false);
        if (result == null || result.length === 0 || result[0] == null) {
          throw NotFoundException.getNotFoundInstance();
        }
        return result[0];
      }
      decodeMultiple(image, hints = null) {
        try {
          return PDF417Reader.decode(image, hints, true);
        } catch (ignored) {
          if (ignored instanceof FormatException || ignored instanceof ChecksumException) {
            throw NotFoundException.getNotFoundInstance();
          }
          throw ignored;
        }
      }
      static decode(image, hints, multiple) {
        const results = new Array();
        const detectorResult = Detector$3.detectMultiple(image, hints, multiple);
        for (const points of detectorResult.getPoints()) {
          const decoderResult = PDF417ScanningDecoder.decode(detectorResult.getBits(), points[4], points[5], points[6], points[7], PDF417Reader.getMinCodewordWidth(points), PDF417Reader.getMaxCodewordWidth(points));
          const result = new Result(decoderResult.getText(), decoderResult.getRawBytes(), void 0, points, BarcodeFormat$1.PDF_417);
          result.putMetadata(ResultMetadataType$1.ERROR_CORRECTION_LEVEL, decoderResult.getECLevel());
          const pdf417ResultMetadata = decoderResult.getOther();
          if (pdf417ResultMetadata != null) {
            result.putMetadata(ResultMetadataType$1.PDF417_EXTRA_METADATA, pdf417ResultMetadata);
          }
          results.push(result);
        }
        return results.map((x) => x);
      }
      static getMaxWidth(p1, p2) {
        if (p1 == null || p2 == null) {
          return 0;
        }
        return Math.trunc(Math.abs(p1.getX() - p2.getX()));
      }
      static getMinWidth(p1, p2) {
        if (p1 == null || p2 == null) {
          return Integer.MAX_VALUE;
        }
        return Math.trunc(Math.abs(p1.getX() - p2.getX()));
      }
      static getMaxCodewordWidth(p) {
        return Math.floor(Math.max(Math.max(PDF417Reader.getMaxWidth(p[0], p[4]), PDF417Reader.getMaxWidth(p[6], p[2]) * PDF417Common.MODULES_IN_CODEWORD / PDF417Common.MODULES_IN_STOP_PATTERN), Math.max(PDF417Reader.getMaxWidth(p[1], p[5]), PDF417Reader.getMaxWidth(p[7], p[3]) * PDF417Common.MODULES_IN_CODEWORD / PDF417Common.MODULES_IN_STOP_PATTERN)));
      }
      static getMinCodewordWidth(p) {
        return Math.floor(Math.min(Math.min(PDF417Reader.getMinWidth(p[0], p[4]), PDF417Reader.getMinWidth(p[6], p[2]) * PDF417Common.MODULES_IN_CODEWORD / PDF417Common.MODULES_IN_STOP_PATTERN), Math.min(PDF417Reader.getMinWidth(p[1], p[5]), PDF417Reader.getMinWidth(p[7], p[3]) * PDF417Common.MODULES_IN_CODEWORD / PDF417Common.MODULES_IN_STOP_PATTERN)));
      }
      reset() {
      }
    }
    class ReaderException extends Exception {
    }
    ReaderException.kind = "ReaderException";
    class MultiFormatReader {
      constructor(verbose, hints) {
        this.verbose = verbose === true;
        if (hints) {
          this.setHints(hints);
        }
      }
      decode(image, hints) {
        if (hints) {
          this.setHints(hints);
        }
        return this.decodeInternal(image);
      }
      decodeWithState(image) {
        if (this.readers === null || this.readers === void 0) {
          this.setHints(null);
        }
        return this.decodeInternal(image);
      }
      setHints(hints) {
        this.hints = hints;
        const tryHarder = !isNullOrUndefined2(hints) && hints.get(DecodeHintType$1.TRY_HARDER) === true;
        const formats = isNullOrUndefined2(hints) ? null : hints.get(DecodeHintType$1.POSSIBLE_FORMATS);
        const readers = new Array();
        if (!isNullOrUndefined2(formats)) {
          const addOneDReader = formats.some((f) => {
            return f === BarcodeFormat$1.UPC_A || f === BarcodeFormat$1.UPC_E || f === BarcodeFormat$1.EAN_13 || f === BarcodeFormat$1.EAN_8 || f === BarcodeFormat$1.CODABAR || f === BarcodeFormat$1.CODE_39 || f === BarcodeFormat$1.CODE_93 || f === BarcodeFormat$1.CODE_128 || f === BarcodeFormat$1.ITF || f === BarcodeFormat$1.RSS_14 || f === BarcodeFormat$1.RSS_EXPANDED;
          });
          if (addOneDReader && !tryHarder) {
            readers.push(new MultiFormatOneDReader(hints, this.verbose));
          }
          if (formats.includes(BarcodeFormat$1.QR_CODE)) {
            readers.push(new QRCodeReader());
          }
          if (formats.includes(BarcodeFormat$1.DATA_MATRIX)) {
            readers.push(new DataMatrixReader());
          }
          if (formats.includes(BarcodeFormat$1.AZTEC)) {
            readers.push(new AztecReader());
          }
          if (formats.includes(BarcodeFormat$1.PDF_417)) {
            readers.push(new PDF417Reader());
          }
          if (addOneDReader && tryHarder) {
            readers.push(new MultiFormatOneDReader(hints, this.verbose));
          }
        }
        if (readers.length === 0) {
          if (!tryHarder) {
            readers.push(new MultiFormatOneDReader(hints, this.verbose));
          }
          readers.push(new QRCodeReader());
          readers.push(new DataMatrixReader());
          readers.push(new AztecReader());
          readers.push(new PDF417Reader());
          if (tryHarder) {
            readers.push(new MultiFormatOneDReader(hints, this.verbose));
          }
        }
        this.readers = readers;
      }
      reset() {
        if (this.readers !== null) {
          for (const reader of this.readers) {
            reader.reset();
          }
        }
      }
      decodeInternal(image) {
        if (this.readers === null) {
          throw new ReaderException("No readers where selected, nothing can be read.");
        }
        for (const reader of this.readers) {
          try {
            return reader.decode(image, this.hints);
          } catch (ex) {
            if (ex instanceof ReaderException) {
              continue;
            }
          }
        }
        throw new NotFoundException("No MultiFormat Readers were able to detect the code.");
      }
    }
    class BrowserMultiFormatReader extends BrowserCodeReader {
      constructor(hints = null, timeBetweenScansMillis = 500) {
        const reader = new MultiFormatReader();
        reader.setHints(hints);
        super(reader, timeBetweenScansMillis);
      }
      decodeBitmap(binaryBitmap) {
        return this.reader.decodeWithState(binaryBitmap);
      }
    }
    class BrowserPDF417Reader extends BrowserCodeReader {
      constructor(timeBetweenScansMillis = 500) {
        super(new PDF417Reader(), timeBetweenScansMillis);
      }
    }
    class BrowserQRCodeReader extends BrowserCodeReader {
      constructor(timeBetweenScansMillis = 500) {
        super(new QRCodeReader(), timeBetweenScansMillis);
      }
    }
    var EncodeHintType;
    (function(EncodeHintType2) {
      EncodeHintType2[EncodeHintType2["ERROR_CORRECTION"] = 0] = "ERROR_CORRECTION";
      EncodeHintType2[EncodeHintType2["CHARACTER_SET"] = 1] = "CHARACTER_SET";
      EncodeHintType2[EncodeHintType2["DATA_MATRIX_SHAPE"] = 2] = "DATA_MATRIX_SHAPE";
      EncodeHintType2[EncodeHintType2["MIN_SIZE"] = 3] = "MIN_SIZE";
      EncodeHintType2[EncodeHintType2["MAX_SIZE"] = 4] = "MAX_SIZE";
      EncodeHintType2[EncodeHintType2["MARGIN"] = 5] = "MARGIN";
      EncodeHintType2[EncodeHintType2["PDF417_COMPACT"] = 6] = "PDF417_COMPACT";
      EncodeHintType2[EncodeHintType2["PDF417_COMPACTION"] = 7] = "PDF417_COMPACTION";
      EncodeHintType2[EncodeHintType2["PDF417_DIMENSIONS"] = 8] = "PDF417_DIMENSIONS";
      EncodeHintType2[EncodeHintType2["AZTEC_LAYERS"] = 9] = "AZTEC_LAYERS";
      EncodeHintType2[EncodeHintType2["QR_VERSION"] = 10] = "QR_VERSION";
    })(EncodeHintType || (EncodeHintType = {}));
    var EncodeHintType$1 = EncodeHintType;
    class ReedSolomonEncoder {
      constructor(field) {
        this.field = field;
        this.cachedGenerators = [];
        this.cachedGenerators.push(new GenericGFPoly(field, Int32Array.from([1])));
      }
      buildGenerator(degree) {
        const cachedGenerators = this.cachedGenerators;
        if (degree >= cachedGenerators.length) {
          let lastGenerator = cachedGenerators[cachedGenerators.length - 1];
          const field = this.field;
          for (let d = cachedGenerators.length; d <= degree; d++) {
            const nextGenerator = lastGenerator.multiply(new GenericGFPoly(field, Int32Array.from([1, field.exp(d - 1 + field.getGeneratorBase())])));
            cachedGenerators.push(nextGenerator);
            lastGenerator = nextGenerator;
          }
        }
        return cachedGenerators[degree];
      }
      encode(toEncode, ecBytes) {
        if (ecBytes === 0) {
          throw new IllegalArgumentException("No error correction bytes");
        }
        const dataBytes = toEncode.length - ecBytes;
        if (dataBytes <= 0) {
          throw new IllegalArgumentException("No data bytes provided");
        }
        const generator = this.buildGenerator(ecBytes);
        const infoCoefficients = new Int32Array(dataBytes);
        System.arraycopy(toEncode, 0, infoCoefficients, 0, dataBytes);
        let info = new GenericGFPoly(this.field, infoCoefficients);
        info = info.multiplyByMonomial(ecBytes, 1);
        const remainder = info.divide(generator)[1];
        const coefficients = remainder.getCoefficients();
        const numZeroCoefficients = ecBytes - coefficients.length;
        for (let i = 0; i < numZeroCoefficients; i++) {
          toEncode[dataBytes + i] = 0;
        }
        System.arraycopy(coefficients, 0, toEncode, dataBytes + numZeroCoefficients, coefficients.length);
      }
    }
    class MaskUtil {
      constructor() {
      }
      static applyMaskPenaltyRule1(matrix) {
        return MaskUtil.applyMaskPenaltyRule1Internal(matrix, true) + MaskUtil.applyMaskPenaltyRule1Internal(matrix, false);
      }
      static applyMaskPenaltyRule2(matrix) {
        let penalty = 0;
        const array = matrix.getArray();
        const width = matrix.getWidth();
        const height = matrix.getHeight();
        for (let y = 0; y < height - 1; y++) {
          const arrayY = array[y];
          for (let x = 0; x < width - 1; x++) {
            const value = arrayY[x];
            if (value === arrayY[x + 1] && value === array[y + 1][x] && value === array[y + 1][x + 1]) {
              penalty++;
            }
          }
        }
        return MaskUtil.N2 * penalty;
      }
      static applyMaskPenaltyRule3(matrix) {
        let numPenalties = 0;
        const array = matrix.getArray();
        const width = matrix.getWidth();
        const height = matrix.getHeight();
        for (let y = 0; y < height; y++) {
          for (let x = 0; x < width; x++) {
            const arrayY = array[y];
            if (x + 6 < width && arrayY[x] === 1 && arrayY[x + 1] === 0 && arrayY[x + 2] === 1 && arrayY[x + 3] === 1 && arrayY[x + 4] === 1 && arrayY[x + 5] === 0 && arrayY[x + 6] === 1 && (MaskUtil.isWhiteHorizontal(arrayY, x - 4, x) || MaskUtil.isWhiteHorizontal(arrayY, x + 7, x + 11))) {
              numPenalties++;
            }
            if (y + 6 < height && array[y][x] === 1 && array[y + 1][x] === 0 && array[y + 2][x] === 1 && array[y + 3][x] === 1 && array[y + 4][x] === 1 && array[y + 5][x] === 0 && array[y + 6][x] === 1 && (MaskUtil.isWhiteVertical(array, x, y - 4, y) || MaskUtil.isWhiteVertical(array, x, y + 7, y + 11))) {
              numPenalties++;
            }
          }
        }
        return numPenalties * MaskUtil.N3;
      }
      static isWhiteHorizontal(rowArray, from, to) {
        from = Math.max(from, 0);
        to = Math.min(to, rowArray.length);
        for (let i = from; i < to; i++) {
          if (rowArray[i] === 1) {
            return false;
          }
        }
        return true;
      }
      static isWhiteVertical(array, col, from, to) {
        from = Math.max(from, 0);
        to = Math.min(to, array.length);
        for (let i = from; i < to; i++) {
          if (array[i][col] === 1) {
            return false;
          }
        }
        return true;
      }
      static applyMaskPenaltyRule4(matrix) {
        let numDarkCells = 0;
        const array = matrix.getArray();
        const width = matrix.getWidth();
        const height = matrix.getHeight();
        for (let y = 0; y < height; y++) {
          const arrayY = array[y];
          for (let x = 0; x < width; x++) {
            if (arrayY[x] === 1) {
              numDarkCells++;
            }
          }
        }
        const numTotalCells = matrix.getHeight() * matrix.getWidth();
        const fivePercentVariances = Math.floor(Math.abs(numDarkCells * 2 - numTotalCells) * 10 / numTotalCells);
        return fivePercentVariances * MaskUtil.N4;
      }
      static getDataMaskBit(maskPattern, x, y) {
        let intermediate;
        let temp;
        switch (maskPattern) {
          case 0:
            intermediate = y + x & 1;
            break;
          case 1:
            intermediate = y & 1;
            break;
          case 2:
            intermediate = x % 3;
            break;
          case 3:
            intermediate = (y + x) % 3;
            break;
          case 4:
            intermediate = Math.floor(y / 2) + Math.floor(x / 3) & 1;
            break;
          case 5:
            temp = y * x;
            intermediate = (temp & 1) + temp % 3;
            break;
          case 6:
            temp = y * x;
            intermediate = (temp & 1) + temp % 3 & 1;
            break;
          case 7:
            temp = y * x;
            intermediate = temp % 3 + (y + x & 1) & 1;
            break;
          default:
            throw new IllegalArgumentException("Invalid mask pattern: " + maskPattern);
        }
        return intermediate === 0;
      }
      static applyMaskPenaltyRule1Internal(matrix, isHorizontal) {
        let penalty = 0;
        const iLimit = isHorizontal ? matrix.getHeight() : matrix.getWidth();
        const jLimit = isHorizontal ? matrix.getWidth() : matrix.getHeight();
        const array = matrix.getArray();
        for (let i = 0; i < iLimit; i++) {
          let numSameBitCells = 0;
          let prevBit = -1;
          for (let j = 0; j < jLimit; j++) {
            const bit = isHorizontal ? array[i][j] : array[j][i];
            if (bit === prevBit) {
              numSameBitCells++;
            } else {
              if (numSameBitCells >= 5) {
                penalty += MaskUtil.N1 + (numSameBitCells - 5);
              }
              numSameBitCells = 1;
              prevBit = bit;
            }
          }
          if (numSameBitCells >= 5) {
            penalty += MaskUtil.N1 + (numSameBitCells - 5);
          }
        }
        return penalty;
      }
    }
    MaskUtil.N1 = 3;
    MaskUtil.N2 = 3;
    MaskUtil.N3 = 40;
    MaskUtil.N4 = 10;
    class ByteMatrix {
      constructor(width, height) {
        this.width = width;
        this.height = height;
        const bytes = new Array(height);
        for (let i = 0; i !== height; i++) {
          bytes[i] = new Uint8Array(width);
        }
        this.bytes = bytes;
      }
      getHeight() {
        return this.height;
      }
      getWidth() {
        return this.width;
      }
      get(x, y) {
        return this.bytes[y][x];
      }
      getArray() {
        return this.bytes;
      }
      setNumber(x, y, value) {
        this.bytes[y][x] = value;
      }
      setBoolean(x, y, value) {
        this.bytes[y][x] = value ? 1 : 0;
      }
      clear(value) {
        for (const aByte of this.bytes) {
          Arrays.fill(aByte, value);
        }
      }
      equals(o) {
        if (!(o instanceof ByteMatrix)) {
          return false;
        }
        const other = o;
        if (this.width !== other.width) {
          return false;
        }
        if (this.height !== other.height) {
          return false;
        }
        for (let y = 0, height = this.height; y < height; ++y) {
          const bytesY = this.bytes[y];
          const otherBytesY = other.bytes[y];
          for (let x = 0, width = this.width; x < width; ++x) {
            if (bytesY[x] !== otherBytesY[x]) {
              return false;
            }
          }
        }
        return true;
      }
      toString() {
        const result = new StringBuilder();
        for (let y = 0, height = this.height; y < height; ++y) {
          const bytesY = this.bytes[y];
          for (let x = 0, width = this.width; x < width; ++x) {
            switch (bytesY[x]) {
              case 0:
                result.append(" 0");
                break;
              case 1:
                result.append(" 1");
                break;
              default:
                result.append("  ");
                break;
            }
          }
          result.append("\n");
        }
        return result.toString();
      }
    }
    class QRCode {
      constructor() {
        this.maskPattern = -1;
      }
      getMode() {
        return this.mode;
      }
      getECLevel() {
        return this.ecLevel;
      }
      getVersion() {
        return this.version;
      }
      getMaskPattern() {
        return this.maskPattern;
      }
      getMatrix() {
        return this.matrix;
      }
      toString() {
        const result = new StringBuilder();
        result.append("<<\n");
        result.append(" mode: ");
        result.append(this.mode ? this.mode.toString() : "null");
        result.append("\n ecLevel: ");
        result.append(this.ecLevel ? this.ecLevel.toString() : "null");
        result.append("\n version: ");
        result.append(this.version ? this.version.toString() : "null");
        result.append("\n maskPattern: ");
        result.append(this.maskPattern.toString());
        if (this.matrix) {
          result.append("\n matrix:\n");
          result.append(this.matrix.toString());
        } else {
          result.append("\n matrix: null\n");
        }
        result.append(">>\n");
        return result.toString();
      }
      setMode(value) {
        this.mode = value;
      }
      setECLevel(value) {
        this.ecLevel = value;
      }
      setVersion(version) {
        this.version = version;
      }
      setMaskPattern(value) {
        this.maskPattern = value;
      }
      setMatrix(value) {
        this.matrix = value;
      }
      static isValidMaskPattern(maskPattern) {
        return maskPattern >= 0 && maskPattern < QRCode.NUM_MASK_PATTERNS;
      }
    }
    QRCode.NUM_MASK_PATTERNS = 8;
    class WriterException extends Exception {
    }
    WriterException.kind = "WriterException";
    class MatrixUtil {
      constructor() {
      }
      static clearMatrix(matrix) {
        matrix.clear(255);
      }
      static buildMatrix(dataBits, ecLevel, version, maskPattern, matrix) {
        MatrixUtil.clearMatrix(matrix);
        MatrixUtil.embedBasicPatterns(version, matrix);
        MatrixUtil.embedTypeInfo(ecLevel, maskPattern, matrix);
        MatrixUtil.maybeEmbedVersionInfo(version, matrix);
        MatrixUtil.embedDataBits(dataBits, maskPattern, matrix);
      }
      static embedBasicPatterns(version, matrix) {
        MatrixUtil.embedPositionDetectionPatternsAndSeparators(matrix);
        MatrixUtil.embedDarkDotAtLeftBottomCorner(matrix);
        MatrixUtil.maybeEmbedPositionAdjustmentPatterns(version, matrix);
        MatrixUtil.embedTimingPatterns(matrix);
      }
      static embedTypeInfo(ecLevel, maskPattern, matrix) {
        const typeInfoBits = new BitArray();
        MatrixUtil.makeTypeInfoBits(ecLevel, maskPattern, typeInfoBits);
        for (let i = 0, size = typeInfoBits.getSize(); i < size; ++i) {
          const bit = typeInfoBits.get(typeInfoBits.getSize() - 1 - i);
          const coordinates = MatrixUtil.TYPE_INFO_COORDINATES[i];
          const x1 = coordinates[0];
          const y1 = coordinates[1];
          matrix.setBoolean(x1, y1, bit);
          if (i < 8) {
            const x2 = matrix.getWidth() - i - 1;
            const y2 = 8;
            matrix.setBoolean(x2, y2, bit);
          } else {
            const x2 = 8;
            const y2 = matrix.getHeight() - 7 + (i - 8);
            matrix.setBoolean(x2, y2, bit);
          }
        }
      }
      static maybeEmbedVersionInfo(version, matrix) {
        if (version.getVersionNumber() < 7) {
          return;
        }
        const versionInfoBits = new BitArray();
        MatrixUtil.makeVersionInfoBits(version, versionInfoBits);
        let bitIndex = 6 * 3 - 1;
        for (let i = 0; i < 6; ++i) {
          for (let j = 0; j < 3; ++j) {
            const bit = versionInfoBits.get(bitIndex);
            bitIndex--;
            matrix.setBoolean(i, matrix.getHeight() - 11 + j, bit);
            matrix.setBoolean(matrix.getHeight() - 11 + j, i, bit);
          }
        }
      }
      static embedDataBits(dataBits, maskPattern, matrix) {
        let bitIndex = 0;
        let direction = -1;
        let x = matrix.getWidth() - 1;
        let y = matrix.getHeight() - 1;
        while (x > 0) {
          if (x === 6) {
            x -= 1;
          }
          while (y >= 0 && y < matrix.getHeight()) {
            for (let i = 0; i < 2; ++i) {
              const xx = x - i;
              if (!MatrixUtil.isEmpty(matrix.get(xx, y))) {
                continue;
              }
              let bit;
              if (bitIndex < dataBits.getSize()) {
                bit = dataBits.get(bitIndex);
                ++bitIndex;
              } else {
                bit = false;
              }
              if (maskPattern !== 255 && MaskUtil.getDataMaskBit(maskPattern, xx, y)) {
                bit = !bit;
              }
              matrix.setBoolean(xx, y, bit);
            }
            y += direction;
          }
          direction = -direction;
          y += direction;
          x -= 2;
        }
        if (bitIndex !== dataBits.getSize()) {
          throw new WriterException("Not all bits consumed: " + bitIndex + "/" + dataBits.getSize());
        }
      }
      static findMSBSet(value) {
        return 32 - Integer.numberOfLeadingZeros(value);
      }
      static calculateBCHCode(value, poly) {
        if (poly === 0) {
          throw new IllegalArgumentException("0 polynomial");
        }
        const msbSetInPoly = MatrixUtil.findMSBSet(poly);
        value <<= msbSetInPoly - 1;
        while (MatrixUtil.findMSBSet(value) >= msbSetInPoly) {
          value ^= poly << MatrixUtil.findMSBSet(value) - msbSetInPoly;
        }
        return value;
      }
      static makeTypeInfoBits(ecLevel, maskPattern, bits) {
        if (!QRCode.isValidMaskPattern(maskPattern)) {
          throw new WriterException("Invalid mask pattern");
        }
        const typeInfo = ecLevel.getBits() << 3 | maskPattern;
        bits.appendBits(typeInfo, 5);
        const bchCode = MatrixUtil.calculateBCHCode(typeInfo, MatrixUtil.TYPE_INFO_POLY);
        bits.appendBits(bchCode, 10);
        const maskBits = new BitArray();
        maskBits.appendBits(MatrixUtil.TYPE_INFO_MASK_PATTERN, 15);
        bits.xor(maskBits);
        if (bits.getSize() !== 15) {
          throw new WriterException("should not happen but we got: " + bits.getSize());
        }
      }
      static makeVersionInfoBits(version, bits) {
        bits.appendBits(version.getVersionNumber(), 6);
        const bchCode = MatrixUtil.calculateBCHCode(version.getVersionNumber(), MatrixUtil.VERSION_INFO_POLY);
        bits.appendBits(bchCode, 12);
        if (bits.getSize() !== 18) {
          throw new WriterException("should not happen but we got: " + bits.getSize());
        }
      }
      static isEmpty(value) {
        return value === 255;
      }
      static embedTimingPatterns(matrix) {
        for (let i = 8; i < matrix.getWidth() - 8; ++i) {
          const bit = (i + 1) % 2;
          if (MatrixUtil.isEmpty(matrix.get(i, 6))) {
            matrix.setNumber(i, 6, bit);
          }
          if (MatrixUtil.isEmpty(matrix.get(6, i))) {
            matrix.setNumber(6, i, bit);
          }
        }
      }
      static embedDarkDotAtLeftBottomCorner(matrix) {
        if (matrix.get(8, matrix.getHeight() - 8) === 0) {
          throw new WriterException();
        }
        matrix.setNumber(8, matrix.getHeight() - 8, 1);
      }
      static embedHorizontalSeparationPattern(xStart, yStart, matrix) {
        for (let x = 0; x < 8; ++x) {
          if (!MatrixUtil.isEmpty(matrix.get(xStart + x, yStart))) {
            throw new WriterException();
          }
          matrix.setNumber(xStart + x, yStart, 0);
        }
      }
      static embedVerticalSeparationPattern(xStart, yStart, matrix) {
        for (let y = 0; y < 7; ++y) {
          if (!MatrixUtil.isEmpty(matrix.get(xStart, yStart + y))) {
            throw new WriterException();
          }
          matrix.setNumber(xStart, yStart + y, 0);
        }
      }
      static embedPositionAdjustmentPattern(xStart, yStart, matrix) {
        for (let y = 0; y < 5; ++y) {
          const patternY = MatrixUtil.POSITION_ADJUSTMENT_PATTERN[y];
          for (let x = 0; x < 5; ++x) {
            matrix.setNumber(xStart + x, yStart + y, patternY[x]);
          }
        }
      }
      static embedPositionDetectionPattern(xStart, yStart, matrix) {
        for (let y = 0; y < 7; ++y) {
          const patternY = MatrixUtil.POSITION_DETECTION_PATTERN[y];
          for (let x = 0; x < 7; ++x) {
            matrix.setNumber(xStart + x, yStart + y, patternY[x]);
          }
        }
      }
      static embedPositionDetectionPatternsAndSeparators(matrix) {
        const pdpWidth = MatrixUtil.POSITION_DETECTION_PATTERN[0].length;
        MatrixUtil.embedPositionDetectionPattern(0, 0, matrix);
        MatrixUtil.embedPositionDetectionPattern(matrix.getWidth() - pdpWidth, 0, matrix);
        MatrixUtil.embedPositionDetectionPattern(0, matrix.getWidth() - pdpWidth, matrix);
        const hspWidth = 8;
        MatrixUtil.embedHorizontalSeparationPattern(0, hspWidth - 1, matrix);
        MatrixUtil.embedHorizontalSeparationPattern(matrix.getWidth() - hspWidth, hspWidth - 1, matrix);
        MatrixUtil.embedHorizontalSeparationPattern(0, matrix.getWidth() - hspWidth, matrix);
        const vspSize = 7;
        MatrixUtil.embedVerticalSeparationPattern(vspSize, 0, matrix);
        MatrixUtil.embedVerticalSeparationPattern(matrix.getHeight() - vspSize - 1, 0, matrix);
        MatrixUtil.embedVerticalSeparationPattern(vspSize, matrix.getHeight() - vspSize, matrix);
      }
      static maybeEmbedPositionAdjustmentPatterns(version, matrix) {
        if (version.getVersionNumber() < 2) {
          return;
        }
        const index = version.getVersionNumber() - 1;
        const coordinates = MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[index];
        for (let i = 0, length = coordinates.length; i !== length; i++) {
          const y = coordinates[i];
          if (y >= 0) {
            for (let j = 0; j !== length; j++) {
              const x = coordinates[j];
              if (x >= 0 && MatrixUtil.isEmpty(matrix.get(x, y))) {
                MatrixUtil.embedPositionAdjustmentPattern(x - 2, y - 2, matrix);
              }
            }
          }
        }
      }
    }
    MatrixUtil.POSITION_DETECTION_PATTERN = Array.from([
      Int32Array.from([1, 1, 1, 1, 1, 1, 1]),
      Int32Array.from([1, 0, 0, 0, 0, 0, 1]),
      Int32Array.from([1, 0, 1, 1, 1, 0, 1]),
      Int32Array.from([1, 0, 1, 1, 1, 0, 1]),
      Int32Array.from([1, 0, 1, 1, 1, 0, 1]),
      Int32Array.from([1, 0, 0, 0, 0, 0, 1]),
      Int32Array.from([1, 1, 1, 1, 1, 1, 1])
    ]);
    MatrixUtil.POSITION_ADJUSTMENT_PATTERN = Array.from([
      Int32Array.from([1, 1, 1, 1, 1]),
      Int32Array.from([1, 0, 0, 0, 1]),
      Int32Array.from([1, 0, 1, 0, 1]),
      Int32Array.from([1, 0, 0, 0, 1]),
      Int32Array.from([1, 1, 1, 1, 1])
    ]);
    MatrixUtil.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE = Array.from([
      Int32Array.from([-1, -1, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 18, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 22, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 26, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 30, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 34, -1, -1, -1, -1, -1]),
      Int32Array.from([6, 22, 38, -1, -1, -1, -1]),
      Int32Array.from([6, 24, 42, -1, -1, -1, -1]),
      Int32Array.from([6, 26, 46, -1, -1, -1, -1]),
      Int32Array.from([6, 28, 50, -1, -1, -1, -1]),
      Int32Array.from([6, 30, 54, -1, -1, -1, -1]),
      Int32Array.from([6, 32, 58, -1, -1, -1, -1]),
      Int32Array.from([6, 34, 62, -1, -1, -1, -1]),
      Int32Array.from([6, 26, 46, 66, -1, -1, -1]),
      Int32Array.from([6, 26, 48, 70, -1, -1, -1]),
      Int32Array.from([6, 26, 50, 74, -1, -1, -1]),
      Int32Array.from([6, 30, 54, 78, -1, -1, -1]),
      Int32Array.from([6, 30, 56, 82, -1, -1, -1]),
      Int32Array.from([6, 30, 58, 86, -1, -1, -1]),
      Int32Array.from([6, 34, 62, 90, -1, -1, -1]),
      Int32Array.from([6, 28, 50, 72, 94, -1, -1]),
      Int32Array.from([6, 26, 50, 74, 98, -1, -1]),
      Int32Array.from([6, 30, 54, 78, 102, -1, -1]),
      Int32Array.from([6, 28, 54, 80, 106, -1, -1]),
      Int32Array.from([6, 32, 58, 84, 110, -1, -1]),
      Int32Array.from([6, 30, 58, 86, 114, -1, -1]),
      Int32Array.from([6, 34, 62, 90, 118, -1, -1]),
      Int32Array.from([6, 26, 50, 74, 98, 122, -1]),
      Int32Array.from([6, 30, 54, 78, 102, 126, -1]),
      Int32Array.from([6, 26, 52, 78, 104, 130, -1]),
      Int32Array.from([6, 30, 56, 82, 108, 134, -1]),
      Int32Array.from([6, 34, 60, 86, 112, 138, -1]),
      Int32Array.from([6, 30, 58, 86, 114, 142, -1]),
      Int32Array.from([6, 34, 62, 90, 118, 146, -1]),
      Int32Array.from([6, 30, 54, 78, 102, 126, 150]),
      Int32Array.from([6, 24, 50, 76, 102, 128, 154]),
      Int32Array.from([6, 28, 54, 80, 106, 132, 158]),
      Int32Array.from([6, 32, 58, 84, 110, 136, 162]),
      Int32Array.from([6, 26, 54, 82, 110, 138, 166]),
      Int32Array.from([6, 30, 58, 86, 114, 142, 170])
    ]);
    MatrixUtil.TYPE_INFO_COORDINATES = Array.from([
      Int32Array.from([8, 0]),
      Int32Array.from([8, 1]),
      Int32Array.from([8, 2]),
      Int32Array.from([8, 3]),
      Int32Array.from([8, 4]),
      Int32Array.from([8, 5]),
      Int32Array.from([8, 7]),
      Int32Array.from([8, 8]),
      Int32Array.from([7, 8]),
      Int32Array.from([5, 8]),
      Int32Array.from([4, 8]),
      Int32Array.from([3, 8]),
      Int32Array.from([2, 8]),
      Int32Array.from([1, 8]),
      Int32Array.from([0, 8])
    ]);
    MatrixUtil.VERSION_INFO_POLY = 7973;
    MatrixUtil.TYPE_INFO_POLY = 1335;
    MatrixUtil.TYPE_INFO_MASK_PATTERN = 21522;
    class BlockPair {
      constructor(dataBytes, errorCorrectionBytes) {
        this.dataBytes = dataBytes;
        this.errorCorrectionBytes = errorCorrectionBytes;
      }
      getDataBytes() {
        return this.dataBytes;
      }
      getErrorCorrectionBytes() {
        return this.errorCorrectionBytes;
      }
    }
    class Encoder {
      constructor() {
      }
      static calculateMaskPenalty(matrix) {
        return MaskUtil.applyMaskPenaltyRule1(matrix) + MaskUtil.applyMaskPenaltyRule2(matrix) + MaskUtil.applyMaskPenaltyRule3(matrix) + MaskUtil.applyMaskPenaltyRule4(matrix);
      }
      static encode(content, ecLevel, hints = null) {
        let encoding = Encoder.DEFAULT_BYTE_MODE_ENCODING;
        const hasEncodingHint = hints !== null && void 0 !== hints.get(EncodeHintType$1.CHARACTER_SET);
        if (hasEncodingHint) {
          encoding = hints.get(EncodeHintType$1.CHARACTER_SET).toString();
        }
        const mode = this.chooseMode(content, encoding);
        const headerBits = new BitArray();
        if (mode === Mode$1.BYTE && (hasEncodingHint || Encoder.DEFAULT_BYTE_MODE_ENCODING !== encoding)) {
          const eci = CharacterSetECI.getCharacterSetECIByName(encoding);
          if (eci !== void 0) {
            this.appendECI(eci, headerBits);
          }
        }
        this.appendModeInfo(mode, headerBits);
        const dataBits = new BitArray();
        this.appendBytes(content, mode, dataBits, encoding);
        let version;
        if (hints !== null && void 0 !== hints.get(EncodeHintType$1.QR_VERSION)) {
          const versionNumber = Number.parseInt(hints.get(EncodeHintType$1.QR_VERSION).toString(), 10);
          version = Version$1.getVersionForNumber(versionNumber);
          const bitsNeeded = this.calculateBitsNeeded(mode, headerBits, dataBits, version);
          if (!this.willFit(bitsNeeded, version, ecLevel)) {
            throw new WriterException("Data too big for requested version");
          }
        } else {
          version = this.recommendVersion(ecLevel, mode, headerBits, dataBits);
        }
        const headerAndDataBits = new BitArray();
        headerAndDataBits.appendBitArray(headerBits);
        const numLetters = mode === Mode$1.BYTE ? dataBits.getSizeInBytes() : content.length;
        this.appendLengthInfo(numLetters, version, mode, headerAndDataBits);
        headerAndDataBits.appendBitArray(dataBits);
        const ecBlocks = version.getECBlocksForLevel(ecLevel);
        const numDataBytes = version.getTotalCodewords() - ecBlocks.getTotalECCodewords();
        this.terminateBits(numDataBytes, headerAndDataBits);
        const finalBits = this.interleaveWithECBytes(headerAndDataBits, version.getTotalCodewords(), numDataBytes, ecBlocks.getNumBlocks());
        const qrCode = new QRCode();
        qrCode.setECLevel(ecLevel);
        qrCode.setMode(mode);
        qrCode.setVersion(version);
        const dimension = version.getDimensionForVersion();
        const matrix = new ByteMatrix(dimension, dimension);
        const maskPattern = this.chooseMaskPattern(finalBits, ecLevel, version, matrix);
        qrCode.setMaskPattern(maskPattern);
        MatrixUtil.buildMatrix(finalBits, ecLevel, version, maskPattern, matrix);
        qrCode.setMatrix(matrix);
        return qrCode;
      }
      static recommendVersion(ecLevel, mode, headerBits, dataBits) {
        const provisionalBitsNeeded = this.calculateBitsNeeded(mode, headerBits, dataBits, Version$1.getVersionForNumber(1));
        const provisionalVersion = this.chooseVersion(provisionalBitsNeeded, ecLevel);
        const bitsNeeded = this.calculateBitsNeeded(mode, headerBits, dataBits, provisionalVersion);
        return this.chooseVersion(bitsNeeded, ecLevel);
      }
      static calculateBitsNeeded(mode, headerBits, dataBits, version) {
        return headerBits.getSize() + mode.getCharacterCountBits(version) + dataBits.getSize();
      }
      static getAlphanumericCode(code) {
        if (code < Encoder.ALPHANUMERIC_TABLE.length) {
          return Encoder.ALPHANUMERIC_TABLE[code];
        }
        return -1;
      }
      static chooseMode(content, encoding = null) {
        if (CharacterSetECI.SJIS.getName() === encoding && this.isOnlyDoubleByteKanji(content)) {
          return Mode$1.KANJI;
        }
        let hasNumeric = false;
        let hasAlphanumeric = false;
        for (let i = 0, length = content.length; i < length; ++i) {
          const c = content.charAt(i);
          if (Encoder.isDigit(c)) {
            hasNumeric = true;
          } else if (this.getAlphanumericCode(c.charCodeAt(0)) !== -1) {
            hasAlphanumeric = true;
          } else {
            return Mode$1.BYTE;
          }
        }
        if (hasAlphanumeric) {
          return Mode$1.ALPHANUMERIC;
        }
        if (hasNumeric) {
          return Mode$1.NUMERIC;
        }
        return Mode$1.BYTE;
      }
      static isOnlyDoubleByteKanji(content) {
        let bytes;
        try {
          bytes = StringEncoding.encode(content, CharacterSetECI.SJIS);
        } catch (ignored) {
          return false;
        }
        const length = bytes.length;
        if (length % 2 !== 0) {
          return false;
        }
        for (let i = 0; i < length; i += 2) {
          const byte1 = bytes[i] & 255;
          if ((byte1 < 129 || byte1 > 159) && (byte1 < 224 || byte1 > 235)) {
            return false;
          }
        }
        return true;
      }
      static chooseMaskPattern(bits, ecLevel, version, matrix) {
        let minPenalty = Number.MAX_SAFE_INTEGER;
        let bestMaskPattern = -1;
        for (let maskPattern = 0; maskPattern < QRCode.NUM_MASK_PATTERNS; maskPattern++) {
          MatrixUtil.buildMatrix(bits, ecLevel, version, maskPattern, matrix);
          let penalty = this.calculateMaskPenalty(matrix);
          if (penalty < minPenalty) {
            minPenalty = penalty;
            bestMaskPattern = maskPattern;
          }
        }
        return bestMaskPattern;
      }
      static chooseVersion(numInputBits, ecLevel) {
        for (let versionNum = 1; versionNum <= 40; versionNum++) {
          const version = Version$1.getVersionForNumber(versionNum);
          if (Encoder.willFit(numInputBits, version, ecLevel)) {
            return version;
          }
        }
        throw new WriterException("Data too big");
      }
      static willFit(numInputBits, version, ecLevel) {
        const numBytes = version.getTotalCodewords();
        const ecBlocks = version.getECBlocksForLevel(ecLevel);
        const numEcBytes = ecBlocks.getTotalECCodewords();
        const numDataBytes = numBytes - numEcBytes;
        const totalInputBytes = (numInputBits + 7) / 8;
        return numDataBytes >= totalInputBytes;
      }
      static terminateBits(numDataBytes, bits) {
        const capacity = numDataBytes * 8;
        if (bits.getSize() > capacity) {
          throw new WriterException("data bits cannot fit in the QR Code" + bits.getSize() + " > " + capacity);
        }
        for (let i = 0; i < 4 && bits.getSize() < capacity; ++i) {
          bits.appendBit(false);
        }
        const numBitsInLastByte = bits.getSize() & 7;
        if (numBitsInLastByte > 0) {
          for (let i = numBitsInLastByte; i < 8; i++) {
            bits.appendBit(false);
          }
        }
        const numPaddingBytes = numDataBytes - bits.getSizeInBytes();
        for (let i = 0; i < numPaddingBytes; ++i) {
          bits.appendBits((i & 1) === 0 ? 236 : 17, 8);
        }
        if (bits.getSize() !== capacity) {
          throw new WriterException("Bits size does not equal capacity");
        }
      }
      static getNumDataBytesAndNumECBytesForBlockID(numTotalBytes, numDataBytes, numRSBlocks, blockID, numDataBytesInBlock, numECBytesInBlock) {
        if (blockID >= numRSBlocks) {
          throw new WriterException("Block ID too large");
        }
        const numRsBlocksInGroup2 = numTotalBytes % numRSBlocks;
        const numRsBlocksInGroup1 = numRSBlocks - numRsBlocksInGroup2;
        const numTotalBytesInGroup1 = Math.floor(numTotalBytes / numRSBlocks);
        const numTotalBytesInGroup2 = numTotalBytesInGroup1 + 1;
        const numDataBytesInGroup1 = Math.floor(numDataBytes / numRSBlocks);
        const numDataBytesInGroup2 = numDataBytesInGroup1 + 1;
        const numEcBytesInGroup1 = numTotalBytesInGroup1 - numDataBytesInGroup1;
        const numEcBytesInGroup2 = numTotalBytesInGroup2 - numDataBytesInGroup2;
        if (numEcBytesInGroup1 !== numEcBytesInGroup2) {
          throw new WriterException("EC bytes mismatch");
        }
        if (numRSBlocks !== numRsBlocksInGroup1 + numRsBlocksInGroup2) {
          throw new WriterException("RS blocks mismatch");
        }
        if (numTotalBytes !== (numDataBytesInGroup1 + numEcBytesInGroup1) * numRsBlocksInGroup1 + (numDataBytesInGroup2 + numEcBytesInGroup2) * numRsBlocksInGroup2) {
          throw new WriterException("Total bytes mismatch");
        }
        if (blockID < numRsBlocksInGroup1) {
          numDataBytesInBlock[0] = numDataBytesInGroup1;
          numECBytesInBlock[0] = numEcBytesInGroup1;
        } else {
          numDataBytesInBlock[0] = numDataBytesInGroup2;
          numECBytesInBlock[0] = numEcBytesInGroup2;
        }
      }
      static interleaveWithECBytes(bits, numTotalBytes, numDataBytes, numRSBlocks) {
        if (bits.getSizeInBytes() !== numDataBytes) {
          throw new WriterException("Number of bits and data bytes does not match");
        }
        let dataBytesOffset = 0;
        let maxNumDataBytes = 0;
        let maxNumEcBytes = 0;
        const blocks = new Array();
        for (let i = 0; i < numRSBlocks; ++i) {
          const numDataBytesInBlock = new Int32Array(1);
          const numEcBytesInBlock = new Int32Array(1);
          Encoder.getNumDataBytesAndNumECBytesForBlockID(numTotalBytes, numDataBytes, numRSBlocks, i, numDataBytesInBlock, numEcBytesInBlock);
          const size = numDataBytesInBlock[0];
          const dataBytes = new Uint8Array(size);
          bits.toBytes(8 * dataBytesOffset, dataBytes, 0, size);
          const ecBytes = Encoder.generateECBytes(dataBytes, numEcBytesInBlock[0]);
          blocks.push(new BlockPair(dataBytes, ecBytes));
          maxNumDataBytes = Math.max(maxNumDataBytes, size);
          maxNumEcBytes = Math.max(maxNumEcBytes, ecBytes.length);
          dataBytesOffset += numDataBytesInBlock[0];
        }
        if (numDataBytes !== dataBytesOffset) {
          throw new WriterException("Data bytes does not match offset");
        }
        const result = new BitArray();
        for (let i = 0; i < maxNumDataBytes; ++i) {
          for (const block of blocks) {
            const dataBytes = block.getDataBytes();
            if (i < dataBytes.length) {
              result.appendBits(dataBytes[i], 8);
            }
          }
        }
        for (let i = 0; i < maxNumEcBytes; ++i) {
          for (const block of blocks) {
            const ecBytes = block.getErrorCorrectionBytes();
            if (i < ecBytes.length) {
              result.appendBits(ecBytes[i], 8);
            }
          }
        }
        if (numTotalBytes !== result.getSizeInBytes()) {
          throw new WriterException("Interleaving error: " + numTotalBytes + " and " + result.getSizeInBytes() + " differ.");
        }
        return result;
      }
      static generateECBytes(dataBytes, numEcBytesInBlock) {
        const numDataBytes = dataBytes.length;
        const toEncode = new Int32Array(numDataBytes + numEcBytesInBlock);
        for (let i = 0; i < numDataBytes; i++) {
          toEncode[i] = dataBytes[i] & 255;
        }
        new ReedSolomonEncoder(GenericGF.QR_CODE_FIELD_256).encode(toEncode, numEcBytesInBlock);
        const ecBytes = new Uint8Array(numEcBytesInBlock);
        for (let i = 0; i < numEcBytesInBlock; i++) {
          ecBytes[i] = toEncode[numDataBytes + i];
        }
        return ecBytes;
      }
      static appendModeInfo(mode, bits) {
        bits.appendBits(mode.getBits(), 4);
      }
      static appendLengthInfo(numLetters, version, mode, bits) {
        const numBits = mode.getCharacterCountBits(version);
        if (numLetters >= 1 << numBits) {
          throw new WriterException(numLetters + " is bigger than " + ((1 << numBits) - 1));
        }
        bits.appendBits(numLetters, numBits);
      }
      static appendBytes(content, mode, bits, encoding) {
        switch (mode) {
          case Mode$1.NUMERIC:
            Encoder.appendNumericBytes(content, bits);
            break;
          case Mode$1.ALPHANUMERIC:
            Encoder.appendAlphanumericBytes(content, bits);
            break;
          case Mode$1.BYTE:
            Encoder.append8BitBytes(content, bits, encoding);
            break;
          case Mode$1.KANJI:
            Encoder.appendKanjiBytes(content, bits);
            break;
          default:
            throw new WriterException("Invalid mode: " + mode);
        }
      }
      static getDigit(singleCharacter) {
        return singleCharacter.charCodeAt(0) - 48;
      }
      static isDigit(singleCharacter) {
        const cn = Encoder.getDigit(singleCharacter);
        return cn >= 0 && cn <= 9;
      }
      static appendNumericBytes(content, bits) {
        const length = content.length;
        let i = 0;
        while (i < length) {
          const num1 = Encoder.getDigit(content.charAt(i));
          if (i + 2 < length) {
            const num2 = Encoder.getDigit(content.charAt(i + 1));
            const num3 = Encoder.getDigit(content.charAt(i + 2));
            bits.appendBits(num1 * 100 + num2 * 10 + num3, 10);
            i += 3;
          } else if (i + 1 < length) {
            const num2 = Encoder.getDigit(content.charAt(i + 1));
            bits.appendBits(num1 * 10 + num2, 7);
            i += 2;
          } else {
            bits.appendBits(num1, 4);
            i++;
          }
        }
      }
      static appendAlphanumericBytes(content, bits) {
        const length = content.length;
        let i = 0;
        while (i < length) {
          const code1 = Encoder.getAlphanumericCode(content.charCodeAt(i));
          if (code1 === -1) {
            throw new WriterException();
          }
          if (i + 1 < length) {
            const code2 = Encoder.getAlphanumericCode(content.charCodeAt(i + 1));
            if (code2 === -1) {
              throw new WriterException();
            }
            bits.appendBits(code1 * 45 + code2, 11);
            i += 2;
          } else {
            bits.appendBits(code1, 6);
            i++;
          }
        }
      }
      static append8BitBytes(content, bits, encoding) {
        let bytes;
        try {
          bytes = StringEncoding.encode(content, encoding);
        } catch (uee) {
          throw new WriterException(uee);
        }
        for (let i = 0, length = bytes.length; i !== length; i++) {
          const b = bytes[i];
          bits.appendBits(b, 8);
        }
      }
      static appendKanjiBytes(content, bits) {
        let bytes;
        try {
          bytes = StringEncoding.encode(content, CharacterSetECI.SJIS);
        } catch (uee) {
          throw new WriterException(uee);
        }
        const length = bytes.length;
        for (let i = 0; i < length; i += 2) {
          const byte1 = bytes[i] & 255;
          const byte2 = bytes[i + 1] & 255;
          const code = byte1 << 8 & 4294967295 | byte2;
          let subtracted = -1;
          if (code >= 33088 && code <= 40956) {
            subtracted = code - 33088;
          } else if (code >= 57408 && code <= 60351) {
            subtracted = code - 49472;
          }
          if (subtracted === -1) {
            throw new WriterException("Invalid byte sequence");
          }
          const encoded = (subtracted >> 8) * 192 + (subtracted & 255);
          bits.appendBits(encoded, 13);
        }
      }
      static appendECI(eci, bits) {
        bits.appendBits(Mode$1.ECI.getBits(), 4);
        bits.appendBits(eci.getValue(), 8);
      }
    }
    Encoder.ALPHANUMERIC_TABLE = Int32Array.from([
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      36,
      -1,
      -1,
      -1,
      37,
      38,
      -1,
      -1,
      -1,
      -1,
      39,
      40,
      -1,
      41,
      42,
      43,
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      44,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      10,
      11,
      12,
      13,
      14,
      15,
      16,
      17,
      18,
      19,
      20,
      21,
      22,
      23,
      24,
      25,
      26,
      27,
      28,
      29,
      30,
      31,
      32,
      33,
      34,
      35,
      -1,
      -1,
      -1,
      -1,
      -1
    ]);
    Encoder.DEFAULT_BYTE_MODE_ENCODING = CharacterSetECI.UTF8.getName();
    class BrowserQRCodeSvgWriter {
      write(contents, width, height, hints = null) {
        if (contents.length === 0) {
          throw new IllegalArgumentException("Found empty contents");
        }
        if (width < 0 || height < 0) {
          throw new IllegalArgumentException("Requested dimensions are too small: " + width + "x" + height);
        }
        let errorCorrectionLevel = ErrorCorrectionLevel.L;
        let quietZone = BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;
        if (hints !== null) {
          if (void 0 !== hints.get(EncodeHintType$1.ERROR_CORRECTION)) {
            errorCorrectionLevel = ErrorCorrectionLevel.fromString(hints.get(EncodeHintType$1.ERROR_CORRECTION).toString());
          }
          if (void 0 !== hints.get(EncodeHintType$1.MARGIN)) {
            quietZone = Number.parseInt(hints.get(EncodeHintType$1.MARGIN).toString(), 10);
          }
        }
        const code = Encoder.encode(contents, errorCorrectionLevel, hints);
        return this.renderResult(code, width, height, quietZone);
      }
      writeToDom(containerElement, contents, width, height, hints = null) {
        if (typeof containerElement === "string") {
          containerElement = document.querySelector(containerElement);
        }
        const svgElement = this.write(contents, width, height, hints);
        if (containerElement)
          containerElement.appendChild(svgElement);
      }
      renderResult(code, width, height, quietZone) {
        const input = code.getMatrix();
        if (input === null) {
          throw new IllegalStateException();
        }
        const inputWidth = input.getWidth();
        const inputHeight = input.getHeight();
        const qrWidth = inputWidth + quietZone * 2;
        const qrHeight = inputHeight + quietZone * 2;
        const outputWidth = Math.max(width, qrWidth);
        const outputHeight = Math.max(height, qrHeight);
        const multiple = Math.min(Math.floor(outputWidth / qrWidth), Math.floor(outputHeight / qrHeight));
        const leftPadding = Math.floor((outputWidth - inputWidth * multiple) / 2);
        const topPadding = Math.floor((outputHeight - inputHeight * multiple) / 2);
        const svgElement = this.createSVGElement(outputWidth, outputHeight);
        for (let inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {
          for (let inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {
            if (input.get(inputX, inputY) === 1) {
              const svgRectElement = this.createSvgRectElement(outputX, outputY, multiple, multiple);
              svgElement.appendChild(svgRectElement);
            }
          }
        }
        return svgElement;
      }
      createSVGElement(w, h2) {
        const svgElement = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, "svg");
        svgElement.setAttributeNS(null, "height", w.toString());
        svgElement.setAttributeNS(null, "width", h2.toString());
        return svgElement;
      }
      createSvgRectElement(x, y, w, h2) {
        const rect = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, "rect");
        rect.setAttributeNS(null, "x", x.toString());
        rect.setAttributeNS(null, "y", y.toString());
        rect.setAttributeNS(null, "height", w.toString());
        rect.setAttributeNS(null, "width", h2.toString());
        rect.setAttributeNS(null, "fill", "#000000");
        return rect;
      }
    }
    BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE = 4;
    BrowserQRCodeSvgWriter.SVG_NS = "http://www.w3.org/2000/svg";
    class QRCodeWriter {
      encode(contents, format, width, height, hints) {
        if (contents.length === 0) {
          throw new IllegalArgumentException("Found empty contents");
        }
        if (format !== BarcodeFormat$1.QR_CODE) {
          throw new IllegalArgumentException("Can only encode QR_CODE, but got " + format);
        }
        if (width < 0 || height < 0) {
          throw new IllegalArgumentException(`Requested dimensions are too small: ${width}x${height}`);
        }
        let errorCorrectionLevel = ErrorCorrectionLevel.L;
        let quietZone = QRCodeWriter.QUIET_ZONE_SIZE;
        if (hints !== null) {
          if (void 0 !== hints.get(EncodeHintType$1.ERROR_CORRECTION)) {
            errorCorrectionLevel = ErrorCorrectionLevel.fromString(hints.get(EncodeHintType$1.ERROR_CORRECTION).toString());
          }
          if (void 0 !== hints.get(EncodeHintType$1.MARGIN)) {
            quietZone = Number.parseInt(hints.get(EncodeHintType$1.MARGIN).toString(), 10);
          }
        }
        const code = Encoder.encode(contents, errorCorrectionLevel, hints);
        return QRCodeWriter.renderResult(code, width, height, quietZone);
      }
      static renderResult(code, width, height, quietZone) {
        const input = code.getMatrix();
        if (input === null) {
          throw new IllegalStateException();
        }
        const inputWidth = input.getWidth();
        const inputHeight = input.getHeight();
        const qrWidth = inputWidth + quietZone * 2;
        const qrHeight = inputHeight + quietZone * 2;
        const outputWidth = Math.max(width, qrWidth);
        const outputHeight = Math.max(height, qrHeight);
        const multiple = Math.min(Math.floor(outputWidth / qrWidth), Math.floor(outputHeight / qrHeight));
        const leftPadding = Math.floor((outputWidth - inputWidth * multiple) / 2);
        const topPadding = Math.floor((outputHeight - inputHeight * multiple) / 2);
        const output = new BitMatrix(outputWidth, outputHeight);
        for (let inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {
          for (let inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {
            if (input.get(inputX, inputY) === 1) {
              output.setRegion(outputX, outputY, multiple, multiple);
            }
          }
        }
        return output;
      }
    }
    QRCodeWriter.QUIET_ZONE_SIZE = 4;
    class MultiFormatWriter {
      encode(contents, format, width, height, hints) {
        let writer;
        switch (format) {
          case BarcodeFormat$1.QR_CODE:
            writer = new QRCodeWriter();
            break;
          default:
            throw new IllegalArgumentException("No encoder available for format " + format);
        }
        return writer.encode(contents, format, width, height, hints);
      }
    }
    class PlanarYUVLuminanceSource extends LuminanceSource {
      constructor(yuvData, dataWidth, dataHeight, left, top, width, height, reverseHorizontal) {
        super(width, height);
        this.yuvData = yuvData;
        this.dataWidth = dataWidth;
        this.dataHeight = dataHeight;
        this.left = left;
        this.top = top;
        if (left + width > dataWidth || top + height > dataHeight) {
          throw new IllegalArgumentException("Crop rectangle does not fit within image data.");
        }
        if (reverseHorizontal) {
          this.reverseHorizontal(width, height);
        }
      }
      getRow(y, row) {
        if (y < 0 || y >= this.getHeight()) {
          throw new IllegalArgumentException("Requested row is outside the image: " + y);
        }
        const width = this.getWidth();
        if (row === null || row === void 0 || row.length < width) {
          row = new Uint8ClampedArray(width);
        }
        const offset = (y + this.top) * this.dataWidth + this.left;
        System.arraycopy(this.yuvData, offset, row, 0, width);
        return row;
      }
      getMatrix() {
        const width = this.getWidth();
        const height = this.getHeight();
        if (width === this.dataWidth && height === this.dataHeight) {
          return this.yuvData;
        }
        const area = width * height;
        const matrix = new Uint8ClampedArray(area);
        let inputOffset = this.top * this.dataWidth + this.left;
        if (width === this.dataWidth) {
          System.arraycopy(this.yuvData, inputOffset, matrix, 0, area);
          return matrix;
        }
        for (let y = 0; y < height; y++) {
          const outputOffset = y * width;
          System.arraycopy(this.yuvData, inputOffset, matrix, outputOffset, width);
          inputOffset += this.dataWidth;
        }
        return matrix;
      }
      isCropSupported() {
        return true;
      }
      crop(left, top, width, height) {
        return new PlanarYUVLuminanceSource(this.yuvData, this.dataWidth, this.dataHeight, this.left + left, this.top + top, width, height, false);
      }
      renderThumbnail() {
        const width = this.getWidth() / PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;
        const height = this.getHeight() / PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;
        const pixels = new Int32Array(width * height);
        const yuv = this.yuvData;
        let inputOffset = this.top * this.dataWidth + this.left;
        for (let y = 0; y < height; y++) {
          const outputOffset = y * width;
          for (let x = 0; x < width; x++) {
            const grey = yuv[inputOffset + x * PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR] & 255;
            pixels[outputOffset + x] = 4278190080 | grey * 65793;
          }
          inputOffset += this.dataWidth * PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;
        }
        return pixels;
      }
      getThumbnailWidth() {
        return this.getWidth() / PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;
      }
      getThumbnailHeight() {
        return this.getHeight() / PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;
      }
      reverseHorizontal(width, height) {
        const yuvData = this.yuvData;
        for (let y = 0, rowStart = this.top * this.dataWidth + this.left; y < height; y++, rowStart += this.dataWidth) {
          const middle = rowStart + width / 2;
          for (let x1 = rowStart, x2 = rowStart + width - 1; x1 < middle; x1++, x2--) {
            const temp = yuvData[x1];
            yuvData[x1] = yuvData[x2];
            yuvData[x2] = temp;
          }
        }
      }
      invert() {
        return new InvertedLuminanceSource(this);
      }
    }
    PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR = 2;
    class RGBLuminanceSource extends LuminanceSource {
      constructor(luminances, width, height, dataWidth, dataHeight, left, top) {
        super(width, height);
        this.dataWidth = dataWidth;
        this.dataHeight = dataHeight;
        this.left = left;
        this.top = top;
        if (luminances.BYTES_PER_ELEMENT === 4) {
          const size = width * height;
          const luminancesUint8Array = new Uint8ClampedArray(size);
          for (let offset = 0; offset < size; offset++) {
            const pixel = luminances[offset];
            const r = pixel >> 16 & 255;
            const g2 = pixel >> 7 & 510;
            const b = pixel & 255;
            luminancesUint8Array[offset] = (r + g2 + b) / 4 & 255;
          }
          this.luminances = luminancesUint8Array;
        } else {
          this.luminances = luminances;
        }
        if (void 0 === dataWidth) {
          this.dataWidth = width;
        }
        if (void 0 === dataHeight) {
          this.dataHeight = height;
        }
        if (void 0 === left) {
          this.left = 0;
        }
        if (void 0 === top) {
          this.top = 0;
        }
        if (this.left + width > this.dataWidth || this.top + height > this.dataHeight) {
          throw new IllegalArgumentException("Crop rectangle does not fit within image data.");
        }
      }
      getRow(y, row) {
        if (y < 0 || y >= this.getHeight()) {
          throw new IllegalArgumentException("Requested row is outside the image: " + y);
        }
        const width = this.getWidth();
        if (row === null || row === void 0 || row.length < width) {
          row = new Uint8ClampedArray(width);
        }
        const offset = (y + this.top) * this.dataWidth + this.left;
        System.arraycopy(this.luminances, offset, row, 0, width);
        return row;
      }
      getMatrix() {
        const width = this.getWidth();
        const height = this.getHeight();
        if (width === this.dataWidth && height === this.dataHeight) {
          return this.luminances;
        }
        const area = width * height;
        const matrix = new Uint8ClampedArray(area);
        let inputOffset = this.top * this.dataWidth + this.left;
        if (width === this.dataWidth) {
          System.arraycopy(this.luminances, inputOffset, matrix, 0, area);
          return matrix;
        }
        for (let y = 0; y < height; y++) {
          const outputOffset = y * width;
          System.arraycopy(this.luminances, inputOffset, matrix, outputOffset, width);
          inputOffset += this.dataWidth;
        }
        return matrix;
      }
      isCropSupported() {
        return true;
      }
      crop(left, top, width, height) {
        return new RGBLuminanceSource(this.luminances, width, height, this.dataWidth, this.dataHeight, this.left + left, this.top + top);
      }
      invert() {
        return new InvertedLuminanceSource(this);
      }
    }
    class Charset extends CharacterSetECI {
      static forName(name) {
        return this.getCharacterSetECIByName(name);
      }
    }
    class StandardCharsets {
    }
    StandardCharsets.ISO_8859_1 = CharacterSetECI.ISO8859_1;
    class AztecCode {
      isCompact() {
        return this.compact;
      }
      setCompact(compact) {
        this.compact = compact;
      }
      getSize() {
        return this.size;
      }
      setSize(size) {
        this.size = size;
      }
      getLayers() {
        return this.layers;
      }
      setLayers(layers) {
        this.layers = layers;
      }
      getCodeWords() {
        return this.codeWords;
      }
      setCodeWords(codeWords) {
        this.codeWords = codeWords;
      }
      getMatrix() {
        return this.matrix;
      }
      setMatrix(matrix) {
        this.matrix = matrix;
      }
    }
    class Collections {
      static singletonList(item) {
        return [item];
      }
      static min(collection, comparator) {
        return collection.sort(comparator)[0];
      }
    }
    class Token {
      constructor(previous) {
        this.previous = previous;
      }
      getPrevious() {
        return this.previous;
      }
    }
    class SimpleToken extends Token {
      constructor(previous, value, bitCount) {
        super(previous);
        this.value = value;
        this.bitCount = bitCount;
      }
      appendTo(bitArray, text) {
        bitArray.appendBits(this.value, this.bitCount);
      }
      add(value, bitCount) {
        return new SimpleToken(this, value, bitCount);
      }
      addBinaryShift(start, byteCount) {
        console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token");
        return new SimpleToken(this, start, byteCount);
      }
      toString() {
        let value = this.value & (1 << this.bitCount) - 1;
        value |= 1 << this.bitCount;
        return "<" + Integer.toBinaryString(value | 1 << this.bitCount).substring(1) + ">";
      }
    }
    class BinaryShiftToken extends SimpleToken {
      constructor(previous, binaryShiftStart, binaryShiftByteCount) {
        super(previous, 0, 0);
        this.binaryShiftStart = binaryShiftStart;
        this.binaryShiftByteCount = binaryShiftByteCount;
      }
      appendTo(bitArray, text) {
        for (let i = 0; i < this.binaryShiftByteCount; i++) {
          if (i === 0 || i === 31 && this.binaryShiftByteCount <= 62) {
            bitArray.appendBits(31, 5);
            if (this.binaryShiftByteCount > 62) {
              bitArray.appendBits(this.binaryShiftByteCount - 31, 16);
            } else if (i === 0) {
              bitArray.appendBits(Math.min(this.binaryShiftByteCount, 31), 5);
            } else {
              bitArray.appendBits(this.binaryShiftByteCount - 31, 5);
            }
          }
          bitArray.appendBits(text[this.binaryShiftStart + i], 8);
        }
      }
      addBinaryShift(start, byteCount) {
        return new BinaryShiftToken(this, start, byteCount);
      }
      toString() {
        return "<" + this.binaryShiftStart + "::" + (this.binaryShiftStart + this.binaryShiftByteCount - 1) + ">";
      }
    }
    function addBinaryShift(token, start, byteCount) {
      return new BinaryShiftToken(token, start, byteCount);
    }
    function add(token, value, bitCount) {
      return new SimpleToken(token, value, bitCount);
    }
    const MODE_NAMES = [
      "UPPER",
      "LOWER",
      "DIGIT",
      "MIXED",
      "PUNCT"
    ];
    const MODE_UPPER = 0;
    const MODE_LOWER = 1;
    const MODE_DIGIT = 2;
    const MODE_MIXED = 3;
    const MODE_PUNCT = 4;
    const EMPTY_TOKEN = new SimpleToken(null, 0, 0);
    const LATCH_TABLE = [
      Int32Array.from([
        0,
        (5 << 16) + 28,
        (5 << 16) + 30,
        (5 << 16) + 29,
        (10 << 16) + (29 << 5) + 30
      ]),
      Int32Array.from([
        (9 << 16) + (30 << 4) + 14,
        0,
        (5 << 16) + 30,
        (5 << 16) + 29,
        (10 << 16) + (29 << 5) + 30
      ]),
      Int32Array.from([
        (4 << 16) + 14,
        (9 << 16) + (14 << 5) + 28,
        0,
        (9 << 16) + (14 << 5) + 29,
        (14 << 16) + (14 << 10) + (29 << 5) + 30
      ]),
      Int32Array.from([
        (5 << 16) + 29,
        (5 << 16) + 28,
        (10 << 16) + (29 << 5) + 30,
        0,
        (5 << 16) + 30
      ]),
      Int32Array.from([
        (5 << 16) + 31,
        (10 << 16) + (31 << 5) + 28,
        (10 << 16) + (31 << 5) + 30,
        (10 << 16) + (31 << 5) + 29,
        0
      ])
    ];
    function static_SHIFT_TABLE(SHIFT_TABLE2) {
      for (let table of SHIFT_TABLE2) {
        Arrays.fill(table, -1);
      }
      SHIFT_TABLE2[MODE_UPPER][MODE_PUNCT] = 0;
      SHIFT_TABLE2[MODE_LOWER][MODE_PUNCT] = 0;
      SHIFT_TABLE2[MODE_LOWER][MODE_UPPER] = 28;
      SHIFT_TABLE2[MODE_MIXED][MODE_PUNCT] = 0;
      SHIFT_TABLE2[MODE_DIGIT][MODE_PUNCT] = 0;
      SHIFT_TABLE2[MODE_DIGIT][MODE_UPPER] = 15;
      return SHIFT_TABLE2;
    }
    const SHIFT_TABLE = static_SHIFT_TABLE(Arrays.createInt32Array(6, 6));
    class State {
      constructor(token, mode, binaryBytes, bitCount) {
        this.token = token;
        this.mode = mode;
        this.binaryShiftByteCount = binaryBytes;
        this.bitCount = bitCount;
      }
      getMode() {
        return this.mode;
      }
      getToken() {
        return this.token;
      }
      getBinaryShiftByteCount() {
        return this.binaryShiftByteCount;
      }
      getBitCount() {
        return this.bitCount;
      }
      latchAndAppend(mode, value) {
        let bitCount = this.bitCount;
        let token = this.token;
        if (mode !== this.mode) {
          let latch = LATCH_TABLE[this.mode][mode];
          token = add(token, latch & 65535, latch >> 16);
          bitCount += latch >> 16;
        }
        let latchModeBitCount = mode === MODE_DIGIT ? 4 : 5;
        token = add(token, value, latchModeBitCount);
        return new State(token, mode, 0, bitCount + latchModeBitCount);
      }
      shiftAndAppend(mode, value) {
        let token = this.token;
        let thisModeBitCount = this.mode === MODE_DIGIT ? 4 : 5;
        token = add(token, SHIFT_TABLE[this.mode][mode], thisModeBitCount);
        token = add(token, value, 5);
        return new State(token, this.mode, 0, this.bitCount + thisModeBitCount + 5);
      }
      addBinaryShiftChar(index) {
        let token = this.token;
        let mode = this.mode;
        let bitCount = this.bitCount;
        if (this.mode === MODE_PUNCT || this.mode === MODE_DIGIT) {
          let latch = LATCH_TABLE[mode][MODE_UPPER];
          token = add(token, latch & 65535, latch >> 16);
          bitCount += latch >> 16;
          mode = MODE_UPPER;
        }
        let deltaBitCount = this.binaryShiftByteCount === 0 || this.binaryShiftByteCount === 31 ? 18 : this.binaryShiftByteCount === 62 ? 9 : 8;
        let result = new State(token, mode, this.binaryShiftByteCount + 1, bitCount + deltaBitCount);
        if (result.binaryShiftByteCount === 2047 + 31) {
          result = result.endBinaryShift(index + 1);
        }
        return result;
      }
      endBinaryShift(index) {
        if (this.binaryShiftByteCount === 0) {
          return this;
        }
        let token = this.token;
        token = addBinaryShift(token, index - this.binaryShiftByteCount, this.binaryShiftByteCount);
        return new State(token, this.mode, 0, this.bitCount);
      }
      isBetterThanOrEqualTo(other) {
        let newModeBitCount = this.bitCount + (LATCH_TABLE[this.mode][other.mode] >> 16);
        if (this.binaryShiftByteCount < other.binaryShiftByteCount) {
          newModeBitCount += State.calculateBinaryShiftCost(other) - State.calculateBinaryShiftCost(this);
        } else if (this.binaryShiftByteCount > other.binaryShiftByteCount && other.binaryShiftByteCount > 0) {
          newModeBitCount += 10;
        }
        return newModeBitCount <= other.bitCount;
      }
      toBitArray(text) {
        let symbols = [];
        for (let token = this.endBinaryShift(text.length).token; token !== null; token = token.getPrevious()) {
          symbols.unshift(token);
        }
        let bitArray = new BitArray();
        for (const symbol of symbols) {
          symbol.appendTo(bitArray, text);
        }
        return bitArray;
      }
      toString() {
        return StringUtils.format("%s bits=%d bytes=%d", MODE_NAMES[this.mode], this.bitCount, this.binaryShiftByteCount);
      }
      static calculateBinaryShiftCost(state) {
        if (state.binaryShiftByteCount > 62) {
          return 21;
        }
        if (state.binaryShiftByteCount > 31) {
          return 20;
        }
        if (state.binaryShiftByteCount > 0) {
          return 10;
        }
        return 0;
      }
    }
    State.INITIAL_STATE = new State(EMPTY_TOKEN, MODE_UPPER, 0, 0);
    function static_CHAR_MAP(CHAR_MAP2) {
      const spaceCharCode = StringUtils.getCharCode(" ");
      const pointCharCode = StringUtils.getCharCode(".");
      const commaCharCode = StringUtils.getCharCode(",");
      CHAR_MAP2[MODE_UPPER][spaceCharCode] = 1;
      const zUpperCharCode = StringUtils.getCharCode("Z");
      const aUpperCharCode = StringUtils.getCharCode("A");
      for (let c = aUpperCharCode; c <= zUpperCharCode; c++) {
        CHAR_MAP2[MODE_UPPER][c] = c - aUpperCharCode + 2;
      }
      CHAR_MAP2[MODE_LOWER][spaceCharCode] = 1;
      const zLowerCharCode = StringUtils.getCharCode("z");
      const aLowerCharCode = StringUtils.getCharCode("a");
      for (let c = aLowerCharCode; c <= zLowerCharCode; c++) {
        CHAR_MAP2[MODE_LOWER][c] = c - aLowerCharCode + 2;
      }
      CHAR_MAP2[MODE_DIGIT][spaceCharCode] = 1;
      const nineCharCode = StringUtils.getCharCode("9");
      const zeroCharCode = StringUtils.getCharCode("0");
      for (let c = zeroCharCode; c <= nineCharCode; c++) {
        CHAR_MAP2[MODE_DIGIT][c] = c - zeroCharCode + 2;
      }
      CHAR_MAP2[MODE_DIGIT][commaCharCode] = 12;
      CHAR_MAP2[MODE_DIGIT][pointCharCode] = 13;
      const mixedTable = [
        "\0",
        " ",
        "",
        "",
        "",
        "",
        "",
        "",
        "\x07",
        "\b",
        "	",
        "\n",
        "\v",
        "\f",
        "\r",
        "\x1B",
        "",
        "",
        "",
        "",
        "@",
        "\\",
        "^",
        "_",
        "`",
        "|",
        "~",
        "\x7F"
      ];
      for (let i = 0; i < mixedTable.length; i++) {
        CHAR_MAP2[MODE_MIXED][StringUtils.getCharCode(mixedTable[i])] = i;
      }
      const punctTable = [
        "\0",
        "\r",
        "\0",
        "\0",
        "\0",
        "\0",
        "!",
        "'",
        "#",
        "$",
        "%",
        "&",
        "'",
        "(",
        ")",
        "*",
        "+",
        ",",
        "-",
        ".",
        "/",
        ":",
        ";",
        "<",
        "=",
        ">",
        "?",
        "[",
        "]",
        "{",
        "}"
      ];
      for (let i = 0; i < punctTable.length; i++) {
        if (StringUtils.getCharCode(punctTable[i]) > 0) {
          CHAR_MAP2[MODE_PUNCT][StringUtils.getCharCode(punctTable[i])] = i;
        }
      }
      return CHAR_MAP2;
    }
    const CHAR_MAP = static_CHAR_MAP(Arrays.createInt32Array(5, 256));
    class HighLevelEncoder {
      constructor(text) {
        this.text = text;
      }
      encode() {
        const spaceCharCode = StringUtils.getCharCode(" ");
        const lineBreakCharCode = StringUtils.getCharCode("\n");
        let states = Collections.singletonList(State.INITIAL_STATE);
        for (let index = 0; index < this.text.length; index++) {
          let pairCode;
          let nextChar = index + 1 < this.text.length ? this.text[index + 1] : 0;
          switch (this.text[index]) {
            case StringUtils.getCharCode("\r"):
              pairCode = nextChar === lineBreakCharCode ? 2 : 0;
              break;
            case StringUtils.getCharCode("."):
              pairCode = nextChar === spaceCharCode ? 3 : 0;
              break;
            case StringUtils.getCharCode(","):
              pairCode = nextChar === spaceCharCode ? 4 : 0;
              break;
            case StringUtils.getCharCode(":"):
              pairCode = nextChar === spaceCharCode ? 5 : 0;
              break;
            default:
              pairCode = 0;
          }
          if (pairCode > 0) {
            states = HighLevelEncoder.updateStateListForPair(states, index, pairCode);
            index++;
          } else {
            states = this.updateStateListForChar(states, index);
          }
        }
        const minState = Collections.min(states, (a, b) => {
          return a.getBitCount() - b.getBitCount();
        });
        return minState.toBitArray(this.text);
      }
      updateStateListForChar(states, index) {
        const result = [];
        for (let state of states) {
          this.updateStateForChar(state, index, result);
        }
        return HighLevelEncoder.simplifyStates(result);
      }
      updateStateForChar(state, index, result) {
        let ch = this.text[index] & 255;
        let charInCurrentTable = CHAR_MAP[state.getMode()][ch] > 0;
        let stateNoBinary = null;
        for (let mode = 0; mode <= MODE_PUNCT; mode++) {
          let charInMode = CHAR_MAP[mode][ch];
          if (charInMode > 0) {
            if (stateNoBinary == null) {
              stateNoBinary = state.endBinaryShift(index);
            }
            if (!charInCurrentTable || mode === state.getMode() || mode === MODE_DIGIT) {
              const latchState = stateNoBinary.latchAndAppend(mode, charInMode);
              result.push(latchState);
            }
            if (!charInCurrentTable && SHIFT_TABLE[state.getMode()][mode] >= 0) {
              const shiftState = stateNoBinary.shiftAndAppend(mode, charInMode);
              result.push(shiftState);
            }
          }
        }
        if (state.getBinaryShiftByteCount() > 0 || CHAR_MAP[state.getMode()][ch] === 0) {
          let binaryState = state.addBinaryShiftChar(index);
          result.push(binaryState);
        }
      }
      static updateStateListForPair(states, index, pairCode) {
        const result = [];
        for (let state of states) {
          this.updateStateForPair(state, index, pairCode, result);
        }
        return this.simplifyStates(result);
      }
      static updateStateForPair(state, index, pairCode, result) {
        let stateNoBinary = state.endBinaryShift(index);
        result.push(stateNoBinary.latchAndAppend(MODE_PUNCT, pairCode));
        if (state.getMode() !== MODE_PUNCT) {
          result.push(stateNoBinary.shiftAndAppend(MODE_PUNCT, pairCode));
        }
        if (pairCode === 3 || pairCode === 4) {
          let digitState = stateNoBinary.latchAndAppend(MODE_DIGIT, 16 - pairCode).latchAndAppend(MODE_DIGIT, 1);
          result.push(digitState);
        }
        if (state.getBinaryShiftByteCount() > 0) {
          let binaryState = state.addBinaryShiftChar(index).addBinaryShiftChar(index + 1);
          result.push(binaryState);
        }
      }
      static simplifyStates(states) {
        let result = [];
        for (const newState of states) {
          let add2 = true;
          for (const oldState of result) {
            if (oldState.isBetterThanOrEqualTo(newState)) {
              add2 = false;
              break;
            }
            if (newState.isBetterThanOrEqualTo(oldState)) {
              result = result.filter((x) => x !== oldState);
            }
          }
          if (add2) {
            result.push(newState);
          }
        }
        return result;
      }
    }
    class Encoder$1 {
      constructor() {
      }
      static encodeBytes(data) {
        return Encoder$1.encode(data, Encoder$1.DEFAULT_EC_PERCENT, Encoder$1.DEFAULT_AZTEC_LAYERS);
      }
      static encode(data, minECCPercent, userSpecifiedLayers) {
        let bits = new HighLevelEncoder(data).encode();
        let eccBits = Integer.truncDivision(bits.getSize() * minECCPercent, 100) + 11;
        let totalSizeBits = bits.getSize() + eccBits;
        let compact;
        let layers;
        let totalBitsInLayer;
        let wordSize;
        let stuffedBits;
        if (userSpecifiedLayers !== Encoder$1.DEFAULT_AZTEC_LAYERS) {
          compact = userSpecifiedLayers < 0;
          layers = Math.abs(userSpecifiedLayers);
          if (layers > (compact ? Encoder$1.MAX_NB_BITS_COMPACT : Encoder$1.MAX_NB_BITS)) {
            throw new IllegalArgumentException(StringUtils.format("Illegal value %s for layers", userSpecifiedLayers));
          }
          totalBitsInLayer = Encoder$1.totalBitsInLayer(layers, compact);
          wordSize = Encoder$1.WORD_SIZE[layers];
          let usableBitsInLayers = totalBitsInLayer - totalBitsInLayer % wordSize;
          stuffedBits = Encoder$1.stuffBits(bits, wordSize);
          if (stuffedBits.getSize() + eccBits > usableBitsInLayers) {
            throw new IllegalArgumentException("Data to large for user specified layer");
          }
          if (compact && stuffedBits.getSize() > wordSize * 64) {
            throw new IllegalArgumentException("Data to large for user specified layer");
          }
        } else {
          wordSize = 0;
          stuffedBits = null;
          for (let i = 0; ; i++) {
            if (i > Encoder$1.MAX_NB_BITS) {
              throw new IllegalArgumentException("Data too large for an Aztec code");
            }
            compact = i <= 3;
            layers = compact ? i + 1 : i;
            totalBitsInLayer = Encoder$1.totalBitsInLayer(layers, compact);
            if (totalSizeBits > totalBitsInLayer) {
              continue;
            }
            if (stuffedBits == null || wordSize !== Encoder$1.WORD_SIZE[layers]) {
              wordSize = Encoder$1.WORD_SIZE[layers];
              stuffedBits = Encoder$1.stuffBits(bits, wordSize);
            }
            let usableBitsInLayers = totalBitsInLayer - totalBitsInLayer % wordSize;
            if (compact && stuffedBits.getSize() > wordSize * 64) {
              continue;
            }
            if (stuffedBits.getSize() + eccBits <= usableBitsInLayers) {
              break;
            }
          }
        }
        let messageBits = Encoder$1.generateCheckWords(stuffedBits, totalBitsInLayer, wordSize);
        let messageSizeInWords = stuffedBits.getSize() / wordSize;
        let modeMessage = Encoder$1.generateModeMessage(compact, layers, messageSizeInWords);
        let baseMatrixSize = (compact ? 11 : 14) + layers * 4;
        let alignmentMap = new Int32Array(baseMatrixSize);
        let matrixSize;
        if (compact) {
          matrixSize = baseMatrixSize;
          for (let i = 0; i < alignmentMap.length; i++) {
            alignmentMap[i] = i;
          }
        } else {
          matrixSize = baseMatrixSize + 1 + 2 * Integer.truncDivision(Integer.truncDivision(baseMatrixSize, 2) - 1, 15);
          let origCenter = Integer.truncDivision(baseMatrixSize, 2);
          let center = Integer.truncDivision(matrixSize, 2);
          for (let i = 0; i < origCenter; i++) {
            let newOffset = i + Integer.truncDivision(i, 15);
            alignmentMap[origCenter - i - 1] = center - newOffset - 1;
            alignmentMap[origCenter + i] = center + newOffset + 1;
          }
        }
        let matrix = new BitMatrix(matrixSize);
        for (let i = 0, rowOffset = 0; i < layers; i++) {
          let rowSize = (layers - i) * 4 + (compact ? 9 : 12);
          for (let j = 0; j < rowSize; j++) {
            let columnOffset = j * 2;
            for (let k = 0; k < 2; k++) {
              if (messageBits.get(rowOffset + columnOffset + k)) {
                matrix.set(alignmentMap[i * 2 + k], alignmentMap[i * 2 + j]);
              }
              if (messageBits.get(rowOffset + rowSize * 2 + columnOffset + k)) {
                matrix.set(alignmentMap[i * 2 + j], alignmentMap[baseMatrixSize - 1 - i * 2 - k]);
              }
              if (messageBits.get(rowOffset + rowSize * 4 + columnOffset + k)) {
                matrix.set(alignmentMap[baseMatrixSize - 1 - i * 2 - k], alignmentMap[baseMatrixSize - 1 - i * 2 - j]);
              }
              if (messageBits.get(rowOffset + rowSize * 6 + columnOffset + k)) {
                matrix.set(alignmentMap[baseMatrixSize - 1 - i * 2 - j], alignmentMap[i * 2 + k]);
              }
            }
          }
          rowOffset += rowSize * 8;
        }
        Encoder$1.drawModeMessage(matrix, compact, matrixSize, modeMessage);
        if (compact) {
          Encoder$1.drawBullsEye(matrix, Integer.truncDivision(matrixSize, 2), 5);
        } else {
          Encoder$1.drawBullsEye(matrix, Integer.truncDivision(matrixSize, 2), 7);
          for (let i = 0, j = 0; i < Integer.truncDivision(baseMatrixSize, 2) - 1; i += 15, j += 16) {
            for (let k = Integer.truncDivision(matrixSize, 2) & 1; k < matrixSize; k += 2) {
              matrix.set(Integer.truncDivision(matrixSize, 2) - j, k);
              matrix.set(Integer.truncDivision(matrixSize, 2) + j, k);
              matrix.set(k, Integer.truncDivision(matrixSize, 2) - j);
              matrix.set(k, Integer.truncDivision(matrixSize, 2) + j);
            }
          }
        }
        let aztec = new AztecCode();
        aztec.setCompact(compact);
        aztec.setSize(matrixSize);
        aztec.setLayers(layers);
        aztec.setCodeWords(messageSizeInWords);
        aztec.setMatrix(matrix);
        return aztec;
      }
      static drawBullsEye(matrix, center, size) {
        for (let i = 0; i < size; i += 2) {
          for (let j = center - i; j <= center + i; j++) {
            matrix.set(j, center - i);
            matrix.set(j, center + i);
            matrix.set(center - i, j);
            matrix.set(center + i, j);
          }
        }
        matrix.set(center - size, center - size);
        matrix.set(center - size + 1, center - size);
        matrix.set(center - size, center - size + 1);
        matrix.set(center + size, center - size);
        matrix.set(center + size, center - size + 1);
        matrix.set(center + size, center + size - 1);
      }
      static generateModeMessage(compact, layers, messageSizeInWords) {
        let modeMessage = new BitArray();
        if (compact) {
          modeMessage.appendBits(layers - 1, 2);
          modeMessage.appendBits(messageSizeInWords - 1, 6);
          modeMessage = Encoder$1.generateCheckWords(modeMessage, 28, 4);
        } else {
          modeMessage.appendBits(layers - 1, 5);
          modeMessage.appendBits(messageSizeInWords - 1, 11);
          modeMessage = Encoder$1.generateCheckWords(modeMessage, 40, 4);
        }
        return modeMessage;
      }
      static drawModeMessage(matrix, compact, matrixSize, modeMessage) {
        let center = Integer.truncDivision(matrixSize, 2);
        if (compact) {
          for (let i = 0; i < 7; i++) {
            let offset = center - 3 + i;
            if (modeMessage.get(i)) {
              matrix.set(offset, center - 5);
            }
            if (modeMessage.get(i + 7)) {
              matrix.set(center + 5, offset);
            }
            if (modeMessage.get(20 - i)) {
              matrix.set(offset, center + 5);
            }
            if (modeMessage.get(27 - i)) {
              matrix.set(center - 5, offset);
            }
          }
        } else {
          for (let i = 0; i < 10; i++) {
            let offset = center - 5 + i + Integer.truncDivision(i, 5);
            if (modeMessage.get(i)) {
              matrix.set(offset, center - 7);
            }
            if (modeMessage.get(i + 10)) {
              matrix.set(center + 7, offset);
            }
            if (modeMessage.get(29 - i)) {
              matrix.set(offset, center + 7);
            }
            if (modeMessage.get(39 - i)) {
              matrix.set(center - 7, offset);
            }
          }
        }
      }
      static generateCheckWords(bitArray, totalBits, wordSize) {
        let messageSizeInWords = bitArray.getSize() / wordSize;
        let rs = new ReedSolomonEncoder(Encoder$1.getGF(wordSize));
        let totalWords = Integer.truncDivision(totalBits, wordSize);
        let messageWords = Encoder$1.bitsToWords(bitArray, wordSize, totalWords);
        rs.encode(messageWords, totalWords - messageSizeInWords);
        let startPad = totalBits % wordSize;
        let messageBits = new BitArray();
        messageBits.appendBits(0, startPad);
        for (const messageWord of Array.from(messageWords)) {
          messageBits.appendBits(messageWord, wordSize);
        }
        return messageBits;
      }
      static bitsToWords(stuffedBits, wordSize, totalWords) {
        let message = new Int32Array(totalWords);
        let i;
        let n;
        for (i = 0, n = stuffedBits.getSize() / wordSize; i < n; i++) {
          let value = 0;
          for (let j = 0; j < wordSize; j++) {
            value |= stuffedBits.get(i * wordSize + j) ? 1 << wordSize - j - 1 : 0;
          }
          message[i] = value;
        }
        return message;
      }
      static getGF(wordSize) {
        switch (wordSize) {
          case 4:
            return GenericGF.AZTEC_PARAM;
          case 6:
            return GenericGF.AZTEC_DATA_6;
          case 8:
            return GenericGF.AZTEC_DATA_8;
          case 10:
            return GenericGF.AZTEC_DATA_10;
          case 12:
            return GenericGF.AZTEC_DATA_12;
          default:
            throw new IllegalArgumentException("Unsupported word size " + wordSize);
        }
      }
      static stuffBits(bits, wordSize) {
        let out = new BitArray();
        let n = bits.getSize();
        let mask = (1 << wordSize) - 2;
        for (let i = 0; i < n; i += wordSize) {
          let word = 0;
          for (let j = 0; j < wordSize; j++) {
            if (i + j >= n || bits.get(i + j)) {
              word |= 1 << wordSize - 1 - j;
            }
          }
          if ((word & mask) === mask) {
            out.appendBits(word & mask, wordSize);
            i--;
          } else if ((word & mask) === 0) {
            out.appendBits(word | 1, wordSize);
            i--;
          } else {
            out.appendBits(word, wordSize);
          }
        }
        return out;
      }
      static totalBitsInLayer(layers, compact) {
        return ((compact ? 88 : 112) + 16 * layers) * layers;
      }
    }
    Encoder$1.DEFAULT_EC_PERCENT = 33;
    Encoder$1.DEFAULT_AZTEC_LAYERS = 0;
    Encoder$1.MAX_NB_BITS = 32;
    Encoder$1.MAX_NB_BITS_COMPACT = 4;
    Encoder$1.WORD_SIZE = Int32Array.from([
      4,
      6,
      6,
      8,
      8,
      8,
      8,
      8,
      8,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      12,
      12,
      12,
      12,
      12,
      12,
      12,
      12,
      12,
      12
    ]);
    class AztecWriter {
      encode(contents, format, width, height) {
        return this.encodeWithHints(contents, format, width, height, null);
      }
      encodeWithHints(contents, format, width, height, hints) {
        let charset = StandardCharsets.ISO_8859_1;
        let eccPercent = Encoder$1.DEFAULT_EC_PERCENT;
        let layers = Encoder$1.DEFAULT_AZTEC_LAYERS;
        if (hints != null) {
          if (hints.has(EncodeHintType$1.CHARACTER_SET)) {
            charset = Charset.forName(hints.get(EncodeHintType$1.CHARACTER_SET).toString());
          }
          if (hints.has(EncodeHintType$1.ERROR_CORRECTION)) {
            eccPercent = Integer.parseInt(hints.get(EncodeHintType$1.ERROR_CORRECTION).toString());
          }
          if (hints.has(EncodeHintType$1.AZTEC_LAYERS)) {
            layers = Integer.parseInt(hints.get(EncodeHintType$1.AZTEC_LAYERS).toString());
          }
        }
        return AztecWriter.encodeLayers(contents, format, width, height, charset, eccPercent, layers);
      }
      static encodeLayers(contents, format, width, height, charset, eccPercent, layers) {
        if (format !== BarcodeFormat$1.AZTEC) {
          throw new IllegalArgumentException("Can only encode AZTEC, but got " + format);
        }
        let aztec = Encoder$1.encode(StringUtils.getBytes(contents, charset), eccPercent, layers);
        return AztecWriter.renderResult(aztec, width, height);
      }
      static renderResult(code, width, height) {
        let input = code.getMatrix();
        if (input == null) {
          throw new IllegalStateException();
        }
        let inputWidth = input.getWidth();
        let inputHeight = input.getHeight();
        let outputWidth = Math.max(width, inputWidth);
        let outputHeight = Math.max(height, inputHeight);
        let multiple = Math.min(outputWidth / inputWidth, outputHeight / inputHeight);
        let leftPadding = (outputWidth - inputWidth * multiple) / 2;
        let topPadding = (outputHeight - inputHeight * multiple) / 2;
        let output = new BitMatrix(outputWidth, outputHeight);
        for (let inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {
          for (let inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {
            if (input.get(inputX, inputY)) {
              output.setRegion(outputX, outputY, multiple, multiple);
            }
          }
        }
        return output;
      }
    }
    exports2.AbstractExpandedDecoder = AbstractExpandedDecoder;
    exports2.ArgumentException = ArgumentException;
    exports2.ArithmeticException = ArithmeticException;
    exports2.AztecCode = AztecCode;
    exports2.AztecCodeReader = AztecReader;
    exports2.AztecCodeWriter = AztecWriter;
    exports2.AztecDecoder = Decoder;
    exports2.AztecDetector = Detector;
    exports2.AztecDetectorResult = AztecDetectorResult;
    exports2.AztecEncoder = Encoder$1;
    exports2.AztecHighLevelEncoder = HighLevelEncoder;
    exports2.AztecPoint = Point;
    exports2.BarcodeFormat = BarcodeFormat$1;
    exports2.Binarizer = Binarizer;
    exports2.BinaryBitmap = BinaryBitmap;
    exports2.BitArray = BitArray;
    exports2.BitMatrix = BitMatrix;
    exports2.BitSource = BitSource;
    exports2.BrowserAztecCodeReader = BrowserAztecCodeReader;
    exports2.BrowserBarcodeReader = BrowserBarcodeReader;
    exports2.BrowserCodeReader = BrowserCodeReader;
    exports2.BrowserDatamatrixCodeReader = BrowserDatamatrixCodeReader;
    exports2.BrowserMultiFormatReader = BrowserMultiFormatReader;
    exports2.BrowserPDF417Reader = BrowserPDF417Reader;
    exports2.BrowserQRCodeReader = BrowserQRCodeReader;
    exports2.BrowserQRCodeSvgWriter = BrowserQRCodeSvgWriter;
    exports2.CharacterSetECI = CharacterSetECI;
    exports2.ChecksumException = ChecksumException;
    exports2.Code128Reader = Code128Reader;
    exports2.Code39Reader = Code39Reader;
    exports2.DataMatrixDecodedBitStreamParser = DecodedBitStreamParser;
    exports2.DataMatrixReader = DataMatrixReader;
    exports2.DecodeHintType = DecodeHintType$1;
    exports2.DecoderResult = DecoderResult;
    exports2.DefaultGridSampler = DefaultGridSampler;
    exports2.DetectorResult = DetectorResult;
    exports2.EAN13Reader = EAN13Reader;
    exports2.EncodeHintType = EncodeHintType$1;
    exports2.Exception = Exception;
    exports2.FormatException = FormatException;
    exports2.GenericGF = GenericGF;
    exports2.GenericGFPoly = GenericGFPoly;
    exports2.GlobalHistogramBinarizer = GlobalHistogramBinarizer;
    exports2.GridSampler = GridSampler;
    exports2.GridSamplerInstance = GridSamplerInstance;
    exports2.HTMLCanvasElementLuminanceSource = HTMLCanvasElementLuminanceSource;
    exports2.HybridBinarizer = HybridBinarizer;
    exports2.ITFReader = ITFReader;
    exports2.IllegalArgumentException = IllegalArgumentException;
    exports2.IllegalStateException = IllegalStateException;
    exports2.InvertedLuminanceSource = InvertedLuminanceSource;
    exports2.LuminanceSource = LuminanceSource;
    exports2.MathUtils = MathUtils;
    exports2.MultiFormatOneDReader = MultiFormatOneDReader;
    exports2.MultiFormatReader = MultiFormatReader;
    exports2.MultiFormatWriter = MultiFormatWriter;
    exports2.NotFoundException = NotFoundException;
    exports2.OneDReader = OneDReader;
    exports2.PDF417DecodedBitStreamParser = DecodedBitStreamParser$2;
    exports2.PDF417DecoderErrorCorrection = ErrorCorrection;
    exports2.PDF417Reader = PDF417Reader;
    exports2.PDF417ResultMetadata = PDF417ResultMetadata;
    exports2.PerspectiveTransform = PerspectiveTransform;
    exports2.PlanarYUVLuminanceSource = PlanarYUVLuminanceSource;
    exports2.QRCodeByteMatrix = ByteMatrix;
    exports2.QRCodeDataMask = DataMask;
    exports2.QRCodeDecodedBitStreamParser = DecodedBitStreamParser$1;
    exports2.QRCodeDecoderErrorCorrectionLevel = ErrorCorrectionLevel;
    exports2.QRCodeDecoderFormatInformation = FormatInformation;
    exports2.QRCodeEncoder = Encoder;
    exports2.QRCodeEncoderQRCode = QRCode;
    exports2.QRCodeMaskUtil = MaskUtil;
    exports2.QRCodeMatrixUtil = MatrixUtil;
    exports2.QRCodeMode = Mode$1;
    exports2.QRCodeReader = QRCodeReader;
    exports2.QRCodeVersion = Version$1;
    exports2.QRCodeWriter = QRCodeWriter;
    exports2.RGBLuminanceSource = RGBLuminanceSource;
    exports2.RSS14Reader = RSS14Reader;
    exports2.RSSExpandedReader = RSSExpandedReader;
    exports2.ReaderException = ReaderException;
    exports2.ReedSolomonDecoder = ReedSolomonDecoder;
    exports2.ReedSolomonEncoder = ReedSolomonEncoder;
    exports2.ReedSolomonException = ReedSolomonException;
    exports2.Result = Result;
    exports2.ResultMetadataType = ResultMetadataType$1;
    exports2.ResultPoint = ResultPoint;
    exports2.StringUtils = StringUtils;
    exports2.UnsupportedOperationException = UnsupportedOperationException;
    exports2.VideoInputDevice = VideoInputDevice;
    exports2.WhiteRectangleDetector = WhiteRectangleDetector;
    exports2.WriterException = WriterException;
    exports2.ZXingArrays = Arrays;
    exports2.ZXingCharset = Charset;
    exports2.ZXingInteger = Integer;
    exports2.ZXingStandardCharsets = StandardCharsets;
    exports2.ZXingStringBuilder = StringBuilder;
    exports2.ZXingStringEncoding = StringEncoding;
    exports2.ZXingSystem = System;
    exports2.createAbstractExpandedDecoder = createDecoder;
    Object.defineProperty(exports2, "__esModule", { value: true });
  });
})(zxingJs_umd$1, zxingJs_umd$1.exports);
var zxingJs_umd = /* @__PURE__ */ getDefaultExportFromCjs(zxingJs_umd$1.exports);
var ZXing = /* @__PURE__ */ _mergeNamespaces({
  __proto__: null,
  "default": zxingJs_umd
}, [zxingJs_umd$1.exports]);
var ZXingHtml5QrcodeDecoder = function() {
  function ZXingHtml5QrcodeDecoder2(requestedFormats, verbose, logger) {
    this.formatMap = /* @__PURE__ */ new Map([
      [Html5QrcodeSupportedFormats.QR_CODE, zxingJs_umd$1.exports.BarcodeFormat.QR_CODE],
      [Html5QrcodeSupportedFormats.AZTEC, zxingJs_umd$1.exports.BarcodeFormat.AZTEC],
      [Html5QrcodeSupportedFormats.CODABAR, zxingJs_umd$1.exports.BarcodeFormat.CODABAR],
      [Html5QrcodeSupportedFormats.CODE_39, zxingJs_umd$1.exports.BarcodeFormat.CODE_39],
      [Html5QrcodeSupportedFormats.CODE_93, zxingJs_umd$1.exports.BarcodeFormat.CODE_93],
      [
        Html5QrcodeSupportedFormats.CODE_128,
        zxingJs_umd$1.exports.BarcodeFormat.CODE_128
      ],
      [
        Html5QrcodeSupportedFormats.DATA_MATRIX,
        zxingJs_umd$1.exports.BarcodeFormat.DATA_MATRIX
      ],
      [
        Html5QrcodeSupportedFormats.MAXICODE,
        zxingJs_umd$1.exports.BarcodeFormat.MAXICODE
      ],
      [Html5QrcodeSupportedFormats.ITF, zxingJs_umd$1.exports.BarcodeFormat.ITF],
      [Html5QrcodeSupportedFormats.EAN_13, zxingJs_umd$1.exports.BarcodeFormat.EAN_13],
      [Html5QrcodeSupportedFormats.EAN_8, zxingJs_umd$1.exports.BarcodeFormat.EAN_8],
      [Html5QrcodeSupportedFormats.PDF_417, zxingJs_umd$1.exports.BarcodeFormat.PDF_417],
      [Html5QrcodeSupportedFormats.RSS_14, zxingJs_umd$1.exports.BarcodeFormat.RSS_14],
      [
        Html5QrcodeSupportedFormats.RSS_EXPANDED,
        zxingJs_umd$1.exports.BarcodeFormat.RSS_EXPANDED
      ],
      [Html5QrcodeSupportedFormats.UPC_A, zxingJs_umd$1.exports.BarcodeFormat.UPC_A],
      [Html5QrcodeSupportedFormats.UPC_E, zxingJs_umd$1.exports.BarcodeFormat.UPC_E],
      [
        Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,
        zxingJs_umd$1.exports.BarcodeFormat.UPC_EAN_EXTENSION
      ]
    ]);
    this.reverseFormatMap = this.createReverseFormatMap();
    if (!ZXing) {
      throw "Use html5qrcode.min.js without edit, ZXing not found.";
    }
    this.verbose = verbose;
    this.logger = logger;
    var formats = this.createZXingFormats(requestedFormats);
    var hints = /* @__PURE__ */ new Map();
    hints.set(zxingJs_umd$1.exports.DecodeHintType.POSSIBLE_FORMATS, formats);
    hints.set(zxingJs_umd$1.exports.DecodeHintType.TRY_HARDER, false);
    this.hints = hints;
  }
  ZXingHtml5QrcodeDecoder2.prototype.decodeAsync = function(canvas) {
    var _this = this;
    return new Promise(function(resolve, reject) {
      try {
        resolve(_this.decode(canvas));
      } catch (error2) {
        reject(error2);
      }
    });
  };
  ZXingHtml5QrcodeDecoder2.prototype.decode = function(canvas) {
    var zxingDecoder = new zxingJs_umd$1.exports.MultiFormatReader(this.verbose, this.hints);
    var luminanceSource = new zxingJs_umd$1.exports.HTMLCanvasElementLuminanceSource(canvas);
    var binaryBitmap = new zxingJs_umd$1.exports.BinaryBitmap(new zxingJs_umd$1.exports.HybridBinarizer(luminanceSource));
    var result = zxingDecoder.decode(binaryBitmap);
    return {
      text: result.text,
      format: QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(result.format)),
      debugData: this.createDebugData()
    };
  };
  ZXingHtml5QrcodeDecoder2.prototype.createReverseFormatMap = function() {
    var result = /* @__PURE__ */ new Map();
    this.formatMap.forEach(function(value, key, _) {
      result.set(value, key);
    });
    return result;
  };
  ZXingHtml5QrcodeDecoder2.prototype.toHtml5QrcodeSupportedFormats = function(zxingFormat) {
    if (!this.reverseFormatMap.has(zxingFormat)) {
      throw "reverseFormatMap doesn't have ".concat(zxingFormat);
    }
    return this.reverseFormatMap.get(zxingFormat);
  };
  ZXingHtml5QrcodeDecoder2.prototype.createZXingFormats = function(requestedFormats) {
    var zxingFormats = [];
    for (var _i = 0, requestedFormats_1 = requestedFormats; _i < requestedFormats_1.length; _i++) {
      var requestedFormat = requestedFormats_1[_i];
      if (this.formatMap.has(requestedFormat)) {
        zxingFormats.push(this.formatMap.get(requestedFormat));
      } else {
        this.logger.logError("".concat(requestedFormat, " is not supported by") + "ZXingHtml5QrcodeShim");
      }
    }
    return zxingFormats;
  };
  ZXingHtml5QrcodeDecoder2.prototype.createDebugData = function() {
    return { decoderName: "zxing-js" };
  };
  return ZXingHtml5QrcodeDecoder2;
}();
var __awaiter$4 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$4 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var BarcodeDetectorDelegate = function() {
  function BarcodeDetectorDelegate2(requestedFormats, verbose, logger) {
    this.formatMap = /* @__PURE__ */ new Map([
      [Html5QrcodeSupportedFormats.QR_CODE, "qr_code"],
      [Html5QrcodeSupportedFormats.AZTEC, "aztec"],
      [Html5QrcodeSupportedFormats.CODABAR, "codabar"],
      [Html5QrcodeSupportedFormats.CODE_39, "code_39"],
      [Html5QrcodeSupportedFormats.CODE_93, "code_93"],
      [Html5QrcodeSupportedFormats.CODE_128, "code_128"],
      [Html5QrcodeSupportedFormats.DATA_MATRIX, "data_matrix"],
      [Html5QrcodeSupportedFormats.ITF, "itf"],
      [Html5QrcodeSupportedFormats.EAN_13, "ean_13"],
      [Html5QrcodeSupportedFormats.EAN_8, "ean_8"],
      [Html5QrcodeSupportedFormats.PDF_417, "pdf417"],
      [Html5QrcodeSupportedFormats.UPC_A, "upc_a"],
      [Html5QrcodeSupportedFormats.UPC_E, "upc_e"]
    ]);
    this.reverseFormatMap = this.createReverseFormatMap();
    if (!BarcodeDetectorDelegate2.isSupported()) {
      throw "Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";
    }
    this.verbose = verbose;
    this.logger = logger;
    var formats = this.createBarcodeDetectorFormats(requestedFormats);
    this.detector = new BarcodeDetector(formats);
    if (!this.detector) {
      throw "BarcodeDetector detector not supported";
    }
  }
  BarcodeDetectorDelegate2.isSupported = function() {
    if (!("BarcodeDetector" in window)) {
      return false;
    }
    var dummyDetector = new BarcodeDetector({ formats: ["qr_code"] });
    return typeof dummyDetector !== "undefined";
  };
  BarcodeDetectorDelegate2.prototype.decodeAsync = function(canvas) {
    return __awaiter$4(this, void 0, void 0, function() {
      var barcodes, largestBarcode;
      return __generator$4(this, function(_a) {
        switch (_a.label) {
          case 0:
            return [4, this.detector.detect(canvas)];
          case 1:
            barcodes = _a.sent();
            if (!barcodes || barcodes.length === 0) {
              throw "No barcode or QR code detected.";
            }
            largestBarcode = this.selectLargestBarcode(barcodes);
            return [2, {
              text: largestBarcode.rawValue,
              format: QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(largestBarcode.format)),
              debugData: this.createDebugData()
            }];
        }
      });
    });
  };
  BarcodeDetectorDelegate2.prototype.selectLargestBarcode = function(barcodes) {
    var largestBarcode = null;
    var maxArea = 0;
    for (var _i = 0, barcodes_1 = barcodes; _i < barcodes_1.length; _i++) {
      var barcode = barcodes_1[_i];
      var area = barcode.boundingBox.width * barcode.boundingBox.height;
      if (area > maxArea) {
        maxArea = area;
        largestBarcode = barcode;
      }
    }
    if (!largestBarcode) {
      throw "No largest barcode found";
    }
    return largestBarcode;
  };
  BarcodeDetectorDelegate2.prototype.createBarcodeDetectorFormats = function(requestedFormats) {
    var formats = [];
    for (var _i = 0, requestedFormats_1 = requestedFormats; _i < requestedFormats_1.length; _i++) {
      var requestedFormat = requestedFormats_1[_i];
      if (this.formatMap.has(requestedFormat)) {
        formats.push(this.formatMap.get(requestedFormat));
      } else {
        this.logger.warn("".concat(requestedFormat, " is not supported by") + "BarcodeDetectorDelegate");
      }
    }
    return { formats };
  };
  BarcodeDetectorDelegate2.prototype.toHtml5QrcodeSupportedFormats = function(barcodeDetectorFormat) {
    if (!this.reverseFormatMap.has(barcodeDetectorFormat)) {
      throw "reverseFormatMap doesn't have ".concat(barcodeDetectorFormat);
    }
    return this.reverseFormatMap.get(barcodeDetectorFormat);
  };
  BarcodeDetectorDelegate2.prototype.createReverseFormatMap = function() {
    var result = /* @__PURE__ */ new Map();
    this.formatMap.forEach(function(value, key, _) {
      result.set(value, key);
    });
    return result;
  };
  BarcodeDetectorDelegate2.prototype.createDebugData = function() {
    return { decoderName: "BarcodeDetector" };
  };
  return BarcodeDetectorDelegate2;
}();
var __awaiter$3 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$3 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var Html5QrcodeShim = function() {
  function Html5QrcodeShim2(requestedFormats, useBarCodeDetectorIfSupported, verbose, logger) {
    this.EXECUTIONS_TO_REPORT_PERFORMANCE = 100;
    this.executions = 0;
    this.executionResults = [];
    this.wasPrimaryDecoderUsedInLastDecode = false;
    this.verbose = verbose;
    if (useBarCodeDetectorIfSupported && BarcodeDetectorDelegate.isSupported()) {
      this.primaryDecoder = new BarcodeDetectorDelegate(requestedFormats, verbose, logger);
      this.secondaryDecoder = new ZXingHtml5QrcodeDecoder(requestedFormats, verbose, logger);
    } else {
      this.primaryDecoder = new ZXingHtml5QrcodeDecoder(requestedFormats, verbose, logger);
    }
  }
  Html5QrcodeShim2.prototype.decodeAsync = function(canvas) {
    return __awaiter$3(this, void 0, void 0, function() {
      var startTime;
      return __generator$3(this, function(_a) {
        switch (_a.label) {
          case 0:
            startTime = performance.now();
            _a.label = 1;
          case 1:
            _a.trys.push([1, , 3, 4]);
            return [4, this.getDecoder().decodeAsync(canvas)];
          case 2:
            return [2, _a.sent()];
          case 3:
            this.possiblyLogPerformance(startTime);
            return [7];
          case 4:
            return [2];
        }
      });
    });
  };
  Html5QrcodeShim2.prototype.decodeRobustlyAsync = function(canvas) {
    return __awaiter$3(this, void 0, void 0, function() {
      var startTime, error_1;
      return __generator$3(this, function(_a) {
        switch (_a.label) {
          case 0:
            startTime = performance.now();
            _a.label = 1;
          case 1:
            _a.trys.push([1, 3, 4, 5]);
            return [4, this.primaryDecoder.decodeAsync(canvas)];
          case 2:
            return [2, _a.sent()];
          case 3:
            error_1 = _a.sent();
            if (this.secondaryDecoder) {
              return [2, this.secondaryDecoder.decodeAsync(canvas)];
            }
            throw error_1;
          case 4:
            this.possiblyLogPerformance(startTime);
            return [7];
          case 5:
            return [2];
        }
      });
    });
  };
  Html5QrcodeShim2.prototype.getDecoder = function() {
    if (!this.secondaryDecoder) {
      return this.primaryDecoder;
    }
    if (this.wasPrimaryDecoderUsedInLastDecode === false) {
      this.wasPrimaryDecoderUsedInLastDecode = true;
      return this.primaryDecoder;
    }
    this.wasPrimaryDecoderUsedInLastDecode = false;
    return this.secondaryDecoder;
  };
  Html5QrcodeShim2.prototype.possiblyLogPerformance = function(startTime) {
    if (!this.verbose) {
      return;
    }
    var executionTime = performance.now() - startTime;
    this.executionResults.push(executionTime);
    this.executions++;
    this.possiblyFlushPerformanceReport();
  };
  Html5QrcodeShim2.prototype.possiblyFlushPerformanceReport = function() {
    if (this.executions < this.EXECUTIONS_TO_REPORT_PERFORMANCE) {
      return;
    }
    var sum = 0;
    for (var _i = 0, _a = this.executionResults; _i < _a.length; _i++) {
      var executionTime = _a[_i];
      sum += executionTime;
    }
    var mean = sum / this.executionResults.length;
    console.log("".concat(mean, " ms for ").concat(this.executionResults.length, " last runs."));
    this.executions = 0;
    this.executionResults = [];
  };
  return Html5QrcodeShim2;
}();
var __extends$1 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2)
        if (Object.prototype.hasOwnProperty.call(b2, p))
          d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __awaiter$2 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$2 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var AbstractCameraCapability = function() {
  function AbstractCameraCapability2(name, track) {
    this.name = name;
    this.track = track;
  }
  AbstractCameraCapability2.prototype.isSupported = function() {
    if (!this.track.getCapabilities) {
      return false;
    }
    return this.name in this.track.getCapabilities();
  };
  AbstractCameraCapability2.prototype.apply = function(value) {
    var constraint = {};
    constraint[this.name] = value;
    var constraints = { advanced: [constraint] };
    return this.track.applyConstraints(constraints);
  };
  AbstractCameraCapability2.prototype.value = function() {
    var settings = this.track.getSettings();
    if (this.name in settings) {
      var settingValue = settings[this.name];
      return settingValue;
    }
    return null;
  };
  return AbstractCameraCapability2;
}();
var AbstractRangeCameraCapability = function(_super) {
  __extends$1(AbstractRangeCameraCapability2, _super);
  function AbstractRangeCameraCapability2(name, track) {
    return _super.call(this, name, track) || this;
  }
  AbstractRangeCameraCapability2.prototype.min = function() {
    return this.getCapabilities().min;
  };
  AbstractRangeCameraCapability2.prototype.max = function() {
    return this.getCapabilities().max;
  };
  AbstractRangeCameraCapability2.prototype.step = function() {
    return this.getCapabilities().step;
  };
  AbstractRangeCameraCapability2.prototype.apply = function(value) {
    var constraint = {};
    constraint[this.name] = value;
    var constraints = { advanced: [constraint] };
    return this.track.applyConstraints(constraints);
  };
  AbstractRangeCameraCapability2.prototype.getCapabilities = function() {
    this.failIfNotSupported();
    var capabilities = this.track.getCapabilities();
    var capability = capabilities[this.name];
    return {
      min: capability.min,
      max: capability.max,
      step: capability.step
    };
  };
  AbstractRangeCameraCapability2.prototype.failIfNotSupported = function() {
    if (!this.isSupported()) {
      throw new Error("".concat(this.name, " capability not supported"));
    }
  };
  return AbstractRangeCameraCapability2;
}(AbstractCameraCapability);
var ZoomFeatureImpl = function(_super) {
  __extends$1(ZoomFeatureImpl2, _super);
  function ZoomFeatureImpl2(track) {
    return _super.call(this, "zoom", track) || this;
  }
  return ZoomFeatureImpl2;
}(AbstractRangeCameraCapability);
var TorchFeatureImpl = function(_super) {
  __extends$1(TorchFeatureImpl2, _super);
  function TorchFeatureImpl2(track) {
    return _super.call(this, "torch", track) || this;
  }
  return TorchFeatureImpl2;
}(AbstractCameraCapability);
var CameraCapabilitiesImpl = function() {
  function CameraCapabilitiesImpl2(track) {
    this.track = track;
  }
  CameraCapabilitiesImpl2.prototype.zoomFeature = function() {
    return new ZoomFeatureImpl(this.track);
  };
  CameraCapabilitiesImpl2.prototype.torchFeature = function() {
    return new TorchFeatureImpl(this.track);
  };
  return CameraCapabilitiesImpl2;
}();
var RenderedCameraImpl = function() {
  function RenderedCameraImpl2(parentElement, mediaStream, callbacks) {
    this.isClosed = false;
    this.parentElement = parentElement;
    this.mediaStream = mediaStream;
    this.callbacks = callbacks;
    this.surface = this.createVideoElement(this.parentElement.clientWidth);
    parentElement.append(this.surface);
  }
  RenderedCameraImpl2.prototype.createVideoElement = function(width) {
    var videoElement = document.createElement("video");
    videoElement.style.width = "".concat(width, "px");
    videoElement.style.display = "block";
    videoElement.muted = true;
    videoElement.setAttribute("muted", "true");
    videoElement.playsInline = true;
    return videoElement;
  };
  RenderedCameraImpl2.prototype.setupSurface = function() {
    var _this = this;
    this.surface.onabort = function() {
      throw "RenderedCameraImpl video surface onabort() called";
    };
    this.surface.onerror = function() {
      throw "RenderedCameraImpl video surface onerror() called";
    };
    var onVideoStart = function() {
      var videoWidth = _this.surface.clientWidth;
      var videoHeight = _this.surface.clientHeight;
      _this.callbacks.onRenderSurfaceReady(videoWidth, videoHeight);
      _this.surface.removeEventListener("playing", onVideoStart);
    };
    this.surface.addEventListener("playing", onVideoStart);
    this.surface.srcObject = this.mediaStream;
    this.surface.play();
  };
  RenderedCameraImpl2.create = function(parentElement, mediaStream, options, callbacks) {
    return __awaiter$2(this, void 0, void 0, function() {
      var renderedCamera, aspectRatioConstraint;
      return __generator$2(this, function(_a) {
        switch (_a.label) {
          case 0:
            renderedCamera = new RenderedCameraImpl2(parentElement, mediaStream, callbacks);
            if (!options.aspectRatio)
              return [3, 2];
            aspectRatioConstraint = {
              aspectRatio: options.aspectRatio
            };
            return [4, renderedCamera.getFirstTrackOrFail().applyConstraints(aspectRatioConstraint)];
          case 1:
            _a.sent();
            _a.label = 2;
          case 2:
            renderedCamera.setupSurface();
            return [2, renderedCamera];
        }
      });
    });
  };
  RenderedCameraImpl2.prototype.failIfClosed = function() {
    if (this.isClosed) {
      throw "The RenderedCamera has already been closed.";
    }
  };
  RenderedCameraImpl2.prototype.getFirstTrackOrFail = function() {
    this.failIfClosed();
    if (this.mediaStream.getVideoTracks().length === 0) {
      throw "No video tracks found";
    }
    return this.mediaStream.getVideoTracks()[0];
  };
  RenderedCameraImpl2.prototype.pause = function() {
    this.failIfClosed();
    this.surface.pause();
  };
  RenderedCameraImpl2.prototype.resume = function(onResumeCallback) {
    this.failIfClosed();
    var $this = this;
    var onVideoResume = function() {
      setTimeout(onResumeCallback, 200);
      $this.surface.removeEventListener("playing", onVideoResume);
    };
    this.surface.addEventListener("playing", onVideoResume);
    this.surface.play();
  };
  RenderedCameraImpl2.prototype.isPaused = function() {
    this.failIfClosed();
    return this.surface.paused;
  };
  RenderedCameraImpl2.prototype.getSurface = function() {
    this.failIfClosed();
    return this.surface;
  };
  RenderedCameraImpl2.prototype.getRunningTrackCapabilities = function() {
    return this.getFirstTrackOrFail().getCapabilities();
  };
  RenderedCameraImpl2.prototype.getRunningTrackSettings = function() {
    return this.getFirstTrackOrFail().getSettings();
  };
  RenderedCameraImpl2.prototype.applyVideoConstraints = function(constraints) {
    return __awaiter$2(this, void 0, void 0, function() {
      return __generator$2(this, function(_a) {
        if ("aspectRatio" in constraints) {
          throw "Changing 'aspectRatio' in run-time is not yet supported.";
        }
        return [2, this.getFirstTrackOrFail().applyConstraints(constraints)];
      });
    });
  };
  RenderedCameraImpl2.prototype.close = function() {
    if (this.isClosed) {
      return Promise.resolve();
    }
    var $this = this;
    return new Promise(function(resolve, _) {
      var tracks = $this.mediaStream.getVideoTracks();
      var tracksToClose = tracks.length;
      var tracksClosed = 0;
      $this.mediaStream.getVideoTracks().forEach(function(videoTrack) {
        $this.mediaStream.removeTrack(videoTrack);
        videoTrack.stop();
        ++tracksClosed;
        if (tracksClosed >= tracksToClose) {
          $this.isClosed = true;
          $this.parentElement.removeChild($this.surface);
          resolve();
        }
      });
    });
  };
  RenderedCameraImpl2.prototype.getCapabilities = function() {
    return new CameraCapabilitiesImpl(this.getFirstTrackOrFail());
  };
  return RenderedCameraImpl2;
}();
var CameraImpl = function() {
  function CameraImpl2(mediaStream) {
    this.mediaStream = mediaStream;
  }
  CameraImpl2.prototype.render = function(parentElement, options, callbacks) {
    return __awaiter$2(this, void 0, void 0, function() {
      return __generator$2(this, function(_a) {
        return [2, RenderedCameraImpl.create(parentElement, this.mediaStream, options, callbacks)];
      });
    });
  };
  CameraImpl2.create = function(videoConstraints) {
    return __awaiter$2(this, void 0, void 0, function() {
      var constraints, mediaStream;
      return __generator$2(this, function(_a) {
        switch (_a.label) {
          case 0:
            if (!navigator.mediaDevices) {
              throw "navigator.mediaDevices not supported";
            }
            constraints = {
              audio: false,
              video: videoConstraints
            };
            return [4, navigator.mediaDevices.getUserMedia(constraints)];
          case 1:
            mediaStream = _a.sent();
            return [2, new CameraImpl2(mediaStream)];
        }
      });
    });
  };
  return CameraImpl2;
}();
var __awaiter$1 = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator$1 = globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var CameraFactory = function() {
  function CameraFactory2() {
  }
  CameraFactory2.failIfNotSupported = function() {
    return __awaiter$1(this, void 0, void 0, function() {
      return __generator$1(this, function(_a) {
        if (!navigator.mediaDevices) {
          throw "navigator.mediaDevices not supported";
        }
        return [2, new CameraFactory2()];
      });
    });
  };
  CameraFactory2.prototype.create = function(videoConstraints) {
    return __awaiter$1(this, void 0, void 0, function() {
      return __generator$1(this, function(_a) {
        return [2, CameraImpl.create(videoConstraints)];
      });
    });
  };
  return CameraFactory2;
}();
var __awaiter = globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator = globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var CameraRetriever = function() {
  function CameraRetriever2() {
  }
  CameraRetriever2.retrieve = function() {
    if (navigator.mediaDevices) {
      return CameraRetriever2.getCamerasFromMediaDevices();
    }
    var mst = MediaStreamTrack;
    if (MediaStreamTrack && mst.getSources) {
      return CameraRetriever2.getCamerasFromMediaStreamTrack();
    }
    return CameraRetriever2.rejectWithError();
  };
  CameraRetriever2.rejectWithError = function() {
    var errorMessage = Html5QrcodeStrings.unableToQuerySupportedDevices();
    if (!CameraRetriever2.isHttpsOrLocalhost()) {
      errorMessage = Html5QrcodeStrings.insecureContextCameraQueryError();
    }
    return Promise.reject(errorMessage);
  };
  CameraRetriever2.isHttpsOrLocalhost = function() {
    if (location.protocol === "https:") {
      return true;
    }
    var host = location.host.split(":")[0];
    return host === "127.0.0.1" || host === "localhost";
  };
  CameraRetriever2.getCamerasFromMediaDevices = function() {
    return __awaiter(this, void 0, void 0, function() {
      var closeActiveStreams, mediaStream, devices, results, _i, devices_1, device;
      return __generator(this, function(_a) {
        switch (_a.label) {
          case 0:
            closeActiveStreams = function(stream) {
              var tracks = stream.getVideoTracks();
              for (var _i2 = 0, tracks_1 = tracks; _i2 < tracks_1.length; _i2++) {
                var track = tracks_1[_i2];
                track.enabled = false;
                track.stop();
                stream.removeTrack(track);
              }
            };
            return [4, navigator.mediaDevices.getUserMedia({ audio: false, video: true })];
          case 1:
            mediaStream = _a.sent();
            return [4, navigator.mediaDevices.enumerateDevices()];
          case 2:
            devices = _a.sent();
            results = [];
            for (_i = 0, devices_1 = devices; _i < devices_1.length; _i++) {
              device = devices_1[_i];
              if (device.kind === "videoinput") {
                results.push({
                  id: device.deviceId,
                  label: device.label
                });
              }
            }
            closeActiveStreams(mediaStream);
            return [2, results];
        }
      });
    });
  };
  CameraRetriever2.getCamerasFromMediaStreamTrack = function() {
    return new Promise(function(resolve, _) {
      var callback = function(sourceInfos) {
        var results = [];
        for (var _i = 0, sourceInfos_1 = sourceInfos; _i < sourceInfos_1.length; _i++) {
          var sourceInfo = sourceInfos_1[_i];
          if (sourceInfo.kind === "video") {
            results.push({
              id: sourceInfo.id,
              label: sourceInfo.label
            });
          }
        }
        resolve(results);
      };
      var mst = MediaStreamTrack;
      mst.getSources(callback);
    });
  };
  return CameraRetriever2;
}();
var Html5QrcodeScannerState;
(function(Html5QrcodeScannerState2) {
  Html5QrcodeScannerState2[Html5QrcodeScannerState2["UNKNOWN"] = 0] = "UNKNOWN";
  Html5QrcodeScannerState2[Html5QrcodeScannerState2["NOT_STARTED"] = 1] = "NOT_STARTED";
  Html5QrcodeScannerState2[Html5QrcodeScannerState2["SCANNING"] = 2] = "SCANNING";
  Html5QrcodeScannerState2[Html5QrcodeScannerState2["PAUSED"] = 3] = "PAUSED";
})(Html5QrcodeScannerState || (Html5QrcodeScannerState = {}));
var StateManagerImpl = function() {
  function StateManagerImpl2() {
    this.state = Html5QrcodeScannerState.NOT_STARTED;
    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;
  }
  StateManagerImpl2.prototype.directTransition = function(newState) {
    this.failIfTransitionOngoing();
    this.validateTransition(newState);
    this.state = newState;
  };
  StateManagerImpl2.prototype.startTransition = function(newState) {
    this.failIfTransitionOngoing();
    this.validateTransition(newState);
    this.onGoingTransactionNewState = newState;
    return this;
  };
  StateManagerImpl2.prototype.execute = function() {
    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {
      throw "Transaction is already cancelled, cannot execute().";
    }
    var tempNewState = this.onGoingTransactionNewState;
    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;
    this.directTransition(tempNewState);
  };
  StateManagerImpl2.prototype.cancel = function() {
    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {
      throw "Transaction is already cancelled, cannot cancel().";
    }
    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;
  };
  StateManagerImpl2.prototype.getState = function() {
    return this.state;
  };
  StateManagerImpl2.prototype.failIfTransitionOngoing = function() {
    if (this.onGoingTransactionNewState !== Html5QrcodeScannerState.UNKNOWN) {
      throw "Cannot transition to a new state, already under transition";
    }
  };
  StateManagerImpl2.prototype.validateTransition = function(newState) {
    switch (this.state) {
      case Html5QrcodeScannerState.UNKNOWN:
        throw "Transition from unknown is not allowed";
      case Html5QrcodeScannerState.NOT_STARTED:
        this.failIfNewStateIs(newState, [Html5QrcodeScannerState.PAUSED]);
        break;
      case Html5QrcodeScannerState.SCANNING:
        break;
      case Html5QrcodeScannerState.PAUSED:
        break;
    }
  };
  StateManagerImpl2.prototype.failIfNewStateIs = function(newState, disallowedStatesToTransition) {
    for (var _i = 0, disallowedStatesToTransition_1 = disallowedStatesToTransition; _i < disallowedStatesToTransition_1.length; _i++) {
      var disallowedState = disallowedStatesToTransition_1[_i];
      if (newState === disallowedState) {
        throw "Cannot transition from ".concat(this.state, " to ").concat(newState);
      }
    }
  };
  return StateManagerImpl2;
}();
var StateManagerProxy = function() {
  function StateManagerProxy2(stateManager) {
    this.stateManager = stateManager;
  }
  StateManagerProxy2.prototype.startTransition = function(newState) {
    return this.stateManager.startTransition(newState);
  };
  StateManagerProxy2.prototype.directTransition = function(newState) {
    this.stateManager.directTransition(newState);
  };
  StateManagerProxy2.prototype.getState = function() {
    return this.stateManager.getState();
  };
  StateManagerProxy2.prototype.canScanFile = function() {
    return this.stateManager.getState() === Html5QrcodeScannerState.NOT_STARTED;
  };
  StateManagerProxy2.prototype.isScanning = function() {
    return this.stateManager.getState() !== Html5QrcodeScannerState.NOT_STARTED;
  };
  StateManagerProxy2.prototype.isStrictlyScanning = function() {
    return this.stateManager.getState() === Html5QrcodeScannerState.SCANNING;
  };
  StateManagerProxy2.prototype.isPaused = function() {
    return this.stateManager.getState() === Html5QrcodeScannerState.PAUSED;
  };
  return StateManagerProxy2;
}();
var StateManagerFactory = function() {
  function StateManagerFactory2() {
  }
  StateManagerFactory2.create = function() {
    return new StateManagerProxy(new StateManagerImpl());
  };
  return StateManagerFactory2;
}();
var __extends = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2)
        if (Object.prototype.hasOwnProperty.call(b2, p))
          d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Constants = function(_super) {
  __extends(Constants2, _super);
  function Constants2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  Constants2.DEFAULT_WIDTH = 300;
  Constants2.DEFAULT_WIDTH_OFFSET = 2;
  Constants2.FILE_SCAN_MIN_HEIGHT = 300;
  Constants2.FILE_SCAN_HIDDEN_CANVAS_PADDING = 100;
  Constants2.MIN_QR_BOX_SIZE = 50;
  Constants2.SHADED_LEFT = 1;
  Constants2.SHADED_RIGHT = 2;
  Constants2.SHADED_TOP = 3;
  Constants2.SHADED_BOTTOM = 4;
  Constants2.SHADED_REGION_ELEMENT_ID = "qr-shaded-region";
  Constants2.VERBOSE = false;
  Constants2.BORDER_SHADER_DEFAULT_COLOR = "#ffffff";
  Constants2.BORDER_SHADER_MATCH_COLOR = "rgb(90, 193, 56)";
  return Constants2;
}(Html5QrcodeConstants);
var InternalHtml5QrcodeConfig = function() {
  function InternalHtml5QrcodeConfig2(config, logger) {
    this.logger = logger;
    this.fps = Constants.SCAN_DEFAULT_FPS;
    if (!config) {
      this.disableFlip = Constants.DEFAULT_DISABLE_FLIP;
    } else {
      if (config.fps) {
        this.fps = config.fps;
      }
      this.disableFlip = config.disableFlip === true;
      this.qrbox = config.qrbox;
      this.aspectRatio = config.aspectRatio;
      this.videoConstraints = config.videoConstraints;
    }
  }
  InternalHtml5QrcodeConfig2.prototype.isMediaStreamConstraintsValid = function() {
    if (!this.videoConstraints) {
      this.logger.logError("Empty videoConstraints", true);
      return false;
    }
    return VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints, this.logger);
  };
  InternalHtml5QrcodeConfig2.prototype.isShadedBoxEnabled = function() {
    return !isNullOrUndefined(this.qrbox);
  };
  InternalHtml5QrcodeConfig2.create = function(config, logger) {
    return new InternalHtml5QrcodeConfig2(config, logger);
  };
  return InternalHtml5QrcodeConfig2;
}();
var Html5Qrcode = function() {
  function Html5Qrcode2(elementId, configOrVerbosityFlag) {
    this.element = null;
    this.canvasElement = null;
    this.scannerPausedUiElement = null;
    this.hasBorderShaders = null;
    this.borderShaders = null;
    this.qrMatch = null;
    this.renderedCamera = null;
    this.qrRegion = null;
    this.context = null;
    this.lastScanImageFile = null;
    this.isScanning = false;
    if (!document.getElementById(elementId)) {
      throw "HTML Element with id=".concat(elementId, " not found");
    }
    this.elementId = elementId;
    this.verbose = false;
    var configObject;
    if (typeof configOrVerbosityFlag == "boolean") {
      this.verbose = configOrVerbosityFlag === true;
    } else if (configOrVerbosityFlag) {
      configObject = configOrVerbosityFlag;
      this.verbose = configObject.verbose === true;
      configObject.experimentalFeatures;
    }
    this.logger = new BaseLoggger(this.verbose);
    this.qrcode = new Html5QrcodeShim(this.getSupportedFormats(configOrVerbosityFlag), this.getUseBarCodeDetectorIfSupported(configObject), this.verbose, this.logger);
    this.foreverScanTimeout;
    this.shouldScan = true;
    this.stateManagerProxy = StateManagerFactory.create();
  }
  Html5Qrcode2.prototype.start = function(cameraIdOrConfig, configuration, qrCodeSuccessCallback, qrCodeErrorCallback) {
    var _this = this;
    if (!cameraIdOrConfig) {
      throw "cameraIdOrConfig is required";
    }
    if (!qrCodeSuccessCallback || typeof qrCodeSuccessCallback != "function") {
      throw "qrCodeSuccessCallback is required and should be a function.";
    }
    var qrCodeErrorCallbackInternal;
    if (qrCodeErrorCallback) {
      qrCodeErrorCallbackInternal = qrCodeErrorCallback;
    } else {
      qrCodeErrorCallbackInternal = this.verbose ? this.logger.log : function() {
      };
    }
    var internalConfig = InternalHtml5QrcodeConfig.create(configuration, this.logger);
    this.clearElement();
    var videoConstraintsAvailableAndValid = false;
    if (internalConfig.videoConstraints) {
      if (!internalConfig.isMediaStreamConstraintsValid()) {
        this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'", true);
      } else {
        videoConstraintsAvailableAndValid = true;
      }
    }
    var areVideoConstraintsEnabled = videoConstraintsAvailableAndValid;
    var element = document.getElementById(this.elementId);
    element.clientWidth ? element.clientWidth : Constants.DEFAULT_WIDTH;
    element.style.position = "relative";
    this.shouldScan = true;
    this.element = element;
    var $this = this;
    var toScanningStateChangeTransaction = this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);
    return new Promise(function(resolve, reject) {
      var videoConstraints = areVideoConstraintsEnabled ? internalConfig.videoConstraints : $this.createVideoConstraints(cameraIdOrConfig);
      if (!videoConstraints) {
        toScanningStateChangeTransaction.cancel();
        reject("videoConstraints should be defined");
        return;
      }
      var cameraRenderingOptions = {};
      if (!areVideoConstraintsEnabled || internalConfig.aspectRatio) {
        cameraRenderingOptions.aspectRatio = internalConfig.aspectRatio;
      }
      var renderingCallbacks = {
        onRenderSurfaceReady: function(viewfinderWidth, viewfinderHeight) {
          $this.setupUi(viewfinderWidth, viewfinderHeight, internalConfig);
          $this.isScanning = true;
          $this.foreverScan(internalConfig, qrCodeSuccessCallback, qrCodeErrorCallbackInternal);
        }
      };
      CameraFactory.failIfNotSupported().then(function(factory) {
        factory.create(videoConstraints).then(function(camera) {
          return camera.render(_this.element, cameraRenderingOptions, renderingCallbacks).then(function(renderedCamera) {
            $this.renderedCamera = renderedCamera;
            toScanningStateChangeTransaction.execute();
            resolve(null);
          }).catch(function(error2) {
            toScanningStateChangeTransaction.cancel();
            reject(error2);
          });
        }).catch(function(error2) {
          toScanningStateChangeTransaction.cancel();
          reject(Html5QrcodeStrings.errorGettingUserMedia(error2));
        });
      }).catch(function(_) {
        toScanningStateChangeTransaction.cancel();
        reject(Html5QrcodeStrings.cameraStreamingNotSupported());
      });
    });
  };
  Html5Qrcode2.prototype.pause = function(shouldPauseVideo) {
    if (!this.stateManagerProxy.isStrictlyScanning()) {
      throw "Cannot pause, scanner is not scanning.";
    }
    this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED);
    this.showPausedState();
    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {
      shouldPauseVideo = false;
    }
    if (shouldPauseVideo && this.renderedCamera) {
      this.renderedCamera.pause();
    }
  };
  Html5Qrcode2.prototype.resume = function() {
    if (!this.stateManagerProxy.isPaused()) {
      throw "Cannot result, scanner is not paused.";
    }
    if (!this.renderedCamera) {
      throw "renderedCamera doesn't exist while trying resume()";
    }
    var $this = this;
    var transitionToScanning = function() {
      $this.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING);
      $this.hidePausedState();
    };
    if (!this.renderedCamera.isPaused()) {
      transitionToScanning();
      return;
    }
    this.renderedCamera.resume(function() {
      transitionToScanning();
    });
  };
  Html5Qrcode2.prototype.getState = function() {
    return this.stateManagerProxy.getState();
  };
  Html5Qrcode2.prototype.stop = function() {
    var _this = this;
    if (!this.stateManagerProxy.isScanning()) {
      throw "Cannot stop, scanner is not running or paused.";
    }
    var toStoppedStateTransaction = this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);
    this.shouldScan = false;
    if (this.foreverScanTimeout) {
      clearTimeout(this.foreverScanTimeout);
    }
    var removeQrRegion = function() {
      if (!_this.element) {
        return;
      }
      var childElement = document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);
      if (childElement) {
        _this.element.removeChild(childElement);
      }
    };
    var $this = this;
    return this.renderedCamera.close().then(function() {
      $this.renderedCamera = null;
      if ($this.element) {
        $this.element.removeChild($this.canvasElement);
        $this.canvasElement = null;
      }
      removeQrRegion();
      if ($this.qrRegion) {
        $this.qrRegion = null;
      }
      if ($this.context) {
        $this.context = null;
      }
      toStoppedStateTransaction.execute();
      $this.hidePausedState();
      $this.isScanning = false;
      return Promise.resolve();
    });
  };
  Html5Qrcode2.prototype.scanFile = function(imageFile, showImage) {
    return this.scanFileV2(imageFile, showImage).then(function(html5qrcodeResult) {
      return html5qrcodeResult.decodedText;
    });
  };
  Html5Qrcode2.prototype.scanFileV2 = function(imageFile, showImage) {
    var _this = this;
    if (!imageFile || !(imageFile instanceof File)) {
      throw "imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";
    }
    if (isNullOrUndefined(showImage)) {
      showImage = true;
    }
    if (!this.stateManagerProxy.canScanFile()) {
      throw "Cannot start file scan - ongoing camera scan";
    }
    return new Promise(function(resolve, reject) {
      _this.possiblyCloseLastScanImageFile();
      _this.clearElement();
      _this.lastScanImageFile = URL.createObjectURL(imageFile);
      var inputImage = new Image();
      inputImage.onload = function() {
        var imageWidth = inputImage.width;
        var imageHeight = inputImage.height;
        var element = document.getElementById(_this.elementId);
        var containerWidth = element.clientWidth ? element.clientWidth : Constants.DEFAULT_WIDTH;
        var containerHeight = Math.max(element.clientHeight ? element.clientHeight : imageHeight, Constants.FILE_SCAN_MIN_HEIGHT);
        var config = _this.computeCanvasDrawConfig(imageWidth, imageHeight, containerWidth, containerHeight);
        if (showImage) {
          var visibleCanvas = _this.createCanvasElement(containerWidth, containerHeight, "qr-canvas-visible");
          visibleCanvas.style.display = "inline-block";
          element.appendChild(visibleCanvas);
          var context_1 = visibleCanvas.getContext("2d");
          if (!context_1) {
            throw "Unable to get 2d context from canvas";
          }
          context_1.canvas.width = containerWidth;
          context_1.canvas.height = containerHeight;
          context_1.drawImage(inputImage, 0, 0, imageWidth, imageHeight, config.x, config.y, config.width, config.height);
        }
        var padding = Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING;
        var hiddenImageWidth = Math.max(inputImage.width, config.width);
        var hiddenImageHeight = Math.max(inputImage.height, config.height);
        var hiddenCanvasWidth = hiddenImageWidth + 2 * padding;
        var hiddenCanvasHeight = hiddenImageHeight + 2 * padding;
        var hiddenCanvas = _this.createCanvasElement(hiddenCanvasWidth, hiddenCanvasHeight);
        element.appendChild(hiddenCanvas);
        var context = hiddenCanvas.getContext("2d");
        if (!context) {
          throw "Unable to get 2d context from canvas";
        }
        context.canvas.width = hiddenCanvasWidth;
        context.canvas.height = hiddenCanvasHeight;
        context.drawImage(inputImage, 0, 0, imageWidth, imageHeight, padding, padding, hiddenImageWidth, hiddenImageHeight);
        try {
          _this.qrcode.decodeRobustlyAsync(hiddenCanvas).then(function(result) {
            resolve(Html5QrcodeResultFactory.createFromQrcodeResult(result));
          }).catch(reject);
        } catch (exception) {
          reject("QR code parse error, error = ".concat(exception));
        }
      };
      inputImage.onerror = reject;
      inputImage.onabort = reject;
      inputImage.onstalled = reject;
      inputImage.onsuspend = reject;
      inputImage.src = URL.createObjectURL(imageFile);
    });
  };
  Html5Qrcode2.prototype.clear = function() {
    this.clearElement();
  };
  Html5Qrcode2.getCameras = function() {
    return CameraRetriever.retrieve();
  };
  Html5Qrcode2.prototype.getRunningTrackCapabilities = function() {
    return this.getRenderedCameraOrFail().getRunningTrackCapabilities();
  };
  Html5Qrcode2.prototype.getRunningTrackSettings = function() {
    return this.getRenderedCameraOrFail().getRunningTrackSettings();
  };
  Html5Qrcode2.prototype.getRunningTrackCameraCapabilities = function() {
    return this.getRenderedCameraOrFail().getCapabilities();
  };
  Html5Qrcode2.prototype.applyVideoConstraints = function(videoConstaints) {
    if (!videoConstaints) {
      throw "videoConstaints is required argument.";
    } else if (!VideoConstraintsUtil.isMediaStreamConstraintsValid(videoConstaints, this.logger)) {
      throw "invalid videoConstaints passed, check logs for more details";
    }
    return this.getRenderedCameraOrFail().applyVideoConstraints(videoConstaints);
  };
  Html5Qrcode2.prototype.getRenderedCameraOrFail = function() {
    if (this.renderedCamera == null) {
      throw "Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";
    }
    return this.renderedCamera;
  };
  Html5Qrcode2.prototype.getSupportedFormats = function(configOrVerbosityFlag) {
    var allFormats = [
      Html5QrcodeSupportedFormats.QR_CODE,
      Html5QrcodeSupportedFormats.AZTEC,
      Html5QrcodeSupportedFormats.CODABAR,
      Html5QrcodeSupportedFormats.CODE_39,
      Html5QrcodeSupportedFormats.CODE_93,
      Html5QrcodeSupportedFormats.CODE_128,
      Html5QrcodeSupportedFormats.DATA_MATRIX,
      Html5QrcodeSupportedFormats.MAXICODE,
      Html5QrcodeSupportedFormats.ITF,
      Html5QrcodeSupportedFormats.EAN_13,
      Html5QrcodeSupportedFormats.EAN_8,
      Html5QrcodeSupportedFormats.PDF_417,
      Html5QrcodeSupportedFormats.RSS_14,
      Html5QrcodeSupportedFormats.RSS_EXPANDED,
      Html5QrcodeSupportedFormats.UPC_A,
      Html5QrcodeSupportedFormats.UPC_E,
      Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION
    ];
    if (!configOrVerbosityFlag || typeof configOrVerbosityFlag == "boolean") {
      return allFormats;
    }
    if (!configOrVerbosityFlag.formatsToSupport) {
      return allFormats;
    }
    if (!Array.isArray(configOrVerbosityFlag.formatsToSupport)) {
      throw "configOrVerbosityFlag.formatsToSupport should be undefined or an array.";
    }
    if (configOrVerbosityFlag.formatsToSupport.length === 0) {
      throw "Atleast 1 formatsToSupport is needed.";
    }
    var supportedFormats = [];
    for (var _i = 0, _a = configOrVerbosityFlag.formatsToSupport; _i < _a.length; _i++) {
      var format = _a[_i];
      if (isValidHtml5QrcodeSupportedFormats(format)) {
        supportedFormats.push(format);
      } else {
        this.logger.warn("Invalid format: ".concat(format, " passed in config, ignoring."));
      }
    }
    if (supportedFormats.length === 0) {
      throw "None of formatsToSupport match supported values.";
    }
    return supportedFormats;
  };
  Html5Qrcode2.prototype.getUseBarCodeDetectorIfSupported = function(config) {
    if (isNullOrUndefined(config)) {
      return true;
    }
    if (!isNullOrUndefined(config.useBarCodeDetectorIfSupported)) {
      return config.useBarCodeDetectorIfSupported !== false;
    }
    if (isNullOrUndefined(config.experimentalFeatures)) {
      return true;
    }
    var experimentalFeatures = config.experimentalFeatures;
    if (isNullOrUndefined(experimentalFeatures.useBarCodeDetectorIfSupported)) {
      return true;
    }
    return experimentalFeatures.useBarCodeDetectorIfSupported !== false;
  };
  Html5Qrcode2.prototype.validateQrboxSize = function(viewfinderWidth, viewfinderHeight, internalConfig) {
    var _this = this;
    var qrboxSize = internalConfig.qrbox;
    this.validateQrboxConfig(qrboxSize);
    var qrDimensions = this.toQrdimensions(viewfinderWidth, viewfinderHeight, qrboxSize);
    var validateMinSize = function(size) {
      if (size < Constants.MIN_QR_BOX_SIZE) {
        throw "minimum size of 'config.qrbox' dimension value is" + " ".concat(Constants.MIN_QR_BOX_SIZE, "px.");
      }
    };
    var correctWidthBasedOnRootElementSize = function(configWidth) {
      if (configWidth > viewfinderWidth) {
        _this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element.");
        configWidth = viewfinderWidth;
      }
      return configWidth;
    };
    validateMinSize(qrDimensions.width);
    validateMinSize(qrDimensions.height);
    qrDimensions.width = correctWidthBasedOnRootElementSize(qrDimensions.width);
  };
  Html5Qrcode2.prototype.validateQrboxConfig = function(qrboxSize) {
    if (typeof qrboxSize === "number") {
      return;
    }
    if (typeof qrboxSize === "function") {
      return;
    }
    if (qrboxSize.width === void 0 || qrboxSize.height === void 0) {
      throw "Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set.";
    }
  };
  Html5Qrcode2.prototype.toQrdimensions = function(viewfinderWidth, viewfinderHeight, qrboxSize) {
    if (typeof qrboxSize === "number") {
      return { width: qrboxSize, height: qrboxSize };
    } else if (typeof qrboxSize === "function") {
      try {
        return qrboxSize(viewfinderWidth, viewfinderHeight);
      } catch (error2) {
        throw new Error("qrbox config was passed as a function but it failed with unknown error" + error2);
      }
    }
    return qrboxSize;
  };
  Html5Qrcode2.prototype.setupUi = function(viewfinderWidth, viewfinderHeight, internalConfig) {
    if (internalConfig.isShadedBoxEnabled()) {
      this.validateQrboxSize(viewfinderWidth, viewfinderHeight, internalConfig);
    }
    var qrboxSize = isNullOrUndefined(internalConfig.qrbox) ? { width: viewfinderWidth, height: viewfinderHeight } : internalConfig.qrbox;
    this.validateQrboxConfig(qrboxSize);
    var qrDimensions = this.toQrdimensions(viewfinderWidth, viewfinderHeight, qrboxSize);
    if (qrDimensions.height > viewfinderHeight) {
      this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");
    }
    var shouldShadingBeApplied = internalConfig.isShadedBoxEnabled() && qrDimensions.height <= viewfinderHeight;
    var defaultQrRegion = {
      x: 0,
      y: 0,
      width: viewfinderWidth,
      height: viewfinderHeight
    };
    var qrRegion = shouldShadingBeApplied ? this.getShadedRegionBounds(viewfinderWidth, viewfinderHeight, qrDimensions) : defaultQrRegion;
    var canvasElement = this.createCanvasElement(qrRegion.width, qrRegion.height);
    var contextAttributes = { willReadFrequently: true };
    var context = canvasElement.getContext("2d", contextAttributes);
    context.canvas.width = qrRegion.width;
    context.canvas.height = qrRegion.height;
    this.element.append(canvasElement);
    if (shouldShadingBeApplied) {
      this.possiblyInsertShadingElement(this.element, viewfinderWidth, viewfinderHeight, qrDimensions);
    }
    this.createScannerPausedUiElement(this.element);
    this.qrRegion = qrRegion;
    this.context = context;
    this.canvasElement = canvasElement;
  };
  Html5Qrcode2.prototype.createScannerPausedUiElement = function(rootElement) {
    var scannerPausedUiElement = document.createElement("div");
    scannerPausedUiElement.innerText = Html5QrcodeStrings.scannerPaused();
    scannerPausedUiElement.style.display = "none";
    scannerPausedUiElement.style.position = "absolute";
    scannerPausedUiElement.style.top = "0px";
    scannerPausedUiElement.style.zIndex = "1";
    scannerPausedUiElement.style.background = "rgba(9, 9, 9, 0.46)";
    scannerPausedUiElement.style.color = "#FFECEC";
    scannerPausedUiElement.style.textAlign = "center";
    scannerPausedUiElement.style.width = "100%";
    rootElement.appendChild(scannerPausedUiElement);
    this.scannerPausedUiElement = scannerPausedUiElement;
  };
  Html5Qrcode2.prototype.scanContext = function(qrCodeSuccessCallback, qrCodeErrorCallback) {
    var _this = this;
    if (this.stateManagerProxy.isPaused()) {
      return Promise.resolve(false);
    }
    return this.qrcode.decodeAsync(this.canvasElement).then(function(result) {
      qrCodeSuccessCallback(result.text, Html5QrcodeResultFactory.createFromQrcodeResult(result));
      _this.possiblyUpdateShaders(true);
      return true;
    }).catch(function(error2) {
      _this.possiblyUpdateShaders(false);
      var errorMessage = Html5QrcodeStrings.codeParseError(error2);
      qrCodeErrorCallback(errorMessage, Html5QrcodeErrorFactory.createFrom(errorMessage));
      return false;
    });
  };
  Html5Qrcode2.prototype.foreverScan = function(internalConfig, qrCodeSuccessCallback, qrCodeErrorCallback) {
    var _this = this;
    if (!this.shouldScan) {
      return;
    }
    if (!this.renderedCamera) {
      return;
    }
    var videoElement = this.renderedCamera.getSurface();
    var widthRatio = videoElement.videoWidth / videoElement.clientWidth;
    var heightRatio = videoElement.videoHeight / videoElement.clientHeight;
    if (!this.qrRegion) {
      throw "qrRegion undefined when localMediaStream is ready.";
    }
    var sWidthOffset = this.qrRegion.width * widthRatio;
    var sHeightOffset = this.qrRegion.height * heightRatio;
    var sxOffset = this.qrRegion.x * widthRatio;
    var syOffset = this.qrRegion.y * heightRatio;
    this.context.drawImage(videoElement, sxOffset, syOffset, sWidthOffset, sHeightOffset, 0, 0, this.qrRegion.width, this.qrRegion.height);
    var triggerNextScan = function() {
      _this.foreverScanTimeout = setTimeout(function() {
        _this.foreverScan(internalConfig, qrCodeSuccessCallback, qrCodeErrorCallback);
      }, _this.getTimeoutFps(internalConfig.fps));
    };
    this.scanContext(qrCodeSuccessCallback, qrCodeErrorCallback).then(function(isSuccessfull) {
      if (!isSuccessfull && internalConfig.disableFlip !== true) {
        _this.context.translate(_this.context.canvas.width, 0);
        _this.context.scale(-1, 1);
        _this.scanContext(qrCodeSuccessCallback, qrCodeErrorCallback).finally(function() {
          triggerNextScan();
        });
      } else {
        triggerNextScan();
      }
    }).catch(function(error2) {
      _this.logger.logError("Error happend while scanning context", error2);
      triggerNextScan();
    });
  };
  Html5Qrcode2.prototype.createVideoConstraints = function(cameraIdOrConfig) {
    if (typeof cameraIdOrConfig == "string") {
      return { deviceId: { exact: cameraIdOrConfig } };
    } else if (typeof cameraIdOrConfig == "object") {
      var facingModeKey = "facingMode";
      var deviceIdKey = "deviceId";
      var allowedFacingModeValues_1 = { "user": true, "environment": true };
      var exactKey = "exact";
      var isValidFacingModeValue = function(value) {
        if (value in allowedFacingModeValues_1) {
          return true;
        } else {
          throw "config has invalid 'facingMode' value = " + "'".concat(value, "'");
        }
      };
      var keys = Object.keys(cameraIdOrConfig);
      if (keys.length !== 1) {
        throw "'cameraIdOrConfig' object should have exactly 1 key," + " if passed as an object, found ".concat(keys.length, " keys");
      }
      var key = Object.keys(cameraIdOrConfig)[0];
      if (key !== facingModeKey && key !== deviceIdKey) {
        throw "Only '".concat(facingModeKey, "' and '").concat(deviceIdKey, "' ") + " are supported for 'cameraIdOrConfig'";
      }
      if (key === facingModeKey) {
        var facingMode = cameraIdOrConfig.facingMode;
        if (typeof facingMode == "string") {
          if (isValidFacingModeValue(facingMode)) {
            return { facingMode };
          }
        } else if (typeof facingMode == "object") {
          if (exactKey in facingMode) {
            if (isValidFacingModeValue(facingMode["".concat(exactKey)])) {
              return {
                facingMode: {
                  exact: facingMode["".concat(exactKey)]
                }
              };
            }
          } else {
            throw "'facingMode' should be string or object with" + " ".concat(exactKey, " as key.");
          }
        } else {
          var type_1 = typeof facingMode;
          throw "Invalid type of 'facingMode' = ".concat(type_1);
        }
      } else {
        var deviceId = cameraIdOrConfig.deviceId;
        if (typeof deviceId == "string") {
          return { deviceId };
        } else if (typeof deviceId == "object") {
          if (exactKey in deviceId) {
            return {
              deviceId: { exact: deviceId["".concat(exactKey)] }
            };
          } else {
            throw "'deviceId' should be string or object with" + " ".concat(exactKey, " as key.");
          }
        } else {
          var type_2 = typeof deviceId;
          throw "Invalid type of 'deviceId' = ".concat(type_2);
        }
      }
    }
    var type = typeof cameraIdOrConfig;
    throw "Invalid type of 'cameraIdOrConfig' = ".concat(type);
  };
  Html5Qrcode2.prototype.computeCanvasDrawConfig = function(imageWidth, imageHeight, containerWidth, containerHeight) {
    if (imageWidth <= containerWidth && imageHeight <= containerHeight) {
      var xoffset = (containerWidth - imageWidth) / 2;
      var yoffset = (containerHeight - imageHeight) / 2;
      return {
        x: xoffset,
        y: yoffset,
        width: imageWidth,
        height: imageHeight
      };
    } else {
      var formerImageWidth = imageWidth;
      var formerImageHeight = imageHeight;
      if (imageWidth > containerWidth) {
        imageHeight = containerWidth / imageWidth * imageHeight;
        imageWidth = containerWidth;
      }
      if (imageHeight > containerHeight) {
        imageWidth = containerHeight / imageHeight * imageWidth;
        imageHeight = containerHeight;
      }
      this.logger.log("Image downsampled from " + "".concat(formerImageWidth, "X").concat(formerImageHeight) + " to ".concat(imageWidth, "X").concat(imageHeight, "."));
      return this.computeCanvasDrawConfig(imageWidth, imageHeight, containerWidth, containerHeight);
    }
  };
  Html5Qrcode2.prototype.clearElement = function() {
    if (this.stateManagerProxy.isScanning()) {
      throw "Cannot clear while scan is ongoing, close it first.";
    }
    var element = document.getElementById(this.elementId);
    if (element) {
      element.innerHTML = "";
    }
  };
  Html5Qrcode2.prototype.possiblyUpdateShaders = function(qrMatch) {
    if (this.qrMatch === qrMatch) {
      return;
    }
    if (this.hasBorderShaders && this.borderShaders && this.borderShaders.length) {
      this.borderShaders.forEach(function(shader) {
        shader.style.backgroundColor = qrMatch ? Constants.BORDER_SHADER_MATCH_COLOR : Constants.BORDER_SHADER_DEFAULT_COLOR;
      });
    }
    this.qrMatch = qrMatch;
  };
  Html5Qrcode2.prototype.possiblyCloseLastScanImageFile = function() {
    if (this.lastScanImageFile) {
      URL.revokeObjectURL(this.lastScanImageFile);
      this.lastScanImageFile = null;
    }
  };
  Html5Qrcode2.prototype.createCanvasElement = function(width, height, customId) {
    var canvasWidth = width;
    var canvasHeight = height;
    var canvasElement = document.createElement("canvas");
    canvasElement.style.width = "".concat(canvasWidth, "px");
    canvasElement.style.height = "".concat(canvasHeight, "px");
    canvasElement.style.display = "none";
    canvasElement.id = isNullOrUndefined(customId) ? "qr-canvas" : customId;
    return canvasElement;
  };
  Html5Qrcode2.prototype.getShadedRegionBounds = function(width, height, qrboxSize) {
    if (qrboxSize.width > width || qrboxSize.height > height) {
      throw "'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";
    }
    return {
      x: (width - qrboxSize.width) / 2,
      y: (height - qrboxSize.height) / 2,
      width: qrboxSize.width,
      height: qrboxSize.height
    };
  };
  Html5Qrcode2.prototype.possiblyInsertShadingElement = function(element, width, height, qrboxSize) {
    if (width - qrboxSize.width < 1 || height - qrboxSize.height < 1) {
      return;
    }
    var shadingElement = document.createElement("div");
    shadingElement.style.position = "absolute";
    var rightLeftBorderSize = (width - qrboxSize.width) / 2;
    var topBottomBorderSize = (height - qrboxSize.height) / 2;
    shadingElement.style.borderLeft = "".concat(rightLeftBorderSize, "px solid rgba(0, 0, 0, 0.48)");
    shadingElement.style.borderRight = "".concat(rightLeftBorderSize, "px solid rgba(0, 0, 0, 0.48)");
    shadingElement.style.borderTop = "".concat(topBottomBorderSize, "px solid rgba(0, 0, 0, 0.48)");
    shadingElement.style.borderBottom = "".concat(topBottomBorderSize, "px solid rgba(0, 0, 0, 0.48)");
    shadingElement.style.boxSizing = "border-box";
    shadingElement.style.top = "0px";
    shadingElement.style.bottom = "0px";
    shadingElement.style.left = "0px";
    shadingElement.style.right = "0px";
    shadingElement.id = "".concat(Constants.SHADED_REGION_ELEMENT_ID);
    if (width - qrboxSize.width < 11 || height - qrboxSize.height < 11) {
      this.hasBorderShaders = false;
    } else {
      var smallSize = 5;
      var largeSize = 40;
      this.insertShaderBorders(shadingElement, largeSize, smallSize, -smallSize, null, 0, true);
      this.insertShaderBorders(shadingElement, largeSize, smallSize, -smallSize, null, 0, false);
      this.insertShaderBorders(shadingElement, largeSize, smallSize, null, -smallSize, 0, true);
      this.insertShaderBorders(shadingElement, largeSize, smallSize, null, -smallSize, 0, false);
      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, -smallSize, null, -smallSize, true);
      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, null, -smallSize, -smallSize, true);
      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, -smallSize, null, -smallSize, false);
      this.insertShaderBorders(shadingElement, smallSize, largeSize + smallSize, null, -smallSize, -smallSize, false);
      this.hasBorderShaders = true;
    }
    element.append(shadingElement);
  };
  Html5Qrcode2.prototype.insertShaderBorders = function(shaderElem, width, height, top, bottom, side, isLeft) {
    var elem = document.createElement("div");
    elem.style.position = "absolute";
    elem.style.backgroundColor = Constants.BORDER_SHADER_DEFAULT_COLOR;
    elem.style.width = "".concat(width, "px");
    elem.style.height = "".concat(height, "px");
    if (top !== null) {
      elem.style.top = "".concat(top, "px");
    }
    if (bottom !== null) {
      elem.style.bottom = "".concat(bottom, "px");
    }
    if (isLeft) {
      elem.style.left = "".concat(side, "px");
    } else {
      elem.style.right = "".concat(side, "px");
    }
    if (!this.borderShaders) {
      this.borderShaders = [];
    }
    this.borderShaders.push(elem);
    shaderElem.appendChild(elem);
  };
  Html5Qrcode2.prototype.showPausedState = function() {
    if (!this.scannerPausedUiElement) {
      throw "[internal error] scanner paused UI element not found";
    }
    this.scannerPausedUiElement.style.display = "block";
  };
  Html5Qrcode2.prototype.hidePausedState = function() {
    if (!this.scannerPausedUiElement) {
      throw "[internal error] scanner paused UI element not found";
    }
    this.scannerPausedUiElement.style.display = "none";
  };
  Html5Qrcode2.prototype.getTimeoutFps = function(fps) {
    return 1e3 / fps;
  };
  return Html5Qrcode2;
}();
globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
globalThis && globalThis.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
globalThis && globalThis.__generator || function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var Html5QrcodeScannerStatus;
(function(Html5QrcodeScannerStatus2) {
  Html5QrcodeScannerStatus2[Html5QrcodeScannerStatus2["STATUS_DEFAULT"] = 0] = "STATUS_DEFAULT";
  Html5QrcodeScannerStatus2[Html5QrcodeScannerStatus2["STATUS_SUCCESS"] = 1] = "STATUS_SUCCESS";
  Html5QrcodeScannerStatus2[Html5QrcodeScannerStatus2["STATUS_WARNING"] = 2] = "STATUS_WARNING";
  Html5QrcodeScannerStatus2[Html5QrcodeScannerStatus2["STATUS_REQUESTING_PERMISSION"] = 3] = "STATUS_REQUESTING_PERMISSION";
})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));
var BarcodeScanner_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$2 = {
  emits: ["cardSavedSuccessfully"],
  props: ["stopCamera"],
  data() {
    return {
      qrCodeScanner: null,
      qrCodeText: "",
      codeFormat: "",
      cardName: "",
      $q: useQuasar(),
      color: ""
    };
  },
  async mounted() {
    let permissions = cordova.plugins.permissions;
    await permissions.requestPermission(
      permissions.CAMERA,
      this.success,
      this.error
    );
  },
  methods: {
    async addCard() {
      try {
        const data = {
          code: this.qrCodeText,
          format: this.codeFormat,
          name: this.cardName,
          color: this.color
        };
        const res = await this.$api.post("/cards", data);
        if (res.data.status === "success") {
          this.$emit("cardSavedSuccessfully");
          this.qrCodeScanner.stop(true);
        }
      } catch (err) {
        this.$q.notify({
          type: "negative",
          position: "top",
          message: "Something went wrong!",
          color: "negative",
          timeout: "2500"
        });
      }
    },
    onScanSuccess(decodedText, decodedResult) {
      this.qrCodeText = decodedText;
      this.codeFormat = decodedResult.result.format.formatName;
      this.qrCodeScanner.pause(true);
    },
    onScanFailure(error2) {
      console.warn(`Code scan error = ${error2}`);
    },
    error() {
      console.warn("Camera permission is not turned on");
    },
    success(status) {
      if (!status.hasPermission)
        error();
      this.qrCodeScanner = new Html5Qrcode("qr-code-reader");
      this.qrCodeScanner.start(
        { facingMode: "environment" },
        { qrbox: 250 },
        this.onScanSuccess
      );
    }
  },
  watch: {
    stopCamera(after, before) {
      if (after)
        this.qrCodeScanner.stop(true);
    }
  }
};
const _withScopeId$1 = (n) => (pushScopeId("data-v-353aa099"), n = n(), popScopeId(), n);
const _hoisted_1$2 = /* @__PURE__ */ _withScopeId$1(() => /* @__PURE__ */ createBaseVNode("p", null, "Scan barcode or QR code", -1));
const _hoisted_2$1 = /* @__PURE__ */ _withScopeId$1(() => /* @__PURE__ */ createBaseVNode("div", { id: "qr-code-reader" }, null, -1));
const _hoisted_3$1 = { class: "save-card__container" };
function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [
    _hoisted_1$2,
    _hoisted_2$1,
    createBaseVNode("p", null, "Scanned code " + toDisplayString($data.qrCodeText), 1),
    createVNode(QInput, {
      type: "text",
      placeholder: "Card name",
      modelValue: $data.cardName,
      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $data.cardName = $event)
    }, null, 8, ["modelValue"]),
    createVNode(QInput, {
      filled: "",
      placeholder: "Pick a color for your card",
      modelValue: $data.color,
      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $data.color = $event),
      class: "my-input"
    }, {
      append: withCtx(() => [
        createVNode(QIcon, {
          name: "colorize",
          class: "cursor-pointer"
        }, {
          default: withCtx(() => [
            createVNode(QPopupProxy, {
              cover: "",
              "transition-show": "scale",
              "transition-hide": "scale"
            }, {
              default: withCtx(() => [
                createVNode(QColor, {
                  "no-footer": "",
                  modelValue: $data.color,
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $data.color = $event)
                }, null, 8, ["modelValue"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    createBaseVNode("div", _hoisted_3$1, [
      createVNode(QBtn, {
        class: "save-btn",
        onClick: $options.addCard,
        label: "Save card"
      }, null, 8, ["onClick"])
    ])
  ]);
}
var BarcodeScanner = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["render", _sfc_render$2], ["__scopeId", "data-v-353aa099"], ["__file", "BarcodeScanner.vue"]]);
var FidelityCard_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main$1 = {
  name: "FidelityCard",
  props: ["cardInfo"]
};
const _hoisted_1$1 = { class: "card-name text-white" };
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock(QCard, {
    class: "card-container",
    style: normalizeStyle({ backgroundColor: $props.cardInfo.color })
  }, {
    default: withCtx(() => [
      createBaseVNode("div", _hoisted_1$1, toDisplayString($props.cardInfo.name), 1)
    ]),
    _: 1
  }, 8, ["style"]);
}
var FidelityCard = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render$1], ["__scopeId", "data-v-1783472a"], ["__file", "FidelityCard.vue"]]);
var FidelityPage_vue_vue_type_style_index_0_scoped_true_lang = "";
const _sfc_main = {
  name: "FidelityPage",
  components: {
    EmptyState,
    EmptyData,
    BarcodeScanner,
    FidelityCard
  },
  data() {
    return {
      image: "EmptyState.svg",
      title: "Ooops! You are not logged in!",
      message: "Log in to access your cards",
      imageCards: "FidelityCard.svg",
      titleCards: "Ooops! No cards to show!",
      messageCards: "Add your first card.",
      cards: [],
      selectedCardInfo: null,
      showNewCardDialog: false,
      showDetailedCardDialog: false,
      showDeleteCard: false,
      showEditCard: false,
      cardName: "",
      cardColor: "",
      $q: useQuasar(),
      dashHeader: useDashHeaderStore(),
      userStore: useUserStore(),
      stopCamera: false
    };
  },
  async mounted() {
    const dashHeader = useDashHeaderStore();
    dashHeader.$patch({
      title: "Fidelity Cards",
      showBackIcon: false
    });
    if (this.userStore.authUser) {
      await this.fetchFidelityCards();
    }
  },
  methods: {
    openAddNewCardDialog() {
      this.stopCamera = false;
      this.showNewCardDialog = true;
    },
    openCardDetailsDialog(card) {
      this.selectedCardInfo = card;
      this.showDetailedCardDialog = true;
      this.cardName = this.selectedCardInfo.name;
      this.cardColor = this.selectedCardInfo.color;
    },
    async fetchFidelityCards() {
      try {
        const res = await this.$api.get("/cards");
        this.cards = res.data.cards;
      } catch (err) {
        this.$q.notify({
          type: "negative",
          position: "top",
          message: "Something went wrong!",
          color: "negative",
          timeout: "2500"
        });
      }
    },
    async onCardSaved() {
      await this.fetchFidelityCards();
      this.showNewCardDialog = false;
      this.$q.notify({
        type: "positive",
        position: "top",
        message: "Card saved successfully",
        color: "positive",
        timeout: "2500"
      });
    },
    async editCard() {
      try {
        const data = {
          name: this.cardName,
          color: this.cardColor
        };
        const res = await this.$api.patch(
          `cards/patch-card/${this.selectedCardInfo._id}`,
          data
        );
        if (res.data.status === "success") {
          await this.fetchFidelityCards();
          this.showEditCard = false;
          this.showDetailedCardDialog = false;
          this.$q.notify({
            type: "positive",
            position: "top",
            message: "Fidelity Card edited",
            color: "positive",
            timeout: "2500"
          });
        }
      } catch (err) {
        this.$q.notify({
          type: "positive",
          position: "top",
          message: "Something went wrong!",
          color: "positive",
          timeout: "2500"
        });
      }
    },
    async deleteCard(selectedCardInfo) {
      try {
        const res = await this.$api.delete(
          `cards/delete-card/${selectedCardInfo._id}`
        );
        if (res.data.status === "success") {
          await this.fetchFidelityCards();
          this.showDeleteCard = false;
          this.showDetailedCardDialog = false;
          this.$q.notify({
            type: "positive",
            position: "top",
            message: "Fidelity Card deleted",
            color: "positive",
            timeout: "2500"
          });
        }
      } catch (err) {
        this.$q.notify({
          type: "positive",
          position: "top",
          message: "Something went wrong!",
          color: "positive",
          timeout: "2500"
        });
      }
    }
  }
};
const _withScopeId = (n) => (pushScopeId("data-v-57580cb8"), n = n(), popScopeId(), n);
const _hoisted_1 = { class: "fideliy-page" };
const _hoisted_2 = {
  key: 0,
  class: "fidelity-page-info"
};
const _hoisted_3 = { style: { "width": "100%" } };
const _hoisted_4 = {
  key: 0,
  class: "fidelity-page__title"
};
const _hoisted_5 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("div", { class: "text-h6" }, "All cards", -1));
const _hoisted_6 = { key: 1 };
const _hoisted_7 = { class: "fidelity-cards-style" };
const _hoisted_8 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("div", { class: "text-h6" }, "Card Details", -1));
const _hoisted_9 = { class: "text-h5 card-text" };
const _hoisted_10 = { class: "barcode-background" };
const _hoisted_11 = ["src"];
const _hoisted_12 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("div", { class: "text-h6" }, "Card Scanner", -1));
const _hoisted_13 = { class: "q-ml-sm" };
const _hoisted_14 = { class: "q-ml-sm" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_FidelityCard = resolveComponent("FidelityCard");
  const _component_EmptyData = resolveComponent("EmptyData");
  const _component_EmptyState = resolveComponent("EmptyState");
  const _component_BarcodeScanner = resolveComponent("BarcodeScanner");
  return openBlock(), createElementBlock(Fragment, null, [
    createBaseVNode("div", _hoisted_1, [
      $data.userStore.authUser ? (openBlock(), createElementBlock("div", _hoisted_2, [
        createBaseVNode("div", _hoisted_3, [
          $data.cards.length ? (openBlock(), createElementBlock("div", _hoisted_4, [
            _hoisted_5,
            createVNode(QBtn, {
              class: "newcard-btn",
              onClick: $options.openAddNewCardDialog,
              label: "New Card"
            }, null, 8, ["onClick"])
          ])) : createCommentVNode("", true),
          $data.cards.length ? (openBlock(), createElementBlock("div", _hoisted_6, [
            createBaseVNode("div", _hoisted_7, [
              (openBlock(true), createElementBlock(Fragment, null, renderList($data.cards, (card) => {
                return openBlock(), createBlock(_component_FidelityCard, {
                  key: card,
                  cardInfo: card,
                  onClick: ($event) => $options.openCardDetailsDialog(card)
                }, null, 8, ["cardInfo", "onClick"]);
              }), 128))
            ])
          ])) : (openBlock(), createBlock(_component_EmptyData, {
            key: 2,
            image: $data.imageCards,
            title: $data.titleCards,
            message: $data.messageCards
          }, {
            button: withCtx(() => [
              createVNode(QBtn, {
                class: "btn",
                style: { "background-color": "#267378", "color": "#fff" },
                label: "Add card",
                onClick: _cache[0] || (_cache[0] = ($event) => $data.showNewCardDialog = true)
              })
            ]),
            _: 1
          }, 8, ["image", "title", "message"]))
        ])
      ])) : (openBlock(), createBlock(_component_EmptyState, {
        key: 1,
        image: $data.image,
        title: $data.title,
        message: $data.message
      }, null, 8, ["image", "title", "message"]))
    ]),
    createVNode(QDialog, {
      maximized: "",
      modelValue: $data.showDetailedCardDialog,
      "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $data.showDetailedCardDialog = $event)
    }, {
      default: withCtx(() => [
        createVNode(QCard, null, {
          default: withCtx(() => [
            createVNode(QCardSection, { class: "row items-center q-pb-none" }, {
              default: withCtx(() => [
                _hoisted_8,
                createVNode(QSpace),
                withDirectives(createVNode(QBtn, {
                  icon: "close",
                  flat: "",
                  round: "",
                  dense: ""
                }, null, 512), [
                  [ClosePopup]
                ])
              ]),
              _: 1
            }),
            createVNode(QCardSection, null, {
              default: withCtx(() => [
                createBaseVNode("div", {
                  style: normalizeStyle({ backgroundColor: $data.selectedCardInfo.color }),
                  class: "detailed-card-container"
                }, [
                  createBaseVNode("div", _hoisted_9, toDisplayString($data.selectedCardInfo.name), 1),
                  createBaseVNode("div", _hoisted_10, [
                    createBaseVNode("img", {
                      class: "code-img",
                      src: `http://bwipjs-api.metafloor.com/?bcid=${$data.selectedCardInfo.format.toLowerCase().split("_").join("")}&text=${$data.selectedCardInfo.code}&${$data.selectedCardInfo.format === "QR_CODE" ? "" : "&includetext"}`,
                      alt: ""
                    }, null, 8, _hoisted_11)
                  ])
                ], 4)
              ]),
              _: 1
            }),
            createVNode(QCardSection, { class: "row items-center q-pb-none" }, {
              default: withCtx(() => [
                createVNode(QBtn, {
                  class: "btn",
                  style: { "background-color": "#267378", "color": "#fff" },
                  label: "Edit card",
                  onClick: _cache[1] || (_cache[1] = ($event) => $data.showEditCard = true)
                }),
                createVNode(QSpace),
                createVNode(QBtn, {
                  class: "btn",
                  style: { "background-color": "#267378", "color": "#fff" },
                  label: "Remove card",
                  onClick: _cache[2] || (_cache[2] = ($event) => $data.showDeleteCard = true)
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    createVNode(QDialog, {
      maximized: "",
      modelValue: $data.showNewCardDialog,
      "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $data.showNewCardDialog = $event)
    }, {
      default: withCtx(() => [
        createVNode(QCard, null, {
          default: withCtx(() => [
            createVNode(QCardSection, { class: "row items-center q-pb-none" }, {
              default: withCtx(() => [
                _hoisted_12,
                createVNode(QSpace),
                withDirectives(createVNode(QBtn, {
                  icon: "close",
                  flat: "",
                  round: "",
                  dense: "",
                  onClick: _cache[4] || (_cache[4] = ($event) => $data.stopCamera = true)
                }, null, 512), [
                  [ClosePopup]
                ])
              ]),
              _: 1
            }),
            createVNode(QCardSection, null, {
              default: withCtx(() => [
                createVNode(_component_BarcodeScanner, {
                  onCardSavedSuccessfully: $options.onCardSaved,
                  stopCamera: $data.stopCamera
                }, null, 8, ["onCardSavedSuccessfully", "stopCamera"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    createVNode(QDialog, {
      modelValue: $data.showDeleteCard,
      "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.showDeleteCard = $event),
      persistent: ""
    }, {
      default: withCtx(() => [
        createVNode(QCard, null, {
          default: withCtx(() => [
            createVNode(QCardSection, { class: "row items-center" }, {
              default: withCtx(() => [
                createBaseVNode("span", _hoisted_13, "Are you sure you want to delete " + toDisplayString($data.selectedCardInfo.name) + " card?", 1)
              ]),
              _: 1
            }),
            createVNode(QCardActions, { align: "right" }, {
              default: withCtx(() => [
                withDirectives(createVNode(QBtn, {
                  flat: "",
                  label: "Cancel",
                  color: "primary"
                }, null, 512), [
                  [ClosePopup]
                ]),
                createVNode(QBtn, {
                  flat: "",
                  label: "Delete",
                  color: "red",
                  onClick: _cache[6] || (_cache[6] = ($event) => $options.deleteCard($data.selectedCardInfo))
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    createVNode(QDialog, {
      modelValue: $data.showEditCard,
      "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => $data.showEditCard = $event),
      persistent: ""
    }, {
      default: withCtx(() => [
        createVNode(QCard, { class: "edit-card__q-card" }, {
          default: withCtx(() => [
            createVNode(QCardSection, { class: "row items-center edit-card__q-card__section-1" }, {
              default: withCtx(() => [
                createBaseVNode("span", _hoisted_14, "Edit " + toDisplayString($data.selectedCardInfo.name) + " card", 1)
              ]),
              _: 1
            }),
            createVNode(QCardSection, { class: "edit-card__q-card__section-2" }, {
              default: withCtx(() => [
                createVNode(QInput, {
                  modelValue: $data.cardName,
                  "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $data.cardName = $event),
                  type: "text",
                  label: "Card name"
                }, null, 8, ["modelValue"]),
                createVNode(QInput, {
                  filled: "",
                  placeholder: "Pick a color",
                  modelValue: $data.cardColor,
                  "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $data.cardColor = $event),
                  class: "my-input"
                }, {
                  append: withCtx(() => [
                    createVNode(QIcon, {
                      name: "colorize",
                      class: "cursor-pointer"
                    }, {
                      default: withCtx(() => [
                        createVNode(QPopupProxy, {
                          cover: "",
                          "transition-show": "scale",
                          "transition-hide": "scale"
                        }, {
                          default: withCtx(() => [
                            createVNode(QColor, {
                              "no-footer": "",
                              modelValue: $data.cardColor,
                              "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $data.cardColor = $event)
                            }, null, 8, ["modelValue"])
                          ]),
                          _: 1
                        })
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                }, 8, ["modelValue"])
              ]),
              _: 1
            }),
            createVNode(QCardActions, { align: "right" }, {
              default: withCtx(() => [
                withDirectives(createVNode(QBtn, {
                  flat: "",
                  label: "Cancel",
                  color: "red"
                }, null, 512), [
                  [ClosePopup]
                ]),
                createVNode(QBtn, {
                  flat: "",
                  label: "Save",
                  color: "primary",
                  onClick: _cache[11] || (_cache[11] = ($event) => $options.editCard($data.selectedCardInfo))
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ], 64);
}
var FidelityPage = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__scopeId", "data-v-57580cb8"], ["__file", "FidelityPage.vue"]]);
export { FidelityPage as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlkZWxpdHlQYWdlLmYyODAwODQwLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9jb2xvcnMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NvbG9yL1FDb2xvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvcG9wdXAtcHJveHkvUVBvcHVwUHJveHkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS9jb3JlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2h0bWw1LXFyY29kZS9lc20vc3RyaW5ncy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL3V0aWxzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2h0bWw1LXFyY29kZS90aGlyZF9wYXJ0eS96eGluZy1qcy51bWQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS96eGluZy1odG1sNS1xcmNvZGUtZGVjb2Rlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL25hdGl2ZS1iYXItY29kZS1kZXRlY3Rvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL2NvZGUtZGVjb2Rlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL2NhbWVyYS9jb3JlLWltcGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS9jYW1lcmEvZmFjdG9yaWVzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2h0bWw1LXFyY29kZS9lc20vY2FtZXJhL3JldHJpZXZlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL3N0YXRlLW1hbmFnZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS9odG1sNS1xcmNvZGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS9jYW1lcmEvcGVybWlzc2lvbnMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvaHRtbDUtcXJjb2RlL2VzbS91aS9zY2FubmVyL3RvcmNoLWJ1dHRvbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9odG1sNS1xcmNvZGUvZXNtL2h0bWw1LXFyY29kZS1zY2FubmVyLmpzIiwiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY3VzdG9tZXIvQmFyY29kZVNjYW5uZXIudnVlIiwiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvY3VzdG9tZXIvRmlkZWxpdHlDYXJkLnZ1ZSIsIi4uLy4uLy4uL3NyYy9wYWdlcy9GaWRlbGl0eVBhZ2UudnVlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlUkdCQSA9IC9ecmdiKGEpP1xcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pLD8oWzAxXT9cXC4/XFxkKj8pP1xcKSQvXG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JUb0hleCAoeyByLCBnLCBiLCBhIH0pIHtcbiAgY29uc3QgYWxwaGEgPSBhICE9PSB2b2lkIDBcblxuICByID0gTWF0aC5yb3VuZChyKVxuICBnID0gTWF0aC5yb3VuZChnKVxuICBiID0gTWF0aC5yb3VuZChiKVxuXG4gIGlmIChcbiAgICByID4gMjU1XG4gICAgfHwgZyA+IDI1NVxuICAgIHx8IGIgPiAyNTVcbiAgICB8fCAoYWxwaGEgJiYgYSA+IDEwMClcbiAgKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgMyBudW1iZXJzIGJlbG93IDI1NiAoYW5kIG9wdGlvbmFsbHkgb25lIGJlbG93IDEwMCknKVxuICB9XG5cbiAgYSA9IGFscGhhXG4gICAgPyAoTWF0aC5yb3VuZCgyNTUgKiBhIC8gMTAwKSB8IDEgPDwgOCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpXG4gICAgOiAnJ1xuXG4gIHJldHVybiAnIycgKyAoKGIgfCBnIDw8IDggfCByIDw8IDE2KSB8IDEgPDwgMjQpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSArIGFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvU3RyaW5nICh7IHIsIGcsIGIsIGEgfSkge1xuICByZXR1cm4gYHJnYiR7IGEgIT09IHZvaWQgMCA/ICdhJyA6ICcnIH0oJHsgciB9LCR7IGcgfSwkeyBiIH0keyBhICE9PSB2b2lkIDAgPyAnLCcgKyAoYSAvIDEwMCkgOiAnJyB9KWBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvUmdiIChoZXgpIHtcbiAgaWYgKHR5cGVvZiBoZXggIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBzdHJpbmcnKVxuICB9XG5cbiAgaGV4ID0gaGV4LnJlcGxhY2UoL14jLywgJycpXG5cbiAgaWYgKGhleC5sZW5ndGggPT09IDMpIHtcbiAgICBoZXggPSBoZXhbIDAgXSArIGhleFsgMCBdICsgaGV4WyAxIF0gKyBoZXhbIDEgXSArIGhleFsgMiBdICsgaGV4WyAyIF1cbiAgfVxuICBlbHNlIGlmIChoZXgubGVuZ3RoID09PSA0KSB7XG4gICAgaGV4ID0gaGV4WyAwIF0gKyBoZXhbIDAgXSArIGhleFsgMSBdICsgaGV4WyAxIF0gKyBoZXhbIDIgXSArIGhleFsgMiBdICsgaGV4WyAzIF0gKyBoZXhbIDMgXVxuICB9XG5cbiAgY29uc3QgbnVtID0gcGFyc2VJbnQoaGV4LCAxNilcblxuICByZXR1cm4gaGV4Lmxlbmd0aCA+IDZcbiAgICA/IHsgcjogbnVtID4+IDI0ICYgMjU1LCBnOiBudW0gPj4gMTYgJiAyNTUsIGI6IG51bSA+PiA4ICYgMjU1LCBhOiBNYXRoLnJvdW5kKChudW0gJiAyNTUpIC8gMi41NSkgfVxuICAgIDogeyByOiBudW0gPj4gMTYsIGc6IG51bSA+PiA4ICYgMjU1LCBiOiBudW0gJiAyNTUgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaHN2VG9SZ2IgKHsgaCwgcywgdiwgYSB9KSB7XG4gIGxldCByLCBnLCBiXG4gIHMgPSBzIC8gMTAwXG4gIHYgPSB2IC8gMTAwXG5cbiAgaCA9IGggLyAzNjBcbiAgY29uc3RcbiAgICBpID0gTWF0aC5mbG9vcihoICogNiksXG4gICAgZiA9IGggKiA2IC0gaSxcbiAgICBwID0gdiAqICgxIC0gcyksXG4gICAgcSA9IHYgKiAoMSAtIGYgKiBzKSxcbiAgICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpXG5cbiAgc3dpdGNoIChpICUgNikge1xuICAgIGNhc2UgMDpcbiAgICAgIHIgPSB2XG4gICAgICBnID0gdFxuICAgICAgYiA9IHBcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAxOlxuICAgICAgciA9IHFcbiAgICAgIGcgPSB2XG4gICAgICBiID0gcFxuICAgICAgYnJlYWtcbiAgICBjYXNlIDI6XG4gICAgICByID0gcFxuICAgICAgZyA9IHZcbiAgICAgIGIgPSB0XG4gICAgICBicmVha1xuICAgIGNhc2UgMzpcbiAgICAgIHIgPSBwXG4gICAgICBnID0gcVxuICAgICAgYiA9IHZcbiAgICAgIGJyZWFrXG4gICAgY2FzZSA0OlxuICAgICAgciA9IHRcbiAgICAgIGcgPSBwXG4gICAgICBiID0gdlxuICAgICAgYnJlYWtcbiAgICBjYXNlIDU6XG4gICAgICByID0gdlxuICAgICAgZyA9IHBcbiAgICAgIGIgPSBxXG4gICAgICBicmVha1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByOiBNYXRoLnJvdW5kKHIgKiAyNTUpLFxuICAgIGc6IE1hdGgucm91bmQoZyAqIDI1NSksXG4gICAgYjogTWF0aC5yb3VuZChiICogMjU1KSxcbiAgICBhXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYlRvSHN2ICh7IHIsIGcsIGIsIGEgfSkge1xuICBjb25zdFxuICAgIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLFxuICAgIGQgPSBtYXggLSBtaW4sXG4gICAgcyA9IChtYXggPT09IDAgPyAwIDogZCAvIG1heCksXG4gICAgdiA9IG1heCAvIDI1NVxuICBsZXQgaFxuXG4gIHN3aXRjaCAobWF4KSB7XG4gICAgY2FzZSBtaW46XG4gICAgICBoID0gMFxuICAgICAgYnJlYWtcbiAgICBjYXNlIHI6XG4gICAgICBoID0gKGcgLSBiKSArIGQgKiAoZyA8IGIgPyA2IDogMClcbiAgICAgIGggLz0gNiAqIGRcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBnOlxuICAgICAgaCA9IChiIC0gcikgKyBkICogMlxuICAgICAgaCAvPSA2ICogZFxuICAgICAgYnJlYWtcbiAgICBjYXNlIGI6XG4gICAgICBoID0gKHIgLSBnKSArIGQgKiA0XG4gICAgICBoIC89IDYgKiBkXG4gICAgICBicmVha1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoOiBNYXRoLnJvdW5kKGggKiAzNjApLFxuICAgIHM6IE1hdGgucm91bmQocyAqIDEwMCksXG4gICAgdjogTWF0aC5yb3VuZCh2ICogMTAwKSxcbiAgICBhXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRleHRUb1JnYiAoc3RyKSB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nJylcbiAgfVxuXG4gIGNvbnN0IGNvbG9yID0gc3RyLnJlcGxhY2UoLyAvZywgJycpXG5cbiAgY29uc3QgbSA9IHJlUkdCQS5leGVjKGNvbG9yKVxuXG4gIGlmIChtID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGhleFRvUmdiKGNvbG9yKVxuICB9XG5cbiAgY29uc3QgcmdiID0ge1xuICAgIHI6IE1hdGgubWluKDI1NSwgcGFyc2VJbnQobVsgMiBdLCAxMCkpLFxuICAgIGc6IE1hdGgubWluKDI1NSwgcGFyc2VJbnQobVsgMyBdLCAxMCkpLFxuICAgIGI6IE1hdGgubWluKDI1NSwgcGFyc2VJbnQobVsgNCBdLCAxMCkpXG4gIH1cblxuICBpZiAobVsgMSBdKSB7XG4gICAgY29uc3QgYWxwaGEgPSBwYXJzZUZsb2F0KG1bIDUgXSlcbiAgICByZ2IuYSA9IE1hdGgubWluKDEsIGlzTmFOKGFscGhhKSA9PT0gdHJ1ZSA/IDEgOiBhbHBoYSkgKiAxMDBcbiAgfVxuXG4gIHJldHVybiByZ2Jcbn1cblxuLyogd29ya3MgYXMgZGFya2VuIGlmIHBlcmNlbnQgPCAwICovXG5leHBvcnQgZnVuY3Rpb24gbGlnaHRlbiAoY29sb3IsIHBlcmNlbnQpIHtcbiAgaWYgKHR5cGVvZiBjb2xvciAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZyBhcyBjb2xvcicpXG4gIH1cbiAgaWYgKHR5cGVvZiBwZXJjZW50ICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgbnVtZXJpYyBwZXJjZW50JylcbiAgfVxuXG4gIGNvbnN0IHJnYiA9IHRleHRUb1JnYihjb2xvciksXG4gICAgdCA9IHBlcmNlbnQgPCAwID8gMCA6IDI1NSxcbiAgICBwID0gTWF0aC5hYnMocGVyY2VudCkgLyAxMDAsXG4gICAgUiA9IHJnYi5yLFxuICAgIEcgPSByZ2IuZyxcbiAgICBCID0gcmdiLmJcblxuICByZXR1cm4gJyMnICsgKFxuICAgIDB4MTAwMDAwMCArIChNYXRoLnJvdW5kKCh0IC0gUikgKiBwKSArIFIpICogMHgxMDAwMFxuICAgICsgKE1hdGgucm91bmQoKHQgLSBHKSAqIHApICsgRykgKiAweDEwMFxuICAgICsgKE1hdGgucm91bmQoKHQgLSBCKSAqIHApICsgQilcbiAgKS50b1N0cmluZygxNikuc2xpY2UoMSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGx1bWlub3NpdHkgKGNvbG9yKSB7XG4gIGlmICh0eXBlb2YgY29sb3IgIT09ICdzdHJpbmcnICYmICghY29sb3IgfHwgY29sb3IuciA9PT0gdm9pZCAwKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nIG9yIGEge3IsIGcsIGJ9IG9iamVjdCBhcyBjb2xvcicpXG4gIH1cblxuICBjb25zdFxuICAgIHJnYiA9IHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycgPyB0ZXh0VG9SZ2IoY29sb3IpIDogY29sb3IsXG4gICAgciA9IHJnYi5yIC8gMjU1LFxuICAgIGcgPSByZ2IuZyAvIDI1NSxcbiAgICBiID0gcmdiLmIgLyAyNTUsXG4gICAgUiA9IHIgPD0gMC4wMzkyOCA/IHIgLyAxMi45MiA6IE1hdGgucG93KChyICsgMC4wNTUpIC8gMS4wNTUsIDIuNCksXG4gICAgRyA9IGcgPD0gMC4wMzkyOCA/IGcgLyAxMi45MiA6IE1hdGgucG93KChnICsgMC4wNTUpIC8gMS4wNTUsIDIuNCksXG4gICAgQiA9IGIgPD0gMC4wMzkyOCA/IGIgLyAxMi45MiA6IE1hdGgucG93KChiICsgMC4wNTUpIC8gMS4wNTUsIDIuNClcbiAgcmV0dXJuIDAuMjEyNiAqIFIgKyAwLjcxNTIgKiBHICsgMC4wNzIyICogQlxufVxuXG5leHBvcnQgZnVuY3Rpb24gYnJpZ2h0bmVzcyAoY29sb3IpIHtcbiAgaWYgKHR5cGVvZiBjb2xvciAhPT0gJ3N0cmluZycgJiYgKCFjb2xvciB8fCBjb2xvci5yID09PSB2b2lkIDApKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYSB7ciwgZywgYn0gb2JqZWN0IGFzIGNvbG9yJylcbiAgfVxuXG4gIGNvbnN0IHJnYiA9IHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZydcbiAgICA/IHRleHRUb1JnYihjb2xvcilcbiAgICA6IGNvbG9yXG5cbiAgcmV0dXJuIChyZ2IuciAqIDI5OSArIHJnYi5nICogNTg3ICsgcmdiLmIgKiAxMTQpIC8gMTAwMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gYmxlbmQgKGZnQ29sb3IsIGJnQ29sb3IpIHtcbiAgaWYgKHR5cGVvZiBmZ0NvbG9yICE9PSAnc3RyaW5nJyAmJiAoIWZnQ29sb3IgfHwgZmdDb2xvci5yID09PSB2b2lkIDApKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYSB7ciwgZywgYlssIGFdfSBvYmplY3QgYXMgZmdDb2xvcicpXG4gIH1cblxuICBpZiAodHlwZW9mIGJnQ29sb3IgIT09ICdzdHJpbmcnICYmICghYmdDb2xvciB8fCBiZ0NvbG9yLnIgPT09IHZvaWQgMCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZyBvciBhIHtyLCBnLCBiWywgYV19IG9iamVjdCBhcyBiZ0NvbG9yJylcbiAgfVxuXG4gIGNvbnN0XG4gICAgcmdiMSA9IHR5cGVvZiBmZ0NvbG9yID09PSAnc3RyaW5nJyA/IHRleHRUb1JnYihmZ0NvbG9yKSA6IGZnQ29sb3IsXG4gICAgcjEgPSByZ2IxLnIgLyAyNTUsXG4gICAgZzEgPSByZ2IxLmcgLyAyNTUsXG4gICAgYjEgPSByZ2IxLmIgLyAyNTUsXG4gICAgYTEgPSByZ2IxLmEgIT09IHZvaWQgMCA/IHJnYjEuYSAvIDEwMCA6IDEsXG4gICAgcmdiMiA9IHR5cGVvZiBiZ0NvbG9yID09PSAnc3RyaW5nJyA/IHRleHRUb1JnYihiZ0NvbG9yKSA6IGJnQ29sb3IsXG4gICAgcjIgPSByZ2IyLnIgLyAyNTUsXG4gICAgZzIgPSByZ2IyLmcgLyAyNTUsXG4gICAgYjIgPSByZ2IyLmIgLyAyNTUsXG4gICAgYTIgPSByZ2IyLmEgIT09IHZvaWQgMCA/IHJnYjIuYSAvIDEwMCA6IDEsXG4gICAgYSA9IGExICsgYTIgKiAoMSAtIGExKSxcbiAgICByID0gTWF0aC5yb3VuZCgoKHIxICogYTEgKyByMiAqIGEyICogKDEgLSBhMSkpIC8gYSkgKiAyNTUpLFxuICAgIGcgPSBNYXRoLnJvdW5kKCgoZzEgKiBhMSArIGcyICogYTIgKiAoMSAtIGExKSkgLyBhKSAqIDI1NSksXG4gICAgYiA9IE1hdGgucm91bmQoKChiMSAqIGExICsgYjIgKiBhMiAqICgxIC0gYTEpKSAvIGEpICogMjU1KVxuXG4gIGNvbnN0IHJldCA9IHsgciwgZywgYiwgYTogTWF0aC5yb3VuZChhICogMTAwKSB9XG4gIHJldHVybiB0eXBlb2YgZmdDb2xvciA9PT0gJ3N0cmluZydcbiAgICA/IHJnYlRvSGV4KHJldClcbiAgICA6IHJldFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlQWxwaGEgKGNvbG9yLCBvZmZzZXQpIHtcbiAgaWYgKHR5cGVvZiBjb2xvciAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZyBhcyBjb2xvcicpXG4gIH1cblxuICBpZiAob2Zmc2V0ID09PSB2b2lkIDAgfHwgb2Zmc2V0IDwgLTEgfHwgb2Zmc2V0ID4gMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIG9mZnNldCB0byBiZSBiZXR3ZWVuIC0xIGFuZCAxJylcbiAgfVxuXG4gIGNvbnN0IHsgciwgZywgYiwgYSB9ID0gdGV4dFRvUmdiKGNvbG9yKVxuICBjb25zdCBhbHBoYSA9IGEgIT09IHZvaWQgMCA/IGEgLyAxMDAgOiAwXG5cbiAgcmV0dXJuIHJnYlRvSGV4KHtcbiAgICByLCBnLCBiLCBhOiBNYXRoLnJvdW5kKE1hdGgubWluKDEsIE1hdGgubWF4KDAsIGFscGhhICsgb2Zmc2V0KSkgKiAxMDApXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYWxldHRlQ29sb3IgKGNvbG9yTmFtZSkge1xuICBpZiAodHlwZW9mIGNvbG9yTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIHN0cmluZyBhcyBjb2xvcicpXG4gIH1cblxuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgZWwuY2xhc3NOYW1lID0gYHRleHQtJHsgY29sb3JOYW1lIH0gaW52aXNpYmxlIGZpeGVkIG5vLXBvaW50ZXItZXZlbnRzYFxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKVxuXG4gIGNvbnN0IHJlc3VsdCA9IGdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUoJ2NvbG9yJylcblxuICBlbC5yZW1vdmUoKVxuXG4gIHJldHVybiByZ2JUb0hleCh0ZXh0VG9SZ2IocmVzdWx0KSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICByZ2JUb0hleCxcbiAgaGV4VG9SZ2IsXG4gIGhzdlRvUmdiLFxuICByZ2JUb0hzdixcbiAgdGV4dFRvUmdiLFxuICBsaWdodGVuLFxuICBsdW1pbm9zaXR5LFxuICBicmlnaHRuZXNzLFxuICBibGVuZCxcbiAgY2hhbmdlQWxwaGEsXG4gIGdldFBhbGV0dGVDb2xvclxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIG5leHRUaWNrLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBUb3VjaFBhbiBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL1RvdWNoUGFuLmpzJ1xuXG5pbXBvcnQgUVNsaWRlciBmcm9tICcuLi9zbGlkZXIvUVNsaWRlci5qcydcbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgUVRhYnMgZnJvbSAnLi4vdGFicy9RVGFicy5qcydcbmltcG9ydCBRVGFiIGZyb20gJy4uL3RhYnMvUVRhYi5qcydcbmltcG9ydCBRVGFiUGFuZWxzIGZyb20gJy4uL3RhYi1wYW5lbHMvUVRhYlBhbmVscy5qcydcbmltcG9ydCBRVGFiUGFuZWwgZnJvbSAnLi4vdGFiLXBhbmVscy9RVGFiUGFuZWwuanMnXG5cbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWRhcmsuanMnXG5pbXBvcnQgdXNlQ2FjaGUgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtY2FjaGUuanMnXG5pbXBvcnQgeyB1c2VGb3JtSW5qZWN0LCB1c2VGb3JtUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1mb3JtLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IHRlc3RQYXR0ZXJuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcGF0dGVybnMuanMnXG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnLi4vLi4vdXRpbHMvdGhyb3R0bGUuanMnXG5pbXBvcnQgeyBzdG9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBoZXhUb1JnYiwgcmdiVG9IZXgsIHJnYlRvU3RyaW5nLCB0ZXh0VG9SZ2IsIHJnYlRvSHN2LCBoc3ZUb1JnYiwgbHVtaW5vc2l0eSB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbG9ycy5qcydcbmltcG9ydCB7IGhEaXIgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcblxuY29uc3QgcGFsZXR0ZSA9IFtcbiAgJ3JnYigyNTUsMjA0LDIwNCknLCAncmdiKDI1NSwyMzAsMjA0KScsICdyZ2IoMjU1LDI1NSwyMDQpJywgJ3JnYigyMDQsMjU1LDIwNCknLCAncmdiKDIwNCwyNTUsMjMwKScsICdyZ2IoMjA0LDI1NSwyNTUpJywgJ3JnYigyMDQsMjMwLDI1NSknLCAncmdiKDIwNCwyMDQsMjU1KScsICdyZ2IoMjMwLDIwNCwyNTUpJywgJ3JnYigyNTUsMjA0LDI1NSknLFxuICAncmdiKDI1NSwxNTMsMTUzKScsICdyZ2IoMjU1LDIwNCwxNTMpJywgJ3JnYigyNTUsMjU1LDE1MyknLCAncmdiKDE1MywyNTUsMTUzKScsICdyZ2IoMTUzLDI1NSwyMDQpJywgJ3JnYigxNTMsMjU1LDI1NSknLCAncmdiKDE1MywyMDQsMjU1KScsICdyZ2IoMTUzLDE1MywyNTUpJywgJ3JnYigyMDQsMTUzLDI1NSknLCAncmdiKDI1NSwxNTMsMjU1KScsXG4gICdyZ2IoMjU1LDEwMiwxMDIpJywgJ3JnYigyNTUsMTc5LDEwMiknLCAncmdiKDI1NSwyNTUsMTAyKScsICdyZ2IoMTAyLDI1NSwxMDIpJywgJ3JnYigxMDIsMjU1LDE3OSknLCAncmdiKDEwMiwyNTUsMjU1KScsICdyZ2IoMTAyLDE3OSwyNTUpJywgJ3JnYigxMDIsMTAyLDI1NSknLCAncmdiKDE3OSwxMDIsMjU1KScsICdyZ2IoMjU1LDEwMiwyNTUpJyxcbiAgJ3JnYigyNTUsNTEsNTEpJywgJ3JnYigyNTUsMTUzLDUxKScsICdyZ2IoMjU1LDI1NSw1MSknLCAncmdiKDUxLDI1NSw1MSknLCAncmdiKDUxLDI1NSwxNTMpJywgJ3JnYig1MSwyNTUsMjU1KScsICdyZ2IoNTEsMTUzLDI1NSknLCAncmdiKDUxLDUxLDI1NSknLCAncmdiKDE1Myw1MSwyNTUpJywgJ3JnYigyNTUsNTEsMjU1KScsXG4gICdyZ2IoMjU1LDAsMCknLCAncmdiKDI1NSwxMjgsMCknLCAncmdiKDI1NSwyNTUsMCknLCAncmdiKDAsMjU1LDApJywgJ3JnYigwLDI1NSwxMjgpJywgJ3JnYigwLDI1NSwyNTUpJywgJ3JnYigwLDEyOCwyNTUpJywgJ3JnYigwLDAsMjU1KScsICdyZ2IoMTI4LDAsMjU1KScsICdyZ2IoMjU1LDAsMjU1KScsXG4gICdyZ2IoMjQ1LDAsMCknLCAncmdiKDI0NSwxMjMsMCknLCAncmdiKDI0NSwyNDUsMCknLCAncmdiKDAsMjQ1LDApJywgJ3JnYigwLDI0NSwxMjMpJywgJ3JnYigwLDI0NSwyNDUpJywgJ3JnYigwLDEyMywyNDUpJywgJ3JnYigwLDAsMjQ1KScsICdyZ2IoMTIzLDAsMjQ1KScsICdyZ2IoMjQ1LDAsMjQ1KScsXG4gICdyZ2IoMjE0LDAsMCknLCAncmdiKDIxNCwxMDgsMCknLCAncmdiKDIxNCwyMTQsMCknLCAncmdiKDAsMjE0LDApJywgJ3JnYigwLDIxNCwxMDgpJywgJ3JnYigwLDIxNCwyMTQpJywgJ3JnYigwLDEwOCwyMTQpJywgJ3JnYigwLDAsMjE0KScsICdyZ2IoMTA4LDAsMjE0KScsICdyZ2IoMjE0LDAsMjE0KScsXG4gICdyZ2IoMTYzLDAsMCknLCAncmdiKDE2Myw4MiwwKScsICdyZ2IoMTYzLDE2MywwKScsICdyZ2IoMCwxNjMsMCknLCAncmdiKDAsMTYzLDgyKScsICdyZ2IoMCwxNjMsMTYzKScsICdyZ2IoMCw4MiwxNjMpJywgJ3JnYigwLDAsMTYzKScsICdyZ2IoODIsMCwxNjMpJywgJ3JnYigxNjMsMCwxNjMpJyxcbiAgJ3JnYig5MiwwLDApJywgJ3JnYig5Miw0NiwwKScsICdyZ2IoOTIsOTIsMCknLCAncmdiKDAsOTIsMCknLCAncmdiKDAsOTIsNDYpJywgJ3JnYigwLDkyLDkyKScsICdyZ2IoMCw0Niw5MiknLCAncmdiKDAsMCw5MiknLCAncmdiKDQ2LDAsOTIpJywgJ3JnYig5MiwwLDkyKScsXG4gICdyZ2IoMjU1LDI1NSwyNTUpJywgJ3JnYigyMDUsMjA1LDIwNSknLCAncmdiKDE3OCwxNzgsMTc4KScsICdyZ2IoMTUzLDE1MywxNTMpJywgJ3JnYigxMjcsMTI3LDEyNyknLCAncmdiKDEwMiwxMDIsMTAyKScsICdyZ2IoNzYsNzYsNzYpJywgJ3JnYig1MSw1MSw1MSknLCAncmdiKDI1LDI1LDI1KScsICdyZ2IoMCwwLDApJ1xuXVxuXG5jb25zdCB0aHVtYlBhdGggPSAnTTUgNSBoMTAgdjEwIGgtMTAgdi0xMCB6J1xuY29uc3QgYWxwaGFUcmFja0ltZyA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFnQUFBQUlDQVlBQUFERUQ3NkxBQUFBSDBsRVFWUW9VMk5rWUdBd1prQUZaNUc1alBSUmdPWUVWRGVCM0VCakJRQk9ad1RWdWdJR3lBQUFBQUJKUlU1RXJrSmdnZz09J1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUNvbG9yJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZURhcmtQcm9wcyxcbiAgICAuLi51c2VGb3JtUHJvcHMsXG5cbiAgICBtb2RlbFZhbHVlOiBTdHJpbmcsXG5cbiAgICBkZWZhdWx0VmFsdWU6IFN0cmluZyxcbiAgICBkZWZhdWx0Vmlldzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3NwZWN0cnVtJyxcbiAgICAgIHZhbGlkYXRvcjogdiA9PiBbICdzcGVjdHJ1bScsICd0dW5lJywgJ3BhbGV0dGUnIF0uaW5jbHVkZXModilcbiAgICB9LFxuXG4gICAgZm9ybWF0TW9kZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdhdXRvJyxcbiAgICAgIHZhbGlkYXRvcjogdiA9PiBbICdhdXRvJywgJ2hleCcsICdyZ2InLCAnaGV4YScsICdyZ2JhJyBdLmluY2x1ZGVzKHYpXG4gICAgfSxcblxuICAgIHBhbGV0dGU6IEFycmF5LFxuXG4gICAgbm9IZWFkZXI6IEJvb2xlYW4sXG4gICAgbm9IZWFkZXJUYWJzOiBCb29sZWFuLFxuICAgIG5vRm9vdGVyOiBCb29sZWFuLFxuXG4gICAgc3F1YXJlOiBCb29sZWFuLFxuICAgIGZsYXQ6IEJvb2xlYW4sXG4gICAgYm9yZGVyZWQ6IEJvb2xlYW4sXG5cbiAgICBkaXNhYmxlOiBCb29sZWFuLFxuICAgIHJlYWRvbmx5OiBCb29sZWFuXG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJywgJ2NoYW5nZScgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgZW1pdCB9KSB7XG4gICAgY29uc3QgeyBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgICBjb25zdCB7ICRxIH0gPSBwcm94eVxuXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG4gICAgY29uc3QgeyBnZXRDYWNoZSB9ID0gdXNlQ2FjaGUoKVxuXG4gICAgY29uc3Qgc3BlY3RydW1SZWYgPSByZWYobnVsbClcbiAgICBjb25zdCBlcnJvckljb25SZWYgPSByZWYobnVsbClcblxuICAgIGNvbnN0IGZvcmNlSGV4ID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMuZm9ybWF0TW9kZWwgPT09ICdhdXRvJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBwcm9wcy5mb3JtYXRNb2RlbC5pbmRleE9mKCdoZXgnKSA+IC0xXG4gICAgKSlcblxuICAgIGNvbnN0IGZvcmNlQWxwaGEgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5mb3JtYXRNb2RlbCA9PT0gJ2F1dG8nXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IHByb3BzLmZvcm1hdE1vZGVsLmluZGV4T2YoJ2EnKSA+IC0xXG4gICAgKSlcblxuICAgIGNvbnN0IHRvcFZpZXcgPSByZWYoXG4gICAgICBwcm9wcy5mb3JtYXRNb2RlbCA9PT0gJ2F1dG8nXG4gICAgICAgID8gKFxuICAgICAgICAgICAgKHByb3BzLm1vZGVsVmFsdWUgPT09IHZvaWQgMCB8fCBwcm9wcy5tb2RlbFZhbHVlID09PSBudWxsIHx8IHByb3BzLm1vZGVsVmFsdWUgPT09ICcnIHx8IHByb3BzLm1vZGVsVmFsdWUuc3RhcnRzV2l0aCgnIycpKVxuICAgICAgICAgICAgICA/ICdoZXgnXG4gICAgICAgICAgICAgIDogJ3JnYidcbiAgICAgICAgICApXG4gICAgICAgIDogKHByb3BzLmZvcm1hdE1vZGVsLnN0YXJ0c1dpdGgoJ2hleCcpID8gJ2hleCcgOiAncmdiJylcbiAgICApXG5cbiAgICBjb25zdCB2aWV3ID0gcmVmKHByb3BzLmRlZmF1bHRWaWV3KVxuICAgIGNvbnN0IG1vZGVsID0gcmVmKHBhcnNlTW9kZWwocHJvcHMubW9kZWxWYWx1ZSB8fCBwcm9wcy5kZWZhdWx0VmFsdWUpKVxuXG4gICAgY29uc3QgZWRpdGFibGUgPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIHByb3BzLnJlYWRvbmx5ICE9PSB0cnVlKVxuXG4gICAgY29uc3QgaXNIZXggPSBjb21wdXRlZCgoKSA9PlxuICAgICAgcHJvcHMubW9kZWxWYWx1ZSA9PT0gdm9pZCAwXG4gICAgICB8fCBwcm9wcy5tb2RlbFZhbHVlID09PSBudWxsXG4gICAgICB8fCBwcm9wcy5tb2RlbFZhbHVlID09PSAnJ1xuICAgICAgfHwgcHJvcHMubW9kZWxWYWx1ZS5zdGFydHNXaXRoKCcjJylcbiAgICApXG5cbiAgICBjb25zdCBpc091dHB1dEhleCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIGZvcmNlSGV4LnZhbHVlICE9PSBudWxsXG4gICAgICAgID8gZm9yY2VIZXgudmFsdWVcbiAgICAgICAgOiBpc0hleC52YWx1ZVxuICAgICkpXG5cbiAgICBjb25zdCBmb3JtQXR0cnMgPSBjb21wdXRlZCgoKSA9PiAoe1xuICAgICAgdHlwZTogJ2hpZGRlbicsXG4gICAgICBuYW1lOiBwcm9wcy5uYW1lLFxuICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlWyBpc091dHB1dEhleC52YWx1ZSA9PT0gdHJ1ZSA/ICdoZXgnIDogJ3JnYicgXVxuICAgIH0pKVxuXG4gICAgY29uc3QgaW5qZWN0Rm9ybUlucHV0ID0gdXNlRm9ybUluamVjdChmb3JtQXR0cnMpXG5cbiAgICBjb25zdCBoYXNBbHBoYSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIGZvcmNlQWxwaGEudmFsdWUgIT09IG51bGxcbiAgICAgICAgPyBmb3JjZUFscGhhLnZhbHVlXG4gICAgICAgIDogbW9kZWwudmFsdWUuYSAhPT0gdm9pZCAwXG4gICAgKSlcblxuICAgIGNvbnN0IGN1cnJlbnRCZ0NvbG9yID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogbW9kZWwudmFsdWUucmdiIHx8ICcjMDAwJ1xuICAgIH0pKVxuXG4gICAgY29uc3QgaGVhZGVyQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCBsaWdodCA9IG1vZGVsLnZhbHVlLmEgIT09IHZvaWQgMCAmJiBtb2RlbC52YWx1ZS5hIDwgNjVcbiAgICAgICAgPyB0cnVlXG4gICAgICAgIDogbHVtaW5vc2l0eShtb2RlbC52YWx1ZSkgPiAwLjRcblxuICAgICAgcmV0dXJuICdxLWNvbG9yLXBpY2tlcl9faGVhZGVyLWNvbnRlbnQnXG4gICAgICAgICsgYCBxLWNvbG9yLXBpY2tlcl9faGVhZGVyLWNvbnRlbnQtLSR7IGxpZ2h0ID8gJ2xpZ2h0JyA6ICdkYXJrJyB9YFxuICAgIH0pXG5cbiAgICBjb25zdCBzcGVjdHJ1bVN0eWxlID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIGJhY2tncm91bmQ6IGBoc2woJHsgbW9kZWwudmFsdWUuaCB9LDEwMCUsNTAlKWBcbiAgICB9KSlcblxuICAgIGNvbnN0IHNwZWN0cnVtUG9pbnRlclN0eWxlID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIHRvcDogYCR7IDEwMCAtIG1vZGVsLnZhbHVlLnYgfSVgLFxuICAgICAgWyAkcS5sYW5nLnJ0bCA9PT0gdHJ1ZSA/ICdyaWdodCcgOiAnbGVmdCcgXTogYCR7IG1vZGVsLnZhbHVlLnMgfSVgXG4gICAgfSkpXG5cbiAgICBjb25zdCBjb21wdXRlZFBhbGV0dGUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5wYWxldHRlICE9PSB2b2lkIDAgJiYgcHJvcHMucGFsZXR0ZS5sZW5ndGggPiAwXG4gICAgICAgID8gcHJvcHMucGFsZXR0ZVxuICAgICAgICA6IHBhbGV0dGVcbiAgICApKVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAncS1jb2xvci1waWNrZXInXG4gICAgICArIChwcm9wcy5ib3JkZXJlZCA9PT0gdHJ1ZSA/ICcgcS1jb2xvci1waWNrZXItLWJvcmRlcmVkJyA6ICcnKVxuICAgICAgKyAocHJvcHMuc3F1YXJlID09PSB0cnVlID8gJyBxLWNvbG9yLXBpY2tlci0tc3F1YXJlIG5vLWJvcmRlci1yYWRpdXMnIDogJycpXG4gICAgICArIChwcm9wcy5mbGF0ID09PSB0cnVlID8gJyBxLWNvbG9yLXBpY2tlci0tZmxhdCBuby1zaGFkb3cnIDogJycpXG4gICAgICArIChwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gJyBkaXNhYmxlZCcgOiAnJylcbiAgICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1jb2xvci1waWNrZXItLWRhcmsgcS1kYXJrJyA6ICcnKVxuICAgIClcblxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4geyAnYXJpYS1kaXNhYmxlZCc6ICd0cnVlJyB9XG4gICAgICB9XG4gICAgICBpZiAocHJvcHMucmVhZG9ubHkgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHsgJ2FyaWEtcmVhZG9ubHknOiAndHJ1ZScgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHt9XG4gICAgfSlcblxuICAgIGNvbnN0IHNwZWN0cnVtRGlyZWN0aXZlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgLy8gaWYgZWRpdGFibGUudmFsdWUgPT09IHRydWVcbiAgICAgIHJldHVybiBbIFtcbiAgICAgICAgVG91Y2hQYW4sXG4gICAgICAgIG9uU3BlY3RydW1QYW4sXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgeyBwcmV2ZW50OiB0cnVlLCBzdG9wOiB0cnVlLCBtb3VzZTogdHJ1ZSB9XG4gICAgICBdIF1cbiAgICB9KVxuXG4gICAgd2F0Y2goKCkgPT4gcHJvcHMubW9kZWxWYWx1ZSwgdiA9PiB7XG4gICAgICBjb25zdCBsb2NhbE1vZGVsID0gcGFyc2VNb2RlbCh2IHx8IHByb3BzLmRlZmF1bHRWYWx1ZSlcbiAgICAgIGlmIChsb2NhbE1vZGVsLmhleCAhPT0gbW9kZWwudmFsdWUuaGV4KSB7XG4gICAgICAgIG1vZGVsLnZhbHVlID0gbG9jYWxNb2RlbFxuICAgICAgfVxuICAgIH0pXG5cbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5kZWZhdWx0VmFsdWUsIHYgPT4ge1xuICAgICAgaWYgKCFwcm9wcy5tb2RlbFZhbHVlICYmIHYpIHtcbiAgICAgICAgY29uc3QgbG9jYWxNb2RlbCA9IHBhcnNlTW9kZWwodilcbiAgICAgICAgaWYgKGxvY2FsTW9kZWwuaGV4ICE9PSBtb2RlbC52YWx1ZS5oZXgpIHtcbiAgICAgICAgICBtb2RlbC52YWx1ZSA9IGxvY2FsTW9kZWxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiB1cGRhdGVNb2RlbCAocmdiLCBjaGFuZ2UpIHtcbiAgICAgIC8vIHVwZGF0ZSBpbnRlcm5hbGx5XG4gICAgICBtb2RlbC52YWx1ZS5oZXggPSByZ2JUb0hleChyZ2IpXG4gICAgICBtb2RlbC52YWx1ZS5yZ2IgPSByZ2JUb1N0cmluZyhyZ2IpXG4gICAgICBtb2RlbC52YWx1ZS5yID0gcmdiLnJcbiAgICAgIG1vZGVsLnZhbHVlLmcgPSByZ2IuZ1xuICAgICAgbW9kZWwudmFsdWUuYiA9IHJnYi5iXG4gICAgICBtb2RlbC52YWx1ZS5hID0gcmdiLmFcblxuICAgICAgY29uc3QgdmFsdWUgPSBtb2RlbC52YWx1ZVsgaXNPdXRwdXRIZXgudmFsdWUgPT09IHRydWUgPyAnaGV4JyA6ICdyZ2InIF1cblxuICAgICAgLy8gZW1pdCBuZXcgdmFsdWVcbiAgICAgIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgdmFsdWUpXG4gICAgICBjaGFuZ2UgPT09IHRydWUgJiYgZW1pdCgnY2hhbmdlJywgdmFsdWUpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VNb2RlbCAodikge1xuICAgICAgY29uc3QgYWxwaGEgPSBmb3JjZUFscGhhLnZhbHVlICE9PSB2b2lkIDBcbiAgICAgICAgPyBmb3JjZUFscGhhLnZhbHVlXG4gICAgICAgIDogKFxuICAgICAgICAgICAgcHJvcHMuZm9ybWF0TW9kZWwgPT09ICdhdXRvJ1xuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiBwcm9wcy5mb3JtYXRNb2RlbC5pbmRleE9mKCdhJykgPiAtMVxuICAgICAgICAgIClcblxuICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJyB8fCB2Lmxlbmd0aCA9PT0gMCB8fCB0ZXN0UGF0dGVybi5hbnlDb2xvcih2LnJlcGxhY2UoLyAvZywgJycpKSAhPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGg6IDAsXG4gICAgICAgICAgczogMCxcbiAgICAgICAgICB2OiAwLFxuICAgICAgICAgIHI6IDAsXG4gICAgICAgICAgZzogMCxcbiAgICAgICAgICBiOiAwLFxuICAgICAgICAgIGE6IGFscGhhID09PSB0cnVlID8gMTAwIDogdm9pZCAwLFxuICAgICAgICAgIGhleDogdm9pZCAwLFxuICAgICAgICAgIHJnYjogdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbW9kZWwgPSB0ZXh0VG9SZ2IodilcblxuICAgICAgaWYgKGFscGhhID09PSB0cnVlICYmIG1vZGVsLmEgPT09IHZvaWQgMCkge1xuICAgICAgICBtb2RlbC5hID0gMTAwXG4gICAgICB9XG5cbiAgICAgIG1vZGVsLmhleCA9IHJnYlRvSGV4KG1vZGVsKVxuICAgICAgbW9kZWwucmdiID0gcmdiVG9TdHJpbmcobW9kZWwpXG5cbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZGVsLCByZ2JUb0hzdihtb2RlbCkpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hhbmdlU3BlY3RydW0gKGxlZnQsIHRvcCwgY2hhbmdlKSB7XG4gICAgICBjb25zdCBwYW5lbCA9IHNwZWN0cnVtUmVmLnZhbHVlXG4gICAgICBpZiAocGFuZWwgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgY29uc3RcbiAgICAgICAgd2lkdGggPSBwYW5lbC5jbGllbnRXaWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gcGFuZWwuY2xpZW50SGVpZ2h0LFxuICAgICAgICByZWN0ID0gcGFuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgICAgbGV0IHggPSBNYXRoLm1pbih3aWR0aCwgTWF0aC5tYXgoMCwgbGVmdCAtIHJlY3QubGVmdCkpXG5cbiAgICAgIGlmICgkcS5sYW5nLnJ0bCA9PT0gdHJ1ZSkge1xuICAgICAgICB4ID0gd2lkdGggLSB4XG4gICAgICB9XG5cbiAgICAgIGNvbnN0XG4gICAgICAgIHkgPSBNYXRoLm1pbihoZWlnaHQsIE1hdGgubWF4KDAsIHRvcCAtIHJlY3QudG9wKSksXG4gICAgICAgIHMgPSBNYXRoLnJvdW5kKDEwMCAqIHggLyB3aWR0aCksXG4gICAgICAgIHYgPSBNYXRoLnJvdW5kKDEwMCAqIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIC0oeSAvIGhlaWdodCkgKyAxKSkpLFxuICAgICAgICByZ2IgPSBoc3ZUb1JnYih7XG4gICAgICAgICAgaDogbW9kZWwudmFsdWUuaCxcbiAgICAgICAgICBzLFxuICAgICAgICAgIHYsXG4gICAgICAgICAgYTogaGFzQWxwaGEudmFsdWUgPT09IHRydWUgPyBtb2RlbC52YWx1ZS5hIDogdm9pZCAwXG4gICAgICAgIH0pXG5cbiAgICAgIG1vZGVsLnZhbHVlLnMgPSBzXG4gICAgICBtb2RlbC52YWx1ZS52ID0gdlxuICAgICAgdXBkYXRlTW9kZWwocmdiLCBjaGFuZ2UpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25IdWVDaGFuZ2UgKHZhbCwgY2hhbmdlKSB7XG4gICAgICBjb25zdCBoID0gTWF0aC5yb3VuZCh2YWwpXG4gICAgICBjb25zdCByZ2IgPSBoc3ZUb1JnYih7XG4gICAgICAgIGgsXG4gICAgICAgIHM6IG1vZGVsLnZhbHVlLnMsXG4gICAgICAgIHY6IG1vZGVsLnZhbHVlLnYsXG4gICAgICAgIGE6IGhhc0FscGhhLnZhbHVlID09PSB0cnVlID8gbW9kZWwudmFsdWUuYSA6IHZvaWQgMFxuICAgICAgfSlcblxuICAgICAgbW9kZWwudmFsdWUuaCA9IGhcbiAgICAgIHVwZGF0ZU1vZGVsKHJnYiwgY2hhbmdlKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTnVtZXJpY0NoYW5nZSAodmFsdWUsIGZvcm1hdE1vZGVsLCBtYXgsIGV2dCwgY2hhbmdlKSB7XG4gICAgICBldnQgIT09IHZvaWQgMCAmJiBzdG9wKGV2dClcblxuICAgICAgaWYgKCEvXlswLTldKyQvLnRlc3QodmFsdWUpKSB7XG4gICAgICAgIGNoYW5nZSA9PT0gdHJ1ZSAmJiBwcm94eS4kZm9yY2VVcGRhdGUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdmFsID0gTWF0aC5mbG9vcihOdW1iZXIodmFsdWUpKVxuXG4gICAgICBpZiAodmFsIDwgMCB8fCB2YWwgPiBtYXgpIHtcbiAgICAgICAgY2hhbmdlID09PSB0cnVlICYmIHByb3h5LiRmb3JjZVVwZGF0ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCByZ2IgPSB7XG4gICAgICAgIHI6IGZvcm1hdE1vZGVsID09PSAncicgPyB2YWwgOiBtb2RlbC52YWx1ZS5yLFxuICAgICAgICBnOiBmb3JtYXRNb2RlbCA9PT0gJ2cnID8gdmFsIDogbW9kZWwudmFsdWUuZyxcbiAgICAgICAgYjogZm9ybWF0TW9kZWwgPT09ICdiJyA/IHZhbCA6IG1vZGVsLnZhbHVlLmIsXG4gICAgICAgIGE6IGhhc0FscGhhLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgPyAoZm9ybWF0TW9kZWwgPT09ICdhJyA/IHZhbCA6IG1vZGVsLnZhbHVlLmEpXG4gICAgICAgICAgOiB2b2lkIDBcbiAgICAgIH1cblxuICAgICAgaWYgKGZvcm1hdE1vZGVsICE9PSAnYScpIHtcbiAgICAgICAgY29uc3QgaHN2ID0gcmdiVG9Ic3YocmdiKVxuICAgICAgICBtb2RlbC52YWx1ZS5oID0gaHN2LmhcbiAgICAgICAgbW9kZWwudmFsdWUucyA9IGhzdi5zXG4gICAgICAgIG1vZGVsLnZhbHVlLnYgPSBoc3YudlxuICAgICAgfVxuXG4gICAgICB1cGRhdGVNb2RlbChyZ2IsIGNoYW5nZSlcblxuICAgICAgaWYgKGV2dCAhPT0gdm9pZCAwICYmIGNoYW5nZSAhPT0gdHJ1ZSAmJiBldnQudGFyZ2V0LnNlbGVjdGlvbkVuZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZ0LnRhcmdldC5zZWxlY3Rpb25FbmRcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgIGV2dC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoaW5kZXgsIGluZGV4KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRWRpdG9yQ2hhbmdlIChldnQsIGNoYW5nZSkge1xuICAgICAgbGV0IHJnYlxuICAgICAgY29uc3QgaW5wID0gZXZ0LnRhcmdldC52YWx1ZVxuXG4gICAgICBzdG9wKGV2dClcblxuICAgICAgaWYgKHRvcFZpZXcudmFsdWUgPT09ICdoZXgnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpbnAubGVuZ3RoICE9PSAoaGFzQWxwaGEudmFsdWUgPT09IHRydWUgPyA5IDogNylcbiAgICAgICAgICB8fCAhL14jWzAtOUEtRmEtZl0rJC8udGVzdChpbnApXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICByZ2IgPSBoZXhUb1JnYihpbnApXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbGV0IG1vZGVsXG5cbiAgICAgICAgaWYgKCFpbnAuZW5kc1dpdGgoJyknKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzQWxwaGEudmFsdWUgIT09IHRydWUgJiYgaW5wLnN0YXJ0c1dpdGgoJ3JnYignKSkge1xuICAgICAgICAgIG1vZGVsID0gaW5wLnN1YnN0cmluZyg0LCBpbnAubGVuZ3RoIC0gMSkuc3BsaXQoJywnKS5tYXAobiA9PiBwYXJzZUludChuLCAxMCkpXG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBtb2RlbC5sZW5ndGggIT09IDNcbiAgICAgICAgICAgIHx8ICEvXnJnYlxcKFswLTldezEsM30sWzAtOV17MSwzfSxbMC05XXsxLDN9XFwpJC8udGVzdChpbnApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNBbHBoYS52YWx1ZSA9PT0gdHJ1ZSAmJiBpbnAuc3RhcnRzV2l0aCgncmdiYSgnKSkge1xuICAgICAgICAgIG1vZGVsID0gaW5wLnN1YnN0cmluZyg1LCBpbnAubGVuZ3RoIC0gMSkuc3BsaXQoJywnKVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbW9kZWwubGVuZ3RoICE9PSA0XG4gICAgICAgICAgICB8fCAhL15yZ2JhXFwoWzAtOV17MSwzfSxbMC05XXsxLDN9LFswLTldezEsM30sKDB8MFxcLlswLTldK1sxLTldfDBcXC5bMS05XSt8MSlcXCkkLy50ZXN0KGlucClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBwYXJzZUludChtb2RlbFsgaSBdLCAxMClcbiAgICAgICAgICAgIGlmICh2IDwgMCB8fCB2ID4gMjU1KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2RlbFsgaSBdID0gdlxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHYgPSBwYXJzZUZsb2F0KG1vZGVsWyAzIF0pXG4gICAgICAgICAgaWYgKHYgPCAwIHx8IHYgPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RlbFsgMyBdID0gdlxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgbW9kZWxbIDAgXSA8IDAgfHwgbW9kZWxbIDAgXSA+IDI1NVxuICAgICAgICAgIHx8IG1vZGVsWyAxIF0gPCAwIHx8IG1vZGVsWyAxIF0gPiAyNTVcbiAgICAgICAgICB8fCBtb2RlbFsgMiBdIDwgMCB8fCBtb2RlbFsgMiBdID4gMjU1XG4gICAgICAgICAgfHwgKGhhc0FscGhhLnZhbHVlID09PSB0cnVlICYmIChtb2RlbFsgMyBdIDwgMCB8fCBtb2RlbFsgMyBdID4gMSkpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICByZ2IgPSB7XG4gICAgICAgICAgcjogbW9kZWxbIDAgXSxcbiAgICAgICAgICBnOiBtb2RlbFsgMSBdLFxuICAgICAgICAgIGI6IG1vZGVsWyAyIF0sXG4gICAgICAgICAgYTogaGFzQWxwaGEudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8gbW9kZWxbIDMgXSAqIDEwMFxuICAgICAgICAgICAgOiB2b2lkIDBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoc3YgPSByZ2JUb0hzdihyZ2IpXG4gICAgICBtb2RlbC52YWx1ZS5oID0gaHN2LmhcbiAgICAgIG1vZGVsLnZhbHVlLnMgPSBoc3Yuc1xuICAgICAgbW9kZWwudmFsdWUudiA9IGhzdi52XG5cbiAgICAgIHVwZGF0ZU1vZGVsKHJnYiwgY2hhbmdlKVxuXG4gICAgICBpZiAoY2hhbmdlICE9PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZ0LnRhcmdldC5zZWxlY3Rpb25FbmRcbiAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgIGV2dC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoaW5kZXgsIGluZGV4KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUGFsZXR0ZVBpY2sgKGNvbG9yKSB7XG4gICAgICBjb25zdCBkZWYgPSBwYXJzZU1vZGVsKGNvbG9yKVxuICAgICAgY29uc3QgcmdiID0geyByOiBkZWYuciwgZzogZGVmLmcsIGI6IGRlZi5iLCBhOiBkZWYuYSB9XG5cbiAgICAgIGlmIChyZ2IuYSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJnYi5hID0gbW9kZWwudmFsdWUuYVxuICAgICAgfVxuXG4gICAgICBtb2RlbC52YWx1ZS5oID0gZGVmLmhcbiAgICAgIG1vZGVsLnZhbHVlLnMgPSBkZWYuc1xuICAgICAgbW9kZWwudmFsdWUudiA9IGRlZi52XG5cbiAgICAgIHVwZGF0ZU1vZGVsKHJnYiwgdHJ1ZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblNwZWN0cnVtUGFuIChldnQpIHtcbiAgICAgIGlmIChldnQuaXNGaW5hbCkge1xuICAgICAgICBjaGFuZ2VTcGVjdHJ1bShcbiAgICAgICAgICBldnQucG9zaXRpb24ubGVmdCxcbiAgICAgICAgICBldnQucG9zaXRpb24udG9wLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG9uU3BlY3RydW1DaGFuZ2UoZXZ0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9uU3BlY3RydW1DaGFuZ2UgPSB0aHJvdHRsZShcbiAgICAgIGV2dCA9PiB7IGNoYW5nZVNwZWN0cnVtKGV2dC5wb3NpdGlvbi5sZWZ0LCBldnQucG9zaXRpb24udG9wKSB9LFxuICAgICAgMjBcbiAgICApXG5cbiAgICBmdW5jdGlvbiBvblNwZWN0cnVtQ2xpY2sgKGV2dCkge1xuICAgICAgY2hhbmdlU3BlY3RydW0oXG4gICAgICAgIGV2dC5wYWdlWCAtIHdpbmRvdy5wYWdlWE9mZnNldCxcbiAgICAgICAgZXZ0LnBhZ2VZIC0gd2luZG93LnBhZ2VZT2Zmc2V0LFxuICAgICAgICB0cnVlXG4gICAgICApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25BY3RpdmF0ZSAoZXZ0KSB7XG4gICAgICBjaGFuZ2VTcGVjdHJ1bShcbiAgICAgICAgZXZ0LnBhZ2VYIC0gd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICBldnQucGFnZVkgLSB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgIClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVFcnJvckljb24gKHZhbCkge1xuICAgICAgLy8gd2UgTVVTVCBhdm9pZCB2dWUgdHJpZ2dlcmluZyBhIHJlbmRlcixcbiAgICAgIC8vIHNvIG1hbnVhbGx5IGNoYW5naW5nIHRoaXNcbiAgICAgIGlmIChlcnJvckljb25SZWYudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgZXJyb3JJY29uUmVmLnZhbHVlLiRlbC5zdHlsZS5vcGFjaXR5ID0gdmFsID8gMSA6IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRIZWFkZXIgKCkge1xuICAgICAgY29uc3QgY2hpbGQgPSBbXVxuXG4gICAgICBwcm9wcy5ub0hlYWRlclRhYnMgIT09IHRydWUgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaChRVGFicywge1xuICAgICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX2hlYWRlci10YWJzJyxcbiAgICAgICAgICBtb2RlbFZhbHVlOiB0b3BWaWV3LnZhbHVlLFxuICAgICAgICAgIGRlbnNlOiB0cnVlLFxuICAgICAgICAgIGFsaWduOiAnanVzdGlmeScsXG4gICAgICAgICAgLi4uZ2V0Q2FjaGUoJ3RvcFZUYWInLCB7XG4gICAgICAgICAgICAnb25VcGRhdGU6bW9kZWxWYWx1ZSc6IHZhbCA9PiB7IHRvcFZpZXcudmFsdWUgPSB2YWwgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sICgpID0+IFtcbiAgICAgICAgICBoKFFUYWIsIHtcbiAgICAgICAgICAgIGxhYmVsOiAnSEVYJyArIChoYXNBbHBoYS52YWx1ZSA9PT0gdHJ1ZSA/ICdBJyA6ICcnKSxcbiAgICAgICAgICAgIG5hbWU6ICdoZXgnLFxuICAgICAgICAgICAgcmlwcGxlOiBmYWxzZVxuICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgaChRVGFiLCB7XG4gICAgICAgICAgICBsYWJlbDogJ1JHQicgKyAoaGFzQWxwaGEudmFsdWUgPT09IHRydWUgPyAnQScgOiAnJyksXG4gICAgICAgICAgICBuYW1lOiAncmdiJyxcbiAgICAgICAgICAgIHJpcHBsZTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgKVxuXG4gICAgICBjaGlsZC5wdXNoKFxuICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWNvbG9yLXBpY2tlcl9faGVhZGVyLWJhbm5lciByb3cgZmxleC1jZW50ZXIgbm8td3JhcCdcbiAgICAgICAgfSwgW1xuICAgICAgICAgIGgoJ2lucHV0Jywge1xuICAgICAgICAgICAgY2xhc3M6ICdmaXQnLFxuICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlWyB0b3BWaWV3LnZhbHVlIF0sXG4gICAgICAgICAgICAuLi4oZWRpdGFibGUudmFsdWUgIT09IHRydWVcbiAgICAgICAgICAgICAgPyB7IHJlYWRvbmx5OiB0cnVlIH1cbiAgICAgICAgICAgICAgOiB7fVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIC4uLmdldENhY2hlKCd0b3BJbicsIHtcbiAgICAgICAgICAgICAgb25JbnB1dDogZXZ0ID0+IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVFcnJvckljb24ob25FZGl0b3JDaGFuZ2UoZXZ0KSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHN0b3AsXG4gICAgICAgICAgICAgIG9uQmx1cjogZXZ0ID0+IHtcbiAgICAgICAgICAgICAgICBvbkVkaXRvckNoYW5nZShldnQsIHRydWUpID09PSB0cnVlICYmIHByb3h5LiRmb3JjZVVwZGF0ZSgpXG4gICAgICAgICAgICAgICAgdXBkYXRlRXJyb3JJY29uKGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgICAgcmVmOiBlcnJvckljb25SZWYsXG4gICAgICAgICAgICBjbGFzczogJ3EtY29sb3ItcGlja2VyX19lcnJvci1pY29uIGFic29sdXRlIG5vLXBvaW50ZXItZXZlbnRzJyxcbiAgICAgICAgICAgIG5hbWU6ICRxLmljb25TZXQudHlwZS5uZWdhdGl2ZVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICApXG5cbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX2hlYWRlciByZWxhdGl2ZS1wb3NpdGlvbiBvdmVyZmxvdy1oaWRkZW4nXG4gICAgICB9LCBbXG4gICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdxLWNvbG9yLXBpY2tlcl9faGVhZGVyLWJnIGFic29sdXRlLWZ1bGwnIH0pLFxuXG4gICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogaGVhZGVyQ2xhc3MudmFsdWUsXG4gICAgICAgICAgc3R5bGU6IGN1cnJlbnRCZ0NvbG9yLnZhbHVlXG4gICAgICAgIH0sIGNoaWxkKVxuICAgICAgXSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb250ZW50ICgpIHtcbiAgICAgIHJldHVybiBoKFFUYWJQYW5lbHMsIHtcbiAgICAgICAgbW9kZWxWYWx1ZTogdmlldy52YWx1ZSxcbiAgICAgICAgYW5pbWF0ZWQ6IHRydWVcbiAgICAgIH0sICgpID0+IFtcbiAgICAgICAgaChRVGFiUGFuZWwsIHtcbiAgICAgICAgICBjbGFzczogJ3EtY29sb3ItcGlja2VyX19zcGVjdHJ1bS10YWIgb3ZlcmZsb3ctaGlkZGVuJyxcbiAgICAgICAgICBuYW1lOiAnc3BlY3RydW0nXG4gICAgICAgIH0sIGdldFNwZWN0cnVtVGFiKSxcblxuICAgICAgICBoKFFUYWJQYW5lbCwge1xuICAgICAgICAgIGNsYXNzOiAncS1wYS1tZCBxLWNvbG9yLXBpY2tlcl9fdHVuZS10YWInLFxuICAgICAgICAgIG5hbWU6ICd0dW5lJ1xuICAgICAgICB9LCBnZXRUdW5lVGFiKSxcblxuICAgICAgICBoKFFUYWJQYW5lbCwge1xuICAgICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX3BhbGV0dGUtdGFiJyxcbiAgICAgICAgICBuYW1lOiAncGFsZXR0ZSdcbiAgICAgICAgfSwgZ2V0UGFsZXR0ZVRhYilcbiAgICAgIF0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Rm9vdGVyICgpIHtcbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX2Zvb3RlciByZWxhdGl2ZS1wb3NpdGlvbiBvdmVyZmxvdy1oaWRkZW4nXG4gICAgICB9LCBbXG4gICAgICAgIGgoUVRhYnMsIHtcbiAgICAgICAgICBjbGFzczogJ2Fic29sdXRlLWZ1bGwnLFxuICAgICAgICAgIG1vZGVsVmFsdWU6IHZpZXcudmFsdWUsXG4gICAgICAgICAgZGVuc2U6IHRydWUsXG4gICAgICAgICAgYWxpZ246ICdqdXN0aWZ5JyxcbiAgICAgICAgICAuLi5nZXRDYWNoZSgnZnRJbicsIHtcbiAgICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogdmFsID0+IHsgdmlldy52YWx1ZSA9IHZhbCB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSwgKCkgPT4gW1xuICAgICAgICAgIGgoUVRhYiwge1xuICAgICAgICAgICAgaWNvbjogJHEuaWNvblNldC5jb2xvclBpY2tlci5zcGVjdHJ1bSxcbiAgICAgICAgICAgIG5hbWU6ICdzcGVjdHJ1bScsXG4gICAgICAgICAgICByaXBwbGU6IGZhbHNlXG4gICAgICAgICAgfSksXG5cbiAgICAgICAgICBoKFFUYWIsIHtcbiAgICAgICAgICAgIGljb246ICRxLmljb25TZXQuY29sb3JQaWNrZXIudHVuZSxcbiAgICAgICAgICAgIG5hbWU6ICd0dW5lJyxcbiAgICAgICAgICAgIHJpcHBsZTogZmFsc2VcbiAgICAgICAgICB9KSxcblxuICAgICAgICAgIGgoUVRhYiwge1xuICAgICAgICAgICAgaWNvbjogJHEuaWNvblNldC5jb2xvclBpY2tlci5wYWxldHRlLFxuICAgICAgICAgICAgbmFtZTogJ3BhbGV0dGUnLFxuICAgICAgICAgICAgcmlwcGxlOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICBdKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNwZWN0cnVtVGFiICgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHJlZjogc3BlY3RydW1SZWYsXG4gICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX3NwZWN0cnVtIG5vbi1zZWxlY3RhYmxlIHJlbGF0aXZlLXBvc2l0aW9uIGN1cnNvci1wb2ludGVyJ1xuICAgICAgICAgICsgKGVkaXRhYmxlLnZhbHVlICE9PSB0cnVlID8gJyByZWFkb25seScgOiAnJyksXG4gICAgICAgIHN0eWxlOiBzcGVjdHJ1bVN0eWxlLnZhbHVlLFxuICAgICAgICAuLi4oZWRpdGFibGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgb25DbGljazogb25TcGVjdHJ1bUNsaWNrLFxuICAgICAgICAgICAgICBvbk1vdXNlZG93bjogb25BY3RpdmF0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge31cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZCA9IFtcbiAgICAgICAgaCgnZGl2JywgeyBzdHlsZTogeyBwYWRkaW5nQm90dG9tOiAnMTAwJScgfSB9KSxcbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtY29sb3ItcGlja2VyX19zcGVjdHJ1bS13aGl0ZSBhYnNvbHV0ZS1mdWxsJyB9KSxcbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtY29sb3ItcGlja2VyX19zcGVjdHJ1bS1ibGFjayBhYnNvbHV0ZS1mdWxsJyB9KSxcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHN0eWxlOiBzcGVjdHJ1bVBvaW50ZXJTdHlsZS52YWx1ZVxuICAgICAgICB9LCBbXG4gICAgICAgICAgbW9kZWwudmFsdWUuaGV4ICE9PSB2b2lkIDBcbiAgICAgICAgICAgID8gaCgnZGl2JywgeyBjbGFzczogJ3EtY29sb3ItcGlja2VyX19zcGVjdHJ1bS1jaXJjbGUnIH0pXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgXSlcbiAgICAgIF1cblxuICAgICAgY29uc3Qgc2xpZGVycyA9IFtcbiAgICAgICAgaChRU2xpZGVyLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWNvbG9yLXBpY2tlcl9faHVlIG5vbi1zZWxlY3RhYmxlJyxcbiAgICAgICAgICBtb2RlbFZhbHVlOiBtb2RlbC52YWx1ZS5oLFxuICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICBtYXg6IDM2MCxcbiAgICAgICAgICB0cmFja1NpemU6ICc4cHgnLFxuICAgICAgICAgIGlubmVyVHJhY2tDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICBzZWxlY3Rpb25Db2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICByZWFkb25seTogZWRpdGFibGUudmFsdWUgIT09IHRydWUsXG4gICAgICAgICAgdGh1bWJQYXRoLFxuICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogb25IdWVDaGFuZ2UsXG4gICAgICAgICAgLi4uZ2V0Q2FjaGUoJ2xhenlodWUnLCB7XG4gICAgICAgICAgICBvbkNoYW5nZTogdmFsID0+IG9uSHVlQ2hhbmdlKHZhbCwgdHJ1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgXVxuXG4gICAgICBoYXNBbHBoYS52YWx1ZSA9PT0gdHJ1ZSAmJiBzbGlkZXJzLnB1c2goXG4gICAgICAgIGgoUVNsaWRlciwge1xuICAgICAgICAgIGNsYXNzOiAncS1jb2xvci1waWNrZXJfX2FscGhhIG5vbi1zZWxlY3RhYmxlJyxcbiAgICAgICAgICBtb2RlbFZhbHVlOiBtb2RlbC52YWx1ZS5hLFxuICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICB0cmFja1NpemU6ICc4cHgnLFxuICAgICAgICAgIHRyYWNrQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgICAgaW5uZXJUcmFja0NvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIHNlbGVjdGlvbkNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIHRyYWNrSW1nOiBhbHBoYVRyYWNrSW1nLFxuICAgICAgICAgIHJlYWRvbmx5OiBlZGl0YWJsZS52YWx1ZSAhPT0gdHJ1ZSxcbiAgICAgICAgICBoaWRlU2VsZWN0aW9uOiB0cnVlLFxuICAgICAgICAgIHRodW1iUGF0aCxcbiAgICAgICAgICAuLi5nZXRDYWNoZSgnYWxwaGFTbGlkZScsIHtcbiAgICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogdmFsdWUgPT4gb25OdW1lcmljQ2hhbmdlKHZhbHVlLCAnYScsIDEwMCksXG4gICAgICAgICAgICBvbkNoYW5nZTogdmFsdWUgPT4gb25OdW1lcmljQ2hhbmdlKHZhbHVlLCAnYScsIDEwMCwgdm9pZCAwLCB0cnVlKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICApXG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIGhEaXIoJ2RpdicsIGRhdGEsIGNoaWxkLCAnc3BlYycsIGVkaXRhYmxlLnZhbHVlLCAoKSA9PiBzcGVjdHJ1bURpcmVjdGl2ZS52YWx1ZSksXG4gICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdxLWNvbG9yLXBpY2tlcl9fc2xpZGVycycgfSwgc2xpZGVycylcbiAgICAgIF1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUdW5lVGFiICgpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdyb3cgaXRlbXMtY2VudGVyIG5vLXdyYXAnIH0sIFtcbiAgICAgICAgICBoKCdkaXYnLCAnUicpLFxuICAgICAgICAgIGgoUVNsaWRlciwge1xuICAgICAgICAgICAgbW9kZWxWYWx1ZTogbW9kZWwudmFsdWUucixcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMjU1LFxuICAgICAgICAgICAgY29sb3I6ICdyZWQnLFxuICAgICAgICAgICAgZGFyazogaXNEYXJrLnZhbHVlLFxuICAgICAgICAgICAgcmVhZG9ubHk6IGVkaXRhYmxlLnZhbHVlICE9PSB0cnVlLFxuICAgICAgICAgICAgLi4uZ2V0Q2FjaGUoJ3JTbGlkZScsIHtcbiAgICAgICAgICAgICAgJ29uVXBkYXRlOm1vZGVsVmFsdWUnOiB2YWx1ZSA9PiBvbk51bWVyaWNDaGFuZ2UodmFsdWUsICdyJywgMjU1KSxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHZhbHVlID0+IG9uTnVtZXJpY0NoYW5nZSh2YWx1ZSwgJ3InLCAyNTUsIHZvaWQgMCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgaCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB2YWx1ZTogbW9kZWwudmFsdWUucixcbiAgICAgICAgICAgIG1heGxlbmd0aDogMyxcbiAgICAgICAgICAgIHJlYWRvbmx5OiBlZGl0YWJsZS52YWx1ZSAhPT0gdHJ1ZSxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBzdG9wLFxuICAgICAgICAgICAgLi4uZ2V0Q2FjaGUoJ3JJbicsIHtcbiAgICAgICAgICAgICAgb25JbnB1dDogZXZ0ID0+IG9uTnVtZXJpY0NoYW5nZShldnQudGFyZ2V0LnZhbHVlLCAncicsIDI1NSwgZXZ0KSxcbiAgICAgICAgICAgICAgb25CbHVyOiBldnQgPT4gb25OdW1lcmljQ2hhbmdlKGV2dC50YXJnZXQudmFsdWUsICdyJywgMjU1LCBldnQsIHRydWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pLFxuXG4gICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdyb3cgaXRlbXMtY2VudGVyIG5vLXdyYXAnIH0sIFtcbiAgICAgICAgICBoKCdkaXYnLCAnRycpLFxuICAgICAgICAgIGgoUVNsaWRlciwge1xuICAgICAgICAgICAgbW9kZWxWYWx1ZTogbW9kZWwudmFsdWUuZyxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMjU1LFxuICAgICAgICAgICAgY29sb3I6ICdncmVlbicsXG4gICAgICAgICAgICBkYXJrOiBpc0RhcmsudmFsdWUsXG4gICAgICAgICAgICByZWFkb25seTogZWRpdGFibGUudmFsdWUgIT09IHRydWUsXG4gICAgICAgICAgICAuLi5nZXRDYWNoZSgnZ1NsaWRlJywge1xuICAgICAgICAgICAgICAnb25VcGRhdGU6bW9kZWxWYWx1ZSc6IHZhbHVlID0+IG9uTnVtZXJpY0NoYW5nZSh2YWx1ZSwgJ2cnLCAyNTUpLFxuICAgICAgICAgICAgICBvbkNoYW5nZTogdmFsdWUgPT4gb25OdW1lcmljQ2hhbmdlKHZhbHVlLCAnZycsIDI1NSwgdm9pZCAwLCB0cnVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBoKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHZhbHVlOiBtb2RlbC52YWx1ZS5nLFxuICAgICAgICAgICAgbWF4bGVuZ3RoOiAzLFxuICAgICAgICAgICAgcmVhZG9ubHk6IGVkaXRhYmxlLnZhbHVlICE9PSB0cnVlLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHN0b3AsXG4gICAgICAgICAgICAuLi5nZXRDYWNoZSgnZ0luJywge1xuICAgICAgICAgICAgICBvbklucHV0OiBldnQgPT4gb25OdW1lcmljQ2hhbmdlKGV2dC50YXJnZXQudmFsdWUsICdnJywgMjU1LCBldnQpLFxuICAgICAgICAgICAgICBvbkJsdXI6IGV2dCA9PiBvbk51bWVyaWNDaGFuZ2UoZXZ0LnRhcmdldC52YWx1ZSwgJ2cnLCAyNTUsIGV2dCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgXSksXG5cbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3JvdyBpdGVtcy1jZW50ZXIgbm8td3JhcCcgfSwgW1xuICAgICAgICAgIGgoJ2RpdicsICdCJyksXG4gICAgICAgICAgaChRU2xpZGVyLCB7XG4gICAgICAgICAgICBtb2RlbFZhbHVlOiBtb2RlbC52YWx1ZS5iLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyNTUsXG4gICAgICAgICAgICBjb2xvcjogJ2JsdWUnLFxuICAgICAgICAgICAgcmVhZG9ubHk6IGVkaXRhYmxlLnZhbHVlICE9PSB0cnVlLFxuICAgICAgICAgICAgZGFyazogaXNEYXJrLnZhbHVlLFxuICAgICAgICAgICAgLi4uZ2V0Q2FjaGUoJ2JTbGlkZScsIHtcbiAgICAgICAgICAgICAgJ29uVXBkYXRlOm1vZGVsVmFsdWUnOiB2YWx1ZSA9PiBvbk51bWVyaWNDaGFuZ2UodmFsdWUsICdiJywgMjU1KSxcbiAgICAgICAgICAgICAgb25DaGFuZ2U6IHZhbHVlID0+IG9uTnVtZXJpY0NoYW5nZSh2YWx1ZSwgJ2InLCAyNTUsIHZvaWQgMCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgaCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB2YWx1ZTogbW9kZWwudmFsdWUuYixcbiAgICAgICAgICAgIG1heGxlbmd0aDogMyxcbiAgICAgICAgICAgIHJlYWRvbmx5OiBlZGl0YWJsZS52YWx1ZSAhPT0gdHJ1ZSxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBzdG9wLFxuICAgICAgICAgICAgLi4uZ2V0Q2FjaGUoJ2JJbicsIHtcbiAgICAgICAgICAgICAgb25JbnB1dDogZXZ0ID0+IG9uTnVtZXJpY0NoYW5nZShldnQudGFyZ2V0LnZhbHVlLCAnYicsIDI1NSwgZXZ0KSxcbiAgICAgICAgICAgICAgb25CbHVyOiBldnQgPT4gb25OdW1lcmljQ2hhbmdlKGV2dC50YXJnZXQudmFsdWUsICdiJywgMjU1LCBldnQsIHRydWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pLFxuXG4gICAgICAgIGhhc0FscGhhLnZhbHVlID09PSB0cnVlID8gaCgnZGl2JywgeyBjbGFzczogJ3JvdyBpdGVtcy1jZW50ZXIgbm8td3JhcCcgfSwgW1xuICAgICAgICAgIGgoJ2RpdicsICdBJyksXG4gICAgICAgICAgaChRU2xpZGVyLCB7XG4gICAgICAgICAgICBtb2RlbFZhbHVlOiBtb2RlbC52YWx1ZS5hLFxuICAgICAgICAgICAgY29sb3I6ICdncmV5JyxcbiAgICAgICAgICAgIHJlYWRvbmx5OiBlZGl0YWJsZS52YWx1ZSAhPT0gdHJ1ZSxcbiAgICAgICAgICAgIGRhcms6IGlzRGFyay52YWx1ZSxcbiAgICAgICAgICAgIC4uLmdldENhY2hlKCdhU2xpZGUnLCB7XG4gICAgICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogdmFsdWUgPT4gb25OdW1lcmljQ2hhbmdlKHZhbHVlLCAnYScsIDEwMCksXG4gICAgICAgICAgICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiBvbk51bWVyaWNDaGFuZ2UodmFsdWUsICdhJywgMTAwLCB2b2lkIDAsIHRydWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGgoJ2lucHV0Jywge1xuICAgICAgICAgICAgdmFsdWU6IG1vZGVsLnZhbHVlLmEsXG4gICAgICAgICAgICBtYXhsZW5ndGg6IDMsXG4gICAgICAgICAgICByZWFkb25seTogZWRpdGFibGUudmFsdWUgIT09IHRydWUsXG4gICAgICAgICAgICBvbkNoYW5nZTogc3RvcCxcbiAgICAgICAgICAgIC4uLmdldENhY2hlKCdhSW4nLCB7XG4gICAgICAgICAgICAgIG9uSW5wdXQ6IGV2dCA9PiBvbk51bWVyaWNDaGFuZ2UoZXZ0LnRhcmdldC52YWx1ZSwgJ2EnLCAxMDAsIGV2dCksXG4gICAgICAgICAgICAgIG9uQmx1cjogZXZ0ID0+IG9uTnVtZXJpY0NoYW5nZShldnQudGFyZ2V0LnZhbHVlLCAnYScsIDEwMCwgZXZ0LCB0cnVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICBdKSA6IG51bGxcbiAgICAgIF1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYWxldHRlVGFiICgpIHtcbiAgICAgIGNvbnN0IGZuID0gY29sb3IgPT4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtY29sb3ItcGlja2VyX19jdWJlIGNvbC1hdXRvJyxcbiAgICAgICAgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9LFxuICAgICAgICAuLi4oXG4gICAgICAgICAgZWRpdGFibGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8gZ2V0Q2FjaGUoJ3BhbGV0dGUjJyArIGNvbG9yLCB7XG4gICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHsgb25QYWxldHRlUGljayhjb2xvcikgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDoge31cbiAgICAgICAgKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncm93IGl0ZW1zLWNlbnRlciBxLWNvbG9yLXBpY2tlcl9fcGFsZXR0ZS1yb3dzJ1xuICAgICAgICAgICAgKyAoZWRpdGFibGUudmFsdWUgPT09IHRydWUgPyAnIHEtY29sb3ItcGlja2VyX19wYWxldHRlLXJvd3MtLWVkaXRhYmxlJyA6ICcnKVxuICAgICAgICB9LCBjb21wdXRlZFBhbGV0dGUudmFsdWUubWFwKGZuKSlcbiAgICAgIF1cbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgY2hpbGQgPSBbIGdldENvbnRlbnQoKSBdXG5cbiAgICAgIGlmIChwcm9wcy5uYW1lICE9PSB2b2lkIDAgJiYgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpbmplY3RGb3JtSW5wdXQoY2hpbGQsICdwdXNoJylcbiAgICAgIH1cblxuICAgICAgcHJvcHMubm9IZWFkZXIgIT09IHRydWUgJiYgY2hpbGQudW5zaGlmdChcbiAgICAgICAgZ2V0SGVhZGVyKClcbiAgICAgIClcblxuICAgICAgcHJvcHMubm9Gb290ZXIgIT09IHRydWUgJiYgY2hpbGQucHVzaChcbiAgICAgICAgZ2V0Rm9vdGVyKClcbiAgICAgIClcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAgIC4uLmF0dHJpYnV0ZXMudmFsdWVcbiAgICAgIH0sIGNoaWxkKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRRGlhbG9nIGZyb20gJy4uL2RpYWxvZy9RRGlhbG9nLmpzJ1xuaW1wb3J0IFFNZW51IGZyb20gJy4uL21lbnUvUU1lbnUuanMnXG5cbmltcG9ydCB1c2VBbmNob3IsIHsgdXNlQW5jaG9yUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1hbmNob3IuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvaW5qZWN0LW9iai1wcm9wLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVBvcHVwUHJveHknLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlQW5jaG9yUHJvcHMsXG5cbiAgICBicmVha3BvaW50OiB7XG4gICAgICB0eXBlOiBbIFN0cmluZywgTnVtYmVyIF0sXG4gICAgICBkZWZhdWx0OiA0NTBcbiAgICB9XG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3Nob3cnLCAnaGlkZScgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMsIGVtaXQsIGF0dHJzIH0pIHtcbiAgICBjb25zdCB7IHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICAgIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgICBjb25zdCBzaG93aW5nID0gcmVmKGZhbHNlKVxuICAgIGNvbnN0IHBvcHVwUmVmID0gcmVmKG51bGwpXG4gICAgY29uc3QgYnJlYWtwb2ludCA9IGNvbXB1dGVkKCgpID0+IHBhcnNlSW50KHByb3BzLmJyZWFrcG9pbnQsIDEwKSlcblxuICAgIGNvbnN0IHsgY2FuU2hvdyB9ID0gdXNlQW5jaG9yKHsgc2hvd2luZyB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0VHlwZSAoKSB7XG4gICAgICByZXR1cm4gJHEuc2NyZWVuLndpZHRoIDwgYnJlYWtwb2ludC52YWx1ZSB8fCAkcS5zY3JlZW4uaGVpZ2h0IDwgYnJlYWtwb2ludC52YWx1ZVxuICAgICAgICA/ICdkaWFsb2cnXG4gICAgICAgIDogJ21lbnUnXG4gICAgfVxuXG4gICAgY29uc3QgdHlwZSA9IHJlZihnZXRUeXBlKCkpXG5cbiAgICBjb25zdCBwb3B1cFByb3BzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgdHlwZS52YWx1ZSA9PT0gJ21lbnUnID8geyBtYXhIZWlnaHQ6ICc5OXZoJyB9IDoge30pXG4gICAgKVxuXG4gICAgd2F0Y2goKCkgPT4gZ2V0VHlwZSgpLCB2YWwgPT4ge1xuICAgICAgaWYgKHNob3dpbmcudmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgdHlwZS52YWx1ZSA9IHZhbFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBvblNob3cgKGV2dCkge1xuICAgICAgc2hvd2luZy52YWx1ZSA9IHRydWVcbiAgICAgIGVtaXQoJ3Nob3cnLCBldnQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25IaWRlIChldnQpIHtcbiAgICAgIHNob3dpbmcudmFsdWUgPSBmYWxzZVxuICAgICAgdHlwZS52YWx1ZSA9IGdldFR5cGUoKVxuICAgICAgZW1pdCgnaGlkZScsIGV2dClcbiAgICB9XG5cbiAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICBPYmplY3QuYXNzaWduKHByb3h5LCB7XG4gICAgICBzaG93IChldnQpIHsgY2FuU2hvdyhldnQpID09PSB0cnVlICYmIHBvcHVwUmVmLnZhbHVlLnNob3coZXZ0KSB9LFxuICAgICAgaGlkZSAoZXZ0KSB7IHBvcHVwUmVmLnZhbHVlLmhpZGUoZXZ0KSB9LFxuICAgICAgdG9nZ2xlIChldnQpIHsgcG9wdXBSZWYudmFsdWUudG9nZ2xlKGV2dCkgfVxuICAgIH0pXG5cbiAgICBpbmplY3RQcm9wKHByb3h5LCAnY3VycmVudENvbXBvbmVudCcsICgpID0+ICh7XG4gICAgICB0eXBlOiB0eXBlLnZhbHVlLFxuICAgICAgcmVmOiBwb3B1cFJlZi52YWx1ZVxuICAgIH0pKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHJlZjogcG9wdXBSZWYsXG4gICAgICAgIC4uLnBvcHVwUHJvcHMudmFsdWUsXG4gICAgICAgIC4uLmF0dHJzLFxuICAgICAgICBvblNob3csXG4gICAgICAgIG9uSGlkZVxuICAgICAgfVxuXG4gICAgICBsZXQgY29tcG9uZW50XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAnZGlhbG9nJykge1xuICAgICAgICBjb21wb25lbnQgPSBRRGlhbG9nXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50ID0gUU1lbnVcbiAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCB7XG4gICAgICAgICAgdGFyZ2V0OiBwcm9wcy50YXJnZXQsXG4gICAgICAgICAgY29udGV4dE1lbnU6IHByb3BzLmNvbnRleHRNZW51LFxuICAgICAgICAgIG5vUGFyZW50RXZlbnQ6IHRydWUsXG4gICAgICAgICAgc2VwYXJhdGVDbG9zZVBvcHVwOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoKGNvbXBvbmVudCwgZGF0YSwgc2xvdHMuZGVmYXVsdClcbiAgICB9XG4gIH1cbn0pXG4iLCJleHBvcnQgdmFyIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cztcbihmdW5jdGlvbiAoSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzKSB7XG4gICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tcIlFSX0NPREVcIl0gPSAwXSA9IFwiUVJfQ09ERVwiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJBWlRFQ1wiXSA9IDFdID0gXCJBWlRFQ1wiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJDT0RBQkFSXCJdID0gMl0gPSBcIkNPREFCQVJcIjtcbiAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW1wiQ09ERV8zOVwiXSA9IDNdID0gXCJDT0RFXzM5XCI7XG4gICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tcIkNPREVfOTNcIl0gPSA0XSA9IFwiQ09ERV85M1wiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJDT0RFXzEyOFwiXSA9IDVdID0gXCJDT0RFXzEyOFwiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJEQVRBX01BVFJJWFwiXSA9IDZdID0gXCJEQVRBX01BVFJJWFwiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJNQVhJQ09ERVwiXSA9IDddID0gXCJNQVhJQ09ERVwiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJJVEZcIl0gPSA4XSA9IFwiSVRGXCI7XG4gICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tcIkVBTl8xM1wiXSA9IDldID0gXCJFQU5fMTNcIjtcbiAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW1wiRUFOXzhcIl0gPSAxMF0gPSBcIkVBTl84XCI7XG4gICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tcIlBERl80MTdcIl0gPSAxMV0gPSBcIlBERl80MTdcIjtcbiAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW1wiUlNTXzE0XCJdID0gMTJdID0gXCJSU1NfMTRcIjtcbiAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW1wiUlNTX0VYUEFOREVEXCJdID0gMTNdID0gXCJSU1NfRVhQQU5ERURcIjtcbiAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW1wiVVBDX0FcIl0gPSAxNF0gPSBcIlVQQ19BXCI7XG4gICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tcIlVQQ19FXCJdID0gMTVdID0gXCJVUENfRVwiO1xuICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1tIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNbXCJVUENfRUFOX0VYVEVOU0lPTlwiXSA9IDE2XSA9IFwiVVBDX0VBTl9FWFRFTlNJT05cIjtcbn0pKEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cyB8fCAoSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzID0ge30pKTtcbnZhciBodG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNUZXh0TWFwID0gbmV3IE1hcChbXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5RUl9DT0RFLCBcIlFSX0NPREVcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5BWlRFQywgXCJBWlRFQ1wiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREFCQVIsIFwiQ09EQUJBUlwiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREVfMzksIFwiQ09ERV8zOVwiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREVfOTMsIFwiQ09ERV85M1wiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREVfMTI4LCBcIkNPREVfMTI4XCJdLFxuICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuREFUQV9NQVRSSVgsIFwiREFUQV9NQVRSSVhcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5NQVhJQ09ERSwgXCJNQVhJQ09ERVwiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLklURiwgXCJJVEZcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5FQU5fMTMsIFwiRUFOXzEzXCJdLFxuICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuRUFOXzgsIFwiRUFOXzhcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5QREZfNDE3LCBcIlBERl80MTdcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5SU1NfMTQsIFwiUlNTXzE0XCJdLFxuICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuUlNTX0VYUEFOREVELCBcIlJTU19FWFBBTkRFRFwiXSxcbiAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlVQQ19BLCBcIlVQQ19BXCJdLFxuICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuVVBDX0UsIFwiVVBDX0VcIl0sXG4gICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5VUENfRUFOX0VYVEVOU0lPTiwgXCJVUENfRUFOX0VYVEVOU0lPTlwiXVxuXSk7XG5leHBvcnQgdmFyIERlY29kZWRUZXh0VHlwZTtcbihmdW5jdGlvbiAoRGVjb2RlZFRleHRUeXBlKSB7XG4gICAgRGVjb2RlZFRleHRUeXBlW0RlY29kZWRUZXh0VHlwZVtcIlVOS05PV05cIl0gPSAwXSA9IFwiVU5LTk9XTlwiO1xuICAgIERlY29kZWRUZXh0VHlwZVtEZWNvZGVkVGV4dFR5cGVbXCJVUkxcIl0gPSAxXSA9IFwiVVJMXCI7XG59KShEZWNvZGVkVGV4dFR5cGUgfHwgKERlY29kZWRUZXh0VHlwZSA9IHt9KSk7XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cyhmb3JtYXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMpLmluY2x1ZGVzKGZvcm1hdCk7XG59XG5leHBvcnQgdmFyIEh0bWw1UXJjb2RlU2NhblR5cGU7XG4oZnVuY3Rpb24gKEh0bWw1UXJjb2RlU2NhblR5cGUpIHtcbiAgICBIdG1sNVFyY29kZVNjYW5UeXBlW0h0bWw1UXJjb2RlU2NhblR5cGVbXCJTQ0FOX1RZUEVfQ0FNRVJBXCJdID0gMF0gPSBcIlNDQU5fVFlQRV9DQU1FUkFcIjtcbiAgICBIdG1sNVFyY29kZVNjYW5UeXBlW0h0bWw1UXJjb2RlU2NhblR5cGVbXCJTQ0FOX1RZUEVfRklMRVwiXSA9IDFdID0gXCJTQ0FOX1RZUEVfRklMRVwiO1xufSkoSHRtbDVRcmNvZGVTY2FuVHlwZSB8fCAoSHRtbDVRcmNvZGVTY2FuVHlwZSA9IHt9KSk7XG52YXIgSHRtbDVRcmNvZGVDb25zdGFudHMgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEh0bWw1UXJjb2RlQ29uc3RhbnRzKCkge1xuICAgIH1cbiAgICBIdG1sNVFyY29kZUNvbnN0YW50cy5HSVRIVUJfUFJPSkVDVF9VUkwgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9tZWJqYXMvaHRtbDUtcXJjb2RlXCI7XG4gICAgSHRtbDVRcmNvZGVDb25zdGFudHMuU0NBTl9ERUZBVUxUX0ZQUyA9IDI7XG4gICAgSHRtbDVRcmNvZGVDb25zdGFudHMuREVGQVVMVF9ESVNBQkxFX0ZMSVAgPSBmYWxzZTtcbiAgICBIdG1sNVFyY29kZUNvbnN0YW50cy5ERUZBVUxUX1JFTUVNQkVSX0xBU1RfQ0FNRVJBX1VTRUQgPSB0cnVlO1xuICAgIEh0bWw1UXJjb2RlQ29uc3RhbnRzLkRFRkFVTFRfU1VQUE9SVEVEX1NDQU5fVFlQRSA9IFtcbiAgICAgICAgSHRtbDVRcmNvZGVTY2FuVHlwZS5TQ0FOX1RZUEVfQ0FNRVJBLFxuICAgICAgICBIdG1sNVFyY29kZVNjYW5UeXBlLlNDQU5fVFlQRV9GSUxFXG4gICAgXTtcbiAgICByZXR1cm4gSHRtbDVRcmNvZGVDb25zdGFudHM7XG59KCkpO1xuZXhwb3J0IHsgSHRtbDVRcmNvZGVDb25zdGFudHMgfTtcbnZhciBRcmNvZGVSZXN1bHRGb3JtYXQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFFyY29kZVJlc3VsdEZvcm1hdChmb3JtYXQsIGZvcm1hdE5hbWUpIHtcbiAgICAgICAgdGhpcy5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIHRoaXMuZm9ybWF0TmFtZSA9IGZvcm1hdE5hbWU7XG4gICAgfVxuICAgIFFyY29kZVJlc3VsdEZvcm1hdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdE5hbWU7XG4gICAgfTtcbiAgICBRcmNvZGVSZXN1bHRGb3JtYXQuY3JlYXRlID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICBpZiAoIWh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1RleHRNYXAuaGFzKGZvcm1hdCkpIHtcbiAgICAgICAgICAgIHRocm93IFwiXCIuY29uY2F0KGZvcm1hdCwgXCIgbm90IGluIGh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0c1RleHRNYXBcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBRcmNvZGVSZXN1bHRGb3JtYXQoZm9ybWF0LCBodG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHNUZXh0TWFwLmdldChmb3JtYXQpKTtcbiAgICB9O1xuICAgIHJldHVybiBRcmNvZGVSZXN1bHRGb3JtYXQ7XG59KCkpO1xuZXhwb3J0IHsgUXJjb2RlUmVzdWx0Rm9ybWF0IH07XG52YXIgSHRtbDVRcmNvZGVSZXN1bHRGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIdG1sNVFyY29kZVJlc3VsdEZhY3RvcnkoKSB7XG4gICAgfVxuICAgIEh0bWw1UXJjb2RlUmVzdWx0RmFjdG9yeS5jcmVhdGVGcm9tVGV4dCA9IGZ1bmN0aW9uIChkZWNvZGVkVGV4dCkge1xuICAgICAgICB2YXIgcXJjb2RlUmVzdWx0ID0ge1xuICAgICAgICAgICAgdGV4dDogZGVjb2RlZFRleHRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlY29kZWRUZXh0OiBkZWNvZGVkVGV4dCxcbiAgICAgICAgICAgIHJlc3VsdDogcXJjb2RlUmVzdWx0XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVJlc3VsdEZhY3RvcnkuY3JlYXRlRnJvbVFyY29kZVJlc3VsdCA9IGZ1bmN0aW9uIChxcmNvZGVSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlY29kZWRUZXh0OiBxcmNvZGVSZXN1bHQudGV4dCxcbiAgICAgICAgICAgIHJlc3VsdDogcXJjb2RlUmVzdWx0XG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gSHRtbDVRcmNvZGVSZXN1bHRGYWN0b3J5O1xufSgpKTtcbmV4cG9ydCB7IEh0bWw1UXJjb2RlUmVzdWx0RmFjdG9yeSB9O1xuZXhwb3J0IHZhciBIdG1sNVFyY29kZUVycm9yVHlwZXM7XG4oZnVuY3Rpb24gKEh0bWw1UXJjb2RlRXJyb3JUeXBlcykge1xuICAgIEh0bWw1UXJjb2RlRXJyb3JUeXBlc1tIdG1sNVFyY29kZUVycm9yVHlwZXNbXCJVTktXT1dOX0VSUk9SXCJdID0gMF0gPSBcIlVOS1dPV05fRVJST1JcIjtcbiAgICBIdG1sNVFyY29kZUVycm9yVHlwZXNbSHRtbDVRcmNvZGVFcnJvclR5cGVzW1wiSU1QTEVNRU5UQVRJT05fRVJST1JcIl0gPSAxXSA9IFwiSU1QTEVNRU5UQVRJT05fRVJST1JcIjtcbiAgICBIdG1sNVFyY29kZUVycm9yVHlwZXNbSHRtbDVRcmNvZGVFcnJvclR5cGVzW1wiTk9fQ09ERV9GT1VORF9FUlJPUlwiXSA9IDJdID0gXCJOT19DT0RFX0ZPVU5EX0VSUk9SXCI7XG59KShIdG1sNVFyY29kZUVycm9yVHlwZXMgfHwgKEh0bWw1UXJjb2RlRXJyb3JUeXBlcyA9IHt9KSk7XG52YXIgSHRtbDVRcmNvZGVFcnJvckZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEh0bWw1UXJjb2RlRXJyb3JGYWN0b3J5KCkge1xuICAgIH1cbiAgICBIdG1sNVFyY29kZUVycm9yRmFjdG9yeS5jcmVhdGVGcm9tID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLFxuICAgICAgICAgICAgdHlwZTogSHRtbDVRcmNvZGVFcnJvclR5cGVzLlVOS1dPV05fRVJST1JcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBIdG1sNVFyY29kZUVycm9yRmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBIdG1sNVFyY29kZUVycm9yRmFjdG9yeSB9O1xudmFyIEJhc2VMb2dnZ2VyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXNlTG9nZ2dlcih2ZXJib3NlKSB7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHZlcmJvc2U7XG4gICAgfVxuICAgIEJhc2VMb2dnZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy52ZXJib3NlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFzZUxvZ2dnZXIucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy52ZXJib3NlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhc2VMb2dnZ2VyLnByb3RvdHlwZS5sb2dFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBpc0V4cGVyaW1lbnRhbCkge1xuICAgICAgICBpZiAodGhpcy52ZXJib3NlIHx8IGlzRXhwZXJpbWVudGFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCYXNlTG9nZ2dlci5wcm90b3R5cGUubG9nRXJyb3JzID0gZnVuY3Rpb24gKGVycm9ycykge1xuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJMb2dnZXIjbG9nRXJyb3IgY2FsbGVkIHdpdGhvdXQgYXJndW1lbnRzXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmVyYm9zZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxvZ2dnZXI7XG59KCkpO1xuZXhwb3J0IHsgQmFzZUxvZ2dnZXIgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChvYmopIHtcbiAgICByZXR1cm4gKHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIpIHx8IG9iaiA9PT0gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGlwKHZhbHVlLCBtaW5WYWx1ZSwgbWF4VmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPiBtYXhWYWx1ZSkge1xuICAgICAgICByZXR1cm4gbWF4VmFsdWU7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IG1pblZhbHVlKSB7XG4gICAgICAgIHJldHVybiBtaW5WYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZS5qcy5tYXAiLCJ2YXIgSHRtbDVRcmNvZGVTdHJpbmdzID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIdG1sNVFyY29kZVN0cmluZ3MoKSB7XG4gICAgfVxuICAgIEh0bWw1UXJjb2RlU3RyaW5ncy5jb2RlUGFyc2VFcnJvciA9IGZ1bmN0aW9uIChleGNlcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFwiUVIgY29kZSBwYXJzZSBlcnJvciwgZXJyb3IgPSBcIi5jb25jYXQoZXhjZXB0aW9uKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU3RyaW5ncy5lcnJvckdldHRpbmdVc2VyTWVkaWEgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFwiRXJyb3IgZ2V0dGluZyB1c2VyTWVkaWEsIGVycm9yID0gXCIuY29uY2F0KGVycm9yKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU3RyaW5ncy5vbmx5RGV2aWNlU3VwcG9ydGVkRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlRoZSBkZXZpY2UgZG9lc24ndCBzdXBwb3J0IG5hdmlnYXRvci5tZWRpYURldmljZXMgLCBvbmx5IFwiXG4gICAgICAgICAgICArIFwic3VwcG9ydGVkIGNhbWVyYUlkT3JDb25maWcgaW4gdGhpcyBjYXNlIGlzIGRldmljZUlkIHBhcmFtZXRlciBcIlxuICAgICAgICAgICAgKyBcIihzdHJpbmcpLlwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTdHJpbmdzLmNhbWVyYVN0cmVhbWluZ05vdFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2FtZXJhIHN0cmVhbWluZyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTdHJpbmdzLnVuYWJsZVRvUXVlcnlTdXBwb3J0ZWREZXZpY2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJVbmFibGUgdG8gcXVlcnkgc3VwcG9ydGVkIGRldmljZXMsIHVua25vd24gZXJyb3IuXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVN0cmluZ3MuaW5zZWN1cmVDb250ZXh0Q2FtZXJhUXVlcnlFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2FtZXJhIGFjY2VzcyBpcyBvbmx5IHN1cHBvcnRlZCBpbiBzZWN1cmUgY29udGV4dCBsaWtlIGh0dHBzIFwiXG4gICAgICAgICAgICArIFwib3IgbG9jYWxob3N0LlwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTdHJpbmdzLnNjYW5uZXJQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlNjYW5uZXIgcGF1c2VkXCI7XG4gICAgfTtcbiAgICByZXR1cm4gSHRtbDVRcmNvZGVTdHJpbmdzO1xufSgpKTtcbmV4cG9ydCB7IEh0bWw1UXJjb2RlU3RyaW5ncyB9O1xudmFyIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MoKSB7XG4gICAgfVxuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Muc2Nhbm5pbmdTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlNjYW5uaW5nXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmlkbGVTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIklkbGVcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuZXJyb3JTdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkVycm9yXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnBlcm1pc3Npb25TdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlBlcm1pc3Npb25cIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Mubm9DYW1lcmFGb3VuZEVycm9yU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJObyBDYW1lcmFzXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmxhc3RNYXRjaCA9IGZ1bmN0aW9uIChkZWNvZGVkVGV4dCkge1xuICAgICAgICByZXR1cm4gXCJMYXN0IE1hdGNoOiBcIi5jb25jYXQoZGVjb2RlZFRleHQpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5jb2RlU2Nhbm5lclRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJDb2RlIFNjYW5uZXJcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuY2FtZXJhUGVybWlzc2lvblRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJSZXF1ZXN0IENhbWVyYSBQZXJtaXNzaW9uc1wiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5jYW1lcmFQZXJtaXNzaW9uUmVxdWVzdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVxdWVzdGluZyBjYW1lcmEgcGVybWlzc2lvbnMuLi5cIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Mubm9DYW1lcmFGb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiTm8gY2FtZXJhIGZvdW5kXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnNjYW5CdXR0b25TdG9wU2Nhbm5pbmdUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJTdG9wIFNjYW5uaW5nXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnNjYW5CdXR0b25TdGFydFNjYW5uaW5nVGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RhcnQgU2Nhbm5pbmdcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudG9yY2hPbkJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3dpdGNoIE9uIFRvcmNoXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnRvcmNoT2ZmQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJTd2l0Y2ggT2ZmIFRvcmNoXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnRvcmNoT25GYWlsZWRNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJGYWlsZWQgdG8gdHVybiBvbiB0b3JjaFwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy50b3JjaE9mZkZhaWxlZE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkZhaWxlZCB0byB0dXJuIG9mZiB0b3JjaFwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5zY2FuQnV0dG9uU2Nhbm5pbmdTdGFydGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiTGF1bmNoaW5nIENhbWVyYS4uLlwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy50ZXh0SWZDYW1lcmFTY2FuU2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlNjYW4gYW4gSW1hZ2UgRmlsZVwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy50ZXh0SWZGaWxlU2NhblNlbGVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJTY2FuIHVzaW5nIGNhbWVyYSBkaXJlY3RseVwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5zZWxlY3RDYW1lcmEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlNlbGVjdCBDYW1lcmFcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuZmlsZVNlbGVjdGlvbkNob29zZUltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJDaG9vc2UgSW1hZ2VcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuZmlsZVNlbGVjdGlvbkNob29zZUFub3RoZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkNob29zZSBBbm90aGVyXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmZpbGVTZWxlY3Rpb25Ob0ltYWdlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIk5vIGltYWdlIGNob29zZW5cIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuYW5vbnltb3VzQ2FtZXJhUHJlZml4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJBbm9ueW1vdXMgQ2FtZXJhXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmRyYWdBbmREcm9wTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiT3IgZHJvcCBhbiBpbWFnZSB0byBzY2FuXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmRyYWdBbmREcm9wTWVzc2FnZU9ubHlJbWFnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIk9yIGRyb3AgYW4gaW1hZ2UgdG8gc2NhbiAob3RoZXIgZmlsZXMgbm90IHN1cHBvcnRlZClcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Muem9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiem9vbVwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5sb2FkaW5nSW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkxvYWRpbmcgaW1hZ2UuLi5cIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuY2FtZXJhU2NhbkFsdFRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIkNhbWVyYSBiYXNlZCBzY2FuXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmZpbGVTY2FuQWx0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVsZSBiYXNlZCBzY2FuXCI7XG4gICAgfTtcbiAgICByZXR1cm4gSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncztcbn0oKSk7XG5leHBvcnQgeyBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzIH07XG52YXIgTGlicmFyeUluZm9TdHJpbmdzID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMaWJyYXJ5SW5mb1N0cmluZ3MoKSB7XG4gICAgfVxuICAgIExpYnJhcnlJbmZvU3RyaW5ncy5wb3dlcmVkQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlBvd2VyZWQgYnkgXCI7XG4gICAgfTtcbiAgICBMaWJyYXJ5SW5mb1N0cmluZ3MucmVwb3J0SXNzdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJSZXBvcnQgaXNzdWVzXCI7XG4gICAgfTtcbiAgICByZXR1cm4gTGlicmFyeUluZm9TdHJpbmdzO1xufSgpKTtcbmV4cG9ydCB7IExpYnJhcnlJbmZvU3RyaW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiLCJ2YXIgVmlkZW9Db25zdHJhaW50c1V0aWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZpZGVvQ29uc3RyYWludHNVdGlsKCkge1xuICAgIH1cbiAgICBWaWRlb0NvbnN0cmFpbnRzVXRpbC5pc01lZGlhU3RyZWFtQ29uc3RyYWludHNWYWxpZCA9IGZ1bmN0aW9uICh2aWRlb0NvbnN0cmFpbnRzLCBsb2dnZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2aWRlb0NvbnN0cmFpbnRzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB2YXIgdHlwZW9mVmlkZW9Db25zdHJhaW50cyA9IHR5cGVvZiB2aWRlb0NvbnN0cmFpbnRzO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ0Vycm9yKFwidmlkZW9Db25zdHJhaW50cyBzaG91bGQgYmUgb2YgdHlwZSBvYmplY3QsIHRoZSBcIlxuICAgICAgICAgICAgICAgICsgXCJvYmplY3QgcGFzc2VkIGlzIG9mIHR5cGUgXCIuY29uY2F0KHR5cGVvZlZpZGVvQ29uc3RyYWludHMsIFwiLlwiKSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhbm5lZEtleXMgPSBbXG4gICAgICAgICAgICBcImF1dG9HYWluQ29udHJvbFwiLFxuICAgICAgICAgICAgXCJjaGFubmVsQ291bnRcIixcbiAgICAgICAgICAgIFwiZWNob0NhbmNlbGxhdGlvblwiLFxuICAgICAgICAgICAgXCJsYXRlbmN5XCIsXG4gICAgICAgICAgICBcIm5vaXNlU3VwcHJlc3Npb25cIixcbiAgICAgICAgICAgIFwic2FtcGxlUmF0ZVwiLFxuICAgICAgICAgICAgXCJzYW1wbGVTaXplXCIsXG4gICAgICAgICAgICBcInZvbHVtZVwiXG4gICAgICAgIF07XG4gICAgICAgIHZhciBiYW5uZWRrZXlzU2V0ID0gbmV3IFNldChiYW5uZWRLZXlzKTtcbiAgICAgICAgdmFyIGtleXNJblZpZGVvQ29uc3RyYWludHMgPSBPYmplY3Qua2V5cyh2aWRlb0NvbnN0cmFpbnRzKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzSW5WaWRlb0NvbnN0cmFpbnRzXzEgPSBrZXlzSW5WaWRlb0NvbnN0cmFpbnRzOyBfaSA8IGtleXNJblZpZGVvQ29uc3RyYWludHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzSW5WaWRlb0NvbnN0cmFpbnRzXzFbX2ldO1xuICAgICAgICAgICAgaWYgKGJhbm5lZGtleXNTZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nRXJyb3IoXCJcIi5jb25jYXQoa2V5LCBcIiBpcyBub3Qgc3VwcG9ydGVkIHZpZGVvQ29uc3RhaW50cy5cIiksIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBWaWRlb0NvbnN0cmFpbnRzVXRpbDtcbn0oKSk7XG5leHBvcnQgeyBWaWRlb0NvbnN0cmFpbnRzVXRpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5aWGluZyA9IHt9KSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXG5cbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuXG4gICAgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhQcm90byh0YXJnZXQsIHByb3RvdHlwZSkge1xuICAgICAgICB2YXIgc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2Y7XG4gICAgICAgIHNldFByb3RvdHlwZU9mID8gc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90b3R5cGUpIDogKHRhcmdldC5fX3Byb3RvX18gPSBwcm90b3R5cGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpeFN0YWNrKHRhcmdldCwgZm4pIHtcbiAgICAgICAgaWYgKGZuID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYXB0dXJlU3RhY2tUcmFjZSA9IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlO1xuICAgICAgICBjYXB0dXJlU3RhY2tUcmFjZSAmJiBjYXB0dXJlU3RhY2tUcmFjZSh0YXJnZXQsIGZuKTtcbiAgICB9XG5cbiAgICB2YXIgQ3VzdG9tRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ3VzdG9tRXJyb3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZhciBfbmV3VGFyZ2V0ID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsICduYW1lJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBfbmV3VGFyZ2V0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZml4UHJvdG8oX3RoaXMsIF9uZXdUYXJnZXQucHJvdG90eXBlKTtcbiAgICAgICAgICAgIGZpeFN0YWNrKF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIEN1c3RvbUVycm9yO1xuICAgIH0pKEVycm9yKTtcblxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi5cbiAgICAgKi9cbiAgICBjbGFzcyBFeGNlcHRpb24gZXh0ZW5kcyBDdXN0b21FcnJvciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5XG4gICAgICAgICAqIHdpdGggc29tZSBtZXNzYWdlIGFuZCBwcm90b3R5cGUgZGVmaW5pdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRLaW5kKCkge1xuICAgICAgICAgICAgY29uc3QgZXggPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgcmV0dXJuIGV4LmtpbmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uXG4gICAgICovXG4gICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJztcblxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi5cbiAgICAgKi9cbiAgICBjbGFzcyBBcmd1bWVudEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgfVxuICAgIEFyZ3VtZW50RXhjZXB0aW9uLmtpbmQgPSAnQXJndW1lbnRFeGNlcHRpb24nO1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgfVxuICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIGNsYXNzIEJpbmFyeUJpdG1hcCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGJpbmFyaXplcikge1xuICAgICAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7XG4gICAgICAgICAgICBpZiAoYmluYXJpemVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignQmluYXJpemVyIG11c3QgYmUgbm9uLW51bGwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuXG4gICAgICAgICAqL1xuICAgICAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRXaWR0aCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC5cbiAgICAgICAgICovXG4gICAgICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRIZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVyblxuICAgICAgICAgKiBjYWNoZWQgZGF0YS4gQ2FsbGVycyBzaG91bGQgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZSBhbmQgY2FsbCBpdCBhcyBzZWxkb20gYXMgcG9zc2libGUuXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIGZvciBkZWNvZGluZyAxRCBiYXJjb2RlcyBhbmQgbWF5IGNob29zZSB0byBhcHBseSBzaGFycGVuaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZldGNoLCB3aGljaCBtdXN0IGJlIGluIFswLCBiaXRtYXAgaGVpZ2h0KVxuICAgICAgICAgKiBAcGFyYW0gcm93IEFuIG9wdGlvbmFsIHByZWFsbG9jYXRlZCBhcnJheS4gSWYgbnVsbCBvciB0b28gc21hbGwsIGl0IHdpbGwgYmUgaWdub3JlZC5cbiAgICAgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuXG4gICAgICAgICAqIEByZXR1cm4gVGhlIGFycmF5IG9mIGJpdHMgZm9yIHRoaXMgcm93ICh0cnVlIG1lYW5zIGJsYWNrKS5cbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiByb3cgY2FuJ3QgYmUgYmluYXJpemVkXG4gICAgICAgICAqL1xuICAgICAgICBnZXRCbGFja1Jvdyh5IC8qaW50Ki8sIHJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIGEgMkQgYXJyYXkgb2YgbHVtaW5hbmNlIGRhdGEgdG8gMSBiaXQuIEFzIGFib3ZlLCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlXG4gICAgICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvclxuICAgICAgICAgKiBtYXkgbm90IGFwcGx5IHNoYXJwZW5pbmcuIFRoZXJlZm9yZSwgYSByb3cgZnJvbSB0aGlzIG1hdHJpeCBtYXkgbm90IGJlIGlkZW50aWNhbCB0byBvbmVcbiAgICAgICAgICogZmV0Y2hlZCB1c2luZyBnZXRCbGFja1JvdygpLCBzbyBkb24ndCBtaXggYW5kIG1hdGNoIGJldHdlZW4gdGhlbS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBUaGUgMkQgYXJyYXkgb2YgYml0cyBmb3IgdGhlIGltYWdlICh0cnVlIG1lYW5zIGJsYWNrKS5cbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBpbWFnZSBjYW4ndCBiZSBiaW5hcml6ZWQgdG8gbWFrZSBhIG1hdHJpeFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0QmxhY2tNYXRyaXgoKSB7XG4gICAgICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d29cbiAgICAgICAgICAgIC8vIHJlYXNvbnMgZm9yIHRoaXM6XG4gICAgICAgICAgICAvLyAxLiBUaGlzIHdvcmsgd2lsbCBuZXZlciBiZSBkb25lIGlmIHRoZSBjYWxsZXIgb25seSBpbnN0YWxscyAxRCBSZWFkZXIgb2JqZWN0cywgb3IgaWYgYVxuICAgICAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLlxuICAgICAgICAgICAgLy8gMi4gVGhpcyB3b3JrIHdpbGwgb25seSBiZSBkb25lIG9uY2UgZXZlbiBpZiB0aGUgY2FsbGVyIGluc3RhbGxzIG11bHRpcGxlIDJEIFJlYWRlcnMuXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXggPT09IG51bGwgfHwgdGhpcy5tYXRyaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBXaGV0aGVyIHRoaXMgYml0bWFwIGNhbiBiZSBjcm9wcGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgaXNDcm9wU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEx1bWluYW5jZVNvdXJjZSgpLmlzQ3JvcFN1cHBvcnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZVxuICAgICAgICAgKiBvcmlnaW5hbCBkYXRhIHJhdGhlciB0aGFuIGEgY29weS4gT25seSBjYWxsYWJsZSBpZiBpc0Nyb3BTdXBwb3J0ZWQoKSBpcyB0cnVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpXG4gICAgICAgICAqIEBwYXJhbSB0b3AgVGhlIHRvcCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldEhlaWdodCgpKVxuICAgICAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC5cbiAgICAgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC5cbiAgICAgICAgICogQHJldHVybiBBIGNyb3BwZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGNyb3AobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1NvdXJjZSA9IHRoaXMuYmluYXJpemVyLmdldEx1bWluYW5jZVNvdXJjZSgpLmNyb3AobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBXaGV0aGVyIHRoaXMgYml0bWFwIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgaXNSb3RhdGVTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgOTAgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLlxuICAgICAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIHJvdGF0ZUNvdW50ZXJDbG9ja3dpc2UoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDQ1IGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS5cbiAgICAgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICByb3RhdGVDb3VudGVyQ2xvY2t3aXNlNDUoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlNDUoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCbGFja01hdHJpeCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSAvKjogTm90Rm91bmRFeGNlcHRpb24qLykge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi5cbiAgICAgKi9cbiAgICBjbGFzcyBDaGVja3N1bUV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgICAgIHN0YXRpYyBnZXRDaGVja3N1bUluc3RhbmNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGVja3N1bUV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIENoZWNrc3VtRXhjZXB0aW9uLmtpbmQgPSAnQ2hlY2tzdW1FeGNlcHRpb24nO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBUaGlzIGNsYXNzIGhpZXJhcmNoeSBwcm92aWRlcyBhIHNldCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgbHVtaW5hbmNlIGRhdGEgdG8gMSBiaXQgZGF0YS5cbiAgICAgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZVxuICAgICAqIHRocmVzaG9sZGluZyB0ZWNobmlxdWUgZm9yIHNlcnZlcnMgYW5kIGEgZmFzdCBvbmUgZm9yIG1vYmlsZS4gSXQgYWxzbyBwZXJtaXRzIHRoZSBpbXBsZW1lbnRhdGlvblxuICAgICAqIHRvIHZhcnksIGUuZy4gYSBKTkkgdmVyc2lvbiBmb3IgQW5kcm9pZCBhbmQgYSBKYXZhIGZhbGxiYWNrIHZlcnNpb24gZm9yIG90aGVyIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICovXG4gICAgY2xhc3MgQmluYXJpemVyIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRMdW1pbmFuY2VTb3VyY2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0V2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBTeXN0ZW0ge1xuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIHZvaWQgYXJyYXljb3B5KE9iamVjdCBzcmMsIGludCBzcmNQb3MsIE9iamVjdCBkZXN0LCBpbnQgZGVzdFBvcywgaW50IGxlbmd0aClcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ha2VzIGEgY29weSBvZiBhIGFycmF5LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGFycmF5Y29weShzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBiZXR0ZXIgdXNlIHNwbGl0IG9yIHNldD9cbiAgICAgICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgY3VycmVudFRpbWVNaWxsaXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi5cbiAgICAgKi9cbiAgICBjbGFzcyBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICB9XG4gICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nO1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBleHRlbmRzIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmRleCA9IHVuZGVmaW5lZCwgbWVzc2FnZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0FycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbic7XG5cbiAgICBjbGFzcyBBcnJheXMge1xuICAgICAgICAvKipcbiAgICAgICAgICogQXNzaWducyB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCBhcnJheVxuICAgICAgICAgKiBvZiBpbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkXG4gICAgICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZmlsbChhLCB2YWwpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKVxuICAgICAgICAgICAgICAgIGFbaV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWRcbiAgICAgICAgICogcmFuZ2Ugb2YgdGhlIHNwZWNpZmllZCBhcnJheSBvZiBpbnRzLiAgVGhlIHJhbmdlIHRvIGJlIGZpbGxlZFxuICAgICAgICAgKiBleHRlbmRzIGZyb20gaW5kZXgge0Bjb2RlIGZyb21JbmRleH0sIGluY2x1c2l2ZSwgdG8gaW5kZXhcbiAgICAgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZVxuICAgICAgICAgKiByYW5nZSB0byBiZSBmaWxsZWQgaXMgZW1wdHkuKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkXG4gICAgICAgICAqIEBwYXJhbSBmcm9tSW5kZXggdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IChpbmNsdXNpdmUpIHRvIGJlXG4gICAgICAgICAqICAgICAgICBmaWxsZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlXG4gICAgICAgICAqICAgICAgICBmaWxsZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5XG4gICAgICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fVxuICAgICAgICAgKiBAdGhyb3dzIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiBpZiB7QGNvZGUgZnJvbUluZGV4IDwgMH0gb3JcbiAgICAgICAgICogICAgICAgICB7QGNvZGUgdG9JbmRleCA+IGEubGVuZ3RofVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGZpbGxXaXRoaW4oYSwgZnJvbUluZGV4LCB0b0luZGV4LCB2YWwpIHtcbiAgICAgICAgICAgIEFycmF5cy5yYW5nZUNoZWNrKGEubGVuZ3RoLCBmcm9tSW5kZXgsIHRvSW5kZXgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKylcbiAgICAgICAgICAgICAgICBhW2ldID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpblxuICAgICAgICAgKiB0aGUgcmFuZ2UgYW5kIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhleSBhcmVuJ3QuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcmFuZ2VDaGVjayhhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7XG4gICAgICAgICAgICBpZiAoZnJvbUluZGV4ID4gdG9JbmRleCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ2Zyb21JbmRleCgnICsgZnJvbUluZGV4ICsgJykgPiB0b0luZGV4KCcgKyB0b0luZGV4ICsgJyknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmcm9tSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbihmcm9tSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24odG9JbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGFzTGlzdCguLi5hcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJncztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY3JlYXRlKHJvd3MsIGNvbHMsIHZhbHVlKSB7XG4gICAgICAgICAgICBsZXQgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTtcbiAgICAgICAgICAgIHJldHVybiBhcnIubWFwKHggPT4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNyZWF0ZUludDMyQXJyYXkocm93cywgY29scywgdmFsdWUpIHtcbiAgICAgICAgICAgIGxldCBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFyci5tYXAoeCA9PiBJbnQzMkFycmF5LmZyb20oeyBsZW5ndGg6IGNvbHMgfSkuZmlsbCh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBlcXVhbHMoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgaWYgKCFmaXJzdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGZpcnN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBoYXNoQ29kZShhKSB7XG4gICAgICAgICAgICBpZiAoYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IDE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgYSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IDMxICogcmVzdWx0ICsgZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGZpbGxVaW50OEFycmF5KGEsIHZhbHVlKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY29weU9mKG9yaWdpbmFsLCBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjb3B5T2ZVaW50OEFycmF5KG9yaWdpbmFsLCBuZXdMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGggPD0gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBuZXcgVWludDhBcnJheShuZXdMZW5ndGgpO1xuICAgICAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0FycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNvcHlPZlJhbmdlKG9yaWdpbmFsLCBmcm9tLCB0bykge1xuICAgICAgICAgICAgY29uc3QgbmV3TGVuZ3RoID0gdG8gLSBmcm9tO1xuICAgICAgICAgICAgY29uc3QgY29weSA9IG5ldyBJbnQzMkFycmF5KG5ld0xlbmd0aCk7XG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KG9yaWdpbmFsLCBmcm9tLCBjb3B5LCAwLCBuZXdMZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiBvZiB0aGUgZWxlbWVudCBpbiBhIHNvcnRlZCBhcnJheSBvciAoLW4tMSkgd2hlcmUgbiBpcyB0aGUgaW5zZXJ0aW9uIHBvaW50XG4gICAgICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC5cbiAgICAgICAgKiBQYXJhbWV0ZXJzOlxuICAgICAgICAqICAgICBhciAtIEEgc29ydGVkIGFycmF5XG4gICAgICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yXG4gICAgICAgICogICAgIGNvbXBhcmF0b3IgLSBBIGNvbXBhcmF0b3IgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiB0YWtlcyB0d28gYXJndW1lbnRzOiAoYSwgYikgYW5kIHJldHVybnM6XG4gICAgICAgICogICAgICAgIGEgbmVnYXRpdmUgbnVtYmVyICBpZiBhIGlzIGxlc3MgdGhhbiBiO1xuICAgICAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjtcbiAgICAgICAgKiAgICAgICAgYSBwb3NpdGl2ZSBudW1iZXIgb2YgYSBpcyBncmVhdGVyIHRoYW4gYi5cbiAgICAgICAgKiBUaGUgYXJyYXkgbWF5IGNvbnRhaW4gZHVwbGljYXRlIGVsZW1lbnRzLiBJZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBlcXVhbCBlbGVtZW50cyBpbiB0aGUgYXJyYXksXG4gICAgICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuXG4gICAgICAgICpcbiAgICAgICAgKiBodHRwOi8vanNmaWRkbGUubmV0L2FyeXpob3YvcGtmc3Q1NTAvXG4gICAgICAgICovXG4gICAgICAgIHN0YXRpYyBiaW5hcnlTZWFyY2goYXIsIGVsLCBjb21wYXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBjb21wYXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG0gPSAwO1xuICAgICAgICAgICAgbGV0IG4gPSBhci5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKG0gPD0gbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSAobiArIG0pID4+IDE7XG4gICAgICAgICAgICAgICAgY29uc3QgY21wID0gY29tcGFyYXRvcihlbCwgYXJba10pO1xuICAgICAgICAgICAgICAgIGlmIChjbXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSBrICsgMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY21wIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBuID0gayAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLW0gLSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBudW1iZXJDb21wYXJhdG9yKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhIC0gYjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgSW50ZWdlciBjbGFzcy5cbiAgICAgKi9cbiAgICBjbGFzcyBJbnRlZ2VyIHtcbiAgICAgICAgc3RhdGljIG51bWJlck9mVHJhaWxpbmdaZXJvcyhpKSB7XG4gICAgICAgICAgICBsZXQgeTtcbiAgICAgICAgICAgIGlmIChpID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiAzMjtcbiAgICAgICAgICAgIGxldCBuID0gMzE7XG4gICAgICAgICAgICB5ID0gaSA8PCAxNjtcbiAgICAgICAgICAgIGlmICh5ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgbiAtPSAxNjtcbiAgICAgICAgICAgICAgICBpID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHkgPSBpIDw8IDg7XG4gICAgICAgICAgICBpZiAoeSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIG4gLT0gODtcbiAgICAgICAgICAgICAgICBpID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHkgPSBpIDw8IDQ7XG4gICAgICAgICAgICBpZiAoeSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIG4gLT0gNDtcbiAgICAgICAgICAgICAgICBpID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHkgPSBpIDw8IDI7XG4gICAgICAgICAgICBpZiAoeSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIG4gLT0gMjtcbiAgICAgICAgICAgICAgICBpID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuIC0gKChpIDw8IDEpID4+PiAzMSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIG51bWJlck9mTGVhZGluZ1plcm9zKGkpIHtcbiAgICAgICAgICAgIC8vIEhELCBGaWd1cmUgNS02XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAzMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuID0gMTtcbiAgICAgICAgICAgIGlmIChpID4+PiAxNiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG4gKz0gMTY7XG4gICAgICAgICAgICAgICAgaSA8PD0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA+Pj4gMjQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBuICs9IDg7XG4gICAgICAgICAgICAgICAgaSA8PD0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG4gKz0gNDtcbiAgICAgICAgICAgICAgICBpIDw8PSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPj4+IDMwID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbiArPSAyO1xuICAgICAgICAgICAgICAgIGkgPDw9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuIC09IGkgPj4+IDMxO1xuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHRvSGV4U3RyaW5nKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgdG9CaW5hcnlTdHJpbmcoaW50TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHBhcnNlSW50KFN0cmluZyhpbnROdW1iZXIpLCAyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuXG4gICAgICAgIC8vIFJldHVybnM6XG4gICAgICAgIC8vIHRoZSBudW1iZXIgb2Ygb25lLWJpdHMgaW4gdGhlIHR3bydzIGNvbXBsZW1lbnQgYmluYXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzcGVjaWZpZWQgaW50IHZhbHVlLlxuICAgICAgICBzdGF0aWMgYml0Q291bnQoaSkge1xuICAgICAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTJcbiAgICAgICAgICAgIGkgPSBpIC0gKChpID4+PiAxKSAmIDB4NTU1NTU1NTUpO1xuICAgICAgICAgICAgaSA9IChpICYgMHgzMzMzMzMzMykgKyAoKGkgPj4+IDIpICYgMHgzMzMzMzMzMyk7XG4gICAgICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjtcbiAgICAgICAgICAgIGkgPSBpICsgKGkgPj4+IDgpO1xuICAgICAgICAgICAgaSA9IGkgKyAoaSA+Pj4gMTYpO1xuICAgICAgICAgICAgcmV0dXJuIGkgJiAweDNmO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyB0cnVuY0RpdmlzaW9uKGRpdmlkZW5kLCBkaXZpc29yKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhkaXZpZGVuZCAvIGRpdmlzb3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLlxuICAgICAgICAgKiBAcGFyYW0gcyBBIHN0cmluZyB0byBjb252ZXJ0IGludG8gYSBudW1iZXIuXG4gICAgICAgICAqIEBwYXJhbSByYWRpeCBBIHZhbHVlIGJldHdlZW4gMiBhbmQgMzYgdGhhdCBzcGVjaWZpZXMgdGhlIGJhc2Ugb2YgdGhlIG51bWJlciBpbiBudW1TdHJpbmcuIElmIHRoaXMgYXJndW1lbnQgaXMgbm90IHN1cHBsaWVkLCBzdHJpbmdzIHdpdGggYSBwcmVmaXggb2YgJzB4JyBhcmUgY29uc2lkZXJlZCBoZXhhZGVjaW1hbC4gQWxsIG90aGVyIHN0cmluZ3MgYXJlIGNvbnNpZGVyZWQgZGVjaW1hbC5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBwYXJzZUludChudW0sIHJhZGl4ID0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQobnVtLCByYWRpeCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSW50ZWdlci5NSU5fVkFMVUVfMzJfQklUUyA9IC0yMTQ3NDgzNjQ4O1xuICAgIEludGVnZXIuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cbiAgICAvKipcbiAgICAgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovIHtcbiAgICAgICAgLy8gRm9yIHRlc3Rpbmcgb25seVxuICAgICAgICBjb25zdHJ1Y3RvcihzaXplIC8qaW50Ki8sIGJpdHMpIHtcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBiaXRzIHx8IG51bGwgPT09IGJpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U2l6ZUluQnl0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigodGhpcy5zaXplICsgNykgLyA4KTtcbiAgICAgICAgfVxuICAgICAgICBlbnN1cmVDYXBhY2l0eShzaXplIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHRoaXMuYml0cywgMCwgbmV3Qml0cywgMCwgdGhpcy5iaXRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3Qml0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGkgYml0IHRvIGdldFxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0KGkgLyppbnQqLykge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSAmICgxIDw8IChpICYgMHgxRikpKSAhPT0gMDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBiaXQgaS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGkgYml0IHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0KGkgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gfD0gMSA8PCAoaSAmIDB4MUYpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGbGlwcyBiaXQgaS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGkgYml0IHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZmxpcChpIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIF49IDEgPDwgKGkgJiAweDFGKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGZyb20gZmlyc3QgYml0IHRvIGNoZWNrXG4gICAgICAgICAqIEByZXR1cm4gaW5kZXggb2YgZmlyc3QgYml0IHRoYXQgaXMgc2V0LCBzdGFydGluZyBmcm9tIHRoZSBnaXZlbiBpbmRleCwgb3Igc2l6ZSBpZiBub25lIGFyZSBzZXRcbiAgICAgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4XG4gICAgICAgICAqIEBzZWUgI2dldE5leHRVbnNldChpbnQpXG4gICAgICAgICAqL1xuICAgICAgICBnZXROZXh0U2V0KGZyb20gLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgICAgIGlmIChmcm9tID49IHNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBsZXQgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07XG4gICAgICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdFxuICAgICAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYml0cy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudEJpdHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlci5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA+IHNpemUgPyBzaXplIDogcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXRcbiAgICAgICAgICogQHJldHVybiBpbmRleCBvZiBuZXh0IHVuc2V0IGJpdCwgb3Ige0Bjb2RlIHNpemV9IGlmIG5vbmUgYXJlIHVuc2V0IHVudGlsIHRoZSBlbmRcbiAgICAgICAgICogQHNlZSAjZ2V0TmV4dFNldChpbnQpXG4gICAgICAgICAqL1xuICAgICAgICBnZXROZXh0VW5zZXQoZnJvbSAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5zaXplO1xuICAgICAgICAgICAgaWYgKGZyb20gPj0gc2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYml0cyA9IHRoaXMuYml0cztcbiAgICAgICAgICAgIGxldCBiaXRzT2Zmc2V0ID0gTWF0aC5mbG9vcihmcm9tIC8gMzIpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07XG4gICAgICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdFxuICAgICAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYml0cy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudEJpdHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoYml0c09mZnNldCAqIDMyKSArIEludGVnZXIubnVtYmVyT2ZUcmFpbGluZ1plcm9zKGN1cnJlbnRCaXRzKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgPiBzaXplID8gc2l6ZSA6IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBhIGJsb2NrIG9mIDMyIGJpdHMsIHN0YXJ0aW5nIGF0IGJpdCBpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0XG4gICAgICAgICAqIEBwYXJhbSBuZXdCaXRzIHRoZSBuZXcgdmFsdWUgb2YgdGhlIG5leHQgMzIgYml0cy4gTm90ZSBhZ2FpbiB0aGF0IHRoZSBsZWFzdC1zaWduaWZpY2FudCBiaXRcbiAgICAgICAgICogY29ycmVzcG9uZHMgdG8gYml0IGksIHRoZSBuZXh0LWxlYXN0LXNpZ25pZmljYW50IHRvIGkrMSwgYW5kIHNvIG9uLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0QnVsayhpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gPSBuZXdCaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHN0YXJ0IHN0YXJ0IG9mIHJhbmdlLCBpbmNsdXNpdmUuXG4gICAgICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmVcbiAgICAgICAgICovXG4gICAgICAgIHNldFJhbmdlKHN0YXJ0IC8qaW50Ki8sIGVuZCAvKmludCovKSB7XG4gICAgICAgICAgICBpZiAoZW5kIDwgc3RhcnQgfHwgc3RhcnQgPCAwIHx8IGVuZCA+IHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmQgPT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW5kLS07IC8vIHdpbGwgYmUgZWFzaWVyIHRvIHRyZWF0IHRoaXMgYXMgdGhlIGxhc3QgYWN0dWFsbHkgc2V0IGJpdCAtLSBpbmNsdXNpdmVcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0SW50ID0gTWF0aC5mbG9vcihzdGFydCAvIDMyKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RJbnQgPSBNYXRoLmZsb29yKGVuZCAvIDMyKTtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjtcbiAgICAgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgY29uc3QgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpO1xuICAgICAgICAgICAgICAgIGJpdHNbaV0gfD0gbWFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXJzIGFsbCBiaXRzIChzZXRzIHRvIGZhbHNlKS5cbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyKCkge1xuICAgICAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYml0c1tpXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVmZmljaWVudCBtZXRob2QgdG8gY2hlY2sgaWYgYSByYW5nZSBvZiBiaXRzIGlzIHNldCwgb3Igbm90IHNldC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHN0YXJ0IHN0YXJ0IG9mIHJhbmdlLCBpbmNsdXNpdmUuXG4gICAgICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmVcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXRcbiAgICAgICAgICogXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgYWxsIGJpdHMgYXJlIHNldCBvciBub3Qgc2V0IGluIHJhbmdlLCBhY2NvcmRpbmcgdG8gdmFsdWUgYXJndW1lbnRcbiAgICAgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXlcbiAgICAgICAgICovXG4gICAgICAgIGlzUmFuZ2Uoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8sIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZW5kIDwgc3RhcnQgfHwgc3RhcnQgPCAwIHx8IGVuZCA+IHRoaXMuc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmQgPT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlXG4gICAgICAgICAgICBjb25zdCBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7XG4gICAgICAgICAgICBjb25zdCBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7XG4gICAgICAgICAgICBjb25zdCBiaXRzID0gdGhpcy5iaXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7XG4gICAgICAgICAgICAgICAgLy8gT25lcyBmcm9tIGZpcnN0Qml0IHRvIGxhc3RCaXQsIGluY2x1c2l2ZVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSAoMiA8PCBsYXN0Qml0KSAtICgxIDw8IGZpcnN0Qml0KSAmIDB4RkZGRkZGRkY7XG4gICAgICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6ICYgMHhGRkZGRkZGRiBhZGRlZCB0byBkaXNjYXJkIGFueXRoaW5nIGFmdGVyIDMyIGJpdHMsIGFzIEVTIGhhcyA1MyBiaXRzXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCxcbiAgICAgICAgICAgICAgICAvLyBlcXVhbHMgdGhlIG1hc2ssIG9yIHdlJ3JlIGxvb2tpbmcgZm9yIDBzIGFuZCB0aGUgbWFza2VkIHBvcnRpb24gaXMgbm90IGFsbCAwc1xuICAgICAgICAgICAgICAgIGlmICgoYml0c1tpXSAmIG1hc2spICE9PSAodmFsdWUgPyBtYXNrIDogMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGFwcGVuZEJpdChiaXQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgMSk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBlbmRzIHRoZSBsZWFzdC1zaWduaWZpY2FudCBiaXRzLCBmcm9tIHZhbHVlLCBpbiBvcmRlciBmcm9tIG1vc3Qtc2lnbmlmaWNhbnQgdG9cbiAgICAgICAgICogbGVhc3Qtc2lnbmlmaWNhbnQuIEZvciBleGFtcGxlLCBhcHBlbmRpbmcgNiBiaXRzIGZyb20gMHgwMDAwMDFFIHdpbGwgYXBwZW5kIHRoZSBiaXRzXG4gICAgICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIHtAY29kZSBpbnR9IGNvbnRhaW5pbmcgYml0cyB0byBhcHBlbmRcbiAgICAgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZFxuICAgICAgICAgKi9cbiAgICAgICAgYXBwZW5kQml0cyh2YWx1ZSAvKmludCovLCBudW1CaXRzIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChudW1CaXRzIDwgMCB8fCBudW1CaXRzID4gMzIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgbnVtQml0cyk7XG4gICAgICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDtcbiAgICAgICAgICAgIGZvciAobGV0IG51bUJpdHNMZWZ0ID0gbnVtQml0czsgbnVtQml0c0xlZnQgPiAwOyBudW1CaXRzTGVmdC0tKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRCaXQoKCh2YWx1ZSA+PiAobnVtQml0c0xlZnQgLSAxKSkgJiAweDAxKSA9PT0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXBwZW5kQml0QXJyYXkob3RoZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyU2l6ZSA9IG90aGVyLnNpemU7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG90aGVyU2l6ZSk7XG4gICAgICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEJpdChvdGhlci5nZXQoaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHhvcihvdGhlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ1NpemVzIGRvblxcJ3QgbWF0Y2gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gYml0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBsYXN0IGludCBjb3VsZCBiZSBpbmNvbXBsZXRlIChpLmUuIG5vdCBoYXZlIDMyIGJpdHMgaW5cbiAgICAgICAgICAgICAgICAvLyBpdCkgYnV0IHRoZXJlIGlzIG5vIHByb2JsZW0gc2luY2UgMCBYT1IgMCA9PSAwLlxuICAgICAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGJpdE9mZnNldCBmaXJzdCBiaXQgdG8gc3RhcnQgd3JpdGluZ1xuICAgICAgICAgKiBAcGFyYW0gYXJyYXkgYXJyYXkgdG8gd3JpdGUgaW50by4gQnl0ZXMgYXJlIHdyaXR0ZW4gbW9zdC1zaWduaWZpY2FudCBieXRlIGZpcnN0LiBUaGlzIGlzIHRoZSBvcHBvc2l0ZVxuICAgICAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX1cbiAgICAgICAgICogQHBhcmFtIG9mZnNldCBwb3NpdGlvbiBpbiBhcnJheSB0byBzdGFydCB3cml0aW5nXG4gICAgICAgICAqIEBwYXJhbSBudW1CeXRlcyBob3cgbWFueSBieXRlcyB0byB3cml0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9CeXRlcyhiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJ5dGVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgdGhlQnl0ZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0KGJpdE9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZUJ5dGUgfD0gMSA8PCAoNyAtIGopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJpdE9mZnNldCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0XG4gICAgICAgICAqICAgICAgICAgc2lnbmlmaWNhbnQgYml0IGlzIGJpdCAwLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Qml0QXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXZlcnNlcyBhbGwgYml0cyBpbiB0aGUgYXJyYXkuXG4gICAgICAgICAqL1xuICAgICAgICByZXZlcnNlKCkge1xuICAgICAgICAgICAgY29uc3QgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpO1xuICAgICAgICAgICAgLy8gcmV2ZXJzZSBhbGwgaW50J3MgZmlyc3RcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IE1hdGguZmxvb3IoKHRoaXMuc2l6ZSAtIDEpIC8gMzIpO1xuICAgICAgICAgICAgY29uc3Qgb2xkQml0c0xlbiA9IGxlbiArIDE7XG4gICAgICAgICAgICBjb25zdCBiaXRzID0gdGhpcy5iaXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbGRCaXRzTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgeCA9IGJpdHNbaV07XG4gICAgICAgICAgICAgICAgeCA9ICgoeCA+PiAxKSAmIDB4NTU1NTU1NTUpIHwgKCh4ICYgMHg1NTU1NTU1NSkgPDwgMSk7XG4gICAgICAgICAgICAgICAgeCA9ICgoeCA+PiAyKSAmIDB4MzMzMzMzMzMpIHwgKCh4ICYgMHgzMzMzMzMzMykgPDwgMik7XG4gICAgICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7XG4gICAgICAgICAgICAgICAgeCA9ICgoeCA+PiA4KSAmIDB4MDBmZjAwZmYpIHwgKCh4ICYgMHgwMGZmMDBmZikgPDwgOCk7XG4gICAgICAgICAgICAgICAgeCA9ICgoeCA+PiAxNikgJiAweDAwMDBmZmZmKSB8ICgoeCAmIDB4MDAwMGZmZmYpIDw8IDE2KTtcbiAgICAgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBub3cgY29ycmVjdCB0aGUgaW50J3MgaWYgdGhlIGJpdCBzaXplIGlzbid0IGEgbXVsdGlwbGUgb2YgMzJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRJbnQgPSBuZXdCaXRzWzBdID4+PiBsZWZ0T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJbnQgPSBuZXdCaXRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0JpdHNbaSAtIDFdID0gY3VycmVudEludDtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEludCA9IG5leHRJbnQgPj4+IGxlZnRPZmZzZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld0JpdHNbb2xkQml0c0xlbiAtIDFdID0gY3VycmVudEludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIG1ha2VBcnJheShzaXplIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGVxdWFscyhvKSB7XG4gICAgICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQml0QXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXIgPSBvO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gb3RoZXIuc2l6ZSAmJiBBcnJheXMuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBoYXNoQ29kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiAzMSAqIHRoaXMuc2l6ZSArIEFycmF5cy5oYXNoQ29kZSh0aGlzLmJpdHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgc2l6ZSA9IHRoaXMuc2l6ZTsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgoaSAmIDB4MDcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmdldChpKSA/ICdYJyA6ICcuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBjbG9uZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovXG4gICAgLyoqXG4gICAgICogRW5jYXBzdWxhdGVzIGEgdHlwZSBvZiBoaW50IHRoYXQgYSBjYWxsZXIgbWF5IHBhc3MgdG8gYSBiYXJjb2RlIHJlYWRlciB0byBoZWxwIGl0XG4gICAgICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsXG4gICAgICogaWYgYW55dGhpbmcsIHRvIGRvIHdpdGggdGhlIGluZm9ybWF0aW9uIHRoYXQgaXMgc3VwcGxpZWQuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQHNlZSBSZWFkZXIjZGVjb2RlKEJpbmFyeUJpdG1hcCxqYXZhLnV0aWwuTWFwKVxuICAgICAqL1xuICAgIHZhciBEZWNvZGVIaW50VHlwZTtcbiAgICAoZnVuY3Rpb24gKERlY29kZUhpbnRUeXBlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgaGludC4gTWFwcyB0byBhbiB1bnNwZWNpZmllZCB7QGxpbmsgT2JqZWN0fS5cbiAgICAgICAgICovXG4gICAgICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlW1wiT1RIRVJcIl0gPSAwXSA9IFwiT1RIRVJcIjsgLyooT2JqZWN0LmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bztcbiAgICAgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LlxuICAgICAgICAgKi9cbiAgICAgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbXCJQVVJFX0JBUkNPREVcIl0gPSAxXSA9IFwiUFVSRV9CQVJDT0RFXCI7IC8qKFZvaWQuY2xhc3MpKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLlxuICAgICAgICAgKiBNYXBzIHRvIGEge0BsaW5rIExpc3R9IG9mIHtAbGluayBCYXJjb2RlRm9ybWF0fXMuXG4gICAgICAgICAqL1xuICAgICAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVtcIlBPU1NJQkxFX0ZPUk1BVFNcIl0gPSAyXSA9IFwiUE9TU0lCTEVfRk9STUFUU1wiOyAvKihMaXN0LmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC5cbiAgICAgICAgICogRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uXG4gICAgICAgICAqL1xuICAgICAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVtcIlRSWV9IQVJERVJcIl0gPSAzXSA9IFwiVFJZX0hBUkRFUlwiOyAvKihWb2lkLmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKVxuICAgICAgICAgKi9cbiAgICAgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbXCJDSEFSQUNURVJfU0VUXCJdID0gNF0gPSBcIkNIQVJBQ1RFUl9TRVRcIjsgLyooU3RyaW5nLmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGxvd2VkIGxlbmd0aHMgb2YgZW5jb2RlZCBkYXRhIC0tIHJlamVjdCBhbnl0aGluZyBlbHNlLiBNYXBzIHRvIGFuIHtAY29kZSBJbnQzMkFycmF5fS5cbiAgICAgICAgICovXG4gICAgICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlW1wiQUxMT1dFRF9MRU5HVEhTXCJdID0gNV0gPSBcIkFMTE9XRURfTEVOR1RIU1wiOyAvKihJbnQzMkFycmF5LmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3N1bWUgQ29kZSAzOSBjb2RlcyBlbXBsb3kgYSBjaGVjayBkaWdpdC4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvO1xuICAgICAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uXG4gICAgICAgICAqL1xuICAgICAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVtcIkFTU1VNRV9DT0RFXzM5X0NIRUNLX0RJR0lUXCJdID0gNl0gPSBcIkFTU1VNRV9DT0RFXzM5X0NIRUNLX0RJR0lUXCI7IC8qKFZvaWQuY2xhc3MpKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzc3VtZSB0aGUgYmFyY29kZSBpcyBiZWluZyBwcm9jZXNzZWQgYXMgYSBHUzEgYmFyY29kZSwgYW5kIG1vZGlmeSBiZWhhdmlvciBhcyBuZWVkZWQuXG4gICAgICAgICAqIEZvciBleGFtcGxlIHRoaXMgYWZmZWN0cyBGTkMxIGhhbmRsaW5nIGZvciBDb2RlIDEyOCAoYWthIEdTMS0xMjgpLiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87XG4gICAgICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS5cbiAgICAgICAgICovXG4gICAgICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlW1wiQVNTVU1FX0dTMVwiXSA9IDddID0gXCJBU1NVTUVfR1MxXCI7IC8qKFZvaWQuY2xhc3MpKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIHJldHVybiB0aGUgc3RhcnQgYW5kIGVuZCBkaWdpdHMgaW4gYSBDb2RhYmFyIGJhcmNvZGUgaW5zdGVhZCBvZiBzdHJpcHBpbmcgdGhlbS4gVGhleVxuICAgICAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbVxuICAgICAgICAgKiB0byBub3QgYmUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsgdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LlxuICAgICAgICAgKi9cbiAgICAgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbXCJSRVRVUk5fQ09EQUJBUl9TVEFSVF9FTkRcIl0gPSA4XSA9IFwiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EXCI7IC8qKFZvaWQuY2xhc3MpKi9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9XG4gICAgICAgICAqIGlzIGZvdW5kLiBNYXBzIHRvIGEge0BsaW5rIFJlc3VsdFBvaW50Q2FsbGJhY2t9LlxuICAgICAgICAgKi9cbiAgICAgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbXCJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDS1wiXSA9IDldID0gXCJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDS1wiOyAvKihSZXN1bHRQb2ludENhbGxiYWNrLmNsYXNzKSovXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuXG4gICAgICAgICAqIE1hcHMgdG8gYW4ge0Bjb2RlIEludDMyQXJyYXl9IG9mIHRoZSBhbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzLCBmb3IgZXhhbXBsZSBbMl0sIFs1XSwgb3IgWzIsIDVdLlxuICAgICAgICAgKiBJZiBpdCBpcyBvcHRpb25hbCB0byBoYXZlIGFuIGV4dGVuc2lvbiwgZG8gbm90IHNldCB0aGlzIGhpbnQuIElmIHRoaXMgaXMgc2V0LFxuICAgICAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWRcbiAgICAgICAgICogYXQgYWxsLlxuICAgICAgICAgKi9cbiAgICAgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbXCJBTExPV0VEX0VBTl9FWFRFTlNJT05TXCJdID0gMTBdID0gXCJBTExPV0VEX0VBTl9FWFRFTlNJT05TXCI7IC8qKEludDMyQXJyYXkuY2xhc3MpKi9cbiAgICAgICAgLy8gRW5kIG9mIGVudW1lcmF0aW9uIHZhbHVlcy5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgdHlwZSB0aGUgaGludCBpcyBleHBlY3RpbmcuXG4gICAgICAgICAqIEFtb25nIHRoZSBwb3NzaWJsZSB2YWx1ZXMgdGhlIHtAbGluayBWb2lkfSBzdGFuZHMgb3V0IGFzIGJlaW5nIHVzZWQgZm9yXG4gICAgICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50c1xuICAgICAgICAgKiB3aWxsIHBvc3NpYmx5IGhhdmUgdGhlaXIgdmFsdWUgaWdub3JlZCwgb3IgcmVwbGFjZWQgYnkgYVxuICAgICAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfS4gSGludCBzdXBwbGllcnMgc2hvdWxkIHByb2JhYmx5IHVzZVxuICAgICAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIHByaXZhdGUgdmFsdWVUeXBlOiBDbGFzczw/PlxuICAgICAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7XG4gICAgICAgIC8vICAgdGhpcy52YWx1ZVR5cGUgPSB2YWx1ZVR5cGVcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHtcbiAgICAgICAgLy8gICByZXR1cm4gdmFsdWVUeXBlXG4gICAgICAgIC8vIH1cbiAgICB9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpO1xuICAgIHZhciBEZWNvZGVIaW50VHlwZSQxID0gRGVjb2RlSGludFR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uXG4gICAgICovXG4gICAgY2xhc3MgRm9ybWF0RXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICAgICAgc3RhdGljIGdldEZvcm1hdEluc3RhbmNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBGb3JtYXRFeGNlcHRpb24ua2luZCA9ICdGb3JtYXRFeGNlcHRpb24nO1xuXG4gICAgLyppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovXG4gICAgdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7XG4gICAgKGZ1bmN0aW9uIChDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzKSB7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIkNwNDM3XCJdID0gMF0gPSBcIkNwNDM3XCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIklTTzg4NTlfMVwiXSA9IDFdID0gXCJJU084ODU5XzFcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiSVNPODg1OV8yXCJdID0gMl0gPSBcIklTTzg4NTlfMlwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJJU084ODU5XzNcIl0gPSAzXSA9IFwiSVNPODg1OV8zXCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIklTTzg4NTlfNFwiXSA9IDRdID0gXCJJU084ODU5XzRcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiSVNPODg1OV81XCJdID0gNV0gPSBcIklTTzg4NTlfNVwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJJU084ODU5XzZcIl0gPSA2XSA9IFwiSVNPODg1OV82XCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIklTTzg4NTlfN1wiXSA9IDddID0gXCJJU084ODU5XzdcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiSVNPODg1OV84XCJdID0gOF0gPSBcIklTTzg4NTlfOFwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJJU084ODU5XzlcIl0gPSA5XSA9IFwiSVNPODg1OV85XCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIklTTzg4NTlfMTBcIl0gPSAxMF0gPSBcIklTTzg4NTlfMTBcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiSVNPODg1OV8xMVwiXSA9IDExXSA9IFwiSVNPODg1OV8xMVwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJJU084ODU5XzEzXCJdID0gMTJdID0gXCJJU084ODU5XzEzXCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIklTTzg4NTlfMTRcIl0gPSAxM10gPSBcIklTTzg4NTlfMTRcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiSVNPODg1OV8xNVwiXSA9IDE0XSA9IFwiSVNPODg1OV8xNVwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJJU084ODU5XzE2XCJdID0gMTVdID0gXCJJU084ODU5XzE2XCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIlNKSVNcIl0gPSAxNl0gPSBcIlNKSVNcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiQ3AxMjUwXCJdID0gMTddID0gXCJDcDEyNTBcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiQ3AxMjUxXCJdID0gMThdID0gXCJDcDEyNTFcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiQ3AxMjUyXCJdID0gMTldID0gXCJDcDEyNTJcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiQ3AxMjU2XCJdID0gMjBdID0gXCJDcDEyNTZcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiVW5pY29kZUJpZ1VubWFya2VkXCJdID0gMjFdID0gXCJVbmljb2RlQmlnVW5tYXJrZWRcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiVVRGOFwiXSA9IDIyXSA9IFwiVVRGOFwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJBU0NJSVwiXSA9IDIzXSA9IFwiQVNDSUlcIjtcbiAgICAgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW1wiQmlnNVwiXSA9IDI0XSA9IFwiQmlnNVwiO1xuICAgICAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbXCJHQjE4MDMwXCJdID0gMjVdID0gXCJHQjE4MDMwXCI7XG4gICAgICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tcIkVVQ19LUlwiXSA9IDI2XSA9IFwiRVVDX0tSXCI7XG4gICAgfSkoQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyB8fCAoQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7XG4gICAgLyoqXG4gICAgICogRW5jYXBzdWxhdGVzIGEgQ2hhcmFjdGVyIFNldCBFQ0ksIGFjY29yZGluZyB0byBcIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zXCIgNS4zLjEuMVxuICAgICAqIG9mIElTTyAxODAwNC5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgQ2hhcmFjdGVyU2V0RUNJIHtcbiAgICAgICAgY29uc3RydWN0b3IodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSwgLi4ub3RoZXJFbmNvZGluZ05hbWVzKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlSWRlbnRpZmllciA9IHZhbHVlSWRlbnRpZmllcjtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzID0gSW50MzJBcnJheS5mcm9tKFt2YWx1ZXNQYXJhbV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXNQYXJhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzO1xuICAgICAgICAgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJLnNldCh2YWx1ZUlkZW50aWZpZXIsIHRoaXMpO1xuICAgICAgICAgICAgQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLnNldChuYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWVzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHZhbHVlcy5sZW5ndGg7IGkgIT09IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG90aGVyTmFtZSBvZiBvdGhlckVuY29kaW5nTmFtZXMpIHtcbiAgICAgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuTkFNRV9UT19FQ0kuc2V0KG90aGVyTmFtZSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlOiBudW1iZXIgLyppbnQqLykge1xuICAgICAgICAvLyAgIHRoaXMobmV3IEludDMyQXJyYXkge3ZhbHVlfSlcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovLCBTdHJpbmcuLi4gb3RoZXJFbmNvZGluZ05hbWVzKSB7XG4gICAgICAgIC8vICAgdGhpcy52YWx1ZXMgPSBuZXcgSW50MzJBcnJheSB7dmFsdWV9XG4gICAgICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXNcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVzOiBJbnQzMkFycmF5LCBTdHJpbmcuLi4gb3RoZXJFbmNvZGluZ05hbWVzKSB7XG4gICAgICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXNcbiAgICAgICAgLy8gICB0aGlzLm90aGVyRW5jb2RpbmdOYW1lcyA9IG90aGVyRW5jb2RpbmdOYW1lc1xuICAgICAgICAvLyB9XG4gICAgICAgIGdldFZhbHVlSWRlbnRpZmllcigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlSWRlbnRpZmllcjtcbiAgICAgICAgfVxuICAgICAgICBnZXROYW1lKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1swXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIGNoYXJhY3RlciBzZXQgRUNJIHZhbHVlXG4gICAgICAgICAqIEByZXR1cm4ge0Bjb2RlIENoYXJhY3RlclNldEVDSX0gcmVwcmVzZW50aW5nIEVDSSBvZiBnaXZlbiB2YWx1ZSwgb3IgbnVsbCBpZiBpdCBpcyBsZWdhbCBidXRcbiAgICAgICAgICogICB1bnN1cHBvcnRlZFxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBFQ0kgdmFsdWUgaXMgaW52YWxpZFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUodmFsdWUgLyppbnQqLykge1xuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCB8fCB2YWx1ZSA+PSA5MDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCdpbmNvcmVjdCB2YWx1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLlZBTFVFU19UT19FQ0kuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oJ2luY29yZWN0IHZhbHVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbmFtZSBjaGFyYWN0ZXIgc2V0IEVDSSBlbmNvZGluZyBuYW1lXG4gICAgICAgICAqIEByZXR1cm4gQ2hhcmFjdGVyU2V0RUNJIHJlcHJlc2VudGluZyBFQ0kgZm9yIGNoYXJhY3RlciBlbmNvZGluZywgb3IgbnVsbCBpZiBpdCBpcyBsZWdhbFxuICAgICAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldENoYXJhY3RlclNldEVDSUJ5TmFtZShuYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJTZXQgPSBDaGFyYWN0ZXJTZXRFQ0kuTkFNRV9UT19FQ0kuZ2V0KG5hbWUpO1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbignaW5jb3JlY3QgdmFsdWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZXF1YWxzKG8pIHtcbiAgICAgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBDaGFyYWN0ZXJTZXRFQ0kpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXIgPSBvO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TmFtZSgpID09PSBvdGhlci5nZXROYW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpO1xuICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpO1xuICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTtcbiAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW9cbiAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmFcbiAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpXG4gICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHRcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpO1xuICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpO1xuICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpO1xuICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpO1xuICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpO1xuICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpO1xuICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTtcbiAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpO1xuICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7XG4gICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpO1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICB9XG4gICAgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24ua2luZCA9ICdVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbic7XG5cbiAgICAvKipcbiAgICAgKiBSZXNwb25zaWJsZSBmb3IgZW4vZGVjb2Rpbmcgc3RyaW5ncy5cbiAgICAgKi9cbiAgICBjbGFzcyBTdHJpbmdFbmNvZGluZyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIHNvbWUgVWludDhBcnJheSB0byBhIHN0cmluZyBmb3JtYXQuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlKGJ5dGVzLCBlbmNvZGluZykge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RpbmdOYW1lID0gdGhpcy5lbmNvZGluZ05hbWUoZW5jb2RpbmcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbmNyZWFzZXMgYnJvd3NlciBzdXBwb3J0LlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVGYWxsYmFjayhieXRlcywgZW5jb2RpbmdOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIGRlY29kaW5nIG1ldGhvZCBzaG91bGQgdXNlIHRoZSBmYWxsYmFjayBmb3IgZGVjb2RpbmdcbiAgICAgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGVuY29kaW5nTmFtZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIHNob3VsZERlY29kZU9uRmFsbGJhY2soZW5jb2RpbmdOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHNvbWUgc3RyaW5nIGludG8gYSBVaW50OEFycmF5LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGVuY29kZShzLCBlbmNvZGluZykge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RpbmdOYW1lID0gdGhpcy5lbmNvZGluZ05hbWUoZW5jb2RpbmcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2Rlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbUVuY29kZXIocywgZW5jb2RpbmdOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuXG4gICAgICAgICAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZUZhbGxiYWNrKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGV4dEVuY29kZXIgb25seSBlbmNvZGVzIHRvIFVURjggYnkgZGVmYXVsdCBhcyBzcGVjaWZpZWQgYnkgZW5jb2Rpbmcuc3BlYy53aGF0d2cub3JnXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHMpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBpc0Jyb3dzZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwod2luZG93KSA9PT0gJ1tvYmplY3QgV2luZG93XScpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgdmFsdWUgZnJvbSBzb21lIGVuY29kaW5nIGNoYXJhY3RlciBzZXQuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZW5jb2RpbmdOYW1lKGVuY29kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZW5jb2RpbmdcbiAgICAgICAgICAgICAgICA6IGVuY29kaW5nLmdldE5hbWUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGVuY29kaW5nQ2hhcmFjdGVyU2V0KGVuY29kaW5nKSB7XG4gICAgICAgICAgICBpZiAoZW5jb2RpbmcgaW5zdGFuY2VvZiBDaGFyYWN0ZXJTZXRFQ0kpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2Rpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5TmFtZShlbmNvZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZykge1xuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7XG4gICAgICAgICAgICBpZiAoU3RyaW5nRW5jb2RpbmcuaXNEZWNvZGVGYWxsYmFja1N1cHBvcnRlZChjaGFyYWN0ZXJTZXQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHMgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGggPSBieXRlc1tpXS50b1N0cmluZygxNik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAnMCcgKyBoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHMgKz0gJyUnICsgaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKGBFbmNvZGluZyAke3RoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKX0gbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay5gKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgaXNEZWNvZGVGYWxsYmFja1N1cHBvcnRlZChjaGFyYWN0ZXJTZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSS5VVEY4KSB8fFxuICAgICAgICAgICAgICAgIGNoYXJhY3RlclNldC5lcXVhbHMoQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMSkgfHxcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSS5BU0NJSSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBlbmNvZGluZyBmdW5jaW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZW5jb2RlRmFsbGJhY2socykge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7XG4gICAgICAgICAgICBjb25zdCBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpO1xuICAgICAgICAgICAgY29uc3QgdWludEFycmF5ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdWludEFycmF5LnB1c2goY2hhckxpc3RbaV0uY2hhckNvZGVBdCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodWludEFycmF5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IChDKSAyMDEwIFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgQWxleCBEdXByZVxuICAgICAqL1xuICAgIGNsYXNzIFN0cmluZ1V0aWxzIHtcbiAgICAgICAgLy8gU0hJRlRfSklTLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORykgfHxcbiAgICAgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7XG4gICAgICAgIHN0YXRpYyBjYXN0QXNOb25VdGY4Q2hhcihjb2RlLCBlbmNvZGluZyA9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0c1xuICAgICAgICAgICAgLy8geW91IGNhbiBzZWUgdGhpcyBtZXRob2QgYXMgYSBKYXZhIHZlcnNpb24gb2YgU3RyaW5nLmZyb21DaGFyQ29kZVxuICAgICAgICAgICAgY29uc3QgZSA9IGVuY29kaW5nID8gZW5jb2RpbmcuZ2V0TmFtZSgpIDogdGhpcy5JU084ODU5MTtcbiAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZylcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZy5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBieXRlcyBieXRlcyBlbmNvZGluZyBhIHN0cmluZywgd2hvc2UgZW5jb2Rpbmcgc2hvdWxkIGJlIGd1ZXNzZWRcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlXG4gICAgICAgICAqIEByZXR1cm4gbmFtZSBvZiBndWVzc2VkIGVuY29kaW5nOyBhdCB0aGUgbW9tZW50IHdpbGwgb25seSBndWVzcyBvbmUgb2Y6XG4gICAgICAgICAqICB7QGxpbmsgI1NISUZUX0pJU30sIHtAbGluayAjVVRGOH0sIHtAbGluayAjSVNPODg1OTF9LCBvciB0aGUgcGxhdGZvcm1cbiAgICAgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGd1ZXNzRW5jb2RpbmcoYnl0ZXMsIGhpbnRzKSB7XG4gICAgICAgICAgICBpZiAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLkNIQVJBQ1RFUl9TRVQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGb3Igbm93LCBtZXJlbHkgdHJpZXMgdG8gZGlzdGluZ3Vpc2ggSVNPLTg4NTktMSwgVVRGLTggYW5kIFNoaWZ0X0pJUyxcbiAgICAgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy5cbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBjYW5CZUlTTzg4NTkxID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjYW5CZVNoaWZ0SklTID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjYW5CZVVURjggPSB0cnVlO1xuICAgICAgICAgICAgbGV0IHV0ZjhCeXRlc0xlZnQgPSAwO1xuICAgICAgICAgICAgLy8gaW50IHV0ZjhMb3dDaGFycyA9IDBcbiAgICAgICAgICAgIGxldCB1dGYyQnl0ZXNDaGFycyA9IDA7XG4gICAgICAgICAgICBsZXQgdXRmM0J5dGVzQ2hhcnMgPSAwO1xuICAgICAgICAgICAgbGV0IHV0ZjRCeXRlc0NoYXJzID0gMDtcbiAgICAgICAgICAgIGxldCBzamlzQnl0ZXNMZWZ0ID0gMDtcbiAgICAgICAgICAgIC8vIGludCBzamlzTG93Q2hhcnMgPSAwXG4gICAgICAgICAgICBsZXQgc2ppc0thdGFrYW5hQ2hhcnMgPSAwO1xuICAgICAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMFxuICAgICAgICAgICAgbGV0IHNqaXNDdXJLYXRha2FuYVdvcmRMZW5ndGggPSAwO1xuICAgICAgICAgICAgbGV0IHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwO1xuICAgICAgICAgICAgbGV0IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwO1xuICAgICAgICAgICAgbGV0IHNqaXNNYXhEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwO1xuICAgICAgICAgICAgLy8gaW50IGlzb0xvd0NoYXJzID0gMFxuICAgICAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDBcbiAgICAgICAgICAgIGxldCBpc29IaWdoT3RoZXIgPSAwO1xuICAgICAgICAgICAgY29uc3QgdXRmOGJvbSA9IGJ5dGVzLmxlbmd0aCA+IDMgJiZcbiAgICAgICAgICAgICAgICBieXRlc1swXSA9PT0gLyooYnl0ZSkgKi8gMHhFRiAmJlxuICAgICAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmXG4gICAgICAgICAgICAgICAgYnl0ZXNbMl0gPT09IC8qKGJ5dGUpICovIDB4QkY7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aCAmJiAoY2FuQmVJU084ODU5MSB8fCBjYW5CZVNoaWZ0SklTIHx8IGNhbkJlVVRGOCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYnl0ZXNbaV0gJiAweEZGO1xuICAgICAgICAgICAgICAgIC8vIFVURi04IHN0dWZmXG4gICAgICAgICAgICAgICAgaWYgKGNhbkJlVVRGOCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRmOEJ5dGVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmOEJ5dGVzTGVmdC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCh2YWx1ZSAmIDB4ODApICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlICYgMHg0MCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlICYgMHgyMCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmMkJ5dGVzQ2hhcnMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGYzQnl0ZXNDaGFycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmOEJ5dGVzTGVmdCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MDgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IC8vIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrK1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmZcbiAgICAgICAgICAgICAgICBpZiAoY2FuQmVJU084ODU5MSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAweDdGICYmIHZhbHVlIDwgMHhBMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg5Rikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzb0hpZ2hPdGhlcisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKytcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmZcbiAgICAgICAgICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0J5dGVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ppc0J5dGVzTGVmdC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAweDgwIHx8IHZhbHVlID09PSAweEEwIHx8IHZhbHVlID4gMHhFRikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHhBMCAmJiB2YWx1ZSA8IDB4RTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNLYXRha2FuYUNoYXJzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJLYXRha2FuYVdvcmRMZW5ndGgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoID4gc2ppc01heEthdGFrYW5hV29yZExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3Rikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2ppc0J5dGVzTGVmdCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0RvdWJsZUJ5dGVzQ2hhcnMrK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aCA+IHNqaXNNYXhEb3VibGVCeXRlc1dvcmRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNMb3dDaGFycysrXG4gICAgICAgICAgICAgICAgICAgICAgICBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbkJlVVRGOCAmJiB1dGY4Qnl0ZXNMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMgJiYgc2ppc0J5dGVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFYXN5IC0tIGlmIHRoZXJlIGlzIEJPTSBvciBhdCBsZWFzdCAxIHZhbGlkIG5vdC1zaW5nbGUgYnl0ZSBjaGFyYWN0ZXIgKGFuZCBubyBldmlkZW5jZSBpdCBjYW4ndCBiZSBVVEYtOCksIGRvbmVcbiAgICAgICAgICAgIGlmIChjYW5CZVVURjggJiYgKHV0Zjhib20gfHwgdXRmMkJ5dGVzQ2hhcnMgKyB1dGYzQnl0ZXNDaGFycyArIHV0ZjRCeXRlc0NoYXJzID4gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEVhc3kgLS0gaWYgYXNzdW1pbmcgU2hpZnRfSklTIG9yIGF0IGxlYXN0IDMgdmFsaWQgY29uc2VjdXRpdmUgbm90LWFzY2lpIGNoYXJhY3RlcnMgKGFuZCBubyBldmlkZW5jZSBpdCBjYW4ndCBiZSksIGRvbmVcbiAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlNISUZUX0pJUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOlxuICAgICAgICAgICAgLy8gLSBJZiB3ZSBzYXdcbiAgICAgICAgICAgIC8vICAgLSBvbmx5IHR3byBjb25zZWN1dGl2ZSBrYXRha2FuYSBjaGFycyBpbiB0aGUgd2hvbGUgdGV4dCwgb3JcbiAgICAgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSBcInVwcGVyXCIgbm90LWFscGhhbnVtZXJpYyBMYXRpbjEsXG4gICAgICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTFcbiAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxICYmIGNhbkJlU2hpZnRKSVMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPT09IDIgJiYgc2ppc0thdGFrYW5hQ2hhcnMgPT09IDIpIHx8IGlzb0hpZ2hPdGhlciAqIDEwID49IGxlbmd0aFxuICAgICAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB0cnkgaW4gb3JkZXIgSVNPLTg4NTktMSwgU2hpZnQgSklTLCBVVEYtOCBhbmQgZmFsbCBiYWNrIHRvIGRlZmF1bHQgcGxhdGZvcm0gZW5jb2RpbmdcbiAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLklTTzg4NTkxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbkJlVVRGOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5VVEY4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuUExBVEZPUk1fREVGQVVMVF9FTkNPRElORztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTM0Mzk3MTEvNDM2NzY4M1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC5cbiAgICAgICAgICogQHBhcmFtIGFyZ3MgQXJndW1ldHMgdmFsdWVzIHRvIGJlIGZvcm1hdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGZvcm1hdChhcHBlbmQsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkge1xuICAgICAgICAgICAgICAgIGlmIChleHAgPT09ICclJScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJSc7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGV4cCA9IHAyID8gcGFyc2VJbnQocDIuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsZXQgdmFsO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocDQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gYXJnc1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQoYXJnc1tpXSkudG9GaXhlZChleHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b1ByZWNpc2lvbihleHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0V4cG9uZW50aWFsKGV4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUludChhcmdzW2ldKS50b1N0cmluZyhiYXNlID8gYmFzZSA6IDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoYXJnc1tpXSwgYmFzZSA/IGJhc2UgOiAxMCkudG9QcmVjaXNpb24oZXhwKSkudG9GaXhlZCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWwgPSB0eXBlb2YgdmFsID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KHZhbCkgOiAoK3ZhbCkudG9TdHJpbmcoYmFzZSk7XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSBwYXJzZUludChwMSk7IC8qIHBhZGRpbmcgc2l6ZSAqL1xuICAgICAgICAgICAgICAgIGxldCBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovXG4gICAgICAgICAgICAgICAgd2hpbGUgKHZhbC5sZW5ndGggPCBzaXplKVxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBwMCAhPT0gdW5kZWZpbmVkID8gdmFsICsgY2ggOiBjaCArIHZhbDsgLyogaXNtaW51cz8gKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlZ2V4ID0gLyUoLSk/KDA/WzAtOV0rKT8oWy5dWzAtOV0rKT8oWyNdWzAtOV0rKT8oW3NjZnBleGQlXSkvZztcbiAgICAgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldEJ5dGVzKHN0ciwgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZy5lbmNvZGUoc3RyLCBlbmNvZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGNoYXJjb2RlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggb3IgYXQgaW5kZXggemVyby5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBnZXRDaGFyQ29kZShzdHIsIGluZGV4ID0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBjaGFyIGZvciBnaXZlbiBjaGFyY29kZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldENoYXJBdChjaGFyQ29kZSkge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN0cmluZ1V0aWxzLlNISUZUX0pJUyA9IENoYXJhY3RlclNldEVDSS5TSklTLmdldE5hbWUoKTsgLy8gXCJTSklTXCJcbiAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJztcbiAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSS5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyBcIklTTzg4NTlfMVwiXG4gICAgU3RyaW5nVXRpbHMuRVVDX0pQID0gJ0VVQ19KUCc7XG4gICAgU3RyaW5nVXRpbHMuVVRGOCA9IENoYXJhY3RlclNldEVDSS5VVEY4LmdldE5hbWUoKTsgLy8gXCJVVEY4XCJcbiAgICBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HID0gU3RyaW5nVXRpbHMuVVRGODsgLy8gXCJVVEY4XCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKClcbiAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7XG5cbiAgICBjbGFzcyBTdHJpbmdCdWlsZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IodmFsdWUgPSAnJykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVuYWJsZURlY29kaW5nKGVuY29kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kaW5nID0gZW5jb2Rpbmc7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBhcHBlbmQocykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5lbmNvZGluZykge1xuICAgICAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZylcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlICs9IFN0cmluZ1V0aWxzLmNhc3RBc05vblV0ZjhDaGFyKHMsIHRoaXMuZW5jb2RpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdGx5IGNvbnZlcnRzIGZyb20gVVRGLTgsIGJ1dCBub3Qgb3RoZXIgZW5jb2RpbmdzXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgYXBwZW5kQ2hhcnMoc3RyLCBvZmZzZXQsIGxlbikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZChzdHJbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgbGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNoYXJBdChuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5jaGFyQXQobik7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlQ2hhckF0KG4pIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRDaGFyQXQobiwgYykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyKDAsIG4pICsgYyArIHRoaXMudmFsdWUuc3Vic3RyKG4gKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzdHJpbmcoc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWRcbiAgICAgICAgICovXG4gICAgICAgIHNldExlbmd0aFRvWmVybygpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGluc2VydChuLCBjKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHIoMCwgbikgKyBjICsgdGhpcy52YWx1ZS5zdWJzdHIobiArIGMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+UmVwcmVzZW50cyBhIDJEIG1hdHJpeCBvZiBiaXRzLiBJbiBmdW5jdGlvbiBhcmd1bWVudHMgYmVsb3csIGFuZCB0aHJvdWdob3V0IHRoZSBjb21tb25cbiAgICAgKiBtb2R1bGUsIHggaXMgdGhlIGNvbHVtbiBwb3NpdGlvbiwgYW5kIHkgaXMgdGhlIHJvdyBwb3NpdGlvbi4gVGhlIG9yZGVyaW5nIGlzIGFsd2F5cyB4LCB5LlxuICAgICAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD5cbiAgICAgKlxuICAgICAqIDxwPkludGVybmFsbHkgdGhlIGJpdHMgYXJlIHJlcHJlc2VudGVkIGluIGEgMS1EIGFycmF5IG9mIDMyLWJpdCBpbnRzLiBIb3dldmVyLCBlYWNoIHJvdyBiZWdpbnNcbiAgICAgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnlcbiAgICAgKiBlZmZpY2llbnRseS48L3A+XG4gICAgICpcbiAgICAgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsXG4gICAgICogbWVhbmluZyB0aGV5IHJlcHJlc2VudCBsb3dlciB4IHZhbHVlcy4gVGhpcyBpcyBjb21wYXRpYmxlIHdpdGggQml0QXJyYXkncyBpbXBsZW1lbnRhdGlvbi48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICovXG4gICAgY2xhc3MgQml0TWF0cml4IC8qaW1wbGVtZW50cyBDbG9uZWFibGUqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGFuIGVtcHR5IHNxdWFyZSB7QGxpbmsgQml0TWF0cml4fS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGRpbWVuc2lvbiBoZWlnaHQgYW5kIHdpZHRoXG4gICAgICAgICAqL1xuICAgICAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykge1xuICAgICAgICAvLyAgIHRoaXMoZGltZW5zaW9uLCBkaW1lbnNpb24pXG4gICAgICAgIC8vIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gZW1wdHkge0BsaW5rIEJpdE1hdHJpeH0uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoXG4gICAgICAgICAqIEBwYXJhbSBoZWlnaHQgYml0IG1hdHJpeCBoZWlnaHRcbiAgICAgICAgICovXG4gICAgICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHtcbiAgICAgICAgLy8gICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHtcbiAgICAgICAgLy8gICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiKVxuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGhcbiAgICAgICAgLy8gICB0aGlzLmhlaWdodCA9IGhlaWdodFxuICAgICAgICAvLyAgIHRoaXMucm93U2l6ZSA9ICh3aWR0aCArIDMxKSAvIDMyXG4gICAgICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07XG4gICAgICAgIC8vIH1cbiAgICAgICAgY29uc3RydWN0b3Iod2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8sIHJvd1NpemUgLyppbnQqLywgYml0cykge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnJvd1NpemUgPSByb3dTaXplO1xuICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0cztcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHdpZHRoIDwgMSB8fCBoZWlnaHQgPCAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignQm90aCBkaW1lbnNpb25zIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHJvd1NpemUgfHwgbnVsbCA9PT0gcm93U2l6ZSkge1xuICAgICAgICAgICAgICAgIHJvd1NpemUgPSBNYXRoLmZsb29yKCh3aWR0aCArIDMxKSAvIDMyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBiaXRzIHx8IG51bGwgPT09IGJpdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVycHJldHMgYSAyRCBhcnJheSBvZiBib29sZWFucyBhcyBhIHtAbGluayBCaXRNYXRyaXh9LCB3aGVyZSBcInRydWVcIiBtZWFucyBhbiBcIm9uXCIgYml0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb24gcGFyc2VcbiAgICAgICAgICogQHBhcmFtIGltYWdlIGJpdHMgb2YgdGhlIGltYWdlLCBhcyBhIHJvdy1tYWpvciAyRCBhcnJheS4gRWxlbWVudHMgYXJlIGFycmF5cyByZXByZXNlbnRpbmcgcm93c1xuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBpbWFnZS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IGltYWdlWzBdLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSBuZXcgQml0TWF0cml4KHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlSSA9IGltYWdlW2ldO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgd2lkdGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VJW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZnVuY3Rpb24gcGFyc2VcbiAgICAgICAgICogQHBhcmFtIHN0cmluZ1JlcHJlc2VudGF0aW9uXG4gICAgICAgICAqIEBwYXJhbSBzZXRTdHJpbmdcbiAgICAgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcGFyc2VGcm9tU3RyaW5nKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdzdHJpbmdSZXByZXNlbnRhdGlvbiBjYW5ub3QgYmUgbnVsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IGJpdHNQb3MgPSAwO1xuICAgICAgICAgICAgbGV0IHJvd1N0YXJ0UG9zID0gMDtcbiAgICAgICAgICAgIGxldCByb3dMZW5ndGggPSAtMTtcbiAgICAgICAgICAgIGxldCBuUm93cyA9IDA7XG4gICAgICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uY2hhckF0KHBvcykgPT09ICdcXG4nIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXFxyJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYml0c1BvcyA+IHJvd1N0YXJ0UG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0xlbmd0aCA9IGJpdHNQb3MgLSByb3dTdGFydFBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigncm93IGxlbmd0aHMgZG8gbm90IG1hdGNoJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBuUm93cysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zLCBwb3MgKyBzZXRTdHJpbmcubGVuZ3RoKSA9PT0gc2V0U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYml0c1BvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zLCBwb3MgKyB1bnNldFN0cmluZy5sZW5ndGgpID09PSB1bnNldFN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gdW5zZXRTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJpdHNQb3MrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ2lsbGVnYWwgY2hhcmFjdGVyIGVuY291bnRlcmVkOiAnICsgc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIEVPTCBhdCBlbmQ/XG4gICAgICAgICAgICBpZiAoYml0c1BvcyA+IHJvd1N0YXJ0UG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgblJvd3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBCaXRNYXRyaXgocm93TGVuZ3RoLCBuUm93cyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpdHNQb3M7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoTWF0aC5mbG9vcihpICUgcm93TGVuZ3RoKSwgTWF0aC5mbG9vcihpIC8gcm93TGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pXG4gICAgICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KVxuICAgICAgICAgKiBAcmV0dXJuIHZhbHVlIG9mIGdpdmVuIGJpdCBpbiBtYXRyaXhcbiAgICAgICAgICovXG4gICAgICAgIGdldCh4IC8qaW50Ki8sIHkgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0geSAqIHRoaXMucm93U2l6ZSArIE1hdGguZmxvb3IoeCAvIDMyKTtcbiAgICAgICAgICAgIHJldHVybiAoKHRoaXMuYml0c1tvZmZzZXRdID4+PiAoeCAmIDB4MWYpKSAmIDEpICE9PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5TZXRzIHRoZSBnaXZlbiBiaXQgdG8gdHJ1ZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pXG4gICAgICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0KHggLyppbnQqLywgeSAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpO1xuICAgICAgICAgICAgdGhpcy5iaXRzW29mZnNldF0gfD0gKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGO1xuICAgICAgICB9XG4gICAgICAgIHVuc2V0KHggLyppbnQqLywgeSAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpO1xuICAgICAgICAgICAgdGhpcy5iaXRzW29mZnNldF0gJj0gfigoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5GbGlwcyB0aGUgZ2l2ZW4gYml0LjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbilcbiAgICAgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpXG4gICAgICAgICAqL1xuICAgICAgICBmbGlwKHggLyppbnQqLywgeSAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpO1xuICAgICAgICAgICAgdGhpcy5iaXRzW29mZnNldF0gXj0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4Y2x1c2l2ZS1vciAoWE9SKTogRmxpcCB0aGUgYml0IGluIHRoaXMge0Bjb2RlIEJpdE1hdHJpeH0gaWYgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgICAgICogbWFzayBiaXQgaXMgc2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbWFzayBYT1IgbWFza1xuICAgICAgICAgKi9cbiAgICAgICAgeG9yKG1hc2spIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoICE9PSBtYXNrLmdldFdpZHRoKCkgfHwgdGhpcy5oZWlnaHQgIT09IG1hc2suZ2V0SGVpZ2h0KClcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignaW5wdXQgbWF0cml4IGRpbWVuc2lvbnMgZG8gbm90IG1hdGNoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByb3dBcnJheSA9IG5ldyBCaXRBcnJheShNYXRoLmZsb29yKHRoaXMud2lkdGggLyAzMikgKyAxKTtcbiAgICAgICAgICAgIGNvbnN0IHJvd1NpemUgPSB0aGlzLnJvd1NpemU7XG4gICAgICAgICAgICBjb25zdCBiaXRzID0gdGhpcy5iaXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogcm93U2l6ZTtcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIHhdIF49IHJvd1t4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhcigpIHtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBjb25zdCBtYXggPSBiaXRzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBiaXRzW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+U2V0cyBhIHNxdWFyZSByZWdpb24gb2YgdGhlIGJpdCBtYXRyaXggdG8gdHJ1ZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBob3Jpem9udGFsIHBvc2l0aW9uIHRvIGJlZ2luIGF0IChpbmNsdXNpdmUpXG4gICAgICAgICAqIEBwYXJhbSB0b3AgVGhlIHZlcnRpY2FsIHBvc2l0aW9uIHRvIGJlZ2luIGF0IChpbmNsdXNpdmUpXG4gICAgICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvblxuICAgICAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlZ2lvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0UmVnaW9uKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICBpZiAodG9wIDwgMCB8fCBsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMSB8fCB3aWR0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gICAgICAgICAgICBpZiAoYm90dG9tID4gdGhpcy5oZWlnaHQgfHwgcmlnaHQgPiB0aGlzLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gdG9wOyB5IDwgYm90dG9tOyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogcm93U2l6ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyBNYXRoLmZsb29yKHggLyAzMildIHw9ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmYXN0IG1ldGhvZCB0byByZXRyaWV2ZSBvbmUgcm93IG9mIGRhdGEgZnJvbSB0aGUgbWF0cml4IGFzIGEgQml0QXJyYXkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gcmV0cmlldmVcbiAgICAgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBjYWxsZXItYWxsb2NhdGVkIEJpdEFycmF5LCB3aWxsIGJlIGFsbG9jYXRlZCBpZiBudWxsIG9yIHRvbyBzbWFsbFxuICAgICAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmdcbiAgICAgICAgICogICAgICAgICB5b3VyIG93biByb3dcbiAgICAgICAgICovXG4gICAgICAgIGdldFJvdyh5IC8qaW50Ki8sIHJvdykge1xuICAgICAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cuZ2V0U2l6ZSgpIDwgdGhpcy53aWR0aCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheSh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJvdy5jbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB5ICogcm93U2l6ZTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB5IHJvdyB0byBzZXRcbiAgICAgICAgICogQHBhcmFtIHJvdyB7QGxpbmsgQml0QXJyYXl9IHRvIGNvcHkgZnJvbVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0Um93KHkgLyppbnQqLywgcm93KSB7XG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1vZGlmaWVzIHRoaXMge0Bjb2RlIEJpdE1hdHJpeH0gdG8gcmVwcmVzZW50IHRoZSBzYW1lIGJ1dCByb3RhdGVkIDE4MCBkZWdyZWVzXG4gICAgICAgICAqL1xuICAgICAgICByb3RhdGUxODAoKSB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgdG9wUm93ID0gbmV3IEJpdEFycmF5KHdpZHRoKTtcbiAgICAgICAgICAgIGxldCBib3R0b21Sb3cgPSBuZXcgQml0QXJyYXkod2lkdGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRvcFJvdyA9IHRoaXMuZ2V0Um93KGksIHRvcFJvdyk7XG4gICAgICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7XG4gICAgICAgICAgICAgICAgdG9wUm93LnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBib3R0b21Sb3cucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb3coaGVpZ2h0IC0gMSAtIGksIHRvcFJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZnVsIGluIGRldGVjdGluZyB0aGUgZW5jbG9zaW5nIHJlY3RhbmdsZSBvZiBhICdwdXJlJyBiYXJjb2RlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGVcbiAgICAgICAgICovXG4gICAgICAgIGdldEVuY2xvc2luZ1JlY3RhbmdsZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICAgICAgY29uc3Qgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSB0aGlzLmJpdHM7XG4gICAgICAgICAgICBsZXQgbGVmdCA9IHdpZHRoO1xuICAgICAgICAgICAgbGV0IHRvcCA9IGhlaWdodDtcbiAgICAgICAgICAgIGxldCByaWdodCA9IC0xO1xuICAgICAgICAgICAgbGV0IGJvdHRvbSA9IC0xO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoZUJpdHMgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5IDwgdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiA8IGxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYml0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKCh0aGVCaXRzIDw8ICgzMSAtIGJpdCkpICYgMHhGRkZGRkZGRikgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeDMyICogMzIgKyBiaXQpIDwgbGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0geDMyICogMzIgKyBiaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgzMiAqIDMyICsgMzEgPiByaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiaXQgPSAzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeDMyICogMzIgKyBiaXQpID4gcmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSB4MzIgKiAzMiArIGJpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmlnaHQgPCBsZWZ0IHx8IGJvdHRvbSA8IHRvcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEludDMyQXJyYXkuZnJvbShbbGVmdCwgdG9wLCByaWdodCAtIGxlZnQgKyAxLCBib3R0b20gLSB0b3AgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZnVsIGluIGRldGVjdGluZyBhIGNvcm5lciBvZiBhICdwdXJlJyBiYXJjb2RlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGVcbiAgICAgICAgICovXG4gICAgICAgIGdldFRvcExlZnRPbkJpdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvd1NpemUgPSB0aGlzLnJvd1NpemU7XG4gICAgICAgICAgICBjb25zdCBiaXRzID0gdGhpcy5iaXRzO1xuICAgICAgICAgICAgbGV0IGJpdHNPZmZzZXQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPCBiaXRzLmxlbmd0aCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYml0c09mZnNldCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJpdHNPZmZzZXQgPT09IGJpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB5ID0gYml0c09mZnNldCAvIHJvd1NpemU7XG4gICAgICAgICAgICBsZXQgeCA9IChiaXRzT2Zmc2V0ICUgcm93U2l6ZSkgKiAzMjtcbiAgICAgICAgICAgIGNvbnN0IHRoZUJpdHMgPSBiaXRzW2JpdHNPZmZzZXRdO1xuICAgICAgICAgICAgbGV0IGJpdCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoKCh0aGVCaXRzIDw8ICgzMSAtIGJpdCkpICYgMHhGRkZGRkZGRikgPT09IDApIHtcbiAgICAgICAgICAgICAgICBiaXQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHggKz0gYml0O1xuICAgICAgICAgICAgcmV0dXJuIEludDMyQXJyYXkuZnJvbShbeCwgeV0pO1xuICAgICAgICB9XG4gICAgICAgIGdldEJvdHRvbVJpZ2h0T25CaXQoKSB7XG4gICAgICAgICAgICBjb25zdCByb3dTaXplID0gdGhpcy5yb3dTaXplO1xuICAgICAgICAgICAgY29uc3QgYml0cyA9IHRoaXMuYml0cztcbiAgICAgICAgICAgIGxldCBiaXRzT2Zmc2V0ID0gYml0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYml0c09mZnNldC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihiaXRzT2Zmc2V0IC8gcm93U2l6ZSk7XG4gICAgICAgICAgICBsZXQgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7XG4gICAgICAgICAgICBjb25zdCB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTtcbiAgICAgICAgICAgIGxldCBiaXQgPSAzMTtcbiAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJpdC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeCArPSBiaXQ7XG4gICAgICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBtYXRyaXhcbiAgICAgICAgICovXG4gICAgICAgIGdldFdpZHRoKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gVGhlIGhlaWdodCBvZiB0aGUgbWF0cml4XG4gICAgICAgICAqL1xuICAgICAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gVGhlIHJvdyBzaXplIG9mIHRoZSBtYXRyaXhcbiAgICAgICAgICovXG4gICAgICAgIGdldFJvd1NpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZXF1YWxzKG8pIHtcbiAgICAgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBCaXRNYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXIgPSBvO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggPT09IG90aGVyLndpZHRoICYmIHRoaXMuaGVpZ2h0ID09PSBvdGhlci5oZWlnaHQgJiYgdGhpcy5yb3dTaXplID09PSBvdGhlci5yb3dTaXplICYmXG4gICAgICAgICAgICAgICAgQXJyYXlzLmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgaGFzaENvZGUoKSB7XG4gICAgICAgICAgICBsZXQgaGFzaCA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDtcbiAgICAgICAgICAgIGhhc2ggPSAzMSAqIGhhc2ggKyB0aGlzLmhlaWdodDtcbiAgICAgICAgICAgIGhhc2ggPSAzMSAqIGhhc2ggKyB0aGlzLnJvd1NpemU7XG4gICAgICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzLmhhc2hDb2RlKHRoaXMuYml0cyk7XG4gICAgICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50YXRpb24gdXNpbmcgXCJYXCIgZm9yIHNldCBhbmQgXCIgXCIgZm9yIHVuc2V0IGJpdHNcbiAgICAgICAgICovXG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIC8vICAgcmV0dXJuIHRvU3RyaW5nKFwiOiBcIlgsIFwiICBcIilcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHNldFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHNldCBiaXRcbiAgICAgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdFxuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBlbnRpcmUgbWF0cml4IHV0aWxpemluZyBnaXZlbiBzdHJpbmdzXG4gICAgICAgICAqL1xuICAgICAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSBcIlggXCIsIHVuc2V0U3RyaW5nOiBzdHJpbmcgPSBcIiAgXCIpOiBzdHJpbmcge1xuICAgICAgICAvLyAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgXCJcXG5cIilcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHNldFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHNldCBiaXRcbiAgICAgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdFxuICAgICAgICAgKiBAcGFyYW0gbGluZVNlcGFyYXRvciBuZXdsaW5lIGNoYXJhY3RlciBpbiBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZW50aXJlIG1hdHJpeCB1dGlsaXppbmcgZ2l2ZW4gc3RyaW5ncyBhbmQgbGluZSBzZXBhcmF0b3JcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxcbiBsaW5lIHNlcGFyYXRvciBhbHdheXNcbiAgICAgICAgICovXG4gICAgICAgIC8vIEBEZXByZWNhdGVkXG4gICAgICAgIHRvU3RyaW5nKHNldFN0cmluZyA9ICdYICcsIHVuc2V0U3RyaW5nID0gJyAgJywgbGluZVNlcGFyYXRvciA9ICdcXG4nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsIGxpbmVTZXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICAvLyByZXN1bHQuYXBwZW5kKGxpbmVTZXBhcmF0b3IpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMCwgd2lkdGggPSB0aGlzLndpZHRoOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKHRoaXMuZ2V0KHgsIHkpID8gc2V0U3RyaW5nIDogdW5zZXRTdHJpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGxpbmVTZXBhcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgY2xvbmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpdE1hdHJpeCh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5yb3dTaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uXG4gICAgICovXG4gICAgY2xhc3MgTm90Rm91bmRFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgICAgICBzdGF0aWMgZ2V0Tm90Rm91bmRJbnN0YW5jZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJztcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlXG4gICAgICogZm9yIGxvdy1lbmQgbW9iaWxlIGRldmljZXMgd2hpY2ggZG9uJ3QgaGF2ZSBlbm91Z2ggQ1BVIG9yIG1lbW9yeSB0byB1c2UgYSBsb2NhbCB0aHJlc2hvbGRpbmdcbiAgICAgKiBhbGdvcml0aG0uIEhvd2V2ZXIsIGJlY2F1c2UgaXQgcGlja3MgYSBnbG9iYWwgYmxhY2sgcG9pbnQsIGl0IGNhbm5vdCBoYW5kbGUgZGlmZmljdWx0IHNoYWRvd3NcbiAgICAgKiBhbmQgZ3JhZGllbnRzLlxuICAgICAqXG4gICAgICogRmFzdGVyIG1vYmlsZSBkZXZpY2VzIGFuZCBhbGwgZGVza3RvcCBhcHBsaWNhdGlvbnMgc2hvdWxkIHByb2JhYmx5IHVzZSBIeWJyaWRCaW5hcml6ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgZXh0ZW5kcyBCaW5hcml6ZXIge1xuICAgICAgICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICAgICAgICAgIHN1cGVyKHNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLmx1bWluYW5jZXMgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFk7XG4gICAgICAgICAgICB0aGlzLmJ1Y2tldHMgPSBuZXcgSW50MzJBcnJheShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGxpZXMgc2ltcGxlIHNoYXJwZW5pbmcgdG8gdGhlIHJvdyBkYXRhIHRvIGltcHJvdmUgcGVyZm9ybWFuY2Ugb2YgdGhlIDFEIFJlYWRlcnMuXG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZ2V0QmxhY2tSb3coeSAvKmludCovLCByb3cpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0THVtaW5hbmNlU291cmNlKCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHNvdXJjZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICByb3cgPSBuZXcgQml0QXJyYXkod2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm93LmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldFJvdyh5LCB0aGlzLmx1bWluYW5jZXMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxCdWNrZXRzWyhsb2NhbEx1bWluYW5jZXNbeF0gJiAweGZmKSA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmxhY2tQb2ludCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5lc3RpbWF0ZUJsYWNrUG9pbnQobG9jYWxCdWNrZXRzKTtcbiAgICAgICAgICAgIGlmICh3aWR0aCA8IDMpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIHZlcnkgc21hbGwgaW1hZ2VzXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmO1xuICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBsb2NhbEx1bWluYW5jZXNbMV0gJiAweGZmO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAxOyB4IDwgd2lkdGggLSAxOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBsb2NhbEx1bWluYW5jZXNbeCArIDFdICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCgoY2VudGVyICogNCkgLSBsZWZ0IC0gcmlnaHQpIC8gMiA8IGJsYWNrUG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyID0gcmlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgfVxuICAgICAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuXG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZ2V0QmxhY2tNYXRyaXgoKSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpO1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBCaXRNYXRyaXgod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAvLyBRdWlja2x5IGNhbGN1bGF0ZXMgdGhlIGhpc3RvZ3JhbSBieSBzYW1wbGluZyBmb3VyIHJvd3MgZnJvbSB0aGUgaW1hZ2UuIFRoaXMgcHJvdmVkIHRvIGJlXG4gICAgICAgICAgICAvLyBtb3JlIHJvYnVzdCBvbiB0aGUgYmxhY2tib3ggdGVzdHMgdGhhbiBzYW1wbGluZyBhIGRpYWdvbmFsIGFzIHdlIHVzZWQgdG8gZG8uXG4gICAgICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDE7IHkgPCA1OyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKChoZWlnaHQgKiB5KSAvIDUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3cocm93LCB0aGlzLmx1bWluYW5jZXMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gTWF0aC5mbG9vcigod2lkdGggKiA0KSAvIDUpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxCdWNrZXRzW3BpeGVsID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmxhY2tQb2ludCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5lc3RpbWF0ZUJsYWNrUG9pbnQobG9jYWxCdWNrZXRzKTtcbiAgICAgICAgICAgIC8vIFdlIGRlbGF5IHJlYWRpbmcgdGhlIGVudGlyZSBpbWFnZSBsdW1pbmFuY2UgdW50aWwgdGhlIGJsYWNrIHBvaW50IGVzdGltYXRpb24gc3VjY2VlZHMuXG4gICAgICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2ZcbiAgICAgICAgICAgIC8vIFwiZmFpbCBxdWlja2x5XCIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHkgKiB3aWR0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGl4ZWwgPSBsb2NhbEx1bWluYW5jZXNbb2Zmc2V0ICsgeF0gJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGNyZWF0ZUJpbmFyaXplcihzb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdEFycmF5cyhsdW1pbmFuY2VTaXplIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubHVtaW5hbmNlcyA9IG5ldyBVaW50OENsYW1wZWRBcnJheShsdW1pbmFuY2VTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgYnVja2V0c1t4XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGVzdGltYXRlQmxhY2tQb2ludChidWNrZXRzKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSB0YWxsZXN0IHBlYWsgaW4gdGhlIGhpc3RvZ3JhbS5cbiAgICAgICAgICAgIGNvbnN0IG51bUJ1Y2tldHMgPSBidWNrZXRzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBtYXhCdWNrZXRDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgZmlyc3RQZWFrID0gMDtcbiAgICAgICAgICAgIGxldCBmaXJzdFBlYWtTaXplID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbnVtQnVja2V0czsgeCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0UGVhayA9IHg7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0UGVha1NpemUgPSBidWNrZXRzW3hdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYnVja2V0c1t4XSA+IG1heEJ1Y2tldENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG1heEJ1Y2tldENvdW50ID0gYnVja2V0c1t4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBzZWNvbmQtdGFsbGVzdCBwZWFrIHdoaWNoIGlzIHNvbWV3aGF0IGZhciBmcm9tIHRoZSB0YWxsZXN0IHBlYWsuXG4gICAgICAgICAgICBsZXQgc2Vjb25kUGVhayA9IDA7XG4gICAgICAgICAgICBsZXQgc2Vjb25kUGVha1Njb3JlID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbnVtQnVja2V0czsgeCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VUb0JpZ2dlc3QgPSB4IC0gZmlyc3RQZWFrO1xuICAgICAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0O1xuICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IHNlY29uZFBlYWtTY29yZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRQZWFrID0geDtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay5cbiAgICAgICAgICAgIGlmIChmaXJzdFBlYWsgPiBzZWNvbmRQZWFrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGZpcnN0UGVhaztcbiAgICAgICAgICAgICAgICBmaXJzdFBlYWsgPSBzZWNvbmRQZWFrO1xuICAgICAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgdG9vIGxpdHRsZSBjb250cmFzdCBpbiB0aGUgaW1hZ2UgdG8gcGljayBhIG1lYW5pbmdmdWwgYmxhY2sgcG9pbnQsIHRocm93IHJhdGhlclxuICAgICAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICAgICAgICBpZiAoc2Vjb25kUGVhayAtIGZpcnN0UGVhayA8PSBudW1CdWNrZXRzIC8gMTYpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmQgYSB2YWxsZXkgYmV0d2VlbiB0aGVtIHRoYXQgaXMgbG93IGFuZCBjbG9zZXIgdG8gdGhlIHdoaXRlIHBlYWsuXG4gICAgICAgICAgICBsZXQgYmVzdFZhbGxleSA9IHNlY29uZFBlYWsgLSAxO1xuICAgICAgICAgICAgbGV0IGJlc3RWYWxsZXlTY29yZSA9IC0xO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHNlY29uZFBlYWsgLSAxOyB4ID4gZmlyc3RQZWFrOyB4LS0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmcm9tRmlyc3QgPSB4IC0gZmlyc3RQZWFrO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gZnJvbUZpcnN0ICogZnJvbUZpcnN0ICogKHNlY29uZFBlYWsgLSB4KSAqIChtYXhCdWNrZXRDb3VudCAtIGJ1Y2tldHNbeF0pO1xuICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IGJlc3RWYWxsZXlTY29yZSkge1xuICAgICAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDtcbiAgICAgICAgICAgICAgICAgICAgYmVzdFZhbGxleVNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJlc3RWYWxsZXkgPDwgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9TSElGVDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JJVFMgPSA1O1xuICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlQgPSA4IC0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTO1xuICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUyA9IDEgPDwgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTO1xuICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5FTVBUWSA9IFVpbnQ4Q2xhbXBlZEFycmF5LmZyb20oWzBdKTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogVGhpcyBjbGFzcyBpbXBsZW1lbnRzIGEgbG9jYWwgdGhyZXNob2xkaW5nIGFsZ29yaXRobSwgd2hpY2ggd2hpbGUgc2xvd2VyIHRoYW4gdGhlXG4gICAgICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvclxuICAgICAqIGhpZ2ggZnJlcXVlbmN5IGltYWdlcyBvZiBiYXJjb2RlcyB3aXRoIGJsYWNrIGRhdGEgb24gd2hpdGUgYmFja2dyb3VuZHMuIEZvciB0aGlzIGFwcGxpY2F0aW9uLFxuICAgICAqIGl0IGRvZXMgYSBtdWNoIGJldHRlciBqb2IgdGhhbiBhIGdsb2JhbCBibGFja3BvaW50IHdpdGggc2V2ZXJlIHNoYWRvd3MgYW5kIGdyYWRpZW50cy5cbiAgICAgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3RcbiAgICAgKiBhIGdvb2QgZ2VuZXJhbCBwdXJwb3NlIGJpbmFyaXplciBmb3IgdXNlcyBvdXRzaWRlIFpYaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycyxcbiAgICAgKiBhbmQgdGhlIG5ld2VyIGxvY2FsIGFwcHJvYWNoIGZvciAyRCByZWFkZXJzLiAxRCBkZWNvZGluZyB1c2luZyBhIHBlci1yb3cgaGlzdG9ncmFtIGlzIGFscmVhZHlcbiAgICAgKiBpbmhlcmVudGx5IGxvY2FsLCBhbmQgb25seSBmYWlscyBmb3IgaG9yaXpvbnRhbCBncmFkaWVudHMuIFdlIGNhbiByZXZpc2l0IHRoYXQgcHJvYmxlbSBsYXRlcixcbiAgICAgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELlxuICAgICAqXG4gICAgICogVGhpcyBCaW5hcml6ZXIgaXMgdGhlIGRlZmF1bHQgZm9yIHRoZSB1bml0IHRlc3RzIGFuZCB0aGUgcmVjb21tZW5kZWQgY2xhc3MgZm9yIGxpYnJhcnkgdXNlcnMuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKVxuICAgICAqL1xuICAgIGNsYXNzIEh5YnJpZEJpbmFyaXplciBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgICAgICAgICAgc3VwZXIoc291cmNlKTtcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgZmluYWwgQml0TWF0cml4IG9uY2UgZm9yIGFsbCByZXF1ZXN0cy4gVGhpcyBjb3VsZCBiZSBjYWxsZWQgb25jZSBmcm9tIHRoZVxuICAgICAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nXG4gICAgICAgICAqIHByb2ZpbGluZyBlYXNpZXIsIGFuZCBub3QgZG9pbmcgaGVhdnkgbGlmdGluZyB3aGVuIGNhbGxlcnMgZG9uJ3QgZXhwZWN0IGl0LlxuICAgICAgICAgKi9cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBnZXRCbGFja01hdHJpeCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0THVtaW5hbmNlU291cmNlKCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHNvdXJjZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gc291cmNlLmdldEhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgICAgICBsZXQgc3ViV2lkdGggPSB3aWR0aCA+PiBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRV9QT1dFUjtcbiAgICAgICAgICAgICAgICBpZiAoKHdpZHRoICYgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfTUFTSykgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViV2lkdGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHN1YkhlaWdodCA9IGhlaWdodCA+PiBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRV9QT1dFUjtcbiAgICAgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YkhlaWdodCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBibGFja1BvaW50cyA9IEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVCbGFja1BvaW50cyhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdNYXRyaXggPSBuZXcgQml0TWF0cml4KHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeCA9IG5ld01hdHJpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBpbWFnZSBpcyB0b28gc21hbGwsIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIGhpc3RvZ3JhbSBhcHByb2FjaC5cbiAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeCA9IHN1cGVyLmdldEJsYWNrTWF0cml4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBjcmVhdGVCaW5hcml6ZXIoc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3IgZWFjaCBibG9jayBpbiB0aGUgaW1hZ2UsIGNhbGN1bGF0ZSB0aGUgYXZlcmFnZSBibGFjayBwb2ludCB1c2luZyBhIDV4NSBncmlkXG4gICAgICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkXG4gICAgICAgICAqIG9uIHRoZSBsYXN0IHBpeGVscyBpbiB0aGUgcm93L2NvbHVtbiB3aGljaCBhcmUgYWxzbyB1c2VkIGluIHRoZSBwcmV2aW91cyBibG9jaykuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7XG4gICAgICAgICAgICBjb25zdCBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7XG4gICAgICAgICAgICBjb25zdCBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgeW9mZnNldCA9IHkgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7XG4gICAgICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHlvZmZzZXQgPSBtYXhZT2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0b3AgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgc3ViV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeG9mZnNldCA9IG1heFhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IEh5YnJpZEJpbmFyaXplci5jYXAoeCwgMiwgc3ViV2lkdGggLSAzKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHogPSAtMjsgeiA8PSAyOyB6KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsYWNrUm93ID0gYmxhY2tQb2ludHNbdG9wICsgel07XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZlcmFnZSA9IHN1bSAvIDI1O1xuICAgICAgICAgICAgICAgICAgICBIeWJyaWRCaW5hcml6ZXIudGhyZXNob2xkQmxvY2sobHVtaW5hbmNlcywgeG9mZnNldCwgeW9mZnNldCwgYXZlcmFnZSwgd2lkdGgsIG1hdHJpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjYXAodmFsdWUgLyppbnQqLywgbWluIC8qaW50Ki8sIG1heCAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBsaWVzIGEgc2luZ2xlIHRocmVzaG9sZCB0byBhIGJsb2NrIG9mIHBpeGVscy5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyB0aHJlc2hvbGRCbG9jayhsdW1pbmFuY2VzLCB4b2Zmc2V0IC8qaW50Ki8sIHlvZmZzZXQgLyppbnQqLywgdGhyZXNob2xkIC8qaW50Ki8sIHN0cmlkZSAvKmludCovLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwLCBvZmZzZXQgPSB5b2Zmc2V0ICogc3RyaWRlICsgeG9mZnNldDsgeSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5KyssIG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyaXNvbiBuZWVkcyB0byBiZSA8PSBzbyB0aGF0IGJsYWNrID09IDAgcGl4ZWxzIGFyZSBibGFjayBldmVuIGlmIHRoZSB0aHJlc2hvbGQgaXMgMC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChsdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhGRikgPD0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZXMgYSBzaW5nbGUgYmxhY2sgcG9pbnQgZm9yIGVhY2ggYmxvY2sgb2YgcGl4ZWxzIGFuZCBzYXZlcyBpdCBhd2F5LlxuICAgICAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobTpcbiAgICAgICAgICogIGh0dHA6Ly9ncm91cHMuZ29vZ2xlLmNvbS9ncm91cC96eGluZy9icm93c2VfdGhyZWFkL3RocmVhZC9kMDZlZmEyYzM1YTdkZGMwXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7XG4gICAgICAgICAgICBjb25zdCBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp3aGl0ZXNwYWNlXG4gICAgICAgICAgICBjb25zdCBibGFja1BvaW50cyA9IG5ldyBBcnJheShzdWJIZWlnaHQpOyAvLyBzdWJXaWR0aFxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpO1xuICAgICAgICAgICAgICAgIGxldCB5b2Zmc2V0ID0geSA8PCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRV9QT1dFUjtcbiAgICAgICAgICAgICAgICBpZiAoeW9mZnNldCA+IG1heFlPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgc3ViV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeG9mZnNldCA9IG1heFhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtaW4gPSAweEZGO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeXkgPSAwLCBvZmZzZXQgPSB5b2Zmc2V0ICogd2lkdGggKyB4b2Zmc2V0OyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHh4ID0gMDsgeHggPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeHgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsID0gbHVtaW5hbmNlc1tvZmZzZXQgKyB4eF0gJiAweEZGO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBsb29raW5nIGZvciBnb29kIGNvbnRyYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXggLSBtaW4gPiBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5pc2ggdGhlIHJlc3Qgb2YgdGhlIHJvd3MgcXVpY2tseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeHggPSAwOyB4eCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4eCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gbHVtaW5hbmNlc1tvZmZzZXQgKyB4eF0gJiAweEZGO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBkZWZhdWx0IGVzdGltYXRlIGlzIHRoZSBhdmVyYWdlIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGJsb2NrLlxuICAgICAgICAgICAgICAgICAgICBsZXQgYXZlcmFnZSA9IHN1bSA+PiAoSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVIgKiAyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHZhcmlhdGlvbiB3aXRoaW4gdGhlIGJsb2NrIGlzIGxvdywgYXNzdW1lIHRoaXMgaXMgYSBibG9jayB3aXRoIG9ubHkgbGlnaHQgb3Igb25seVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGFyayBwaXhlbHMuIEluIHRoYXQgY2FzZSB3ZSBkbyBub3Qgd2FudCB0byB1c2UgdGhlIGF2ZXJhZ2UsIGFzIGl0IHdvdWxkIGRpdmlkZSB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBkZWZhdWx0IGFzc3VtcHRpb24gaXMgdGhhdCB0aGUgYmxvY2sgaXMgbGlnaHQvYmFja2dyb3VuZC4gU2luY2Ugbm8gZXN0aW1hdGUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF2ZXJhZ2UgPSBtaW4gLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgPiAwICYmIHggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgXCJ3aGl0ZSBiYWNrZ3JvdW5kXCIgYXNzdW1wdGlvbiBmb3IgYmxvY2tzIHRoYXQgaGF2ZSBuZWlnaGJvcnMgYnkgY29tcGFyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGZhY3QgdGhhdCBkYXJrIGJhcmNvZGUgc3ltYm9sb2d5IGlzIGFsd2F5cyBzdXJyb3VuZGVkIGJ5IHNvbWUgYW1vdW50IG9mIGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFja2dyb3VuZCBmb3Igd2hpY2ggcmVhc29uYWJsZSBibGFjayBwb2ludCBlc3RpbWF0ZXMgd2VyZSBtYWRlLiBUaGUgYnAgZXN0aW1hdGVkIGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSAobWluIDwgYnApIGlzIGFyYml0cmFyeSBidXQgd29ya3MgYmV0dGVyIHRoYW4gb3RoZXIgaGV1cmlzdGljcyB0aGF0IHdlcmUgdHJpZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZlcmFnZU5laWdoYm9yQmxhY2tQb2ludCA9IChibGFja1BvaW50c1t5IC0gMV1beF0gKyAoMiAqIGJsYWNrUG9pbnRzW3ldW3ggLSAxXSkgKyBibGFja1BvaW50c1t5IC0gMV1beCAtIDFdKSAvIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbiA8IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldW3hdID0gYXZlcmFnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmxhY2tQb2ludHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGhpcyBjbGFzcyB1c2VzIDV4NSBibG9ja3MgdG8gY29tcHV0ZSBsb2NhbCBsdW1pbmFuY2UsIHdoZXJlIGVhY2ggYmxvY2sgaXMgOHg4IHBpeGVscy5cbiAgICAvLyBTbyB0aGlzIGlzIHRoZSBzbWFsbGVzdCBkaW1lbnNpb24gaW4gZWFjaCBheGlzIHdlIGNhbiBhY2NlcHQuXG4gICAgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVIgPSAzO1xuICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFID0gMSA8PCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRV9QT1dFUjsgLy8gLi4uMDEwMC4uLjAwXG4gICAgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfTUFTSyA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFIC0gMTsgLy8gLi4uMDAxMS4uLjExXG4gICAgSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OID0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkUgKiA1O1xuICAgIEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSA9IDI0O1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqL1xuICAgIC8qKlxuICAgICAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgY2xhc3MgaGllcmFyY2h5IGlzIHRvIGFic3RyYWN0IGRpZmZlcmVudCBiaXRtYXAgaW1wbGVtZW50YXRpb25zIGFjcm9zc1xuICAgICAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlXG4gICAgICogb25seSBwcm92aWRlcyBpbW11dGFibGUgbWV0aG9kczsgdGhlcmVmb3JlIGNyb3AgYW5kIHJvdGF0aW9uIGNyZWF0ZSBjb3BpZXMuIFRoaXMgaXMgdG8gZW5zdXJlXG4gICAgICogdGhhdCBvbmUgUmVhZGVyIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwgbHVtaW5hbmNlIHNvdXJjZSBhbmQgbGVhdmUgaXQgaW4gYW4gdW5rbm93biBzdGF0ZVxuICAgICAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICovXG4gICAgY2xhc3MgTHVtaW5hbmNlU291cmNlIHtcbiAgICAgICAgY29uc3RydWN0b3Iod2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuXG4gICAgICAgICAqL1xuICAgICAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgaXNDcm9wU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZVxuICAgICAgICAgKiBvcmlnaW5hbCBkYXRhIHJhdGhlciB0aGFuIGEgY29weS4gT25seSBjYWxsYWJsZSBpZiBpc0Nyb3BTdXBwb3J0ZWQoKSBpcyB0cnVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpXG4gICAgICAgICAqIEBwYXJhbSB0b3AgVGhlIHRvcCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldEhlaWdodCgpKVxuICAgICAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC5cbiAgICAgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC5cbiAgICAgICAgICogQHJldHVybiBBIGNyb3BwZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGNyb3AobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbignVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgY3JvcHBpbmcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgaXNSb3RhdGVTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS5cbiAgICAgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICByb3RhdGVDb3VudGVyQ2xvY2t3aXNlKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuXG4gICAgICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgcm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA0NSBkZWdyZWVzLicpO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy53aWR0aCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVJvdyA9IHRoaXMuZ2V0Um93KHksIHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbHVtaW5hbmNlID0gc291cmNlUm93W3hdICYgMHhGRjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsdW1pbmFuY2UgPCAweDQwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gJyMnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGx1bWluYW5jZSA8IDB4ODApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAnKyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHhDMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICcuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAnICc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXFxuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovXG4gICAgLyoqXG4gICAgICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzXG4gICAgICogd2hpdGUgYW5kIHZpY2UgdmVyc2EsIGFuZCBlYWNoIHZhbHVlIGJlY29tZXMgKDI1NS12YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIEludmVydGVkTHVtaW5hbmNlU291cmNlIGV4dGVuZHMgTHVtaW5hbmNlU291cmNlIHtcbiAgICAgICAgY29uc3RydWN0b3IoZGVsZWdhdGUpIHtcbiAgICAgICAgICAgIHN1cGVyKGRlbGVnYXRlLmdldFdpZHRoKCksIGRlbGVnYXRlLmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGdldFJvdyh5IC8qaW50Ki8sIHJvdykge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlUm93ID0gdGhpcy5kZWxlZ2F0ZS5nZXRSb3coeSwgcm93KTtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc291cmNlUm93W2ldID0gLyooYnl0ZSkqLyAoMjU1IC0gKHNvdXJjZVJvd1tpXSAmIDB4RkYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VSb3c7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBnZXRNYXRyaXgoKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRlbGVnYXRlLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5nZXRXaWR0aCgpICogdGhpcy5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGludmVydGVkTWF0cml4ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGludmVydGVkTWF0cml4O1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgaXNDcm9wU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuaXNDcm9wU3VwcG9ydGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBjcm9wKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGlzUm90YXRlU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuaXNSb3RhdGVTdXBwb3J0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBvcmlnaW5hbCBkZWxlZ2F0ZSB7QGxpbmsgTHVtaW5hbmNlU291cmNlfSBzaW5jZSBpbnZlcnQgdW5kb2VzIGl0c2VsZlxuICAgICAgICAgKi9cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBpbnZlcnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHJvdGF0ZUNvdW50ZXJDbG9ja3dpc2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UodGhpcy5kZWxlZ2F0ZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlNDUoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBNb3ZpbmcgdG8gQHp4aW5nL2Jyb3dzZXJcbiAgICAgKi9cbiAgICBjbGFzcyBIVE1MQ2FudmFzRWxlbWVudEx1bWluYW5jZVNvdXJjZSBleHRlbmRzIEx1bWluYW5jZVNvdXJjZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgICAgICAgICAgc3VwZXIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICAgICAgdGhpcy50ZW1wQ2FudmFzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IEhUTUxDYW52YXNFbGVtZW50THVtaW5hbmNlU291cmNlLm1ha2VCdWZmZXJGcm9tQ2FudmFzSW1hZ2VEYXRhKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIG1ha2VCdWZmZXJGcm9tQ2FudmFzSW1hZ2VEYXRhKGNhbnZhcykge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICByZXR1cm4gSFRNTENhbnZhc0VsZW1lbnRMdW1pbmFuY2VTb3VyY2UudG9HcmF5c2NhbGVCdWZmZXIoaW1hZ2VEYXRhLmRhdGEsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICBjb25zdCBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwLCBsZW5ndGggPSBpbWFnZUJ1ZmZlci5sZW5ndGg7IGkgPCBsZW5ndGg7IGkgKz0gNCwgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdyYXk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxwaGEgPSBpbWFnZUJ1ZmZlcltpICsgM107XG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50XG4gICAgICAgICAgICAgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSBcIndoaXRlXCIgYXJlYSBpbiBhXG4gICAgICAgICAgICAgICAgLy8gYmFyY29kZSBpbWFnZS4gRm9yY2UgYW55IHN1Y2ggcGl4ZWwgdG8gYmUgd2hpdGU6XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyYXkgPSAweEZGO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsRyA9IGltYWdlQnVmZmVyW2kgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGl4ZWxCID0gaW1hZ2VCdWZmZXJbaSArIDJdO1xuICAgICAgICAgICAgICAgICAgICAvLyAuMjk5UiArIDAuNTg3RyArIDAuMTE0QiAoWVVWL1lJUSBmb3IgUEFMIGFuZCBOVFNDKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gKDMwNipSKSA+PiAxMCBpcyBhcHByb3hpbWF0ZWx5IGVxdWFsIHRvIFIqMC4yOTksIGFuZCBzbyBvbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLlxuICAgICAgICAgICAgICAgICAgICBncmF5ID0gKDMwNiAqIHBpeGVsUiArXG4gICAgICAgICAgICAgICAgICAgICAgICA2MDEgKiBwaXhlbEcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgMTE3ICogcGl4ZWxCICtcbiAgICAgICAgICAgICAgICAgICAgICAgIDB4MjAwKSA+PiAxMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ3JheXNjYWxlQnVmZmVyW2pdID0gZ3JheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Um93KHkgLyppbnQqLywgcm93KSB7XG4gICAgICAgICAgICBpZiAoeSA8IDAgfHwgeSA+PSB0aGlzLmdldEhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHkgKiB3aWR0aDtcbiAgICAgICAgICAgIGlmIChyb3cgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByb3cgPSB0aGlzLmJ1ZmZlci5zbGljZShzdGFydCwgc3RhcnQgKyB3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocm93Lmxlbmd0aCA8IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRoZSB1bmRlcmx5aW5nIHJhc3RlciBvZiBpbWFnZSBjb25zaXN0cyBvZiBieXRlcyB3aXRoIHRoZSBsdW1pbmFuY2UgdmFsdWVzXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY2FuIGF2b2lkIHNldC9zbGljZT9cbiAgICAgICAgICAgICAgICByb3cuc2V0KHRoaXMuYnVmZmVyLnNsaWNlKHN0YXJ0LCBzdGFydCArIHdpZHRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9XG4gICAgICAgIGdldE1hdHJpeCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICBpc0Nyb3BTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjcm9wKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICBzdXBlci5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBpcyBhbHdheXMgdHJ1ZSwgc2luY2UgdGhlIGltYWdlIGlzIGEgZ3JheS1zY2FsZSBpbWFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB0cnVlXG4gICAgICAgICAqL1xuICAgICAgICBpc1JvdGF0ZVN1cHBvcnRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJvdGF0ZUNvdW50ZXJDbG9ja3dpc2UoKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSgtOTApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGUoLTQ1KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGdldFRlbXBDYW52YXNFbGVtZW50KCkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHRoaXMudGVtcENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQ2FudmFzRWxlbWVudCA9IHRoaXMuY2FudmFzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgdGVtcENhbnZhc0VsZW1lbnQud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgICAgICB0ZW1wQ2FudmFzRWxlbWVudC5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wQ2FudmFzRWxlbWVudCA9IHRlbXBDYW52YXNFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcENhbnZhc0VsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcm90YXRlKGFuZ2xlKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wQ2FudmFzRWxlbWVudCA9IHRoaXMuZ2V0VGVtcENhbnZhc0VsZW1lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBDb250ZXh0ID0gdGVtcENhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlUmFkaWFucyA9IGFuZ2xlICogSFRNTENhbnZhc0VsZW1lbnRMdW1pbmFuY2VTb3VyY2UuREVHUkVFX1RPX1JBRElBTlM7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIHNldCBuZXcgZGltZW5zaW9ucyBmb3IgdGVtcCBjYW52YXNcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBuZXdXaWR0aCA9IE1hdGguY2VpbChNYXRoLmFicyhNYXRoLmNvcyhhbmdsZVJhZGlhbnMpKSAqIHdpZHRoICsgTWF0aC5hYnMoTWF0aC5zaW4oYW5nbGVSYWRpYW5zKSkgKiBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC5jZWlsKE1hdGguYWJzKE1hdGguc2luKGFuZ2xlUmFkaWFucykpICogd2lkdGggKyBNYXRoLmFicyhNYXRoLmNvcyhhbmdsZVJhZGlhbnMpKSAqIGhlaWdodCk7XG4gICAgICAgICAgICB0ZW1wQ2FudmFzRWxlbWVudC53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgdGVtcENhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgICAgICAgLy8gRHJhdyBhdCBjZW50ZXIgb2YgdGVtcCBjYW52YXMgdG8gcHJldmVudCBjbGlwcGluZyBvZiBpbWFnZSBkYXRhXG4gICAgICAgICAgICB0ZW1wQ29udGV4dC50cmFuc2xhdGUobmV3V2lkdGggLyAyLCBuZXdIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIHRlbXBDb250ZXh0LnJvdGF0ZShhbmdsZVJhZGlhbnMpO1xuICAgICAgICAgICAgdGVtcENvbnRleHQuZHJhd0ltYWdlKHRoaXMuY2FudmFzLCB3aWR0aCAvIC0yLCBoZWlnaHQgLyAtMik7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IEhUTUxDYW52YXNFbGVtZW50THVtaW5hbmNlU291cmNlLm1ha2VCdWZmZXJGcm9tQ2FudmFzSW1hZ2VEYXRhKHRlbXBDYW52YXNFbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGludmVydCgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSFRNTENhbnZhc0VsZW1lbnRMdW1pbmFuY2VTb3VyY2UuREVHUkVFX1RPX1JBRElBTlMgPSBNYXRoLlBJIC8gMTgwO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgTW92aW5nIHRvIEB6eGluZy9icm93c2VyXG4gICAgICpcbiAgICAgKiBWaWRlbyBpbnB1dCBkZXZpY2UgbWV0YWRhdGEgY29udGFpbmluZyB0aGUgaWQgYW5kIGxhYmVsIG9mIHRoZSBkZXZpY2UgaWYgYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGNsYXNzIFZpZGVvSW5wdXREZXZpY2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBWaWRlb0lucHV0RGV2aWNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlSWQgdGhlIHZpZGVvIGlucHV0IGRldmljZSBpZFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFiZWwgdGhlIGxhYmVsIG9mIHRoZSBkZXZpY2UgaWYgYXZhaWxhYmxlXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihkZXZpY2VJZCwgbGFiZWwsIGdyb3VwSWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlSWQgPSBkZXZpY2VJZDtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgICAgICAgICAgdGhpcy5raW5kID0gJ3ZpZGVvaW5wdXQnO1xuICAgICAgICAgICAgdGhpcy5ncm91cElkID0gZ3JvdXBJZCB8fCB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgICAgIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAga2luZDogdGhpcy5raW5kLFxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICBkZXZpY2VJZDogdGhpcy5kZXZpY2VJZCxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX19hd2FpdGVyID0gKChnbG9iYWxUaGlzIHx8IGdsb2JhbCB8fCBzZWxmIHx8IHdpbmRvdyB8fCB1bmRlZmluZWQpICYmIChnbG9iYWxUaGlzIHx8IGdsb2JhbCB8fCBzZWxmIHx8IHdpbmRvdyB8fCB1bmRlZmluZWQpLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgTW92aW5nIHRvIEB6eGluZy9icm93c2VyXG4gICAgICpcbiAgICAgKiBCYXNlIGNsYXNzIGZvciBicm93c2VyIGNvZGUgcmVhZGVyLlxuICAgICAqL1xuICAgIGNsYXNzIEJyb3dzZXJDb2RlUmVhZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQnJvd3NlckNvZGVSZWFkZXIuXG4gICAgICAgICAqIEBwYXJhbSB7UmVhZGVyfSByZWFkZXIgVGhlIHJlYWRlciBpbnN0YW5jZSB0byBkZWNvZGUgdGhlIGJhcmNvZGVcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lQmV0d2VlblNjYW5zTWlsbGlzPTUwMF0gdGhlIHRpbWUgZGVsYXkgYmV0d2VlbiBzdWJzZXF1ZW50IHN1Y2Nlc3NmdWwgZGVjb2RlIHRyaWVzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBCcm93c2VyQ29kZVJlYWRlclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IocmVhZGVyLCB0aW1lQmV0d2VlblNjYW5zTWlsbGlzID0gNTAwLCBfaGludHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyID0gcmVhZGVyO1xuICAgICAgICAgICAgdGhpcy50aW1lQmV0d2VlblNjYW5zTWlsbGlzID0gdGltZUJldHdlZW5TY2Fuc01pbGxpcztcbiAgICAgICAgICAgIHRoaXMuX2hpbnRzID0gX2hpbnRzO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGlzIHdpbGwgYnJlYWsgdGhlIGxvb3AuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuX3N0b3BDb250aW51b3VzRGVjb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgd2lsbCBicmVhayB0aGUgbG9vcC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5fc3RvcEFzeW5jRGVjb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlbGF5IHRpbWUgYmV0d2VlbiBkZWNvZGUgYXR0ZW1wdHMgbWFkZSBieSB0aGUgc2Nhbm5lci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5fdGltZUJldHdlZW5EZWNvZGluZ0F0dGVtcHRzID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgbmF2aWdhdG9yIGlzIHByZXNlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgaGFzTmF2aWdhdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBtZWRpYURldmljZXMgdW5kZXIgbmF2aWdhdG9yIGlzIHN1cHBvcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIGdldCBpc01lZGlhRGV2aWNlc1N1cG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzTmF2aWdhdG9yICYmICEhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW51bWVyYXRlRGV2aWNlcyB1bmRlciBuYXZpZ2F0b3IgaXMgc3VwcG9ydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IGNhbkVudW1lcmF0ZURldmljZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy5pc01lZGlhRGV2aWNlc1N1cG9ydGVkICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFRpbWUgYmV0d2VlbiB0d28gZGVjb2RpbmcgdHJpZXMgaW4gbWlsbGkgc2Vjb25kcy4gKi9cbiAgICAgICAgZ2V0IHRpbWVCZXR3ZWVuRGVjb2RpbmdBdHRlbXB0cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aW1lQmV0d2VlbkRlY29kaW5nQXR0ZW1wdHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZSB0aGUgdGltZSBzcGFuIHRoZSBkZWNvZGVyIHdhaXRzIGJldHdlZW4gdHdvIGRlY29kaW5nIHRyaWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzIFRpbWUgYmV0d2VlbiB0d28gZGVjb2RpbmcgdHJpZXMgaW4gbWlsbGkgc2Vjb25kcy5cbiAgICAgICAgICovXG4gICAgICAgIHNldCB0aW1lQmV0d2VlbkRlY29kaW5nQXR0ZW1wdHMobWlsbGlzKSB7XG4gICAgICAgICAgICB0aGlzLl90aW1lQmV0d2VlbkRlY29kaW5nQXR0ZW1wdHMgPSBtaWxsaXMgPCAwID8gMCA6IG1pbGxpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgaGludHMuXG4gICAgICAgICAqL1xuICAgICAgICBzZXQgaGludHMoaGludHMpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpbnRzID0gaGludHMgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgaGludHMuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgaGludHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGludHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpc3RzIGFsbCB0aGUgYXZhaWxhYmxlIHZpZGVvIGlucHV0IGRldmljZXMuXG4gICAgICAgICAqL1xuICAgICAgICBsaXN0VmlkZW9JbnB1dERldmljZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNOYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGVudW1lcmF0ZSBkZXZpY2VzLCBuYXZpZ2F0b3IgaXMgbm90IHByZXNlbnQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5FbnVtZXJhdGVEZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBlbnVtZXJhdGUgZGV2aWNlcywgbWV0aG9kIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRldmljZXMgPSB5aWVsZCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0RldmljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBkZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpbmQgPSBkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvJyA/ICd2aWRlb2lucHV0JyA6IGRldmljZS5raW5kO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2luZCAhPT0gJ3ZpZGVvaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2VJZCA9IGRldmljZS5kZXZpY2VJZCB8fCBkZXZpY2UuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZGV2aWNlLmxhYmVsIHx8IGBWaWRlbyBkZXZpY2UgJHt2aWRlb0RldmljZXMubGVuZ3RoICsgMX1gO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cElkID0gZGV2aWNlLmdyb3VwSWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvRGV2aWNlID0geyBkZXZpY2VJZCwgbGFiZWwsIGtpbmQsIGdyb3VwSWQgfTtcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9EZXZpY2VzLnB1c2godmlkZW9EZXZpY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmlkZW9EZXZpY2VzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9idGFpbiB0aGUgbGlzdCBvZiBhdmFpbGFibGUgZGV2aWNlcyB3aXRoIHR5cGUgJ3ZpZGVvaW5wdXQnLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxWaWRlb0lucHV0RGV2aWNlW10+fSBhbiBhcnJheSBvZiBhdmFpbGFibGUgdmlkZW8gaW5wdXQgZGV2aWNlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGBsaXN0VmlkZW9JbnB1dERldmljZXNgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXRWaWRlb0lucHV0RGV2aWNlcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlcyA9IHlpZWxkIHRoaXMubGlzdFZpZGVvSW5wdXREZXZpY2VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRldmljZXMubWFwKGQgPT4gbmV3IFZpZGVvSW5wdXREZXZpY2UoZC5kZXZpY2VJZCwgZC5sYWJlbCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExldCdzIHlvdSBmaW5kIGEgZGV2aWNlIHVzaW5nIGl0J3MgSWQuXG4gICAgICAgICAqL1xuICAgICAgICBmaW5kRGV2aWNlQnlJZChkZXZpY2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2VzID0geWllbGQgdGhpcy5saXN0VmlkZW9JbnB1dERldmljZXMoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRldmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkZXZpY2VzLmZpbmQoeCA9PiB4LmRldmljZUlkID09PSBkZXZpY2VJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyB0aGUgYmFyY29kZSBmcm9tIHRoZSBkZXZpY2Ugc3BlY2lmaWVkIGJ5IGRldmljZUlkIHdoaWxlIHNob3dpbmcgdGhlIHZpZGVvIGluIHRoZSBzcGVjaWZpZWQgdmlkZW8gZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGRldmljZUlkIHRoZSBpZCBvZiBvbmUgb2YgdGhlIGRldmljZXMgb2J0YWluZWQgYWZ0ZXIgY2FsbGluZyBnZXRWaWRlb0lucHV0RGV2aWNlcy4gQ2FuIGJlIHVuZGVmaW5lZCwgaW4gdGhpcyBjYXNlIGl0IHdpbGwgZGVjb2RlIGZyb20gb25lIG9mIHRoZSBhdmFpbGFibGUgZGV2aWNlcywgcHJlZmZlcmluZyB0aGUgbWFpbiBjYW1lcmEgKGVudmlyb25tZW50IGZhY2luZykgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0gdmlkZW8gdGhlIHZpZGVvIGVsZW1lbnQgaW4gcGFnZSB3aGVyZSB0byBzaG93IHRoZSB2aWRlbyB3aGlsZSBkZWNvZGluZy4gQ2FuIGJlIGVpdGhlciBhbiBlbGVtZW50IGlkIG9yIGRpcmVjdGx5IGFuIEhUTUxWaWRlb0VsZW1lbnQuIENhbiBiZSB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2Ugbm8gdmlkZW8gd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQHJldHVybnMgVGhlIGRlY29kaW5nIHJlc3VsdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIEJyb3dzZXJDb2RlUmVhZGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXByZWNhdGVkIFVzZSBgZGVjb2RlT25jZUZyb21WaWRlb0RldmljZWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21JbnB1dFZpZGVvRGV2aWNlKGRldmljZUlkLCB2aWRlb1NvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVPbmNlRnJvbVZpZGVvRGV2aWNlKGRldmljZUlkLCB2aWRlb1NvdXJjZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSW4gb25lIGF0dGVtcHQsIHRyaWVzIHRvIGRlY29kZSB0aGUgYmFyY29kZSBmcm9tIHRoZSBkZXZpY2Ugc3BlY2lmaWVkIGJ5IGRldmljZUlkIHdoaWxlIHNob3dpbmcgdGhlIHZpZGVvIGluIHRoZSBzcGVjaWZpZWQgdmlkZW8gZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGRldmljZUlkIHRoZSBpZCBvZiBvbmUgb2YgdGhlIGRldmljZXMgb2J0YWluZWQgYWZ0ZXIgY2FsbGluZyBnZXRWaWRlb0lucHV0RGV2aWNlcy4gQ2FuIGJlIHVuZGVmaW5lZCwgaW4gdGhpcyBjYXNlIGl0IHdpbGwgZGVjb2RlIGZyb20gb25lIG9mIHRoZSBhdmFpbGFibGUgZGV2aWNlcywgcHJlZmZlcmluZyB0aGUgbWFpbiBjYW1lcmEgKGVudmlyb25tZW50IGZhY2luZykgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0gdmlkZW8gdGhlIHZpZGVvIGVsZW1lbnQgaW4gcGFnZSB3aGVyZSB0byBzaG93IHRoZSB2aWRlbyB3aGlsZSBkZWNvZGluZy4gQ2FuIGJlIGVpdGhlciBhbiBlbGVtZW50IGlkIG9yIGRpcmVjdGx5IGFuIEhUTUxWaWRlb0VsZW1lbnQuIENhbiBiZSB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2Ugbm8gdmlkZW8gd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQHJldHVybnMgVGhlIGRlY29kaW5nIHJlc3VsdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIEJyb3dzZXJDb2RlUmVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVPbmNlRnJvbVZpZGVvRGV2aWNlKGRldmljZUlkLCB2aWRlb1NvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvQ29uc3RyYWludHM7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzID0geyBmYWNpbmdNb2RlOiAnZW52aXJvbm1lbnQnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzID0geyBkZXZpY2VJZDogeyBleGFjdDogZGV2aWNlSWQgfSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IHsgdmlkZW86IHZpZGVvQ29uc3RyYWludHMgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVPbmNlRnJvbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzLCB2aWRlb1NvdXJjZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSW4gb25lIGF0dGVtcHQsIHRyaWVzIHRvIGRlY29kZSB0aGUgYmFyY29kZSBmcm9tIGEgc3RyZWFtIG9idGFpbmVkIGZyb20gdGhlIGdpdmVuIGNvbnN0cmFpbnRzIHdoaWxlIHNob3dpbmcgdGhlIHZpZGVvIGluIHRoZSBzcGVjaWZpZWQgdmlkZW8gZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvbnN0cmFpbnRzIHRoZSBtZWRpYSBzdHJlYW0gY29uc3RyYWludHMgdG8gZ2V0IHMgdmFsaWQgbWVkaWEgc3RyZWFtIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB2aWRlbyB0aGUgdmlkZW8gZWxlbWVudCBpbiBwYWdlIHdoZXJlIHRvIHNob3cgdGhlIHZpZGVvIHdoaWxlIGRlY29kaW5nLiBDYW4gYmUgZWl0aGVyIGFuIGVsZW1lbnQgaWQgb3IgZGlyZWN0bHkgYW4gSFRNTFZpZGVvRWxlbWVudC4gQ2FuIGJlIHVuZGVmaW5lZCwgaW4gd2hpY2ggY2FzZSBubyB2aWRlbyB3aWxsIGJlIHNob3duLlxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgZGVjb2RpbmcgcmVzdWx0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZU9uY2VGcm9tQ29uc3RyYWludHMoY29uc3RyYWludHMsIHZpZGVvU291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVPbmNlRnJvbVN0cmVhbShzdHJlYW0sIHZpZGVvU291cmNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbiBvbmUgYXR0ZW1wdCwgdHJpZXMgdG8gZGVjb2RlIHRoZSBiYXJjb2RlIGZyb20gYSBzdHJlYW0gb2J0YWluZWQgZnJvbSB0aGUgZ2l2ZW4gY29uc3RyYWludHMgd2hpbGUgc2hvd2luZyB0aGUgdmlkZW8gaW4gdGhlIHNwZWNpZmllZCB2aWRlbyBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBbY29uc3RyYWludHNdIHRoZSBtZWRpYSBzdHJlYW0gY29uc3RyYWludHMgdG8gZ2V0IHMgdmFsaWQgbWVkaWEgc3RyZWFtIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfEhUTUxWaWRlb0VsZW1lbnR9IFt2aWRlb10gdGhlIHZpZGVvIGVsZW1lbnQgaW4gcGFnZSB3aGVyZSB0byBzaG93IHRoZSB2aWRlbyB3aGlsZSBkZWNvZGluZy4gQ2FuIGJlIGVpdGhlciBhbiBlbGVtZW50IGlkIG9yIGRpcmVjdGx5IGFuIEhUTUxWaWRlb0VsZW1lbnQuIENhbiBiZSB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2Ugbm8gdmlkZW8gd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8UmVzdWx0Pn0gVGhlIGRlY29kaW5nIHJlc3VsdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIEJyb3dzZXJDb2RlUmVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVPbmNlRnJvbVN0cmVhbShzdHJlYW0sIHZpZGVvU291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlbyA9IHlpZWxkIHRoaXMuYXR0YWNoU3RyZWFtVG9WaWRlbyhzdHJlYW0sIHZpZGVvU291cmNlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLmRlY29kZU9uY2UodmlkZW8pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udGludW91c2x5IGRlY29kZXMgdGhlIGJhcmNvZGUgZnJvbSB0aGUgZGV2aWNlIHNwZWNpZmllZCBieSBkZXZpY2Ugd2hpbGUgc2hvd2luZyB0aGUgdmlkZW8gaW4gdGhlIHNwZWNpZmllZCB2aWRlbyBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbZGV2aWNlSWRdIHRoZSBpZCBvZiBvbmUgb2YgdGhlIGRldmljZXMgb2J0YWluZWQgYWZ0ZXIgY2FsbGluZyBnZXRWaWRlb0lucHV0RGV2aWNlcy4gQ2FuIGJlIHVuZGVmaW5lZCwgaW4gdGhpcyBjYXNlIGl0IHdpbGwgZGVjb2RlIGZyb20gb25lIG9mIHRoZSBhdmFpbGFibGUgZGV2aWNlcywgcHJlZmZlcmluZyB0aGUgbWFpbiBjYW1lcmEgKGVudmlyb25tZW50IGZhY2luZykgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xIVE1MVmlkZW9FbGVtZW50fG51bGx9IFt2aWRlb10gdGhlIHZpZGVvIGVsZW1lbnQgaW4gcGFnZSB3aGVyZSB0byBzaG93IHRoZSB2aWRlbyB3aGlsZSBkZWNvZGluZy4gQ2FuIGJlIGVpdGhlciBhbiBlbGVtZW50IGlkIG9yIGRpcmVjdGx5IGFuIEhUTUxWaWRlb0VsZW1lbnQuIENhbiBiZSB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2Ugbm8gdmlkZW8gd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBCcm93c2VyQ29kZVJlYWRlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYGRlY29kZUZyb21WaWRlb0RldmljZWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21JbnB1dFZpZGVvRGV2aWNlQ29udGludW91c2x5KGRldmljZUlkLCB2aWRlb1NvdXJjZSwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVGcm9tVmlkZW9EZXZpY2UoZGV2aWNlSWQsIHZpZGVvU291cmNlLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250aW51b3VzbHkgdHJpZXMgdG8gZGVjb2RlIHRoZSBiYXJjb2RlIGZyb20gdGhlIGRldmljZSBzcGVjaWZpZWQgYnkgZGV2aWNlIHdoaWxlIHNob3dpbmcgdGhlIHZpZGVvIGluIHRoZSBzcGVjaWZpZWQgdmlkZW8gZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gW2RldmljZUlkXSB0aGUgaWQgb2Ygb25lIG9mIHRoZSBkZXZpY2VzIG9idGFpbmVkIGFmdGVyIGNhbGxpbmcgZ2V0VmlkZW9JbnB1dERldmljZXMuIENhbiBiZSB1bmRlZmluZWQsIGluIHRoaXMgY2FzZSBpdCB3aWxsIGRlY29kZSBmcm9tIG9uZSBvZiB0aGUgYXZhaWxhYmxlIGRldmljZXMsIHByZWZmZXJpbmcgdGhlIG1haW4gY2FtZXJhIChlbnZpcm9ubWVudCBmYWNpbmcpIGlmIGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8SFRNTFZpZGVvRWxlbWVudHxudWxsfSBbdmlkZW9dIHRoZSB2aWRlbyBlbGVtZW50IGluIHBhZ2Ugd2hlcmUgdG8gc2hvdyB0aGUgdmlkZW8gd2hpbGUgZGVjb2RpbmcuIENhbiBiZSBlaXRoZXIgYW4gZWxlbWVudCBpZCBvciBkaXJlY3RseSBhbiBIVE1MVmlkZW9FbGVtZW50LiBDYW4gYmUgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIG5vIHZpZGVvIHdpbGwgYmUgc2hvd24uXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21WaWRlb0RldmljZShkZXZpY2VJZCwgdmlkZW9Tb3VyY2UsIGNhbGxiYWNrRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZpZGVvQ29uc3RyYWludHM7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzID0geyBmYWNpbmdNb2RlOiAnZW52aXJvbm1lbnQnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzID0geyBkZXZpY2VJZDogeyBleGFjdDogZGV2aWNlSWQgfSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IHsgdmlkZW86IHZpZGVvQ29uc3RyYWludHMgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVGcm9tQ29uc3RyYWludHMoY29uc3RyYWludHMsIHZpZGVvU291cmNlLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250aW51b3VzbHkgdHJpZXMgdG8gZGVjb2RlIHRoZSBiYXJjb2RlIGZyb20gYSBzdHJlYW0gb2J0YWluZWQgZnJvbSB0aGUgZ2l2ZW4gY29uc3RyYWludHMgd2hpbGUgc2hvd2luZyB0aGUgdmlkZW8gaW4gdGhlIHNwZWNpZmllZCB2aWRlbyBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge01lZGlhU3RyZWFtfSBbY29uc3RyYWludHNdIHRoZSBtZWRpYSBzdHJlYW0gY29uc3RyYWludHMgdG8gZ2V0IHMgdmFsaWQgbWVkaWEgc3RyZWFtIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfEhUTUxWaWRlb0VsZW1lbnR9IFt2aWRlb10gdGhlIHZpZGVvIGVsZW1lbnQgaW4gcGFnZSB3aGVyZSB0byBzaG93IHRoZSB2aWRlbyB3aGlsZSBkZWNvZGluZy4gQ2FuIGJlIGVpdGhlciBhbiBlbGVtZW50IGlkIG9yIGRpcmVjdGx5IGFuIEhUTUxWaWRlb0VsZW1lbnQuIENhbiBiZSB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2Ugbm8gdmlkZW8gd2lsbCBiZSBzaG93bi5cbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8UmVzdWx0Pn0gVGhlIGRlY29kaW5nIHJlc3VsdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIEJyb3dzZXJDb2RlUmVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVGcm9tQ29uc3RyYWludHMoY29uc3RyYWludHMsIHZpZGVvU291cmNlLCBjYWxsYmFja0ZuKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVGcm9tU3RyZWFtKHN0cmVhbSwgdmlkZW9Tb3VyY2UsIGNhbGxiYWNrRm4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluIG9uZSBhdHRlbXB0LCB0cmllcyB0byBkZWNvZGUgdGhlIGJhcmNvZGUgZnJvbSBhIHN0cmVhbSBvYnRhaW5lZCBmcm9tIHRoZSBnaXZlbiBjb25zdHJhaW50cyB3aGlsZSBzaG93aW5nIHRoZSB2aWRlbyBpbiB0aGUgc3BlY2lmaWVkIHZpZGVvIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IFtjb25zdHJhaW50c10gdGhlIG1lZGlhIHN0cmVhbSBjb25zdHJhaW50cyB0byBnZXQgcyB2YWxpZCBtZWRpYSBzdHJlYW0gdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8SFRNTFZpZGVvRWxlbWVudH0gW3ZpZGVvXSB0aGUgdmlkZW8gZWxlbWVudCBpbiBwYWdlIHdoZXJlIHRvIHNob3cgdGhlIHZpZGVvIHdoaWxlIGRlY29kaW5nLiBDYW4gYmUgZWl0aGVyIGFuIGVsZW1lbnQgaWQgb3IgZGlyZWN0bHkgYW4gSFRNTFZpZGVvRWxlbWVudC4gQ2FuIGJlIHVuZGVmaW5lZCwgaW4gd2hpY2ggY2FzZSBubyB2aWRlbyB3aWxsIGJlIHNob3duLlxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXN1bHQ+fSBUaGUgZGVjb2RpbmcgcmVzdWx0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21TdHJlYW0oc3RyZWFtLCB2aWRlb1NvdXJjZSwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW8gPSB5aWVsZCB0aGlzLmF0dGFjaFN0cmVhbVRvVmlkZW8oc3RyZWFtLCB2aWRlb1NvdXJjZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMuZGVjb2RlQ29udGludW91c2x5KHZpZGVvLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCcmVha3MgdGhlIGRlY29kaW5nIGxvb3AuXG4gICAgICAgICAqL1xuICAgICAgICBzdG9wQXN5bmNEZWNvZGUoKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9wQXN5bmNEZWNvZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCcmVha3MgdGhlIGRlY29kaW5nIGxvb3AuXG4gICAgICAgICAqL1xuICAgICAgICBzdG9wQ29udGludW91c0RlY29kZSgpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3BDb250aW51b3VzRGVjb2RlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgbmV3IHN0cmVhbSBhbmQgcmVxdWVzdCBhIG5ldyBkZWNvZGluZy13aXRoLWRlbGF5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RyZWFtIFRoZSBzdHJlYW0gdG8gYmUgc2hvd24gaW4gdGhlIHZpZGVvIGVsZW1lbnQuXG4gICAgICAgICAqIEBwYXJhbSBkZWNvZGVGbiBBIGNhbGxiYWNrIGZvciB0aGUgZGVjb2RlIG1ldGhvZC5cbiAgICAgICAgICovXG4gICAgICAgIGF0dGFjaFN0cmVhbVRvVmlkZW8oc3RyZWFtLCB2aWRlb1NvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0VsZW1lbnQgPSB0aGlzLnByZXBhcmVWaWRlb0VsZW1lbnQodmlkZW9Tb3VyY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVmlkZW9Tb3VyY2UodmlkZW9FbGVtZW50LCBzdHJlYW0pO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50ID0gdmlkZW9FbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucGxheVZpZGVvT25Mb2FkQXN5bmModmlkZW9FbGVtZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlkZW9FbGVtZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2aWRlb0VsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHBsYXlWaWRlb09uTG9hZEFzeW5jKHZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRoaXMucGxheVZpZGVvT25Mb2FkKHZpZGVvRWxlbWVudCwgKCkgPT4gcmVzb2x2ZSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJpbmRzIGxpc3RlbmVycyBhbmQgY2FsbGJhY2tzIHRvIHRoZSB2aWRlb0VsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFja0ZuXG4gICAgICAgICAqL1xuICAgICAgICBwbGF5VmlkZW9PbkxvYWQoZWxlbWVudCwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VuZGVkTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnN0b3BTdHJlYW1zKCk7XG4gICAgICAgICAgICB0aGlzLnZpZGVvQ2FuUGxheUxpc3RlbmVyID0gKCkgPT4gdGhpcy50cnlQbGF5VmlkZW8oZWxlbWVudCk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgdGhpcy52aWRlb0VuZGVkTGlzdGVuZXIpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgdGhpcy52aWRlb0NhblBsYXlMaXN0ZW5lcik7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgICAgIC8vIGlmIGNhbnBsYXkgd2FzIGFscmVhZHkgZmlyZWQsIHdlIHdvbid0IGtub3cgd2hlbiB0byBwbGF5LCBzbyBqdXN0IGdpdmUgaXQgYSB0cnlcbiAgICAgICAgICAgIHRoaXMudHJ5UGxheVZpZGVvKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHZpZGVvIGVsZW1lbnQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgICAqL1xuICAgICAgICBpc1ZpZGVvUGxheWluZyh2aWRlbykge1xuICAgICAgICAgICAgcmV0dXJuIHZpZGVvLmN1cnJlbnRUaW1lID4gMCAmJiAhdmlkZW8ucGF1c2VkICYmICF2aWRlby5lbmRlZCAmJiB2aWRlby5yZWFkeVN0YXRlID4gMjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSnVzdCB0cmllcyB0byBwbGF5IHRoZSB2aWRlbyBhbmQgbG9ncyBhbnkgZXJyb3JzLlxuICAgICAgICAgKiBUaGUgcGxheSBjYWxsIGlzIG9ubHkgbWFkZSBpcyB0aGUgdmlkZW8gaXMgbm90IGFscmVhZHkgcGxheWluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRyeVBsYXlWaWRlbyh2aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaWRlb1BsYXlpbmcodmlkZW9FbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RyeWluZyB0byBwbGF5IHZpZGVvIHRoYXQgaXMgYWxyZWFkeSBwbGF5aW5nLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHZpZGVvRWxlbWVudC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0l0IHdhcyBub3QgcG9zc2libGUgdG8gcGxheSB0aGUgdmlkZW8uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlYXJjaGVzIGFuZCB2YWxpZGF0ZXMgYSBtZWRpYSBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TWVkaWFFbGVtZW50KG1lZGlhRWxlbWVudElkLCB0eXBlKSB7XG4gICAgICAgICAgICBjb25zdCBtZWRpYUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZWRpYUVsZW1lbnRJZCk7XG4gICAgICAgICAgICBpZiAoIW1lZGlhRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihgZWxlbWVudCB3aXRoIGlkICcke21lZGlhRWxlbWVudElkfScgbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVkaWFFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihgZWxlbWVudCB3aXRoIGlkICcke21lZGlhRWxlbWVudElkfScgbXVzdCBiZSBhbiAke3R5cGV9IGVsZW1lbnRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZWRpYUVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgdGhlIGJhcmNvZGUgZnJvbSBhbiBpbWFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHsoc3RyaW5nfEhUTUxJbWFnZUVsZW1lbnQpfSBbc291cmNlXSBUaGUgaW1hZ2UgZWxlbWVudCB0aGF0IGNhbiBiZSBlaXRoZXIgYW4gZWxlbWVudCBpZCBvciB0aGUgZWxlbWVudCBpdHNlbGYuIENhbiBiZSB1bmRlZmluZWQgaW4gd2hpY2ggY2FzZSB0aGUgZGVjb2Rpbmcgd2lsbCBiZSBkb25lIGZyb20gdGhlIGltYWdlVXJsIHBhcmFtZXRlci5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1cmxdXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3VsdD59IFRoZSBkZWNvZGluZyByZXN1bHQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBCcm93c2VyQ29kZVJlYWRlclxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlRnJvbUltYWdlKHNvdXJjZSwgdXJsKSB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSAmJiAhdXJsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKCdlaXRoZXIgaW1hZ2VFbGVtZW50IHdpdGggYSBzcmMgc2V0IG9yIGFuIHVybCBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXJsICYmICFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVGcm9tSW1hZ2VVcmwodXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZyb21JbWFnZUVsZW1lbnQoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyB0aGUgYmFyY29kZSBmcm9tIGEgdmlkZW8uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xIVE1MSW1hZ2VFbGVtZW50KX0gW3NvdXJjZV0gVGhlIGltYWdlIGVsZW1lbnQgdGhhdCBjYW4gYmUgZWl0aGVyIGFuIGVsZW1lbnQgaWQgb3IgdGhlIGVsZW1lbnQgaXRzZWxmLiBDYW4gYmUgdW5kZWZpbmVkIGluIHdoaWNoIGNhc2UgdGhlIGRlY29kaW5nIHdpbGwgYmUgZG9uZSBmcm9tIHRoZSBpbWFnZVVybCBwYXJhbWV0ZXIuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXJsXVxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXN1bHQ+fSBUaGUgZGVjb2RpbmcgcmVzdWx0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21WaWRlbyhzb3VyY2UsIHVybCkge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UgJiYgIXVybCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbignRWl0aGVyIGFuIGVsZW1lbnQgd2l0aCBhIHNyYyBzZXQgb3IgYW4gVVJMIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1cmwgJiYgIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZyb21WaWRlb1VybCh1cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlRnJvbVZpZGVvRWxlbWVudChzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGNvbnRpbnVvdXNseSB0aGUgYmFyY29kZSBmcm9tIGEgdmlkZW8uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xIVE1MSW1hZ2VFbGVtZW50KX0gW3NvdXJjZV0gVGhlIGltYWdlIGVsZW1lbnQgdGhhdCBjYW4gYmUgZWl0aGVyIGFuIGVsZW1lbnQgaWQgb3IgdGhlIGVsZW1lbnQgaXRzZWxmLiBDYW4gYmUgdW5kZWZpbmVkIGluIHdoaWNoIGNhc2UgdGhlIGRlY29kaW5nIHdpbGwgYmUgZG9uZSBmcm9tIHRoZSBpbWFnZVVybCBwYXJhbWV0ZXIuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXJsXVxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXN1bHQ+fSBUaGUgZGVjb2RpbmcgcmVzdWx0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgQnJvd3NlckNvZGVSZWFkZXJcbiAgICAgICAgICpcbiAgICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlRnJvbVZpZGVvQ29udGludW91c2x5KHNvdXJjZSwgdXJsLCBjYWxsYmFja0ZuKSB7XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzb3VyY2UgJiYgdW5kZWZpbmVkID09PSB1cmwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oJ0VpdGhlciBhbiBlbGVtZW50IHdpdGggYSBzcmMgc2V0IG9yIGFuIFVSTCBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXJsICYmICFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVGcm9tVmlkZW9VcmxDb250aW51b3VzbHkodXJsLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZyb21WaWRlb0VsZW1lbnRDb250aW51b3VzbHkoc291cmNlLCBjYWxsYmFja0ZuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBzb21ldGhpbmcgZnJvbSBhbiBpbWFnZSBIVE1MIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVGcm9tSW1hZ2VFbGVtZW50KHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oJ0FuIGltYWdlIGVsZW1lbnQgbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnByZXBhcmVJbWFnZUVsZW1lbnQoc291cmNlKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGxldCB0YXNrO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbWFnZUxvYWRlZChlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0aGlzLmRlY29kZU9uY2UoZWxlbWVudCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IHRoaXMuX2RlY29kZU9uTG9hZEltYWdlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgc29tZXRoaW5nIGZyb20gYW4gaW1hZ2UgSFRNTCBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlRnJvbVZpZGVvRWxlbWVudChzb3VyY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9kZWNvZGVGcm9tVmlkZW9FbGVtZW50U2V0dXAoc291cmNlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVPbkxvYWRWaWRlbyhlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBzb21ldGhpbmcgZnJvbSBhbiBpbWFnZSBIVE1MIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVGcm9tVmlkZW9FbGVtZW50Q29udGludW91c2x5KHNvdXJjZSwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2RlY29kZUZyb21WaWRlb0VsZW1lbnRTZXR1cChzb3VyY2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZU9uTG9hZFZpZGVvQ29udGludW91c2x5KGVsZW1lbnQsIGNhbGxiYWNrRm4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHVwIHRoZSB2aWRlbyBzb3VyY2Ugc28gaXQgY2FuIGJlIGRlY29kZWQgd2hlbiBsb2FkZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBzb3VyY2UgVGhlIHZpZGVvIHNvdXJjZSBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgX2RlY29kZUZyb21WaWRlb0VsZW1lbnRTZXR1cChzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKCdBIHZpZGVvIGVsZW1lbnQgbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnByZXBhcmVWaWRlb0VsZW1lbnQoc291cmNlKTtcbiAgICAgICAgICAgIC8vIGRlZmluZXMgdGhlIHZpZGVvIGVsZW1lbnQgYmVmb3JlIHN0YXJ0cyBkZWNvZGluZ1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gaW1hZ2UgZnJvbSBhIFVSTC5cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21JbWFnZVVybCh1cmwpIHtcbiAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKCdBbiBVUkwgbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnByZXBhcmVJbWFnZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZVRhc2sgPSB0aGlzLl9kZWNvZGVPbkxvYWRJbWFnZShlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gdXJsO1xuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gaW1hZ2UgZnJvbSBhIFVSTC5cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUZyb21WaWRlb1VybCh1cmwpIHtcbiAgICAgICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKCdBbiBVUkwgbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIC8vIGNyZWF0ZXMgYSBuZXcgZWxlbWVudFxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMucHJlcGFyZVZpZGVvRWxlbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlVGFzayA9IHRoaXMuZGVjb2RlRnJvbVZpZGVvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gdXJsO1xuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gaW1hZ2UgZnJvbSBhIFVSTC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlRnJvbVZpZGVvVXJsQ29udGludW91c2x5KHVybCwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oJ0FuIFVSTCBtdXN0IGJlIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgLy8gY3JlYXRlcyBhIG5ldyBlbGVtZW50XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5wcmVwYXJlVmlkZW9FbGVtZW50KCk7XG4gICAgICAgICAgICBjb25zdCBkZWNvZGVUYXNrID0gdGhpcy5kZWNvZGVGcm9tVmlkZW9FbGVtZW50Q29udGludW91c2x5KGVsZW1lbnQsIGNhbGxiYWNrRm4pO1xuICAgICAgICAgICAgZWxlbWVudC5zcmMgPSB1cmw7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVGFzaztcbiAgICAgICAgfVxuICAgICAgICBfZGVjb2RlT25Mb2FkSW1hZ2UoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlTG9hZGVkTGlzdGVuZXIgPSAoKSA9PiB0aGlzLmRlY29kZU9uY2UoZWxlbWVudCwgZmFsc2UsIHRydWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLmltYWdlTG9hZGVkTGlzdGVuZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX2RlY29kZU9uTG9hZFZpZGVvKHZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAvLyBwbGF5cyB0aGUgdmlkZW9cbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnBsYXlWaWRlb09uTG9hZEFzeW5jKHZpZGVvRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgLy8gc3RhcnRzIGRlY29kaW5nIGFmdGVyIHBsYXllZCB0aGUgdmlkZW9cbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5kZWNvZGVPbmNlKHZpZGVvRWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfZGVjb2RlT25Mb2FkVmlkZW9Db250aW51b3VzbHkodmlkZW9FbGVtZW50LCBjYWxsYmFja0ZuKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIC8vIHBsYXlzIHRoZSB2aWRlb1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucGxheVZpZGVvT25Mb2FkQXN5bmModmlkZW9FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAvLyBzdGFydHMgZGVjb2RpbmcgYWZ0ZXIgcGxheWVkIHRoZSB2aWRlb1xuICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlQ29udGludW91c2x5KHZpZGVvRWxlbWVudCwgY2FsbGJhY2tGbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpc0ltYWdlTG9hZGVkKGltZykge1xuICAgICAgICAgICAgLy8gRHVyaW5nIHRoZSBvbmxvYWQgZXZlbnQsIElFIGNvcnJlY3RseSBpZGVudGlmaWVzIGFueSBpbWFnZXMgdGhhdFxuICAgICAgICAgICAgLy8gd2VyZW7igJl0IGRvd25sb2FkZWQgYXMgbm90IGNvbXBsZXRlLiBPdGhlcnMgc2hvdWxkIHRvby4gR2Vja28tYmFzZWRcbiAgICAgICAgICAgIC8vIGJyb3dzZXJzIGFjdCBsaWtlIE5TNCBpbiB0aGF0IHRoZXkgcmVwb3J0IHRoaXMgaW5jb3JyZWN0bHkuXG4gICAgICAgICAgICBpZiAoIWltZy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZXkgZG8gaGF2ZSB0d28gdmVyeSB1c2VmdWwgcHJvcGVydGllczogbmF0dXJhbFdpZHRoIGFuZFxuICAgICAgICAgICAgLy8gbmF0dXJhbEhlaWdodC4gVGhlc2UgZ2l2ZSB0aGUgdHJ1ZSBzaXplIG9mIHRoZSBpbWFnZS4gSWYgaXQgZmFpbGVkXG4gICAgICAgICAgICAvLyB0byBsb2FkLCBlaXRoZXIgb2YgdGhlc2Ugc2hvdWxkIGJlIHplcm8uXG4gICAgICAgICAgICBpZiAoaW1nLm5hdHVyYWxXaWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vIG90aGVyIHdheSBvZiBjaGVja2luZzogYXNzdW1lIGl04oCZcyBvay5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHByZXBhcmVJbWFnZUVsZW1lbnQoaW1hZ2VTb3VyY2UpIHtcbiAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGltYWdlU291cmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC53aWR0aCA9IDIwMDtcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuaGVpZ2h0ID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbWFnZVNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQgPSB0aGlzLmdldE1lZGlhRWxlbWVudChpbWFnZVNvdXJjZSwgJ2ltZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGltYWdlU291cmNlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudCA9IGltYWdlU291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGltYWdlRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBhIEhUTUxWaWRlb0VsZW1lbnQgZm9yIHNjYW5uaW5nIG9yIGNyZWF0ZXMgYSBuZXcgb25lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdmlkZW9Tb3VyY2UgVGhlIEhUTUxWaWRlb0VsZW1lbnQgdG8gYmUgc2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgcHJlcGFyZVZpZGVvRWxlbWVudCh2aWRlb1NvdXJjZSkge1xuICAgICAgICAgICAgbGV0IHZpZGVvRWxlbWVudDtcbiAgICAgICAgICAgIGlmICghdmlkZW9Tb3VyY2UgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50LndpZHRoID0gMjAwO1xuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5oZWlnaHQgPSAyMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZpZGVvU291cmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudCA9IHRoaXMuZ2V0TWVkaWFFbGVtZW50KHZpZGVvU291cmNlLCAndmlkZW8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWRlb1NvdXJjZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQgPSB2aWRlb1NvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5lZWRlZCBmb3IgaU9TIDExXG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICd0cnVlJyk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdtdXRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgICByZXR1cm4gdmlkZW9FbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmllcyB0byBkZWNvZGUgZnJvbSB0aGUgdmlkZW8gaW5wdXQgdW50aWwgaXQgZmluZHMgc29tZSB2YWx1ZS5cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZU9uY2UoZWxlbWVudCwgcmV0cnlJZk5vdEZvdW5kID0gdHJ1ZSwgcmV0cnlJZkNoZWNrc3VtT3JGb3JtYXRFcnJvciA9IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3BBc3luY0RlY29kZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgbG9vcCA9IChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3RvcEFzeW5jRGVjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTm90Rm91bmRFeGNlcHRpb24oJ1ZpZGVvIHN0cmVhbSBoYXMgZW5kZWQgYmVmb3JlIGFueSBjb2RlIGNvdWxkIGJlIGRldGVjdGVkLicpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcEFzeW5jRGVjb2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZGVjb2RlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlmTm90Rm91bmQgPSByZXRyeUlmTm90Rm91bmQgJiYgZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NoZWNrc3VtT3JGb3JtYXRFcnJvciA9IGUgaW5zdGFuY2VvZiBDaGVja3N1bUV4Y2VwdGlvbiB8fCBlIGluc3RhbmNlb2YgRm9ybWF0RXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZkNoZWNrc3VtT3JGb3JtYXQgPSBpc0NoZWNrc3VtT3JGb3JtYXRFcnJvciAmJiByZXRyeUlmQ2hlY2tzdW1PckZvcm1hdEVycm9yO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWZOb3RGb3VuZCB8fCBpZkNoZWNrc3VtT3JGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyeWluZyBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQobG9vcCwgdGhpcy5fdGltZUJldHdlZW5EZWNvZGluZ0F0dGVtcHRzLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IGxvb3AocmVzb2x2ZSwgcmVqZWN0KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRpbnVvdXNseSBkZWNvZGVzIGZyb20gdmlkZW8gaW5wdXQuXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVDb250aW51b3VzbHkoZWxlbWVudCwgY2FsbGJhY2tGbikge1xuICAgICAgICAgICAgdGhpcy5fc3RvcENvbnRpbnVvdXNEZWNvZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGxvb3AgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0b3BDb250aW51b3VzRGVjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0b3BDb250aW51b3VzRGVjb2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZGVjb2RlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0ZuKHJlc3VsdCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobG9vcCwgdGhpcy50aW1lQmV0d2VlblNjYW5zTWlsbGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGbihudWxsLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja3N1bU9yRm9ybWF0RXJyb3IgPSBlIGluc3RhbmNlb2YgQ2hlY2tzdW1FeGNlcHRpb24gfHwgZSBpbnN0YW5jZW9mIEZvcm1hdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNOb3RGb3VuZCA9IGUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2hlY2tzdW1PckZvcm1hdEVycm9yIHx8IGlzTm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyeWluZyBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChsb29wLCB0aGlzLl90aW1lQmV0d2VlbkRlY29kaW5nQXR0ZW1wdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxvb3AoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgQmluYXJ5Qml0bWFwIGZvciB5YSEgKGFuZCBkZWNvZGVzIGl0KVxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIGdldCBiaW5hcnkgYml0bWFwIGZvciBkZWNvZGUgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeUJpdG1hcCA9IHRoaXMuY3JlYXRlQmluYXJ5Qml0bWFwKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlQml0bWFwKGJpbmFyeUJpdG1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBtZWRpYSBlbGVtZW50IGlzIGluZGVlZCBhIHtAbGluayBIdG1sVmlkZW9FbGVtZW50fS5cbiAgICAgICAgICovXG4gICAgICAgIF9pc0hUTUxWaWRlb0VsZW1lbnQobWVkaWFFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBwb3RlbnRpYWxWaWRlbyA9IG1lZGlhRWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiBwb3RlbnRpYWxWaWRlby52aWRlb1dpZHRoICE9PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVyd3JpdGluZyB0aGlzIGFsbG93cyB5b3UgdG8gbWFuaXB1bGF0ZSB0aGUgbmV4dCBmcmFtZSBpbiBhbnl3YXlcbiAgICAgICAgICogeW91IHdhbnQgYmVmb3JlIGRlY29kZS5cbiAgICAgICAgICovXG4gICAgICAgIGRyYXdGcmFtZU9uQ2FudmFzKFxuICAgICAgICAgICAgc3JjRWxlbWVudCwgZGltZW5zaW9ucywgY2FudmFzRWxlbWVudENvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICghZGltZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN4OiAwLFxuICAgICAgICAgICAgICAgICAgICBzeTogMCxcbiAgICAgICAgICAgICAgICAgICAgc1dpZHRoOiBzcmNFbGVtZW50LnZpZGVvV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHNIZWlnaHQ6IHNyY0VsZW1lbnQudmlkZW9IZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGR4OiAwLFxuICAgICAgICAgICAgICAgICAgICBkeTogMCxcbiAgICAgICAgICAgICAgICAgICAgZFdpZHRoOiBzcmNFbGVtZW50LnZpZGVvV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGRIZWlnaHQ6IHNyY0VsZW1lbnQudmlkZW9IZWlnaHR9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYW52YXNFbGVtZW50Q29udGV4dCkge1xuICAgICAgICAgICAgICAgIGNhbnZhc0VsZW1lbnRDb250ZXh0ID0gdGhpcy5jYXB0dXJlQ2FudmFzQ29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhc0VsZW1lbnRDb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICAgICAgICBzcmNFbGVtZW50LFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuc3gsXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy5zeSxcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLnNXaWR0aCxcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLnNIZWlnaHQsXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy5keCxcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLmR5LFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuZFdpZHRoLFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuZEhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXdyaXRpbmcgdGhpcyBhbGxvd3MgeW91IHRvIG1hbmlwdWxhdGUgdGhlIHNuYXBzaG90IGltYWdlIGluIGFueXdheVxuICAgICAgICAgKiAgeW91IHdhbnQgYmVmb3JlIGRlY29kZS5cbiAgICAgICAgICovXG4gICAgICAgIGRyYXdJbWFnZU9uQ2FudmFzKFxuICAgICAgICAgICAgc3JjRWxlbWVudCxcbiAgICAgICAgICAgIGRpbWVuc2lvbnMsXG4gICAgICAgICAgICBjYW52YXNFbGVtZW50Q29udGV4dCA9IHRoaXMuY2FwdHVyZUNhbnZhc0NvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICghZGltZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN4OiAwLFxuICAgICAgICAgICAgICAgICAgICBzeTogMCxcbiAgICAgICAgICAgICAgICAgICAgc1dpZHRoOiBzcmNFbGVtZW50Lm5hdHVyYWxXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgc0hlaWdodDogc3JjRWxlbWVudC5uYXR1cmFsSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBkeDogMCxcbiAgICAgICAgICAgICAgICAgICAgZHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRXaWR0aDogc3JjRWxlbWVudC5uYXR1cmFsV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGRIZWlnaHQ6IHNyY0VsZW1lbnQubmF0dXJhbEhlaWdodFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhbnZhc0VsZW1lbnRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgY2FudmFzRWxlbWVudENvbnRleHQgPSB0aGlzLmNhcHR1cmVDYW52YXNDb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzRWxlbWVudENvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgIHNyY0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy5zeCxcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLnN5LFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuc1dpZHRoLFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuc0hlaWdodCxcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zLmR4LFxuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnMuZHksXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy5kV2lkdGgsXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucy5kSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIGJpbmFyeUJpdG1hcCBiYXNlZCBpbiBzb21lIGltYWdlIHNvdXJjZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG1lZGlhRWxlbWVudCBIVE1MIGVsZW1lbnQgY29udGFpbmluZyBkcmF3YWJsZSBpbWFnZSBzb3VyY2UuXG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVCaW5hcnlCaXRtYXAobWVkaWFFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLmdldENhcHR1cmVDYW52YXNDb250ZXh0KG1lZGlhRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNIVE1MVmlkZW9FbGVtZW50KG1lZGlhRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdGcmFtZU9uQ2FudmFzKG1lZGlhRWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlT25DYW52YXMobWVkaWFFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZ2V0Q2FwdHVyZUNhbnZhcyhtZWRpYUVsZW1lbnQpO1xuICAgICAgICAgICAgY29uc3QgbHVtaW5hbmNlU291cmNlID0gbmV3IEhUTUxDYW52YXNFbGVtZW50THVtaW5hbmNlU291cmNlKGNhbnZhcyk7XG4gICAgICAgICAgICBjb25zdCBoeWJyaWRCaW5hcml6ZXIgPSBuZXcgSHlicmlkQmluYXJpemVyKGx1bWluYW5jZVNvdXJjZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKGh5YnJpZEJpbmFyaXplcik7XG4gICAgICAgIH1cblxuICAgICAgICBnZXRDYXB0dXJlQ2FudmFzQ29udGV4dChtZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYXB0dXJlQ2FudmFzQ29udGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLmdldENhcHR1cmVDYW52YXMobWVkaWFFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBlbGVtLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlQ2FudmFzQ29udGV4dCA9IGN0eDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcHR1cmVDYW52YXNDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGdldENhcHR1cmVDYW52YXMobWVkaWFFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZUNhbnZhcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLmNyZWF0ZUNhcHR1cmVDYW52YXMobWVkaWFFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmVDYW52YXMgPSBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FwdHVyZUNhbnZhcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbCB0aGUgZW5jYXBzdWxhdGVkIHJlYWRlcnMgZGVjb2RlXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVCaXRtYXAoYmluYXJ5Qml0bWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFkZXIuZGVjb2RlKGJpbmFyeUJpdG1hcCwgdGhpcy5faGludHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDwn5aMIFByZXBhcmVzIHRoZSBjYW52YXMgZm9yIGNhcHR1cmUgYW5kIHNjYW4gZnJhbWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2FwdHVyZUNhbnZhcyhtZWRpYUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveUNhcHR1cmVDYW52YXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGxldCB3aWR0aDtcbiAgICAgICAgICAgIGxldCBoZWlnaHQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lZGlhRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVkaWFFbGVtZW50IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IG1lZGlhRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBtZWRpYUVsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lZGlhRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBtZWRpYUVsZW1lbnQubmF0dXJhbFdpZHRoIHx8IG1lZGlhRWxlbWVudC53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gbWVkaWFFbGVtZW50Lm5hdHVyYWxIZWlnaHQgfHwgbWVkaWFFbGVtZW50LmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXNFbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICAgICAgICAgICAgY2FudmFzRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgY2FudmFzRWxlbWVudC53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgY2FudmFzRWxlbWVudC5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICByZXR1cm4gY2FudmFzRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcHMgdGhlIGNvbnRpbnVvdXMgc2NhbiBhbmQgY2xlYW5zIHRoZSBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICBzdG9wU3RyZWFtcygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaCh0ID0+IHQuc3RvcCgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zdG9wQXN5bmNEZWNvZGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQXN5bmNEZWNvZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zdG9wQ29udGludW91c0RlY29kZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BDb250aW51b3VzRGVjb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2V0cyB0aGUgY29kZSByZWFkZXIgdG8gdGhlIGluaXRpYWwgc3RhdGUuIENhbmNlbHMgYW55IG9uZ29pbmcgYmFyY29kZSBzY2FubmluZyBmcm9tIHZpZGVvIG9yIGNhbWVyYS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlck9mIEJyb3dzZXJDb2RlUmVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIC8vIHN0b3BzIHRoZSBjYW1lcmEsIHByZXZpZXcgYW5kIHNjYW4g8J+UtFxuICAgICAgICAgICAgdGhpcy5zdG9wU3RyZWFtcygpO1xuICAgICAgICAgICAgLy8gY2xlYW4gYW5kIGZvcmdldCBhYm91dCBIVE1MIGVsZW1lbnRzXG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95VmlkZW9FbGVtZW50KCk7XG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95SW1hZ2VFbGVtZW50KCk7XG4gICAgICAgICAgICB0aGlzLl9kZXN0cm95Q2FwdHVyZUNhbnZhcygpO1xuICAgICAgICB9XG4gICAgICAgIF9kZXN0cm95VmlkZW9FbGVtZW50KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZpcnN0IGdpdmVzIGZyZWVkb24gdG8gdGhlIGVsZW1lbnQg8J+VilxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZpZGVvRW5kZWRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHRoaXMudmlkZW9FbmRlZExpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy52aWRlb1BsYXlpbmdFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCB0aGlzLnZpZGVvUGxheWluZ0V2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZpZGVvQ2FuUGxheUxpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgdGhpcy52aWRlb0NhblBsYXlMaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGVuIGZvcmdldHMgYWJvdXQgdGhhdCBlbGVtZW50IPCfmKJcbiAgICAgICAgICAgIHRoaXMuY2xlYW5WaWRlb1NvdXJjZSh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBfZGVzdHJveUltYWdlRWxlbWVudCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmaXJzdCBnaXZlcyBmcmVlZG9uIHRvIHRoZSBlbGVtZW50IPCflYpcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMuaW1hZ2VMb2FkZWRMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLmltYWdlTG9hZGVkTGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhlbiBmb3JnZXQgYWJvdXQgdGhhdCBlbGVtZW50IPCfmKJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnNyYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgICAgICB0aGlzLmltYWdlRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYW5zIGNhbnZhcyByZWZlcmVuY2VzIPCfloxcbiAgICAgICAgICovXG4gICAgICAgIF9kZXN0cm95Q2FwdHVyZUNhbnZhcygpIHtcbiAgICAgICAgICAgIC8vIHRoZW4gZm9yZ2V0IGFib3V0IHRoYXQgZWxlbWVudCDwn5iiXG4gICAgICAgICAgICB0aGlzLmNhcHR1cmVDYW52YXNDb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlQ2FudmFzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHdoYXQgdGhlIHZpZGVvRWxlbWVudCBzcmMgd2lsbCBiZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZpZGVvRWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0gc3RyZWFtXG4gICAgICAgICAqL1xuICAgICAgICBhZGRWaWRlb1NvdXJjZSh2aWRlb0VsZW1lbnQsIHN0cmVhbSkge1xuICAgICAgICAgICAgLy8gT2xkZXIgYnJvd3NlcnMgbWF5IG5vdCBoYXZlIGBzcmNPYmplY3RgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEBub3RlIFRocm93cyBFeGNlcHRpb24gaWYgaW50ZXJydXB0ZWQgYnkgYSBuZXcgbG9hZGVkIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIEBub3RlIEF2b2lkIHVzaW5nIHRoaXMgaW4gbmV3IGJyb3dzZXJzLCBhcyBpdCBpcyBnb2luZyBhd2F5LlxuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuYmluZHMgYSBIVE1MIHZpZGVvIHNyYyBwcm9wZXJ0eS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZpZGVvRWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYW5WaWRlb1NvdXJjZSh2aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNyYyA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIFJlc3VsdCB7XG4gICAgICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHRleHQ6IHN0cmluZyxcbiAgICAgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLFxuICAgICAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LFxuICAgICAgICAvLyAgICAgICAgICAgICAgIEJhcmNvZGVGb3JtYXQgZm9ybWF0KSB7XG4gICAgICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKVxuICAgICAgICAvLyB9XG4gICAgICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih0ZXh0OiBzdHJpbmcsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcyxcbiAgICAgICAgLy8gICAgICAgICAgICAgICBSZXN1bHRQb2NvbnN0IHJlc3VsdFBvaW50czogSW50MzJBcnJheSxcbiAgICAgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkge1xuICAgICAgICAvLyAgIHRoaXModGV4dCwgcmF3Qnl0ZXMsIHJhd0J5dGVzID09IG51bGwgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aCxcbiAgICAgICAgLy8gICAgICAgIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApXG4gICAgICAgIC8vIH1cbiAgICAgICAgY29uc3RydWN0b3IodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMgPSByYXdCeXRlcyA9PSBudWxsID8gMCA6IDggKiByYXdCeXRlcy5sZW5ndGgsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXAgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlcztcbiAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IHJlc3VsdFBvaW50cztcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy5yYXdCeXRlcyA9IHJhd0J5dGVzO1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5udW1CaXRzID0gKHJhd0J5dGVzID09PSBudWxsIHx8IHJhd0J5dGVzID09PSB1bmRlZmluZWQpID8gMCA6IDggKiByYXdCeXRlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiByYXcgdGV4dCBlbmNvZGVkIGJ5IHRoZSBiYXJjb2RlXG4gICAgICAgICAqL1xuICAgICAgICBnZXRUZXh0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiByYXcgYnl0ZXMgZW5jb2RlZCBieSB0aGUgYmFyY29kZSwgaWYgYXBwbGljYWJsZSwgb3RoZXJ3aXNlIHtAY29kZSBudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0UmF3Qnl0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBob3cgbWFueSBiaXRzIG9mIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0gYXJlIHZhbGlkOyB0eXBpY2FsbHkgOCB0aW1lcyBpdHMgbGVuZ3RoXG4gICAgICAgICAqIEBzaW5jZSAzLjMuMFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TnVtQml0cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50c1xuICAgICAgICAgKiAgICAgICAgIGlkZW50aWZ5aW5nIGZpbmRlciBwYXR0ZXJucyBvciB0aGUgY29ybmVycyBvZiB0aGUgYmFyY29kZS4gVGhlIGV4YWN0IG1lYW5pbmcgaXNcbiAgICAgICAgICogICAgICAgICBzcGVjaWZpYyB0byB0aGUgdHlwZSBvZiBiYXJjb2RlIHRoYXQgd2FzIGRlY29kZWQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXRSZXN1bHRQb2ludHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIEJhcmNvZGVGb3JtYXR9IHJlcHJlc2VudGluZyB0aGUgZm9ybWF0IG9mIHRoZSBiYXJjb2RlIHRoYXQgd2FzIGRlY29kZWRcbiAgICAgICAgICovXG4gICAgICAgIGdldEJhcmNvZGVGb3JtYXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIE1hcH0gbWFwcGluZyB7QGxpbmsgUmVzdWx0TWV0YWRhdGFUeXBlfSBrZXlzIHRvIHZhbHVlcy4gTWF5IGJlXG4gICAgICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLFxuICAgICAgICAgKiAgIGxpa2Ugb3JpZW50YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBnZXRSZXN1bHRNZXRhZGF0YSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdE1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIHB1dE1ldGFkYXRhKHR5cGUsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRNZXRhZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhLnNldCh0eXBlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcHV0QWxsTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWRkUmVzdWx0UG9pbnRzKG5ld1BvaW50cykge1xuICAgICAgICAgICAgY29uc3Qgb2xkUG9pbnRzID0gdGhpcy5yZXN1bHRQb2ludHM7XG4gICAgICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSBuZXdQb2ludHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkob2xkUG9pbnRzLCAwLCBhbGxQb2ludHMsIDAsIG9sZFBvaW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkobmV3UG9pbnRzLCAwLCBhbGxQb2ludHMsIG9sZFBvaW50cy5sZW5ndGgsIG5ld1BvaW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdldFRpbWVzdGFtcCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEg1xuICAgICAqL1xuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki9cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGJhcmNvZGUgZm9ybWF0cyBrbm93biB0byB0aGlzIHBhY2thZ2UuIFBsZWFzZSBrZWVwIGFscGhhYmV0aXplZC5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgdmFyIEJhcmNvZGVGb3JtYXQ7XG4gICAgKGZ1bmN0aW9uIChCYXJjb2RlRm9ybWF0KSB7XG4gICAgICAgIC8qKiBBenRlYyAyRCBiYXJjb2RlIGZvcm1hdC4gKi9cbiAgICAgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0W1wiQVpURUNcIl0gPSAwXSA9IFwiQVpURUNcIjtcbiAgICAgICAgLyoqIENPREFCQVIgMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJDT0RBQkFSXCJdID0gMV0gPSBcIkNPREFCQVJcIjtcbiAgICAgICAgLyoqIENvZGUgMzkgMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJDT0RFXzM5XCJdID0gMl0gPSBcIkNPREVfMzlcIjtcbiAgICAgICAgLyoqIENvZGUgOTMgMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJDT0RFXzkzXCJdID0gM10gPSBcIkNPREVfOTNcIjtcbiAgICAgICAgLyoqIENvZGUgMTI4IDFEIGZvcm1hdC4gKi9cbiAgICAgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0W1wiQ09ERV8xMjhcIl0gPSA0XSA9IFwiQ09ERV8xMjhcIjtcbiAgICAgICAgLyoqIERhdGEgTWF0cml4IDJEIGJhcmNvZGUgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJEQVRBX01BVFJJWFwiXSA9IDVdID0gXCJEQVRBX01BVFJJWFwiO1xuICAgICAgICAvKiogRUFOLTggMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJFQU5fOFwiXSA9IDZdID0gXCJFQU5fOFwiO1xuICAgICAgICAvKiogRUFOLTEzIDFEIGZvcm1hdC4gKi9cbiAgICAgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0W1wiRUFOXzEzXCJdID0gN10gPSBcIkVBTl8xM1wiO1xuICAgICAgICAvKiogSVRGIChJbnRlcmxlYXZlZCBUd28gb2YgRml2ZSkgMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJJVEZcIl0gPSA4XSA9IFwiSVRGXCI7XG4gICAgICAgIC8qKiBNYXhpQ29kZSAyRCBiYXJjb2RlIGZvcm1hdC4gKi9cbiAgICAgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0W1wiTUFYSUNPREVcIl0gPSA5XSA9IFwiTUFYSUNPREVcIjtcbiAgICAgICAgLyoqIFBERjQxNyBmb3JtYXQuICovXG4gICAgICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFtcIlBERl80MTdcIl0gPSAxMF0gPSBcIlBERl80MTdcIjtcbiAgICAgICAgLyoqIFFSIENvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovXG4gICAgICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFtcIlFSX0NPREVcIl0gPSAxMV0gPSBcIlFSX0NPREVcIjtcbiAgICAgICAgLyoqIFJTUyAxNCAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJSU1NfMTRcIl0gPSAxMl0gPSBcIlJTU18xNFwiO1xuICAgICAgICAvKiogUlNTIEVYUEFOREVEICovXG4gICAgICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFtcIlJTU19FWFBBTkRFRFwiXSA9IDEzXSA9IFwiUlNTX0VYUEFOREVEXCI7XG4gICAgICAgIC8qKiBVUEMtQSAxRCBmb3JtYXQuICovXG4gICAgICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFtcIlVQQ19BXCJdID0gMTRdID0gXCJVUENfQVwiO1xuICAgICAgICAvKiogVVBDLUUgMUQgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJVUENfRVwiXSA9IDE1XSA9IFwiVVBDX0VcIjtcbiAgICAgICAgLyoqIFVQQy9FQU4gZXh0ZW5zaW9uIGZvcm1hdC4gTm90IGEgc3RhbmQtYWxvbmUgZm9ybWF0LiAqL1xuICAgICAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbXCJVUENfRUFOX0VYVEVOU0lPTlwiXSA9IDE2XSA9IFwiVVBDX0VBTl9FWFRFTlNJT05cIjtcbiAgICB9KShCYXJjb2RlRm9ybWF0IHx8IChCYXJjb2RlRm9ybWF0ID0ge30pKTtcbiAgICB2YXIgQmFyY29kZUZvcm1hdCQxID0gQmFyY29kZUZvcm1hdDtcblxuICAgIC8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlclxuICAgICAqIHdpc2hlcyB0byBjb21tdW5pY2F0ZSBiYWNrIHRvIHRoZSBjYWxsZXIuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIHZhciBSZXN1bHRNZXRhZGF0YVR5cGU7XG4gICAgKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBtZXRhZGF0YS4gTWFwcyB0byBhbiB1bnNwZWNpZmllZCB7QGxpbmsgT2JqZWN0fS5cbiAgICAgICAgICovXG4gICAgICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbXCJPVEhFUlwiXSA9IDBdID0gXCJPVEhFUlwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVub3RlcyB0aGUgbGlrZWx5IGFwcHJveGltYXRlIG9yaWVudGF0aW9uIG9mIHRoZSBiYXJjb2RlIGluIHRoZSBpbWFnZS4gVGhpcyB2YWx1ZVxuICAgICAgICAgKiBpcyBnaXZlbiBhcyBkZWdyZWVzIHJvdGF0ZWQgY2xvY2t3aXNlIGZyb20gdGhlIG5vcm1hbCwgdXByaWdodCBvcmllbnRhdGlvbi5cbiAgICAgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmVcbiAgICAgICAgICogc2FpZCB0byBoYXZlIG9yaWVudGF0aW9uIFwiOTBcIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2VcbiAgICAgICAgICogdmFsdWUgaXMgaW4gdGhlIHJhbmdlIFswLDM2MCkuXG4gICAgICAgICAqL1xuICAgICAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlW1wiT1JJRU5UQVRJT05cIl0gPSAxXSA9IFwiT1JJRU5UQVRJT05cIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnXG4gICAgICAgICAqIHdoaWNoIGlzIHNvbWV0aW1lcyB1c2VkIHRvIGVuY29kZSBiaW5hcnkgZGF0YS4gV2hpbGUge0BsaW5rIFJlc3VsdH0gbWFrZXMgYXZhaWxhYmxlXG4gICAgICAgICAqIHRoZSBjb21wbGV0ZSByYXcgYnl0ZXMgaW4gdGhlIGJhcmNvZGUgZm9yIHRoZXNlIGZvcm1hdHMsIGl0IGRvZXMgbm90IG9mZmVyIHRoZSBieXRlc1xuICAgICAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogPHA+VGhpcyBtYXBzIHRvIGEge0BsaW5rIGphdmEudXRpbC5MaXN0fSBvZiBieXRlIGFycmF5cyBjb3JyZXNwb25kaW5nIHRvIHRoZVxuICAgICAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD5cbiAgICAgICAgICovXG4gICAgICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbXCJCWVRFX1NFR01FTlRTXCJdID0gMl0gPSBcIkJZVEVfU0VHTUVOVFNcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIGNvcnJlY3Rpb24gbGV2ZWwgdXNlZCwgaWYgYXBwbGljYWJsZS4gVGhlIHZhbHVlIHR5cGUgZGVwZW5kcyBvbiB0aGVcbiAgICAgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVtcIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUxcIl0gPSAzXSA9IFwiRVJST1JfQ09SUkVDVElPTl9MRVZFTFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIHNvbWUgcGVyaW9kaWNhbHMsIGluZGljYXRlcyB0aGUgaXNzdWUgbnVtYmVyIGFzIGFuIHtAbGluayBJbnRlZ2VyfS5cbiAgICAgICAgICovXG4gICAgICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbXCJJU1NVRV9OVU1CRVJcIl0gPSA0XSA9IFwiSVNTVUVfTlVNQkVSXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGb3Igc29tZSBwcm9kdWN0cywgaW5kaWNhdGVzIHRoZSBzdWdnZXN0ZWQgcmV0YWlsIHByaWNlIGluIHRoZSBiYXJjb2RlIGFzIGFcbiAgICAgICAgICogZm9ybWF0dGVkIHtAbGluayBTdHJpbmd9LlxuICAgICAgICAgKi9cbiAgICAgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVtcIlNVR0dFU1RFRF9QUklDRVwiXSA9IDVdID0gXCJTVUdHRVNURURfUFJJQ0VcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCB0aGUgcG9zc2libGUgY291bnRyeSBvZiBtYW51ZmFjdHVyZSBhcyBhIHtAbGluayBTdHJpbmd9IGRlbm90aW5nIHRoZVxuICAgICAgICAgKiBJU08gY291bnRyeSBjb2RlLiBTb21lIG1hcCB0byBtdWx0aXBsZSBwb3NzaWJsZSBjb3VudHJpZXMsIGxpa2UgXCJVUy9DQVwiLlxuICAgICAgICAgKi9cbiAgICAgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVtcIlBPU1NJQkxFX0NPVU5UUllcIl0gPSA2XSA9IFwiUE9TU0lCTEVfQ09VTlRSWVwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dFxuICAgICAgICAgKi9cbiAgICAgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVtcIlVQQ19FQU5fRVhURU5TSU9OXCJdID0gN10gPSBcIlVQQ19FQU5fRVhURU5TSU9OXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQREY0MTctc3BlY2lmaWMgbWV0YWRhdGFcbiAgICAgICAgICovXG4gICAgICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbXCJQREY0MTdfRVhUUkFfTUVUQURBVEFcIl0gPSA4XSA9IFwiUERGNDE3X0VYVFJBX01FVEFEQVRBXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZVxuICAgICAgICAgKiBzZXF1ZW5jZSBudW1iZXIgaXMgZ2l2ZW4gd2l0aCBpdC5cbiAgICAgICAgICovXG4gICAgICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbXCJTVFJVQ1RVUkVEX0FQUEVORF9TRVFVRU5DRVwiXSA9IDldID0gXCJTVFJVQ1RVUkVEX0FQUEVORF9TRVFVRU5DRVwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGNvZGUgZm9ybWF0IHN1cHBvcnRzIHN0cnVjdHVyZWQgYXBwZW5kIGFuZCB0aGUgY3VycmVudCBzY2FubmVkIGNvZGUgaXMgcGFydCBvZiBvbmUgdGhlbiB0aGVcbiAgICAgICAgICogcGFyaXR5IGlzIGdpdmVuIHdpdGggaXQuXG4gICAgICAgICAqL1xuICAgICAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlW1wiU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZXCJdID0gMTBdID0gXCJTVFJVQ1RVUkVEX0FQUEVORF9QQVJJVFlcIjtcbiAgICB9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7XG4gICAgdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0gUmVzdWx0TWV0YWRhdGFUeXBlO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTGlzdDsqL1xuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyB0aGUgcmVzdWx0IG9mIGRlY29kaW5nIGEgbWF0cml4IG9mIGJpdHMuIFRoaXMgdHlwaWNhbGx5XG4gICAgICogYXBwbGllcyB0byAyRCBiYXJjb2RlIGZvcm1hdHMuIEZvciBub3cgaXQgY29udGFpbnMgdGhlIHJhdyBieXRlcyBvYnRhaW5lZCxcbiAgICAgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGVjb2RlclJlc3VsdCB7XG4gICAgICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihyYXdCeXRlczogVWludDhBcnJheSxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICBMaXN0PFVpbnQ4QXJyYXk+IGJ5dGVTZWdtZW50cyxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGVjTGV2ZWwpIHtcbiAgICAgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSlcbiAgICAgICAgLy8gfVxuICAgICAgICBjb25zdHJ1Y3RvcihyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIgPSAtMSwgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7XG4gICAgICAgICAgICB0aGlzLmVjTGV2ZWwgPSBlY0xldmVsO1xuICAgICAgICAgICAgdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIgPSBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5O1xuICAgICAgICAgICAgdGhpcy5udW1CaXRzID0gKHJhd0J5dGVzID09PSB1bmRlZmluZWQgfHwgcmF3Qnl0ZXMgPT09IG51bGwpID8gMCA6IDggKiByYXdCeXRlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGVcbiAgICAgICAgICovXG4gICAgICAgIGdldFJhd0J5dGVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmF3Qnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aFxuICAgICAgICAgKiBAc2luY2UgMy4zLjBcbiAgICAgICAgICovXG4gICAgICAgIGdldE51bUJpdHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW1CaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX1cbiAgICAgICAgICogQHNpbmNlIDMuMy4wXG4gICAgICAgICAqL1xuICAgICAgICBzZXROdW1CaXRzKG51bUJpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy5udW1CaXRzID0gbnVtQml0cztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHRcbiAgICAgICAgICovXG4gICAgICAgIGdldFRleHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIGxpc3Qgb2YgYnl0ZSBzZWdtZW50cyBpbiB0aGUgcmVzdWx0LCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGVcbiAgICAgICAgICovXG4gICAgICAgIGdldEJ5dGVTZWdtZW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ5dGVTZWdtZW50cztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBuYW1lIG9mIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwgdXNlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlXG4gICAgICAgICAqL1xuICAgICAgICBnZXRFQ0xldmVsKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWNMZXZlbDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlXG4gICAgICAgICAqL1xuICAgICAgICBnZXRFcnJvcnNDb3JyZWN0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc2V0RXJyb3JzQ29ycmVjdGVkKGVycm9yc0NvcnJlY3RlZCAvKkludGVnZXIqLykge1xuICAgICAgICAgICAgdGhpcy5lcnJvcnNDb3JyZWN0ZWQgPSBlcnJvcnNDb3JyZWN0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gbnVtYmVyIG9mIGVyYXN1cmVzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlXG4gICAgICAgICAqL1xuICAgICAgICBnZXRFcmFzdXJlcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVyYXN1cmVzO1xuICAgICAgICB9XG4gICAgICAgIHNldEVyYXN1cmVzKGVyYXN1cmVzIC8qSW50ZWdlciovKSB7XG4gICAgICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gYXJiaXRyYXJ5IGFkZGl0aW9uYWwgbWV0YWRhdGFcbiAgICAgICAgICovXG4gICAgICAgIGdldE90aGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3RoZXI7XG4gICAgICAgIH1cbiAgICAgICAgc2V0T3RoZXIob3RoZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3RoZXIgPSBvdGhlcjtcbiAgICAgICAgfVxuICAgICAgICBoYXNTdHJ1Y3R1cmVkQXBwZW5kKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U3RydWN0dXJlZEFwcGVuZFBhcml0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyXG4gICAgICogdGhlIEdhbG9pcyBGaWVsZHMuIE9wZXJhdGlvbnMgdXNlIGEgZ2l2ZW4gcHJpbWl0aXZlIHBvbHlub21pYWwgaW4gY2FsY3VsYXRpb25zLjwvcD5cbiAgICAgKlxuICAgICAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9XG4gICAgICogZm9yIGNvbnZlbmllbmNlIGFuZCBzcGVlZCAoYnV0IGF0IHRoZSBjb3N0IG9mIG1lbW9yeSkuXG4gICAgICogPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIERhdmlkIE9saXZpZXJcbiAgICAgKi9cbiAgICBjbGFzcyBBYnN0cmFjdEdlbmVyaWNHRiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIDIgdG8gdGhlIHBvd2VyIG9mIGEgaW4gR0Yoc2l6ZSlcbiAgICAgICAgICovXG4gICAgICAgIGV4cChhKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVthXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSlcbiAgICAgICAgICovXG4gICAgICAgIGxvZyhhIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChhID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9nVGFibGVbYV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcGxlbWVudHMgYm90aCBhZGRpdGlvbiBhbmQgc3VidHJhY3Rpb24gLS0gdGhleSBhcmUgdGhlIHNhbWUgaW4gR0Yoc2l6ZSkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGFkZE9yU3VidHJhY3QoYSAvKmludCovLCBiIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHJldHVybiBhIF4gYjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+UmVwcmVzZW50cyBhIHBvbHlub21pYWwgd2hvc2UgY29lZmZpY2llbnRzIGFyZSBlbGVtZW50cyBvZiBhIEdGLlxuICAgICAqIEluc3RhbmNlcyBvZiB0aGlzIGNsYXNzIGFyZSBpbW11dGFibGUuPC9wPlxuICAgICAqXG4gICAgICogPHA+TXVjaCBjcmVkaXQgaXMgZHVlIHRvIFdpbGxpYW0gUnVja2xpZGdlIHNpbmNlIHBvcnRpb25zIG9mIHRoaXMgY29kZSBhcmUgYW4gaW5kaXJlY3RcbiAgICAgKiBwb3J0IG9mIGhpcyBDKysgUmVlZC1Tb2xvbW9uIGltcGxlbWVudGF0aW9uLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgR2VuZXJpY0dGUG9seSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gZmllbGQgdGhlIHtAbGluayBHZW5lcmljR0Z9IGluc3RhbmNlIHJlcHJlc2VudGluZyB0aGUgZmllbGQgdG8gdXNlXG4gICAgICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zXG4gICAgICAgICAqIEBwYXJhbSBjb2VmZmljaWVudHMgY29lZmZpY2llbnRzIGFzIGludHMgcmVwcmVzZW50aW5nIGVsZW1lbnRzIG9mIEdGKHNpemUpLCBhcnJhbmdlZFxuICAgICAgICAgKiBmcm9tIG1vc3Qgc2lnbmlmaWNhbnQgKGhpZ2hlc3QtcG93ZXIgdGVybSkgY29lZmZpY2llbnQgdG8gbGVhc3Qgc2lnbmlmaWNhbnRcbiAgICAgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSxcbiAgICAgICAgICogb3IgaWYgbGVhZGluZyBjb2VmZmljaWVudCBpcyAwIGFuZCB0aGlzIGlzIG5vdCBhXG4gICAgICAgICAqIGNvbnN0YW50IHBvbHlub21pYWwgKHRoYXQgaXMsIGl0IGlzIG5vdCB0aGUgbW9ub21pYWwgXCIwXCIpXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihmaWVsZCwgY29lZmZpY2llbnRzKSB7XG4gICAgICAgICAgICBpZiAoY29lZmZpY2llbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgICAgIGNvbnN0IGNvZWZmaWNpZW50c0xlbmd0aCA9IGNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBMZWFkaW5nIHRlcm0gbXVzdCBiZSBub24temVybyBmb3IgYW55dGhpbmcgZXhjZXB0IHRoZSBjb25zdGFudCBwb2x5bm9taWFsIFwiMFwiXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0Tm9uWmVybyA9IDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGZpcnN0Tm9uWmVybyA8IGNvZWZmaWNpZW50c0xlbmd0aCAmJiBjb2VmZmljaWVudHNbZmlyc3ROb25aZXJvXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Tm9uWmVybyA9PT0gY29lZmZpY2llbnRzTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gY29lZmZpY2llbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdldENvZWZmaWNpZW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBkZWdyZWUgb2YgdGhpcyBwb2x5bm9taWFsXG4gICAgICAgICAqL1xuICAgICAgICBnZXREZWdyZWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsIFwiMFwiXG4gICAgICAgICAqL1xuICAgICAgICBpc1plcm8oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHNbMF0gPT09IDA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gY29lZmZpY2llbnQgb2YgeF5kZWdyZWUgdGVybSBpbiB0aGlzIHBvbHlub21pYWxcbiAgICAgICAgICovXG4gICAgICAgIGdldENvZWZmaWNpZW50KGRlZ3JlZSAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHNbdGhpcy5jb2VmZmljaWVudHMubGVuZ3RoIC0gMSAtIGRlZ3JlZV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludFxuICAgICAgICAgKi9cbiAgICAgICAgZXZhbHVhdGVBdChhIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChhID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gSnVzdCByZXR1cm4gdGhlIHheMCBjb2VmZmljaWVudFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvZWZmaWNpZW50KDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGEgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50c1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWZmaWNpZW50ID0gY29lZmZpY2llbnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRi5hZGRPclN1YnRyYWN0KHJlc3VsdCwgY29lZmZpY2llbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMuZmllbGQ7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QoZmllbGQubXVsdGlwbHkoYSwgcmVzdWx0KSwgY29lZmZpY2llbnRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgYWRkT3JTdWJ0cmFjdChvdGhlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7XG4gICAgICAgICAgICBsZXQgbGFyZ2VyQ29lZmZpY2llbnRzID0gb3RoZXIuY29lZmZpY2llbnRzO1xuICAgICAgICAgICAgaWYgKHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoID4gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBzbWFsbGVyQ29lZmZpY2llbnRzO1xuICAgICAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7XG4gICAgICAgICAgICAgICAgbGFyZ2VyQ29lZmZpY2llbnRzID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgLy8gQ29weSBoaWdoLW9yZGVyIHRlcm1zIG9ubHkgZm91bmQgaW4gaGlnaGVyLWRlZ3JlZSBwb2x5bm9taWFsJ3MgY29lZmZpY2llbnRzXG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KGxhcmdlckNvZWZmaWNpZW50cywgMCwgc3VtRGlmZiwgMCwgbGVuZ3RoRGlmZik7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVuZ3RoRGlmZjsgaSA8IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRi5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KHRoaXMuZmllbGQsIHN1bURpZmYpO1xuICAgICAgICB9XG4gICAgICAgIG11bHRpcGx5KG90aGVyKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmllbGQuZXF1YWxzKG90aGVyLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1plcm8oKSB8fCBvdGhlci5pc1plcm8oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpZWxkLmdldFplcm8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50cztcbiAgICAgICAgICAgIGNvbnN0IGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7XG4gICAgICAgICAgICBjb25zdCBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYUNvZWZmID0gYUNvZWZmaWNpZW50c1tpXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHlTY2FsYXIoc2NhbGFyIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChzY2FsYXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NhbGFyID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5jb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUpO1xuICAgICAgICAgICAgY29uc3QgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNHRlBvbHkoZmllbGQsIHByb2R1Y3QpO1xuICAgICAgICB9XG4gICAgICAgIG11bHRpcGx5QnlNb25vbWlhbChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykge1xuICAgICAgICAgICAgaWYgKGRlZ3JlZSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29lZmZpY2llbnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50cztcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpO1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0W2ldID0gZmllbGQubXVsdGlwbHkoY29lZmZpY2llbnRzW2ldLCBjb2VmZmljaWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNHRlBvbHkoZmllbGQsIHByb2R1Y3QpO1xuICAgICAgICB9XG4gICAgICAgIGRpdmlkZShvdGhlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignRGl2aWRlIGJ5IDAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZDtcbiAgICAgICAgICAgIGxldCBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTtcbiAgICAgICAgICAgIGxldCByZW1haW5kZXIgPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IG90aGVyLmdldENvZWZmaWNpZW50KG90aGVyLmdldERlZ3JlZSgpKTtcbiAgICAgICAgICAgIGNvbnN0IGludmVyc2VEZW5vbWluYXRvckxlYWRpbmdUZXJtID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTtcbiAgICAgICAgICAgIHdoaWxlIChyZW1haW5kZXIuZ2V0RGVncmVlKCkgPj0gb3RoZXIuZ2V0RGVncmVlKCkgJiYgIXJlbWFpbmRlci5pc1plcm8oKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZ3JlZURpZmZlcmVuY2UgPSByZW1haW5kZXIuZ2V0RGVncmVlKCkgLSBvdGhlci5nZXREZWdyZWUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IGZpZWxkLm11bHRpcGx5KHJlbWFpbmRlci5nZXRDb2VmZmljaWVudChyZW1haW5kZXIuZ2V0RGVncmVlKCkpLCBpbnZlcnNlRGVub21pbmF0b3JMZWFkaW5nVGVybSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVybSA9IG90aGVyLm11bHRpcGx5QnlNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9uUXVvdGllbnQgPSBmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmZlcmVuY2UsIHNjYWxlKTtcbiAgICAgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpO1xuICAgICAgICAgICAgICAgIHJlbWFpbmRlciA9IHJlbWFpbmRlci5hZGRPclN1YnRyYWN0KHRlcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgZGVncmVlID0gdGhpcy5nZXREZWdyZWUoKTsgZGVncmVlID49IDA7IGRlZ3JlZS0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvZWZmaWNpZW50ID0gdGhpcy5nZXRDb2VmZmljaWVudChkZWdyZWUpO1xuICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29lZmZpY2llbnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyAtICc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICsgJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlID09PSAwIHx8IGNvZWZmaWNpZW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHBoYVBvd2VyID0gdGhpcy5maWVsZC5sb2coY29lZmZpY2llbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhUG93ZXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWxwaGFQb3dlciA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYWxwaGFQb3dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBkZWdyZWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIEFyaXRobWV0aWNFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIH1cbiAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXJcbiAgICAgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPlxuICAgICAqXG4gICAgICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH1cbiAgICAgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS5cbiAgICAgKiA8L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgRGF2aWQgT2xpdmllclxuICAgICAqL1xuICAgIGNsYXNzIEdlbmVyaWNHRiBleHRlbmRzIEFic3RyYWN0R2VuZXJpY0dGIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIHJlcHJlc2VudGF0aW9uIG9mIEdGKHNpemUpIHVzaW5nIHRoZSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnlcbiAgICAgICAgICogIHRoZSBiaXRzIG9mIGFuIGludCwgd2hlcmUgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdCByZXByZXNlbnRzIHRoZSBjb25zdGFudFxuICAgICAgICAgKiAgY29lZmZpY2llbnRcbiAgICAgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkXG4gICAgICAgICAqIEBwYXJhbSBiIHRoZSBmYWN0b3IgYiBpbiB0aGUgZ2VuZXJhdG9yIHBvbHlub21pYWwgY2FuIGJlIDAtIG9yIDEtYmFzZWRcbiAgICAgICAgICogIChnKHgpID0gKHgrYV5iKSh4K2FeKGIrMSkpLi4uKHgrYV4oYisydC0xKSkpLlxuICAgICAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihwcmltaXRpdmUgLyppbnQqLywgc2l6ZSAvKmludCovLCBnZW5lcmF0b3JCYXNlIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLnByaW1pdGl2ZSA9IHByaW1pdGl2ZTtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRvckJhc2UgPSBnZW5lcmF0b3JCYXNlO1xuICAgICAgICAgICAgY29uc3QgZXhwVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTtcbiAgICAgICAgICAgIGxldCB4ID0gMTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXhwVGFibGVbaV0gPSB4O1xuICAgICAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyXG4gICAgICAgICAgICAgICAgaWYgKHggPj0gc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB4IF49IHByaW1pdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4cFRhYmxlID0gZXhwVGFibGU7XG4gICAgICAgICAgICBjb25zdCBsb2dUYWJsZSA9IG5ldyBJbnQzMkFycmF5KHNpemUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbG9nVGFibGVbZXhwVGFibGVbaV1dID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9nVGFibGUgPSBsb2dUYWJsZTtcbiAgICAgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWRcbiAgICAgICAgICAgIHRoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5KHRoaXMsIEludDMyQXJyYXkuZnJvbShbMF0pKTtcbiAgICAgICAgICAgIHRoaXMub25lID0gbmV3IEdlbmVyaWNHRlBvbHkodGhpcywgSW50MzJBcnJheS5mcm9tKFsxXSkpO1xuICAgICAgICB9XG4gICAgICAgIGdldFplcm8oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvO1xuICAgICAgICB9XG4gICAgICAgIGdldE9uZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0aGUgbW9ub21pYWwgcmVwcmVzZW50aW5nIGNvZWZmaWNpZW50ICogeF5kZWdyZWVcbiAgICAgICAgICovXG4gICAgICAgIGJ1aWxkTW9ub21pYWwoZGVncmVlIC8qaW50Ki8sIGNvZWZmaWNpZW50IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuemVybztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGRlZ3JlZSArIDEpO1xuICAgICAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNHRlBvbHkodGhpcywgY29lZmZpY2llbnRzKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGFcbiAgICAgICAgICovXG4gICAgICAgIGludmVyc2UoYSAvKmludCovKSB7XG4gICAgICAgICAgICBpZiAoYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcml0aG1ldGljRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gcHJvZHVjdCBvZiBhIGFuZCBiIGluIEdGKHNpemUpXG4gICAgICAgICAqL1xuICAgICAgICBtdWx0aXBseShhIC8qaW50Ki8sIGIgLyppbnQqLykge1xuICAgICAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0R2VuZXJhdG9yQmFzZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiAoJ0dGKDB4JyArIEludGVnZXIudG9IZXhTdHJpbmcodGhpcy5wcmltaXRpdmUpICsgJywnICsgdGhpcy5zaXplICsgJyknKTtcbiAgICAgICAgfVxuICAgICAgICBlcXVhbHMobykge1xuICAgICAgICAgICAgcmV0dXJuIG8gPT09IHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfMTIgPSBuZXcgR2VuZXJpY0dGKDB4MTA2OSwgNDA5NiwgMSk7IC8vIHheMTIgKyB4XjYgKyB4XjUgKyB4XjMgKyAxXG4gICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfMTAgPSBuZXcgR2VuZXJpY0dGKDB4NDA5LCAxMDI0LCAxKTsgLy8geF4xMCArIHheMyArIDFcbiAgICBHZW5lcmljR0YuQVpURUNfREFUQV82ID0gbmV3IEdlbmVyaWNHRigweDQzLCA2NCwgMSk7IC8vIHheNiArIHggKyAxXG4gICAgR2VuZXJpY0dGLkFaVEVDX1BBUkFNID0gbmV3IEdlbmVyaWNHRigweDEzLCAxNiwgMSk7IC8vIHheNCArIHggKyAxXG4gICAgR2VuZXJpY0dGLlFSX0NPREVfRklFTERfMjU2ID0gbmV3IEdlbmVyaWNHRigweDAxMWQsIDI1NiwgMCk7IC8vIHheOCArIHheNCArIHheMyArIHheMiArIDFcbiAgICBHZW5lcmljR0YuREFUQV9NQVRSSVhfRklFTERfMjU2ID0gbmV3IEdlbmVyaWNHRigweDAxMmQsIDI1NiwgMSk7IC8vIHheOCArIHheNSArIHheMyArIHheMiArIDFcbiAgICBHZW5lcmljR0YuQVpURUNfREFUQV84ID0gR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NjtcbiAgICBHZW5lcmljR0YuTUFYSUNPREVfRklFTERfNjQgPSBHZW5lcmljR0YuQVpURUNfREFUQV82O1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICB9XG4gICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uXG4gICAgICovXG4gICAgY2xhc3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICB9XG4gICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJztcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+SW1wbGVtZW50cyBSZWVkLVNvbG9tb24gZGVjb2RpbmcsIGFzIHRoZSBuYW1lIGltcGxpZXMuPC9wPlxuICAgICAqXG4gICAgICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWxcbiAgICAgKiBpbiBjcmVhdGluZyB0aGlzIGltcGxlbWVudGF0aW9uOjwvcD5cbiAgICAgKlxuICAgICAqIDx1bD5cbiAgICAgKiA8bGk+QnJ1Y2UgTWFnZ3MuXG4gICAgICogPGEgaHJlZj1cImh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzXCI+XG4gICAgICogXCJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXNcIjwvYT4gKHNlZSBkaXNjdXNzaW9uIG9mIEZvcm5leSdzIEZvcm11bGEpPC9saT5cbiAgICAgKiA8bGk+Si5JLiBIYWxsLiA8YSBocmVmPVwid3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmXCI+XG4gICAgICogXCJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2Rlc1wiPC9hPlxuICAgICAqIChzZWUgZGlzY3Vzc2lvbiBvZiBFdWNsaWRlYW4gYWxnb3JpdGhtKTwvbGk+XG4gICAgICogPC91bD5cbiAgICAgKlxuICAgICAqIDxwPk11Y2ggY3JlZGl0IGlzIGR1ZSB0byBXaWxsaWFtIFJ1Y2tsaWRnZSBzaW5jZSBwb3J0aW9ucyBvZiB0aGlzIGNvZGUgYXJlIGFuIGluZGlyZWN0XG4gICAgICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2VcbiAgICAgKiBAYXV0aG9yIHNhbmZvcmRzcXVpcmVzXG4gICAgICovXG4gICAgY2xhc3MgUmVlZFNvbG9tb25EZWNvZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+RGVjb2RlcyBnaXZlbiBzZXQgb2YgcmVjZWl2ZWQgY29kZXdvcmRzLCB3aGljaCBpbmNsdWRlIGJvdGggZGF0YSBhbmQgZXJyb3ItY29ycmVjdGlvblxuICAgICAgICAgKiBjb2Rld29yZHMuIFJlYWxseSwgdGhpcyBtZWFucyBpdCB1c2VzIFJlZWQtU29sb21vbiB0byBkZXRlY3QgYW5kIGNvcnJlY3QgZXJyb3JzLCBpbi1wbGFjZSxcbiAgICAgICAgICogaW4gdGhlIGlucHV0LjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJlY2VpdmVkIGRhdGEgYW5kIGVycm9yLWNvcnJlY3Rpb24gY29kZXdvcmRzXG4gICAgICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGVcbiAgICAgICAgICogQHRocm93cyBSZWVkU29sb21vbkV4Y2VwdGlvbiBpZiBkZWNvZGluZyBmYWlscyBmb3IgYW55IHJlYXNvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlKHJlY2VpdmVkLCB0d29TIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5maWVsZDtcbiAgICAgICAgICAgIGNvbnN0IHBvbHkgPSBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcmVjZWl2ZWQpO1xuICAgICAgICAgICAgY29uc3Qgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTtcbiAgICAgICAgICAgIGxldCBub0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHdvUzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZhbFJlc3VsdCA9IHBvbHkuZXZhbHVhdGVBdChmaWVsZC5leHAoaSArIGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSkpO1xuICAgICAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKGV2YWxSZXN1bHQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbm9FcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3luZHJvbWUgPSBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpO1xuICAgICAgICAgICAgY29uc3Qgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTtcbiAgICAgICAgICAgIGNvbnN0IHNpZ21hID0gc2lnbWFPbWVnYVswXTtcbiAgICAgICAgICAgIGNvbnN0IG9tZWdhID0gc2lnbWFPbWVnYVsxXTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yTG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSByZWNlaXZlZC5sZW5ndGggLSAxIC0gZmllbGQubG9nKGVycm9yTG9jYXRpb25zW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbignQmFkIGVycm9yIGxvY2F0aW9uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlY2VpdmVkW3Bvc2l0aW9uXSA9IEdlbmVyaWNHRi5hZGRPclN1YnRyYWN0KHJlY2VpdmVkW3Bvc2l0aW9uXSwgZXJyb3JNYWduaXR1ZGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBydW5FdWNsaWRlYW5BbGdvcml0aG0oYSwgYiwgUiAvKmludCovKSB7XG4gICAgICAgICAgICAvLyBBc3N1bWUgYSdzIGRlZ3JlZSBpcyA+PSBiJ3NcbiAgICAgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhO1xuICAgICAgICAgICAgICAgIGEgPSBiO1xuICAgICAgICAgICAgICAgIGIgPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgbGV0IHJMYXN0ID0gYTtcbiAgICAgICAgICAgIGxldCByID0gYjtcbiAgICAgICAgICAgIGxldCB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTtcbiAgICAgICAgICAgIGxldCB0ID0gZmllbGQuZ2V0T25lKCk7XG4gICAgICAgICAgICAvLyBSdW4gRXVjbGlkZWFuIGFsZ29yaXRobSB1bnRpbCByJ3MgZGVncmVlIGlzIGxlc3MgdGhhbiBSLzJcbiAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJMYXN0TGFzdCA9IHJMYXN0O1xuICAgICAgICAgICAgICAgIGxldCB0TGFzdExhc3QgPSB0TGFzdDtcbiAgICAgICAgICAgICAgICByTGFzdCA9IHI7XG4gICAgICAgICAgICAgICAgdExhc3QgPSB0O1xuICAgICAgICAgICAgICAgIC8vIERpdmlkZSByTGFzdExhc3QgYnkgckxhc3QsIHdpdGggcXVvdGllbnQgaW4gcSBhbmQgcmVtYWluZGVyIGluIHJcbiAgICAgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT29wcywgRXVjbGlkZWFuIGFsZ29yaXRobSBhbHJlYWR5IHRlcm1pbmF0ZWQ/XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbigncl97aS0xfSB3YXMgemVybycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByID0gckxhc3RMYXN0O1xuICAgICAgICAgICAgICAgIGxldCBxID0gZmllbGQuZ2V0WmVybygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSByTGFzdC5nZXRDb2VmZmljaWVudChyTGFzdC5nZXREZWdyZWUoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGx0SW52ZXJzZSA9IGZpZWxkLmludmVyc2UoZGVub21pbmF0b3JMZWFkaW5nVGVybSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHIuZ2V0RGVncmVlKCkgPj0gckxhc3QuZ2V0RGVncmVlKCkgJiYgIXIuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVncmVlRGlmZiA9IHIuZ2V0RGVncmVlKCkgLSByTGFzdC5nZXREZWdyZWUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyLmdldENvZWZmaWNpZW50KHIuZ2V0RGVncmVlKCkpLCBkbHRJbnZlcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIHIgPSByLmFkZE9yU3VidHJhY3Qockxhc3QubXVsdGlwbHlCeU1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7XG4gICAgICAgICAgICAgICAgaWYgKHIuZ2V0RGVncmVlKCkgPj0gckxhc3QuZ2V0RGVncmVlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGl2aXNpb24gYWxnb3JpdGhtIGZhaWxlZCB0byByZWR1Y2UgcG9seW5vbWlhbD8nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTtcbiAgICAgICAgICAgIGlmIChzaWdtYVRpbGRlQXRaZXJvID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uKCdzaWdtYVRpbGRlKDApIHdhcyB6ZXJvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnZlcnNlID0gZmllbGQuaW52ZXJzZShzaWdtYVRpbGRlQXRaZXJvKTtcbiAgICAgICAgICAgIGNvbnN0IHNpZ21hID0gdC5tdWx0aXBseVNjYWxhcihpbnZlcnNlKTtcbiAgICAgICAgICAgIGNvbnN0IG9tZWdhID0gci5tdWx0aXBseVNjYWxhcihpbnZlcnNlKTtcbiAgICAgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTtcbiAgICAgICAgfVxuICAgICAgICBmaW5kRXJyb3JMb2NhdGlvbnMoZXJyb3JMb2NhdG9yKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoXG4gICAgICAgICAgICBjb25zdCBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7XG4gICAgICAgICAgICBpZiAobnVtRXJyb3JzID09PSAxKSB7IC8vIHNob3J0Y3V0XG4gICAgICAgICAgICAgICAgcmV0dXJuIEludDMyQXJyYXkuZnJvbShbZXJyb3JMb2NhdG9yLmdldENvZWZmaWNpZW50KDEpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpO1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBmaWVsZC5nZXRTaXplKCkgJiYgZSA8IG51bUVycm9yczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtlXSA9IGZpZWxkLmludmVyc2UoaSk7XG4gICAgICAgICAgICAgICAgICAgIGUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZSAhPT0gbnVtRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uKCdFcnJvciBsb2NhdG9yIGRlZ3JlZSBkb2VzIG5vdCBtYXRjaCBudW1iZXIgb2Ygcm9vdHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZmluZEVycm9yTWFnbml0dWRlcyhlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgZGlyZWN0bHkgYXBwbHlpbmcgRm9ybmV5J3MgRm9ybXVsYVxuICAgICAgICAgICAgY29uc3QgcyA9IGVycm9yTG9jYXRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBJbnQzMkFycmF5KHMpO1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB4aUludmVyc2UgPSBmaWVsZC5pbnZlcnNlKGVycm9yTG9jYXRpb25zW2ldKTtcbiAgICAgICAgICAgICAgICBsZXQgZGVub21pbmF0b3IgPSAxO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgczsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgR2VuZXJpY0dGLmFkZE9yU3VidHJhY3QoMSwgZmllbGQubXVsdGlwbHkoZXJyb3JMb2NhdGlvbnNbal0sIHhpSW52ZXJzZSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWJvdmUgc2hvdWxkIHdvcmsgYnV0IGZhaWxzIG9uIHNvbWUgQXBwbGUgYW5kIExpbnV4IEpES3MgZHVlIHRvIGEgSG90c3BvdCBidWcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVub21pbmF0b3IgPSBmaWVsZC5tdWx0aXBseShkZW5vbWluYXRvciwgdGVybVBsdXMxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBmaWVsZC5tdWx0aXBseShlcnJvckV2YWx1YXRvci5ldmFsdWF0ZUF0KHhpSW52ZXJzZSksIGZpZWxkLmludmVyc2UoZGVub21pbmF0b3IpKTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZ2V0R2VuZXJhdG9yQmFzZSgpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMCBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkFycmF5cztcbiAgICB2YXIgVGFibGU7XG4gICAgKGZ1bmN0aW9uIChUYWJsZSkge1xuICAgICAgICBUYWJsZVtUYWJsZVtcIlVQUEVSXCJdID0gMF0gPSBcIlVQUEVSXCI7XG4gICAgICAgIFRhYmxlW1RhYmxlW1wiTE9XRVJcIl0gPSAxXSA9IFwiTE9XRVJcIjtcbiAgICAgICAgVGFibGVbVGFibGVbXCJNSVhFRFwiXSA9IDJdID0gXCJNSVhFRFwiO1xuICAgICAgICBUYWJsZVtUYWJsZVtcIkRJR0lUXCJdID0gM10gPSBcIkRJR0lUXCI7XG4gICAgICAgIFRhYmxlW1RhYmxlW1wiUFVOQ1RcIl0gPSA0XSA9IFwiUFVOQ1RcIjtcbiAgICAgICAgVGFibGVbVGFibGVbXCJCSU5BUllcIl0gPSA1XSA9IFwiQklOQVJZXCI7XG4gICAgfSkoVGFibGUgfHwgKFRhYmxlID0ge30pKTtcbiAgICAvKipcbiAgICAgKiA8cD5UaGUgbWFpbiBjbGFzcyB3aGljaCBpbXBsZW1lbnRzIEF6dGVjIENvZGUgZGVjb2RpbmcgLS0gYXMgb3Bwb3NlZCB0byBsb2NhdGluZyBhbmQgZXh0cmFjdGluZ1xuICAgICAqIHRoZSBBenRlYyBDb2RlIGZyb20gYW4gaW1hZ2UuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBEYXZpZCBPbGl2aWVyXG4gICAgICovXG4gICAgY2xhc3MgRGVjb2RlciB7XG4gICAgICAgIGRlY29kZShkZXRlY3RvclJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5kZGF0YSA9IGRldGVjdG9yUmVzdWx0O1xuICAgICAgICAgICAgbGV0IG1hdHJpeCA9IGRldGVjdG9yUmVzdWx0LmdldEJpdHMoKTtcbiAgICAgICAgICAgIGxldCByYXdiaXRzID0gdGhpcy5leHRyYWN0Qml0cyhtYXRyaXgpO1xuICAgICAgICAgICAgbGV0IGNvcnJlY3RlZEJpdHMgPSB0aGlzLmNvcnJlY3RCaXRzKHJhd2JpdHMpO1xuICAgICAgICAgICAgbGV0IHJhd0J5dGVzID0gRGVjb2Rlci5jb252ZXJ0Qm9vbEFycmF5VG9CeXRlQXJyYXkoY29ycmVjdGVkQml0cyk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gRGVjb2Rlci5nZXRFbmNvZGVkRGF0YShjb3JyZWN0ZWRCaXRzKTtcbiAgICAgICAgICAgIGxldCBkZWNvZGVyUmVzdWx0ID0gbmV3IERlY29kZXJSZXN1bHQocmF3Qnl0ZXMsIHJlc3VsdCwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICBkZWNvZGVyUmVzdWx0LnNldE51bUJpdHMoY29ycmVjdGVkQml0cy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGRlY29kZXJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBtZXRob2QgaXMgdXNlZCBmb3IgdGVzdGluZyB0aGUgaGlnaC1sZXZlbCBlbmNvZGVyXG4gICAgICAgIHN0YXRpYyBoaWdoTGV2ZWxEZWNvZGUoY29ycmVjdGVkQml0cykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RW5jb2RlZERhdGEoY29ycmVjdGVkQml0cyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIHN0cmluZyBlbmNvZGVkIGluIHRoZSBhenRlYyBjb2RlIGJpdHNcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB0aGUgZGVjb2RlZCBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBnZXRFbmNvZGVkRGF0YShjb3JyZWN0ZWRCaXRzKSB7XG4gICAgICAgICAgICBsZXQgZW5kSW5kZXggPSBjb3JyZWN0ZWRCaXRzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsYXRjaFRhYmxlID0gVGFibGUuVVBQRVI7IC8vIHRhYmxlIG1vc3QgcmVjZW50bHkgbGF0Y2hlZCB0b1xuICAgICAgICAgICAgbGV0IHNoaWZ0VGFibGUgPSBUYWJsZS5VUFBFUjsgLy8gdGFibGUgdG8gdXNlIGZvciB0aGUgbmV4dCByZWFkXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hpZnRUYWJsZSA9PT0gVGFibGUuQklOQVJZKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmRJbmRleCAtIGluZGV4IDwgNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IERlY29kZXIucmVhZENvZGUoY29ycmVjdGVkQml0cywgaW5kZXgsIDUpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSA1O1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kSW5kZXggLSBpbmRleCA8IDExKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBEZWNvZGVyLnJlYWRDb2RlKGNvcnJlY3RlZEJpdHMsIGluZGV4LCAxMSkgKyAzMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDExO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoYXJDb3VudCA9IDA7IGNoYXJDb3VudCA8IGxlbmd0aDsgY2hhckNvdW50KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRJbmRleCAtIGluZGV4IDwgOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXg7IC8vIEZvcmNlIG91dGVyIGxvb3AgdG8gZXhpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IERlY29kZXIucmVhZENvZGUoY29ycmVjdGVkQml0cywgaW5kZXgsIDgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IC8qKGNoYXIpKi8gU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCArPSA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEdvIGJhY2sgdG8gd2hhdGV2ZXIgbW9kZSB3ZSBoYWQgYmVlbiBpblxuICAgICAgICAgICAgICAgICAgICBzaGlmdFRhYmxlID0gbGF0Y2hUYWJsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplID0gc2hpZnRUYWJsZSA9PT0gVGFibGUuRElHSVQgPyA0IDogNTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4IC0gaW5kZXggPCBzaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29kZSA9IERlY29kZXIucmVhZENvZGUoY29ycmVjdGVkQml0cywgaW5kZXgsIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSBzaXplO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RyID0gRGVjb2Rlci5nZXRDaGFyYWN0ZXIoc2hpZnRUYWJsZSwgY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHIuc3RhcnRzV2l0aCgnQ1RSTF8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGFibGUgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSVNPL0lFQyAyNDc3ODoyMDA4IHByZXNjcmliZXMgZW5kaW5nIGEgc2hpZnQgc2VxdWVuY2UgaW4gdGhlIG1vZGUgZnJvbSB3aGljaCBpdCB3YXMgaW52b2tlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoYXQncyBpbmNsdWRpbmcgd2hlbiB0aGF0IG1vZGUgaXMgYSBzaGlmdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE91ciB0ZXN0IGNhc2UgZGx1c2JzLnBuZyBmb3IgaXNzdWUgIzY0MiBleGVyY2lzZXMgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGNoVGFibGUgPSBzaGlmdFRhYmxlOyAvLyBMYXRjaCB0aGUgY3VycmVudCBtb2RlLCBzbyBhcyB0byByZXR1cm4gdG8gVXBwZXIgYWZ0ZXIgVS9TIEIvU1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnRUYWJsZSA9IERlY29kZXIuZ2V0VGFibGUoc3RyLmNoYXJBdCg1KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyLmNoYXJBdCg2KSA9PT0gJ0wnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0Y2hUYWJsZSA9IHNoaWZ0VGFibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR28gYmFjayB0byB3aGF0ZXZlciBtb2RlIHdlIGhhZCBiZWVuIGluXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlmdFRhYmxlID0gbGF0Y2hUYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGdldHMgdGhlIHRhYmxlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGNoYXIgcGFzc2VkXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0VGFibGUodCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUYWJsZS5MT1dFUjtcbiAgICAgICAgICAgICAgICBjYXNlICdQJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRhYmxlLlBVTkNUO1xuICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFibGUuTUlYRUQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUYWJsZS5ESUdJVDtcbiAgICAgICAgICAgICAgICBjYXNlICdCJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRhYmxlLkJJTkFSWTtcbiAgICAgICAgICAgICAgICBjYXNlICdVJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGFibGUuVVBQRVI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGNoYXJhY3RlciAob3Igc3RyaW5nKSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwYXNzZWQgY29kZSBpbiB0aGUgZ2l2ZW4gdGFibGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHRhYmxlIHRoZSB0YWJsZSB1c2VkXG4gICAgICAgICAqIEBwYXJhbSBjb2RlIHRoZSBjb2RlIG9mIHRoZSBjaGFyYWN0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBnZXRDaGFyYWN0ZXIodGFibGUsIGNvZGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGFibGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFRhYmxlLlVQUEVSOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5VUFBFUl9UQUJMRVtjb2RlXTtcbiAgICAgICAgICAgICAgICBjYXNlIFRhYmxlLkxPV0VSOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5MT1dFUl9UQUJMRVtjb2RlXTtcbiAgICAgICAgICAgICAgICBjYXNlIFRhYmxlLk1JWEVEOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5NSVhFRF9UQUJMRVtjb2RlXTtcbiAgICAgICAgICAgICAgICBjYXNlIFRhYmxlLlBVTkNUOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5QVU5DVF9UQUJMRVtjb2RlXTtcbiAgICAgICAgICAgICAgICBjYXNlIFRhYmxlLkRJR0lUOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5ESUdJVF9UQUJMRVtjb2RlXTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAvLyBTaG91bGQgbm90IHJlYWNoIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0JhZCB0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5QZXJmb3JtcyBSUyBlcnJvciBjb3JyZWN0aW9uIG9uIGFuIGFycmF5IG9mIGJpdHMuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBjb3JyZWN0ZWQgYXJyYXlcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIGlucHV0IGNvbnRhaW5zIHRvbyBtYW55IGVycm9yc1xuICAgICAgICAgKi9cbiAgICAgICAgY29ycmVjdEJpdHMocmF3Yml0cykge1xuICAgICAgICAgICAgbGV0IGdmO1xuICAgICAgICAgICAgbGV0IGNvZGV3b3JkU2l6ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRkYXRhLmdldE5iTGF5ZXJzKCkgPD0gMikge1xuICAgICAgICAgICAgICAgIGNvZGV3b3JkU2l6ZSA9IDY7XG4gICAgICAgICAgICAgICAgZ2YgPSBHZW5lcmljR0YuQVpURUNfREFUQV82O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kZGF0YS5nZXROYkxheWVycygpIDw9IDgpIHtcbiAgICAgICAgICAgICAgICBjb2Rld29yZFNpemUgPSA4O1xuICAgICAgICAgICAgICAgIGdmID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGRhdGEuZ2V0TmJMYXllcnMoKSA8PSAyMikge1xuICAgICAgICAgICAgICAgIGNvZGV3b3JkU2l6ZSA9IDEwO1xuICAgICAgICAgICAgICAgIGdmID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2Rld29yZFNpemUgPSAxMjtcbiAgICAgICAgICAgICAgICBnZiA9IEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG51bURhdGFDb2Rld29yZHMgPSB0aGlzLmRkYXRhLmdldE5iRGF0YWJsb2NrcygpO1xuICAgICAgICAgICAgbGV0IG51bUNvZGV3b3JkcyA9IHJhd2JpdHMubGVuZ3RoIC8gY29kZXdvcmRTaXplO1xuICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA8IG51bURhdGFDb2Rld29yZHMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gcmF3Yml0cy5sZW5ndGggJSBjb2Rld29yZFNpemU7XG4gICAgICAgICAgICBsZXQgZGF0YVdvcmRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29kZXdvcmRzOyBpKyssIG9mZnNldCArPSBjb2Rld29yZFNpemUpIHtcbiAgICAgICAgICAgICAgICBkYXRhV29yZHNbaV0gPSBEZWNvZGVyLnJlYWRDb2RlKHJhd2JpdHMsIG9mZnNldCwgY29kZXdvcmRTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IHJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXIoZ2YpO1xuICAgICAgICAgICAgICAgIHJzRGVjb2Rlci5kZWNvZGUoZGF0YVdvcmRzLCBudW1Db2Rld29yZHMgLSBudW1EYXRhQ29kZXdvcmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93IHBlcmZvcm0gdGhlIHVuc3R1ZmZpbmcgb3BlcmF0aW9uLlxuICAgICAgICAgICAgLy8gRmlyc3QsIGNvdW50IGhvdyBtYW55IGJpdHMgYXJlIGdvaW5nIHRvIGJlIHRocm93biBvdXQgYXMgc3R1ZmZpbmdcbiAgICAgICAgICAgIGxldCBtYXNrID0gKDEgPDwgY29kZXdvcmRTaXplKSAtIDE7XG4gICAgICAgICAgICBsZXQgc3R1ZmZlZEJpdHMgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVdvcmQgPSBkYXRhV29yZHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFXb3JkID09PSAwIHx8IGRhdGFXb3JkID09PSBtYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVdvcmQgPT09IDEgfHwgZGF0YVdvcmQgPT09IG1hc2sgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0dWZmZWRCaXRzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93LCBhY3R1YWxseSB1bnBhY2sgdGhlIGJpdHMgYW5kIHJlbW92ZSB0aGUgc3R1ZmZpbmdcbiAgICAgICAgICAgIGxldCBjb3JyZWN0ZWRCaXRzID0gbmV3IEFycmF5KG51bURhdGFDb2Rld29yZHMgKiBjb2Rld29yZFNpemUgLSBzdHVmZmVkQml0cyk7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVdvcmQgPSBkYXRhV29yZHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFXb3JkID09PSAxIHx8IGRhdGFXb3JkID09PSBtYXNrIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGNvZGV3b3JkU2l6ZS0xIGJpdHMgYXJlIGFsbCB6ZXJvcyBvciBhbGwgb25lc1xuICAgICAgICAgICAgICAgICAgICBjb3JyZWN0ZWRCaXRzLmZpbGwoZGF0YVdvcmQgPiAxLCBpbmRleCwgaW5kZXggKyBjb2Rld29yZFNpemUgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXlzLmZpbGwoY29ycmVjdGVkQml0cywgaW5kZXgsIGluZGV4ICsgY29kZXdvcmRTaXplIC0gMSwgZGF0YVdvcmQgPiAxKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gY29kZXdvcmRTaXplIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJpdCA9IGNvZGV3b3JkU2l6ZSAtIDE7IGJpdCA+PSAwOyAtLWJpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGVkQml0c1tpbmRleCsrXSA9IChkYXRhV29yZCAmICgxIDw8IGJpdCkpICE9PSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvcnJlY3RlZEJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGFycmF5IG9mIGJpdHMgZnJvbSBhbiBBenRlYyBDb2RlIG1hdHJpeFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBhcnJheSBvZiBiaXRzXG4gICAgICAgICAqL1xuICAgICAgICBleHRyYWN0Qml0cyhtYXRyaXgpIHtcbiAgICAgICAgICAgIGxldCBjb21wYWN0ID0gdGhpcy5kZGF0YS5pc0NvbXBhY3QoKTtcbiAgICAgICAgICAgIGxldCBsYXllcnMgPSB0aGlzLmRkYXRhLmdldE5iTGF5ZXJzKCk7XG4gICAgICAgICAgICBsZXQgYmFzZU1hdHJpeFNpemUgPSAoY29tcGFjdCA/IDExIDogMTQpICsgbGF5ZXJzICogNDsgLy8gbm90IGluY2x1ZGluZyBhbGlnbm1lbnQgbGluZXNcbiAgICAgICAgICAgIGxldCBhbGlnbm1lbnRNYXAgPSBuZXcgSW50MzJBcnJheShiYXNlTWF0cml4U2l6ZSk7XG4gICAgICAgICAgICBsZXQgcmF3Yml0cyA9IG5ldyBBcnJheSh0aGlzLnRvdGFsQml0c0luTGF5ZXIobGF5ZXJzLCBjb21wYWN0KSk7XG4gICAgICAgICAgICBpZiAoY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxpZ25tZW50TWFwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudE1hcFtpXSA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdHJpeFNpemUgPSBiYXNlTWF0cml4U2l6ZSArIDEgKyAyICogSW50ZWdlci50cnVuY0RpdmlzaW9uKChJbnRlZ2VyLnRydW5jRGl2aXNpb24oYmFzZU1hdHJpeFNpemUsIDIpIC0gMSksIDE1KTtcbiAgICAgICAgICAgICAgICBsZXQgb3JpZ0NlbnRlciA9IGJhc2VNYXRyaXhTaXplIC8gMjtcbiAgICAgICAgICAgICAgICBsZXQgY2VudGVyID0gSW50ZWdlci50cnVuY0RpdmlzaW9uKG1hdHJpeFNpemUsIDIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JpZ0NlbnRlcjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdPZmZzZXQgPSBpICsgSW50ZWdlci50cnVuY0RpdmlzaW9uKGksIDE1KTtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50TWFwW29yaWdDZW50ZXIgLSBpIC0gMV0gPSBjZW50ZXIgLSBuZXdPZmZzZXQgLSAxO1xuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnRNYXBbb3JpZ0NlbnRlciArIGldID0gY2VudGVyICsgbmV3T2Zmc2V0ICsgMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcm93T2Zmc2V0ID0gMDsgaSA8IGxheWVyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJvd1NpemUgPSAobGF5ZXJzIC0gaSkgKiA0ICsgKGNvbXBhY3QgPyA5IDogMTIpO1xuICAgICAgICAgICAgICAgIC8vIFRoZSB0b3AtbGVmdCBtb3N0IHBvaW50IG9mIHRoaXMgbGF5ZXIgaXMgPGxvdywgbG93PiAobm90IGluY2x1ZGluZyBhbGlnbm1lbnQgbGluZXMpXG4gICAgICAgICAgICAgICAgbGV0IGxvdyA9IGkgKiAyO1xuICAgICAgICAgICAgICAgIC8vIFRoZSBib3R0b20tcmlnaHQgbW9zdCBwb2ludCBvZiB0aGlzIGxheWVyIGlzIDxoaWdoLCBoaWdoPiAobm90IGluY2x1ZGluZyBhbGlnbm1lbnQgbGluZXMpXG4gICAgICAgICAgICAgICAgbGV0IGhpZ2ggPSBiYXNlTWF0cml4U2l6ZSAtIDEgLSBsb3c7XG4gICAgICAgICAgICAgICAgLy8gV2UgcHVsbCBiaXRzIGZyb20gdGhlIHR3byAyIHggcm93U2l6ZSBjb2x1bW5zIGFuZCB0d28gcm93U2l6ZSB4IDIgcm93c1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93U2l6ZTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW5PZmZzZXQgPSBqICogMjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAyOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlZnQgY29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdiaXRzW3Jvd09mZnNldCArIGNvbHVtbk9mZnNldCArIGtdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguZ2V0KGFsaWdubWVudE1hcFtsb3cgKyBrXSwgYWxpZ25tZW50TWFwW2xvdyArIGpdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJvdHRvbSByb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd2JpdHNbcm93T2Zmc2V0ICsgMiAqIHJvd1NpemUgKyBjb2x1bW5PZmZzZXQgKyBrXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LmdldChhbGlnbm1lbnRNYXBbbG93ICsgal0sIGFsaWdubWVudE1hcFtoaWdoIC0ga10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmlnaHQgY29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdiaXRzW3Jvd09mZnNldCArIDQgKiByb3dTaXplICsgY29sdW1uT2Zmc2V0ICsga10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5nZXQoYWxpZ25tZW50TWFwW2hpZ2ggLSBrXSwgYWxpZ25tZW50TWFwW2hpZ2ggLSBqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3Agcm93XG4gICAgICAgICAgICAgICAgICAgICAgICByYXdiaXRzW3Jvd09mZnNldCArIDYgKiByb3dTaXplICsgY29sdW1uT2Zmc2V0ICsga10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5nZXQoYWxpZ25tZW50TWFwW2hpZ2ggLSBqXSwgYWxpZ25tZW50TWFwW2xvdyArIGtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb3dPZmZzZXQgKz0gcm93U2l6ZSAqIDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmF3Yml0cztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmVhZHMgYSBjb2RlIG9mIGdpdmVuIGxlbmd0aCBhbmQgYXQgZ2l2ZW4gaW5kZXggaW4gYW4gYXJyYXkgb2YgYml0c1xuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIHJlYWRDb2RlKHJhd2JpdHMsIHN0YXJ0SW5kZXgsIGxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHJlcyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IHN0YXJ0SW5kZXggKyBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlcyA8PD0gMTtcbiAgICAgICAgICAgICAgICBpZiAocmF3Yml0c1tpXSkge1xuICAgICAgICAgICAgICAgICAgICByZXMgfD0gMHgwMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWFkcyBhIGNvZGUgb2YgbGVuZ3RoIDggaW4gYW4gYXJyYXkgb2YgYml0cywgcGFkZGluZyB3aXRoIHplcm9zXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcmVhZEJ5dGUocmF3Yml0cywgc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgbGV0IG4gPSByYXdiaXRzLmxlbmd0aCAtIHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICBpZiAobiA+PSA4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERlY29kZXIucmVhZENvZGUocmF3Yml0cywgc3RhcnRJbmRleCwgOCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRGVjb2Rlci5yZWFkQ29kZShyYXdiaXRzLCBzdGFydEluZGV4LCBuKSA8PCAoOCAtIG4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYWNrcyBhIGJpdCBhcnJheSBpbnRvIGJ5dGVzLCBtb3N0IHNpZ25pZmljYW50IGJpdCBmaXJzdFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNvbnZlcnRCb29sQXJyYXlUb0J5dGVBcnJheShib29sQXJyKSB7XG4gICAgICAgICAgICBsZXQgYnl0ZUFyciA9IG5ldyBVaW50OEFycmF5KChib29sQXJyLmxlbmd0aCArIDcpIC8gOCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBieXRlQXJyW2ldID0gRGVjb2Rlci5yZWFkQnl0ZShib29sQXJyLCA4ICogaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnl0ZUFycjtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbEJpdHNJbkxheWVyKGxheWVycywgY29tcGFjdCkge1xuICAgICAgICAgICAgcmV0dXJuICgoY29tcGFjdCA/IDg4IDogMTEyKSArIDE2ICogbGF5ZXJzKSAqIGxheWVycztcbiAgICAgICAgfVxuICAgIH1cbiAgICBEZWNvZGVyLlVQUEVSX1RBQkxFID0gW1xuICAgICAgICAnQ1RSTF9QUycsICcgJywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLFxuICAgICAgICAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWicsICdDVFJMX0xMJywgJ0NUUkxfTUwnLCAnQ1RSTF9ETCcsICdDVFJMX0JTJ1xuICAgIF07XG4gICAgRGVjb2Rlci5MT1dFUl9UQUJMRSA9IFtcbiAgICAgICAgJ0NUUkxfUFMnLCAnICcsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywgJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJyxcbiAgICAgICAgJ3EnLCAncicsICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnQ1RSTF9VUycsICdDVFJMX01MJywgJ0NUUkxfREwnLCAnQ1RSTF9CUydcbiAgICBdO1xuICAgIERlY29kZXIuTUlYRURfVEFCTEUgPSBbXG4gICAgICAgIC8vIE1vZHVsZSBwYXJzZSBmYWlsZWQ6IE9jdGFsIGxpdGVyYWwgaW4gc3RyaWN0IG1vZGUgKDUwOjI5KVxuICAgICAgICAvLyBzbyBudW1iZXIgc3RyaW5nIHdlcmUgc2NhcGVkXG4gICAgICAgICdDVFJMX1BTJywgJyAnLCAnXFxcXDEnLCAnXFxcXDInLCAnXFxcXDMnLCAnXFxcXDQnLCAnXFxcXDUnLCAnXFxcXDYnLCAnXFxcXDcnLCAnXFxiJywgJ1xcdCcsICdcXG4nLFxuICAgICAgICAnXFxcXDEzJywgJ1xcZicsICdcXHInLCAnXFxcXDMzJywgJ1xcXFwzNCcsICdcXFxcMzUnLCAnXFxcXDM2JywgJ1xcXFwzNycsICdAJywgJ1xcXFwnLCAnXicsICdfJyxcbiAgICAgICAgJ2AnLCAnfCcsICd+JywgJ1xcXFwxNzcnLCAnQ1RSTF9MTCcsICdDVFJMX1VMJywgJ0NUUkxfUEwnLCAnQ1RSTF9CUydcbiAgICBdO1xuICAgIERlY29kZXIuUFVOQ1RfVEFCTEUgPSBbXG4gICAgICAgICcnLCAnXFxyJywgJ1xcclxcbicsICcuICcsICcsICcsICc6ICcsICchJywgJ1wiJywgJyMnLCAnJCcsICclJywgJyYnLCAnXFwnJywgJygnLCAnKScsXG4gICAgICAgICcqJywgJysnLCAnLCcsICctJywgJy4nLCAnLycsICc6JywgJzsnLCAnPCcsICc9JywgJz4nLCAnPycsICdbJywgJ10nLCAneycsICd9JywgJ0NUUkxfVUwnXG4gICAgXTtcbiAgICBEZWNvZGVyLkRJR0lUX1RBQkxFID0gW1xuICAgICAgICAnQ1RSTF9QUycsICcgJywgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnLCcsICcuJywgJ0NUUkxfVUwnLCAnQ1RSTF9VUydcbiAgICBdO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMiBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki9cbiAgICAvKipcbiAgICAgKiBHZW5lcmFsIG1hdGgtcmVsYXRlZCBhbmQgbnVtZXJpYyB1dGlsaXR5IGZ1bmN0aW9ucy5cbiAgICAgKi9cbiAgICBjbGFzcyBNYXRoVXRpbHMge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRW5kcyB1cCBiZWluZyBhIGJpdCBmYXN0ZXIgdGhhbiB7QGxpbmsgTWF0aCNyb3VuZChmbG9hdCl9LiBUaGlzIG1lcmVseSByb3VuZHMgaXRzXG4gICAgICAgICAqIGFyZ3VtZW50IHRvIHRoZSBuZWFyZXN0IGludCwgd2hlcmUgeC41IHJvdW5kcyB1cCB0byB4KzEuIFNlbWFudGljcyBvZiB0aGlzIHNob3J0Y3V0XG4gICAgICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZVxuICAgICAgICAgKiB2YWx1ZXMuIC0yLjUgcm91bmRzIHRvIC0zLCBub3QgLTIuIEZvciBwdXJwb3NlcyBoZXJlIGl0IG1ha2VzIG5vIGRpZmZlcmVuY2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmRcbiAgICAgICAgICogQHJldHVybiBuZWFyZXN0IHtAY29kZSBpbnR9XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcm91bmQoZCAvKmZsb2F0Ki8pIHtcbiAgICAgICAgICAgIGlmIChOYU4gPT09IGQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUilcbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG4gICAgICAgICAgICBpZiAoZCA+PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUilcbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyAoZCArIChkIDwgMC4wID8gLTAuNSA6IDAuNSkpIHwgMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogbWF5YmUgcmVtb3ZlIHJvdW5kIG1ldGhvZCBhbmQgY2FsbCBkaXJlY3RseSBNYXRoLnJvdW5kLCBpdCBsb29rcyBsaWtlIGl0IGRvZXNuJ3QgbWFrZSBzZW5zZSBmb3IganNcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcGFyYW0gYVkgcG9pbnQgQSB5IGNvb3JkaW5hdGVcbiAgICAgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlXG4gICAgICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcmV0dXJuIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHBvaW50cyBBIGFuZCBCXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGlzdGFuY2UoYVggLypmbG9hdHxpbnQqLywgYVkgLypmbG9hdHxpbnQqLywgYlggLypmbG9hdHxpbnQqLywgYlkgLypmbG9hdHxpbnQqLykge1xuICAgICAgICAgICAgY29uc3QgeERpZmYgPSBhWCAtIGJYO1xuICAgICAgICAgICAgY29uc3QgeURpZmYgPSBhWSAtIGJZO1xuICAgICAgICAgICAgcmV0dXJuIC8qKGZsb2F0KSAqLyBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gYVggcG9pbnQgQSB4IGNvb3JkaW5hdGVcbiAgICAgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlXG4gICAgICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcGFyYW0gYlkgcG9pbnQgQiB5IGNvb3JkaW5hdGVcbiAgICAgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gcHVibGljIHN0YXRpYyBkaXN0YW5jZShhWDogbnVtYmVyIC8qaW50Ki8sIGFZOiBudW1iZXIgLyppbnQqLywgYlg6IG51bWJlciAvKmludCovLCBiWTogbnVtYmVyIC8qaW50Ki8pOiBmbG9hdCB7XG4gICAgICAgIC8vICAgY29uc3QgeERpZmYgPSBhWCAtIGJYXG4gICAgICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZXG4gICAgICAgIC8vICAgcmV0dXJuIChmbG9hdCkgTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGFycmF5IHZhbHVlcyB0byBzdW1cbiAgICAgICAgICogQHJldHVybiBzdW0gb2YgdmFsdWVzIGluIGFycmF5XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgc3VtKGFycmF5KSB7XG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaSAhPT0gbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gYXJyYXlbaV07XG4gICAgICAgICAgICAgICAgY291bnQgKz0gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuXG4gICAgICovXG4gICAgY2xhc3MgRmxvYXQge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycyxcbiAgICAgICAgICogdGhpcyBpcyB1c2VkIG9ubHkgdG8gcG9seWZpbGwgSmF2YSBjb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGZsb2F0VG9JbnRCaXRzKGYpIHtcbiAgICAgICAgICAgIHJldHVybiBmO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuXG4gICAgICovXG4gICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXNcbiAgICAgKiB3b3VsZCBiZSB0aGUgbG9jYXRpb24gb2YgYSBmaW5kZXIgcGF0dGVybiBvciB0aGUgY29ybmVyIG9mIHRoZSBiYXJjb2RlLCBmb3IgZXhhbXBsZS48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIFJlc3VsdFBvaW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0WCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0WSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBlcXVhbHMob3RoZXIpIHtcbiAgICAgICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFJlc3VsdFBvaW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJQb2ludCA9IG90aGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnggPT09IG90aGVyUG9pbnQueCAmJiB0aGlzLnkgPT09IG90aGVyUG9pbnQueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGhhc2hDb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuIDMxICogRmxvYXQuZmxvYXRUb0ludEJpdHModGhpcy54KSArIEZsb2F0LmZsb2F0VG9JbnRCaXRzKHRoaXMueSk7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9yZGVycyBhbiBhcnJheSBvZiB0aHJlZSBSZXN1bHRQb2ludHMgaW4gYW4gb3JkZXIgW0EsQixDXSBzdWNoIHRoYXQgQUIgaXMgbGVzcyB0aGFuIEFDXG4gICAgICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcGF0dGVybnMgYXJyYXkgb2YgdGhyZWUge0Bjb2RlIFJlc3VsdFBvaW50fSB0byBvcmRlclxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIG9yZGVyQmVzdFBhdHRlcm5zKHBhdHRlcm5zKSB7XG4gICAgICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVyc1xuICAgICAgICAgICAgY29uc3QgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pO1xuICAgICAgICAgICAgY29uc3Qgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7XG4gICAgICAgICAgICBjb25zdCB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7XG4gICAgICAgICAgICBsZXQgcG9pbnRBO1xuICAgICAgICAgICAgbGV0IHBvaW50QjtcbiAgICAgICAgICAgIGxldCBwb2ludEM7XG4gICAgICAgICAgICAvLyBBc3N1bWUgb25lIGNsb3Nlc3QgdG8gb3RoZXIgdHdvIGlzIEI7IEEgYW5kIEMgd2lsbCBqdXN0IGJlIGd1ZXNzZXMgYXQgZmlyc3RcbiAgICAgICAgICAgIGlmIChvbmVUd29EaXN0YW5jZSA+PSB6ZXJvT25lRGlzdGFuY2UgJiYgb25lVHdvRGlzdGFuY2UgPj0gemVyb1R3b0Rpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07XG4gICAgICAgICAgICAgICAgcG9pbnRBID0gcGF0dGVybnNbMV07XG4gICAgICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh6ZXJvVHdvRGlzdGFuY2UgPj0gb25lVHdvRGlzdGFuY2UgJiYgemVyb1R3b0Rpc3RhbmNlID49IHplcm9PbmVEaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHBvaW50QiA9IHBhdHRlcm5zWzFdO1xuICAgICAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdO1xuICAgICAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMl07XG4gICAgICAgICAgICAgICAgcG9pbnRBID0gcGF0dGVybnNbMF07XG4gICAgICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVc2UgY3Jvc3MgcHJvZHVjdCB0byBmaWd1cmUgb3V0IHdoZXRoZXIgQSBhbmQgQyBhcmUgY29ycmVjdCBvciBmbGlwcGVkLlxuICAgICAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50XG4gICAgICAgICAgICAvLyB3ZSB3YW50IGZvciBBLCBCLCBDLiBJZiBpdCdzIG5lZ2F0aXZlLCB0aGVuIHdlJ3ZlIGdvdCBpdCBmbGlwcGVkIGFyb3VuZCBhbmRcbiAgICAgICAgICAgIC8vIHNob3VsZCBzd2FwIEEgYW5kIEMuXG4gICAgICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHBvaW50QTtcbiAgICAgICAgICAgICAgICBwb2ludEEgPSBwb2ludEM7XG4gICAgICAgICAgICAgICAgcG9pbnRDID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdHRlcm5zWzBdID0gcG9pbnRBO1xuICAgICAgICAgICAgcGF0dGVybnNbMV0gPSBwb2ludEI7XG4gICAgICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHBhdHRlcm4xIGZpcnN0IHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuXG4gICAgICAgICAqIEByZXR1cm4gZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGlzdGFuY2UocGF0dGVybjEsIHBhdHRlcm4yKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzLmRpc3RhbmNlKHBhdHRlcm4xLngsIHBhdHRlcm4xLnksIHBhdHRlcm4yLngsIHBhdHRlcm4yLnkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSB6IGNvbXBvbmVudCBvZiB0aGUgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHZlY3RvcnMgQkMgYW5kIEJBLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNyb3NzUHJvZHVjdFoocG9pbnRBLCBwb2ludEIsIHBvaW50Qykge1xuICAgICAgICAgICAgY29uc3QgYlggPSBwb2ludEIueDtcbiAgICAgICAgICAgIGNvbnN0IGJZID0gcG9pbnRCLnk7XG4gICAgICAgICAgICByZXR1cm4gKChwb2ludEMueCAtIGJYKSAqIChwb2ludEEueSAtIGJZKSkgLSAoKHBvaW50Qy55IC0gYlkpICogKHBvaW50QS54IC0gYlgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3XG4gICAgICogbWF0cml4IG9mIGJsYWNrL3doaXRlIHBpeGVscyBjb3JyZXNwb25kaW5nIHRvIHRoZSBiYXJjb2RlLCBhbmQgcG9zc2libHkgcG9pbnRzIG9mIGludGVyZXN0XG4gICAgICogaW4gdGhlIGltYWdlLCBsaWtlIHRoZSBsb2NhdGlvbiBvZiBmaW5kZXIgcGF0dGVybnMgb3IgY29ybmVycyBvZiB0aGUgYmFyY29kZSBpbiB0aGUgaW1hZ2UuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBEZXRlY3RvclJlc3VsdCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGJpdHMsIHBvaW50cykge1xuICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0cztcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICB9XG4gICAgICAgIGdldEJpdHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iaXRzO1xuICAgICAgICB9XG4gICAgICAgIGdldFBvaW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvaW50cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMTAgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+RXh0ZW5kcyB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IHdpdGggbW9yZSBpbmZvcm1hdGlvbiBzcGVjaWZpYyB0byB0aGUgQXp0ZWMgZm9ybWF0LFxuICAgICAqIGxpa2UgdGhlIG51bWJlciBvZiBsYXllcnMgYW5kIHdoZXRoZXIgaXQncyBjb21wYWN0LjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgQXp0ZWNEZXRlY3RvclJlc3VsdCBleHRlbmRzIERldGVjdG9yUmVzdWx0IHtcbiAgICAgICAgY29uc3RydWN0b3IoYml0cywgcG9pbnRzLCBjb21wYWN0LCBuYkRhdGFibG9ja3MsIG5iTGF5ZXJzKSB7XG4gICAgICAgICAgICBzdXBlcihiaXRzLCBwb2ludHMpO1xuICAgICAgICAgICAgdGhpcy5jb21wYWN0ID0gY29tcGFjdDtcbiAgICAgICAgICAgIHRoaXMubmJEYXRhYmxvY2tzID0gbmJEYXRhYmxvY2tzO1xuICAgICAgICAgICAgdGhpcy5uYkxheWVycyA9IG5iTGF5ZXJzO1xuICAgICAgICB9XG4gICAgICAgIGdldE5iTGF5ZXJzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmJMYXllcnM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TmJEYXRhYmxvY2tzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmJEYXRhYmxvY2tzO1xuICAgICAgICB9XG4gICAgICAgIGlzQ29tcGFjdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhY3Q7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDEwIFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIDxwPlxuICAgICAqIERldGVjdHMgYSBjYW5kaWRhdGUgYmFyY29kZS1saWtlIHJlY3Rhbmd1bGFyIHJlZ2lvbiB3aXRoaW4gYW4gaW1hZ2UuIEl0XG4gICAgICogc3RhcnRzIGFyb3VuZCB0aGUgY2VudGVyIG9mIHRoZSBpbWFnZSwgaW5jcmVhc2VzIHRoZSBzaXplIG9mIHRoZSBjYW5kaWRhdGVcbiAgICAgKiByZWdpb24gdW50aWwgaXQgZmluZHMgYSB3aGl0ZSByZWN0YW5ndWxhciByZWdpb24uIEJ5IGtlZXBpbmcgdHJhY2sgb2YgdGhlXG4gICAgICogbGFzdCBibGFjayBwb2ludHMgaXQgZW5jb3VudGVyZWQsIGl0IGRldGVybWluZXMgdGhlIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUuXG4gICAgICogPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBEYXZpZCBPbGl2aWVyXG4gICAgICovXG4gICAgY2xhc3MgV2hpdGVSZWN0YW5nbGVEZXRlY3RvciB7XG4gICAgICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIGltYWdlOiBCaXRNYXRyaXgpIC8qdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uKi8ge1xuICAgICAgICAvLyAgIHRoaXMoaW1hZ2UsIElOSVRfU0laRSwgaW1hZ2UuZ2V0V2lkdGgoKSAvIDIsIGltYWdlLmdldEhlaWdodCgpIC8gMilcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGltYWdlIGJhcmNvZGUgaW1hZ2UgdG8gZmluZCBhIHJlY3RhbmdsZSBpblxuICAgICAgICAgKiBAcGFyYW0gaW5pdFNpemUgaW5pdGlhbCBzaXplIG9mIHNlYXJjaCBhcmVhIGFyb3VuZCBjZW50ZXJcbiAgICAgICAgICogQHBhcmFtIHggeCBwb3NpdGlvbiBvZiBzZWFyY2ggY2VudGVyXG4gICAgICAgICAqIEBwYXJhbSB5IHkgcG9zaXRpb24gb2Ygc2VhcmNoIGNlbnRlclxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIGltYWdlIGlzIHRvbyBzbWFsbCB0byBhY2NvbW1vZGF0ZSB7QGNvZGUgaW5pdFNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihpbWFnZSwgaW5pdFNpemUgLyppbnQqLywgeCAvKmludCovLCB5IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGluaXRTaXplIHx8IG51bGwgPT09IGluaXRTaXplKSB7XG4gICAgICAgICAgICAgICAgaW5pdFNpemUgPSBXaGl0ZVJlY3RhbmdsZURldGVjdG9yLklOSVRfU0laRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHggfHwgbnVsbCA9PT0geCkge1xuICAgICAgICAgICAgICAgIHggPSBpbWFnZS5nZXRXaWR0aCgpIC8gMiB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSB5IHx8IG51bGwgPT09IHkpIHtcbiAgICAgICAgICAgICAgICB5ID0gaW1hZ2UuZ2V0SGVpZ2h0KCkgLyAyIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbGZzaXplID0gaW5pdFNpemUgLyAyIHwgMDtcbiAgICAgICAgICAgIHRoaXMubGVmdEluaXQgPSB4IC0gaGFsZnNpemU7XG4gICAgICAgICAgICB0aGlzLnJpZ2h0SW5pdCA9IHggKyBoYWxmc2l6ZTtcbiAgICAgICAgICAgIHRoaXMudXBJbml0ID0geSAtIGhhbGZzaXplO1xuICAgICAgICAgICAgdGhpcy5kb3duSW5pdCA9IHkgKyBoYWxmc2l6ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnVwSW5pdCA8IDAgfHwgdGhpcy5sZWZ0SW5pdCA8IDAgfHwgdGhpcy5kb3duSW5pdCA+PSB0aGlzLmhlaWdodCB8fCB0aGlzLnJpZ2h0SW5pdCA+PSB0aGlzLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlxuICAgICAgICAgKiBEZXRlY3RzIGEgY2FuZGlkYXRlIGJhcmNvZGUtbGlrZSByZWN0YW5ndWxhciByZWdpb24gd2l0aGluIGFuIGltYWdlLiBJdFxuICAgICAgICAgKiBzdGFydHMgYXJvdW5kIHRoZSBjZW50ZXIgb2YgdGhlIGltYWdlLCBpbmNyZWFzZXMgdGhlIHNpemUgb2YgdGhlIGNhbmRpZGF0ZVxuICAgICAgICAgKiByZWdpb24gdW50aWwgaXQgZmluZHMgYSB3aGl0ZSByZWN0YW5ndWxhciByZWdpb24uXG4gICAgICAgICAqIDwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7QGxpbmsgUmVzdWx0UG9pbnR9W10gZGVzY3JpYmluZyB0aGUgY29ybmVycyBvZiB0aGUgcmVjdGFuZ3VsYXJcbiAgICAgICAgICogICAgICAgICByZWdpb24uIFRoZSBmaXJzdCBhbmQgbGFzdCBwb2ludHMgYXJlIG9wcG9zZWQgb24gdGhlIGRpYWdvbmFsLCBhc1xuICAgICAgICAgKiAgICAgICAgIGFyZSB0aGUgc2Vjb25kIGFuZCB0aGlyZC4gVGhlIGZpcnN0IHBvaW50IHdpbGwgYmUgdGhlIHRvcG1vc3RcbiAgICAgICAgICogICAgICAgICBwb2ludCBhbmQgdGhlIGxhc3QsIHRoZSBib3R0b21tb3N0LiBUaGUgc2Vjb25kIHBvaW50IHdpbGwgYmVcbiAgICAgICAgICogICAgICAgICBsZWZ0bW9zdCBhbmQgdGhlIHRoaXJkLCB0aGUgcmlnaHRtb3N0XG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgbm8gRGF0YSBNYXRyaXggQ29kZSBjYW4gYmUgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGRldGVjdCgpIHtcbiAgICAgICAgICAgIGxldCBsZWZ0ID0gdGhpcy5sZWZ0SW5pdDtcbiAgICAgICAgICAgIGxldCByaWdodCA9IHRoaXMucmlnaHRJbml0O1xuICAgICAgICAgICAgbGV0IHVwID0gdGhpcy51cEluaXQ7XG4gICAgICAgICAgICBsZXQgZG93biA9IHRoaXMuZG93bkluaXQ7XG4gICAgICAgICAgICBsZXQgc2l6ZUV4Y2VlZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgYUJsYWNrUG9pbnRGb3VuZE9uQm9yZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Cb3JkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25SaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPbkJvdHRvbSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPbkxlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Ub3AgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICAgICAgd2hpbGUgKGFCbGFja1BvaW50Rm91bmRPbkJvcmRlcikge1xuICAgICAgICAgICAgICAgIGFCbGFja1BvaW50Rm91bmRPbkJvcmRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIC4uLi4uXG4gICAgICAgICAgICAgICAgLy8gLiAgIHxcbiAgICAgICAgICAgICAgICAvLyAuLi4uLlxuICAgICAgICAgICAgICAgIGxldCByaWdodEJvcmRlck5vdFdoaXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKHJpZ2h0Qm9yZGVyTm90V2hpdGUgfHwgIWF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPblJpZ2h0KSAmJiByaWdodCA8IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Qm9yZGVyTm90V2hpdGUgPSB0aGlzLmNvbnRhaW5zQmxhY2tQb2ludCh1cCwgZG93biwgcmlnaHQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0Qm9yZGVyTm90V2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBhQmxhY2tQb2ludEZvdW5kT25Cb3JkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXRMZWFzdE9uZUJsYWNrUG9pbnRGb3VuZE9uUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25SaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmlnaHQgPj0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZUV4Y2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uLi4uXG4gICAgICAgICAgICAgICAgLy8gLiAgIC5cbiAgICAgICAgICAgICAgICAvLyAuX19fLlxuICAgICAgICAgICAgICAgIGxldCBib3R0b21Cb3JkZXJOb3RXaGl0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgd2hpbGUgKChib3R0b21Cb3JkZXJOb3RXaGl0ZSB8fCAhYXRMZWFzdE9uZUJsYWNrUG9pbnRGb3VuZE9uQm90dG9tKSAmJiBkb3duIDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbUJvcmRlck5vdFdoaXRlID0gdGhpcy5jb250YWluc0JsYWNrUG9pbnQobGVmdCwgcmlnaHQsIGRvd24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm90dG9tQm9yZGVyTm90V2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd24rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGFCbGFja1BvaW50Rm91bmRPbkJvcmRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Cb3R0b20gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Cb3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd24rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZG93biA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZUV4Y2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uLi4uXG4gICAgICAgICAgICAgICAgLy8gfCAgIC5cbiAgICAgICAgICAgICAgICAvLyAuLi4uLlxuICAgICAgICAgICAgICAgIGxldCBsZWZ0Qm9yZGVyTm90V2hpdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdoaWxlICgobGVmdEJvcmRlck5vdFdoaXRlIHx8ICFhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25MZWZ0KSAmJiBsZWZ0ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdEJvcmRlck5vdFdoaXRlID0gdGhpcy5jb250YWluc0JsYWNrUG9pbnQodXAsIGRvd24sIGxlZnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRCb3JkZXJOb3RXaGl0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgYUJsYWNrUG9pbnRGb3VuZE9uQm9yZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPbkxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25MZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpemVFeGNlZWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAuX19fLlxuICAgICAgICAgICAgICAgIC8vIC4gICAuXG4gICAgICAgICAgICAgICAgLy8gLi4uLi5cbiAgICAgICAgICAgICAgICBsZXQgdG9wQm9yZGVyTm90V2hpdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdoaWxlICgodG9wQm9yZGVyTm90V2hpdGUgfHwgIWF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPblRvcCkgJiYgdXAgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BCb3JkZXJOb3RXaGl0ZSA9IHRoaXMuY29udGFpbnNCbGFja1BvaW50KGxlZnQsIHJpZ2h0LCB1cCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3BCb3JkZXJOb3RXaGl0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXAtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFCbGFja1BvaW50Rm91bmRPbkJvcmRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Ub3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Ub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVwIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBzaXplRXhjZWVkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFCbGFja1BvaW50Rm91bmRPbkJvcmRlcikge1xuICAgICAgICAgICAgICAgICAgICBhdExlYXN0T25lQmxhY2tQb2ludEZvdW5kT25Cb3JkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2l6ZUV4Y2VlZGVkICYmIGF0TGVhc3RPbmVCbGFja1BvaW50Rm91bmRPbkJvcmRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heFNpemUgPSByaWdodCAtIGxlZnQ7XG4gICAgICAgICAgICAgICAgbGV0IHogPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyB6ID09PSBudWxsICYmIGkgPCBtYXhTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgeiA9IHRoaXMuZ2V0QmxhY2tQb2ludE9uU2VnbWVudChsZWZ0LCBkb3duIC0gaSwgbGVmdCArIGksIGRvd24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy8gZ28gZG93biByaWdodFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyB0ID09PSBudWxsICYmIGkgPCBtYXhTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuZ2V0QmxhY2tQb2ludE9uU2VnbWVudChsZWZ0LCB1cCArIGksIGxlZnQgKyBpLCB1cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCB4ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvLyBnbyBkb3duIGxlZnRcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgeCA9PT0gbnVsbCAmJiBpIDwgbWF4U2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSB0aGlzLmdldEJsYWNrUG9pbnRPblNlZ21lbnQocmlnaHQsIHVwICsgaSwgcmlnaHQgLSBpLCB1cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCB5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvLyBnbyB1cCBsZWZ0XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IHkgPT09IG51bGwgJiYgaSA8IG1heFNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB5ID0gdGhpcy5nZXRCbGFja1BvaW50T25TZWdtZW50KHJpZ2h0LCBkb3duIC0gaSwgcmlnaHQgLSBpLCBkb3duKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VudGVyRWRnZXMoeSwgeiwgeCwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnZXRCbGFja1BvaW50T25TZWdtZW50KGFYIC8qZmxvYXQqLywgYVkgLypmbG9hdCovLCBiWCAvKmZsb2F0Ki8sIGJZIC8qZmxvYXQqLykge1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGhVdGlscy5yb3VuZChNYXRoVXRpbHMuZGlzdGFuY2UoYVgsIGFZLCBiWCwgYlkpKTtcbiAgICAgICAgICAgIGNvbnN0IHhTdGVwID0gKGJYIC0gYVgpIC8gZGlzdDtcbiAgICAgICAgICAgIGNvbnN0IHlTdGVwID0gKGJZIC0gYVkpIC8gZGlzdDtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5pbWFnZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlzdDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGhVdGlscy5yb3VuZChhWCArIGkgKiB4U3RlcCk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGhVdGlscy5yb3VuZChhWSArIGkgKiB5U3RlcCk7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldCh4LCB5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3VsdFBvaW50KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZWNlbnRlcnMgdGhlIHBvaW50cyBvZiBhIGNvbnN0YW50IGRpc3RhbmNlIHRvd2FyZHMgdGhlIGNlbnRlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geSBib3R0b20gbW9zdCBwb2ludFxuICAgICAgICAgKiBAcGFyYW0geiBsZWZ0IG1vc3QgcG9pbnRcbiAgICAgICAgICogQHBhcmFtIHggcmlnaHQgbW9zdCBwb2ludFxuICAgICAgICAgKiBAcGFyYW0gdCB0b3AgbW9zdCBwb2ludFxuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBSZXN1bHRQb2ludH1bXSBkZXNjcmliaW5nIHRoZSBjb3JuZXJzIG9mIHRoZSByZWN0YW5ndWxhclxuICAgICAgICAgKiAgICAgICAgIHJlZ2lvbi4gVGhlIGZpcnN0IGFuZCBsYXN0IHBvaW50cyBhcmUgb3Bwb3NlZCBvbiB0aGUgZGlhZ29uYWwsIGFzXG4gICAgICAgICAqICAgICAgICAgYXJlIHRoZSBzZWNvbmQgYW5kIHRoaXJkLiBUaGUgZmlyc3QgcG9pbnQgd2lsbCBiZSB0aGUgdG9wbW9zdFxuICAgICAgICAgKiAgICAgICAgIHBvaW50IGFuZCB0aGUgbGFzdCwgdGhlIGJvdHRvbW1vc3QuIFRoZSBzZWNvbmQgcG9pbnQgd2lsbCBiZVxuICAgICAgICAgKiAgICAgICAgIGxlZnRtb3N0IGFuZCB0aGUgdGhpcmQsIHRoZSByaWdodG1vc3RcbiAgICAgICAgICovXG4gICAgICAgIGNlbnRlckVkZ2VzKHksIHosIHgsIHQpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgICB0ICAgICAgICAgICAgdFxuICAgICAgICAgICAgLy8gIHogICAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgLy8gICAgICAgIHggICAgT1IgICAgelxuICAgICAgICAgICAgLy8gICB5ICAgICAgICAgICAgICAgICAgICB5XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgY29uc3QgeWkgPSB5LmdldFgoKTtcbiAgICAgICAgICAgIGNvbnN0IHlqID0geS5nZXRZKCk7XG4gICAgICAgICAgICBjb25zdCB6aSA9IHouZ2V0WCgpO1xuICAgICAgICAgICAgY29uc3QgemogPSB6LmdldFkoKTtcbiAgICAgICAgICAgIGNvbnN0IHhpID0geC5nZXRYKCk7XG4gICAgICAgICAgICBjb25zdCB4aiA9IHguZ2V0WSgpO1xuICAgICAgICAgICAgY29uc3QgdGkgPSB0LmdldFgoKTtcbiAgICAgICAgICAgIGNvbnN0IHRqID0gdC5nZXRZKCk7XG4gICAgICAgICAgICBjb25zdCBDT1JSID0gV2hpdGVSZWN0YW5nbGVEZXRlY3Rvci5DT1JSO1xuICAgICAgICAgICAgaWYgKHlpIDwgdGhpcy53aWR0aCAvIDIuMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludCh0aSAtIENPUlIsIHRqICsgQ09SUiksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludCh6aSArIENPUlIsIHpqICsgQ09SUiksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludCh4aSAtIENPUlIsIHhqIC0gQ09SUiksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludCh5aSArIENPUlIsIHlqIC0gQ09SUilcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KHRpICsgQ09SUiwgdGogKyBDT1JSKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KHppICsgQ09SUiwgemogLSBDT1JSKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KHhpIC0gQ09SUiwgeGogKyBDT1JSKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KHlpIC0gQ09SUiwgeWogLSBDT1JSKVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgd2hldGhlciBhIHNlZ21lbnQgY29udGFpbnMgYSBibGFjayBwb2ludFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYSAgICAgICAgICBtaW4gdmFsdWUgb2YgdGhlIHNjYW5uZWQgY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcGFyYW0gYiAgICAgICAgICBtYXggdmFsdWUgb2YgdGhlIHNjYW5uZWQgY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcGFyYW0gZml4ZWQgICAgICB2YWx1ZSBvZiBmaXhlZCBjb29yZGluYXRlXG4gICAgICAgICAqIEBwYXJhbSBob3Jpem9udGFsIHNldCB0byB0cnVlIGlmIHNjYW4gbXVzdCBiZSBob3Jpem9udGFsLCBmYWxzZSBpZiB2ZXJ0aWNhbFxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBibGFjayBwb2ludCBoYXMgYmVlbiBmb3VuZCwgZWxzZSBmYWxzZS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnRhaW5zQmxhY2tQb2ludChhIC8qaW50Ki8sIGIgLyppbnQqLywgZml4ZWQgLyppbnQqLywgaG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmltYWdlO1xuICAgICAgICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gYTsgeCA8PSBiOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldCh4LCBmaXhlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IGE7IHkgPD0gYjsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoZml4ZWQsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBXaGl0ZVJlY3RhbmdsZURldGVjdG9yLklOSVRfU0laRSA9IDEwO1xuICAgIFdoaXRlUmVjdGFuZ2xlRGV0ZWN0b3IuQ09SUiA9IDE7XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEltcGxlbWVudGF0aW9ucyBvZiB0aGlzIGNsYXNzIGNhbiwgZ2l2ZW4gbG9jYXRpb25zIG9mIGZpbmRlciBwYXR0ZXJucyBmb3IgYSBRUiBjb2RlIGluIGFuXG4gICAgICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3JcbiAgICAgKiBwZXJzcGVjdGl2ZSBkaXN0b3J0aW9uLiBJdCBpcyBhYnN0cmFjdGVkIHNpbmNlIGl0IGlzIHJlbGF0aXZlbHkgZXhwZW5zaXZlIGFuZCBzaG91bGQgYmUgYWxsb3dlZFxuICAgICAqIHRvIHRha2UgYWR2YW50YWdlIG9mIHBsYXRmb3JtLXNwZWNpZmljIG9wdGltaXplZCBpbXBsZW1lbnRhdGlvbnMsIGxpa2UgU3VuJ3MgSmF2YSBBZHZhbmNlZFxuICAgICAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlXG4gICAgICogdmVyc2EuXG4gICAgICpcbiAgICAgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfVxuICAgICAqIHdpdGggYW4gaW5zdGFuY2Ugb2YgYSBjbGFzcyB3aGljaCBpbXBsZW1lbnRzIHRoaXMgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBHcmlkU2FtcGxlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdFxuICAgICAgICAgKiB0aGUgaW1hZ2UncyBkaW1lbnNpb25zIHRvIHNlZSBpZiB0aGUgcG9pbnQgYXJlIGV2ZW4gd2l0aGluIHRoZSBpbWFnZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgXCJudWRnZVwiIHRoZSBlbmRwb2ludHMgYmFjayBvbnRvIHRoZSBpbWFnZSBpZiB0aGV5IGFyZSBmb3VuZCB0byBiZVxuICAgICAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlclxuICAgICAgICAgKiBwYXR0ZXJucyBpbiBhbiBpbWFnZSB3aGVyZSB0aGUgUVIgQ29kZSBydW5zIGFsbCB0aGUgd2F5IHRvIHRoZSBpbWFnZSBib3JkZXIuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kXG4gICAgICAgICAqIHRvIGJlIHdpdGhpbiB0aGUgaW1hZ2UuIEJlY2F1c2UgdGhlIHNldCBvZiBwb2ludHMgYXJlIGFzc3VtZWQgdG8gYmUgbGluZWFyLCB0aGlzIGlzIHZhbGlkLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwXG4gICAgICAgICAqIEBwYXJhbSBwb2ludHMgYWN0dWFsIHBvaW50cyBpbiB4MSx5MSwuLi4seG4seW4gZm9ybVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIGFuIGVuZHBvaW50IGlzIGxpZXMgb3V0c2lkZSB0aGUgaW1hZ2UgYm91bmRhcmllc1xuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNoZWNrQW5kTnVkZ2VQb2ludHMoaW1hZ2UsIHBvaW50cykge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWFnZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6XG4gICAgICAgICAgICBsZXQgbnVkZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IHBvaW50cy5sZW5ndGggJiYgbnVkZ2VkOyBvZmZzZXQgKz0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTtcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pO1xuICAgICAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7XG4gICAgICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxO1xuICAgICAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gMC4wO1xuICAgICAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh5ID09PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOlxuICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG9mZnNldCA9IHBvaW50cy5sZW5ndGggLSAyOyBvZmZzZXQgPj0gMCAmJiBudWRnZWQ7IG9mZnNldCAtPSAyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXQgKyAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0XSA9IDAuMDtcbiAgICAgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA9PT0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh5ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7XG4gICAgICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSBoZWlnaHQgLSAxO1xuICAgICAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovXG4gICAgLyoqXG4gICAgICogPHA+VGhpcyBjbGFzcyBpbXBsZW1lbnRzIGEgcGVyc3BlY3RpdmUgdHJhbnNmb3JtIGluIHR3byBkaW1lbnNpb25zLiBHaXZlbiBmb3VyIHNvdXJjZSBhbmQgZm91clxuICAgICAqIGRlc3RpbmF0aW9uIHBvaW50cywgaXQgd2lsbCBjb21wdXRlIHRoZSB0cmFuc2Zvcm1hdGlvbiBpbXBsaWVkIGJldHdlZW4gdGhlbS4gVGhlIGNvZGUgaXMgYmFzZWRcbiAgICAgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyBcIkRpZ2l0YWwgSW1hZ2UgV2FycGluZ1wiOyBzZWUgcGFnZXMgNTQtNTYuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGExMSAvKmZsb2F0Ki8sIGEyMSAvKmZsb2F0Ki8sIGEzMSAvKmZsb2F0Ki8sIGExMiAvKmZsb2F0Ki8sIGEyMiAvKmZsb2F0Ki8sIGEzMiAvKmZsb2F0Ki8sIGExMyAvKmZsb2F0Ki8sIGEyMyAvKmZsb2F0Ki8sIGEzMyAvKmZsb2F0Ki8pIHtcbiAgICAgICAgICAgIHRoaXMuYTExID0gYTExO1xuICAgICAgICAgICAgdGhpcy5hMjEgPSBhMjE7XG4gICAgICAgICAgICB0aGlzLmEzMSA9IGEzMTtcbiAgICAgICAgICAgIHRoaXMuYTEyID0gYTEyO1xuICAgICAgICAgICAgdGhpcy5hMjIgPSBhMjI7XG4gICAgICAgICAgICB0aGlzLmEzMiA9IGEzMjtcbiAgICAgICAgICAgIHRoaXMuYTEzID0gYTEzO1xuICAgICAgICAgICAgdGhpcy5hMjMgPSBhMjM7XG4gICAgICAgICAgICB0aGlzLmEzMyA9IGEzMztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbCh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLywgeDBwIC8qZmxvYXQqLywgeTBwIC8qZmxvYXQqLywgeDFwIC8qZmxvYXQqLywgeTFwIC8qZmxvYXQqLywgeDJwIC8qZmxvYXQqLywgeTJwIC8qZmxvYXQqLywgeDNwIC8qZmxvYXQqLywgeTNwIC8qZmxvYXQqLykge1xuICAgICAgICAgICAgY29uc3QgcVRvUyA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtLnF1YWRyaWxhdGVyYWxUb1NxdWFyZSh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMpO1xuICAgICAgICAgICAgY29uc3Qgc1RvUSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCh4MHAsIHkwcCwgeDFwLCB5MXAsIHgycCwgeTJwLCB4M3AsIHkzcCk7XG4gICAgICAgICAgICByZXR1cm4gc1RvUS50aW1lcyhxVG9TKTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm1Qb2ludHMocG9pbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBtYXggPSBwb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYTExID0gdGhpcy5hMTE7XG4gICAgICAgICAgICBjb25zdCBhMTIgPSB0aGlzLmExMjtcbiAgICAgICAgICAgIGNvbnN0IGExMyA9IHRoaXMuYTEzO1xuICAgICAgICAgICAgY29uc3QgYTIxID0gdGhpcy5hMjE7XG4gICAgICAgICAgICBjb25zdCBhMjIgPSB0aGlzLmEyMjtcbiAgICAgICAgICAgIGNvbnN0IGEyMyA9IHRoaXMuYTIzO1xuICAgICAgICAgICAgY29uc3QgYTMxID0gdGhpcy5hMzE7XG4gICAgICAgICAgICBjb25zdCBhMzIgPSB0aGlzLmEzMjtcbiAgICAgICAgICAgIGNvbnN0IGEzMyA9IHRoaXMuYTMzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwb2ludHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHBvaW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMztcbiAgICAgICAgICAgICAgICBwb2ludHNbaV0gPSAoYTExICogeCArIGEyMSAqIHkgKyBhMzEpIC8gZGVub21pbmF0b3I7XG4gICAgICAgICAgICAgICAgcG9pbnRzW2kgKyAxXSA9IChhMTIgKiB4ICsgYTIyICogeSArIGEzMikgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzKHhWYWx1ZXMsIHlWYWx1ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGExMSA9IHRoaXMuYTExO1xuICAgICAgICAgICAgY29uc3QgYTEyID0gdGhpcy5hMTI7XG4gICAgICAgICAgICBjb25zdCBhMTMgPSB0aGlzLmExMztcbiAgICAgICAgICAgIGNvbnN0IGEyMSA9IHRoaXMuYTIxO1xuICAgICAgICAgICAgY29uc3QgYTIyID0gdGhpcy5hMjI7XG4gICAgICAgICAgICBjb25zdCBhMjMgPSB0aGlzLmEyMztcbiAgICAgICAgICAgIGNvbnN0IGEzMSA9IHRoaXMuYTMxO1xuICAgICAgICAgICAgY29uc3QgYTMyID0gdGhpcy5hMzI7XG4gICAgICAgICAgICBjb25zdCBhMzMgPSB0aGlzLmEzMztcbiAgICAgICAgICAgIGNvbnN0IG4gPSB4VmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IHhWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHlWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMztcbiAgICAgICAgICAgICAgICB4VmFsdWVzW2ldID0gKGExMSAqIHggKyBhMjEgKiB5ICsgYTMxKSAvIGRlbm9taW5hdG9yO1xuICAgICAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHNxdWFyZVRvUXVhZHJpbGF0ZXJhbCh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykge1xuICAgICAgICAgICAgY29uc3QgZHgzID0geDAgLSB4MSArIHgyIC0geDM7XG4gICAgICAgICAgICBjb25zdCBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MztcbiAgICAgICAgICAgIGlmIChkeDMgPT09IDAuMCAmJiBkeTMgPT09IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIEFmZmluZVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGR4MSA9IHgxIC0geDI7XG4gICAgICAgICAgICAgICAgY29uc3QgZHgyID0geDMgLSB4MjtcbiAgICAgICAgICAgICAgICBjb25zdCBkeTEgPSB5MSAtIHkyO1xuICAgICAgICAgICAgICAgIGNvbnN0IGR5MiA9IHkzIC0geTI7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSBkeDEgKiBkeTIgLSBkeDIgKiBkeTE7XG4gICAgICAgICAgICAgICAgY29uc3QgYTEzID0gKGR4MyAqIGR5MiAtIGR4MiAqIGR5MykgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgICAgICAgICBjb25zdCBhMjMgPSAoZHgxICogZHkzIC0gZHgzICogZHkxKSAvIGRlbm9taW5hdG9yO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBxdWFkcmlsYXRlcmFsVG9TcXVhcmUoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHtcbiAgICAgICAgICAgIC8vIEhlcmUsIHRoZSBhZGpvaW50IHNlcnZlcyBhcyB0aGUgaW52ZXJzZTpcbiAgICAgICAgICAgIHJldHVybiBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5zcXVhcmVUb1F1YWRyaWxhdGVyYWwoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKS5idWlsZEFkam9pbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBidWlsZEFkam9pbnQoKSB7XG4gICAgICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0odGhpcy5hMjIgKiB0aGlzLmEzMyAtIHRoaXMuYTIzICogdGhpcy5hMzIsIHRoaXMuYTIzICogdGhpcy5hMzEgLSB0aGlzLmEyMSAqIHRoaXMuYTMzLCB0aGlzLmEyMSAqIHRoaXMuYTMyIC0gdGhpcy5hMjIgKiB0aGlzLmEzMSwgdGhpcy5hMTMgKiB0aGlzLmEzMiAtIHRoaXMuYTEyICogdGhpcy5hMzMsIHRoaXMuYTExICogdGhpcy5hMzMgLSB0aGlzLmExMyAqIHRoaXMuYTMxLCB0aGlzLmExMiAqIHRoaXMuYTMxIC0gdGhpcy5hMTEgKiB0aGlzLmEzMiwgdGhpcy5hMTIgKiB0aGlzLmEyMyAtIHRoaXMuYTEzICogdGhpcy5hMjIsIHRoaXMuYTEzICogdGhpcy5hMjEgLSB0aGlzLmExMSAqIHRoaXMuYTIzLCB0aGlzLmExMSAqIHRoaXMuYTIyIC0gdGhpcy5hMTIgKiB0aGlzLmEyMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZXMob3RoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0odGhpcy5hMTEgKiBvdGhlci5hMTEgKyB0aGlzLmEyMSAqIG90aGVyLmExMiArIHRoaXMuYTMxICogb3RoZXIuYTEzLCB0aGlzLmExMSAqIG90aGVyLmEyMSArIHRoaXMuYTIxICogb3RoZXIuYTIyICsgdGhpcy5hMzEgKiBvdGhlci5hMjMsIHRoaXMuYTExICogb3RoZXIuYTMxICsgdGhpcy5hMjEgKiBvdGhlci5hMzIgKyB0aGlzLmEzMSAqIG90aGVyLmEzMywgdGhpcy5hMTIgKiBvdGhlci5hMTEgKyB0aGlzLmEyMiAqIG90aGVyLmExMiArIHRoaXMuYTMyICogb3RoZXIuYTEzLCB0aGlzLmExMiAqIG90aGVyLmEyMSArIHRoaXMuYTIyICogb3RoZXIuYTIyICsgdGhpcy5hMzIgKiBvdGhlci5hMjMsIHRoaXMuYTEyICogb3RoZXIuYTMxICsgdGhpcy5hMjIgKiBvdGhlci5hMzIgKyB0aGlzLmEzMiAqIG90aGVyLmEzMywgdGhpcy5hMTMgKiBvdGhlci5hMTEgKyB0aGlzLmEyMyAqIG90aGVyLmExMiArIHRoaXMuYTMzICogb3RoZXIuYTEzLCB0aGlzLmExMyAqIG90aGVyLmEyMSArIHRoaXMuYTIzICogb3RoZXIuYTIyICsgdGhpcy5hMzMgKiBvdGhlci5hMjMsIHRoaXMuYTEzICogb3RoZXIuYTMxICsgdGhpcy5hMjMgKiBvdGhlci5hMzIgKyB0aGlzLmEzMyAqIG90aGVyLmEzMyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGVmYXVsdEdyaWRTYW1wbGVyIGV4dGVuZHMgR3JpZFNhbXBsZXIge1xuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHNhbXBsZUdyaWQoaW1hZ2UsIGRpbWVuc2lvblggLyppbnQqLywgZGltZW5zaW9uWSAvKmludCovLCBwMVRvWCAvKmZsb2F0Ki8sIHAxVG9ZIC8qZmxvYXQqLywgcDJUb1ggLypmbG9hdCovLCBwMlRvWSAvKmZsb2F0Ki8sIHAzVG9YIC8qZmxvYXQqLywgcDNUb1kgLypmbG9hdCovLCBwNFRvWCAvKmZsb2F0Ki8sIHA0VG9ZIC8qZmxvYXQqLywgcDFGcm9tWCAvKmZsb2F0Ki8sIHAxRnJvbVkgLypmbG9hdCovLCBwMkZyb21YIC8qZmxvYXQqLywgcDJGcm9tWSAvKmZsb2F0Ki8sIHAzRnJvbVggLypmbG9hdCovLCBwM0Zyb21ZIC8qZmxvYXQqLywgcDRGcm9tWCAvKmZsb2F0Ki8sIHA0RnJvbVkgLypmbG9hdCovKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKHAxVG9YLCBwMVRvWSwgcDJUb1gsIHAyVG9ZLCBwM1RvWCwgcDNUb1ksIHA0VG9YLCBwNFRvWSwgcDFGcm9tWCwgcDFGcm9tWSwgcDJGcm9tWCwgcDJGcm9tWSwgcDNGcm9tWCwgcDNGcm9tWSwgcDRGcm9tWCwgcDRGcm9tWSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIHNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoZGltZW5zaW9uWCA8PSAwIHx8IGRpbWVuc2lvblkgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYml0cyA9IG5ldyBCaXRNYXRyaXgoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7XG4gICAgICAgICAgICBjb25zdCBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgZGltZW5zaW9uWTsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBpVmFsdWUgPSB5ICsgMC41O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWF4OyB4ICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW3ggKyAxXSA9IGlWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpO1xuICAgICAgICAgICAgICAgIC8vIFF1aWNrIGNoZWNrIHRvIHNlZSBpZiBwb2ludHMgdHJhbnNmb3JtZWQgdG8gc29tZXRoaW5nIGluc2lkZSB0aGUgaW1hZ2VcbiAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRvIGNoZWNrIHRoZSBlbmRwb2ludHNcbiAgICAgICAgICAgICAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzKGltYWdlLCBwb2ludHMpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWF4OyB4ICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoTWF0aC5mbG9vcihwb2ludHNbeF0pLCBNYXRoLmZsb29yKHBvaW50c1t4ICsgMV0pKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0cy5zZXQoeCAvIDIsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChhaW9vYmUgLyo6IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiovKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtIGdldHMgXCJ0d2lzdGVkXCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHNcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvc2UgZW5kcG9pbnRzIGFyZSBpbiBib3VuZHMsIGJ1dCBvdGhlcnMgYXJlIG5vdC4gVGhlcmUgaXMgcHJvYmFibHkgc29tZSBtYXRoZW1hdGljYWxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2F5IHRvIGRldGVjdCB0aGlzIGFib3V0IHRoZSB0cmFuc2Zvcm1hdGlvbiB0aGF0IEkgZG9uJ3Qga25vdyB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0LiBXZSBjb3VsZCBjaGVjayBlYWNoIHBvaW50J3MgY29vcmRpbmF0ZXMgYnV0IHRoYXQgZmVlbHMgZHVwbGljYXRpdmUuIFdlIHNldHRsZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F0Y2hpbmcgYW5kIHdyYXBwaW5nIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBHcmlkU2FtcGxlckluc3RhbmNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyIHVzZWQgYnkgdGhlIGxpYnJhcnkuIE9uZSBnbG9iYWxcbiAgICAgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkXG4gICAgICAgICAqIG91Z2h0IHRvIGJlIGFwcHJvcHJpYXRlIGZvciB0aGUgZW50aXJlIHBsYXRmb3JtLCBhbmQgYWxsIHVzZXMgb2YgdGhpcyBsaWJyYXJ5XG4gICAgICAgICAqIGluIHRoZSB3aG9sZSBsaWZldGltZSBvZiB0aGUgSlZNLiBGb3IgaW5zdGFuY2UsIGFuIEFuZHJvaWQgYWN0aXZpdHkgY2FuIHN3YXAgaW5cbiAgICAgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG5ld0dyaWRTYW1wbGVyIFRoZSBwbGF0Zm9ybS1zcGVjaWZpYyBvYmplY3QgdG8gaW5zdGFsbC5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBzZXRHcmlkU2FtcGxlcihuZXdHcmlkU2FtcGxlcikge1xuICAgICAgICAgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5ncmlkU2FtcGxlciA9IG5ld0dyaWRTYW1wbGVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZS5ncmlkU2FtcGxlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcigpO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMCBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICBjbGFzcyBQb2ludCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICAgICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB9XG4gICAgICAgIHRvUmVzdWx0UG9pbnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc3VsdFBvaW50KHRoaXMuZ2V0WCgpLCB0aGlzLmdldFkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0WCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0WSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jYXBzdWxhdGVzIGxvZ2ljIHRoYXQgY2FuIGRldGVjdCBhbiBBenRlYyBDb2RlIGluIGFuIGltYWdlLCBldmVuIGlmIHRoZSBBenRlYyBDb2RlXG4gICAgICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgRGF2aWQgT2xpdmllclxuICAgICAqIEBhdXRob3IgRnJhbmsgWWVsbGluXG4gICAgICovXG4gICAgY2xhc3MgRGV0ZWN0b3Ige1xuICAgICAgICBjb25zdHJ1Y3RvcihpbWFnZSkge1xuICAgICAgICAgICAgdGhpcy5FWFBFQ1RFRF9DT1JORVJfQklUUyA9IG5ldyBJbnQzMkFycmF5KFtcbiAgICAgICAgICAgICAgICAweGVlMCxcbiAgICAgICAgICAgICAgICAweDFkYyxcbiAgICAgICAgICAgICAgICAweDgzYixcbiAgICAgICAgICAgICAgICAweDcwNyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGRldGVjdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGVjdE1pcnJvcihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVjdHMgYW4gQXp0ZWMgQ29kZSBpbiBhbiBpbWFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGlzTWlycm9yIGlmIHRydWUsIGltYWdlIGlzIGEgbWlycm9yLWltYWdlIG9mIG9yaWdpbmFsXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIEF6dGVjRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYW4gQXp0ZWMgQ29kZVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIG5vIEF6dGVjIENvZGUgY2FuIGJlIGZvdW5kXG4gICAgICAgICAqL1xuICAgICAgICBkZXRlY3RNaXJyb3IoaXNNaXJyb3IpIHtcbiAgICAgICAgICAgIC8vIDEuIEdldCB0aGUgY2VudGVyIG9mIHRoZSBhenRlYyBtYXRyaXhcbiAgICAgICAgICAgIGxldCBwQ2VudGVyID0gdGhpcy5nZXRNYXRyaXhDZW50ZXIoKTtcbiAgICAgICAgICAgIC8vIDIuIEdldCB0aGUgY2VudGVyIHBvaW50cyBvZiB0aGUgZm91ciBkaWFnb25hbCBwb2ludHMganVzdCBvdXRzaWRlIHRoZSBidWxsJ3MgZXllXG4gICAgICAgICAgICAvLyAgW3RvcFJpZ2h0LCBib3R0b21SaWdodCwgYm90dG9tTGVmdCwgdG9wTGVmdF1cbiAgICAgICAgICAgIGxldCBidWxsc0V5ZUNvcm5lcnMgPSB0aGlzLmdldEJ1bGxzRXllQ29ybmVycyhwQ2VudGVyKTtcbiAgICAgICAgICAgIGlmIChpc01pcnJvcikge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gYnVsbHNFeWVDb3JuZXJzWzBdO1xuICAgICAgICAgICAgICAgIGJ1bGxzRXllQ29ybmVyc1swXSA9IGJ1bGxzRXllQ29ybmVyc1syXTtcbiAgICAgICAgICAgICAgICBidWxsc0V5ZUNvcm5lcnNbMl0gPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gMy4gR2V0IHRoZSBzaXplIG9mIHRoZSBtYXRyaXggYW5kIG90aGVyIHBhcmFtZXRlcnMgZnJvbSB0aGUgYnVsbCdzIGV5ZVxuICAgICAgICAgICAgdGhpcy5leHRyYWN0UGFyYW1ldGVycyhidWxsc0V5ZUNvcm5lcnMpO1xuICAgICAgICAgICAgLy8gNC4gU2FtcGxlIHRoZSBncmlkXG4gICAgICAgICAgICBsZXQgYml0cyA9IHRoaXMuc2FtcGxlR3JpZCh0aGlzLmltYWdlLCBidWxsc0V5ZUNvcm5lcnNbdGhpcy5zaGlmdCAlIDRdLCBidWxsc0V5ZUNvcm5lcnNbKHRoaXMuc2hpZnQgKyAxKSAlIDRdLCBidWxsc0V5ZUNvcm5lcnNbKHRoaXMuc2hpZnQgKyAyKSAlIDRdLCBidWxsc0V5ZUNvcm5lcnNbKHRoaXMuc2hpZnQgKyAzKSAlIDRdKTtcbiAgICAgICAgICAgIC8vIDUuIEdldCB0aGUgY29ybmVycyBvZiB0aGUgbWF0cml4LlxuICAgICAgICAgICAgbGV0IGNvcm5lcnMgPSB0aGlzLmdldE1hdHJpeENvcm5lclBvaW50cyhidWxsc0V5ZUNvcm5lcnMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBenRlY0RldGVjdG9yUmVzdWx0KGJpdHMsIGNvcm5lcnMsIHRoaXMuY29tcGFjdCwgdGhpcy5uYkRhdGFCbG9ja3MsIHRoaXMubmJMYXllcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRyYWN0cyB0aGUgbnVtYmVyIG9mIGRhdGEgbGF5ZXJzIGFuZCBkYXRhIGJsb2NrcyBmcm9tIHRoZSBsYXllciBhcm91bmQgdGhlIGJ1bGwncyBleWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBidWxsc0V5ZUNvcm5lcnMgdGhlIGFycmF5IG9mIGJ1bGwncyBleWUgY29ybmVyc1xuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGluIGNhc2Ugb2YgdG9vIG1hbnkgZXJyb3JzIG9yIGludmFsaWQgcGFyYW1ldGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgZXh0cmFjdFBhcmFtZXRlcnMoYnVsbHNFeWVDb3JuZXJzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZFBvaW50KGJ1bGxzRXllQ29ybmVyc1swXSkgfHwgIXRoaXMuaXNWYWxpZFBvaW50KGJ1bGxzRXllQ29ybmVyc1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhdGhpcy5pc1ZhbGlkUG9pbnQoYnVsbHNFeWVDb3JuZXJzWzJdKSB8fCAhdGhpcy5pc1ZhbGlkUG9pbnQoYnVsbHNFeWVDb3JuZXJzWzNdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxlbmd0aCA9IDIgKiB0aGlzLm5iQ2VudGVyTGF5ZXJzO1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBiaXRzIGFyb3VuZCB0aGUgYnVsbCdzIGV5ZVxuICAgICAgICAgICAgbGV0IHNpZGVzID0gbmV3IEludDMyQXJyYXkoW1xuICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlTGluZShidWxsc0V5ZUNvcm5lcnNbMF0sIGJ1bGxzRXllQ29ybmVyc1sxXSwgbGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZUxpbmUoYnVsbHNFeWVDb3JuZXJzWzFdLCBidWxsc0V5ZUNvcm5lcnNbMl0sIGxlbmd0aCksXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVMaW5lKGJ1bGxzRXllQ29ybmVyc1syXSwgYnVsbHNFeWVDb3JuZXJzWzNdLCBsZW5ndGgpLFxuICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlTGluZShidWxsc0V5ZUNvcm5lcnNbM10sIGJ1bGxzRXllQ29ybmVyc1swXSwgbGVuZ3RoKSAvLyBUb3BcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgLy8gYnVsbHNFeWVDb3JuZXJzW3NoaWZ0XSBpcyB0aGUgY29ybmVyIG9mIHRoZSBidWxscydleWUgdGhhdCBoYXMgdGhyZWVcbiAgICAgICAgICAgIC8vIG9yaWVudGF0aW9uIG1hcmtzLlxuICAgICAgICAgICAgLy8gc2lkZXNbc2hpZnRdIGlzIHRoZSByb3cvY29sdW1uIHRoYXQgZ29lcyBmcm9tIHRoZSBjb3JuZXIgd2l0aCB0aHJlZVxuICAgICAgICAgICAgLy8gb3JpZW50YXRpb24gbWFya3MgdG8gdGhlIGNvcm5lciB3aXRoIHR3by5cbiAgICAgICAgICAgIHRoaXMuc2hpZnQgPSB0aGlzLmdldFJvdGF0aW9uKHNpZGVzLCBsZW5ndGgpO1xuICAgICAgICAgICAgLy8gRmxhdHRlbiB0aGUgcGFyYW1ldGVyIGJpdHMgaW50byBhIHNpbmdsZSAyOC0gb3IgNDAtYml0IGxvbmdcbiAgICAgICAgICAgIGxldCBwYXJhbWV0ZXJEYXRhID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNpZGUgPSBzaWRlc1sodGhpcy5zaGlmdCArIGkpICUgNF07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFjdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFYWNoIHNpZGUgb2YgdGhlIGZvcm0gLi5YWFhYWFhYLiB3aGVyZSBYcyBhcmUgcGFyYW1ldGVyIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyRGF0YSA8PD0gNztcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyRGF0YSArPSAoc2lkZSA+PiAxKSAmIDB4N0Y7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBFYWNoIHNpZGUgb2YgdGhlIGZvcm0gLi5YWFhYWC5YWFhYWC4gd2hlcmUgWHMgYXJlIHBhcmFtZXRlciBkYXRhXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlckRhdGEgPDw9IDEwO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJEYXRhICs9ICgoc2lkZSA+PiAyKSAmICgweDFmIDw8IDUpKSArICgoc2lkZSA+PiAxKSAmIDB4MUYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENvcnJlY3RzIHBhcmFtZXRlciBkYXRhIHVzaW5nIFJTLiAgUmV0dXJucyBqdXN0IHRoZSBkYXRhIHBvcnRpb25cbiAgICAgICAgICAgIC8vIHdpdGhvdXQgdGhlIGVycm9yIGNvcnJlY3Rpb24uXG4gICAgICAgICAgICBsZXQgY29ycmVjdGVkRGF0YSA9IHRoaXMuZ2V0Q29ycmVjdGVkUGFyYW1ldGVyRGF0YShwYXJhbWV0ZXJEYXRhLCB0aGlzLmNvbXBhY3QpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIC8vIDggYml0czogIDIgYml0cyBsYXllcnMgYW5kIDYgYml0cyBkYXRhIGJsb2Nrc1xuICAgICAgICAgICAgICAgIHRoaXMubmJMYXllcnMgPSAoY29ycmVjdGVkRGF0YSA+PiA2KSArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5uYkRhdGFCbG9ja3MgPSAoY29ycmVjdGVkRGF0YSAmIDB4M0YpICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIDE2IGJpdHM6ICA1IGJpdHMgbGF5ZXJzIGFuZCAxMSBiaXRzIGRhdGEgYmxvY2tzXG4gICAgICAgICAgICAgICAgdGhpcy5uYkxheWVycyA9IChjb3JyZWN0ZWREYXRhID4+IDExKSArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5uYkRhdGFCbG9ja3MgPSAoY29ycmVjdGVkRGF0YSAmIDB4N0ZGKSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Um90YXRpb24oc2lkZXMsIGxlbmd0aCkge1xuICAgICAgICAgICAgLy8gSW4gYSBub3JtYWwgcGF0dGVybiwgd2UgZXhwZWN0IHRvIFNlZVxuICAgICAgICAgICAgLy8gICAqKiAgICAuKiAgICAgICAgICAgICBEICAgICAgIEFcbiAgICAgICAgICAgIC8vICAgKiAgICAgICpcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgIC4gICAgICAqXG4gICAgICAgICAgICAvLyAgIC4uICAgIC4uICAgICAgICAgICAgIEMgICAgICAgQlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIDMgYml0cyBmcm9tIGVhY2ggb2YgdGhlIHNpZGVzIHRoZSBmb3JtIHRoZSBsb2NhdG9yIHBhdHRlcm4gYW5kIGNvbmNhdGVuYXRlXG4gICAgICAgICAgICAvLyBpbnRvIGEgMTItYml0IGludGVnZXIuICBTdGFydCB3aXRoIHRoZSBiaXQgYXQgQVxuICAgICAgICAgICAgbGV0IGNvcm5lckJpdHMgPSAwO1xuICAgICAgICAgICAgc2lkZXMuZm9yRWFjaCgoc2lkZSwgaWR4LCBhcnIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBYWC4uLi4uLlggd2hlcmUgWCdzIGFyZSBvcmllbnRhdGlvbiBtYXJrc1xuICAgICAgICAgICAgICAgIGxldCB0ID0gKChzaWRlID4+IChsZW5ndGggLSAyKSkgPDwgMSkgKyAoc2lkZSAmIDEpO1xuICAgICAgICAgICAgICAgIGNvcm5lckJpdHMgPSAoY29ybmVyQml0cyA8PCAzKSArIHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGZvciAodmFyIHNpZGUgaW4gc2lkZXMpIHtcbiAgICAgICAgICAgIC8vICAgICAvLyBYWC4uLi4uLlggd2hlcmUgWCdzIGFyZSBvcmllbnRhdGlvbiBtYXJrc1xuICAgICAgICAgICAgLy8gICAgIHZhciB0ID0gKChzaWRlID4+IChsZW5ndGggLSAyKSkgPDwgMSkgKyAoc2lkZSAmIDEpO1xuICAgICAgICAgICAgLy8gICAgIGNvcm5lckJpdHMgPSAoY29ybmVyQml0cyA8PCAzKSArIHQ7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBNb3YgdGhlIGJvdHRvbSBiaXQgdG8gdGhlIHRvcCwgc28gdGhhdCB0aGUgdGhyZWUgYml0cyBvZiB0aGUgbG9jYXRvciBwYXR0ZXJuIGF0IEEgYXJlXG4gICAgICAgICAgICAvLyB0b2dldGhlci4gIGNvcm5lckJpdHMgaXMgbm93OlxuICAgICAgICAgICAgLy8gIDMgb3JpZW50YXRpb24gYml0cyBhdCBBIHx8IDMgb3JpZW50YXRpb24gYml0cyBhdCBCIHx8IC4uLiB8fCAzIG9yaWVudGF0aW9uIGJpdHMgYXQgRFxuICAgICAgICAgICAgY29ybmVyQml0cyA9ICgoY29ybmVyQml0cyAmIDEpIDw8IDExKSArIChjb3JuZXJCaXRzID4+IDEpO1xuICAgICAgICAgICAgLy8gVGhlIHJlc3VsdCBzaGlmdCBpbmRpY2F0ZXMgd2hpY2ggZWxlbWVudCBvZiBCdWxsc0V5ZUNvcm5lcnNbXSBnb2VzIGludG8gdGhlIHRvcC1sZWZ0XG4gICAgICAgICAgICAvLyBjb3JuZXIuIFNpbmNlIHRoZSBmb3VyIHJvdGF0aW9uIHZhbHVlcyBoYXZlIGEgSGFtbWluZyBkaXN0YW5jZSBvZiA4LCB3ZVxuICAgICAgICAgICAgLy8gY2FuIGVhc2lseSB0b2xlcmF0ZSB0d28gZXJyb3JzLlxuICAgICAgICAgICAgZm9yIChsZXQgc2hpZnQgPSAwOyBzaGlmdCA8IDQ7IHNoaWZ0KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoSW50ZWdlci5iaXRDb3VudChjb3JuZXJCaXRzIF4gdGhpcy5FWFBFQ1RFRF9DT1JORVJfQklUU1tzaGlmdF0pIDw9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNoaWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3JyZWN0cyB0aGUgcGFyYW1ldGVyIGJpdHMgdXNpbmcgUmVlZC1Tb2xvbW9uIGFsZ29yaXRobS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHBhcmFtZXRlckRhdGEgcGFyYW1ldGVyIGJpdHNcbiAgICAgICAgICogQHBhcmFtIGNvbXBhY3QgdHJ1ZSBpZiB0aGlzIGlzIGEgY29tcGFjdCBBenRlYyBjb2RlXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgdGhlIGFycmF5IGNvbnRhaW5zIHRvbyBtYW55IGVycm9yc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q29ycmVjdGVkUGFyYW1ldGVyRGF0YShwYXJhbWV0ZXJEYXRhLCBjb21wYWN0KSB7XG4gICAgICAgICAgICBsZXQgbnVtQ29kZXdvcmRzO1xuICAgICAgICAgICAgbGV0IG51bURhdGFDb2Rld29yZHM7XG4gICAgICAgICAgICBpZiAoY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIG51bUNvZGV3b3JkcyA9IDc7XG4gICAgICAgICAgICAgICAgbnVtRGF0YUNvZGV3b3JkcyA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBudW1Db2Rld29yZHMgPSAxMDtcbiAgICAgICAgICAgICAgICBudW1EYXRhQ29kZXdvcmRzID0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBudW1FQ0NvZGV3b3JkcyA9IG51bUNvZGV3b3JkcyAtIG51bURhdGFDb2Rld29yZHM7XG4gICAgICAgICAgICBsZXQgcGFyYW1ldGVyV29yZHMgPSBuZXcgSW50MzJBcnJheShudW1Db2Rld29yZHMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG51bUNvZGV3b3JkcyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyV29yZHNbaV0gPSBwYXJhbWV0ZXJEYXRhICYgMHhGO1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlckRhdGEgPj49IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCByc0RlY29kZXIgPSBuZXcgUmVlZFNvbG9tb25EZWNvZGVyKEdlbmVyaWNHRi5BWlRFQ19QQVJBTSk7XG4gICAgICAgICAgICAgICAgcnNEZWNvZGVyLmRlY29kZShwYXJhbWV0ZXJXb3JkcywgbnVtRUNDb2Rld29yZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRvc3MgdGhlIGVycm9yIGNvcnJlY3Rpb24uICBKdXN0IHJldHVybiB0aGUgZGF0YSBhcyBhbiBpbnRlZ2VyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRGF0YUNvZGV3b3JkczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKHJlc3VsdCA8PCA0KSArIHBhcmFtZXRlcldvcmRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRmluZHMgdGhlIGNvcm5lcnMgb2YgYSBidWxsLWV5ZSBjZW50ZXJlZCBvbiB0aGUgcGFzc2VkIHBvaW50LlxuICAgICAgICAgKiBUaGlzIHJldHVybnMgdGhlIGNlbnRlcnMgb2YgdGhlIGRpYWdvbmFsIHBvaW50cyBqdXN0IG91dHNpZGUgdGhlIGJ1bGwncyBleWVcbiAgICAgICAgICogUmV0dXJucyBbdG9wUmlnaHQsIGJvdHRvbVJpZ2h0LCBib3R0b21MZWZ0LCB0b3BMZWZ0XVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcENlbnRlciBDZW50ZXIgcG9pbnRcbiAgICAgICAgICogQHJldHVybiBUaGUgY29ybmVycyBvZiB0aGUgYnVsbC1leWVcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBJZiBubyB2YWxpZCBidWxsLWV5ZSBjYW4gYmUgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGdldEJ1bGxzRXllQ29ybmVycyhwQ2VudGVyKSB7XG4gICAgICAgICAgICBsZXQgcGluYSA9IHBDZW50ZXI7XG4gICAgICAgICAgICBsZXQgcGluYiA9IHBDZW50ZXI7XG4gICAgICAgICAgICBsZXQgcGluYyA9IHBDZW50ZXI7XG4gICAgICAgICAgICBsZXQgcGluZCA9IHBDZW50ZXI7XG4gICAgICAgICAgICBsZXQgY29sb3IgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh0aGlzLm5iQ2VudGVyTGF5ZXJzID0gMTsgdGhpcy5uYkNlbnRlckxheWVycyA8IDk7IHRoaXMubmJDZW50ZXJMYXllcnMrKykge1xuICAgICAgICAgICAgICAgIGxldCBwb3V0YSA9IHRoaXMuZ2V0Rmlyc3REaWZmZXJlbnQocGluYSwgY29sb3IsIDEsIC0xKTtcbiAgICAgICAgICAgICAgICBsZXQgcG91dGIgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KHBpbmIsIGNvbG9yLCAxLCAxKTtcbiAgICAgICAgICAgICAgICBsZXQgcG91dGMgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KHBpbmMsIGNvbG9yLCAtMSwgMSk7XG4gICAgICAgICAgICAgICAgbGV0IHBvdXRkID0gdGhpcy5nZXRGaXJzdERpZmZlcmVudChwaW5kLCBjb2xvciwgLTEsIC0xKTtcbiAgICAgICAgICAgICAgICAvLyBkICAgICAgYVxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gYyAgICAgIGJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uYkNlbnRlckxheWVycyA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHEgPSAodGhpcy5kaXN0YW5jZVBvaW50KHBvdXRkLCBwb3V0YSkgKiB0aGlzLm5iQ2VudGVyTGF5ZXJzKSAvICh0aGlzLmRpc3RhbmNlUG9pbnQocGluZCwgcGluYSkgKiAodGhpcy5uYkNlbnRlckxheWVycyArIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEgPCAwLjc1IHx8IHEgPiAxLjI1IHx8ICF0aGlzLmlzV2hpdGVPckJsYWNrUmVjdGFuZ2xlKHBvdXRhLCBwb3V0YiwgcG91dGMsIHBvdXRkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGluYSA9IHBvdXRhO1xuICAgICAgICAgICAgICAgIHBpbmIgPSBwb3V0YjtcbiAgICAgICAgICAgICAgICBwaW5jID0gcG91dGM7XG4gICAgICAgICAgICAgICAgcGluZCA9IHBvdXRkO1xuICAgICAgICAgICAgICAgIGNvbG9yID0gIWNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubmJDZW50ZXJMYXllcnMgIT09IDUgJiYgdGhpcy5uYkNlbnRlckxheWVycyAhPT0gNykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wYWN0ID0gdGhpcy5uYkNlbnRlckxheWVycyA9PT0gNTtcbiAgICAgICAgICAgIC8vIEV4cGFuZCB0aGUgc3F1YXJlIGJ5IC41IHBpeGVsIGluIGVhY2ggZGlyZWN0aW9uIHNvIHRoYXQgd2UncmUgb24gdGhlIGJvcmRlclxuICAgICAgICAgICAgLy8gYmV0d2VlbiB0aGUgd2hpdGUgc3F1YXJlIGFuZCB0aGUgYmxhY2sgc3F1YXJlXG4gICAgICAgICAgICBsZXQgcGluYXggPSBuZXcgUmVzdWx0UG9pbnQocGluYS5nZXRYKCkgKyAwLjUsIHBpbmEuZ2V0WSgpIC0gMC41KTtcbiAgICAgICAgICAgIGxldCBwaW5ieCA9IG5ldyBSZXN1bHRQb2ludChwaW5iLmdldFgoKSArIDAuNSwgcGluYi5nZXRZKCkgKyAwLjUpO1xuICAgICAgICAgICAgbGV0IHBpbmN4ID0gbmV3IFJlc3VsdFBvaW50KHBpbmMuZ2V0WCgpIC0gMC41LCBwaW5jLmdldFkoKSArIDAuNSk7XG4gICAgICAgICAgICBsZXQgcGluZHggPSBuZXcgUmVzdWx0UG9pbnQocGluZC5nZXRYKCkgLSAwLjUsIHBpbmQuZ2V0WSgpIC0gMC41KTtcbiAgICAgICAgICAgIC8vIEV4cGFuZCB0aGUgc3F1YXJlIHNvIHRoYXQgaXRzIGNvcm5lcnMgYXJlIHRoZSBjZW50ZXJzIG9mIHRoZSBwb2ludHNcbiAgICAgICAgICAgIC8vIGp1c3Qgb3V0c2lkZSB0aGUgYnVsbCdzIGV5ZS5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4cGFuZFNxdWFyZShbcGluYXgsIHBpbmJ4LCBwaW5jeCwgcGluZHhdLCAyICogdGhpcy5uYkNlbnRlckxheWVycyAtIDMsIDIgKiB0aGlzLm5iQ2VudGVyTGF5ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRmluZHMgYSBjYW5kaWRhdGUgY2VudGVyIHBvaW50IG9mIGFuIEF6dGVjIGNvZGUgZnJvbSBhbiBpbWFnZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBjZW50ZXIgcG9pbnRcbiAgICAgICAgICovXG4gICAgICAgIGdldE1hdHJpeENlbnRlcigpIHtcbiAgICAgICAgICAgIGxldCBwb2ludEE7XG4gICAgICAgICAgICBsZXQgcG9pbnRCO1xuICAgICAgICAgICAgbGV0IHBvaW50QztcbiAgICAgICAgICAgIGxldCBwb2ludEQ7XG4gICAgICAgICAgICAvLyBHZXQgYSB3aGl0ZSByZWN0YW5nbGUgdGhhdCBjYW4gYmUgdGhlIGJvcmRlciBvZiB0aGUgbWF0cml4IGluIGNlbnRlciBidWxsJ3MgZXllIG9yXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBjb3JuZXJQb2ludHMgPSBuZXcgV2hpdGVSZWN0YW5nbGVEZXRlY3Rvcih0aGlzLmltYWdlKS5kZXRlY3QoKTtcbiAgICAgICAgICAgICAgICBwb2ludEEgPSBjb3JuZXJQb2ludHNbMF07XG4gICAgICAgICAgICAgICAgcG9pbnRCID0gY29ybmVyUG9pbnRzWzFdO1xuICAgICAgICAgICAgICAgIHBvaW50QyA9IGNvcm5lclBvaW50c1syXTtcbiAgICAgICAgICAgICAgICBwb2ludEQgPSBjb3JuZXJQb2ludHNbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZXhjZXB0aW9uIGNhbiBiZSBpbiBjYXNlIHRoZSBpbml0aWFsIHJlY3RhbmdsZSBpcyB3aGl0ZVxuICAgICAgICAgICAgICAgIC8vIEluIHRoYXQgY2FzZSwgc3VyZWx5IGluIHRoZSBidWxsJ3MgZXllLCB3ZSB0cnkgdG8gZXhwYW5kIHRoZSByZWN0YW5nbGUuXG4gICAgICAgICAgICAgICAgbGV0IGN4ID0gdGhpcy5pbWFnZS5nZXRXaWR0aCgpIC8gMjtcbiAgICAgICAgICAgICAgICBsZXQgY3kgPSB0aGlzLmltYWdlLmdldEhlaWdodCgpIC8gMjtcbiAgICAgICAgICAgICAgICBwb2ludEEgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KG5ldyBQb2ludChjeCArIDcsIGN5IC0gNyksIGZhbHNlLCAxLCAtMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgICAgIHBvaW50QiA9IHRoaXMuZ2V0Rmlyc3REaWZmZXJlbnQobmV3IFBvaW50KGN4ICsgNywgY3kgKyA3KSwgZmFsc2UsIDEsIDEpLnRvUmVzdWx0UG9pbnQoKTtcbiAgICAgICAgICAgICAgICBwb2ludEMgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KG5ldyBQb2ludChjeCAtIDcsIGN5ICsgNyksIGZhbHNlLCAtMSwgMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgICAgIHBvaW50RCA9IHRoaXMuZ2V0Rmlyc3REaWZmZXJlbnQobmV3IFBvaW50KGN4IC0gNywgY3kgLSA3KSwgZmFsc2UsIC0xLCAtMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgY2VudGVyIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgICAgICAgIGxldCBjeCA9IE1hdGhVdGlscy5yb3VuZCgocG9pbnRBLmdldFgoKSArIHBvaW50RC5nZXRYKCkgKyBwb2ludEIuZ2V0WCgpICsgcG9pbnRDLmdldFgoKSkgLyA0LjApO1xuICAgICAgICAgICAgbGV0IGN5ID0gTWF0aFV0aWxzLnJvdW5kKChwb2ludEEuZ2V0WSgpICsgcG9pbnRELmdldFkoKSArIHBvaW50Qi5nZXRZKCkgKyBwb2ludEMuZ2V0WSgpKSAvIDQuMCk7XG4gICAgICAgICAgICAvLyBSZWRldGVybWluZSB0aGUgd2hpdGUgcmVjdGFuZ2xlIHN0YXJ0aW5nIGZyb20gcHJldmlvdXNseSBjb21wdXRlZCBjZW50ZXIuXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgZW5zdXJlIHRoYXQgd2UgZW5kIHVwIHdpdGggYSB3aGl0ZSByZWN0YW5nbGUgaW4gY2VudGVyIGJ1bGwncyBleWVcbiAgICAgICAgICAgIC8vIGluIG9yZGVyIHRvIGNvbXB1dGUgYSBtb3JlIGFjY3VyYXRlIGNlbnRlci5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvcm5lclBvaW50cyA9IG5ldyBXaGl0ZVJlY3RhbmdsZURldGVjdG9yKHRoaXMuaW1hZ2UsIDE1LCBjeCwgY3kpLmRldGVjdCgpO1xuICAgICAgICAgICAgICAgIHBvaW50QSA9IGNvcm5lclBvaW50c1swXTtcbiAgICAgICAgICAgICAgICBwb2ludEIgPSBjb3JuZXJQb2ludHNbMV07XG4gICAgICAgICAgICAgICAgcG9pbnRDID0gY29ybmVyUG9pbnRzWzJdO1xuICAgICAgICAgICAgICAgIHBvaW50RCA9IGNvcm5lclBvaW50c1szXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBleGNlcHRpb24gY2FuIGJlIGluIGNhc2UgdGhlIGluaXRpYWwgcmVjdGFuZ2xlIGlzIHdoaXRlXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhhdCBjYXNlIHdlIHRyeSB0byBleHBhbmQgdGhlIHJlY3RhbmdsZS5cbiAgICAgICAgICAgICAgICBwb2ludEEgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KG5ldyBQb2ludChjeCArIDcsIGN5IC0gNyksIGZhbHNlLCAxLCAtMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgICAgIHBvaW50QiA9IHRoaXMuZ2V0Rmlyc3REaWZmZXJlbnQobmV3IFBvaW50KGN4ICsgNywgY3kgKyA3KSwgZmFsc2UsIDEsIDEpLnRvUmVzdWx0UG9pbnQoKTtcbiAgICAgICAgICAgICAgICBwb2ludEMgPSB0aGlzLmdldEZpcnN0RGlmZmVyZW50KG5ldyBQb2ludChjeCAtIDcsIGN5ICsgNyksIGZhbHNlLCAtMSwgMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgICAgIHBvaW50RCA9IHRoaXMuZ2V0Rmlyc3REaWZmZXJlbnQobmV3IFBvaW50KGN4IC0gNywgY3kgLSA3KSwgZmFsc2UsIC0xLCAtMSkudG9SZXN1bHRQb2ludCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVjb21wdXRlIHRoZSBjZW50ZXIgb2YgdGhlIHJlY3RhbmdsZVxuICAgICAgICAgICAgY3ggPSBNYXRoVXRpbHMucm91bmQoKHBvaW50QS5nZXRYKCkgKyBwb2ludEQuZ2V0WCgpICsgcG9pbnRCLmdldFgoKSArIHBvaW50Qy5nZXRYKCkpIC8gNC4wKTtcbiAgICAgICAgICAgIGN5ID0gTWF0aFV0aWxzLnJvdW5kKChwb2ludEEuZ2V0WSgpICsgcG9pbnRELmdldFkoKSArIHBvaW50Qi5nZXRZKCkgKyBwb2ludEMuZ2V0WSgpKSAvIDQuMCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvaW50KGN4LCBjeSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIEF6dGVjIGNvZGUgY29ybmVycyBmcm9tIHRoZSBidWxsJ3MgZXllIGNvcm5lcnMgYW5kIHRoZSBwYXJhbWV0ZXJzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYnVsbHNFeWVDb3JuZXJzIHRoZSBhcnJheSBvZiBidWxsJ3MgZXllIGNvcm5lcnNcbiAgICAgICAgICogQHJldHVybiB0aGUgYXJyYXkgb2YgYXp0ZWMgY29kZSBjb3JuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBnZXRNYXRyaXhDb3JuZXJQb2ludHMoYnVsbHNFeWVDb3JuZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBhbmRTcXVhcmUoYnVsbHNFeWVDb3JuZXJzLCAyICogdGhpcy5uYkNlbnRlckxheWVycywgdGhpcy5nZXREaW1lbnNpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBCaXRNYXRyaXggYnkgc2FtcGxpbmcgdGhlIHByb3ZpZGVkIGltYWdlLlxuICAgICAgICAgKiB0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tUmlnaHQsIGFuZCBib3R0b21MZWZ0IGFyZSB0aGUgY2VudGVycyBvZiB0aGUgc3F1YXJlcyBvbiB0aGVcbiAgICAgICAgICogZGlhZ29uYWwganVzdCBvdXRzaWRlIHRoZSBidWxsJ3MgZXllLlxuICAgICAgICAgKi9cbiAgICAgICAgc2FtcGxlR3JpZChpbWFnZSwgdG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbVJpZ2h0LCBib3R0b21MZWZ0KSB7XG4gICAgICAgICAgICBsZXQgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIGxldCBkaW1lbnNpb24gPSB0aGlzLmdldERpbWVuc2lvbigpO1xuICAgICAgICAgICAgbGV0IGxvdyA9IGRpbWVuc2lvbiAvIDIgLSB0aGlzLm5iQ2VudGVyTGF5ZXJzO1xuICAgICAgICAgICAgbGV0IGhpZ2ggPSBkaW1lbnNpb24gLyAyICsgdGhpcy5uYkNlbnRlckxheWVycztcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWQoaW1hZ2UsIGRpbWVuc2lvbiwgZGltZW5zaW9uLCBsb3csIGxvdywgLy8gdG9wbGVmdFxuICAgICAgICAgICAgaGlnaCwgbG93LCAvLyB0b3ByaWdodFxuICAgICAgICAgICAgaGlnaCwgaGlnaCwgLy8gYm90dG9tcmlnaHRcbiAgICAgICAgICAgIGxvdywgaGlnaCwgLy8gYm90dG9tbGVmdFxuICAgICAgICAgICAgdG9wTGVmdC5nZXRYKCksIHRvcExlZnQuZ2V0WSgpLCB0b3BSaWdodC5nZXRYKCksIHRvcFJpZ2h0LmdldFkoKSwgYm90dG9tUmlnaHQuZ2V0WCgpLCBib3R0b21SaWdodC5nZXRZKCksIGJvdHRvbUxlZnQuZ2V0WCgpLCBib3R0b21MZWZ0LmdldFkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNhbXBsZXMgYSBsaW5lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcDEgICBzdGFydCBwb2ludCAoaW5jbHVzaXZlKVxuICAgICAgICAgKiBAcGFyYW0gcDIgICBlbmQgcG9pbnQgKGV4Y2x1c2l2ZSlcbiAgICAgICAgICogQHBhcmFtIHNpemUgbnVtYmVyIG9mIGJpdHNcbiAgICAgICAgICogQHJldHVybiB0aGUgYXJyYXkgb2YgYml0cyBhcyBhbiBpbnQgKGZpcnN0IGJpdCBpcyBoaWdoLW9yZGVyIGJpdCBvZiByZXN1bHQpXG4gICAgICAgICAqL1xuICAgICAgICBzYW1wbGVMaW5lKHAxLCBwMiwgc2l6ZSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgICAgICAgICBsZXQgZCA9IHRoaXMuZGlzdGFuY2VSZXN1bHRQb2ludChwMSwgcDIpO1xuICAgICAgICAgICAgbGV0IG1vZHVsZVNpemUgPSBkIC8gc2l6ZTtcbiAgICAgICAgICAgIGxldCBweCA9IHAxLmdldFgoKTtcbiAgICAgICAgICAgIGxldCBweSA9IHAxLmdldFkoKTtcbiAgICAgICAgICAgIGxldCBkeCA9IG1vZHVsZVNpemUgKiAocDIuZ2V0WCgpIC0gcDEuZ2V0WCgpKSAvIGQ7XG4gICAgICAgICAgICBsZXQgZHkgPSBtb2R1bGVTaXplICogKHAyLmdldFkoKSAtIHAxLmdldFkoKSkgLyBkO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbWFnZS5nZXQoTWF0aFV0aWxzLnJvdW5kKHB4ICsgaSAqIGR4KSwgTWF0aFV0aWxzLnJvdW5kKHB5ICsgaSAqIGR5KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0IHw9IDEgPDwgKHNpemUgLSBpIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBib3JkZXIgb2YgdGhlIHJlY3RhbmdsZSBwYXNzZWQgaW4gcGFyYW1ldGVyIGlzIGNvbXBvdW5kIG9mIHdoaXRlIHBvaW50cyBvbmx5XG4gICAgICAgICAqICAgICAgICAgb3IgYmxhY2sgcG9pbnRzIG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIGlzV2hpdGVPckJsYWNrUmVjdGFuZ2xlKHAxLCBwMiwgcDMsIHA0KSB7XG4gICAgICAgICAgICBsZXQgY29yciA9IDM7XG4gICAgICAgICAgICBwMSA9IG5ldyBQb2ludChwMS5nZXRYKCkgLSBjb3JyLCBwMS5nZXRZKCkgKyBjb3JyKTtcbiAgICAgICAgICAgIHAyID0gbmV3IFBvaW50KHAyLmdldFgoKSAtIGNvcnIsIHAyLmdldFkoKSAtIGNvcnIpO1xuICAgICAgICAgICAgcDMgPSBuZXcgUG9pbnQocDMuZ2V0WCgpICsgY29yciwgcDMuZ2V0WSgpIC0gY29ycik7XG4gICAgICAgICAgICBwNCA9IG5ldyBQb2ludChwNC5nZXRYKCkgKyBjb3JyLCBwNC5nZXRZKCkgKyBjb3JyKTtcbiAgICAgICAgICAgIGxldCBjSW5pdCA9IHRoaXMuZ2V0Q29sb3IocDQsIHAxKTtcbiAgICAgICAgICAgIGlmIChjSW5pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjID0gdGhpcy5nZXRDb2xvcihwMSwgcDIpO1xuICAgICAgICAgICAgaWYgKGMgIT09IGNJbml0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyA9IHRoaXMuZ2V0Q29sb3IocDIsIHAzKTtcbiAgICAgICAgICAgIGlmIChjICE9PSBjSW5pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMgPSB0aGlzLmdldENvbG9yKHAzLCBwNCk7XG4gICAgICAgICAgICByZXR1cm4gYyA9PT0gY0luaXQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGNvbG9yIG9mIGEgc2VnbWVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIDEgaWYgc2VnbWVudCBtb3JlIHRoYW4gOTAlIGJsYWNrLCAtMSBpZiBzZWdtZW50IGlzIG1vcmUgdGhhbiA5MCUgd2hpdGUsIDAgZWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q29sb3IocDEsIHAyKSB7XG4gICAgICAgICAgICBsZXQgZCA9IHRoaXMuZGlzdGFuY2VQb2ludChwMSwgcDIpO1xuICAgICAgICAgICAgbGV0IGR4ID0gKHAyLmdldFgoKSAtIHAxLmdldFgoKSkgLyBkO1xuICAgICAgICAgICAgbGV0IGR5ID0gKHAyLmdldFkoKSAtIHAxLmdldFkoKSkgLyBkO1xuICAgICAgICAgICAgbGV0IGVycm9yID0gMDtcbiAgICAgICAgICAgIGxldCBweCA9IHAxLmdldFgoKTtcbiAgICAgICAgICAgIGxldCBweSA9IHAxLmdldFkoKTtcbiAgICAgICAgICAgIGxldCBjb2xvck1vZGVsID0gdGhpcy5pbWFnZS5nZXQocDEuZ2V0WCgpLCBwMS5nZXRZKCkpO1xuICAgICAgICAgICAgbGV0IGlNYXggPSBNYXRoLmNlaWwoZCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlNYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIHB4ICs9IGR4O1xuICAgICAgICAgICAgICAgIHB5ICs9IGR5O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmltYWdlLmdldChNYXRoVXRpbHMucm91bmQocHgpLCBNYXRoVXRpbHMucm91bmQocHkpKSAhPT0gY29sb3JNb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlcnJSYXRpbyA9IGVycm9yIC8gZDtcbiAgICAgICAgICAgIGlmIChlcnJSYXRpbyA+IDAuMSAmJiBlcnJSYXRpbyA8IDAuOSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChlcnJSYXRpbyA8PSAwLjEpID09PSBjb2xvck1vZGVsID8gMSA6IC0xO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBjb29yZGluYXRlIG9mIHRoZSBmaXJzdCBwb2ludCB3aXRoIGEgZGlmZmVyZW50IGNvbG9yIGluIHRoZSBnaXZlbiBkaXJlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGdldEZpcnN0RGlmZmVyZW50KGluaXQsIGNvbG9yLCBkeCwgZHkpIHtcbiAgICAgICAgICAgIGxldCB4ID0gaW5pdC5nZXRYKCkgKyBkeDtcbiAgICAgICAgICAgIGxldCB5ID0gaW5pdC5nZXRZKCkgKyBkeTtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmlzVmFsaWQoeCwgeSkgJiYgdGhpcy5pbWFnZS5nZXQoeCwgeSkgPT09IGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgeCArPSBkeDtcbiAgICAgICAgICAgICAgICB5ICs9IGR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeCAtPSBkeDtcbiAgICAgICAgICAgIHkgLT0gZHk7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pc1ZhbGlkKHgsIHkpICYmIHRoaXMuaW1hZ2UuZ2V0KHgsIHkpID09PSBjb2xvcikge1xuICAgICAgICAgICAgICAgIHggKz0gZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4IC09IGR4O1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuaXNWYWxpZCh4LCB5KSAmJiB0aGlzLmltYWdlLmdldCh4LCB5KSA9PT0gY29sb3IpIHtcbiAgICAgICAgICAgICAgICB5ICs9IGR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeSAtPSBkeTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9pbnQoeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4cGFuZCB0aGUgc3F1YXJlIHJlcHJlc2VudGVkIGJ5IHRoZSBjb3JuZXIgcG9pbnRzIGJ5IHB1c2hpbmcgb3V0IGVxdWFsbHkgaW4gYWxsIGRpcmVjdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvcm5lclBvaW50cyB0aGUgY29ybmVycyBvZiB0aGUgc3F1YXJlLCB3aGljaCBoYXMgdGhlIGJ1bGwncyBleWUgYXQgaXRzIGNlbnRlclxuICAgICAgICAgKiBAcGFyYW0gb2xkU2lkZSB0aGUgb3JpZ2luYWwgbGVuZ3RoIG9mIHRoZSBzaWRlIG9mIHRoZSBzcXVhcmUgaW4gdGhlIHRhcmdldCBiaXQgbWF0cml4XG4gICAgICAgICAqIEBwYXJhbSBuZXdTaWRlIHRoZSBuZXcgbGVuZ3RoIG9mIHRoZSBzaXplIG9mIHRoZSBzcXVhcmUgaW4gdGhlIHRhcmdldCBiaXQgbWF0cml4XG4gICAgICAgICAqIEByZXR1cm4gdGhlIGNvcm5lcnMgb2YgdGhlIGV4cGFuZGVkIHNxdWFyZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwYW5kU3F1YXJlKGNvcm5lclBvaW50cywgb2xkU2lkZSwgbmV3U2lkZSkge1xuICAgICAgICAgICAgbGV0IHJhdGlvID0gbmV3U2lkZSAvICgyLjAgKiBvbGRTaWRlKTtcbiAgICAgICAgICAgIGxldCBkeCA9IGNvcm5lclBvaW50c1swXS5nZXRYKCkgLSBjb3JuZXJQb2ludHNbMl0uZ2V0WCgpO1xuICAgICAgICAgICAgbGV0IGR5ID0gY29ybmVyUG9pbnRzWzBdLmdldFkoKSAtIGNvcm5lclBvaW50c1syXS5nZXRZKCk7XG4gICAgICAgICAgICBsZXQgY2VudGVyeCA9IChjb3JuZXJQb2ludHNbMF0uZ2V0WCgpICsgY29ybmVyUG9pbnRzWzJdLmdldFgoKSkgLyAyLjA7XG4gICAgICAgICAgICBsZXQgY2VudGVyeSA9IChjb3JuZXJQb2ludHNbMF0uZ2V0WSgpICsgY29ybmVyUG9pbnRzWzJdLmdldFkoKSkgLyAyLjA7XG4gICAgICAgICAgICBsZXQgcmVzdWx0MCA9IG5ldyBSZXN1bHRQb2ludChjZW50ZXJ4ICsgcmF0aW8gKiBkeCwgY2VudGVyeSArIHJhdGlvICogZHkpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdDIgPSBuZXcgUmVzdWx0UG9pbnQoY2VudGVyeCAtIHJhdGlvICogZHgsIGNlbnRlcnkgLSByYXRpbyAqIGR5KTtcbiAgICAgICAgICAgIGR4ID0gY29ybmVyUG9pbnRzWzFdLmdldFgoKSAtIGNvcm5lclBvaW50c1szXS5nZXRYKCk7XG4gICAgICAgICAgICBkeSA9IGNvcm5lclBvaW50c1sxXS5nZXRZKCkgLSBjb3JuZXJQb2ludHNbM10uZ2V0WSgpO1xuICAgICAgICAgICAgY2VudGVyeCA9IChjb3JuZXJQb2ludHNbMV0uZ2V0WCgpICsgY29ybmVyUG9pbnRzWzNdLmdldFgoKSkgLyAyLjA7XG4gICAgICAgICAgICBjZW50ZXJ5ID0gKGNvcm5lclBvaW50c1sxXS5nZXRZKCkgKyBjb3JuZXJQb2ludHNbM10uZ2V0WSgpKSAvIDIuMDtcbiAgICAgICAgICAgIGxldCByZXN1bHQxID0gbmV3IFJlc3VsdFBvaW50KGNlbnRlcnggKyByYXRpbyAqIGR4LCBjZW50ZXJ5ICsgcmF0aW8gKiBkeSk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0MyA9IG5ldyBSZXN1bHRQb2ludChjZW50ZXJ4IC0gcmF0aW8gKiBkeCwgY2VudGVyeSAtIHJhdGlvICogZHkpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBbcmVzdWx0MCwgcmVzdWx0MSwgcmVzdWx0MiwgcmVzdWx0M107XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBpc1ZhbGlkKHgsIHkpIHtcbiAgICAgICAgICAgIHJldHVybiB4ID49IDAgJiYgeCA8IHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAmJiB5ID4gMCAmJiB5IDwgdGhpcy5pbWFnZS5nZXRIZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpc1ZhbGlkUG9pbnQocG9pbnQpIHtcbiAgICAgICAgICAgIGxldCB4ID0gTWF0aFV0aWxzLnJvdW5kKHBvaW50LmdldFgoKSk7XG4gICAgICAgICAgICBsZXQgeSA9IE1hdGhVdGlscy5yb3VuZChwb2ludC5nZXRZKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCh4LCB5KTtcbiAgICAgICAgfVxuICAgICAgICBkaXN0YW5jZVBvaW50KGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHMuZGlzdGFuY2UoYS5nZXRYKCksIGEuZ2V0WSgpLCBiLmdldFgoKSwgYi5nZXRZKCkpO1xuICAgICAgICB9XG4gICAgICAgIGRpc3RhbmNlUmVzdWx0UG9pbnQoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGhVdGlscy5kaXN0YW5jZShhLmdldFgoKSwgYS5nZXRZKCksIGIuZ2V0WCgpLCBiLmdldFkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RGltZW5zaW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiA0ICogdGhpcy5uYkxheWVycyArIDExO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubmJMYXllcnMgPD0gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiA0ICogdGhpcy5uYkxheWVycyArIDE1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDQgKiB0aGlzLm5iTGF5ZXJzICsgMiAqIChJbnRlZ2VyLnRydW5jRGl2aXNpb24oKHRoaXMubmJMYXllcnMgLSA0KSwgOCkgKyAxKSArIDE1O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMCBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5NYXA7XG4gICAgLyoqXG4gICAgICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgQXp0ZWMgY29kZXMgaW4gYW4gaW1hZ2UuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIERhdmlkIE9saXZpZXJcbiAgICAgKi9cbiAgICBjbGFzcyBBenRlY1JlYWRlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgRGF0YSBNYXRyaXggY29kZSBpbiBhbiBpbWFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBhIFN0cmluZyByZXByZXNlbnRpbmcgdGhlIGNvbnRlbnQgZW5jb2RlZCBieSB0aGUgRGF0YSBNYXRyaXggY29kZVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIGEgRGF0YSBNYXRyaXggY29kZSBjYW5ub3QgYmUgZm91bmRcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBEYXRhIE1hdHJpeCBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGUoaW1hZ2UsIGhpbnRzID0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IGV4Y2VwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBsZXQgZGV0ZWN0b3IgPSBuZXcgRGV0ZWN0b3IoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7XG4gICAgICAgICAgICBsZXQgcG9pbnRzID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkZWNvZGVyUmVzdWx0ID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGRldGVjdG9yUmVzdWx0ID0gZGV0ZWN0b3IuZGV0ZWN0TWlycm9yKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcG9ydEZvdW5kUmVzdWx0UG9pbnRzKGhpbnRzLCBwb2ludHMpO1xuICAgICAgICAgICAgICAgIGRlY29kZXJSZXN1bHQgPSBuZXcgRGVjb2RlcigpLmRlY29kZShkZXRlY3RvclJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGV4Y2VwdGlvbiA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVjb2RlclJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRldGVjdG9yUmVzdWx0ID0gZGV0ZWN0b3IuZGV0ZWN0TWlycm9yKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRGb3VuZFJlc3VsdFBvaW50cyhoaW50cywgcG9pbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IG5ldyBEZWNvZGVyKCkuZGVjb2RlKGRldGVjdG9yUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFJlc3VsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCBkZWNvZGVyUmVzdWx0LmdldE51bUJpdHMoKSwgcG9pbnRzLCBCYXJjb2RlRm9ybWF0JDEuQVpURUMsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKTtcbiAgICAgICAgICAgIGxldCBieXRlU2VnbWVudHMgPSBkZWNvZGVyUmVzdWx0LmdldEJ5dGVTZWdtZW50cygpO1xuICAgICAgICAgICAgaWYgKGJ5dGVTZWdtZW50cyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZSQxLkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZWNMZXZlbCA9IGRlY29kZXJSZXN1bHQuZ2V0RUNMZXZlbCgpO1xuICAgICAgICAgICAgaWYgKGVjTGV2ZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OX0xFVkVMLCBlY0xldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVwb3J0Rm91bmRSZXN1bHRQb2ludHMoaGludHMsIHBvaW50cykge1xuICAgICAgICAgICAgaWYgKGhpbnRzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgcnBjYiA9IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLKTtcbiAgICAgICAgICAgICAgICBpZiAocnBjYiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5mb3JFYWNoKChwb2ludCwgaWR4LCBhcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJwY2IuZm91bmRQb3NzaWJsZVJlc3VsdFBvaW50KHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF6dGVjIENvZGUgcmVhZGVyIHRvIHVzZSBmcm9tIGJyb3dzZXIuXG4gICAgICpcbiAgICAgKiBAY2xhc3MgQnJvd3NlckF6dGVjQ29kZVJlYWRlclxuICAgICAqIEBleHRlbmRzIHtCcm93c2VyQ29kZVJlYWRlcn1cbiAgICAgKi9cbiAgICBjbGFzcyBCcm93c2VyQXp0ZWNDb2RlUmVhZGVyIGV4dGVuZHMgQnJvd3NlckNvZGVSZWFkZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBCcm93c2VyQXp0ZWNDb2RlUmVhZGVyLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVCZXR3ZWVuU2NhbnNNaWxsaXM9NTAwXSB0aGUgdGltZSBkZWxheSBiZXR3ZWVuIHN1YnNlcXVlbnQgZGVjb2RlIHRyaWVzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBCcm93c2VyQXp0ZWNDb2RlUmVhZGVyXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcih0aW1lQmV0d2VlblNjYW5zTWlsbGlzID0gNTAwKSB7XG4gICAgICAgICAgICBzdXBlcihuZXcgQXp0ZWNSZWFkZXIoKSwgdGltZUJldHdlZW5TY2Fuc01pbGxpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmNhcHN1bGF0ZXMgZnVuY3Rpb25hbGl0eSBhbmQgaW1wbGVtZW50YXRpb24gdGhhdCBpcyBjb21tb24gdG8gYWxsIGZhbWlsaWVzXG4gICAgICogb2Ygb25lLWRpbWVuc2lvbmFsIGJhcmNvZGVzLlxuICAgICAqXG4gICAgICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbilcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIE9uZURSZWFkZXIge1xuICAgICAgICAvKlxuICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgcHVibGljIFJlc3VsdCBkZWNvZGUoQmluYXJ5Qml0bWFwIGltYWdlKSB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiB7XG4gICAgICAgICAgcmV0dXJuIGRlY29kZShpbWFnZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIGRvbid0IHRyeSByb3RhdGlvbiB3aXRob3V0IHRoZSB0cnkgaGFyZGVyIGZsYWcsIGV2ZW4gaWYgcm90YXRpb24gd2FzIHN1cHBvcnRlZC5cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGRlY29kZShpbWFnZSwgaGludHMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9EZWNvZGUoaW1hZ2UsIGhpbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChuZmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cnlIYXJkZXIgPSBoaW50cyAmJiAoaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuVFJZX0hBUkRFUikgPT09IHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICh0cnlIYXJkZXIgJiYgaW1hZ2UuaXNSb3RhdGVTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3RhdGVkSW1hZ2UgPSBpbWFnZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZG9EZWNvZGUocm90YXRlZEltYWdlLCBoaW50cyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGF0IHdlIGZvdW5kIGl0IHJvdGF0ZWQgOTAgZGVncmVlcyBDQ1cgLyAyNzAgZGVncmVlcyBDV1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHJlc3VsdC5nZXRSZXN1bHRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZW50YXRpb24gPSAyNzA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSAhPT0gbnVsbCAmJiAobWV0YWRhdGEuZ2V0KFJlc3VsdE1ldGFkYXRhVHlwZSQxLk9SSUVOVEFUSU9OKSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBpZiB3ZSBmb3VuZCBpdCByZXZlcnNlZCBpbiBkb0RlY29kZSgpLCBhZGQgaW4gdGhhdCByZXN1bHQgaGVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uID0gKG9yaWVudGF0aW9uICsgbWV0YWRhdGEuZ2V0KFJlc3VsdE1ldGFkYXRhVHlwZSQxLk9SSUVOVEFUSU9OKSAlIDM2MCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZSQxLk9SSUVOVEFUSU9OLCBvcmllbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByZXN1bHQgcG9pbnRzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHJlc3VsdC5nZXRSZXN1bHRQb2ludHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gcm90YXRlZEltYWdlLmdldEhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbaV0gPSBuZXcgUmVzdWx0UG9pbnQoaGVpZ2h0IC0gcG9pbnRzW2ldLmdldFkoKSAtIDEsIHBvaW50c1tpXS5nZXRYKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIHJlc2V0KCkge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXZSdyZSBnb2luZyB0byBleGFtaW5lIHJvd3MgZnJvbSB0aGUgbWlkZGxlIG91dHdhcmQsIHNlYXJjaGluZyBhbHRlcm5hdGVseSBhYm92ZSBhbmQgYmVsb3cgdGhlXG4gICAgICAgICAqIG1pZGRsZSwgYW5kIGZhcnRoZXIgb3V0IGVhY2ggdGltZS4gcm93U3RlcCBpcyB0aGUgbnVtYmVyIG9mIHJvd3MgYmV0d2VlbiBlYWNoIHN1Y2Nlc3NpdmVcbiAgICAgICAgICogYXR0ZW1wdCBhYm92ZSBhbmQgYmVsb3cgdGhlIG1pZGRsZS4gU28gd2UnZCBzY2FuIHJvdyBtaWRkbGUsIHRoZW4gbWlkZGxlIC0gcm93U3RlcCwgdGhlblxuICAgICAgICAgKiBtaWRkbGUgKyByb3dTdGVwLCB0aGVuIG1pZGRsZSAtICgyICogcm93U3RlcCksIGV0Yy5cbiAgICAgICAgICogcm93U3RlcCBpcyBiaWdnZXIgYXMgdGhlIGltYWdlIGlzIHRhbGxlciwgYnV0IGlzIGFsd2F5cyBhdCBsZWFzdCAxLiBXZSd2ZSBzb21ld2hhdCBhcmJpdHJhcmlseVxuICAgICAgICAgKiBkZWNpZGVkIHRoYXQgbW92aW5nIHVwIGFuZCBkb3duIGJ5IGFib3V0IDEvMTYgb2YgdGhlIGltYWdlIGlzIHByZXR0eSBnb29kOyB3ZSB0cnkgbW9yZSBvZiB0aGVcbiAgICAgICAgICogaW1hZ2UgaWYgXCJ0cnlpbmcgaGFyZGVyXCIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBpbWFnZSBUaGUgaW1hZ2UgdG8gZGVjb2RlXG4gICAgICAgICAqIEBwYXJhbSBoaW50cyBBbnkgaGludHMgdGhhdCB3ZXJlIHJlcXVlc3RlZFxuICAgICAgICAgKiBAcmV0dXJuIFRoZSBjb250ZW50cyBvZiB0aGUgZGVjb2RlZCBiYXJjb2RlXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gQW55IHNwb250YW5lb3VzIGVycm9ycyB3aGljaCBvY2N1clxuICAgICAgICAgKi9cbiAgICAgICAgZG9EZWNvZGUoaW1hZ2UsIGhpbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IGltYWdlLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGxldCByb3cgPSBuZXcgQml0QXJyYXkod2lkdGgpO1xuICAgICAgICAgICAgY29uc3QgdHJ5SGFyZGVyID0gaGludHMgJiYgKGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLlRSWV9IQVJERVIpID09PSB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHJvd1N0ZXAgPSBNYXRoLm1heCgxLCBoZWlnaHQgPj4gKHRyeUhhcmRlciA/IDggOiA1KSk7XG4gICAgICAgICAgICBsZXQgbWF4TGluZXM7XG4gICAgICAgICAgICBpZiAodHJ5SGFyZGVyKSB7XG4gICAgICAgICAgICAgICAgbWF4TGluZXMgPSBoZWlnaHQ7IC8vIExvb2sgYXQgdGhlIHdob2xlIGltYWdlLCBub3QganVzdCB0aGUgY2VudGVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXhMaW5lcyA9IDE1OyAvLyAxNSByb3dzIHNwYWNlZCAxLzMyIGFwYXJ0IGlzIHJvdWdobHkgdGhlIG1pZGRsZSBoYWxmIG9mIHRoZSBpbWFnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gTWF0aC50cnVuYyhoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWF4TGluZXM7IHgrKykge1xuICAgICAgICAgICAgICAgIC8vIFNjYW5uaW5nIGZyb20gdGhlIG1pZGRsZSBvdXQuIERldGVybWluZSB3aGljaCByb3cgd2UncmUgbG9va2luZyBhdCBuZXh0OlxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd1N0ZXBzQWJvdmVPckJlbG93ID0gTWF0aC50cnVuYygoeCArIDEpIC8gMik7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBYm92ZSA9ICh4ICYgMHgwMSkgPT09IDA7IC8vIGkuZS4gaXMgeCBldmVuP1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd051bWJlciA9IG1pZGRsZSArIHJvd1N0ZXAgKiAoaXNBYm92ZSA/IHJvd1N0ZXBzQWJvdmVPckJlbG93IDogLXJvd1N0ZXBzQWJvdmVPckJlbG93KTtcbiAgICAgICAgICAgICAgICBpZiAocm93TnVtYmVyIDwgMCB8fCByb3dOdW1iZXIgPj0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9vcHMsIGlmIHdlIHJ1biBvZmYgdGhlIHRvcCBvciBib3R0b20sIHN0b3BcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEVzdGltYXRlIGJsYWNrIHBvaW50IGZvciB0aGlzIHJvdyBhbmQgbG9hZCBpdDpcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSBpbWFnZS5nZXRCbGFja1Jvdyhyb3dOdW1iZXIsIHJvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGlsZSB3ZSBoYXZlIHRoZSBpbWFnZSBkYXRhIGluIGEgQml0QXJyYXksIGl0J3MgZmFpcmx5IGNoZWFwIHRvIHJldmVyc2UgaXQgaW4gcGxhY2UgdG9cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgZGVjb2RpbmcgdXBzaWRlIGRvd24gYmFyY29kZXMuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCAyOyBhdHRlbXB0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGVtcHQgPT09IDEpIHsgLy8gdHJ5aW5nIGFnYWluP1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LnJldmVyc2UoKTsgLy8gcmV2ZXJzZSB0aGUgcm93IGFuZCBjb250aW51ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBtZWFucyB3ZSB3aWxsIG9ubHkgZXZlciBkcmF3IHJlc3VsdCBwb2ludHMgKm9uY2UqIGluIHRoZSBsaWZlIG9mIHRoaXMgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW5jZSB3ZSB3YW50IHRvIGF2b2lkIGRyYXdpbmcgdGhlIHdyb25nIHBvaW50cyBhZnRlciBmbGlwcGluZyB0aGUgcm93LCBhbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCB3YW50IHRvIGNsdXR0ZXIgd2l0aCBub2lzZSBmcm9tIGV2ZXJ5IHNpbmdsZSByb3cgc2NhbiAtLSBqdXN0IHRoZSBzY2Fuc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBzdGFydCBvbiB0aGUgY2VudGVyIGxpbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGludHMgJiYgKGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLKSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdIaW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50cy5mb3JFYWNoKChoaW50LCBrZXkpID0+IG5ld0hpbnRzLnNldChrZXksIGhpbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdIaW50cy5kZWxldGUoRGVjb2RlSGludFR5cGUkMS5ORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludHMgPSBuZXdIaW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYSBiYXJjb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgb3VyIGJhcmNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRlbXB0ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnV0IGl0IHdhcyB1cHNpZGUgZG93biwgc28gbm90ZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZSQxLk9SSUVOVEFUSU9OLCAxODApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZCByZW1lbWJlciB0byBmbGlwIHRoZSByZXN1bHQgcG9pbnRzIGhvcml6b250YWxseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludHMgPSByZXN1bHQuZ2V0UmVzdWx0UG9pbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBuZXcgUmVzdWx0UG9pbnQod2lkdGggLSBwb2ludHNbMF0uZ2V0WCgpIC0gMSwgcG9pbnRzWzBdLmdldFkoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1sxXSA9IG5ldyBSZXN1bHRQb2ludCh3aWR0aCAtIHBvaW50c1sxXS5nZXRYKCkgLSAxLCBwb2ludHNbMV0uZ2V0WSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udGludWUgLS0ganVzdCBjb3VsZG4ndCBkZWNvZGUgdGhpcyByb3dcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWNvcmRzIHRoZSBzaXplIG9mIHN1Y2Nlc3NpdmUgcnVucyBvZiB3aGl0ZSBhbmQgYmxhY2sgcGl4ZWxzIGluIGEgcm93LCBzdGFydGluZyBhdCBhIGdpdmVuIHBvaW50LlxuICAgICAgICAgKiBUaGUgdmFsdWVzIGFyZSByZWNvcmRlZCBpbiB0aGUgZ2l2ZW4gYXJyYXksIGFuZCB0aGUgbnVtYmVyIG9mIHJ1bnMgcmVjb3JkZWQgaXMgZXF1YWwgdG8gdGhlIHNpemVcbiAgICAgICAgICogb2YgdGhlIGFycmF5LiBJZiB0aGUgcm93IHN0YXJ0cyBvbiBhIHdoaXRlIHBpeGVsIGF0IHRoZSBnaXZlbiBzdGFydCBwb2ludCwgdGhlbiB0aGUgZmlyc3QgY291bnRcbiAgICAgICAgICogcmVjb3JkZWQgaXMgdGhlIHJ1biBvZiB3aGl0ZSBwaXhlbHMgc3RhcnRpbmcgZnJvbSB0aGF0IHBvaW50OyBsaWtld2lzZSBpdCBpcyB0aGUgY291bnQgb2YgYSBydW5cbiAgICAgICAgICogb2YgYmxhY2sgcGl4ZWxzIGlmIHRoZSByb3cgYmVnaW4gb24gYSBibGFjayBwaXhlbHMgYXQgdGhhdCBwb2ludC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvdyByb3cgdG8gY291bnQgZnJvbVxuICAgICAgICAgKiBAcGFyYW0gc3RhcnQgb2Zmc2V0IGludG8gcm93IHRvIHN0YXJ0IGF0XG4gICAgICAgICAqIEBwYXJhbSBjb3VudGVycyBhcnJheSBpbnRvIHdoaWNoIHRvIHJlY29yZCBjb3VudHNcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBjb3VudGVycyBjYW5ub3QgYmUgZmlsbGVkIGVudGlyZWx5IGZyb20gcm93IGJlZm9yZSBydW5uaW5nIG91dFxuICAgICAgICAgKiAgb2YgcGl4ZWxzXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcmVjb3JkUGF0dGVybihyb3csIHN0YXJ0LCBjb3VudGVycykge1xuICAgICAgICAgICAgY29uc3QgbnVtQ291bnRlcnMgPSBjb3VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbnVtQ291bnRlcnM7IGluZGV4KyspXG4gICAgICAgICAgICAgICAgY291bnRlcnNbaW5kZXhdID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaXNXaGl0ZSA9ICFyb3cuZ2V0KHN0YXJ0KTtcbiAgICAgICAgICAgIGxldCBjb3VudGVyUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgbGV0IGkgPSBzdGFydDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5nZXQoaSkgIT09IGlzV2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCsrY291bnRlclBvc2l0aW9uID09PSBudW1Db3VudGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSByZWFkIGZ1bGx5IHRoZSBsYXN0IHNlY3Rpb24gb2YgcGl4ZWxzIGFuZCBmaWxsZWQgdXAgb3VyIGNvdW50ZXJzIC0tIG9yIGZpbGxlZFxuICAgICAgICAgICAgLy8gdGhlIGxhc3QgY291bnRlciBidXQgcmFuIG9mZiB0aGUgc2lkZSBvZiB0aGUgaW1hZ2UsIE9LLiBPdGhlcndpc2UsIGEgcHJvYmxlbS5cbiAgICAgICAgICAgIGlmICghKGNvdW50ZXJQb3NpdGlvbiA9PT0gbnVtQ291bnRlcnMgfHwgKGNvdW50ZXJQb3NpdGlvbiA9PT0gbnVtQ291bnRlcnMgLSAxICYmIGkgPT09IGVuZCkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHJlY29yZFBhdHRlcm5JblJldmVyc2Uocm93LCBzdGFydCwgY291bnRlcnMpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgY291bGQgYmUgbW9yZSBlZmZpY2llbnQgSSBndWVzc1xuICAgICAgICAgICAgbGV0IG51bVRyYW5zaXRpb25zTGVmdCA9IGNvdW50ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gcm93LmdldChzdGFydCk7XG4gICAgICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIG51bVRyYW5zaXRpb25zTGVmdCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5nZXQoLS1zdGFydCkgIT09IGxhc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtVHJhbnNpdGlvbnNMZWZ0LS07XG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSAhbGFzdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVtVHJhbnNpdGlvbnNMZWZ0ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9uZURSZWFkZXIucmVjb3JkUGF0dGVybihyb3csIHN0YXJ0ICsgMSwgY291bnRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIGhvdyBjbG9zZWx5IGEgc2V0IG9mIG9ic2VydmVkIGNvdW50cyBvZiBydW5zIG9mIGJsYWNrL3doaXRlIHZhbHVlcyBtYXRjaGVzIGEgZ2l2ZW5cbiAgICAgICAgICogdGFyZ2V0IHBhdHRlcm4uIFRoaXMgaXMgcmVwb3J0ZWQgYXMgdGhlIHJhdGlvIG9mIHRoZSB0b3RhbCB2YXJpYW5jZSBmcm9tIHRoZSBleHBlY3RlZCBwYXR0ZXJuXG4gICAgICAgICAqIHByb3BvcnRpb25zIGFjcm9zcyBhbGwgcGF0dGVybiBlbGVtZW50cywgdG8gdGhlIGxlbmd0aCBvZiB0aGUgcGF0dGVybi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvdW50ZXJzIG9ic2VydmVkIGNvdW50ZXJzXG4gICAgICAgICAqIEBwYXJhbSBwYXR0ZXJuIGV4cGVjdGVkIHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIG1heEluZGl2aWR1YWxWYXJpYW5jZSBUaGUgbW9zdCBhbnkgY291bnRlciBjYW4gZGlmZmVyIGJlZm9yZSB3ZSBnaXZlIHVwXG4gICAgICAgICAqIEByZXR1cm4gcmF0aW8gb2YgdG90YWwgdmFyaWFuY2UgYmV0d2VlbiBjb3VudGVycyBhbmQgcGF0dGVybiBjb21wYXJlZCB0byB0b3RhbCBwYXR0ZXJuIHNpemVcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBwYXR0ZXJuTWF0Y2hWYXJpYW5jZShjb3VudGVycywgcGF0dGVybiwgbWF4SW5kaXZpZHVhbFZhcmlhbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBudW1Db3VudGVycyA9IGNvdW50ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgICAgICBsZXQgcGF0dGVybkxlbmd0aCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvdW50ZXJzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBjb3VudGVyc1tpXTtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuTGVuZ3RoICs9IHBhdHRlcm5baV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG90YWwgPCBwYXR0ZXJuTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgZXZlbiBoYXZlIG9uZSBwaXhlbCBwZXIgdW5pdCBvZiBiYXIgd2lkdGgsIGFzc3VtZSB0aGlzIGlzIHRvbyBzbWFsbFxuICAgICAgICAgICAgICAgIC8vIHRvIHJlbGlhYmx5IG1hdGNoLCBzbyBmYWlsOlxuICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bml0QmFyV2lkdGggPSB0b3RhbCAvIHBhdHRlcm5MZW5ndGg7XG4gICAgICAgICAgICBtYXhJbmRpdmlkdWFsVmFyaWFuY2UgKj0gdW5pdEJhcldpZHRoO1xuICAgICAgICAgICAgbGV0IHRvdGFsVmFyaWFuY2UgPSAwLjA7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IG51bUNvdW50ZXJzOyB4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3VudGVyID0gY291bnRlcnNbeF07XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVkUGF0dGVybiA9IHBhdHRlcm5beF0gKiB1bml0QmFyV2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFuY2UgPSBjb3VudGVyID4gc2NhbGVkUGF0dGVybiA/IGNvdW50ZXIgLSBzY2FsZWRQYXR0ZXJuIDogc2NhbGVkUGF0dGVybiAtIGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhbmNlID4gbWF4SW5kaXZpZHVhbFZhcmlhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvdGFsVmFyaWFuY2UgKz0gdmFyaWFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG90YWxWYXJpYW5jZSAvIHRvdGFsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPHA+RGVjb2RlcyBDb2RlIDEyOCBiYXJjb2Rlcy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIENvZGUxMjhSZWFkZXIgZXh0ZW5kcyBPbmVEUmVhZGVyIHtcbiAgICAgICAgc3RhdGljIGZpbmRTdGFydFBhdHRlcm4ocm93KSB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBjb25zdCByb3dPZmZzZXQgPSByb3cuZ2V0TmV4dFNldCgwKTtcbiAgICAgICAgICAgIGxldCBjb3VudGVyUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJzID0gSW50MzJBcnJheS5mcm9tKFswLCAwLCAwLCAwLCAwLCAwXSk7XG4gICAgICAgICAgICBsZXQgcGF0dGVyblN0YXJ0ID0gcm93T2Zmc2V0O1xuICAgICAgICAgICAgbGV0IGlzV2hpdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHBhdHRlcm5MZW5ndGggPSA2O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJvd09mZnNldDsgaSA8IHdpZHRoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmdldChpKSAhPT0gaXNXaGl0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlclBvc2l0aW9uID09PSAocGF0dGVybkxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdFZhcmlhbmNlID0gQ29kZTEyOFJlYWRlci5NQVhfQVZHX1ZBUklBTkNFO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlc3RNYXRjaCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3RhcnRDb2RlID0gQ29kZTEyOFJlYWRlci5DT0RFX1NUQVJUX0E7IHN0YXJ0Q29kZSA8PSBDb2RlMTI4UmVhZGVyLkNPREVfU1RBUlRfQzsgc3RhcnRDb2RlKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYW5jZSA9IE9uZURSZWFkZXIucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIENvZGUxMjhSZWFkZXIuQ09ERV9QQVRURVJOU1tzdGFydENvZGVdLCBDb2RlMTI4UmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFuY2UgPCBiZXN0VmFyaWFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFZhcmlhbmNlID0gdmFyaWFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaCA9IHN0YXJ0Q29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMb29rIGZvciB3aGl0ZXNwYWNlIGJlZm9yZSBzdGFydCBwYXR0ZXJuLCA+PSA1MCUgb2Ygd2lkdGggb2Ygc3RhcnQgcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RNYXRjaCA+PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmlzUmFuZ2UoTWF0aC5tYXgoMCwgcGF0dGVyblN0YXJ0IC0gKGkgLSBwYXR0ZXJuU3RhcnQpIC8gMiksIHBhdHRlcm5TdGFydCwgZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEludDMyQXJyYXkuZnJvbShbcGF0dGVyblN0YXJ0LCBpLCBiZXN0TWF0Y2hdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5TdGFydCArPSBjb3VudGVyc1swXSArIGNvdW50ZXJzWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnMgPSBjb3VudGVycy5zbGljZSgyLCBjb3VudGVycy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbiAtIDFdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyUG9zaXRpb24rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaXNXaGl0ZSA9ICFpc1doaXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBkZWNvZGVDb2RlKHJvdywgY291bnRlcnMsIHJvd09mZnNldCkge1xuICAgICAgICAgICAgT25lRFJlYWRlci5yZWNvcmRQYXR0ZXJuKHJvdywgcm93T2Zmc2V0LCBjb3VudGVycyk7XG4gICAgICAgICAgICBsZXQgYmVzdFZhcmlhbmNlID0gQ29kZTEyOFJlYWRlci5NQVhfQVZHX1ZBUklBTkNFOyAvLyB3b3JzdCB2YXJpYW5jZSB3ZSdsbCBhY2NlcHRcbiAgICAgICAgICAgIGxldCBiZXN0TWF0Y2ggPSAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgQ29kZTEyOFJlYWRlci5DT0RFX1BBVFRFUk5TLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IENvZGUxMjhSZWFkZXIuQ09ERV9QQVRURVJOU1tkXTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YXJpYW5jZSA9IHRoaXMucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIENvZGUxMjhSZWFkZXIuTUFYX0lORElWSURVQUxfVkFSSUFOQ0UpO1xuICAgICAgICAgICAgICAgIGlmICh2YXJpYW5jZSA8IGJlc3RWYXJpYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBiZXN0VmFyaWFuY2UgPSB2YXJpYW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYmVzdE1hdGNoID0gZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPIFdlJ3JlIG92ZXJsb29raW5nIHRoZSBmYWN0IHRoYXQgdGhlIFNUT1AgcGF0dGVybiBoYXMgNyB2YWx1ZXMsIG5vdCA2LlxuICAgICAgICAgICAgaWYgKGJlc3RNYXRjaCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJlc3RNYXRjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnRGTkMxID0gaGludHMgJiYgKGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLkFTU1VNRV9HUzEpID09PSB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UGF0dGVybkluZm8gPSBDb2RlMTI4UmVhZGVyLmZpbmRTdGFydFBhdHRlcm4ocm93KTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q29kZSA9IHN0YXJ0UGF0dGVybkluZm9bMl07XG4gICAgICAgICAgICBsZXQgY3VycmVudFJhd0NvZGVzSW5kZXggPSAwO1xuICAgICAgICAgICAgY29uc3QgcmF3Q29kZXMgPSBuZXcgVWludDhBcnJheSgyMCk7XG4gICAgICAgICAgICByYXdDb2Rlc1tjdXJyZW50UmF3Q29kZXNJbmRleCsrXSA9IHN0YXJ0Q29kZTtcbiAgICAgICAgICAgIGxldCBjb2RlU2V0O1xuICAgICAgICAgICAgc3dpdGNoIChzdGFydENvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9TVEFSVF9BOlxuICAgICAgICAgICAgICAgICAgICBjb2RlU2V0ID0gQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfU1RBUlRfQjpcbiAgICAgICAgICAgICAgICAgICAgY29kZVNldCA9IENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0I7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX1NUQVJUX0M6XG4gICAgICAgICAgICAgICAgICAgIGNvZGVTZXQgPSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9DO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGlzTmV4dFNoaWZ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgICAgICAgIGxldCBsYXN0U3RhcnQgPSBzdGFydFBhdHRlcm5JbmZvWzBdO1xuICAgICAgICAgICAgbGV0IG5leHRTdGFydCA9IHN0YXJ0UGF0dGVybkluZm9bMV07XG4gICAgICAgICAgICBjb25zdCBjb3VudGVycyA9IEludDMyQXJyYXkuZnJvbShbMCwgMCwgMCwgMCwgMCwgMF0pO1xuICAgICAgICAgICAgbGV0IGxhc3RDb2RlID0gMDtcbiAgICAgICAgICAgIGxldCBjb2RlID0gMDtcbiAgICAgICAgICAgIGxldCBjaGVja3N1bVRvdGFsID0gc3RhcnRDb2RlO1xuICAgICAgICAgICAgbGV0IG11bHRpcGxpZXIgPSAwO1xuICAgICAgICAgICAgbGV0IGxhc3RDaGFyYWN0ZXJXYXNQcmludGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IHVwcGVyTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHNoaWZ0VXBwZXJNb2RlID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1bnNoaWZ0ID0gaXNOZXh0U2hpZnRlZDtcbiAgICAgICAgICAgICAgICBpc05leHRTaGlmdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBvZmYgbGFzdCBjb2RlXG4gICAgICAgICAgICAgICAgbGFzdENvZGUgPSBjb2RlO1xuICAgICAgICAgICAgICAgIC8vIERlY29kZSBhbm90aGVyIGNvZGUgZnJvbSBpbWFnZVxuICAgICAgICAgICAgICAgIGNvZGUgPSBDb2RlMTI4UmVhZGVyLmRlY29kZUNvZGUocm93LCBjb3VudGVycywgbmV4dFN0YXJ0KTtcbiAgICAgICAgICAgICAgICByYXdDb2Rlc1tjdXJyZW50UmF3Q29kZXNJbmRleCsrXSA9IGNvZGU7XG4gICAgICAgICAgICAgICAgLy8gUmVtZW1iZXIgd2hldGhlciB0aGUgbGFzdCBjb2RlIHdhcyBwcmludGFibGUgb3Igbm90IChleGNsdWRpbmcgQ09ERV9TVE9QKVxuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSBDb2RlMTI4UmVhZGVyLkNPREVfU1RPUCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0Q2hhcmFjdGVyV2FzUHJpbnRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRvIGNoZWNrc3VtIGNvbXB1dGF0aW9uIChpZiBub3QgQ09ERV9TVE9QIG9mIGNvdXJzZSlcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gQ29kZTEyOFJlYWRlci5DT0RFX1NUT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGllcisrO1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N1bVRvdGFsICs9IG11bHRpcGxpZXIgKiBjb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRvIHdoZXJlIHRoZSBuZXh0IGNvZGUgd2lsbCB0byBzdGFydFxuICAgICAgICAgICAgICAgIGxhc3RTdGFydCA9IG5leHRTdGFydDtcbiAgICAgICAgICAgICAgICBuZXh0U3RhcnQgKz0gY291bnRlcnMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4gcHJldmlvdXMgKyBjdXJyZW50LCAwKTtcbiAgICAgICAgICAgICAgICAvLyBUYWtlIGNhcmUgb2YgaWxsZWdhbCBzdGFydCBjb2Rlc1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9TVEFSVF9BOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9TVEFSVF9COlxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9TVEFSVF9DOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvZGVTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9BOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPCA2NCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGlmdFVwcGVyTW9kZSA9PT0gdXBwZXJNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgnICcuY2hhckNvZGVBdCgwKSArIGNvZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgnICcuY2hhckNvZGVBdCgwKSArIGNvZGUgKyAxMjgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnRVcHBlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCA5Nikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGlmdFVwcGVyTW9kZSA9PT0gdXBwZXJNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlIC0gNjQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlICsgNjQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnRVcHBlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGxldCBDT0RFX1NUT1AsIHdoaWNoIGFsd2F5cyBhcHBlYXJzLCBhZmZlY3Qgd2hldGhlciB3aGV0aGVyIHdlIHRoaW5rIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29kZSB3YXMgcHJpbnRhYmxlIG9yIG5vdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gQ29kZTEyOFJlYWRlci5DT0RFX1NUT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENoYXJhY3Rlcldhc1ByaW50YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udmVydEZOQzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHUzEgc3BlY2lmaWNhdGlvbiA1LjQuMy43LiBhbmQgNS40LjYuNC4gSWYgdGhlIGZpcnN0IGNoYXIgYWZ0ZXIgdGhlIHN0YXJ0IGNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgRk5DMSB0aGVuIHRoaXMgaXMgR1MxLTEyOC4gV2UgYWRkIHRoZSBzeW1ib2xvZ3kgaWRlbnRpZmllci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICddQzEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR1MxIHNwZWNpZmljYXRpb24gNS40LjcuNS4gRXZlcnkgc3Vic2VxdWVudCBGTkMxIGlzIHJldHVybmVkIGFzIEFTQ0lJIDI5IChHUylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMjkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9GTkNfMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0ZOQ180X0E6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVwcGVyTW9kZSAmJiBzaGlmdFVwcGVyTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnRVcHBlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVwcGVyTW9kZSAmJiBzaGlmdFVwcGVyTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0VXBwZXJNb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdFVwcGVyTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfU0hJRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05leHRTaGlmdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVTZXQgPSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9CO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVTZXQgPSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9CO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVTZXQgPSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9DO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX1NUT1A6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0I6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDk2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0VXBwZXJNb2RlID09PSB1cHBlck1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcgJy5jaGFyQ29kZUF0KDApICsgY29kZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcgJy5jaGFyQ29kZUF0KDApICsgY29kZSArIDEyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdFVwcGVyTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IENvZGUxMjhSZWFkZXIuQ09ERV9TVE9QKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDaGFyYWN0ZXJXYXNQcmludGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0ZOQ18xOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnZlcnRGTkMxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR1MxIHNwZWNpZmljYXRpb24gNS40LjMuNy4gYW5kIDUuNC42LjQuIElmIHRoZSBmaXJzdCBjaGFyIGFmdGVyIHRoZSBzdGFydCBjb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIEZOQzEgdGhlbiB0aGlzIGlzIEdTMS0xMjguIFdlIGFkZCB0aGUgc3ltYm9sb2d5IGlkZW50aWZpZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXUMxJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdTMSBzcGVjaWZpY2F0aW9uIDUuNC43LjUuIEV2ZXJ5IHN1YnNlcXVlbnQgRk5DMSBpcyByZXR1cm5lZCBhcyBBU0NJSSAyOSAoR1MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0ZOQ18zOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9GTkNfNF9COlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1cHBlck1vZGUgJiYgc2hpZnRVcHBlck1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlck1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0VXBwZXJNb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh1cHBlck1vZGUgJiYgc2hpZnRVcHBlck1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdFVwcGVyTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnRVcHBlck1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX1NISUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXh0U2hpZnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlU2V0ID0gQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0E6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlU2V0ID0gQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlU2V0ID0gQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvZGUxMjhSZWFkZXIuQ09ERV9TVE9QOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9DOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPCAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IENvZGUxMjhSZWFkZXIuQ09ERV9TVE9QKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDaGFyYWN0ZXJXYXNQcmludGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29kZTEyOFJlYWRlci5DT0RFX0ZOQ18xOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnZlcnRGTkMxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR1MxIHNwZWNpZmljYXRpb24gNS40LjMuNy4gYW5kIDUuNC42LjQuIElmIHRoZSBmaXJzdCBjaGFyIGFmdGVyIHRoZSBzdGFydCBjb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIEZOQzEgdGhlbiB0aGlzIGlzIEdTMS0xMjguIFdlIGFkZCB0aGUgc3ltYm9sb2d5IGlkZW50aWZpZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXUMxJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdTMSBzcGVjaWZpY2F0aW9uIDUuNC43LjUuIEV2ZXJ5IHN1YnNlcXVlbnQgRk5DMSBpcyByZXR1cm5lZCBhcyBBU0NJSSAyOSAoR1MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9BOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZVNldCA9IENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9COlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZVNldCA9IENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2RlMTI4UmVhZGVyLkNPREVfU1RPUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFVuc2hpZnQgYmFjayB0byBhbm90aGVyIGNvZGUgc2V0IGlmIHdlIHdlcmUgc2hpZnRlZFxuICAgICAgICAgICAgICAgIGlmICh1bnNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVTZXQgPSBjb2RlU2V0ID09PSBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9BID8gQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQiA6IENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0E7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGFzdFBhdHRlcm5TaXplID0gbmV4dFN0YXJ0IC0gbGFzdFN0YXJ0O1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGFtcGxlIHdoaXRlc3BhY2UgZm9sbG93aW5nIHBhdHRlcm4sIGJ1dCwgdG8gZG8gdGhpcyB3ZSBmaXJzdCBuZWVkIHRvIHJlbWVtYmVyIHRoYXRcbiAgICAgICAgICAgIC8vIHdlIGZ1ZGdlZCBkZWNvZGluZyBDT0RFX1NUT1Agc2luY2UgaXQgYWN0dWFsbHkgaGFzIDcgYmFycywgbm90IDYuIFRoZXJlIGlzIGEgYmxhY2sgYmFyIGxlZnRcbiAgICAgICAgICAgIC8vIHRvIHJlYWQgb2ZmLiBXb3VsZCBiZSBzbGlnaHRseSBiZXR0ZXIgdG8gcHJvcGVybHkgcmVhZC4gSGVyZSB3ZSBqdXN0IHNraXAgaXQ6XG4gICAgICAgICAgICBuZXh0U3RhcnQgPSByb3cuZ2V0TmV4dFVuc2V0KG5leHRTdGFydCk7XG4gICAgICAgICAgICBpZiAoIXJvdy5pc1JhbmdlKG5leHRTdGFydCwgTWF0aC5taW4ocm93LmdldFNpemUoKSwgbmV4dFN0YXJ0ICsgKG5leHRTdGFydCAtIGxhc3RTdGFydCkgLyAyKSwgZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQdWxsIG91dCBmcm9tIHN1bSB0aGUgdmFsdWUgb2YgdGhlIHBlbnVsdGltYXRlIGNoZWNrIGNvZGVcbiAgICAgICAgICAgIGNoZWNrc3VtVG90YWwgLT0gbXVsdGlwbGllciAqIGxhc3RDb2RlO1xuICAgICAgICAgICAgLy8gbGFzdENvZGUgaXMgdGhlIGNoZWNrc3VtIHRoZW46XG4gICAgICAgICAgICBpZiAoY2hlY2tzdW1Ub3RhbCAlIDEwMyAhPT0gbGFzdENvZGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5lZWQgdG8gcHVsbCBvdXQgdGhlIGNoZWNrIGRpZ2l0cyBmcm9tIHN0cmluZ1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0TGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChyZXN1bHRMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBmYWxzZSBwb3NpdGl2ZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT25seSBib3RoZXIgaWYgdGhlIHJlc3VsdCBoYWQgYXQgbGVhc3Qgb25lIGNoYXJhY3RlciwgYW5kIGlmIHRoZSBjaGVja3N1bSBkaWdpdCBoYXBwZW5lZCB0b1xuICAgICAgICAgICAgLy8gYmUgYSBwcmludGFibGUgY2hhcmFjdGVyLiBJZiBpdCB3YXMganVzdCBpbnRlcnByZXRlZCBhcyBhIGNvbnRyb2wgY29kZSwgbm90aGluZyB0byByZW1vdmUuXG4gICAgICAgICAgICBpZiAocmVzdWx0TGVuZ3RoID4gMCAmJiBsYXN0Q2hhcmFjdGVyV2FzUHJpbnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGVTZXQgPT09IENvZGUxMjhSZWFkZXIuQ09ERV9DT0RFX0MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygwLCByZXN1bHRMZW5ndGggLSAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgcmVzdWx0TGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IChzdGFydFBhdHRlcm5JbmZvWzFdICsgc3RhcnRQYXR0ZXJuSW5mb1swXSkgLyAyLjA7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGxhc3RTdGFydCArIGxhc3RQYXR0ZXJuU2l6ZSAvIDIuMDtcbiAgICAgICAgICAgIGNvbnN0IHJhd0NvZGVzU2l6ZSA9IHJhd0NvZGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJhd0J5dGVzID0gbmV3IFVpbnQ4QXJyYXkocmF3Q29kZXNTaXplKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Q29kZXNTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICByYXdCeXRlc1tpXSA9IHJhd0NvZGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gW25ldyBSZXN1bHRQb2ludChsZWZ0LCByb3dOdW1iZXIpLCBuZXcgUmVzdWx0UG9pbnQocmlnaHQsIHJvd051bWJlcildO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHQocmVzdWx0LCByYXdCeXRlcywgMCwgcG9pbnRzLCBCYXJjb2RlRm9ybWF0JDEuQ09ERV8xMjgsIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfUEFUVEVSTlMgPSBbXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMiwgMiwgMiwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDIsIDEsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAyLCAyLCAyLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMSwgMiwgMiwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDEsIDMsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAxLCAyLCAyLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMiwgMiwgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDIsIDMsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAyLCAyLCAxLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMiwgMSwgMiwgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDEsIDMsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAzLCAxLCAyLCAxLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMiwgMiwgMywgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDIsIDEsIDMsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAyLCAyLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMywgMiwgMiwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDMsIDEsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAzLCAyLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMiwgMywgMiwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDEsIDEsIDMsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAyLCAxLCAyLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMywgMiwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDMsIDEsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAxLCAyLCAxLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMSwgMiwgMiwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDIsIDEsIDEsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAyLCAxLCAyLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMiwgMiwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDIsIDIsIDEsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAyLCAyLCAyLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMiwgMSwgMiwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDEsIDIsIDMsIDIsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAzLCAyLCAxLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgMywgMiwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDEsIDEsIDIsIDNdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAxLCAzLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMiwgMywgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDIsIDEsIDEsIDNdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAyLCAzLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMSwgMywgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDMsIDEsIDEsIDEsIDNdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAzLCAxLCAzLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMiwgMSwgMywgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDIsIDMsIDMsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAyLCAxLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMywgMSwgMiwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDMsIDMsIDIsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAzLCAzLCAxLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMywgMSwgMiwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDEsIDEsIDMsIDMsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAzLCAxLCAxLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMywgMSwgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDEsIDMsIDMsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAzLCAxLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMSwgMSwgMiwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDEsIDEsIDMsIDIsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAzLCAxLCAxLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMiwgMSwgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDEsIDIsIDMsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAzLCAyLCAxLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgNCwgMSwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDEsIDQsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs0LCAzLCAxLCAxLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgMiwgMiwgNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDEsIDQsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAxLCAxLCAyLCA0XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMSwgNCwgMiwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDQsIDEsIDEsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCA0LCAxLCAyLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMiwgMiwgMSwgNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDIsIDQsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAyLCAxLCAxLCA0XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMiwgNCwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDQsIDIsIDEsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCA0LCAyLCAyLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgNCwgMSwgMiwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDEsIDEsIDEsIDRdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs0LCAxLCAzLCAxLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgNCwgMSwgMSwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDQsIDEsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAyLCA0LCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMSwgMSwgNCwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDEsIDIsIDQsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCA0LCAyLCAxLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgNCwgMSwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDIsIDQsIDIsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs0LCAxLCAxLCAyLCAxLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNCwgMiwgMSwgMSwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzQsIDIsIDEsIDIsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAyLCAxLCA0LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgNCwgMSwgMiwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzQsIDEsIDIsIDEsIDIsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAxLCA0LCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgMywgNCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDEsIDEsIDQsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCA0LCAxLCAxLCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgNCwgMywgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzQsIDEsIDEsIDEsIDEsIDNdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs0LCAxLCAxLCAzLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMywgMSwgNCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDQsIDEsIDMsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAxLCAxLCAxLCA0LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNCwgMSwgMSwgMSwgMywgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDEsIDEsIDQsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAxLCAyLCAxLCA0XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMSwgMSwgMiwgMywgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDMsIDMsIDEsIDEsIDEsIDJdKSxcbiAgICBdO1xuICAgIENvZGUxMjhSZWFkZXIuTUFYX0FWR19WQVJJQU5DRSA9IDAuMjU7XG4gICAgQ29kZTEyOFJlYWRlci5NQVhfSU5ESVZJRFVBTF9WQVJJQU5DRSA9IDAuNztcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfU0hJRlQgPSA5ODtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9DID0gOTk7XG4gICAgQ29kZTEyOFJlYWRlci5DT0RFX0NPREVfQiA9IDEwMDtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfQ09ERV9BID0gMTAxO1xuICAgIENvZGUxMjhSZWFkZXIuQ09ERV9GTkNfMSA9IDEwMjtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzIgPSA5NztcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzMgPSA5NjtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzRfQSA9IDEwMTtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfRk5DXzRfQiA9IDEwMDtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfU1RBUlRfQSA9IDEwMztcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfU1RBUlRfQiA9IDEwNDtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfU1RBUlRfQyA9IDEwNTtcbiAgICBDb2RlMTI4UmVhZGVyLkNPREVfU1RPUCA9IDEwNjtcblxuICAgIC8qKlxuICAgICAqIDxwPkRlY29kZXMgQ29kZSAzOSBiYXJjb2Rlcy4gU3VwcG9ydHMgXCJGdWxsIEFTQ0lJIENvZGUgMzlcIiBpZiBVU0VfQ09ERV8zOV9FWFRFTkRFRF9NT0RFIGlzIHNldC48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBzZWUgQ29kZTkzUmVhZGVyXG4gICAgICovXG4gICAgY2xhc3MgQ29kZTM5UmVhZGVyIGV4dGVuZHMgT25lRFJlYWRlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcmVhZGVyIHRoYXQgYXNzdW1lcyBhbGwgZW5jb2RlZCBkYXRhIGlzIGRhdGEsIGFuZCBkb2VzIG5vdCB0cmVhdCB0aGUgZmluYWxcbiAgICAgICAgICogY2hhcmFjdGVyIGFzIGEgY2hlY2sgZGlnaXQuIEl0IHdpbGwgbm90IGRlY29kZWQgXCJleHRlbmRlZCBDb2RlIDM5XCIgc2VxdWVuY2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gcHVibGljIENvZGUzOVJlYWRlcigpIHtcbiAgICAgICAgLy8gICB0aGlzKGZhbHNlKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHJlYWRlciB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHRvIGNoZWNrIHRoZSBsYXN0IGNoYXJhY3RlciBhcyBhIGNoZWNrIGRpZ2l0LlxuICAgICAgICAgKiBJdCB3aWxsIG5vdCBkZWNvZGVkIFwiZXh0ZW5kZWQgQ29kZSAzOVwiIHNlcXVlbmNlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHVzaW5nQ2hlY2tEaWdpdCBpZiB0cnVlLCB0cmVhdCB0aGUgbGFzdCBkYXRhIGNoYXJhY3RlciBhcyBhIGNoZWNrIGRpZ2l0LCBub3RcbiAgICAgICAgICogZGF0YSwgYW5kIHZlcmlmeSB0aGF0IHRoZSBjaGVja3N1bSBwYXNzZXMuXG4gICAgICAgICAqL1xuICAgICAgICAvLyBwdWJsaWMgQ29kZTM5UmVhZGVyKGJvb2xlYW4gdXNpbmdDaGVja0RpZ2l0KSB7XG4gICAgICAgIC8vICAgdGhpcyh1c2luZ0NoZWNrRGlnaXQsIGZhbHNlKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHJlYWRlciB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHRvIGNoZWNrIHRoZSBsYXN0IGNoYXJhY3RlciBhcyBhIGNoZWNrIGRpZ2l0LFxuICAgICAgICAgKiBvciBvcHRpb25hbGx5IGF0dGVtcHQgdG8gZGVjb2RlIFwiZXh0ZW5kZWQgQ29kZSAzOVwiIHNlcXVlbmNlcyB0aGF0IGFyZSB1c2VkIHRvIGVuY29kZVxuICAgICAgICAgKiB0aGUgZnVsbCBBU0NJSSBjaGFyYWN0ZXIgc2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdXNpbmdDaGVja0RpZ2l0IGlmIHRydWUsIHRyZWF0IHRoZSBsYXN0IGRhdGEgY2hhcmFjdGVyIGFzIGEgY2hlY2sgZGlnaXQsIG5vdFxuICAgICAgICAgKiBkYXRhLCBhbmQgdmVyaWZ5IHRoYXQgdGhlIGNoZWNrc3VtIHBhc3Nlcy5cbiAgICAgICAgICogQHBhcmFtIGV4dGVuZGVkTW9kZSBpZiB0cnVlLCB3aWxsIGF0dGVtcHQgdG8gZGVjb2RlIGV4dGVuZGVkIENvZGUgMzkgc2VxdWVuY2VzIGluIHRoZVxuICAgICAgICAgKiB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IodXNpbmdDaGVja0RpZ2l0ID0gZmFsc2UsIGV4dGVuZGVkTW9kZSA9IGZhbHNlKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy51c2luZ0NoZWNrRGlnaXQgPSB1c2luZ0NoZWNrRGlnaXQ7XG4gICAgICAgICAgICB0aGlzLmV4dGVuZGVkTW9kZSA9IGV4dGVuZGVkTW9kZTtcbiAgICAgICAgICAgIHRoaXMuZGVjb2RlUm93UmVzdWx0ID0gJyc7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJzID0gbmV3IEludDMyQXJyYXkoOSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBoaW50cykge1xuICAgICAgICAgICAgbGV0IHRoZUNvdW50ZXJzID0gdGhpcy5jb3VudGVycztcbiAgICAgICAgICAgIHRoZUNvdW50ZXJzLmZpbGwoMCk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZVJvd1Jlc3VsdCA9ICcnO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gQ29kZTM5UmVhZGVyLmZpbmRBc3Rlcmlza1BhdHRlcm4ocm93LCB0aGVDb3VudGVycyk7XG4gICAgICAgICAgICAvLyBSZWFkIG9mZiB3aGl0ZSBzcGFjZVxuICAgICAgICAgICAgbGV0IG5leHRTdGFydCA9IHJvdy5nZXROZXh0U2V0KHN0YXJ0WzFdKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSByb3cuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgbGV0IGRlY29kZWRDaGFyO1xuICAgICAgICAgICAgbGV0IGxhc3RTdGFydDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBDb2RlMzlSZWFkZXIucmVjb3JkUGF0dGVybihyb3csIG5leHRTdGFydCwgdGhlQ291bnRlcnMpO1xuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gQ29kZTM5UmVhZGVyLnRvTmFycm93V2lkZVBhdHRlcm4odGhlQ291bnRlcnMpO1xuICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVjb2RlZENoYXIgPSBDb2RlMzlSZWFkZXIucGF0dGVyblRvQ2hhcihwYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29kZVJvd1Jlc3VsdCArPSBkZWNvZGVkQ2hhcjtcbiAgICAgICAgICAgICAgICBsYXN0U3RhcnQgPSBuZXh0U3RhcnQ7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY291bnRlciBvZiB0aGVDb3VudGVycykge1xuICAgICAgICAgICAgICAgICAgICBuZXh0U3RhcnQgKz0gY291bnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVhZCBvZmYgd2hpdGUgc3BhY2VcbiAgICAgICAgICAgICAgICBuZXh0U3RhcnQgPSByb3cuZ2V0TmV4dFNldChuZXh0U3RhcnQpO1xuICAgICAgICAgICAgfSB3aGlsZSAoZGVjb2RlZENoYXIgIT09ICcqJyk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZVJvd1Jlc3VsdCA9IHRoaXMuZGVjb2RlUm93UmVzdWx0LnN1YnN0cmluZygwLCB0aGlzLmRlY29kZVJvd1Jlc3VsdC5sZW5ndGggLSAxKTsgLy8gcmVtb3ZlIGFzdGVyaXNrXG4gICAgICAgICAgICAvLyBMb29rIGZvciB3aGl0ZXNwYWNlIGFmdGVyIHBhdHRlcm46XG4gICAgICAgICAgICBsZXQgbGFzdFBhdHRlcm5TaXplID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgdGhlQ291bnRlcnMpIHtcbiAgICAgICAgICAgICAgICBsYXN0UGF0dGVyblNpemUgKz0gY291bnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB3aGl0ZVNwYWNlQWZ0ZXJFbmQgPSBuZXh0U3RhcnQgLSBsYXN0U3RhcnQgLSBsYXN0UGF0dGVyblNpemU7XG4gICAgICAgICAgICAvLyBJZiA1MCUgb2YgbGFzdCBwYXR0ZXJuIHNpemUsIGZvbGxvd2luZyBsYXN0IHBhdHRlcm4sIGlzIG5vdCB3aGl0ZXNwYWNlLCBmYWlsXG4gICAgICAgICAgICAvLyAoYnV0IGlmIGl0J3Mgd2hpdGVzcGFjZSB0byB0aGUgdmVyeSBlbmQgb2YgdGhlIGltYWdlLCB0aGF0J3MgT0spXG4gICAgICAgICAgICBpZiAobmV4dFN0YXJ0ICE9PSBlbmQgJiYgKHdoaXRlU3BhY2VBZnRlckVuZCAqIDIpIDwgbGFzdFBhdHRlcm5TaXplKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy51c2luZ0NoZWNrRGlnaXQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWF4ID0gdGhpcy5kZWNvZGVSb3dSZXN1bHQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gQ29kZTM5UmVhZGVyLkFMUEhBQkVUX1NUUklORy5pbmRleE9mKHRoaXMuZGVjb2RlUm93UmVzdWx0LmNoYXJBdChpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlY29kZVJvd1Jlc3VsdC5jaGFyQXQobWF4KSAhPT0gQ29kZTM5UmVhZGVyLkFMUEhBQkVUX1NUUklORy5jaGFyQXQodG90YWwgJSA0MykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlUm93UmVzdWx0ID0gdGhpcy5kZWNvZGVSb3dSZXN1bHQuc3Vic3RyaW5nKDAsIG1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kZWNvZGVSb3dSZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFsc2UgcG9zaXRpdmVcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZXN1bHRTdHJpbmc7XG4gICAgICAgICAgICBpZiAodGhpcy5leHRlbmRlZE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRTdHJpbmcgPSBDb2RlMzlSZWFkZXIuZGVjb2RlRXh0ZW5kZWQodGhpcy5kZWNvZGVSb3dSZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nID0gdGhpcy5kZWNvZGVSb3dSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGVmdCA9IChzdGFydFsxXSArIHN0YXJ0WzBdKSAvIDIuMDtcbiAgICAgICAgICAgIGxldCByaWdodCA9IGxhc3RTdGFydCArIGxhc3RQYXR0ZXJuU2l6ZSAvIDIuMDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0KHJlc3VsdFN0cmluZywgbnVsbCwgMCwgW25ldyBSZXN1bHRQb2ludChsZWZ0LCByb3dOdW1iZXIpLCBuZXcgUmVzdWx0UG9pbnQocmlnaHQsIHJvd051bWJlcildLCBCYXJjb2RlRm9ybWF0JDEuQ09ERV8zOSwgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBmaW5kQXN0ZXJpc2tQYXR0ZXJuKHJvdywgY291bnRlcnMpIHtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgcm93T2Zmc2V0ID0gcm93LmdldE5leHRTZXQoMCk7XG4gICAgICAgICAgICBsZXQgY291bnRlclBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuU3RhcnQgPSByb3dPZmZzZXQ7XG4gICAgICAgICAgICBsZXQgaXNXaGl0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHBhdHRlcm5MZW5ndGggPSBjb3VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcm93T2Zmc2V0OyBpIDwgd2lkdGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuZ2V0KGkpICE9PSBpc1doaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyUG9zaXRpb24gPT09IHBhdHRlcm5MZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMb29rIGZvciB3aGl0ZXNwYWNlIGJlZm9yZSBzdGFydCBwYXR0ZXJuLCA+PSA1MCUgb2Ygd2lkdGggb2Ygc3RhcnQgcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9OYXJyb3dXaWRlUGF0dGVybihjb3VudGVycykgPT09IENvZGUzOVJlYWRlci5BU1RFUklTS19FTkNPRElORyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5pc1JhbmdlKE1hdGgubWF4KDAsIHBhdHRlcm5TdGFydCAtIE1hdGguZmxvb3IoKGkgLSBwYXR0ZXJuU3RhcnQpIC8gMikpLCBwYXR0ZXJuU3RhcnQsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbcGF0dGVyblN0YXJ0LCBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5TdGFydCArPSBjb3VudGVyc1swXSArIGNvdW50ZXJzWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnMuY29weVdpdGhpbigwLCAyLCAyICsgY291bnRlclBvc2l0aW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb24gLSAxXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJQb3NpdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3IgZWZmaWNpZW5jeSwgcmV0dXJucyAtMSBvbiBmYWlsdXJlLiBOb3QgdGhyb3dpbmcgaGVyZSBzYXZlZCBhcyBtYW55IGFzIDcwMCBleGNlcHRpb25zXG4gICAgICAgIC8vIHBlciBpbWFnZSB3aGVuIHVzaW5nIHNvbWUgb2Ygb3VyIGJsYWNrYm94IGltYWdlcy5cbiAgICAgICAgc3RhdGljIHRvTmFycm93V2lkZVBhdHRlcm4oY291bnRlcnMpIHtcbiAgICAgICAgICAgIGxldCBudW1Db3VudGVycyA9IGNvdW50ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBtYXhOYXJyb3dDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGxldCB3aWRlQ291bnRlcnM7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgbGV0IG1pbkNvdW50ZXIgPSAweDdmZmZmZmZmO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgY291bnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPCBtaW5Db3VudGVyICYmIGNvdW50ZXIgPiBtYXhOYXJyb3dDb3VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5Db3VudGVyID0gY291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXhOYXJyb3dDb3VudGVyID0gbWluQ291bnRlcjtcbiAgICAgICAgICAgICAgICB3aWRlQ291bnRlcnMgPSAwO1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFdpZGVDb3VudGVyc1dpZHRoID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgcGF0dGVybiA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Db3VudGVyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudGVyID0gY291bnRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyID4gbWF4TmFycm93Q291bnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiB8PSAxIDw8IChudW1Db3VudGVycyAtIDEgLSBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGVDb3VudGVycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxXaWRlQ291bnRlcnNXaWR0aCArPSBjb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3aWRlQ291bnRlcnMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgMyB3aWRlIGNvdW50ZXJzLCBidXQgYXJlIHRoZXkgY2xvc2UgZW5vdWdoIGluIHdpZHRoP1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4gcGVyZm9ybSBhIGNoZWFwLCBjb25zZXJ2YXRpdmUgY2hlY2sgdG8gc2VlIGlmIGFueSBpbmRpdmlkdWFsXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXIgaXMgbW9yZSB0aGFuIDEuNSB0aW1lcyB0aGUgYXZlcmFnZTpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Db3VudGVycyAmJiB3aWRlQ291bnRlcnMgPiAwOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3VudGVyID0gY291bnRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlciA+IG1heE5hcnJvd0NvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRlQ291bnRlcnMtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3RhbFdpZGVDb3VudGVyc1dpZHRoID0gMyAqIGF2ZXJhZ2UsIHNvIHRoaXMgY2hlY2tzIGlmIGNvdW50ZXIgPj0gMy8yICogYXZlcmFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY291bnRlciAqIDIpID49IHRvdGFsV2lkZUNvdW50ZXJzV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0dGVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh3aWRlQ291bnRlcnMgPiAzKTtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcGF0dGVyblRvQ2hhcihwYXR0ZXJuKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENvZGUzOVJlYWRlci5DSEFSQUNURVJfRU5DT0RJTkdTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvZGUzOVJlYWRlci5DSEFSQUNURVJfRU5DT0RJTkdTW2ldID09PSBwYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb2RlMzlSZWFkZXIuQUxQSEFCRVRfU1RSSU5HLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGF0dGVybiA9PT0gQ29kZTM5UmVhZGVyLkFTVEVSSVNLX0VOQ09ESU5HKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcqJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBkZWNvZGVFeHRlbmRlZChlbmNvZGVkKSB7XG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gZW5jb2RlZC5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgZGVjb2RlZCA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjID0gZW5jb2RlZC5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGMgPT09ICcrJyB8fCBjID09PSAnJCcgfHwgYyA9PT0gJyUnIHx8IGMgPT09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGVuY29kZWQuY2hhckF0KGkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlY29kZWRDaGFyID0gJ1xcMCc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gK0EgdG8gK1ogbWFwIHRvIGEgdG8gelxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID49ICdBJyAmJiBuZXh0IDw9ICdaJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkQ2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dC5jaGFyQ29kZUF0KDApICsgMzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJyQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRBIHRvICRaIG1hcCB0byBjb250cm9sIGNvZGVzIFNIIHRvIFNCXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gJ0EnICYmIG5leHQgPD0gJ1onKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0LmNoYXJDb2RlQXQoMCkgLSA2NCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnJSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJUEgdG8gJUUgbWFwIHRvIGNvbnRyb2wgY29kZXMgRVNDIHRvIFVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gJ0EnICYmIG5leHQgPD0gJ0UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0LmNoYXJDb2RlQXQoMCkgLSAzOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPj0gJ0YnICYmIG5leHQgPD0gJ0onKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0LmNoYXJDb2RlQXQoMCkgLSAxMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPj0gJ0snICYmIG5leHQgPD0gJ08nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0LmNoYXJDb2RlQXQoMCkgKyAxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPj0gJ1AnICYmIG5leHQgPD0gJ1QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0LmNoYXJDb2RlQXQoMCkgKyA0Myk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPT09ICdVJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkQ2hhciA9ICdcXDAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0ID09PSAnVicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZENoYXIgPSAnQCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5leHQgPT09ICdXJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkQ2hhciA9ICdgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobmV4dCA9PT0gJ1gnIHx8IG5leHQgPT09ICdZJyB8fCBuZXh0ID09PSAnWicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZENoYXIgPSAnXFx4N2YnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJy8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC9BIHRvIC9PIG1hcCB0byAhIHRvICwgYW5kIC9aIG1hcHMgdG8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID49ICdBJyAmJiBuZXh0IDw9ICdPJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkQ2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dC5jaGFyQ29kZUF0KDApIC0gMzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0ID09PSAnWicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZENoYXIgPSAnOic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlY29kZWQgKz0gZGVjb2RlZENoYXI7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1bXAgdXAgaSBhZ2FpbiBzaW5jZSB3ZSByZWFkIHR3byBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY29kZWQgKz0gYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDb2RlMzlSZWFkZXIuQUxQSEFCRVRfU1RSSU5HID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWi0uICQvKyUnO1xuICAgIC8qKlxuICAgICAqIFRoZXNlIHJlcHJlc2VudCB0aGUgZW5jb2RpbmdzIG9mIGNoYXJhY3RlcnMsIGFzIHBhdHRlcm5zIG9mIHdpZGUgYW5kIG5hcnJvdyBiYXJzLlxuICAgICAqIFRoZSA5IGxlYXN0LXNpZ25pZmljYW50IGJpdHMgb2YgZWFjaCBpbnQgY29ycmVzcG9uZCB0byB0aGUgcGF0dGVybiBvZiB3aWRlIGFuZCBuYXJyb3csXG4gICAgICogd2l0aCAxcyByZXByZXNlbnRpbmcgXCJ3aWRlXCIgYW5kIDBzIHJlcHJlc2VudGluZyBuYXJyb3cuXG4gICAgICovXG4gICAgQ29kZTM5UmVhZGVyLkNIQVJBQ1RFUl9FTkNPRElOR1MgPSBbXG4gICAgICAgIDB4MDM0LCAweDEyMSwgMHgwNjEsIDB4MTYwLCAweDAzMSwgMHgxMzAsIDB4MDcwLCAweDAyNSwgMHgxMjQsIDB4MDY0LFxuICAgICAgICAweDEwOSwgMHgwNDksIDB4MTQ4LCAweDAxOSwgMHgxMTgsIDB4MDU4LCAweDAwRCwgMHgxMEMsIDB4MDRDLCAweDAxQyxcbiAgICAgICAgMHgxMDMsIDB4MDQzLCAweDE0MiwgMHgwMTMsIDB4MTEyLCAweDA1MiwgMHgwMDcsIDB4MTA2LCAweDA0NiwgMHgwMTYsXG4gICAgICAgIDB4MTgxLCAweDBDMSwgMHgxQzAsIDB4MDkxLCAweDE5MCwgMHgwRDAsIDB4MDg1LCAweDE4NCwgMHgwQzQsIDB4MEE4LFxuICAgICAgICAweDBBMiwgMHgwOEEsIDB4MDJBIC8vIC8tJVxuICAgIF07XG4gICAgQ29kZTM5UmVhZGVyLkFTVEVSSVNLX0VOQ09ESU5HID0gMHgwOTQ7XG5cbiAgICAvKipcbiAgICAgKiA8cD5EZWNvZGVzIElURiBiYXJjb2Rlcy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFRqaWVjb1xuICAgICAqL1xuICAgIGNsYXNzIElURlJlYWRlciBleHRlbmRzIE9uZURSZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIC8vIHByaXZhdGUgc3RhdGljIFcgPSAzOyAvLyBQaXhlbCB3aWR0aCBvZiBhIDN4IHdpZGUgbGluZVxuICAgICAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgdyA9IDI7IC8vIFBpeGVsIHdpZHRoIG9mIGEgMnggd2lkZSBsaW5lXG4gICAgICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBOID0gMTsgLy8gUGl4ZWQgd2lkdGggb2YgYSBuYXJyb3cgbGluZVxuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIC8vIFN0b3JlcyB0aGUgYWN0dWFsIG5hcnJvdyBsaW5lIHdpZHRoIG9mIHRoZSBpbWFnZSBiZWluZyBkZWNvZGVkLlxuICAgICAgICAgICAgdGhpcy5uYXJyb3dMaW5lV2lkdGggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZWUgSVRGV3JpdGVyLlBBVFRFUk5TXG4gICAgICAgIC8qXG4gICAgICBcbiAgICAgICAgLyEqKlxuICAgICAgICAgKiBQYXR0ZXJucyBvZiBXaWRlIC8gTmFycm93IGxpbmVzIHRvIGluZGljYXRlIGVhY2ggZGlnaXRcbiAgICAgICAgICohL1xuICAgICAgICAqL1xuICAgICAgICBkZWNvZGVSb3cocm93TnVtYmVyLCByb3csIGhpbnRzKSB7XG4gICAgICAgICAgICAvLyBGaW5kIG91dCB3aGVyZSB0aGUgTWlkZGxlIHNlY3Rpb24gKHBheWxvYWQpIHN0YXJ0cyAmIGVuZHNcbiAgICAgICAgICAgIGxldCBzdGFydFJhbmdlID0gdGhpcy5kZWNvZGVTdGFydChyb3cpO1xuICAgICAgICAgICAgbGV0IGVuZFJhbmdlID0gdGhpcy5kZWNvZGVFbmQocm93KTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgSVRGUmVhZGVyLmRlY29kZU1pZGRsZShyb3csIHN0YXJ0UmFuZ2VbMV0sIGVuZFJhbmdlWzBdLCByZXN1bHQpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdFN0cmluZyA9IHJlc3VsdC50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGFsbG93ZWRMZW5ndGhzID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChoaW50cyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYWxsb3dlZExlbmd0aHMgPSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGUkMS5BTExPV0VEX0xFTkdUSFMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbG93ZWRMZW5ndGhzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhbGxvd2VkTGVuZ3RocyA9IElURlJlYWRlci5ERUZBVUxUX0FMTE9XRURfTEVOR1RIUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlcyB3aXRoIDJEIGJhcmNvZGVzIChhbmQgb3RoZXIgcGF0dGVybnMpLCBtYWtlXG4gICAgICAgICAgICAvLyBhbiBhc3N1bXB0aW9uIHRoYXQgdGhlIGRlY29kZWQgc3RyaW5nIG11c3QgYmUgYSAnc3RhbmRhcmQnIGxlbmd0aCBpZiBpdCdzIHNob3J0XG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gcmVzdWx0U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsZW5ndGhPSyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IG1heEFsbG93ZWRMZW5ndGggPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgYWxsb3dlZExlbmd0aHMpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGhPSyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBtYXhBbGxvd2VkTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heEFsbG93ZWRMZW5ndGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWxlbmd0aE9LICYmIGxlbmd0aCA+IG1heEFsbG93ZWRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGhPSyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWxlbmd0aE9LKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gW25ldyBSZXN1bHRQb2ludChzdGFydFJhbmdlWzFdLCByb3dOdW1iZXIpLCBuZXcgUmVzdWx0UG9pbnQoZW5kUmFuZ2VbMF0sIHJvd051bWJlcildO1xuICAgICAgICAgICAgbGV0IHJlc3VsdFJldHVybiA9IG5ldyBSZXN1bHQocmVzdWx0U3RyaW5nLCBudWxsLCAvLyBubyBuYXR1cmFsIGJ5dGUgcmVwcmVzZW50YXRpb24gZm9yIHRoZXNlIGJhcmNvZGVzXG4gICAgICAgICAgICAwLCBwb2ludHMsIEJhcmNvZGVGb3JtYXQkMS5JVEYsIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRSZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgLyEqKlxuICAgICAgICAgKiBAcGFyYW0gcm93ICAgICAgICAgIHJvdyBvZiBibGFjay93aGl0ZSB2YWx1ZXMgdG8gc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSBwYXlsb2FkU3RhcnQgb2Zmc2V0IG9mIHN0YXJ0IHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIHJlc3VsdFN0cmluZyB7QGxpbmsgU3RyaW5nQnVpbGRlcn0gdG8gYXBwZW5kIGRlY29kZWQgY2hhcnMgdG9cbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBkZWNvZGluZyBjb3VsZCBub3QgY29tcGxldGUgc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAqIS8qL1xuICAgICAgICBzdGF0aWMgZGVjb2RlTWlkZGxlKHJvdywgcGF5bG9hZFN0YXJ0LCBwYXlsb2FkRW5kLCByZXN1bHRTdHJpbmcpIHtcbiAgICAgICAgICAgIC8vIERpZ2l0cyBhcmUgaW50ZXJsZWF2ZWQgaW4gcGFpcnMgLSA1IGJsYWNrIGxpbmVzIGZvciBvbmUgZGlnaXQsIGFuZCB0aGVcbiAgICAgICAgICAgIC8vIDVcbiAgICAgICAgICAgIC8vIGludGVybGVhdmVkIHdoaXRlIGxpbmVzIGZvciB0aGUgc2Vjb25kIGRpZ2l0LlxuICAgICAgICAgICAgLy8gVGhlcmVmb3JlLCBuZWVkIHRvIHNjYW4gMTAgbGluZXMgYW5kIHRoZW5cbiAgICAgICAgICAgIC8vIHNwbGl0IHRoZXNlIGludG8gdHdvIGFycmF5c1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJEaWdpdFBhaXIgPSBuZXcgSW50MzJBcnJheSgxMCk7IC8vIDEwXG4gICAgICAgICAgICBsZXQgY291bnRlckJsYWNrID0gbmV3IEludDMyQXJyYXkoNSk7IC8vIDVcbiAgICAgICAgICAgIGxldCBjb3VudGVyV2hpdGUgPSBuZXcgSW50MzJBcnJheSg1KTsgLy8gNVxuICAgICAgICAgICAgY291bnRlckRpZ2l0UGFpci5maWxsKDApO1xuICAgICAgICAgICAgY291bnRlckJsYWNrLmZpbGwoMCk7XG4gICAgICAgICAgICBjb3VudGVyV2hpdGUuZmlsbCgwKTtcbiAgICAgICAgICAgIHdoaWxlIChwYXlsb2FkU3RhcnQgPCBwYXlsb2FkRW5kKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IDEwIHJ1bnMgb2YgYmxhY2svd2hpdGUuXG4gICAgICAgICAgICAgICAgT25lRFJlYWRlci5yZWNvcmRQYXR0ZXJuKHJvdywgcGF5bG9hZFN0YXJ0LCBjb3VudGVyRGlnaXRQYWlyKTtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCB0aGVtIGludG8gZWFjaCBhcnJheVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgNTsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0d29LID0gMiAqIGs7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJCbGFja1trXSA9IGNvdW50ZXJEaWdpdFBhaXJbdHdvS107XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJXaGl0ZVtrXSA9IGNvdW50ZXJEaWdpdFBhaXJbdHdvSyArIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmVzdE1hdGNoID0gSVRGUmVhZGVyLmRlY29kZURpZ2l0KGNvdW50ZXJCbGFjayk7XG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nLmFwcGVuZChiZXN0TWF0Y2gudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYmVzdE1hdGNoID0gdGhpcy5kZWNvZGVEaWdpdChjb3VudGVyV2hpdGUpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZy5hcHBlbmQoYmVzdE1hdGNoLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGNvdW50ZXJEaWdpdFBhaXIuZm9yRWFjaChmdW5jdGlvbiAoY291bnRlckRpZ2l0KSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWRTdGFydCArPSBjb3VudGVyRGlnaXQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyovISoqXG4gICAgICAgICAqIElkZW50aWZ5IHdoZXJlIHRoZSBzdGFydCBvZiB0aGUgbWlkZGxlIC8gcGF5bG9hZCBzZWN0aW9uIHN0YXJ0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvdyByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzIHRvIHNlYXJjaFxuICAgICAgICAgKiBAcmV0dXJuIEFycmF5LCBjb250YWluaW5nIGluZGV4IG9mIHN0YXJ0IG9mICdzdGFydCBibG9jaycgYW5kIGVuZCBvZlxuICAgICAgICAgKiAgICAgICAgICdzdGFydCBibG9jaydcbiAgICAgICAgICohLyovXG4gICAgICAgIGRlY29kZVN0YXJ0KHJvdykge1xuICAgICAgICAgICAgbGV0IGVuZFN0YXJ0ID0gSVRGUmVhZGVyLnNraXBXaGl0ZVNwYWNlKHJvdyk7XG4gICAgICAgICAgICBsZXQgc3RhcnRQYXR0ZXJuID0gSVRGUmVhZGVyLmZpbmRHdWFyZFBhdHRlcm4ocm93LCBlbmRTdGFydCwgSVRGUmVhZGVyLlNUQVJUX1BBVFRFUk4pO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB3aWR0aCBvZiBhIG5hcnJvdyBsaW5lIGluIHBpeGVscy4gV2UgY2FuIGRvIHRoaXMgYnlcbiAgICAgICAgICAgIC8vIGdldHRpbmcgdGhlIHdpZHRoIG9mIHRoZSBzdGFydCBwYXR0ZXJuIGFuZCBkaXZpZGluZyBieSA0IGJlY2F1c2UgaXRzXG4gICAgICAgICAgICAvLyBtYWRlIHVwIG9mIDQgbmFycm93IGxpbmVzLlxuICAgICAgICAgICAgdGhpcy5uYXJyb3dMaW5lV2lkdGggPSAoc3RhcnRQYXR0ZXJuWzFdIC0gc3RhcnRQYXR0ZXJuWzBdKSAvIDQ7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUXVpZXRab25lKHJvdywgc3RhcnRQYXR0ZXJuWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBzdGFydFBhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgLyovISoqXG4gICAgICAgICAqIFRoZSBzdGFydCAmIGVuZCBwYXR0ZXJucyBtdXN0IGJlIHByZS9wb3N0IGZpeGVkIGJ5IGEgcXVpZXQgem9uZS4gVGhpc1xuICAgICAgICAgKiB6b25lIG11c3QgYmUgYXQgbGVhc3QgMTAgdGltZXMgdGhlIHdpZHRoIG9mIGEgbmFycm93IGxpbmUuICBTY2FuIGJhY2sgdW50aWxcbiAgICAgICAgICogd2UgZWl0aGVyIGdldCB0byB0aGUgc3RhcnQgb2YgdGhlIGJhcmNvZGUgb3IgbWF0Y2ggdGhlIG5lY2Vzc2FyeSBudW1iZXIgb2ZcbiAgICAgICAgICogcXVpZXQgem9uZSBwaXhlbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIE5vdGU6IEl0cyBhc3N1bWVkIHRoZSByb3cgaXMgcmV2ZXJzZWQgd2hlbiB1c2luZyB0aGlzIG1ldGhvZCB0byBmaW5kXG4gICAgICAgICAqIHF1aWV0IHpvbmUgYWZ0ZXIgdGhlIGVuZCBwYXR0ZXJuLlxuICAgICAgICAgKlxuICAgICAgICAgKiByZWY6IGh0dHA6Ly93d3cuYmFyY29kZS0xLm5ldC9pMjVjb2RlLmh0bWxcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvdyBiaXQgYXJyYXkgcmVwcmVzZW50aW5nIHRoZSBzY2FubmVkIGJhcmNvZGUuXG4gICAgICAgICAqIEBwYXJhbSBzdGFydFBhdHRlcm4gaW5kZXggaW50byByb3cgb2YgdGhlIHN0YXJ0IG9yIGVuZCBwYXR0ZXJuLlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIHRoZSBxdWlldCB6b25lIGNhbm5vdCBiZSBmb3VuZFxuICAgICAgICAgKiEvKi9cbiAgICAgICAgdmFsaWRhdGVRdWlldFpvbmUocm93LCBzdGFydFBhdHRlcm4pIHtcbiAgICAgICAgICAgIGxldCBxdWlldENvdW50ID0gdGhpcy5uYXJyb3dMaW5lV2lkdGggKiAxMDsgLy8gZXhwZWN0IHRvIGZpbmQgdGhpcyBtYW55IHBpeGVscyBvZiBxdWlldCB6b25lXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm90IHNvIG1hbnkgcGl4ZWwgYXQgYWxsIGxldCdzIHRyeSBhcyBtYW55IGFzIHBvc3NpYmxlXG4gICAgICAgICAgICBxdWlldENvdW50ID0gcXVpZXRDb3VudCA8IHN0YXJ0UGF0dGVybiA/IHF1aWV0Q291bnQgOiBzdGFydFBhdHRlcm47XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRQYXR0ZXJuIC0gMTsgcXVpZXRDb3VudCA+IDAgJiYgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmdldChpKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcXVpZXRDb3VudC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1aWV0Q291bnQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBVbmFibGUgdG8gZmluZCB0aGUgbmVjZXNzYXJ5IG51bWJlciBvZiBxdWlldCB6b25lIHBpeGVscy5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAvISoqXG4gICAgICAgICAqIFNraXAgYWxsIHdoaXRlc3BhY2UgdW50aWwgd2UgZ2V0IHRvIHRoZSBmaXJzdCBibGFjayBsaW5lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcm93IHJvdyBvZiBibGFjay93aGl0ZSB2YWx1ZXMgdG8gc2VhcmNoXG4gICAgICAgICAqIEByZXR1cm4gaW5kZXggb2YgdGhlIGZpcnN0IGJsYWNrIGxpbmUuXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gVGhyb3dzIGV4Y2VwdGlvbiBpZiBubyBibGFjayBsaW5lcyBhcmUgZm91bmQgaW4gdGhlIHJvd1xuICAgICAgICAgKiEvKi9cbiAgICAgICAgc3RhdGljIHNraXBXaGl0ZVNwYWNlKHJvdykge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSByb3cuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgY29uc3QgZW5kU3RhcnQgPSByb3cuZ2V0TmV4dFNldCgwKTtcbiAgICAgICAgICAgIGlmIChlbmRTdGFydCA9PT0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbmRTdGFydDtcbiAgICAgICAgfVxuICAgICAgICAvKi8hKipcbiAgICAgICAgICogSWRlbnRpZnkgd2hlcmUgdGhlIGVuZCBvZiB0aGUgbWlkZGxlIC8gcGF5bG9hZCBzZWN0aW9uIGVuZHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSByb3cgcm93IG9mIGJsYWNrL3doaXRlIHZhbHVlcyB0byBzZWFyY2hcbiAgICAgICAgICogQHJldHVybiBBcnJheSwgY29udGFpbmluZyBpbmRleCBvZiBzdGFydCBvZiAnZW5kIGJsb2NrJyBhbmQgZW5kIG9mICdlbmRcbiAgICAgICAgICogICAgICAgICBibG9jaydcbiAgICAgICAgICohLyovXG4gICAgICAgIGRlY29kZUVuZChyb3cpIHtcbiAgICAgICAgICAgIC8vIEZvciBjb252ZW5pZW5jZSwgcmV2ZXJzZSB0aGUgcm93IGFuZCB0aGVuXG4gICAgICAgICAgICAvLyBzZWFyY2ggZnJvbSAndGhlIHN0YXJ0JyBmb3IgdGhlIGVuZCBibG9ja1xuICAgICAgICAgICAgcm93LnJldmVyc2UoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZFN0YXJ0ID0gSVRGUmVhZGVyLnNraXBXaGl0ZVNwYWNlKHJvdyk7XG4gICAgICAgICAgICAgICAgbGV0IGVuZFBhdHRlcm47XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZW5kUGF0dGVybiA9IElURlJlYWRlci5maW5kR3VhcmRQYXR0ZXJuKHJvdywgZW5kU3RhcnQsIElURlJlYWRlci5FTkRfUEFUVEVSTl9SRVZFUlNFRFswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kUGF0dGVybiA9IElURlJlYWRlci5maW5kR3VhcmRQYXR0ZXJuKHJvdywgZW5kU3RhcnQsIElURlJlYWRlci5FTkRfUEFUVEVSTl9SRVZFUlNFRFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGhlIHN0YXJ0ICYgZW5kIHBhdHRlcm5zIG11c3QgYmUgcHJlL3Bvc3QgZml4ZWQgYnkgYSBxdWlldCB6b25lLiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gem9uZSBtdXN0IGJlIGF0IGxlYXN0IDEwIHRpbWVzIHRoZSB3aWR0aCBvZiBhIG5hcnJvdyBsaW5lLlxuICAgICAgICAgICAgICAgIC8vIHJlZjogaHR0cDovL3d3dy5iYXJjb2RlLTEubmV0L2kyNWNvZGUuaHRtbFxuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVRdWlldFpvbmUocm93LCBlbmRQYXR0ZXJuWzBdKTtcbiAgICAgICAgICAgICAgICAvLyBOb3cgcmVjYWxjdWxhdGUgdGhlIGluZGljZXMgb2Ygd2hlcmUgdGhlICdlbmRibG9jaycgc3RhcnRzICYgc3RvcHMgdG9cbiAgICAgICAgICAgICAgICAvLyBhY2NvbW1vZGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoZSByZXZlcnNlZCBuYXR1cmUgb2YgdGhlIHNlYXJjaFxuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gZW5kUGF0dGVyblswXTtcbiAgICAgICAgICAgICAgICBlbmRQYXR0ZXJuWzBdID0gcm93LmdldFNpemUoKSAtIGVuZFBhdHRlcm5bMV07XG4gICAgICAgICAgICAgICAgZW5kUGF0dGVyblsxXSA9IHJvdy5nZXRTaXplKCkgLSB0ZW1wO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmRQYXR0ZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgLy8gUHV0IHRoZSByb3cgYmFjayB0aGUgcmlnaHQgd2F5LlxuICAgICAgICAgICAgICAgIHJvdy5yZXZlcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgLyEqKlxuICAgICAgICAgKiBAcGFyYW0gcm93ICAgICAgIHJvdyBvZiBibGFjay93aGl0ZSB2YWx1ZXMgdG8gc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSByb3dPZmZzZXQgcG9zaXRpb24gdG8gc3RhcnQgc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSBwYXR0ZXJuICAgcGF0dGVybiBvZiBjb3VudHMgb2YgbnVtYmVyIG9mIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMgdGhhdCBhcmVcbiAgICAgICAgICogICAgICAgICAgICAgICAgICBiZWluZyBzZWFyY2hlZCBmb3IgYXMgYSBwYXR0ZXJuXG4gICAgICAgICAqIEByZXR1cm4gc3RhcnQvZW5kIGhvcml6b250YWwgb2Zmc2V0IG9mIGd1YXJkIHBhdHRlcm4sIGFzIGFuIGFycmF5IG9mIHR3b1xuICAgICAgICAgKiAgICAgICAgIGludHNcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBwYXR0ZXJuIGlzIG5vdCBmb3VuZFxuICAgICAgICAgKiEvKi9cbiAgICAgICAgc3RhdGljIGZpbmRHdWFyZFBhdHRlcm4ocm93LCByb3dPZmZzZXQsIHBhdHRlcm4pIHtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuTGVuZ3RoID0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgY291bnRlcnMgPSBuZXcgSW50MzJBcnJheShwYXR0ZXJuTGVuZ3RoKTtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgaXNXaGl0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBsZXQgcGF0dGVyblN0YXJ0ID0gcm93T2Zmc2V0O1xuICAgICAgICAgICAgY291bnRlcnMuZmlsbCgwKTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSByb3dPZmZzZXQ7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5nZXQoeCkgIT09IGlzV2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXJQb3NpdGlvbiA9PT0gcGF0dGVybkxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPbmVEUmVhZGVyLnBhdHRlcm5NYXRjaFZhcmlhbmNlKGNvdW50ZXJzLCBwYXR0ZXJuLCBJVEZSZWFkZXIuTUFYX0lORElWSURVQUxfVkFSSUFOQ0UpIDwgSVRGUmVhZGVyLk1BWF9BVkdfVkFSSUFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3BhdHRlcm5TdGFydCwgeF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuU3RhcnQgKz0gY291bnRlcnNbMF0gKyBjb3VudGVyc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkoY291bnRlcnMsIDIsIGNvdW50ZXJzLCAwLCBjb3VudGVyUG9zaXRpb24gLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbiAtIDFdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyUG9zaXRpb24rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaXNXaGl0ZSA9ICFpc1doaXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qLyEqKlxuICAgICAgICAgKiBBdHRlbXB0cyB0byBkZWNvZGUgYSBzZXF1ZW5jZSBvZiBJVEYgYmxhY2svd2hpdGUgbGluZXMgaW50byBzaW5nbGVcbiAgICAgICAgICogZGlnaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb3VudGVycyB0aGUgY291bnRzIG9mIHJ1bnMgb2Ygb2JzZXJ2ZWQgYmxhY2svd2hpdGUvYmxhY2svLi4uIHZhbHVlc1xuICAgICAgICAgKiBAcmV0dXJuIFRoZSBkZWNvZGVkIGRpZ2l0XG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgZGlnaXQgY2Fubm90IGJlIGRlY29kZWRcbiAgICAgICAgICohLyovXG4gICAgICAgIHN0YXRpYyBkZWNvZGVEaWdpdChjb3VudGVycykge1xuICAgICAgICAgICAgbGV0IGJlc3RWYXJpYW5jZSA9IElURlJlYWRlci5NQVhfQVZHX1ZBUklBTkNFOyAvLyB3b3JzdCB2YXJpYW5jZSB3ZSdsbCBhY2NlcHRcbiAgICAgICAgICAgIGxldCBiZXN0TWF0Y2ggPSAtMTtcbiAgICAgICAgICAgIGxldCBtYXggPSBJVEZSZWFkZXIuUEFUVEVSTlMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gSVRGUmVhZGVyLlBBVFRFUk5TW2ldO1xuICAgICAgICAgICAgICAgIGxldCB2YXJpYW5jZSA9IE9uZURSZWFkZXIucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIElURlJlYWRlci5NQVhfSU5ESVZJRFVBTF9WQVJJQU5DRSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhcmlhbmNlIDwgYmVzdFZhcmlhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RWYXJpYW5jZSA9IHZhcmlhbmNlO1xuICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2ggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YXJpYW5jZSA9PT0gYmVzdFZhcmlhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGZpbmQgYSBzZWNvbmQgJ2Jlc3QgbWF0Y2gnIHdpdGggdGhlIHNhbWUgdmFyaWFuY2UsIHdlIGNhbiBub3QgcmVsaWFibHkgcmVwb3J0IHRvIGhhdmUgYSBzdWl0YWJsZSBtYXRjaFxuICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2ggPSAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmVzdE1hdGNoID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmVzdE1hdGNoICUgMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBJVEZSZWFkZXIuUEFUVEVSTlMgPSBbXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMiwgMiwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDEsIDEsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAxLCAxLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgMiwgMSwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDIsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAyLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMiwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDEsIDIsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAxLCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMiwgMSwgMiwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDMsIDMsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAxLCAxLCAxLCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMywgMSwgMSwgM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDMsIDEsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAzLCAxLCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMywgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDMsIDEsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAzLCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMSwgMywgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDEsIDMsIDFdKSAvLyA5XG4gICAgXTtcbiAgICBJVEZSZWFkZXIuTUFYX0FWR19WQVJJQU5DRSA9IDAuMzg7XG4gICAgSVRGUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFID0gMC41O1xuICAgIC8qIC8hKiogVmFsaWQgSVRGIGxlbmd0aHMuIEFueXRoaW5nIGxvbmdlciB0aGFuIHRoZSBsYXJnZXN0IHZhbHVlIGlzIGFsc28gYWxsb3dlZC4gKiEvKi9cbiAgICBJVEZSZWFkZXIuREVGQVVMVF9BTExPV0VEX0xFTkdUSFMgPSBbNiwgOCwgMTAsIDEyLCAxNF07XG4gICAgLyovISoqXG4gICAgICogU3RhcnQvZW5kIGd1YXJkIHBhdHRlcm4uXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGUgZW5kIHBhdHRlcm4gaXMgcmV2ZXJzZWQgYmVjYXVzZSB0aGUgcm93IGlzIHJldmVyc2VkIGJlZm9yZVxuICAgICAqIHNlYXJjaGluZyBmb3IgdGhlIEVORF9QQVRURVJOXG4gICAgICohLyovXG4gICAgSVRGUmVhZGVyLlNUQVJUX1BBVFRFUk4gPSBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDEsIDFdKTtcbiAgICBJVEZSZWFkZXIuRU5EX1BBVFRFUk5fUkVWRVJTRUQgPSBbXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDNdKSAvLyAzeFxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiA8cD5FbmNhcHN1bGF0ZXMgZnVuY3Rpb25hbGl0eSBhbmQgaW1wbGVtZW50YXRpb24gdGhhdCBpcyBjb21tb24gdG8gVVBDIGFuZCBFQU4gZmFtaWxpZXNcbiAgICAgKiBvZiBvbmUtZGltZW5zaW9uYWwgYmFyY29kZXMuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbilcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBhdXRob3IgYWxhc2RhaXJAZ29vZ2xlLmNvbSAoQWxhc2RhaXIgTWFja2ludG9zaClcbiAgICAgKi9cbiAgICBjbGFzcyBBYnN0cmFjdFVQQ0VBTlJlYWRlciBleHRlbmRzIE9uZURSZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZVJvd1N0cmluZ0J1ZmZlciA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGljIGZpbmRTdGFydEd1YXJkUGF0dGVybihyb3cpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZFN0YXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgc3RhcnRSYW5nZTtcbiAgICAgICAgICAgIGxldCBuZXh0U3RhcnQgPSAwO1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJzID0gSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB3aGlsZSAoIWZvdW5kU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjb3VudGVycyA9IEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pO1xuICAgICAgICAgICAgICAgIHN0YXJ0UmFuZ2UgPSBBYnN0cmFjdFVQQ0VBTlJlYWRlci5maW5kR3VhcmRQYXR0ZXJuKHJvdywgbmV4dFN0YXJ0LCBmYWxzZSwgdGhpcy5TVEFSVF9FTkRfUEFUVEVSTiwgY291bnRlcnMpO1xuICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHN0YXJ0UmFuZ2VbMF07XG4gICAgICAgICAgICAgICAgbmV4dFN0YXJ0ID0gc3RhcnRSYW5nZVsxXTtcbiAgICAgICAgICAgICAgICBsZXQgcXVpZXRTdGFydCA9IHN0YXJ0IC0gKG5leHRTdGFydCAtIHN0YXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAocXVpZXRTdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kU3RhcnQgPSByb3cuaXNSYW5nZShxdWlldFN0YXJ0LCBzdGFydCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGFydFJhbmdlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjaGVja0NoZWNrc3VtKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBBYnN0cmFjdFVQQ0VBTlJlYWRlci5jaGVja1N0YW5kYXJkVVBDRUFOQ2hlY2tzdW0ocyk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNoZWNrU3RhbmRhcmRVUENFQU5DaGVja3N1bShzKSB7XG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gcy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjaGVjayA9IHBhcnNlSW50KHMuY2hhckF0KGxlbmd0aCAtIDEpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gQWJzdHJhY3RVUENFQU5SZWFkZXIuZ2V0U3RhbmRhcmRVUENFQU5DaGVja3N1bShzLnN1YnN0cmluZygwLCBsZW5ndGggLSAxKSkgPT09IGNoZWNrO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRTdGFuZGFyZFVQQ0VBTkNoZWNrc3VtKHMpIHtcbiAgICAgICAgICAgIGxldCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpZ2l0ID0gcy5jaGFyQXQoaSkuY2hhckNvZGVBdCgwKSAtICcwJy5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgICAgIGlmIChkaWdpdCA8IDAgfHwgZGlnaXQgPiA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3VtICs9IGRpZ2l0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VtICo9IDM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVuZ3RoIC0gMjsgaSA+PSAwOyBpIC09IDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBzLmNoYXJBdChpKS5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpZ2l0IDwgMCB8fCBkaWdpdCA+IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdW0gKz0gZGlnaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDEwMDAgLSBzdW0pICUgMTA7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGRlY29kZUVuZChyb3csIGVuZFN0YXJ0KSB7XG4gICAgICAgICAgICByZXR1cm4gQWJzdHJhY3RVUENFQU5SZWFkZXIuZmluZEd1YXJkUGF0dGVybihyb3csIGVuZFN0YXJ0LCBmYWxzZSwgQWJzdHJhY3RVUENFQU5SZWFkZXIuU1RBUlRfRU5EX1BBVFRFUk4sIG5ldyBJbnQzMkFycmF5KEFic3RyYWN0VVBDRUFOUmVhZGVyLlNUQVJUX0VORF9QQVRURVJOLmxlbmd0aCkuZmlsbCgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBmaW5kR3VhcmRQYXR0ZXJuV2l0aG91dENvdW50ZXJzKHJvdywgcm93T2Zmc2V0LCB3aGl0ZUZpcnN0LCBwYXR0ZXJuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kR3VhcmRQYXR0ZXJuKHJvdywgcm93T2Zmc2V0LCB3aGl0ZUZpcnN0LCBwYXR0ZXJuLCBuZXcgSW50MzJBcnJheShwYXR0ZXJuLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gcm93IHJvdyBvZiBibGFjay93aGl0ZSB2YWx1ZXMgdG8gc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSByb3dPZmZzZXQgcG9zaXRpb24gdG8gc3RhcnQgc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSB3aGl0ZUZpcnN0IGlmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoZSBwYXR0ZXJuIHNwZWNpZmllcyB3aGl0ZS9ibGFjay93aGl0ZS8uLi5cbiAgICAgICAgICogcGl4ZWwgY291bnRzLCBvdGhlcndpc2UsIGl0IGlzIGludGVycHJldGVkIGFzIGJsYWNrL3doaXRlL2JsYWNrLy4uLlxuICAgICAgICAgKiBAcGFyYW0gcGF0dGVybiBwYXR0ZXJuIG9mIGNvdW50cyBvZiBudW1iZXIgb2YgYmxhY2sgYW5kIHdoaXRlIHBpeGVscyB0aGF0IGFyZSBiZWluZ1xuICAgICAgICAgKiBzZWFyY2hlZCBmb3IgYXMgYSBwYXR0ZXJuXG4gICAgICAgICAqIEBwYXJhbSBjb3VudGVycyBhcnJheSBvZiBjb3VudGVycywgYXMgbG9uZyBhcyBwYXR0ZXJuLCB0byByZS11c2VcbiAgICAgICAgICogQHJldHVybiBzdGFydC9lbmQgaG9yaXpvbnRhbCBvZmZzZXQgb2YgZ3VhcmQgcGF0dGVybiwgYXMgYW4gYXJyYXkgb2YgdHdvIGludHNcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBwYXR0ZXJuIGlzIG5vdCBmb3VuZFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGZpbmRHdWFyZFBhdHRlcm4ocm93LCByb3dPZmZzZXQsIHdoaXRlRmlyc3QsIHBhdHRlcm4sIGNvdW50ZXJzKSB7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSByb3cuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgcm93T2Zmc2V0ID0gd2hpdGVGaXJzdCA/IHJvdy5nZXROZXh0VW5zZXQocm93T2Zmc2V0KSA6IHJvdy5nZXROZXh0U2V0KHJvd09mZnNldCk7XG4gICAgICAgICAgICBsZXQgY291bnRlclBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuU3RhcnQgPSByb3dPZmZzZXQ7XG4gICAgICAgICAgICBsZXQgcGF0dGVybkxlbmd0aCA9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGlzV2hpdGUgPSB3aGl0ZUZpcnN0O1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHJvd09mZnNldDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmdldCh4KSAhPT0gaXNXaGl0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlclBvc2l0aW9uID09PSBwYXR0ZXJuTGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9uZURSZWFkZXIucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIEFic3RyYWN0VVBDRUFOUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFKSA8IEFic3RyYWN0VVBDRUFOUmVhZGVyLk1BWF9BVkdfVkFSSUFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFtwYXR0ZXJuU3RhcnQsIHhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5TdGFydCArPSBjb3VudGVyc1swXSArIGNvdW50ZXJzWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNsaWNlID0gY291bnRlcnMuc2xpY2UoMiwgY291bnRlcnMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50ZXJQb3NpdGlvbiAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2ldID0gc2xpY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb24gLSAxXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJQb3NpdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZGVjb2RlRGlnaXQocm93LCBjb3VudGVycywgcm93T2Zmc2V0LCBwYXR0ZXJucykge1xuICAgICAgICAgICAgdGhpcy5yZWNvcmRQYXR0ZXJuKHJvdywgcm93T2Zmc2V0LCBjb3VudGVycyk7XG4gICAgICAgICAgICBsZXQgYmVzdFZhcmlhbmNlID0gdGhpcy5NQVhfQVZHX1ZBUklBTkNFO1xuICAgICAgICAgICAgbGV0IGJlc3RNYXRjaCA9IC0xO1xuICAgICAgICAgICAgbGV0IG1heCA9IHBhdHRlcm5zLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGF0dGVybiA9IHBhdHRlcm5zW2ldO1xuICAgICAgICAgICAgICAgIGxldCB2YXJpYW5jZSA9IE9uZURSZWFkZXIucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIEFic3RyYWN0VVBDRUFOUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFKTtcbiAgICAgICAgICAgICAgICBpZiAodmFyaWFuY2UgPCBiZXN0VmFyaWFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdFZhcmlhbmNlID0gdmFyaWFuY2U7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RNYXRjaCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlc3RNYXRjaCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJlc3RNYXRjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRoZXNlIHR3byB2YWx1ZXMgYXJlIGNyaXRpY2FsIGZvciBkZXRlcm1pbmluZyBob3cgcGVybWlzc2l2ZSB0aGUgZGVjb2Rpbmcgd2lsbCBiZS5cbiAgICAvLyBXZSd2ZSBhcnJpdmVkIGF0IHRoZXNlIHZhbHVlcyB0aHJvdWdoIGEgbG90IG9mIHRyaWFsIGFuZCBlcnJvci4gU2V0dGluZyB0aGVtIGFueSBoaWdoZXJcbiAgICAvLyBsZXRzIGZhbHNlIHBvc2l0aXZlcyBjcmVlcCBpbiBxdWlja2x5LlxuICAgIEFic3RyYWN0VVBDRUFOUmVhZGVyLk1BWF9BVkdfVkFSSUFOQ0UgPSAwLjQ4O1xuICAgIEFic3RyYWN0VVBDRUFOUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFID0gMC43O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0L2VuZCBndWFyZCBwYXR0ZXJuLlxuICAgICAqL1xuICAgIEFic3RyYWN0VVBDRUFOUmVhZGVyLlNUQVJUX0VORF9QQVRURVJOID0gSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxXSk7XG4gICAgLyoqXG4gICAgICogUGF0dGVybiBtYXJraW5nIHRoZSBtaWRkbGUgb2YgYSBVUEMvRUFOIHBhdHRlcm4sIHNlcGFyYXRpbmcgdGhlIHR3byBoYWx2ZXMuXG4gICAgICovXG4gICAgQWJzdHJhY3RVUENFQU5SZWFkZXIuTUlERExFX1BBVFRFUk4gPSBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDEsIDEsIDFdKTtcbiAgICAvKipcbiAgICAgKiBlbmQgZ3VhcmQgcGF0dGVybi5cbiAgICAgKi9cbiAgICBBYnN0cmFjdFVQQ0VBTlJlYWRlci5FTkRfUEFUVEVSTiA9IEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgMSwgMSwgMV0pO1xuICAgIC8qKlxuICAgICAqIFwiT2RkXCIsIG9yIFwiTFwiIHBhdHRlcm5zIHVzZWQgdG8gZW5jb2RlIFVQQy9FQU4gZGlnaXRzLlxuICAgICAqL1xuICAgIEFic3RyYWN0VVBDRUFOUmVhZGVyLkxfUEFUVEVSTlMgPSBbXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMiwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDIsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAxLCAyLCAyXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgNCwgMSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDEsIDMsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAzLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDEsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAyLCAxLCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgMSwgMSwgMl0pLFxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBAc2VlIFVQQ0VBTkV4dGVuc2lvbjJTdXBwb3J0XG4gICAgICovXG4gICAgY2xhc3MgVVBDRUFORXh0ZW5zaW9uNVN1cHBvcnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuQ0hFQ0tfRElHSVRfRU5DT0RJTkdTID0gWzB4MTgsIDB4MTQsIDB4MTIsIDB4MTEsIDB4MEMsIDB4MDYsIDB4MDMsIDB4MEEsIDB4MDksIDB4MDVdO1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVNaWRkbGVDb3VudGVycyA9IEludDMyQXJyYXkuZnJvbShbMCwgMCwgMCwgMF0pO1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVSb3dTdHJpbmdCdWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVSb3cocm93TnVtYmVyLCByb3csIGV4dGVuc2lvblN0YXJ0UmFuZ2UpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmRlY29kZVJvd1N0cmluZ0J1ZmZlcjtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLmRlY29kZU1pZGRsZShyb3csIGV4dGVuc2lvblN0YXJ0UmFuZ2UsIHJlc3VsdCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0U3RyaW5nID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgZXh0ZW5zaW9uRGF0YSA9IFVQQ0VBTkV4dGVuc2lvbjVTdXBwb3J0LnBhcnNlRXh0ZW5zaW9uU3RyaW5nKHJlc3VsdFN0cmluZyk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0UG9pbnRzID0gW1xuICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludCgoZXh0ZW5zaW9uU3RhcnRSYW5nZVswXSArIGV4dGVuc2lvblN0YXJ0UmFuZ2VbMV0pIC8gMi4wLCByb3dOdW1iZXIpLFxuICAgICAgICAgICAgICAgIG5ldyBSZXN1bHRQb2ludChlbmQsIHJvd051bWJlcilcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBsZXQgZXh0ZW5zaW9uUmVzdWx0ID0gbmV3IFJlc3VsdChyZXN1bHRTdHJpbmcsIG51bGwsIDAsIHJlc3VsdFBvaW50cywgQmFyY29kZUZvcm1hdCQxLlVQQ19FQU5fRVhURU5TSU9OLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uUmVzdWx0LnB1dEFsbE1ldGFkYXRhKGV4dGVuc2lvbkRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVNaWRkbGUocm93LCBzdGFydFJhbmdlLCByZXN1bHRTdHJpbmcpIHtcbiAgICAgICAgICAgIGxldCBjb3VudGVycyA9IHRoaXMuZGVjb2RlTWlkZGxlQ291bnRlcnM7XG4gICAgICAgICAgICBjb3VudGVyc1swXSA9IDA7XG4gICAgICAgICAgICBjb3VudGVyc1sxXSA9IDA7XG4gICAgICAgICAgICBjb3VudGVyc1syXSA9IDA7XG4gICAgICAgICAgICBjb3VudGVyc1szXSA9IDA7XG4gICAgICAgICAgICBsZXQgZW5kID0gcm93LmdldFNpemUoKTtcbiAgICAgICAgICAgIGxldCByb3dPZmZzZXQgPSBzdGFydFJhbmdlWzFdO1xuICAgICAgICAgICAgbGV0IGxnUGF0dGVybkZvdW5kID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgNSAmJiByb3dPZmZzZXQgPCBlbmQ7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBiZXN0TWF0Y2ggPSBBYnN0cmFjdFVQQ0VBTlJlYWRlci5kZWNvZGVEaWdpdChcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBjb3VudGVycyxcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICBBYnN0cmFjdFVQQ0VBTlJlYWRlci5MX0FORF9HX1BBVFRFUk5TKTtcbiAgICAgICAgICAgICAgICByZXN1bHRTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoJzAnLmNoYXJDb2RlQXQoMCkgKyBiZXN0TWF0Y2ggJSAxMCkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgY291bnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0ICs9IGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZXN0TWF0Y2ggPj0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgbGdQYXR0ZXJuRm91bmQgfD0gMSA8PCAoNCAtIHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeCAhPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG9mZiBzZXBhcmF0b3IgaWYgbm90IGxhc3RcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0ID0gcm93LmdldE5leHRTZXQocm93T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0ID0gcm93LmdldE5leHRVbnNldChyb3dPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHRTdHJpbmcubGVuZ3RoICE9PSA1KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2hlY2tEaWdpdCA9IHRoaXMuZGV0ZXJtaW5lQ2hlY2tEaWdpdChsZ1BhdHRlcm5Gb3VuZCk7XG4gICAgICAgICAgICBpZiAoVVBDRUFORXh0ZW5zaW9uNVN1cHBvcnQuZXh0ZW5zaW9uQ2hlY2tzdW0ocmVzdWx0U3RyaW5nLnRvU3RyaW5nKCkpICE9PSBjaGVja0RpZ2l0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBleHRlbnNpb25DaGVja3N1bShzKSB7XG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gcy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsZW5ndGggLSAyOyBpID49IDA7IGkgLT0gMikge1xuICAgICAgICAgICAgICAgIHN1bSArPSBzLmNoYXJBdChpKS5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdW0gKj0gMztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMikge1xuICAgICAgICAgICAgICAgIHN1bSArPSBzLmNoYXJBdChpKS5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdW0gKj0gMztcbiAgICAgICAgICAgIHJldHVybiBzdW0gJSAxMDtcbiAgICAgICAgfVxuICAgICAgICBkZXRlcm1pbmVDaGVja0RpZ2l0KGxnUGF0dGVybkZvdW5kKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDEwOyBkKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGdQYXR0ZXJuRm91bmQgPT09IHRoaXMuQ0hFQ0tfRElHSVRfRU5DT0RJTkdTW2RdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBwYXJzZUV4dGVuc2lvblN0cmluZyhyYXcpIHtcbiAgICAgICAgICAgIGlmIChyYXcubGVuZ3RoICE9PSA1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBVUENFQU5FeHRlbnNpb241U3VwcG9ydC5wYXJzZUV4dGVuc2lvbjVTdHJpbmcocmF3KTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcChbW1Jlc3VsdE1ldGFkYXRhVHlwZSQxLlNVR0dFU1RFRF9QUklDRSwgdmFsdWVdXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHBhcnNlRXh0ZW5zaW9uNVN0cmluZyhyYXcpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW5jeTtcbiAgICAgICAgICAgIHN3aXRjaCAocmF3LmNoYXJBdCgwKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJzAnOlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeSA9ICfCoyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJzUnOlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeSA9ICckJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnOSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZmVyZW5jZTogaHR0cDovL3d3dy5qb2xseXRlY2guY29tXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmF3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICc5MDAwMCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gc3VnZ2VzdGVkIHJldGFpbCBwcmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnOTk5OTEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBsZW1lbnRhcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzAuMDAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnOTk5OTAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnVXNlZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLi4uIHVua25vd24gY3VycmVuY3k/XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJhd0Ftb3VudCA9IHBhcnNlSW50KHJhdy5zdWJzdHJpbmcoMSkpO1xuICAgICAgICAgICAgbGV0IHVuaXRzU3RyaW5nID0gKHJhd0Ftb3VudCAvIDEwMCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBodW5kcmVkdGhzID0gcmF3QW1vdW50ICUgMTAwO1xuICAgICAgICAgICAgbGV0IGh1bmRyZWR0aHNTdHJpbmcgPSBodW5kcmVkdGhzIDwgMTAgPyAnMCcgKyBodW5kcmVkdGhzIDogaHVuZHJlZHRocy50b1N0cmluZygpOyAvLyBmaXhtZVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbmN5ICsgdW5pdHNTdHJpbmcgKyAnLicgKyBodW5kcmVkdGhzU3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHNlZSBVUENFQU5FeHRlbnNpb241U3VwcG9ydFxuICAgICAqL1xuICAgIGNsYXNzIFVQQ0VBTkV4dGVuc2lvbjJTdXBwb3J0IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLmRlY29kZU1pZGRsZUNvdW50ZXJzID0gSW50MzJBcnJheS5mcm9tKFswLCAwLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZVJvd1N0cmluZ0J1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgZXh0ZW5zaW9uU3RhcnRSYW5nZSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZGVjb2RlUm93U3RyaW5nQnVmZmVyO1xuICAgICAgICAgICAgbGV0IGVuZCA9IHRoaXMuZGVjb2RlTWlkZGxlKHJvdywgZXh0ZW5zaW9uU3RhcnRSYW5nZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIGxldCByZXN1bHRTdHJpbmcgPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBleHRlbnNpb25EYXRhID0gVVBDRUFORXh0ZW5zaW9uMlN1cHBvcnQucGFyc2VFeHRlbnNpb25TdHJpbmcocmVzdWx0U3RyaW5nKTtcbiAgICAgICAgICAgIGxldCByZXN1bHRQb2ludHMgPSBbXG4gICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KChleHRlbnNpb25TdGFydFJhbmdlWzBdICsgZXh0ZW5zaW9uU3RhcnRSYW5nZVsxXSkgLyAyLjAsIHJvd051bWJlciksXG4gICAgICAgICAgICAgICAgbmV3IFJlc3VsdFBvaW50KGVuZCwgcm93TnVtYmVyKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGxldCBleHRlbnNpb25SZXN1bHQgPSBuZXcgUmVzdWx0KHJlc3VsdFN0cmluZywgbnVsbCwgMCwgcmVzdWx0UG9pbnRzLCBCYXJjb2RlRm9ybWF0JDEuVVBDX0VBTl9FWFRFTlNJT04sIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIGlmIChleHRlbnNpb25EYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25SZXN1bHQucHV0QWxsTWV0YWRhdGEoZXh0ZW5zaW9uRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGRlY29kZU1pZGRsZShyb3csIHN0YXJ0UmFuZ2UsIHJlc3VsdFN0cmluZykge1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJzID0gdGhpcy5kZWNvZGVNaWRkbGVDb3VudGVycztcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzFdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgIGxldCBlbmQgPSByb3cuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgbGV0IHJvd09mZnNldCA9IHN0YXJ0UmFuZ2VbMV07XG4gICAgICAgICAgICBsZXQgY2hlY2tQYXJpdHkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCAyICYmIHJvd09mZnNldCA8IGVuZDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGJlc3RNYXRjaCA9IEFic3RyYWN0VVBDRUFOUmVhZGVyLmRlY29kZURpZ2l0KHJvdywgY291bnRlcnMsIHJvd09mZnNldCwgQWJzdHJhY3RVUENFQU5SZWFkZXIuTF9BTkRfR19QQVRURVJOUyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcwJy5jaGFyQ29kZUF0KDApICsgYmVzdE1hdGNoICUgMTApKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb3VudGVyIG9mIGNvdW50ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd09mZnNldCArPSBjb3VudGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmVzdE1hdGNoID49IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUGFyaXR5IHw9IDEgPDwgKDEgLSB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHggIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBvZmYgc2VwYXJhdG9yIGlmIG5vdCBsYXN0XG4gICAgICAgICAgICAgICAgICAgIHJvd09mZnNldCA9IHJvdy5nZXROZXh0U2V0KHJvd09mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIHJvd09mZnNldCA9IHJvdy5nZXROZXh0VW5zZXQocm93T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0U3RyaW5nLmxlbmd0aCAhPT0gMikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlSW50KHJlc3VsdFN0cmluZy50b1N0cmluZygpKSAlIDQgIT09IGNoZWNrUGFyaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBwYXJzZUV4dGVuc2lvblN0cmluZyhyYXcpIHtcbiAgICAgICAgICAgIGlmIChyYXcubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcChbW1Jlc3VsdE1ldGFkYXRhVHlwZSQxLklTU1VFX05VTUJFUiwgcGFyc2VJbnQocmF3KV1dKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIFVQQ0VBTkV4dGVuc2lvblN1cHBvcnQge1xuICAgICAgICBzdGF0aWMgZGVjb2RlUm93KHJvd051bWJlciwgcm93LCByb3dPZmZzZXQpIHtcbiAgICAgICAgICAgIGxldCBleHRlbnNpb25TdGFydFJhbmdlID0gQWJzdHJhY3RVUENFQU5SZWFkZXIuZmluZEd1YXJkUGF0dGVybihcbiAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgcm93T2Zmc2V0LFxuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgIHRoaXMuRVhURU5TSU9OX1NUQVJUX1BBVFRFUk4sXG4gICAgICAgICAgICAgICAgbmV3IEludDMyQXJyYXkodGhpcy5FWFRFTlNJT05fU1RBUlRfUEFUVEVSTi5sZW5ndGgpLmZpbGwoMCkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgZml2ZVN1cHBvcnQgPSBuZXcgVVBDRUFORXh0ZW5zaW9uNVN1cHBvcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZml2ZVN1cHBvcnQuZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBleHRlbnNpb25TdGFydFJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgdHdvU3VwcG9ydCA9IG5ldyBVUENFQU5FeHRlbnNpb24yU3VwcG9ydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0d29TdXBwb3J0LmRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgZXh0ZW5zaW9uU3RhcnRSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgVVBDRUFORXh0ZW5zaW9uU3VwcG9ydC5FWFRFTlNJT05fU1RBUlRfUEFUVEVSTiA9IEludDMyQXJyYXkuZnJvbShbMSwgMSwgMl0pO1xuXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGZ1bmN0aW9uYWxpdHkgYW5kIGltcGxlbWVudGF0aW9uIHRoYXQgaXMgY29tbW9uIHRvIFVQQyBhbmQgRUFOIGZhbWlsaWVzXG4gICAgICogb2Ygb25lLWRpbWVuc2lvbmFsIGJhcmNvZGVzLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIGFsYXNkYWlyQGdvb2dsZS5jb20gKEFsYXNkYWlyIE1hY2tpbnRvc2gpXG4gICAgICovXG4gICAgY2xhc3MgVVBDRUFOUmVhZGVyIGV4dGVuZHMgQWJzdHJhY3RVUENFQU5SZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZVJvd1N0cmluZ0J1ZmZlciA9ICcnO1xuICAgICAgICAgICAgVVBDRUFOUmVhZGVyLkxfQU5EX0dfUEFUVEVSTlMgPSBVUENFQU5SZWFkZXIuTF9QQVRURVJOUy5tYXAoYXJyID0+IEludDMyQXJyYXkuZnJvbShhcnIpKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxMDsgaSA8IDIwOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgd2lkdGhzID0gVVBDRUFOUmVhZGVyLkxfUEFUVEVSTlNbaSAtIDEwXTtcbiAgICAgICAgICAgICAgICBsZXQgcmV2ZXJzZWRXaWR0aHMgPSBuZXcgSW50MzJBcnJheSh3aWR0aHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHdpZHRocy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICByZXZlcnNlZFdpZHRoc1tqXSA9IHdpZHRoc1t3aWR0aHMubGVuZ3RoIC0gaiAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVUENFQU5SZWFkZXIuTF9BTkRfR19QQVRURVJOU1tpXSA9IHJldmVyc2VkV2lkdGhzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpIHtcbiAgICAgICAgICAgIGxldCBzdGFydEd1YXJkUmFuZ2UgPSBVUENFQU5SZWFkZXIuZmluZFN0YXJ0R3VhcmRQYXR0ZXJuKHJvdyk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0UG9pbnRDYWxsYmFjayA9IGhpbnRzID09IG51bGwgPyBudWxsIDogaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spO1xuICAgICAgICAgICAgaWYgKHJlc3VsdFBvaW50Q2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFBvaW50ID0gbmV3IFJlc3VsdFBvaW50KChzdGFydEd1YXJkUmFuZ2VbMF0gKyBzdGFydEd1YXJkUmFuZ2VbMV0pIC8gMi4wLCByb3dOdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFBvaW50Q2FsbGJhY2suZm91bmRQb3NzaWJsZVJlc3VsdFBvaW50KHJlc3VsdFBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBidWRlbGxvID0gdGhpcy5kZWNvZGVNaWRkbGUocm93LCBzdGFydEd1YXJkUmFuZ2UsIHRoaXMuZGVjb2RlUm93U3RyaW5nQnVmZmVyKTtcbiAgICAgICAgICAgIGxldCBlbmRTdGFydCA9IGJ1ZGVsbG8ucm93T2Zmc2V0O1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGJ1ZGVsbG8ucmVzdWx0U3RyaW5nO1xuICAgICAgICAgICAgaWYgKHJlc3VsdFBvaW50Q2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFBvaW50ID0gbmV3IFJlc3VsdFBvaW50KGVuZFN0YXJ0LCByb3dOdW1iZXIpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFBvaW50Q2FsbGJhY2suZm91bmRQb3NzaWJsZVJlc3VsdFBvaW50KHJlc3VsdFBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbmRSYW5nZSA9IHRoaXMuZGVjb2RlRW5kKHJvdywgZW5kU3RhcnQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdFBvaW50Q2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFBvaW50ID0gbmV3IFJlc3VsdFBvaW50KChlbmRSYW5nZVswXSArIGVuZFJhbmdlWzFdKSAvIDIuMCwgcm93TnVtYmVyKTtcbiAgICAgICAgICAgICAgICByZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChyZXN1bHRQb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlcmUgaXMgYSBxdWlldCB6b25lIGF0IGxlYXN0IGFzIGJpZyBhcyB0aGUgZW5kIHBhdHRlcm4gYWZ0ZXIgdGhlIGJhcmNvZGUuIFRoZVxuICAgICAgICAgICAgLy8gc3BlYyBtaWdodCB3YW50IG1vcmUgd2hpdGVzcGFjZSwgYnV0IGluIHByYWN0aWNlIHRoaXMgaXMgdGhlIG1heGltdW0gd2UgY2FuIGNvdW50IG9uLlxuICAgICAgICAgICAgbGV0IGVuZCA9IGVuZFJhbmdlWzFdO1xuICAgICAgICAgICAgbGV0IHF1aWV0RW5kID0gZW5kICsgKGVuZCAtIGVuZFJhbmdlWzBdKTtcbiAgICAgICAgICAgIGlmIChxdWlldEVuZCA+PSByb3cuZ2V0U2l6ZSgpIHx8ICFyb3cuaXNSYW5nZShlbmQsIHF1aWV0RW5kLCBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZXN1bHRTdHJpbmcgPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIC8vIFVQQy9FQU4gc2hvdWxkIG5ldmVyIGJlIGxlc3MgdGhhbiA4IGNoYXJzIGFueXdheVxuICAgICAgICAgICAgaWYgKHJlc3VsdFN0cmluZy5sZW5ndGggPCA4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFVUENFQU5SZWFkZXIuY2hlY2tDaGVja3N1bShyZXN1bHRTdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGVmdCA9IChzdGFydEd1YXJkUmFuZ2VbMV0gKyBzdGFydEd1YXJkUmFuZ2VbMF0pIC8gMi4wO1xuICAgICAgICAgICAgbGV0IHJpZ2h0ID0gKGVuZFJhbmdlWzFdICsgZW5kUmFuZ2VbMF0pIC8gMi4wO1xuICAgICAgICAgICAgbGV0IGZvcm1hdCA9IHRoaXMuZ2V0QmFyY29kZUZvcm1hdCgpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdFBvaW50ID0gW25ldyBSZXN1bHRQb2ludChsZWZ0LCByb3dOdW1iZXIpLCBuZXcgUmVzdWx0UG9pbnQocmlnaHQsIHJvd051bWJlcildO1xuICAgICAgICAgICAgbGV0IGRlY29kZVJlc3VsdCA9IG5ldyBSZXN1bHQocmVzdWx0U3RyaW5nLCBudWxsLCAwLCByZXN1bHRQb2ludCwgZm9ybWF0LCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG4gICAgICAgICAgICBsZXQgZXh0ZW5zaW9uTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGV4dGVuc2lvblJlc3VsdCA9IFVQQ0VBTkV4dGVuc2lvblN1cHBvcnQuZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBlbmRSYW5nZVsxXSk7XG4gICAgICAgICAgICAgICAgZGVjb2RlUmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZSQxLlVQQ19FQU5fRVhURU5TSU9OLCBleHRlbnNpb25SZXN1bHQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgICAgICBkZWNvZGVSZXN1bHQucHV0QWxsTWV0YWRhdGEoZXh0ZW5zaW9uUmVzdWx0LmdldFJlc3VsdE1ldGFkYXRhKCkpO1xuICAgICAgICAgICAgICAgIGRlY29kZVJlc3VsdC5hZGRSZXN1bHRQb2ludHMoZXh0ZW5zaW9uUmVzdWx0LmdldFJlc3VsdFBvaW50cygpKTtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25MZW5ndGggPSBleHRlbnNpb25SZXN1bHQuZ2V0VGV4dCgpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChpZ25vcmVFcnJvcikge31cbiAgICAgICAgICAgIGxldCBhbGxvd2VkRXh0ZW5zaW9ucyA9IGhpbnRzID09IG51bGwgPyBudWxsIDogaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuQUxMT1dFRF9FQU5fRVhURU5TSU9OUyk7XG4gICAgICAgICAgICBpZiAoYWxsb3dlZEV4dGVuc2lvbnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGxlbmd0aCBpbiBhbGxvd2VkRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uTGVuZ3RoLnRvU3RyaW5nKCkgPT09IGxlbmd0aCkgeyAvLyBjaGVjayBtZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGRlY29kZUVuZChyb3csIGVuZFN0YXJ0KSB7XG4gICAgICAgICAgICByZXR1cm4gVVBDRUFOUmVhZGVyLmZpbmRHdWFyZFBhdHRlcm4oXG4gICAgICAgICAgICAgICAgcm93LCBlbmRTdGFydCwgZmFsc2UsIFVQQ0VBTlJlYWRlci5TVEFSVF9FTkRfUEFUVEVSTixcbiAgICAgICAgICAgICAgICBuZXcgSW50MzJBcnJheShVUENFQU5SZWFkZXIuU1RBUlRfRU5EX1BBVFRFUk4ubGVuZ3RoKS5maWxsKDApKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY2hlY2tDaGVja3N1bShzKSB7XG4gICAgICAgICAgICByZXR1cm4gVVBDRUFOUmVhZGVyLmNoZWNrU3RhbmRhcmRVUENFQU5DaGVja3N1bShzKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY2hlY2tTdGFuZGFyZFVQQ0VBTkNoZWNrc3VtKHMpIHtcbiAgICAgICAgICAgIGxldCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNoZWNrID0gcGFyc2VJbnQocy5jaGFyQXQobGVuZ3RoIC0gMSksIDEwKTtcbiAgICAgICAgICAgIHJldHVybiBVUENFQU5SZWFkZXIuZ2V0U3RhbmRhcmRVUENFQU5DaGVja3N1bShzLnN1YnN0cmluZygwLCBsZW5ndGggLSAxKSkgPT09IGNoZWNrO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRTdGFuZGFyZFVQQ0VBTkNoZWNrc3VtKHMpIHtcbiAgICAgICAgICAgIGxldCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpZ2l0ID0gcy5jaGFyQXQoaSkuY2hhckNvZGVBdCgwKSAtICcwJy5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgICAgIGlmIChkaWdpdCA8IDAgfHwgZGlnaXQgPiA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3VtICs9IGRpZ2l0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VtICo9IDM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVuZ3RoIC0gMjsgaSA+PSAwOyBpIC09IDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBzLmNoYXJBdChpKS5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpZ2l0IDwgMCB8fCBkaWdpdCA+IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdW0gKz0gZGlnaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKDEwMDAgLSBzdW0pICUgMTA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiA8cD5JbXBsZW1lbnRzIGRlY29kaW5nIG9mIHRoZSBFQU4tMTMgZm9ybWF0LjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIGFsYXNkYWlyQGdvb2dsZS5jb20gKEFsYXNkYWlyIE1hY2tpbnRvc2gpXG4gICAgICovXG4gICAgY2xhc3MgRUFOMTNSZWFkZXIgZXh0ZW5kcyBVUENFQU5SZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZU1pZGRsZUNvdW50ZXJzID0gSW50MzJBcnJheS5mcm9tKFswLCAwLCAwLCAwXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVjb2RlTWlkZGxlKHJvdywgc3RhcnRSYW5nZSwgcmVzdWx0U3RyaW5nKSB7XG4gICAgICAgICAgICBsZXQgY291bnRlcnMgPSB0aGlzLmRlY29kZU1pZGRsZUNvdW50ZXJzO1xuICAgICAgICAgICAgY291bnRlcnNbMF0gPSAwO1xuICAgICAgICAgICAgY291bnRlcnNbMV0gPSAwO1xuICAgICAgICAgICAgY291bnRlcnNbMl0gPSAwO1xuICAgICAgICAgICAgY291bnRlcnNbM10gPSAwO1xuICAgICAgICAgICAgbGV0IGVuZCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgcm93T2Zmc2V0ID0gc3RhcnRSYW5nZVsxXTtcbiAgICAgICAgICAgIGxldCBsZ1BhdHRlcm5Gb3VuZCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDYgJiYgcm93T2Zmc2V0IDwgZW5kOyB4KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYmVzdE1hdGNoID0gVVBDRUFOUmVhZGVyLmRlY29kZURpZ2l0KHJvdywgY291bnRlcnMsIHJvd09mZnNldCwgVVBDRUFOUmVhZGVyLkxfQU5EX0dfUEFUVEVSTlMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgnMCcuY2hhckNvZGVBdCgwKSArIGJlc3RNYXRjaCAlIDEwKSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY291bnRlciBvZiBjb3VudGVycykge1xuICAgICAgICAgICAgICAgICAgICByb3dPZmZzZXQgKz0gY291bnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJlc3RNYXRjaCA+PSAxMCkge1xuICAgICAgICAgICAgICAgICAgICBsZ1BhdHRlcm5Gb3VuZCB8PSAxIDw8ICg1IC0geCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0U3RyaW5nID0gRUFOMTNSZWFkZXIuZGV0ZXJtaW5lRmlyc3REaWdpdChyZXN1bHRTdHJpbmcsIGxnUGF0dGVybkZvdW5kKTtcbiAgICAgICAgICAgIGxldCBtaWRkbGVSYW5nZSA9IFVQQ0VBTlJlYWRlci5maW5kR3VhcmRQYXR0ZXJuKFxuICAgICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgICByb3dPZmZzZXQsXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBVUENFQU5SZWFkZXIuTUlERExFX1BBVFRFUk4sXG4gICAgICAgICAgICAgICAgbmV3IEludDMyQXJyYXkoVVBDRUFOUmVhZGVyLk1JRERMRV9QQVRURVJOLmxlbmd0aCkuZmlsbCgwKSk7XG4gICAgICAgICAgICByb3dPZmZzZXQgPSBtaWRkbGVSYW5nZVsxXTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgNiAmJiByb3dPZmZzZXQgPCBlbmQ7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBiZXN0TWF0Y2ggPSBVUENFQU5SZWFkZXIuZGVjb2RlRGlnaXQocm93LCBjb3VudGVycywgcm93T2Zmc2V0LCBVUENFQU5SZWFkZXIuTF9QQVRURVJOUyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcwJy5jaGFyQ29kZUF0KDApICsgYmVzdE1hdGNoKSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY291bnRlciBvZiBjb3VudGVycykge1xuICAgICAgICAgICAgICAgICAgICByb3dPZmZzZXQgKz0gY291bnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByb3dPZmZzZXQsIHJlc3VsdFN0cmluZyB9O1xuICAgICAgICB9XG4gICAgICAgIGdldEJhcmNvZGVGb3JtYXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gQmFyY29kZUZvcm1hdCQxLkVBTl8xMztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZGV0ZXJtaW5lRmlyc3REaWdpdChyZXN1bHRTdHJpbmcsIGxnUGF0dGVybkZvdW5kKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDEwOyBkKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGdQYXR0ZXJuRm91bmQgPT09IHRoaXMuRklSU1RfRElHSVRfRU5DT0RJTkdTW2RdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcwJy5jaGFyQ29kZUF0KDApICsgZCkpICsgcmVzdWx0U3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0U3RyaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEVBTjEzUmVhZGVyLkZJUlNUX0RJR0lUX0VOQ09ESU5HUyA9IFsweDAwLCAweDBCLCAweDBELCAweEUsIDB4MTMsIDB4MTksIDB4MUMsIDB4MTUsIDB4MTYsIDB4MUFdO1xuXG4gICAgLyoqXG4gICAgICogPHA+SW1wbGVtZW50cyBkZWNvZGluZyBvZiB0aGUgRUFOLTggZm9ybWF0LjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRUFOOFJlYWRlciBleHRlbmRzIFVQQ0VBTlJlYWRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb2RlTWlkZGxlQ291bnRlcnMgPSBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDAsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVNaWRkbGUocm93LCBzdGFydFJhbmdlLCByZXN1bHRTdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ZXJzID0gdGhpcy5kZWNvZGVNaWRkbGVDb3VudGVycztcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzFdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgIGxldCBlbmQgPSByb3cuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgbGV0IHJvd09mZnNldCA9IHN0YXJ0UmFuZ2VbMV07XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDQgJiYgcm93T2Zmc2V0IDwgZW5kOyB4KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYmVzdE1hdGNoID0gVVBDRUFOUmVhZGVyLmRlY29kZURpZ2l0KHJvdywgY291bnRlcnMsIHJvd09mZnNldCwgVVBDRUFOUmVhZGVyLkxfUEFUVEVSTlMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgnMCcuY2hhckNvZGVBdCgwKSArIGJlc3RNYXRjaCkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgY291bnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0ICs9IGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1pZGRsZVJhbmdlID0gVVBDRUFOUmVhZGVyLmZpbmRHdWFyZFBhdHRlcm4ocm93LCByb3dPZmZzZXQsIHRydWUsIFVQQ0VBTlJlYWRlci5NSURETEVfUEFUVEVSTiwgbmV3IEludDMyQXJyYXkoVVBDRUFOUmVhZGVyLk1JRERMRV9QQVRURVJOLmxlbmd0aCkuZmlsbCgwKSk7XG4gICAgICAgICAgICByb3dPZmZzZXQgPSBtaWRkbGVSYW5nZVsxXTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgNCAmJiByb3dPZmZzZXQgPCBlbmQ7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBiZXN0TWF0Y2ggPSBVUENFQU5SZWFkZXIuZGVjb2RlRGlnaXQocm93LCBjb3VudGVycywgcm93T2Zmc2V0LCBVUENFQU5SZWFkZXIuTF9QQVRURVJOUyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcwJy5jaGFyQ29kZUF0KDApICsgYmVzdE1hdGNoKSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY291bnRlciBvZiBjb3VudGVycykge1xuICAgICAgICAgICAgICAgICAgICByb3dPZmZzZXQgKz0gY291bnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyByb3dPZmZzZXQsIHJlc3VsdFN0cmluZyB9O1xuICAgICAgICB9XG4gICAgICAgIGdldEJhcmNvZGVGb3JtYXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gQmFyY29kZUZvcm1hdCQxLkVBTl84O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jYXBzdWxhdGVzIGZ1bmN0aW9uYWxpdHkgYW5kIGltcGxlbWVudGF0aW9uIHRoYXQgaXMgY29tbW9uIHRvIGFsbCBmYW1pbGllc1xuICAgICAqIG9mIG9uZS1kaW1lbnNpb25hbCBiYXJjb2Rlcy5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIHNhbTIzMzIgKFNhbSBSdWRsb2ZmKVxuICAgICAqXG4gICAgICogQHNvdXJjZSBodHRwczovL2dpdGh1Yi5jb20venhpbmcvenhpbmcvYmxvYi8zYzk2OTIzMjc2ZGQ1Nzg1ZDU4ZWI5NzBiNmJhM2Y4MGQzNmE5NTA1L2NvcmUvc3JjL21haW4vamF2YS9jb20vZ29vZ2xlL3p4aW5nL29uZWQvVVBDQVJlYWRlci5qYXZhXG4gICAgICpcbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgY2xhc3MgVVBDQVJlYWRlciBleHRlbmRzIFVQQ0VBTlJlYWRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuZWFuMTNSZWFkZXIgPSBuZXcgRUFOMTNSZWFkZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBAT3ZlcnJpZGVcbiAgICAgICAgZ2V0QmFyY29kZUZvcm1hdCgpIHtcbiAgICAgICAgICAgIHJldHVybiBCYXJjb2RlRm9ybWF0JDEuVVBDX0E7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIGRvbid0IHRyeSByb3RhdGlvbiB3aXRob3V0IHRoZSB0cnkgaGFyZGVyIGZsYWcsIGV2ZW4gaWYgcm90YXRpb24gd2FzIHN1cHBvcnRlZC5cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGRlY29kZShpbWFnZSwgaGludHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1heWJlUmV0dXJuUmVzdWx0KHRoaXMuZWFuMTNSZWFkZXIuZGVjb2RlKGltYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1heWJlUmV0dXJuUmVzdWx0KHRoaXMuZWFuMTNSZWFkZXIuZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBoaW50cykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICBkZWNvZGVNaWRkbGUocm93LCBzdGFydFJhbmdlLCByZXN1bHRTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhbjEzUmVhZGVyLmRlY29kZU1pZGRsZShyb3csIHN0YXJ0UmFuZ2UsIHJlc3VsdFN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgbWF5YmVSZXR1cm5SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgICAgICBsZXQgdGV4dCA9IHJlc3VsdC5nZXRUZXh0KCk7XG4gICAgICAgICAgICBpZiAodGV4dC5jaGFyQXQoMCkgPT09ICcwJykge1xuICAgICAgICAgICAgICAgIGxldCB1cGNhUmVzdWx0ID0gbmV3IFJlc3VsdCh0ZXh0LnN1YnN0cmluZygxKSwgbnVsbCwgbnVsbCwgcmVzdWx0LmdldFJlc3VsdFBvaW50cygpLCBCYXJjb2RlRm9ybWF0JDEuVVBDX0EpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZ2V0UmVzdWx0TWV0YWRhdGEoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwY2FSZXN1bHQucHV0QWxsTWV0YWRhdGEocmVzdWx0LmdldFJlc3VsdE1ldGFkYXRhKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXBjYVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc2V0KCkge1xuICAgICAgICAgICAgdGhpcy5lYW4xM1JlYWRlci5yZXNldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPHA+SW1wbGVtZW50cyBkZWNvZGluZyBvZiB0aGUgVVBDLUUgZm9ybWF0LjwvcD5cbiAgICAgKiA8cD48YSBocmVmPVwiaHR0cDovL3d3dy5iYXJjb2RlaXNsYW5kLmNvbS91cGNlLnBodG1sXCI+VGhpczwvYT4gaXMgYSBncmVhdCByZWZlcmVuY2UgZm9yXG4gICAgICogVVBDLUUgaW5mb3JtYXRpb24uPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKlxuICAgICAqIEBzb3VyY2UgaHR0cHM6Ly9naXRodWIuY29tL3p4aW5nL3p4aW5nL2Jsb2IvM2M5NjkyMzI3NmRkNTc4NWQ1OGViOTcwYjZiYTNmODBkMzZhOTUwNS9jb3JlL3NyYy9tYWluL2phdmEvY29tL2dvb2dsZS96eGluZy9vbmVkL1VQQ0VSZWFkZXIuamF2YVxuICAgICAqXG4gICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAqL1xuICAgIC8qIGZpbmFsICovIGNsYXNzIFVQQ0VSZWFkZXIgZXh0ZW5kcyBVUENFQU5SZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZU1pZGRsZUNvdW50ZXJzID0gbmV3IEludDMyQXJyYXkoNCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICBkZWNvZGVNaWRkbGUocm93LCBzdGFydFJhbmdlLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ZXJzID0gdGhpcy5kZWNvZGVNaWRkbGVDb3VudGVycy5tYXAoeCA9PiB4KTtcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzFdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgcm93T2Zmc2V0ID0gc3RhcnRSYW5nZVsxXTtcbiAgICAgICAgICAgIGxldCBsZ1BhdHRlcm5Gb3VuZCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDYgJiYgcm93T2Zmc2V0IDwgZW5kOyB4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiZXN0TWF0Y2ggPSBVUENFUmVhZGVyLmRlY29kZURpZ2l0KFxuICAgICAgICAgICAgICAgICAgICByb3csIGNvdW50ZXJzLCByb3dPZmZzZXQsIFVQQ0VSZWFkZXIuTF9BTkRfR19QQVRURVJOUyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKCcwJy5jaGFyQ29kZUF0KDApICsgKGJlc3RNYXRjaCAlIDEwKSkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvdW50ZXIgb2YgY291bnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93T2Zmc2V0ICs9IGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZXN0TWF0Y2ggPj0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgbGdQYXR0ZXJuRm91bmQgfD0gKDEgPDwgKDUgLSB4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlc3VsdFN0cmluZyA9IFVQQ0VSZWFkZXIuZGV0ZXJtaW5lTnVtU3lzQW5kQ2hlY2tEaWdpdChcbiAgICAgICAgICAgICAgICByZXN1bHQsIGxnUGF0dGVybkZvdW5kKTtcbiAgICAgICAgICAgIHJldHVybiB7cm93T2Zmc2V0LCByZXN1bHRTdHJpbmd9O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBAT3ZlcnJpZGVcbiAgICAgICAgZGVjb2RlRW5kKHJvdywgZW5kU3RhcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBVUENFUmVhZGVyLmZpbmRHdWFyZFBhdHRlcm5XaXRob3V0Q291bnRlcnMoXG4gICAgICAgICAgICAgICAgcm93LCBlbmRTdGFydCwgdHJ1ZSwgVVBDRVJlYWRlci5NSURETEVfRU5EX1BBVFRFUk4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGNoZWNrQ2hlY2tzdW0ocykge1xuICAgICAgICAgICAgcmV0dXJuIFVQQ0VBTlJlYWRlci5jaGVja0NoZWNrc3VtKFVQQ0VSZWFkZXIuY29udmVydFVQQ0V0b1VQQ0EocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGV0ZXJtaW5lTnVtU3lzQW5kQ2hlY2tEaWdpdChyZXN1bHRTdHJpbmcsIGxnUGF0dGVybkZvdW5kKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBudW1TeXMgPSAwOyBudW1TeXMgPD0gMTsgbnVtU3lzKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDEwOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxnUGF0dGVybkZvdW5kID09PSB0aGlzLk5VTVNZU19BTkRfQ0hFQ0tfRElHSVRfUEFUVEVSTlNbbnVtU3lzXVtkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZWZpeCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJzAnLmNoYXJDb2RlQXQoMCkgKyBudW1TeXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1ZmZpeCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJzAnLmNoYXJDb2RlQXQoMCkgKyBkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyByZXN1bHRTdHJpbmcgKyBzdWZmaXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGdldEJhcmNvZGVGb3JtYXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gQmFyY29kZUZvcm1hdCQxLlVQQ19FO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHBhbmRzIGEgVVBDLUUgdmFsdWUgYmFjayBpbnRvIGl0cyBmdWxsLCBlcXVpdmFsZW50IFVQQy1BIGNvZGUgdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB1cGNlIFVQQy1FIGNvZGUgYXMgc3RyaW5nIG9mIGRpZ2l0c1xuICAgICAgICAgKiBAcmV0dXJuIGVxdWl2YWxlbnQgVVBDLUEgY29kZSBhcyBzdHJpbmcgb2YgZGlnaXRzXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgY29udmVydFVQQ0V0b1VQQ0EodXBjZSkge1xuICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBsaW5lIGlzIGVxdWl2YWxlbnQgdG8gdXBjZS5nZXRDaGFycygxLCA3LCB1cGNlQ2hhcnMsIDApO1xuICAgICAgICAgICAgY29uc3QgdXBjZUNoYXJzID0gdXBjZS5zbGljZSgxLCA3KS5zcGxpdCgnJykubWFwKHggPT4geC5jaGFyQ29kZUF0KDApKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCAvKjEyKi8pO1xuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh1cGNlLmNoYXJBdCgwKSk7XG4gICAgICAgICAgICBsZXQgbGFzdENoYXIgPSB1cGNlQ2hhcnNbNV07XG4gICAgICAgICAgICBzd2l0Y2ggKGxhc3RDaGFyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmRDaGFycyh1cGNlQ2hhcnMsIDAsIDIpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGxhc3RDaGFyKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnMDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kQ2hhcnModXBjZUNoYXJzLCAyLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kQ2hhcnModXBjZUNoYXJzLCAwLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnMDAwMDAnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZENoYXJzKHVwY2VDaGFycywgMywgMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZENoYXJzKHVwY2VDaGFycywgMCwgNCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJzAwMDAwJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQodXBjZUNoYXJzWzRdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZENoYXJzKHVwY2VDaGFycywgMCwgNSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJzAwMDAnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChsYXN0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT25seSBhcHBlbmQgY2hlY2sgZGlnaXQgaW4gY29udmVyc2lvbiBpZiBzdXBwbGllZFxuICAgICAgICAgICAgaWYgKHVwY2UubGVuZ3RoID49IDgpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKHVwY2UuY2hhckF0KDcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcGF0dGVybiB0aGF0IG1hcmtzIHRoZSBtaWRkbGUsIGFuZCBlbmQsIG9mIGEgVVBDLUUgcGF0dGVybi5cbiAgICAgKiBUaGVyZSBpcyBubyBcInNlY29uZCBoYWxmXCIgdG8gYSBVUEMtRSBiYXJjb2RlLlxuICAgICAqL1xuICAgIFVQQ0VSZWFkZXIuTUlERExFX0VORF9QQVRURVJOID0gSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAxLCAxLCAxXSk7XG4gICAgLy8gRm9yIGFuIFVQQy1FIGJhcmNvZGUsIHRoZSBmaW5hbCBkaWdpdCBpcyByZXByZXNlbnRlZCBieSB0aGUgcGFyaXRpZXMgdXNlZFxuICAgIC8vIHRvIGVuY29kZSB0aGUgbWlkZGxlIHNpeCBkaWdpdHMsIGFjY29yZGluZyB0byB0aGUgdGFibGUgYmVsb3cuXG4gICAgLy9cbiAgICAvLyAgICAgICAgICAgICAgICBQYXJpdHkgb2YgbmV4dCA2IGRpZ2l0c1xuICAgIC8vICAgIERpZ2l0ICAgMCAgICAgMSAgICAgMiAgICAgMyAgICAgNCAgICAgNVxuICAgIC8vICAgICAgIDAgICAgRXZlbiAgIEV2ZW4gIEV2ZW4gT2RkICBPZGQgICBPZGRcbiAgICAvLyAgICAgICAxICAgIEV2ZW4gICBFdmVuICBPZGQgIEV2ZW4gT2RkICAgT2RkXG4gICAgLy8gICAgICAgMiAgICBFdmVuICAgRXZlbiAgT2RkICBPZGQgIEV2ZW4gIE9kZFxuICAgIC8vICAgICAgIDMgICAgRXZlbiAgIEV2ZW4gIE9kZCAgT2RkICBPZGQgICBFdmVuXG4gICAgLy8gICAgICAgNCAgICBFdmVuICAgT2RkICAgRXZlbiBFdmVuIE9kZCAgIE9kZFxuICAgIC8vICAgICAgIDUgICAgRXZlbiAgIE9kZCAgIE9kZCAgRXZlbiBFdmVuICBPZGRcbiAgICAvLyAgICAgICA2ICAgIEV2ZW4gICBPZGQgICBPZGQgIE9kZCAgRXZlbiAgRXZlblxuICAgIC8vICAgICAgIDcgICAgRXZlbiAgIE9kZCAgIEV2ZW4gT2RkICBFdmVuICBPZGRcbiAgICAvLyAgICAgICA4ICAgIEV2ZW4gICBPZGQgICBFdmVuIE9kZCAgT2RkICAgRXZlblxuICAgIC8vICAgICAgIDkgICAgRXZlbiAgIE9kZCAgIE9kZCAgRXZlbiBPZGQgICBFdmVuXG4gICAgLy9cbiAgICAvLyBUaGUgZW5jb2RpbmcgaXMgcmVwcmVzZW50ZWQgYnkgdGhlIGZvbGxvd2luZyBhcnJheSwgd2hpY2ggaXMgYSBiaXQgcGF0dGVyblxuICAgIC8vIHVzaW5nIE9kZCA9IDAgYW5kIEV2ZW4gPSAxLiBGb3IgZXhhbXBsZSwgNSBpcyByZXByZXNlbnRlZCBieTpcbiAgICAvL1xuICAgIC8vICAgICAgICAgICAgICBPZGQgRXZlbiBFdmVuIE9kZCBPZGQgRXZlblxuICAgIC8vIGluIGJpbmFyeTpcbiAgICAvLyAgICAgICAgICAgICAgICAwICAgIDEgICAgMSAgIDAgICAwICAgIDEgICA9PSAweDE5XG4gICAgLy9cbiAgICAvKipcbiAgICAgKiBTZWUge0BsaW5rICNMX0FORF9HX1BBVFRFUk5TfTsgdGhlc2UgdmFsdWVzIHNpbWlsYXJseSByZXByZXNlbnQgcGF0dGVybnMgb2ZcbiAgICAgKiBldmVuLW9kZCBwYXJpdHkgZW5jb2RpbmdzIG9mIGRpZ2l0cyB0aGF0IGltcGx5IGJvdGggdGhlIG51bWJlciBzeXN0ZW0gKDAgb3IgMSlcbiAgICAgKiB1c2VkLCBhbmQgdGhlIGNoZWNrIGRpZ2l0LlxuICAgICAqL1xuICAgIFVQQ0VSZWFkZXIuTlVNU1lTX0FORF9DSEVDS19ESUdJVF9QQVRURVJOUyA9IFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsweDM4LCAweDM0LCAweDMyLCAweDMxLCAweDJDLCAweDI2LCAweDIzLCAweDJBLCAweDI5LCAweDI1XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNywgMHgwQiwgMHgwRCwgMHgwRSwgMHgxMywgMHgxOSwgMHgxQywgMHgxNSwgMHgxNiwgMHgxQV0pLFxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiA8cD5BIHJlYWRlciB0aGF0IGNhbiByZWFkIGFsbCBhdmFpbGFibGUgVVBDL0VBTiBmb3JtYXRzLiBJZiBhIGNhbGxlciB3YW50cyB0byB0cnkgdG9cbiAgICAgKiByZWFkIGFsbCBzdWNoIGZvcm1hdHMsIGl0IGlzIG1vc3QgZWZmaWNpZW50IHRvIHVzZSB0aGlzIGltcGxlbWVudGF0aW9uIHJhdGhlciB0aGFuIGludm9rZVxuICAgICAqIGluZGl2aWR1YWwgcmVhZGVycy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIE11bHRpRm9ybWF0VVBDRUFOUmVhZGVyIGV4dGVuZHMgT25lRFJlYWRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGhpbnRzKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgbGV0IHBvc3NpYmxlRm9ybWF0cyA9IGhpbnRzID09IG51bGwgPyBudWxsIDogaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuUE9TU0lCTEVfRk9STUFUUyk7XG4gICAgICAgICAgICBsZXQgcmVhZGVycyA9IFtdO1xuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChwb3NzaWJsZUZvcm1hdHMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlRm9ybWF0cy5pbmRleE9mKEJhcmNvZGVGb3JtYXQkMS5FQU5fMTMpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBFQU4xM1JlYWRlcigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlRm9ybWF0cy5pbmRleE9mKEJhcmNvZGVGb3JtYXQkMS5VUENfQSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXJzLnB1c2gobmV3IFVQQ0FSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvcm1hdHMuaW5kZXhPZihCYXJjb2RlRm9ybWF0JDEuRUFOXzgpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBFQU44UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zc2libGVGb3JtYXRzLmluZGV4T2YoQmFyY29kZUZvcm1hdCQxLlVQQ19FKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgVVBDRVJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIGhpbnRzIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgRUFOMTNSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBVUENBUmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgRUFOOFJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICByZWFkZXJzLnB1c2gobmV3IFVQQ0VSZWFkZXIoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlYWRlcnMgPSByZWFkZXJzO1xuICAgICAgICB9XG4gICAgICAgIGRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJlYWRlciBvZiB0aGlzLnJlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCByZXN1bHQ6IFJlc3VsdCA9IHJlYWRlci5kZWNvZGVSb3cocm93TnVtYmVyLCByb3csIHN0YXJ0R3VhcmRQYXR0ZXJuLCBoaW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5kZWNvZGVSb3cocm93TnVtYmVyLCByb3csIGhpbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiBhIDEyLWRpZ2l0IGNvZGUgZW5jb2RlZCBpbiBVUEMtQSBpcyBpZGVudGljYWwgdG8gYSBcIjBcIlxuICAgICAgICAgICAgICAgICAgICAvLyBmb2xsb3dlZCBieSB0aG9zZSAxMiBkaWdpdHMgZW5jb2RlZCBhcyBFQU4tMTMuIEVhY2ggd2lsbCByZWNvZ25pemUgc3VjaCBhIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIFVQQy1BIGFzIGEgMTItZGlnaXQgc3RyaW5nIGFuZCBFQU4tMTMgYXMgYSAxMy1kaWdpdCBzdHJpbmcgc3RhcnRpbmcgd2l0aCBcIjBcIi5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW5kaXZpZHVhbGx5IHRoZXNlIGFyZSBjb3JyZWN0IGFuZCB0aGVpciByZWFkZXJzIHdpbGwgYm90aCByZWFkIHN1Y2ggYSBjb2RlXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjb3JyZWN0bHkgY2FsbCBpdCBFQU4tMTMsIG9yIFVQQy1BLCByZXNwZWN0aXZlbHkuXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaWYgd2UndmUgYmVlbiBsb29raW5nIGZvciBib3RoIHR5cGVzLCB3ZSdkIGxpa2UgdG8gY2FsbCBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBhIFVQQy1BIGNvZGUuIEJ1dCBmb3IgZWZmaWNpZW5jeSB3ZSBvbmx5IHJ1biB0aGUgRUFOLTEzIGRlY29kZXIgdG8gYWxzbyByZWFkXG4gICAgICAgICAgICAgICAgICAgIC8vIFVQQy1BLiBTbyB3ZSBzcGVjaWFsIGNhc2UgaXQgaGVyZSwgYW5kIGNvbnZlcnQgYW4gRUFOLTEzIHJlc3VsdCB0byBhIFVQQy1BXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBpZiBhcHByb3ByaWF0ZS5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0LCBkb24ndCByZXR1cm4gVVBDLUEgaWYgVVBDLUEgd2FzIG5vdCBhIHJlcXVlc3RlZCBmb3JtYXQhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVhbjEzTWF5QmVVUENBID0gcmVzdWx0LmdldEJhcmNvZGVGb3JtYXQoKSA9PT0gQmFyY29kZUZvcm1hdCQxLkVBTl8xMyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmdldFRleHQoKS5jaGFyQXQoMCkgPT09ICcwJztcbiAgICAgICAgICAgICAgICAgICAgLy8gQFN1cHByZXNzV2FybmluZ3MoXCJ1bmNoZWNrZWRcIilcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zc2libGVGb3JtYXRzID0gaGludHMgPT0gbnVsbCA/IG51bGwgOiBoaW50cy5nZXQoRGVjb2RlSGludFR5cGUkMS5QT1NTSUJMRV9GT1JNQVRTKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuUmV0dXJuVVBDQSA9IHBvc3NpYmxlRm9ybWF0cyA9PSBudWxsIHx8IHBvc3NpYmxlRm9ybWF0cy5pbmNsdWRlcyhCYXJjb2RlRm9ybWF0JDEuVVBDX0EpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWFuMTNNYXlCZVVQQ0EgJiYgY2FuUmV0dXJuVVBDQSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3Qnl0ZXMgPSByZXN1bHQuZ2V0UmF3Qnl0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zZmVyIHRoZSBtZXRhZGF0YSBhY3Jvc3NcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFVQQ0EgPSBuZXcgUmVzdWx0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZXRUZXh0KCkuc3Vic3RyaW5nKDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0J5dGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyYXdCeXRlcyA/IHJhd0J5dGVzLmxlbmd0aCA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZXRSZXN1bHRQb2ludHMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0JDEuVVBDX0EpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0VVBDQS5wdXRBbGxNZXRhZGF0YShyZXN1bHQuZ2V0UmVzdWx0TWV0YWRhdGEoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0VVBDQTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJlc2V0KCkge1xuICAgICAgICAgICAgZm9yIChsZXQgcmVhZGVyIG9mIHRoaXMucmVhZGVycykge1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW1wb3J0IEludGVnZXIgZnJvbSAnLi4vLi4vdXRpbC9JbnRlZ2VyJztcbiAgICAvLyBpbXBvcnQgRmxvYXQgZnJvbSAnLi4vLi4vdXRpbC9GbG9hdCc7XG4gICAgY2xhc3MgQWJzdHJhY3RSU1NSZWFkZXIgZXh0ZW5kcyBPbmVEUmVhZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVGaW5kZXJDb3VudGVycyA9IG5ldyBJbnQzMkFycmF5KDQpO1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhcmFjdGVyQ291bnRlcnMgPSBuZXcgSW50MzJBcnJheSg4KTtcbiAgICAgICAgICAgIHRoaXMub2RkUm91bmRpbmdFcnJvcnMgPSBuZXcgQXJyYXkoNCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW5Sb3VuZGluZ0Vycm9ycyA9IG5ldyBBcnJheSg0KTtcbiAgICAgICAgICAgIHRoaXMub2RkQ291bnRzID0gbmV3IEFycmF5KHRoaXMuZGF0YUNoYXJhY3RlckNvdW50ZXJzLmxlbmd0aCAvIDIpO1xuICAgICAgICAgICAgdGhpcy5ldmVuQ291bnRzID0gbmV3IEFycmF5KHRoaXMuZGF0YUNoYXJhY3RlckNvdW50ZXJzLmxlbmd0aCAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGdldERlY29kZUZpbmRlckNvdW50ZXJzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlRmluZGVyQ291bnRlcnM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RGF0YUNoYXJhY3RlckNvdW50ZXJzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUNoYXJhY3RlckNvdW50ZXJzO1xuICAgICAgICB9XG4gICAgICAgIGdldE9kZFJvdW5kaW5nRXJyb3JzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2RkUm91bmRpbmdFcnJvcnM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RXZlblJvdW5kaW5nRXJyb3JzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlblJvdW5kaW5nRXJyb3JzO1xuICAgICAgICB9XG4gICAgICAgIGdldE9kZENvdW50cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9kZENvdW50cztcbiAgICAgICAgfVxuICAgICAgICBnZXRFdmVuQ291bnRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbkNvdW50cztcbiAgICAgICAgfVxuICAgICAgICBwYXJzZUZpbmRlclZhbHVlKGNvdW50ZXJzLCBmaW5kZXJQYXR0ZXJucykge1xuICAgICAgICAgICAgZm9yIChsZXQgdmFsdWUgPSAwOyB2YWx1ZSA8IGZpbmRlclBhdHRlcm5zLmxlbmd0aDsgdmFsdWUrKykge1xuICAgICAgICAgICAgICAgIGlmIChPbmVEUmVhZGVyLnBhdHRlcm5NYXRjaFZhcmlhbmNlKGNvdW50ZXJzLCBmaW5kZXJQYXR0ZXJuc1t2YWx1ZV0sIEFic3RyYWN0UlNTUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFKSA8IEFic3RyYWN0UlNTUmVhZGVyLk1BWF9BVkdfVkFSSUFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bVxuICAgICAgICAgKiBAcmV0dXJuIHN1bSBvZiB2YWx1ZXNcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgTWF0aFV0aWxzI3N1bShpbnRbXSl9XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgY291bnQoYXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHMuc3VtKG5ldyBJbnQzMkFycmF5KGFycmF5KSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGluY3JlbWVudChhcnJheSwgZXJyb3JzKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgbGV0IGJpZ2dlc3RFcnJvciA9IGVycm9yc1swXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JzW2ldID4gYmlnZ2VzdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpZ2dlc3RFcnJvciA9IGVycm9yc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFycmF5W2luZGV4XSsrO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBkZWNyZW1lbnQoYXJyYXksIGVycm9ycykge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgIGxldCBiaWdnZXN0RXJyb3IgPSBlcnJvcnNbMF07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yc1tpXSA8IGJpZ2dlc3RFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBiaWdnZXN0RXJyb3IgPSBlcnJvcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJheVtpbmRleF0tLTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgaXNGaW5kZXJQYXR0ZXJuKGNvdW50ZXJzKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3RUd29TdW0gPSBjb3VudGVyc1swXSArIGNvdW50ZXJzWzFdO1xuICAgICAgICAgICAgbGV0IHN1bSA9IGZpcnN0VHdvU3VtICsgY291bnRlcnNbMl0gKyBjb3VudGVyc1szXTtcbiAgICAgICAgICAgIGxldCByYXRpbyA9IGZpcnN0VHdvU3VtIC8gc3VtO1xuICAgICAgICAgICAgaWYgKHJhdGlvID49IEFic3RyYWN0UlNTUmVhZGVyLk1JTl9GSU5ERVJfUEFUVEVSTl9SQVRJTyAmJiByYXRpbyA8PSBBYnN0cmFjdFJTU1JlYWRlci5NQVhfRklOREVSX1BBVFRFUk5fUkFUSU8pIHtcbiAgICAgICAgICAgICAgICAvLyBwYXNzZXMgcmF0aW8gdGVzdCBpbiBzcGVjLCBidXQgc2VlIGlmIHRoZSBjb3VudHMgYXJlIHVucmVhc29uYWJsZVxuICAgICAgICAgICAgICAgIGxldCBtaW5Db3VudGVyID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgICAgICAgICAgICAgbGV0IG1heENvdW50ZXIgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb3VudGVyIG9mIGNvdW50ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyID4gbWF4Q291bnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4Q291bnRlciA9IGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPCBtaW5Db3VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5Db3VudGVyID0gY291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF4Q291bnRlciA8IDEwICogbWluQ291bnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBYnN0cmFjdFJTU1JlYWRlci5NQVhfQVZHX1ZBUklBTkNFID0gMC4yO1xuICAgIEFic3RyYWN0UlNTUmVhZGVyLk1BWF9JTkRJVklEVUFMX1ZBUklBTkNFID0gMC40NTtcbiAgICBBYnN0cmFjdFJTU1JlYWRlci5NSU5fRklOREVSX1BBVFRFUk5fUkFUSU8gPSA5LjUgLyAxMi4wO1xuICAgIEFic3RyYWN0UlNTUmVhZGVyLk1BWF9GSU5ERVJfUEFUVEVSTl9SQVRJTyA9IDEyLjUgLyAxNC4wO1xuXG4gICAgY2xhc3MgRGF0YUNoYXJhY3RlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBjaGVja3N1bVBvcnRpb24pIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tzdW1Qb3J0aW9uID0gY2hlY2tzdW1Qb3J0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGdldFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q2hlY2tzdW1Qb3J0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tzdW1Qb3J0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgKyAnKCcgKyB0aGlzLmNoZWNrc3VtUG9ydGlvbiArICcpJztcbiAgICAgICAgfVxuICAgICAgICBlcXVhbHMobykge1xuICAgICAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIERhdGFDaGFyYWN0ZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGhhdCA9IG87XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gdGhhdC52YWx1ZSAmJiB0aGlzLmNoZWNrc3VtUG9ydGlvbiA9PT0gdGhhdC5jaGVja3N1bVBvcnRpb247XG4gICAgICAgIH1cbiAgICAgICAgaGFzaENvZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSBeIHRoaXMuY2hlY2tzdW1Qb3J0aW9uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgRmluZGVyUGF0dGVybiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBzdGFydEVuZCwgc3RhcnQsIGVuZCwgcm93TnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0RW5kID0gc3RhcnRFbmQ7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0RW5kID0gc3RhcnRFbmQ7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMucHVzaChuZXcgUmVzdWx0UG9pbnQoc3RhcnQsIHJvd051bWJlcikpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMucHVzaChuZXcgUmVzdWx0UG9pbnQoZW5kLCByb3dOdW1iZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGdldFN0YXJ0RW5kKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0UmVzdWx0UG9pbnRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0UG9pbnRzO1xuICAgICAgICB9XG4gICAgICAgIGVxdWFscyhvKSB7XG4gICAgICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRmluZGVyUGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0aGF0ID0gbztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSB0aGF0LnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGhhc2hDb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSU1MgdXRpbCBmdW5jdGlvbnMuXG4gICAgICovXG4gICAgY2xhc3MgUlNTVXRpbHMge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgICAgICBzdGF0aWMgZ2V0UlNTdmFsdWUod2lkdGhzLCBtYXhXaWR0aCwgbm9OYXJyb3cpIHtcbiAgICAgICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHdpZHRoIG9mIHdpZHRocykge1xuICAgICAgICAgICAgICAgIG4gKz0gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmFsID0gMDtcbiAgICAgICAgICAgIGxldCBuYXJyb3dNYXNrID0gMDtcbiAgICAgICAgICAgIGxldCBlbGVtZW50cyA9IHdpZHRocy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBiYXIgPSAwOyBiYXIgPCBlbGVtZW50cyAtIDE7IGJhcisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVsbVdpZHRoO1xuICAgICAgICAgICAgICAgIGZvciAoZWxtV2lkdGggPSAxLCBuYXJyb3dNYXNrIHw9IDEgPDwgYmFyOyBlbG1XaWR0aCA8IHdpZHRoc1tiYXJdOyBlbG1XaWR0aCsrLCBuYXJyb3dNYXNrICY9IH4oMSA8PCBiYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdWJWYWwgPSBSU1NVdGlscy5jb21iaW5zKG4gLSBlbG1XaWR0aCAtIDEsIGVsZW1lbnRzIC0gYmFyIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub05hcnJvdyAmJiAobmFycm93TWFzayA9PT0gMCkgJiYgKG4gLSBlbG1XaWR0aCAtIChlbGVtZW50cyAtIGJhciAtIDEpID49IGVsZW1lbnRzIC0gYmFyIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlZhbCAtPSBSU1NVdGlscy5jb21iaW5zKG4gLSBlbG1XaWR0aCAtIChlbGVtZW50cyAtIGJhciksIGVsZW1lbnRzIC0gYmFyIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzIC0gYmFyIC0gMSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsZXNzVmFsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG14d0VsZW1lbnQgPSBuIC0gZWxtV2lkdGggLSAoZWxlbWVudHMgLSBiYXIgLSAyKTsgbXh3RWxlbWVudCA+IG1heFdpZHRoOyBteHdFbGVtZW50LS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXNzVmFsICs9IFJTU1V0aWxzLmNvbWJpbnMobiAtIGVsbVdpZHRoIC0gbXh3RWxlbWVudCAtIDEsIGVsZW1lbnRzIC0gYmFyIC0gMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJWYWwgLT0gbGVzc1ZhbCAqIChlbGVtZW50cyAtIDEgLSBiYXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG4gLSBlbG1XaWR0aCA+IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJWYWwtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWwgKz0gc3ViVmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuIC09IGVsbVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY29tYmlucyhuLCByKSB7XG4gICAgICAgICAgICBsZXQgbWF4RGVub207XG4gICAgICAgICAgICBsZXQgbWluRGVub207XG4gICAgICAgICAgICBpZiAobiAtIHIgPiByKSB7XG4gICAgICAgICAgICAgICAgbWluRGVub20gPSByO1xuICAgICAgICAgICAgICAgIG1heERlbm9tID0gbiAtIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5EZW5vbSA9IG4gLSByO1xuICAgICAgICAgICAgICAgIG1heERlbm9tID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB2YWwgPSAxO1xuICAgICAgICAgICAgbGV0IGogPSAxO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG47IGkgPiBtYXhEZW5vbTsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFsICo9IGk7XG4gICAgICAgICAgICAgICAgaWYgKGogPD0gbWluRGVub20pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsIC89IGo7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoKGogPD0gbWluRGVub20pKSB7XG4gICAgICAgICAgICAgICAgdmFsIC89IGo7XG4gICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIEJpdEFycmF5QnVpbGRlciB7XG4gICAgICAgIHN0YXRpYyBidWlsZEJpdEFycmF5KHBhaXJzKSB7XG4gICAgICAgICAgICBsZXQgY2hhck51bWJlciA9IChwYWlycy5sZW5ndGggKiAyKSAtIDE7XG4gICAgICAgICAgICBpZiAocGFpcnNbcGFpcnMubGVuZ3RoIC0gMV0uZ2V0UmlnaHRDaGFyKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNoYXJOdW1iZXIgLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzaXplID0gMTIgKiBjaGFyTnVtYmVyO1xuICAgICAgICAgICAgbGV0IGJpbmFyeSA9IG5ldyBCaXRBcnJheShzaXplKTtcbiAgICAgICAgICAgIGxldCBhY2NQb3MgPSAwO1xuICAgICAgICAgICAgbGV0IGZpcnN0UGFpciA9IHBhaXJzWzBdO1xuICAgICAgICAgICAgbGV0IGZpcnN0VmFsdWUgPSBmaXJzdFBhaXIuZ2V0UmlnaHRDaGFyKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGZpcnN0VmFsdWUgJiAoMSA8PCBpKSkgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiaW5hcnkuc2V0KGFjY1Bvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY1BvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYWlycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UGFpciA9IHBhaXJzW2ldO1xuICAgICAgICAgICAgICAgIGxldCBsZWZ0VmFsdWUgPSBjdXJyZW50UGFpci5nZXRMZWZ0Q2hhcigpLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDExOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGxlZnRWYWx1ZSAmICgxIDw8IGopKSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5hcnkuc2V0KGFjY1Bvcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWNjUG9zKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGFpci5nZXRSaWdodENoYXIoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByaWdodFZhbHVlID0gY3VycmVudFBhaXIuZ2V0UmlnaHRDaGFyKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDExOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyaWdodFZhbHVlICYgKDEgPDwgaikpICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5hcnkuc2V0KGFjY1Bvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NQb3MrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiaW5hcnk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBCbG9ja1BhcnNlZFJlc3VsdCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGZpbmlzaGVkLCBkZWNvZGVkSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChkZWNvZGVkSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29kZWRJbmZvcm1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gZmluaXNoZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvZGVkSW5mb3JtYXRpb24gPSBkZWNvZGVkSW5mb3JtYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RGVjb2RlZEluZm9ybWF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlZEluZm9ybWF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlzRmluaXNoZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIERlY29kZWRPYmplY3Qge1xuICAgICAgICBjb25zdHJ1Y3RvcihuZXdQb3NpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5uZXdQb3NpdGlvbiA9IG5ld1Bvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGdldE5ld1Bvc2l0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV3UG9zaXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBEZWNvZGVkQ2hhciBleHRlbmRzIERlY29kZWRPYmplY3Qge1xuICAgICAgICBjb25zdHJ1Y3RvcihuZXdQb3NpdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHN1cGVyKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlzRk5DMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBEZWNvZGVkQ2hhci5GTkMxO1xuICAgICAgICB9XG4gICAgfVxuICAgIERlY29kZWRDaGFyLkZOQzEgPSAnJCc7XG5cbiAgICBjbGFzcyBEZWNvZGVkSW5mb3JtYXRpb24gZXh0ZW5kcyBEZWNvZGVkT2JqZWN0IHtcbiAgICAgICAgY29uc3RydWN0b3IobmV3UG9zaXRpb24sIG5ld1N0cmluZywgcmVtYWluaW5nVmFsdWUpIHtcbiAgICAgICAgICAgIHN1cGVyKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbWFpbmluZ1ZhbHVlID0gdGhpcy5yZW1haW5pbmdWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdWYWx1ZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5ld1N0cmluZyA9IG5ld1N0cmluZztcbiAgICAgICAgfVxuICAgICAgICBnZXROZXdTdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXdTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaXNSZW1haW5pbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1haW5pbmc7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0UmVtYWluaW5nVmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1haW5pbmdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIERlY29kZWROdW1lcmljIGV4dGVuZHMgRGVjb2RlZE9iamVjdCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKG5ld1Bvc2l0aW9uLCBmaXJzdERpZ2l0LCBzZWNvbmREaWdpdCkge1xuICAgICAgICAgICAgc3VwZXIobmV3UG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKGZpcnN0RGlnaXQgPCAwIHx8IGZpcnN0RGlnaXQgPiAxMCB8fCBzZWNvbmREaWdpdCA8IDAgfHwgc2Vjb25kRGlnaXQgPiAxMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyc3REaWdpdCA9IGZpcnN0RGlnaXQ7XG4gICAgICAgICAgICB0aGlzLnNlY29uZERpZ2l0ID0gc2Vjb25kRGlnaXQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Rmlyc3REaWdpdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0RGlnaXQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U2Vjb25kRGlnaXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmREaWdpdDtcbiAgICAgICAgfVxuICAgICAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0RGlnaXQgKiAxMCArIHRoaXMuc2Vjb25kRGlnaXQ7XG4gICAgICAgIH1cbiAgICAgICAgaXNGaXJzdERpZ2l0Rk5DMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0RGlnaXQgPT09IERlY29kZWROdW1lcmljLkZOQzE7XG4gICAgICAgIH1cbiAgICAgICAgaXNTZWNvbmREaWdpdEZOQzEoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmREaWdpdCA9PT0gRGVjb2RlZE51bWVyaWMuRk5DMTtcbiAgICAgICAgfVxuICAgICAgICBpc0FueUZOQzEoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdERpZ2l0ID09PSBEZWNvZGVkTnVtZXJpYy5GTkMxIHx8IHRoaXMuc2Vjb25kRGlnaXQgPT09IERlY29kZWROdW1lcmljLkZOQzE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGVjb2RlZE51bWVyaWMuRk5DMSA9IDEwO1xuXG4gICAgY2xhc3MgRmllbGRQYXJzZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcGFyc2VGaWVsZHNJbkdlbmVyYWxQdXJwb3NlKHJhd0luZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIXJhd0luZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9jZXNzaW5nIDItZGlnaXQgQUlzXG4gICAgICAgICAgICBpZiAocmF3SW5mb3JtYXRpb24ubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGZpcnN0VHdvRGlnaXRzID0gcmF3SW5mb3JtYXRpb24uc3Vic3RyaW5nKDAsIDIpO1xuICAgICAgICAgICAgZm9yIChsZXQgZGF0YUxlbmd0aCBvZiBGaWVsZFBhcnNlci5UV09fRElHSVRfREFUQV9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUxlbmd0aFswXSA9PT0gZmlyc3RUd29EaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGhbMV0gPT09IEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpZWxkUGFyc2VyLnByb2Nlc3NWYXJpYWJsZUFJKDIsIGRhdGFMZW5ndGhbMl0sIHJhd0luZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRQYXJzZXIucHJvY2Vzc0ZpeGVkQUkoMiwgZGF0YUxlbmd0aFsxXSwgcmF3SW5mb3JtYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyYXdJbmZvcm1hdGlvbi5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZmlyc3RUaHJlZURpZ2l0cyA9IHJhd0luZm9ybWF0aW9uLnN1YnN0cmluZygwLCAzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGRhdGFMZW5ndGggb2YgRmllbGRQYXJzZXIuVEhSRUVfRElHSVRfREFUQV9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUxlbmd0aFswXSA9PT0gZmlyc3RUaHJlZURpZ2l0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUxlbmd0aFsxXSA9PT0gRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRQYXJzZXIucHJvY2Vzc1ZhcmlhYmxlQUkoMywgZGF0YUxlbmd0aFsyXSwgcmF3SW5mb3JtYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBGaWVsZFBhcnNlci5wcm9jZXNzRml4ZWRBSSgzLCBkYXRhTGVuZ3RoWzFdLCByYXdJbmZvcm1hdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgZGF0YUxlbmd0aCBvZiBGaWVsZFBhcnNlci5USFJFRV9ESUdJVF9QTFVTX0RJR0lUX0RBVEFfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGhbMF0gPT09IGZpcnN0VGhyZWVEaWdpdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGhbMV0gPT09IEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpZWxkUGFyc2VyLnByb2Nlc3NWYXJpYWJsZUFJKDQsIGRhdGFMZW5ndGhbMl0sIHJhd0luZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRQYXJzZXIucHJvY2Vzc0ZpeGVkQUkoNCwgZGF0YUxlbmd0aFsxXSwgcmF3SW5mb3JtYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyYXdJbmZvcm1hdGlvbi5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZmlyc3RGb3VyRGlnaXRzID0gcmF3SW5mb3JtYXRpb24uc3Vic3RyaW5nKDAsIDQpO1xuICAgICAgICAgICAgZm9yIChsZXQgZGF0YUxlbmd0aCBvZiBGaWVsZFBhcnNlci5GT1VSX0RJR0lUX0RBVEFfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGhbMF0gPT09IGZpcnN0Rm91ckRpZ2l0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUxlbmd0aFsxXSA9PT0gRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmllbGRQYXJzZXIucHJvY2Vzc1ZhcmlhYmxlQUkoNCwgZGF0YUxlbmd0aFsyXSwgcmF3SW5mb3JtYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBGaWVsZFBhcnNlci5wcm9jZXNzRml4ZWRBSSg0LCBkYXRhTGVuZ3RoWzFdLCByYXdJbmZvcm1hdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHByb2Nlc3NGaXhlZEFJKGFpU2l6ZSwgZmllbGRTaXplLCByYXdJbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgaWYgKHJhd0luZm9ybWF0aW9uLmxlbmd0aCA8IGFpU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGFpID0gcmF3SW5mb3JtYXRpb24uc3Vic3RyaW5nKDAsIGFpU2l6ZSk7XG4gICAgICAgICAgICBpZiAocmF3SW5mb3JtYXRpb24ubGVuZ3RoIDwgYWlTaXplICsgZmllbGRTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZmllbGQgPSByYXdJbmZvcm1hdGlvbi5zdWJzdHJpbmcoYWlTaXplLCBhaVNpemUgKyBmaWVsZFNpemUpO1xuICAgICAgICAgICAgbGV0IHJlbWFpbmluZyA9IHJhd0luZm9ybWF0aW9uLnN1YnN0cmluZyhhaVNpemUgKyBmaWVsZFNpemUpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICcoJyArIGFpICsgJyknICsgZmllbGQ7XG4gICAgICAgICAgICBsZXQgcGFyc2VkQUkgPSBGaWVsZFBhcnNlci5wYXJzZUZpZWxkc0luR2VuZXJhbFB1cnBvc2UocmVtYWluaW5nKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRBSSA9PSBudWxsID8gcmVzdWx0IDogcmVzdWx0ICsgcGFyc2VkQUk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHByb2Nlc3NWYXJpYWJsZUFJKGFpU2l6ZSwgdmFyaWFibGVGaWVsZFNpemUsIHJhd0luZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICBsZXQgYWkgPSByYXdJbmZvcm1hdGlvbi5zdWJzdHJpbmcoMCwgYWlTaXplKTtcbiAgICAgICAgICAgIGxldCBtYXhTaXplO1xuICAgICAgICAgICAgaWYgKHJhd0luZm9ybWF0aW9uLmxlbmd0aCA8IGFpU2l6ZSArIHZhcmlhYmxlRmllbGRTaXplKSB7XG4gICAgICAgICAgICAgICAgbWF4U2l6ZSA9IHJhd0luZm9ybWF0aW9uLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1heFNpemUgPSBhaVNpemUgKyB2YXJpYWJsZUZpZWxkU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmaWVsZCA9IHJhd0luZm9ybWF0aW9uLnN1YnN0cmluZyhhaVNpemUsIG1heFNpemUpO1xuICAgICAgICAgICAgbGV0IHJlbWFpbmluZyA9IHJhd0luZm9ybWF0aW9uLnN1YnN0cmluZyhtYXhTaXplKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSAnKCcgKyBhaSArICcpJyArIGZpZWxkO1xuICAgICAgICAgICAgbGV0IHBhcnNlZEFJID0gRmllbGRQYXJzZXIucGFyc2VGaWVsZHNJbkdlbmVyYWxQdXJwb3NlKHJlbWFpbmluZyk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkQUkgPT0gbnVsbCA/IHJlc3VsdCA6IHJlc3VsdCArIHBhcnNlZEFJO1xuICAgICAgICB9XG4gICAgfVxuICAgIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCA9IFtdO1xuICAgIEZpZWxkUGFyc2VyLlRXT19ESUdJVF9EQVRBX0xFTkdUSCA9IFtcbiAgICAgICAgWycwMCcsIDE4XSxcbiAgICAgICAgWycwMScsIDE0XSxcbiAgICAgICAgWycwMicsIDE0XSxcbiAgICAgICAgWycxMCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMjBdLFxuICAgICAgICBbJzExJywgNl0sXG4gICAgICAgIFsnMTInLCA2XSxcbiAgICAgICAgWycxMycsIDZdLFxuICAgICAgICBbJzE1JywgNl0sXG4gICAgICAgIFsnMTcnLCA2XSxcbiAgICAgICAgWycyMCcsIDJdLFxuICAgICAgICBbJzIxJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAyMF0sXG4gICAgICAgIFsnMjInLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDI5XSxcbiAgICAgICAgWyczMCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgOF0sXG4gICAgICAgIFsnMzcnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDhdLFxuICAgICAgICAvLyBpbnRlcm5hbCBjb21wYW55IGNvZGVzXG4gICAgICAgIFsnOTAnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc5MScsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMzBdLFxuICAgICAgICBbJzkyJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnOTMnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc5NCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMzBdLFxuICAgICAgICBbJzk1JywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnOTYnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc5NycsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgM10sXG4gICAgICAgIFsnOTgnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc5OScsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMzBdLFxuICAgIF07XG4gICAgRmllbGRQYXJzZXIuVEhSRUVfRElHSVRfREFUQV9MRU5HVEggPSBbXG4gICAgICAgIC8vIFNhbWUgZm9ybWF0IGFzIGFib3ZlXG4gICAgICAgIFsnMjQwJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnMjQxJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnMjQyJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCA2XSxcbiAgICAgICAgWycyNTAnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWycyNTEnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWycyNTMnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDE3XSxcbiAgICAgICAgWycyNTQnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDIwXSxcbiAgICAgICAgWyc0MDAnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc0MDEnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc0MDInLCAxN10sXG4gICAgICAgIFsnNDAzJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnNDEwJywgMTNdLFxuICAgICAgICBbJzQxMScsIDEzXSxcbiAgICAgICAgWyc0MTInLCAxM10sXG4gICAgICAgIFsnNDEzJywgMTNdLFxuICAgICAgICBbJzQxNCcsIDEzXSxcbiAgICAgICAgWyc0MjAnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDIwXSxcbiAgICAgICAgWyc0MjEnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDE1XSxcbiAgICAgICAgWyc0MjInLCAzXSxcbiAgICAgICAgWyc0MjMnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDE1XSxcbiAgICAgICAgWyc0MjQnLCAzXSxcbiAgICAgICAgWyc0MjUnLCAzXSxcbiAgICAgICAgWyc0MjYnLCAzXSxcbiAgICBdO1xuICAgIEZpZWxkUGFyc2VyLlRIUkVFX0RJR0lUX1BMVVNfRElHSVRfREFUQV9MRU5HVEggPSBbXG4gICAgICAgIC8vIFNhbWUgZm9ybWF0IGFzIGFib3ZlXG4gICAgICAgIFsnMzEwJywgNl0sXG4gICAgICAgIFsnMzExJywgNl0sXG4gICAgICAgIFsnMzEyJywgNl0sXG4gICAgICAgIFsnMzEzJywgNl0sXG4gICAgICAgIFsnMzE0JywgNl0sXG4gICAgICAgIFsnMzE1JywgNl0sXG4gICAgICAgIFsnMzE2JywgNl0sXG4gICAgICAgIFsnMzIwJywgNl0sXG4gICAgICAgIFsnMzIxJywgNl0sXG4gICAgICAgIFsnMzIyJywgNl0sXG4gICAgICAgIFsnMzIzJywgNl0sXG4gICAgICAgIFsnMzI0JywgNl0sXG4gICAgICAgIFsnMzI1JywgNl0sXG4gICAgICAgIFsnMzI2JywgNl0sXG4gICAgICAgIFsnMzI3JywgNl0sXG4gICAgICAgIFsnMzI4JywgNl0sXG4gICAgICAgIFsnMzI5JywgNl0sXG4gICAgICAgIFsnMzMwJywgNl0sXG4gICAgICAgIFsnMzMxJywgNl0sXG4gICAgICAgIFsnMzMyJywgNl0sXG4gICAgICAgIFsnMzMzJywgNl0sXG4gICAgICAgIFsnMzM0JywgNl0sXG4gICAgICAgIFsnMzM1JywgNl0sXG4gICAgICAgIFsnMzM2JywgNl0sXG4gICAgICAgIFsnMzQwJywgNl0sXG4gICAgICAgIFsnMzQxJywgNl0sXG4gICAgICAgIFsnMzQyJywgNl0sXG4gICAgICAgIFsnMzQzJywgNl0sXG4gICAgICAgIFsnMzQ0JywgNl0sXG4gICAgICAgIFsnMzQ1JywgNl0sXG4gICAgICAgIFsnMzQ2JywgNl0sXG4gICAgICAgIFsnMzQ3JywgNl0sXG4gICAgICAgIFsnMzQ4JywgNl0sXG4gICAgICAgIFsnMzQ5JywgNl0sXG4gICAgICAgIFsnMzUwJywgNl0sXG4gICAgICAgIFsnMzUxJywgNl0sXG4gICAgICAgIFsnMzUyJywgNl0sXG4gICAgICAgIFsnMzUzJywgNl0sXG4gICAgICAgIFsnMzU0JywgNl0sXG4gICAgICAgIFsnMzU1JywgNl0sXG4gICAgICAgIFsnMzU2JywgNl0sXG4gICAgICAgIFsnMzU3JywgNl0sXG4gICAgICAgIFsnMzYwJywgNl0sXG4gICAgICAgIFsnMzYxJywgNl0sXG4gICAgICAgIFsnMzYyJywgNl0sXG4gICAgICAgIFsnMzYzJywgNl0sXG4gICAgICAgIFsnMzY0JywgNl0sXG4gICAgICAgIFsnMzY1JywgNl0sXG4gICAgICAgIFsnMzY2JywgNl0sXG4gICAgICAgIFsnMzY3JywgNl0sXG4gICAgICAgIFsnMzY4JywgNl0sXG4gICAgICAgIFsnMzY5JywgNl0sXG4gICAgICAgIFsnMzkwJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAxNV0sXG4gICAgICAgIFsnMzkxJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAxOF0sXG4gICAgICAgIFsnMzkyJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAxNV0sXG4gICAgICAgIFsnMzkzJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAxOF0sXG4gICAgICAgIFsnNzAzJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgXTtcbiAgICBGaWVsZFBhcnNlci5GT1VSX0RJR0lUX0RBVEFfTEVOR1RIID0gW1xuICAgICAgICAvLyBTYW1lIGZvcm1hdCBhcyBhYm92ZVxuICAgICAgICBbJzcwMDEnLCAxM10sXG4gICAgICAgIFsnNzAwMicsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMzBdLFxuICAgICAgICBbJzcwMDMnLCAxMF0sXG4gICAgICAgIFsnODAwMScsIDE0XSxcbiAgICAgICAgWyc4MDAyJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAyMF0sXG4gICAgICAgIFsnODAwMycsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMzBdLFxuICAgICAgICBbJzgwMDQnLCBGaWVsZFBhcnNlci5WQVJJQUJMRV9MRU5HVEgsIDMwXSxcbiAgICAgICAgWyc4MDA1JywgNl0sXG4gICAgICAgIFsnODAwNicsIDE4XSxcbiAgICAgICAgWyc4MDA3JywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCAzMF0sXG4gICAgICAgIFsnODAwOCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMTJdLFxuICAgICAgICBbJzgwMTgnLCAxOF0sXG4gICAgICAgIFsnODAyMCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgMjVdLFxuICAgICAgICBbJzgxMDAnLCA2XSxcbiAgICAgICAgWyc4MTAxJywgMTBdLFxuICAgICAgICBbJzgxMDInLCAyXSxcbiAgICAgICAgWyc4MTEwJywgRmllbGRQYXJzZXIuVkFSSUFCTEVfTEVOR1RILCA3MF0sXG4gICAgICAgIFsnODIwMCcsIEZpZWxkUGFyc2VyLlZBUklBQkxFX0xFTkdUSCwgNzBdLFxuICAgIF07XG5cbiAgICBjbGFzcyBHZW5lcmFsQXBwSWREZWNvZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgIHRoaXMuaW5mb3JtYXRpb24gPSBpbmZvcm1hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVBbGxDb2RlcyhidWZmLCBpbml0aWFsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSBpbml0aWFsUG9zaXRpb247XG4gICAgICAgICAgICBsZXQgcmVtYWluaW5nID0gbnVsbDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMuZGVjb2RlR2VuZXJhbFB1cnBvc2VGaWVsZChjdXJyZW50UG9zaXRpb24sIHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZEZpZWxkcyA9IEZpZWxkUGFyc2VyLnBhcnNlRmllbGRzSW5HZW5lcmFsUHVycG9zZShpbmZvLmdldE5ld1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkRmllbGRzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZi5hcHBlbmQocGFyc2VkRmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uaXNSZW1haW5pbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmcgPSAnJyArIGluZm8uZ2V0UmVtYWluaW5nVmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9zaXRpb24gPT09IGluZm8uZ2V0TmV3UG9zaXRpb24oKSkgeyAvLyBObyBzdGVwIGZvcndhcmQhXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb24gPSBpbmZvLmdldE5ld1Bvc2l0aW9uKCk7XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBidWZmLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXNTdGlsbE51bWVyaWMocG9zKSB7XG4gICAgICAgICAgICAvLyBJdCdzIG51bWVyaWMgaWYgaXQgc3RpbGwgaGFzIDcgcG9zaXRpb25zXG4gICAgICAgICAgICAvLyBhbmQgb25lIG9mIHRoZSBmaXJzdCA0IGJpdHMgaXMgXCIxXCIuXG4gICAgICAgICAgICBpZiAocG9zICsgNyA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcyArIDQgPD0gdGhpcy5pbmZvcm1hdGlvbi5nZXRTaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgcG9zICsgMzsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5mb3JtYXRpb24uZ2V0KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZm9ybWF0aW9uLmdldChwb3MgKyAzKTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVOdW1lcmljKHBvcykge1xuICAgICAgICAgICAgaWYgKHBvcyArIDcgPiB0aGlzLmluZm9ybWF0aW9uLmdldFNpemUoKSkge1xuICAgICAgICAgICAgICAgIGxldCBudW1lcmljID0gdGhpcy5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KHBvcywgNCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bWVyaWMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkTnVtZXJpYyh0aGlzLmluZm9ybWF0aW9uLmdldFNpemUoKSwgRGVjb2RlZE51bWVyaWMuRk5DMSwgRGVjb2RlZE51bWVyaWMuRk5DMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb2RlZE51bWVyaWModGhpcy5pbmZvcm1hdGlvbi5nZXRTaXplKCksIG51bWVyaWMgLSAxLCBEZWNvZGVkTnVtZXJpYy5GTkMxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBudW1lcmljID0gdGhpcy5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KHBvcywgNyk7XG4gICAgICAgICAgICBsZXQgZGlnaXQxID0gKG51bWVyaWMgLSA4KSAvIDExO1xuICAgICAgICAgICAgbGV0IGRpZ2l0MiA9IChudW1lcmljIC0gOCkgJSAxMTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb2RlZE51bWVyaWMocG9zICsgNywgZGlnaXQxLCBkaWdpdDIpO1xuICAgICAgICB9XG4gICAgICAgIGV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkocG9zLCBiaXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gR2VuZXJhbEFwcElkRGVjb2Rlci5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KHRoaXMuaW5mb3JtYXRpb24sIHBvcywgYml0cyk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkoaW5mb3JtYXRpb24sIHBvcywgYml0cykge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYml0czsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm9ybWF0aW9uLmdldChwb3MgKyBpKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSB8PSAxIDw8IChiaXRzIC0gaSAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVHZW5lcmFsUHVycG9zZUZpZWxkKHBvcywgcmVtYWluaW5nKSB7XG4gICAgICAgICAgICAvLyB0aGlzLmJ1ZmZlci5zZXRMZW5ndGgoMCk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5zZXRMZW5ndGhUb1plcm8oKTtcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLmFwcGVuZChyZW1haW5pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNldFBvc2l0aW9uKHBvcyk7XG4gICAgICAgICAgICBsZXQgbGFzdERlY29kZWQgPSB0aGlzLnBhcnNlQmxvY2tzKCk7XG4gICAgICAgICAgICBpZiAobGFzdERlY29kZWQgIT0gbnVsbCAmJiBsYXN0RGVjb2RlZC5pc1JlbWFpbmluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkSW5mb3JtYXRpb24odGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCksIHRoaXMuYnVmZmVyLnRvU3RyaW5nKCksIGxhc3REZWNvZGVkLmdldFJlbWFpbmluZ1ZhbHVlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkSW5mb3JtYXRpb24odGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCksIHRoaXMuYnVmZmVyLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlQmxvY2tzKCkge1xuICAgICAgICAgICAgbGV0IGlzRmluaXNoZWQ7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGxldCBpbml0aWFsUG9zaXRpb24gPSB0aGlzLmN1cnJlbnQuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50LmlzQWxwaGEoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnBhcnNlQWxwaGFCbG9jaygpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZpbmlzaGVkID0gcmVzdWx0LmlzRmluaXNoZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50LmlzSXNvSWVjNjQ2KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wYXJzZUlzb0llYzY0NkJsb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgIGlzRmluaXNoZWQgPSByZXN1bHQuaXNGaW5pc2hlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gaXQgbXVzdCBiZSBudW1lcmljXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucGFyc2VOdW1lcmljQmxvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgaXNGaW5pc2hlZCA9IHJlc3VsdC5pc0ZpbmlzaGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbkNoYW5nZWQgPSBpbml0aWFsUG9zaXRpb24gIT09IHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmICghcG9zaXRpb25DaGFuZ2VkICYmICFpc0ZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKCFpc0ZpbmlzaGVkKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZ2V0RGVjb2RlZEluZm9ybWF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VOdW1lcmljQmxvY2soKSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pc1N0aWxsTnVtZXJpYyh0aGlzLmN1cnJlbnQuZ2V0UG9zaXRpb24oKSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbnVtZXJpYyA9IHRoaXMuZGVjb2RlTnVtZXJpYyh0aGlzLmN1cnJlbnQuZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNldFBvc2l0aW9uKG51bWVyaWMuZ2V0TmV3UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bWVyaWMuaXNGaXJzdERpZ2l0Rk5DMSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmZvcm1hdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bWVyaWMuaXNTZWNvbmREaWdpdEZOQzEoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb3JtYXRpb24gPSBuZXcgRGVjb2RlZEluZm9ybWF0aW9uKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpLCB0aGlzLmJ1ZmZlci50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9ybWF0aW9uID0gbmV3IERlY29kZWRJbmZvcm1hdGlvbih0aGlzLmN1cnJlbnQuZ2V0UG9zaXRpb24oKSwgdGhpcy5idWZmZXIudG9TdHJpbmcoKSwgbnVtZXJpYy5nZXRTZWNvbmREaWdpdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2NrUGFyc2VkUmVzdWx0KHRydWUsIGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIuYXBwZW5kKG51bWVyaWMuZ2V0Rmlyc3REaWdpdCgpKTtcbiAgICAgICAgICAgICAgICBpZiAobnVtZXJpYy5pc1NlY29uZERpZ2l0Rk5DMSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmZvcm1hdGlvbiA9IG5ldyBEZWNvZGVkSW5mb3JtYXRpb24odGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCksIHRoaXMuYnVmZmVyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2NrUGFyc2VkUmVzdWx0KHRydWUsIGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIuYXBwZW5kKG51bWVyaWMuZ2V0U2Vjb25kRGlnaXQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc051bWVyaWNUb0FscGhhTnVtZXJpY0xhdGNoKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zZXRBbHBoYSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5pbmNyZW1lbnRQb3NpdGlvbig0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tQYXJzZWRSZXN1bHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlSXNvSWVjNjQ2QmxvY2soKSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pc1N0aWxsSXNvSWVjNjQ2KHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKSkge1xuICAgICAgICAgICAgICAgIGxldCBpc28gPSB0aGlzLmRlY29kZUlzb0llYzY0Nih0aGlzLmN1cnJlbnQuZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50LnNldFBvc2l0aW9uKGlzby5nZXROZXdQb3NpdGlvbigpKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNvLmlzRk5DMSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmZvcm1hdGlvbiA9IG5ldyBEZWNvZGVkSW5mb3JtYXRpb24odGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCksIHRoaXMuYnVmZmVyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2NrUGFyc2VkUmVzdWx0KHRydWUsIGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIuYXBwZW5kKGlzby5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWxwaGFPcjY0NlRvTnVtZXJpY0xhdGNoKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5pbmNyZW1lbnRQb3NpdGlvbigzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2V0TnVtZXJpYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc0FscGhhVG82NDZUb0FscGhhTGF0Y2godGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpICsgNSA8IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5pbmNyZW1lbnRQb3NpdGlvbig1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zZXRQb3NpdGlvbih0aGlzLmluZm9ybWF0aW9uLmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zZXRBbHBoYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9ja1BhcnNlZFJlc3VsdChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VBbHBoYUJsb2NrKCkge1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuaXNTdGlsbEFscGhhKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKSkge1xuICAgICAgICAgICAgICAgIGxldCBhbHBoYSA9IHRoaXMuZGVjb2RlQWxwaGFudW1lcmljKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2V0UG9zaXRpb24oYWxwaGEuZ2V0TmV3UG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhLmlzRk5DMSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmZvcm1hdGlvbiA9IG5ldyBEZWNvZGVkSW5mb3JtYXRpb24odGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCksIHRoaXMuYnVmZmVyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2NrUGFyc2VkUmVzdWx0KHRydWUsIGluZm9ybWF0aW9uKTsgLy8gZW5kIG9mIHRoZSBjaGFyIGJsb2NrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLmFwcGVuZChhbHBoYS5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWxwaGFPcjY0NlRvTnVtZXJpY0xhdGNoKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5pbmNyZW1lbnRQb3NpdGlvbigzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQuc2V0TnVtZXJpYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc0FscGhhVG82NDZUb0FscGhhTGF0Y2godGhpcy5jdXJyZW50LmdldFBvc2l0aW9uKCkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudC5nZXRQb3NpdGlvbigpICsgNSA8IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5pbmNyZW1lbnRQb3NpdGlvbig1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zZXRQb3NpdGlvbih0aGlzLmluZm9ybWF0aW9uLmdldFNpemUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudC5zZXRJc29JZWM2NDYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tQYXJzZWRSZXN1bHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlzU3RpbGxJc29JZWM2NDYocG9zKSB7XG4gICAgICAgICAgICBpZiAocG9zICsgNSA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGZpdmVCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDUpO1xuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA+PSA1ICYmIGZpdmVCaXRWYWx1ZSA8IDE2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zICsgNyA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNldmVuQml0VmFsdWUgPSB0aGlzLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkocG9zLCA3KTtcbiAgICAgICAgICAgIGlmIChzZXZlbkJpdFZhbHVlID49IDY0ICYmIHNldmVuQml0VmFsdWUgPCAxMTYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3MgKyA4ID4gdGhpcy5pbmZvcm1hdGlvbi5nZXRTaXplKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZWlnaHRCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDgpO1xuICAgICAgICAgICAgcmV0dXJuIGVpZ2h0Qml0VmFsdWUgPj0gMjMyICYmIGVpZ2h0Qml0VmFsdWUgPCAyNTM7XG4gICAgICAgIH1cbiAgICAgICAgZGVjb2RlSXNvSWVjNjQ2KHBvcykge1xuICAgICAgICAgICAgbGV0IGZpdmVCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDUpO1xuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA9PT0gMTUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlY29kZWRDaGFyKHBvcyArIDUsIERlY29kZWRDaGFyLkZOQzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA+PSA1ICYmIGZpdmVCaXRWYWx1ZSA8IDE1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA1LCAoJzAnICsgKGZpdmVCaXRWYWx1ZSAtIDUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2V2ZW5CaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDcpO1xuICAgICAgICAgICAgaWYgKHNldmVuQml0VmFsdWUgPj0gNjQgJiYgc2V2ZW5CaXRWYWx1ZSA8IDkwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA3LCAoJycgKyAoc2V2ZW5CaXRWYWx1ZSArIDEpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V2ZW5CaXRWYWx1ZSA+PSA5MCAmJiBzZXZlbkJpdFZhbHVlIDwgMTE2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA3LCAoJycgKyAoc2V2ZW5CaXRWYWx1ZSArIDcpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZWlnaHRCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDgpO1xuICAgICAgICAgICAgbGV0IGM7XG4gICAgICAgICAgICBzd2l0Y2ggKGVpZ2h0Qml0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDIzMjpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICchJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMzM6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnXCInO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIzNDpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICclJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMzU6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnJic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjM2OlxuICAgICAgICAgICAgICAgICAgICBjID0gJ1xcJyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjM3OlxuICAgICAgICAgICAgICAgICAgICBjID0gJygnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIzODpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICcpJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMzk6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnKic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQwOlxuICAgICAgICAgICAgICAgICAgICBjID0gJysnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI0MTpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICcsJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNDI6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnLSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQzOlxuICAgICAgICAgICAgICAgICAgICBjID0gJy4nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI0NDpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICcvJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNDU6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnOic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQ2OlxuICAgICAgICAgICAgICAgICAgICBjID0gJzsnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI0NzpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICc8JztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNDg6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnPSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQ5OlxuICAgICAgICAgICAgICAgICAgICBjID0gJz4nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI1MDpcbiAgICAgICAgICAgICAgICAgICAgYyA9ICc/JztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNTE6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnXyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjUyOlxuICAgICAgICAgICAgICAgICAgICBjID0gJyAnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IERlY29kZWRDaGFyKHBvcyArIDgsIGMpO1xuICAgICAgICB9XG4gICAgICAgIGlzU3RpbGxBbHBoYShwb3MpIHtcbiAgICAgICAgICAgIGlmIChwb3MgKyA1ID4gdGhpcy5pbmZvcm1hdGlvbi5nZXRTaXplKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBub3cgY2hlY2sgaWYgaXQncyBhIHZhbGlkIDUtYml0IHZhbHVlICgwLi45IGFuZCBGTkMxKVxuICAgICAgICAgICAgbGV0IGZpdmVCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDUpO1xuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA+PSA1ICYmIGZpdmVCaXRWYWx1ZSA8IDE2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zICsgNiA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNpeEJpdFZhbHVlID0gdGhpcy5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KHBvcywgNik7XG4gICAgICAgICAgICByZXR1cm4gc2l4Qml0VmFsdWUgPj0gMTYgJiYgc2l4Qml0VmFsdWUgPCA2MzsgLy8gNjMgbm90IGluY2x1ZGVkXG4gICAgICAgIH1cbiAgICAgICAgZGVjb2RlQWxwaGFudW1lcmljKHBvcykge1xuICAgICAgICAgICAgbGV0IGZpdmVCaXRWYWx1ZSA9IHRoaXMuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShwb3MsIDUpO1xuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA9PT0gMTUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlY29kZWRDaGFyKHBvcyArIDUsIERlY29kZWRDaGFyLkZOQzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpdmVCaXRWYWx1ZSA+PSA1ICYmIGZpdmVCaXRWYWx1ZSA8IDE1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA1LCAoJzAnICsgKGZpdmVCaXRWYWx1ZSAtIDUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2l4Qml0VmFsdWUgPSB0aGlzLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkocG9zLCA2KTtcbiAgICAgICAgICAgIGlmIChzaXhCaXRWYWx1ZSA+PSAzMiAmJiBzaXhCaXRWYWx1ZSA8IDU4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA2LCAoJycgKyAoc2l4Qml0VmFsdWUgKyAzMykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjO1xuICAgICAgICAgICAgc3dpdGNoIChzaXhCaXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgNTg6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnKic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTk6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnLCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjA6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnLSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjE6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjI6XG4gICAgICAgICAgICAgICAgICAgIGMgPSAnLyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RlY29kaW5nIGludmFsaWQgYWxwaGFudW1lcmljIHZhbHVlOiAnICsgc2l4Qml0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNvZGVkQ2hhcihwb3MgKyA2LCBjKTtcbiAgICAgICAgfVxuICAgICAgICBpc0FscGhhVG82NDZUb0FscGhhTGF0Y2gocG9zKSB7XG4gICAgICAgICAgICBpZiAocG9zICsgMSA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1ICYmIGkgKyBwb3MgPCB0aGlzLmluZm9ybWF0aW9uLmdldFNpemUoKTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluZm9ybWF0aW9uLmdldChwb3MgKyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaW5mb3JtYXRpb24uZ2V0KHBvcyArIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpc0FscGhhT3I2NDZUb051bWVyaWNMYXRjaChwb3MpIHtcbiAgICAgICAgICAgIC8vIE5leHQgaXMgYWxwaGFudW1lcmljIGlmIHRoZXJlIGFyZSAzIHBvc2l0aW9ucyBhbmQgdGhleSBhcmUgYWxsIHplcm9zXG4gICAgICAgICAgICBpZiAocG9zICsgMyA+IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IHBvcyArIDM7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZm9ybWF0aW9uLmdldChpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaXNOdW1lcmljVG9BbHBoYU51bWVyaWNMYXRjaChwb3MpIHtcbiAgICAgICAgICAgIC8vIE5leHQgaXMgYWxwaGFudW1lcmljIGlmIHRoZXJlIGFyZSA0IHBvc2l0aW9ucyBhbmQgdGhleSBhcmUgYWxsIHplcm9zLCBvclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBzdWJzZXQgb2YgdGhpcyBqdXN0IGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBzeW1ib2xcbiAgICAgICAgICAgIGlmIChwb3MgKyAxID4gdGhpcy5pbmZvcm1hdGlvbi5nZXRTaXplKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQgJiYgaSArIHBvcyA8IHRoaXMuaW5mb3JtYXRpb24uZ2V0U2l6ZSgpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmZvcm1hdGlvbi5nZXQocG9zICsgaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgQWJzdHJhY3RFeHBhbmRlZERlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgdGhpcy5pbmZvcm1hdGlvbiA9IGluZm9ybWF0aW9uO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmFsRGVjb2RlciA9IG5ldyBHZW5lcmFsQXBwSWREZWNvZGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRJbmZvcm1hdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZm9ybWF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGdldEdlbmVyYWxEZWNvZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhbERlY29kZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBBSTAxZGVjb2RlciBleHRlbmRzIEFic3RyYWN0RXhwYW5kZWREZWNvZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHN1cGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbmNvZGVDb21wcmVzc2VkR3RpbihidWYsIGN1cnJlbnRQb3MpIHtcbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJygwMSknKTtcbiAgICAgICAgICAgIGxldCBpbml0aWFsUG9zaXRpb24gPSBidWYubGVuZ3RoKCk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKCc5Jyk7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUNvbXByZXNzZWRHdGluV2l0aG91dEFJKGJ1ZiwgY3VycmVudFBvcywgaW5pdGlhbFBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbmNvZGVDb21wcmVzc2VkR3RpbldpdGhvdXRBSShidWYsIGN1cnJlbnRQb3MsIGluaXRpYWxCdWZmZXJQb3NpdGlvbikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJsb2NrID0gdGhpcy5nZXRHZW5lcmFsRGVjb2RlcigpLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkoY3VycmVudFBvcyArIDEwICogaSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2sgLyAxMDAgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEJsb2NrIC8gMTAgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGN1cnJlbnRCbG9jayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBSTAxZGVjb2Rlci5hcHBlbmRDaGVja0RpZ2l0KGJ1ZiwgaW5pdGlhbEJ1ZmZlclBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgYXBwZW5kQ2hlY2tEaWdpdChidWYsIGN1cnJlbnRQb3MpIHtcbiAgICAgICAgICAgIGxldCBjaGVja0RpZ2l0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTM7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIGxldCBkaWdpdCA9IGJ1Zi5jaGFyQXQoaSArIGN1cnJlbnRQb3MpIC0gJzAnO1xuICAgICAgICAgICAgICAgIC8vIFRvIGJlIGNoZWNrZWRcbiAgICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBidWYuY2hhckF0KGkgKyBjdXJyZW50UG9zKS5jaGFyQ29kZUF0KDApIC0gJzAnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICAgICAgY2hlY2tEaWdpdCArPSAoaSAmIDB4MDEpID09PSAwID8gMyAqIGRpZ2l0IDogZGlnaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja0RpZ2l0ID0gMTAgLSAoY2hlY2tEaWdpdCAlIDEwKTtcbiAgICAgICAgICAgIGlmIChjaGVja0RpZ2l0ID09PSAxMCkge1xuICAgICAgICAgICAgICAgIGNoZWNrRGlnaXQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmLmFwcGVuZChjaGVja0RpZ2l0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBSTAxZGVjb2Rlci5HVElOX1NJWkUgPSA0MDtcblxuICAgIGNsYXNzIEFJMDFBbmRPdGhlckFJcyBleHRlbmRzIEFJMDFkZWNvZGVyIHtcbiAgICAgICAgLy8gdGhlIHNlY29uZCBvbmUgaXMgdGhlIGVuY29kYXRpb24gbWV0aG9kLCBhbmQgdGhlIG90aGVyIHR3byBhcmUgZm9yIHRoZSB2YXJpYWJsZSBsZW5ndGhcbiAgICAgICAgY29uc3RydWN0b3IoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHN1cGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZUluZm9ybWF0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGJ1ZmYgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgYnVmZi5hcHBlbmQoJygwMSknKTtcbiAgICAgICAgICAgIGxldCBpbml0aWFsR3RpblBvc2l0aW9uID0gYnVmZi5sZW5ndGgoKTtcbiAgICAgICAgICAgIGxldCBmaXJzdEd0aW5EaWdpdCA9IHRoaXMuZ2V0R2VuZXJhbERlY29kZXIoKS5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KEFJMDFBbmRPdGhlckFJcy5IRUFERVJfU0laRSwgNCk7XG4gICAgICAgICAgICBidWZmLmFwcGVuZChmaXJzdEd0aW5EaWdpdCk7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUNvbXByZXNzZWRHdGluV2l0aG91dEFJKGJ1ZmYsIEFJMDFBbmRPdGhlckFJcy5IRUFERVJfU0laRSArIDQsIGluaXRpYWxHdGluUG9zaXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2VuZXJhbERlY29kZXIoKS5kZWNvZGVBbGxDb2RlcyhidWZmLCBBSTAxQW5kT3RoZXJBSXMuSEVBREVSX1NJWkUgKyA0NCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQUkwMUFuZE90aGVyQUlzLkhFQURFUl9TSVpFID0gMSArIDEgKyAyOyAvLyBmaXJzdCBiaXQgZW5jb2RlcyB0aGUgbGlua2FnZSBmbGFnLFxuXG4gICAgY2xhc3MgQW55QUlEZWNvZGVyIGV4dGVuZHMgQWJzdHJhY3RFeHBhbmRlZERlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgc3VwZXIoaW5mb3JtYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlSW5mb3JtYXRpb24oKSB7XG4gICAgICAgICAgICBsZXQgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEdlbmVyYWxEZWNvZGVyKCkuZGVjb2RlQWxsQ29kZXMoYnVmLCBBbnlBSURlY29kZXIuSEVBREVSX1NJWkUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFueUFJRGVjb2Rlci5IRUFERVJfU0laRSA9IDIgKyAxICsgMjtcblxuICAgIGNsYXNzIEFJMDF3ZWlnaHREZWNvZGVyIGV4dGVuZHMgQUkwMWRlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgc3VwZXIoaW5mb3JtYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVuY29kZUNvbXByZXNzZWRXZWlnaHQoYnVmLCBjdXJyZW50UG9zLCB3ZWlnaHRTaXplKSB7XG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxXZWlnaHROdW1lcmljID0gdGhpcy5nZXRHZW5lcmFsRGVjb2RlcigpLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkoY3VycmVudFBvcywgd2VpZ2h0U2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZFdlaWdodENvZGUoYnVmLCBvcmlnaW5hbFdlaWdodE51bWVyaWMpO1xuICAgICAgICAgICAgbGV0IHdlaWdodE51bWVyaWMgPSB0aGlzLmNoZWNrV2VpZ2h0KG9yaWdpbmFsV2VpZ2h0TnVtZXJpYyk7XG4gICAgICAgICAgICBsZXQgY3VycmVudERpdmlzb3IgPSAxMDAwMDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICh3ZWlnaHROdW1lcmljIC8gY3VycmVudERpdmlzb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50RGl2aXNvciAvPSAxMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQod2VpZ2h0TnVtZXJpYyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBBSTAxM3gweERlY29kZXIgZXh0ZW5kcyBBSTAxd2VpZ2h0RGVjb2RlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGluZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICBzdXBlcihpbmZvcm1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VJbmZvcm1hdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEluZm9ybWF0aW9uKCkuZ2V0U2l6ZSgpICE9IEFJMDEzeDB4RGVjb2Rlci5IRUFERVJfU0laRSArIEFJMDF3ZWlnaHREZWNvZGVyLkdUSU5fU0laRSArIEFJMDEzeDB4RGVjb2Rlci5XRUlHSFRfU0laRSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGJ1ZiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUNvbXByZXNzZWRHdGluKGJ1ZiwgQUkwMTN4MHhEZWNvZGVyLkhFQURFUl9TSVpFKTtcbiAgICAgICAgICAgIHRoaXMuZW5jb2RlQ29tcHJlc3NlZFdlaWdodChidWYsIEFJMDEzeDB4RGVjb2Rlci5IRUFERVJfU0laRSArIEFJMDF3ZWlnaHREZWNvZGVyLkdUSU5fU0laRSwgQUkwMTN4MHhEZWNvZGVyLldFSUdIVF9TSVpFKTtcbiAgICAgICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBSTAxM3gweERlY29kZXIuSEVBREVSX1NJWkUgPSA0ICsgMTtcbiAgICBBSTAxM3gweERlY29kZXIuV0VJR0hUX1NJWkUgPSAxNTtcblxuICAgIGNsYXNzIEFJMDEzMTAzZGVjb2RlciBleHRlbmRzIEFJMDEzeDB4RGVjb2RlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGluZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICBzdXBlcihpbmZvcm1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgYWRkV2VpZ2h0Q29kZShidWYsIHdlaWdodCkge1xuICAgICAgICAgICAgYnVmLmFwcGVuZCgnKDMxMDMpJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tXZWlnaHQod2VpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgQUkwMTMyMHhEZWNvZGVyIGV4dGVuZHMgQUkwMTN4MHhEZWNvZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHN1cGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBhZGRXZWlnaHRDb2RlKGJ1Ziwgd2VpZ2h0KSB7XG4gICAgICAgICAgICBpZiAod2VpZ2h0IDwgMTAwMDApIHtcbiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCcoMzIwMiknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJygzMjAzKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoZWNrV2VpZ2h0KHdlaWdodCkge1xuICAgICAgICAgICAgaWYgKHdlaWdodCA8IDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHQgLSAxMDAwMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIEFJMDEzOTJ4RGVjb2RlciBleHRlbmRzIEFJMDFkZWNvZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHN1cGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZUluZm9ybWF0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0SW5mb3JtYXRpb24oKS5nZXRTaXplKCkgPCBBSTAxMzkyeERlY29kZXIuSEVBREVSX1NJWkUgKyBBSTAxZGVjb2Rlci5HVElOX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBidWYgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVDb21wcmVzc2VkR3RpbihidWYsIEFJMDEzOTJ4RGVjb2Rlci5IRUFERVJfU0laRSk7XG4gICAgICAgICAgICBsZXQgbGFzdEFJZGlnaXQgPSB0aGlzLmdldEdlbmVyYWxEZWNvZGVyKCkuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShBSTAxMzkyeERlY29kZXIuSEVBREVSX1NJWkUgKyBBSTAxZGVjb2Rlci5HVElOX1NJWkUsIEFJMDEzOTJ4RGVjb2Rlci5MQVNUX0RJR0lUX1NJWkUpO1xuICAgICAgICAgICAgYnVmLmFwcGVuZCgnKDM5MicpO1xuICAgICAgICAgICAgYnVmLmFwcGVuZChsYXN0QUlkaWdpdCk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKCcpJyk7XG4gICAgICAgICAgICBsZXQgZGVjb2RlZEluZm9ybWF0aW9uID0gdGhpcy5nZXRHZW5lcmFsRGVjb2RlcigpLmRlY29kZUdlbmVyYWxQdXJwb3NlRmllbGQoQUkwMTM5MnhEZWNvZGVyLkhFQURFUl9TSVpFICsgQUkwMWRlY29kZXIuR1RJTl9TSVpFICsgQUkwMTM5MnhEZWNvZGVyLkxBU1RfRElHSVRfU0laRSwgbnVsbCk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKGRlY29kZWRJbmZvcm1hdGlvbi5nZXROZXdTdHJpbmcoKSk7XG4gICAgICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQUkwMTM5MnhEZWNvZGVyLkhFQURFUl9TSVpFID0gNSArIDEgKyAyO1xuICAgIEFJMDEzOTJ4RGVjb2Rlci5MQVNUX0RJR0lUX1NJWkUgPSAyO1xuXG4gICAgY2xhc3MgQUkwMTM5M3hEZWNvZGVyIGV4dGVuZHMgQUkwMWRlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgc3VwZXIoaW5mb3JtYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlSW5mb3JtYXRpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJbmZvcm1hdGlvbigpLmdldFNpemUoKSA8IEFJMDEzOTN4RGVjb2Rlci5IRUFERVJfU0laRSArIEFJMDFkZWNvZGVyLkdUSU5fU0laRSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGJ1ZiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUNvbXByZXNzZWRHdGluKGJ1ZiwgQUkwMTM5M3hEZWNvZGVyLkhFQURFUl9TSVpFKTtcbiAgICAgICAgICAgIGxldCBsYXN0QUlkaWdpdCA9IHRoaXMuZ2V0R2VuZXJhbERlY29kZXIoKS5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KEFJMDEzOTN4RGVjb2Rlci5IRUFERVJfU0laRSArIEFJMDFkZWNvZGVyLkdUSU5fU0laRSwgQUkwMTM5M3hEZWNvZGVyLkxBU1RfRElHSVRfU0laRSk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKCcoMzkzJyk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKGxhc3RBSWRpZ2l0KTtcbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJyknKTtcbiAgICAgICAgICAgIGxldCBmaXJzdFRocmVlRGlnaXRzID0gdGhpcy5nZXRHZW5lcmFsRGVjb2RlcigpLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkoQUkwMTM5M3hEZWNvZGVyLkhFQURFUl9TSVpFICsgQUkwMWRlY29kZXIuR1RJTl9TSVpFICsgQUkwMTM5M3hEZWNvZGVyLkxBU1RfRElHSVRfU0laRSwgQUkwMTM5M3hEZWNvZGVyLkZJUlNUX1RIUkVFX0RJR0lUU19TSVpFKTtcbiAgICAgICAgICAgIGlmIChmaXJzdFRocmVlRGlnaXRzIC8gMTAwID09IDApIHtcbiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlyc3RUaHJlZURpZ2l0cyAvIDEwID09IDApIHtcbiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCcwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWYuYXBwZW5kKGZpcnN0VGhyZWVEaWdpdHMpO1xuICAgICAgICAgICAgbGV0IGdlbmVyYWxJbmZvcm1hdGlvbiA9IHRoaXMuZ2V0R2VuZXJhbERlY29kZXIoKS5kZWNvZGVHZW5lcmFsUHVycG9zZUZpZWxkKEFJMDEzOTN4RGVjb2Rlci5IRUFERVJfU0laRSArIEFJMDFkZWNvZGVyLkdUSU5fU0laRSArIEFJMDEzOTN4RGVjb2Rlci5MQVNUX0RJR0lUX1NJWkUgKyBBSTAxMzkzeERlY29kZXIuRklSU1RfVEhSRUVfRElHSVRTX1NJWkUsIG51bGwpO1xuICAgICAgICAgICAgYnVmLmFwcGVuZChnZW5lcmFsSW5mb3JtYXRpb24uZ2V0TmV3U3RyaW5nKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFJMDEzOTN4RGVjb2Rlci5IRUFERVJfU0laRSA9IDUgKyAxICsgMjtcbiAgICBBSTAxMzkzeERlY29kZXIuTEFTVF9ESUdJVF9TSVpFID0gMjtcbiAgICBBSTAxMzkzeERlY29kZXIuRklSU1RfVEhSRUVfRElHSVRTX1NJWkUgPSAxMDtcblxuICAgIGNsYXNzIEFJMDEzeDB4MXhEZWNvZGVyIGV4dGVuZHMgQUkwMXdlaWdodERlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihpbmZvcm1hdGlvbiwgZmlyc3RBSWRpZ2l0cywgZGF0ZUNvZGUpIHtcbiAgICAgICAgICAgIHN1cGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNvZGUgPSBkYXRlQ29kZTtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RBSWRpZ2l0cyA9IGZpcnN0QUlkaWdpdHM7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VJbmZvcm1hdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEluZm9ybWF0aW9uKCkuZ2V0U2l6ZSgpICE9IEFJMDEzeDB4MXhEZWNvZGVyLkhFQURFUl9TSVpFICsgQUkwMTN4MHgxeERlY29kZXIuR1RJTl9TSVpFICsgQUkwMTN4MHgxeERlY29kZXIuV0VJR0hUX1NJWkUgKyBBSTAxM3gweDF4RGVjb2Rlci5EQVRFX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBidWYgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVDb21wcmVzc2VkR3RpbihidWYsIEFJMDEzeDB4MXhEZWNvZGVyLkhFQURFUl9TSVpFKTtcbiAgICAgICAgICAgIHRoaXMuZW5jb2RlQ29tcHJlc3NlZFdlaWdodChidWYsIEFJMDEzeDB4MXhEZWNvZGVyLkhFQURFUl9TSVpFICsgQUkwMTN4MHgxeERlY29kZXIuR1RJTl9TSVpFLCBBSTAxM3gweDF4RGVjb2Rlci5XRUlHSFRfU0laRSk7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUNvbXByZXNzZWREYXRlKGJ1ZiwgQUkwMTN4MHgxeERlY29kZXIuSEVBREVSX1NJWkUgKyBBSTAxM3gweDF4RGVjb2Rlci5HVElOX1NJWkUgKyBBSTAxM3gweDF4RGVjb2Rlci5XRUlHSFRfU0laRSk7XG4gICAgICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZW5jb2RlQ29tcHJlc3NlZERhdGUoYnVmLCBjdXJyZW50UG9zKSB7XG4gICAgICAgICAgICBsZXQgbnVtZXJpY0RhdGUgPSB0aGlzLmdldEdlbmVyYWxEZWNvZGVyKCkuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShjdXJyZW50UG9zLCBBSTAxM3gweDF4RGVjb2Rlci5EQVRFX1NJWkUpO1xuICAgICAgICAgICAgaWYgKG51bWVyaWNEYXRlID09IDM4NDAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmLmFwcGVuZCgnKCcpO1xuICAgICAgICAgICAgYnVmLmFwcGVuZCh0aGlzLmRhdGVDb2RlKTtcbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJyknKTtcbiAgICAgICAgICAgIGxldCBkYXkgPSBudW1lcmljRGF0ZSAlIDMyO1xuICAgICAgICAgICAgbnVtZXJpY0RhdGUgLz0gMzI7XG4gICAgICAgICAgICBsZXQgbW9udGggPSBudW1lcmljRGF0ZSAlIDEyICsgMTtcbiAgICAgICAgICAgIG51bWVyaWNEYXRlIC89IDEyO1xuICAgICAgICAgICAgbGV0IHllYXIgPSBudW1lcmljRGF0ZTtcbiAgICAgICAgICAgIGlmICh5ZWFyIC8gMTAgPT0gMCkge1xuICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoeWVhcik7XG4gICAgICAgICAgICBpZiAobW9udGggLyAxMCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgnMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmLmFwcGVuZChtb250aCk7XG4gICAgICAgICAgICBpZiAoZGF5IC8gMTAgPT0gMCkge1xuICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZGF5KTtcbiAgICAgICAgfVxuICAgICAgICBhZGRXZWlnaHRDb2RlKGJ1Ziwgd2VpZ2h0KSB7XG4gICAgICAgICAgICBidWYuYXBwZW5kKCcoJyk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKHRoaXMuZmlyc3RBSWRpZ2l0cyk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKHdlaWdodCAvIDEwMDAwMCk7XG4gICAgICAgICAgICBidWYuYXBwZW5kKCcpJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tXZWlnaHQod2VpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0ICUgMTAwMDAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFJMDEzeDB4MXhEZWNvZGVyLkhFQURFUl9TSVpFID0gNyArIDE7XG4gICAgQUkwMTN4MHgxeERlY29kZXIuV0VJR0hUX1NJWkUgPSAyMDtcbiAgICBBSTAxM3gweDF4RGVjb2Rlci5EQVRFX1NJWkUgPSAxNjtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURlY29kZXIoaW5mb3JtYXRpb24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChpbmZvcm1hdGlvbi5nZXQoMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFJMDFBbmRPdGhlckFJcyhpbmZvcm1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWluZm9ybWF0aW9uLmdldCgyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW55QUlEZWNvZGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmb3VyQml0RW5jb2RhdGlvbk1ldGhvZCA9IEdlbmVyYWxBcHBJZERlY29kZXIuZXh0cmFjdE51bWVyaWNWYWx1ZUZyb21CaXRBcnJheShpbmZvcm1hdGlvbiwgMSwgNCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGZvdXJCaXRFbmNvZGF0aW9uTWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gbmV3IEFJMDEzMTAzZGVjb2RlcihpbmZvcm1hdGlvbik7XG4gICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gbmV3IEFJMDEzMjB4RGVjb2RlcihpbmZvcm1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZml2ZUJpdEVuY29kYXRpb25NZXRob2QgPSBHZW5lcmFsQXBwSWREZWNvZGVyLmV4dHJhY3ROdW1lcmljVmFsdWVGcm9tQml0QXJyYXkoaW5mb3JtYXRpb24sIDEsIDUpO1xuICAgICAgICAgICAgc3dpdGNoIChmaXZlQml0RW5jb2RhdGlvbk1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTI6IHJldHVybiBuZXcgQUkwMTM5MnhEZWNvZGVyKGluZm9ybWF0aW9uKTtcbiAgICAgICAgICAgICAgICBjYXNlIDEzOiByZXR1cm4gbmV3IEFJMDEzOTN4RGVjb2RlcihpbmZvcm1hdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2V2ZW5CaXRFbmNvZGF0aW9uTWV0aG9kID0gR2VuZXJhbEFwcElkRGVjb2Rlci5leHRyYWN0TnVtZXJpY1ZhbHVlRnJvbUJpdEFycmF5KGluZm9ybWF0aW9uLCAxLCA3KTtcbiAgICAgICAgICAgIHN3aXRjaCAoc2V2ZW5CaXRFbmNvZGF0aW9uTWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA1NjogcmV0dXJuIG5ldyBBSTAxM3gweDF4RGVjb2RlcihpbmZvcm1hdGlvbiwgJzMxMCcsICcxMScpO1xuICAgICAgICAgICAgICAgIGNhc2UgNTc6IHJldHVybiBuZXcgQUkwMTN4MHgxeERlY29kZXIoaW5mb3JtYXRpb24sICczMjAnLCAnMTEnKTtcbiAgICAgICAgICAgICAgICBjYXNlIDU4OiByZXR1cm4gbmV3IEFJMDEzeDB4MXhEZWNvZGVyKGluZm9ybWF0aW9uLCAnMzEwJywgJzEzJyk7XG4gICAgICAgICAgICAgICAgY2FzZSA1OTogcmV0dXJuIG5ldyBBSTAxM3gweDF4RGVjb2RlcihpbmZvcm1hdGlvbiwgJzMyMCcsICcxMycpO1xuICAgICAgICAgICAgICAgIGNhc2UgNjA6IHJldHVybiBuZXcgQUkwMTN4MHgxeERlY29kZXIoaW5mb3JtYXRpb24sICczMTAnLCAnMTUnKTtcbiAgICAgICAgICAgICAgICBjYXNlIDYxOiByZXR1cm4gbmV3IEFJMDEzeDB4MXhEZWNvZGVyKGluZm9ybWF0aW9uLCAnMzIwJywgJzE1Jyk7XG4gICAgICAgICAgICAgICAgY2FzZSA2MjogcmV0dXJuIG5ldyBBSTAxM3gweDF4RGVjb2RlcihpbmZvcm1hdGlvbiwgJzMxMCcsICcxNycpO1xuICAgICAgICAgICAgICAgIGNhc2UgNjM6IHJldHVybiBuZXcgQUkwMTN4MHgxeERlY29kZXIoaW5mb3JtYXRpb24sICczMjAnLCAnMTcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCd1bmtub3duIGRlY29kZXI6ICcgKyBpbmZvcm1hdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBFeHBhbmRlZFBhaXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihsZWZ0Q2hhciwgcmlnaHRDaGFyLCBmaW5kZXJQYXR0ZXIsIG1heUJlTGFzdCkge1xuICAgICAgICAgICAgdGhpcy5sZWZ0Y2hhciA9IGxlZnRDaGFyO1xuICAgICAgICAgICAgdGhpcy5yaWdodGNoYXIgPSByaWdodENoYXI7XG4gICAgICAgICAgICB0aGlzLmZpbmRlcnBhdHRlcm4gPSBmaW5kZXJQYXR0ZXI7XG4gICAgICAgICAgICB0aGlzLm1heWJlTGFzdCA9IG1heUJlTGFzdDtcbiAgICAgICAgfVxuICAgICAgICBtYXlCZUxhc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXliZUxhc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TGVmdENoYXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Y2hhcjtcbiAgICAgICAgfVxuICAgICAgICBnZXRSaWdodENoYXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yaWdodGNoYXI7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RmluZGVyUGF0dGVybigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRlcnBhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgbXVzdEJlTGFzdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0Y2hhciA9PSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuICdbICcgKyB0aGlzLmxlZnRjaGFyICsgJywgJyArIHRoaXMucmlnaHRjaGFyICsgJyA6ICcgKyAodGhpcy5maW5kZXJwYXR0ZXJuID09IG51bGwgPyAnbnVsbCcgOiB0aGlzLmZpbmRlcnBhdHRlcm4uZ2V0VmFsdWUoKSkgKyAnIF0nO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBlcXVhbHMobzEsIG8yKSB7XG4gICAgICAgICAgICBpZiAoIShvMSBpbnN0YW5jZW9mIEV4cGFuZGVkUGFpcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRXhwYW5kZWRQYWlyLmVxdWFsc09yTnVsbChvMS5sZWZ0Y2hhciwgbzIubGVmdGNoYXIpICYmXG4gICAgICAgICAgICAgICAgRXhwYW5kZWRQYWlyLmVxdWFsc09yTnVsbChvMS5yaWdodGNoYXIsIG8yLnJpZ2h0Y2hhcikgJiZcbiAgICAgICAgICAgICAgICBFeHBhbmRlZFBhaXIuZXF1YWxzT3JOdWxsKG8xLmZpbmRlcnBhdHRlcm4sIG8yLmZpbmRlcnBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBlcXVhbHNPck51bGwobzEsIG8yKSB7XG4gICAgICAgICAgICByZXR1cm4gbzEgPT09IG51bGwgPyBvMiA9PT0gbnVsbCA6IEV4cGFuZGVkUGFpci5lcXVhbHMobzEsIG8yKTtcbiAgICAgICAgfVxuICAgICAgICBoYXNoQ29kZSgpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBFeHBhbmRlZFBhaXIuaGFzaE5vdE51bGwobGVmdENoYXIpIF4gaGFzaE5vdE51bGwocmlnaHRDaGFyKSBeIGhhc2hOb3ROdWxsKGZpbmRlclBhdHRlcm4pO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5sZWZ0Y2hhci5nZXRWYWx1ZSgpIF4gdGhpcy5yaWdodGNoYXIuZ2V0VmFsdWUoKSBeIHRoaXMuZmluZGVycGF0dGVybi5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgRXhwYW5kZWRSb3cge1xuICAgICAgICBjb25zdHJ1Y3RvcihwYWlycywgcm93TnVtYmVyLCB3YXNSZXZlcnNlZCkge1xuICAgICAgICAgICAgdGhpcy5wYWlycyA9IHBhaXJzO1xuICAgICAgICAgICAgdGhpcy5yb3dOdW1iZXIgPSByb3dOdW1iZXI7XG4gICAgICAgICAgICB0aGlzLndhc1JldmVyc2VkID0gd2FzUmV2ZXJzZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0UGFpcnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYWlycztcbiAgICAgICAgfVxuICAgICAgICBnZXRSb3dOdW1iZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgaXNSZXZlcnNlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndhc1JldmVyc2VkO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGltcGxlbWVudGF0aW9uXG4gICAgICAgIGlzRXF1aXZhbGVudChvdGhlclBhaXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VxdWFsaXRpdHkodGhpcywgb3RoZXJQYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuICd7ICcgKyB0aGlzLnBhaXJzICsgJyB9JztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVHdvIHJvd3MgYXJlIGVxdWFsIGlmIHRoZXkgY29udGFpbiB0aGUgc2FtZSBwYWlycyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICovXG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICAvLyBjaGVjayBpbXBsZW1lbnRhdGlvblxuICAgICAgICBlcXVhbHMobzEsIG8yKSB7XG4gICAgICAgICAgICBpZiAoIShvMSBpbnN0YW5jZW9mIEV4cGFuZGVkUm93KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrRXF1YWxpdGl0eShvMSwgbzIpICYmIG8xLndhc1JldmVyc2VkID09PSBvMi53YXNSZXZlcnNlZDtcbiAgICAgICAgfVxuICAgICAgICBjaGVja0VxdWFsaXRpdHkocGFpcjEsIHBhaXIyKSB7XG4gICAgICAgICAgICBpZiAoIXBhaXIxIHx8ICFwYWlyMilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgcGFpcjEuZm9yRWFjaCgoZTEsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBwYWlyMi5mb3JFYWNoKGUyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUxLmdldExlZnRDaGFyKCkuZ2V0VmFsdWUoKSA9PT0gZTIuZ2V0TGVmdENoYXIoKS5nZXRWYWx1ZSgpICYmIGUxLmdldFJpZ2h0Q2hhcigpLmdldFZhbHVlKCkgPT09IGUyLmdldFJpZ2h0Q2hhcigpLmdldFZhbHVlKCkgJiYgZTEuZ2V0RmluZGVyUGF0dGVyKCkuZ2V0VmFsdWUoKSA9PT0gZTIuZ2V0RmluZGVyUGF0dGVyKCkuZ2V0VmFsdWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjtcbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5NYXA7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9ucztcbiAgICBjbGFzcyBSU1NFeHBhbmRlZFJlYWRlciBleHRlbmRzIEFic3RyYWN0UlNTUmVhZGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IodmVyYm9zZSkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMucGFpcnMgPSBuZXcgQXJyYXkoUlNTRXhwYW5kZWRSZWFkZXIuTUFYX1BBSVJTKTtcbiAgICAgICAgICAgIHRoaXMucm93cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgdGhpcy5zdGFydEVuZCA9IFsyXTtcbiAgICAgICAgICAgIHRoaXMudmVyYm9zZSA9ICh2ZXJib3NlID09PSB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVSb3cocm93TnVtYmVyLCByb3csIGhpbnRzKSB7XG4gICAgICAgICAgICAvLyBSb3dzIGNhbiBzdGFydCB3aXRoIGV2ZW4gcGF0dGVybiBpbiBjYXNlIGluIHByZXYgcm93cyB0aGVyZSB3aGVyZSBvZGQgbnVtYmVyIG9mIHBhdHRlcnMuXG4gICAgICAgICAgICAvLyBTbyBsZXRzIHRyeSB0d2ljZVxuICAgICAgICAgICAgLy8gdGhpcy5wYWlycy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5wYWlycy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdGhpcy5zdGFydEZyb21FdmVuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBSU1NFeHBhbmRlZFJlYWRlci5jb25zdHJ1Y3RSZXN1bHQodGhpcy5kZWNvZGVSb3cycGFpcnMocm93TnVtYmVyLCByb3cpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gT0tcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJib3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFpcnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRGcm9tRXZlbiA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gUlNTRXhwYW5kZWRSZWFkZXIuY29uc3RydWN0UmVzdWx0KHRoaXMuZGVjb2RlUm93MnBhaXJzKHJvd051bWJlciwgcm93KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzZXQoKSB7XG4gICAgICAgICAgICB0aGlzLnBhaXJzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLnJvd3MubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb3QgcHJpdmF0ZSBmb3IgdGVzdGluZ1xuICAgICAgICBkZWNvZGVSb3cycGFpcnMocm93TnVtYmVyLCByb3cpIHtcbiAgICAgICAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhaXJzLnB1c2godGhpcy5yZXRyaWV2ZU5leHRQYWlyKHJvdywgdGhpcy5wYWlycywgcm93TnVtYmVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhaXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpdCB0aGlzIGxvb3Agd2hlbiByZXRyaWV2ZU5leHRQYWlyKCkgZmFpbHMgYW5kIHRocm93c1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiB2ZXJpZnkgc2VxdWVuY2Ugb2YgZmluZGVyIHBhdHRlcm5zIGFzIGluIGNoZWNrUGFpclNlcXVlbmNlKClcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQ2hlY2tzdW0oKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhaXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRyeVN0YWNrZWREZWNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5yb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRyeVN0YWNrZWREZWNvZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5U3RhY2tlZERlY29kZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbGV0IHRyeVN0YWNrZWREZWNvZGUgPSAhdGhpcy5yb3dzLmlzRW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVSb3cocm93TnVtYmVyLCBmYWxzZSk7IC8vIFRPRE86IGRlYWwgd2l0aCByZXZlcnNlZCByb3dzXG4gICAgICAgICAgICBpZiAodHJ5U3RhY2tlZERlY29kZSkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGltYWdlIGlzIDE4MC1yb3RhdGVkLCB0aGVuIHJvd3MgYXJlIHNvcnRlZCBpbiB3cm9uZyBkaXJlY3Rpb24uXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHR3aWNlIHdpdGggYm90aCB0aGUgZGlyZWN0aW9ucy5cbiAgICAgICAgICAgICAgICBsZXQgcHMgPSB0aGlzLmNoZWNrUm93c0Jvb2xlYW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChwcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHMgPSB0aGlzLmNoZWNrUm93c0Jvb2xlYW4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5lZWQgdG8gVmVyaWZ5XG4gICAgICAgIGNoZWNrUm93c0Jvb2xlYW4ocmV2ZXJzZSkge1xuICAgICAgICAgICAgLy8gTGltaXQgbnVtYmVyIG9mIHJvd3Mgd2UgYXJlIGNoZWNraW5nXG4gICAgICAgICAgICAvLyBXZSB1c2UgcmVjdXJzaXZlIGFsZ29yaXRobSB3aXRoIHB1cmUgY29tcGxleGl0eSBhbmQgZG9uJ3Qgd2FudCBpdCB0byB0YWtlIGZvcmV2ZXJcbiAgICAgICAgICAgIC8vIFN0YWNrZWQgYmFyY29kZSBjYW4gaGF2ZSB1cCB0byAxMSByb3dzLCBzbyAyNSBzZWVtcyByZWFzb25hYmxlIGVub3VnaFxuICAgICAgICAgICAgaWYgKHRoaXMucm93cy5sZW5ndGggPiAyNSkge1xuICAgICAgICAgICAgICAgIHRoaXMucm93cy5sZW5ndGggPSAwOyAvLyBXZSB3aWxsIG5ldmVyIGhhdmUgYSBjaGFuY2UgdG8gZ2V0IHJlc3VsdCwgc28gY2xlYXIgaXRcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFpcnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBDb2xsZWN0aW9ucy5yZXZlcnNlKHRoaXMucm93cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcHMgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwcyA9IHRoaXMuY2hlY2tSb3dzKG5ldyBBcnJheSgpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gT0tcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJib3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBDb2xsZWN0aW9ucy5yZXZlcnNlKHRoaXMucm93cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJ5IHRvIGNvbnN0cnVjdCBhIHZhbGlkIHJvd3Mgc2VxdWVuY2VcbiAgICAgICAgLy8gUmVjdXJzaW9uIGlzIHVzZWQgdG8gaW1wbGVtZW50IGJhY2t0cmFja2luZ1xuICAgICAgICBjaGVja1Jvd3MoY29sbGVjdGVkUm93cywgY3VycmVudFJvdykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRSb3c7IGkgPCB0aGlzLnJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGhpcy5yb3dzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucGFpcnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2xsZWN0ZWRSb3cgb2YgY29sbGVjdGVkUm93cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhaXJzLnB1c2goY29sbGVjdGVkUm93LmdldFBhaXJzKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhaXJzLnB1c2gocm93LmdldFBhaXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmICghUlNTRXhwYW5kZWRSZWFkZXIuaXNWYWxpZFNlcXVlbmNlKHRoaXMucGFpcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0NoZWNrc3VtKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFpcnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBycyA9IG5ldyBBcnJheShjb2xsZWN0ZWRSb3dzKTtcbiAgICAgICAgICAgICAgICBycy5wdXNoKHJvdyk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaW9uOiB0cnkgdG8gYWRkIG1vcmUgcm93c1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja1Jvd3MocnMsIGkgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZmFpbGVkLCB0cnkgdGhlIG5leHQgY2FuZGlkYXRlXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcmJvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hldGhlciB0aGUgcGFpcnMgZm9ybSBhIHZhbGlkIGZpbmQgcGF0dGVybiBzZXF1ZW5jZSxcbiAgICAgICAgLy8gZWl0aGVyIGNvbXBsZXRlIG9yIGEgcHJlZml4XG4gICAgICAgIHN0YXRpYyBpc1ZhbGlkU2VxdWVuY2UocGFpcnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHNlcXVlbmNlIG9mIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRURVJOX1NFUVVFTkNFUykge1xuICAgICAgICAgICAgICAgIGlmIChwYWlycy5sZW5ndGggPiBzZXF1ZW5jZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhaXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWlyc1tqXS5nZXRGaW5kZXJQYXR0ZXJuKCkuZ2V0VmFsdWUoKSAhPSBzZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JlUm93KHJvd051bWJlciwgd2FzUmV2ZXJzZWQpIHtcbiAgICAgICAgICAgIC8vIERpc2NhcmQgaWYgZHVwbGljYXRlIGFib3ZlIG9yIGJlbG93OyBvdGhlcndpc2UgaW5zZXJ0IGluIG9yZGVyIGJ5IHJvdyBudW1iZXIuXG4gICAgICAgICAgICBsZXQgaW5zZXJ0UG9zID0gMDtcbiAgICAgICAgICAgIGxldCBwcmV2SXNTYW1lID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbmV4dElzU2FtZSA9IGZhbHNlO1xuICAgICAgICAgICAgd2hpbGUgKGluc2VydFBvcyA8IHRoaXMucm93cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJvdyA9IHRoaXMucm93c1tpbnNlcnRQb3NdO1xuICAgICAgICAgICAgICAgIGlmIChlcm93LmdldFJvd051bWJlcigpID4gcm93TnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRJc1NhbWUgPSBlcm93LmlzRXF1aXZhbGVudCh0aGlzLnBhaXJzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZJc1NhbWUgPSBlcm93LmlzRXF1aXZhbGVudCh0aGlzLnBhaXJzKTtcbiAgICAgICAgICAgICAgICBpbnNlcnRQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXh0SXNTYW1lIHx8IHByZXZJc1NhbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXaGVuIHRoZSByb3cgd2FzIHBhcnRpYWxseSBkZWNvZGVkIChlLmcuIDIgcGFpcnMgZm91bmQgaW5zdGVhZCBvZiAzKSxcbiAgICAgICAgICAgIC8vIGl0IHdpbGwgcHJldmVudCB1cyBmcm9tIGRldGVjdGluZyB0aGUgYmFyY29kZS5cbiAgICAgICAgICAgIC8vIFRyeSB0byBtZXJnZSBwYXJ0aWFsIHJvd3NcbiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIHJvdyBpcyBwYXJ0IG9mIGFuIGFsbHJlYWR5IGRldGVjdGVkIHJvd1xuICAgICAgICAgICAgaWYgKFJTU0V4cGFuZGVkUmVhZGVyLmlzUGFydGlhbFJvdyh0aGlzLnBhaXJzLCB0aGlzLnJvd3MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3dzLnB1c2goaW5zZXJ0UG9zLCBuZXcgRXhwYW5kZWRSb3codGhpcy5wYWlycywgcm93TnVtYmVyLCB3YXNSZXZlcnNlZCkpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVQYXJ0aWFsUm93cyh0aGlzLnBhaXJzLCB0aGlzLnJvd3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBhbGwgdGhlIHJvd3MgdGhhdCBjb250YWlucyBvbmx5IHNwZWNpZmllZCBwYWlyc1xuICAgICAgICByZW1vdmVQYXJ0aWFsUm93cyhwYWlycywgcm93cykge1xuICAgICAgICAgICAgLy8gZm9yIChJdGVyYXRvcjxFeHBhbmRlZFJvdz4gaXRlcmF0b3IgPSByb3dzLml0ZXJhdG9yKCk7IGl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgICAgIC8vICAgRXhwYW5kZWRSb3cgciA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIC8vICAgaWYgKHIuZ2V0UGFpcnMoKS5zaXplKCkgPT0gcGFpcnMuc2l6ZSgpKSB7XG4gICAgICAgICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgIC8vICAgYm9vbGVhbiBhbGxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAvLyAgIGZvciAoRXhwYW5kZWRQYWlyIHAgOiByLmdldFBhaXJzKCkpIHtcbiAgICAgICAgICAgIC8vICAgICBib29sZWFuIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgZm9yIChFeHBhbmRlZFBhaXIgcHAgOiBwYWlycykge1xuICAgICAgICAgICAgLy8gICAgICAgaWYgKHAuZXF1YWxzKHBwKSkge1xuICAgICAgICAgICAgLy8gICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gICAgICAgfVxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAvLyAgICAgICBhbGxGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAvLyAgIGlmIChhbGxGb3VuZCkge1xuICAgICAgICAgICAgLy8gICAgIC8vICdwYWlycycgY29udGFpbnMgYWxsIHRoZSBwYWlycyBmcm9tIHRoZSByb3cgJ3InXG4gICAgICAgICAgICAvLyAgICAgaXRlcmF0b3IucmVtb3ZlKCk7XG4gICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5nZXRQYWlycygpLmxlbmd0aCA9PT0gcGFpcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwIG9mIHJvdy5nZXRQYWlycygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHBwIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRXhwYW5kZWRQYWlyLmVxdWFscyhwLCBwcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm5zIHRydWUgd2hlbiBvbmUgb2YgdGhlIHJvd3MgYWxyZWFkeSBjb250YWlucyBhbGwgdGhlIHBhaXJzXG4gICAgICAgIHN0YXRpYyBpc1BhcnRpYWxSb3cocGFpcnMsIHJvd3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHIgb2Ygcm93cykge1xuICAgICAgICAgICAgICAgIGxldCBhbGxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcCBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcHAgb2Ygci5nZXRQYWlycygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5lcXVhbHMocHApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbEZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWxsRm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJvdyAncicgY29udGFpbiBhbGwgdGhlIHBhaXJzIGZyb20gJ3BhaXJzJ1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSB1c2VkIGZvciB1bml0IHRlc3RpbmdcbiAgICAgICAgZ2V0Um93cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90IHByaXZhdGUgZm9yIHVuaXQgdGVzdGluZ1xuICAgICAgICBzdGF0aWMgY29uc3RydWN0UmVzdWx0KHBhaXJzKSB7XG4gICAgICAgICAgICBsZXQgYmluYXJ5ID0gQml0QXJyYXlCdWlsZGVyLmJ1aWxkQml0QXJyYXkocGFpcnMpO1xuICAgICAgICAgICAgbGV0IGRlY29kZXIgPSBjcmVhdGVEZWNvZGVyKGJpbmFyeSk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0aW5nU3RyaW5nID0gZGVjb2Rlci5wYXJzZUluZm9ybWF0aW9uKCk7XG4gICAgICAgICAgICBsZXQgZmlyc3RQb2ludHMgPSBwYWlyc1swXS5nZXRGaW5kZXJQYXR0ZXJuKCkuZ2V0UmVzdWx0UG9pbnRzKCk7XG4gICAgICAgICAgICBsZXQgbGFzdFBvaW50cyA9IHBhaXJzW3BhaXJzLmxlbmd0aCAtIDFdLmdldEZpbmRlclBhdHRlcm4oKS5nZXRSZXN1bHRQb2ludHMoKTtcbiAgICAgICAgICAgIGxldCBwb2ludHMgPSBbZmlyc3RQb2ludHNbMF0sIGZpcnN0UG9pbnRzWzFdLCBsYXN0UG9pbnRzWzBdLCBsYXN0UG9pbnRzWzFdXTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0KHJlc3VsdGluZ1N0cmluZywgbnVsbCwgbnVsbCwgcG9pbnRzLCBCYXJjb2RlRm9ybWF0JDEuUlNTX0VYUEFOREVELCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBjaGVja0NoZWNrc3VtKCkge1xuICAgICAgICAgICAgbGV0IGZpcnN0UGFpciA9IHRoaXMucGFpcnMuZ2V0KDApO1xuICAgICAgICAgICAgbGV0IGNoZWNrQ2hhcmFjdGVyID0gZmlyc3RQYWlyLmdldExlZnRDaGFyKCk7XG4gICAgICAgICAgICBsZXQgZmlyc3RDaGFyYWN0ZXIgPSBmaXJzdFBhaXIuZ2V0UmlnaHRDaGFyKCk7XG4gICAgICAgICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGVja3N1bSA9IGZpcnN0Q2hhcmFjdGVyLmdldENoZWNrc3VtUG9ydGlvbigpO1xuICAgICAgICAgICAgbGV0IHMgPSAyO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnBhaXJzLnNpemUoKTsgKytpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQYWlyID0gdGhpcy5wYWlycy5nZXQoaSk7XG4gICAgICAgICAgICAgICAgY2hlY2tzdW0gKz0gY3VycmVudFBhaXIuZ2V0TGVmdENoYXIoKS5nZXRDaGVja3N1bVBvcnRpb24oKTtcbiAgICAgICAgICAgICAgICBzKys7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRSaWdodENoYXIgPSBjdXJyZW50UGFpci5nZXRSaWdodENoYXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJpZ2h0Q2hhciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrc3VtICs9IGN1cnJlbnRSaWdodENoYXIuZ2V0Q2hlY2tzdW1Qb3J0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja3N1bSAlPSAyMTE7XG4gICAgICAgICAgICBsZXQgY2hlY2tDaGFyYWN0ZXJWYWx1ZSA9IDIxMSAqIChzIC0gNCkgKyBjaGVja3N1bTtcbiAgICAgICAgICAgIHJldHVybiBjaGVja0NoYXJhY3RlclZhbHVlID09IGNoZWNrQ2hhcmFjdGVyLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGdldE5leHRTZWNvbmRCYXIocm93LCBpbml0aWFsUG9zKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFBvcztcbiAgICAgICAgICAgIGlmIChyb3cuZ2V0KGluaXRpYWxQb3MpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBvcyA9IHJvdy5nZXROZXh0VW5zZXQoaW5pdGlhbFBvcyk7XG4gICAgICAgICAgICAgICAgY3VycmVudFBvcyA9IHJvdy5nZXROZXh0U2V0KGN1cnJlbnRQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBvcyA9IHJvdy5nZXROZXh0U2V0KGluaXRpYWxQb3MpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3MgPSByb3cuZ2V0TmV4dFVuc2V0KGN1cnJlbnRQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRQb3M7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm90IHByaXZhdGUgZm9yIHRlc3RpbmdcbiAgICAgICAgcmV0cmlldmVOZXh0UGFpcihyb3csIHByZXZpb3VzUGFpcnMsIHJvd051bWJlcikge1xuICAgICAgICAgICAgbGV0IGlzT2RkUGF0dGVybiA9IHByZXZpb3VzUGFpcnMubGVuZ3RoICUgMiA9PSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRGcm9tRXZlbikge1xuICAgICAgICAgICAgICAgIGlzT2RkUGF0dGVybiA9ICFpc09kZFBhdHRlcm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGF0dGVybjtcbiAgICAgICAgICAgIGxldCBrZWVwRmluZGluZyA9IHRydWU7XG4gICAgICAgICAgICBsZXQgZm9yY2VkT2Zmc2V0ID0gLTE7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kTmV4dFBhaXIocm93LCBwcmV2aW91c1BhaXJzLCBmb3JjZWRPZmZzZXQpO1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSB0aGlzLnBhcnNlRm91bmRGaW5kZXJQYXR0ZXJuKHJvdywgcm93TnVtYmVyLCBpc09kZFBhdHRlcm4pO1xuICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VkT2Zmc2V0ID0gUlNTRXhwYW5kZWRSZWFkZXIuZ2V0TmV4dFNlY29uZEJhcihyb3csIHRoaXMuc3RhcnRFbmRbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAga2VlcEZpbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlIChrZWVwRmluZGluZyk7XG4gICAgICAgICAgICAvLyBXaGVuIHN0YWNrZWQgc3ltYm9sIGlzIHNwbGl0IG92ZXIgbXVsdGlwbGUgcm93cywgdGhlcmUncyBubyB3YXkgdG8gZ3Vlc3MgaWYgdGhpcyBwYWlyIGNhbiBiZSBsYXN0IG9yIG5vdC5cbiAgICAgICAgICAgIC8vIGJvb2xlYW4gbWF5QmVMYXN0ID0gY2hlY2tQYWlyU2VxdWVuY2UocHJldmlvdXNQYWlycywgcGF0dGVybik7XG4gICAgICAgICAgICBsZXQgbGVmdENoYXIgPSB0aGlzLmRlY29kZURhdGFDaGFyYWN0ZXIocm93LCBwYXR0ZXJuLCBpc09kZFBhdHRlcm4sIHRydWUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRW1wdHlQYWlyKHByZXZpb3VzUGFpcnMpICYmIHByZXZpb3VzUGFpcnNbcHJldmlvdXNQYWlycy5sZW5ndGggLSAxXS5tdXN0QmVMYXN0KCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByaWdodENoYXI7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJpZ2h0Q2hhciA9IHRoaXMuZGVjb2RlRGF0YUNoYXJhY3Rlcihyb3csIHBhdHRlcm4sIGlzT2RkUGF0dGVybiwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByaWdodENoYXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcmJvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHBhbmRlZFBhaXIobGVmdENoYXIsIHJpZ2h0Q2hhciwgcGF0dGVybiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaXNFbXB0eVBhaXIocGFpcnMpIHtcbiAgICAgICAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmaW5kTmV4dFBhaXIocm93LCBwcmV2aW91c1BhaXJzLCBmb3JjZWRPZmZzZXQpIHtcbiAgICAgICAgICAgIGxldCBjb3VudGVycyA9IHRoaXMuZ2V0RGVjb2RlRmluZGVyQ291bnRlcnMoKTtcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzFdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgcm93T2Zmc2V0O1xuICAgICAgICAgICAgaWYgKGZvcmNlZE9mZnNldCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcm93T2Zmc2V0ID0gZm9yY2VkT2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc0VtcHR5UGFpcihwcmV2aW91c1BhaXJzKSkge1xuICAgICAgICAgICAgICAgIHJvd09mZnNldCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFBhaXIgPSBwcmV2aW91c1BhaXJzW3ByZXZpb3VzUGFpcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgcm93T2Zmc2V0ID0gbGFzdFBhaXIuZ2V0RmluZGVyUGF0dGVybigpLmdldFN0YXJ0RW5kKClbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2VhcmNoaW5nRXZlblBhaXIgPSBwcmV2aW91c1BhaXJzLmxlbmd0aCAlIDIgIT0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0RnJvbUV2ZW4pIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hpbmdFdmVuUGFpciA9ICFzZWFyY2hpbmdFdmVuUGFpcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpc1doaXRlID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAocm93T2Zmc2V0IDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpc1doaXRlID0gIXJvdy5nZXQocm93T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzV2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvd09mZnNldCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNvdW50ZXJQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBsZXQgcGF0dGVyblN0YXJ0ID0gcm93T2Zmc2V0O1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHJvd09mZnNldDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm93LmdldCh4KSAhPSBpc1doaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyUG9zaXRpb24gPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaGluZ0V2ZW5QYWlyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUlNTRXhwYW5kZWRSZWFkZXIucmV2ZXJzZUNvdW50ZXJzKGNvdW50ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSU1NFeHBhbmRlZFJlYWRlci5pc0ZpbmRlclBhdHRlcm4oY291bnRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEVuZFswXSA9IHBhdHRlcm5TdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RW5kWzFdID0geDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoaW5nRXZlblBhaXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSU1NFeHBhbmRlZFJlYWRlci5yZXZlcnNlQ291bnRlcnMoY291bnRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVyblN0YXJ0ICs9IGNvdW50ZXJzWzBdICsgY291bnRlcnNbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1swXSA9IGNvdW50ZXJzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbMV0gPSBjb3VudGVyc1szXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJQb3NpdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcmV2ZXJzZUNvdW50ZXJzKGNvdW50ZXJzKSB7XG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gY291bnRlcnMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGggLyAyOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG1wID0gY291bnRlcnNbaV07XG4gICAgICAgICAgICAgICAgY291bnRlcnNbaV0gPSBjb3VudGVyc1tsZW5ndGggLSBpIC0gMV07XG4gICAgICAgICAgICAgICAgY291bnRlcnNbbGVuZ3RoIC0gaSAtIDFdID0gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBhcnNlRm91bmRGaW5kZXJQYXR0ZXJuKHJvdywgcm93TnVtYmVyLCBvZGRQYXR0ZXJuKSB7XG4gICAgICAgICAgICAvLyBBY3R1YWxseSB3ZSBmb3VuZCBlbGVtZW50cyAyLTUuXG4gICAgICAgICAgICBsZXQgZmlyc3RDb3VudGVyO1xuICAgICAgICAgICAgbGV0IHN0YXJ0O1xuICAgICAgICAgICAgbGV0IGVuZDtcbiAgICAgICAgICAgIGlmIChvZGRQYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGF0dGVybiBudW1iZXIgaXMgb2RkLCB3ZSBuZWVkIHRvIGxvY2F0ZSBlbGVtZW50IDEgKmJlZm9yZSogdGhlIGN1cnJlbnQgYmxvY2suXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0RWxlbWVudFN0YXJ0ID0gdGhpcy5zdGFydEVuZFswXSAtIDE7XG4gICAgICAgICAgICAgICAgLy8gTG9jYXRlIGVsZW1lbnQgMVxuICAgICAgICAgICAgICAgIHdoaWxlIChmaXJzdEVsZW1lbnRTdGFydCA+PSAwICYmICFyb3cuZ2V0KGZpcnN0RWxlbWVudFN0YXJ0KSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTdGFydC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTdGFydCsrO1xuICAgICAgICAgICAgICAgIGZpcnN0Q291bnRlciA9IHRoaXMuc3RhcnRFbmRbMF0gLSBmaXJzdEVsZW1lbnRTdGFydDtcbiAgICAgICAgICAgICAgICBzdGFydCA9IGZpcnN0RWxlbWVudFN0YXJ0O1xuICAgICAgICAgICAgICAgIGVuZCA9IHRoaXMuc3RhcnRFbmRbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXR0ZXJuIG51bWJlciBpcyBldmVuLCB0aGUgcGF0dGVybiBpcyByZXZlcnNlZCwgc28gd2UgbmVlZCB0byBsb2NhdGUgZWxlbWVudCAxICphZnRlciogdGhlIGN1cnJlbnQgYmxvY2suXG4gICAgICAgICAgICAgICAgc3RhcnQgPSB0aGlzLnN0YXJ0RW5kWzBdO1xuICAgICAgICAgICAgICAgIGVuZCA9IHJvdy5nZXROZXh0VW5zZXQodGhpcy5zdGFydEVuZFsxXSArIDEpO1xuICAgICAgICAgICAgICAgIGZpcnN0Q291bnRlciA9IGVuZCAtIHRoaXMuc3RhcnRFbmRbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlICdjb3VudGVycycgaG9sZCAxLTRcbiAgICAgICAgICAgIGxldCBjb3VudGVycyA9IHRoaXMuZ2V0RGVjb2RlRmluZGVyQ291bnRlcnMoKTtcbiAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkoY291bnRlcnMsIDAsIGNvdW50ZXJzLCAxLCBjb3VudGVycy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gZmlyc3RDb3VudGVyO1xuICAgICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucGFyc2VGaW5kZXJWYWx1ZShjb3VudGVycywgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVFRFUk5TKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm4odmFsdWUsIG5ldyBpbnRbXSB7IHN0YXJ0LCBlbmQgfSwgc3RhcnQsIGVuZCwgcm93TnVtYmVyfSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm4odmFsdWUsIFtzdGFydCwgZW5kXSwgc3RhcnQsIGVuZCwgcm93TnVtYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVEYXRhQ2hhcmFjdGVyKHJvdywgcGF0dGVybiwgaXNPZGRQYXR0ZXJuLCBsZWZ0Q2hhcikge1xuICAgICAgICAgICAgbGV0IGNvdW50ZXJzID0gdGhpcy5nZXREYXRhQ2hhcmFjdGVyQ291bnRlcnMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgY291bnRlcnMubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBjb3VudGVyc1t4XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVmdENoYXIpIHtcbiAgICAgICAgICAgICAgICBSU1NFeHBhbmRlZFJlYWRlci5yZWNvcmRQYXR0ZXJuSW5SZXZlcnNlKHJvdywgcGF0dGVybi5nZXRTdGFydEVuZCgpWzBdLCBjb3VudGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBSU1NFeHBhbmRlZFJlYWRlci5yZWNvcmRQYXR0ZXJuKHJvdywgcGF0dGVybi5nZXRTdGFydEVuZCgpWzFdLCBjb3VudGVycyk7XG4gICAgICAgICAgICAgICAgLy8gcmV2ZXJzZSBpdFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gY291bnRlcnMubGVuZ3RoIC0gMTsgaSA8IGo7IGkrKywgai0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gY291bnRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2ldID0gY291bnRlcnNbal07XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2pdID0gdGVtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IC8vIGNvdW50ZXJzW10gaGFzIHRoZSBwaXhlbHMgb2YgdGhlIG1vZHVsZVxuICAgICAgICAgICAgbGV0IG51bU1vZHVsZXMgPSAxNzsgLy8gbGVmdCBhbmQgcmlnaHQgZGF0YSBjaGFyYWN0ZXJzIGhhdmUgYWxsIHRoZSBzYW1lIGxlbmd0aFxuICAgICAgICAgICAgbGV0IGVsZW1lbnRXaWR0aCA9IE1hdGhVdGlscy5zdW0obmV3IEludDMyQXJyYXkoY291bnRlcnMpKSAvIG51bU1vZHVsZXM7XG4gICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2s6IGVsZW1lbnQgd2lkdGggZm9yIHBhdHRlcm4gYW5kIHRoZSBjaGFyYWN0ZXIgc2hvdWxkIG1hdGNoXG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWRFbGVtZW50V2lkdGggPSAocGF0dGVybi5nZXRTdGFydEVuZCgpWzFdIC0gcGF0dGVybi5nZXRTdGFydEVuZCgpWzBdKSAvIDE1LjA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZWxlbWVudFdpZHRoIC0gZXhwZWN0ZWRFbGVtZW50V2lkdGgpIC8gZXhwZWN0ZWRFbGVtZW50V2lkdGggPiAwLjMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBvZGRDb3VudHMgPSB0aGlzLmdldE9kZENvdW50cygpO1xuICAgICAgICAgICAgbGV0IGV2ZW5Db3VudHMgPSB0aGlzLmdldEV2ZW5Db3VudHMoKTtcbiAgICAgICAgICAgIGxldCBvZGRSb3VuZGluZ0Vycm9ycyA9IHRoaXMuZ2V0T2RkUm91bmRpbmdFcnJvcnMoKTtcbiAgICAgICAgICAgIGxldCBldmVuUm91bmRpbmdFcnJvcnMgPSB0aGlzLmdldEV2ZW5Sb3VuZGluZ0Vycm9ycygpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IDEuMCAqIGNvdW50ZXJzW2ldIC8gZWxlbWVudFdpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IHZhbHVlICsgMC41OyAvLyBSb3VuZFxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMC4zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID4gOCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiA4LjcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IGkgLyAyO1xuICAgICAgICAgICAgICAgIGlmICgoaSAmIDB4MDEpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb2RkQ291bnRzW29mZnNldF0gPSBjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgb2RkUm91bmRpbmdFcnJvcnNbb2Zmc2V0XSA9IHZhbHVlIC0gY291bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBldmVuQ291bnRzW29mZnNldF0gPSBjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgZXZlblJvdW5kaW5nRXJyb3JzW29mZnNldF0gPSB2YWx1ZSAtIGNvdW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRqdXN0T2RkRXZlbkNvdW50cyhudW1Nb2R1bGVzKTtcbiAgICAgICAgICAgIGxldCB3ZWlnaHRSb3dOdW1iZXIgPSA0ICogcGF0dGVybi5nZXRWYWx1ZSgpICsgKGlzT2RkUGF0dGVybiA/IDAgOiAyKSArIChsZWZ0Q2hhciA/IDAgOiAxKSAtIDE7XG4gICAgICAgICAgICBsZXQgb2RkU3VtID0gMDtcbiAgICAgICAgICAgIGxldCBvZGRDaGVja3N1bVBvcnRpb24gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG9kZENvdW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGlmIChSU1NFeHBhbmRlZFJlYWRlci5pc05vdEExbGVmdChwYXR0ZXJuLCBpc09kZFBhdHRlcm4sIGxlZnRDaGFyKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2VpZ2h0ID0gUlNTRXhwYW5kZWRSZWFkZXIuV0VJR0hUU1t3ZWlnaHRSb3dOdW1iZXJdWzIgKiBpXTtcbiAgICAgICAgICAgICAgICAgICAgb2RkQ2hlY2tzdW1Qb3J0aW9uICs9IG9kZENvdW50c1tpXSAqIHdlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2RkU3VtICs9IG9kZENvdW50c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBldmVuQ2hlY2tzdW1Qb3J0aW9uID0gMDtcbiAgICAgICAgICAgIC8vIGludCBldmVuU3VtID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBldmVuQ291bnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKFJTU0V4cGFuZGVkUmVhZGVyLmlzTm90QTFsZWZ0KHBhdHRlcm4sIGlzT2RkUGF0dGVybiwgbGVmdENoYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB3ZWlnaHQgPSBSU1NFeHBhbmRlZFJlYWRlci5XRUlHSFRTW3dlaWdodFJvd051bWJlcl1bMiAqIGkgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbkNoZWNrc3VtUG9ydGlvbiArPSBldmVuQ291bnRzW2ldICogd2VpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBldmVuU3VtICs9IGV2ZW5Db3VudHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2hlY2tzdW1Qb3J0aW9uID0gb2RkQ2hlY2tzdW1Qb3J0aW9uICsgZXZlbkNoZWNrc3VtUG9ydGlvbjtcbiAgICAgICAgICAgIGlmICgob2RkU3VtICYgMHgwMSkgIT0gMCB8fCBvZGRTdW0gPiAxMyB8fCBvZGRTdW0gPCA0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSAoMTMgLSBvZGRTdW0pIC8gMjtcbiAgICAgICAgICAgIGxldCBvZGRXaWRlc3QgPSBSU1NFeHBhbmRlZFJlYWRlci5TWU1CT0xfV0lERVNUW2dyb3VwXTtcbiAgICAgICAgICAgIGxldCBldmVuV2lkZXN0ID0gOSAtIG9kZFdpZGVzdDtcbiAgICAgICAgICAgIGxldCB2T2RkID0gUlNTVXRpbHMuZ2V0UlNTdmFsdWUob2RkQ291bnRzLCBvZGRXaWRlc3QsIHRydWUpO1xuICAgICAgICAgICAgbGV0IHZFdmVuID0gUlNTVXRpbHMuZ2V0UlNTdmFsdWUoZXZlbkNvdW50cywgZXZlbldpZGVzdCwgZmFsc2UpO1xuICAgICAgICAgICAgbGV0IHRFdmVuID0gUlNTRXhwYW5kZWRSZWFkZXIuRVZFTl9UT1RBTF9TVUJTRVRbZ3JvdXBdO1xuICAgICAgICAgICAgbGV0IGdTdW0gPSBSU1NFeHBhbmRlZFJlYWRlci5HU1VNW2dyb3VwXTtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHZPZGQgKiB0RXZlbiArIHZFdmVuICsgZ1N1bTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNoYXJhY3Rlcih2YWx1ZSwgY2hlY2tzdW1Qb3J0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgaXNOb3RBMWxlZnQocGF0dGVybiwgaXNPZGRQYXR0ZXJuLCBsZWZ0Q2hhcikge1xuICAgICAgICAgICAgLy8gQTE6IHBhdHRlcm4uZ2V0VmFsdWUgaXMgMCAoQSksIGFuZCBpdCdzIGFuIG9kZFBhdHRlcm4sIGFuZCBpdCBpcyBhIGxlZnQgY2hhclxuICAgICAgICAgICAgcmV0dXJuICEocGF0dGVybi5nZXRWYWx1ZSgpID09IDAgJiYgaXNPZGRQYXR0ZXJuICYmIGxlZnRDaGFyKTtcbiAgICAgICAgfVxuICAgICAgICBhZGp1c3RPZGRFdmVuQ291bnRzKG51bU1vZHVsZXMpIHtcbiAgICAgICAgICAgIGxldCBvZGRTdW0gPSBNYXRoVXRpbHMuc3VtKG5ldyBJbnQzMkFycmF5KHRoaXMuZ2V0T2RkQ291bnRzKCkpKTtcbiAgICAgICAgICAgIGxldCBldmVuU3VtID0gTWF0aFV0aWxzLnN1bShuZXcgSW50MzJBcnJheSh0aGlzLmdldEV2ZW5Db3VudHMoKSkpO1xuICAgICAgICAgICAgbGV0IGluY3JlbWVudE9kZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGRlY3JlbWVudE9kZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG9kZFN1bSA+IDEzKSB7XG4gICAgICAgICAgICAgICAgZGVjcmVtZW50T2RkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9kZFN1bSA8IDQpIHtcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGluY3JlbWVudEV2ZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBkZWNyZW1lbnRFdmVuID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZXZlblN1bSA+IDEzKSB7XG4gICAgICAgICAgICAgICAgZGVjcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVuU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgIGluY3JlbWVudEV2ZW4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1pc21hdGNoID0gb2RkU3VtICsgZXZlblN1bSAtIG51bU1vZHVsZXM7XG4gICAgICAgICAgICBsZXQgb2RkUGFyaXR5QmFkID0gKG9kZFN1bSAmIDB4MDEpID09IDE7XG4gICAgICAgICAgICBsZXQgZXZlblBhcml0eUJhZCA9IChldmVuU3VtICYgMHgwMSkgPT0gMDtcbiAgICAgICAgICAgIGlmIChtaXNtYXRjaCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9kZFBhcml0eUJhZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlblBhcml0eUJhZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50T2RkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZlblBhcml0eUJhZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWlzbWF0Y2ggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAob2RkUGFyaXR5QmFkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVuUGFyaXR5QmFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVuUGFyaXR5QmFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFdmVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtaXNtYXRjaCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9kZFBhcml0eUJhZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEJvdGggYmFkXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZGRTdW0gPCBldmVuU3VtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVuUGFyaXR5QmFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvIVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluY3JlbWVudE9kZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWNyZW1lbnRPZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFJTU0V4cGFuZGVkUmVhZGVyLmluY3JlbWVudCh0aGlzLmdldE9kZENvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY3JlbWVudE9kZCkge1xuICAgICAgICAgICAgICAgIFJTU0V4cGFuZGVkUmVhZGVyLmRlY3JlbWVudCh0aGlzLmdldE9kZENvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluY3JlbWVudEV2ZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVjcmVtZW50RXZlbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgUlNTRXhwYW5kZWRSZWFkZXIuaW5jcmVtZW50KHRoaXMuZ2V0RXZlbkNvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY3JlbWVudEV2ZW4pIHtcbiAgICAgICAgICAgICAgICBSU1NFeHBhbmRlZFJlYWRlci5kZWNyZW1lbnQodGhpcy5nZXRFdmVuQ291bnRzKCksIHRoaXMuZ2V0RXZlblJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFJTU0V4cGFuZGVkUmVhZGVyLlNZTUJPTF9XSURFU1QgPSBbNywgNSwgNCwgMywgMV07XG4gICAgUlNTRXhwYW5kZWRSZWFkZXIuRVZFTl9UT1RBTF9TVUJTRVQgPSBbNCwgMjAsIDUyLCAxMDQsIDIwNF07XG4gICAgUlNTRXhwYW5kZWRSZWFkZXIuR1NVTSA9IFswLCAzNDgsIDEzODgsIDI5NDgsIDM5ODhdO1xuICAgIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRURVJOUyA9IFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCA4LCA0LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgNiwgNCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDQsIDYsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAyLCA4LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgNiwgNSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDIsIDksIDFdKSAvLyBGXG4gICAgXTtcbiAgICBSU1NFeHBhbmRlZFJlYWRlci5XRUlHSFRTID0gW1xuICAgICAgICBbMSwgMywgOSwgMjcsIDgxLCAzMiwgOTYsIDc3XSxcbiAgICAgICAgWzIwLCA2MCwgMTgwLCAxMTgsIDE0MywgNywgMjEsIDYzXSxcbiAgICAgICAgWzE4OSwgMTQ1LCAxMywgMzksIDExNywgMTQwLCAyMDksIDIwNV0sXG4gICAgICAgIFsxOTMsIDE1NywgNDksIDE0NywgMTksIDU3LCAxNzEsIDkxXSxcbiAgICAgICAgWzYyLCAxODYsIDEzNiwgMTk3LCAxNjksIDg1LCA0NCwgMTMyXSxcbiAgICAgICAgWzE4NSwgMTMzLCAxODgsIDE0MiwgNCwgMTIsIDM2LCAxMDhdLFxuICAgICAgICBbMTEzLCAxMjgsIDE3MywgOTcsIDgwLCAyOSwgODcsIDUwXSxcbiAgICAgICAgWzE1MCwgMjgsIDg0LCA0MSwgMTIzLCAxNTgsIDUyLCAxNTZdLFxuICAgICAgICBbNDYsIDEzOCwgMjAzLCAxODcsIDEzOSwgMjA2LCAxOTYsIDE2Nl0sXG4gICAgICAgIFs3NiwgMTcsIDUxLCAxNTMsIDM3LCAxMTEsIDEyMiwgMTU1XSxcbiAgICAgICAgWzQzLCAxMjksIDE3NiwgMTA2LCAxMDcsIDExMCwgMTE5LCAxNDZdLFxuICAgICAgICBbMTYsIDQ4LCAxNDQsIDEwLCAzMCwgOTAsIDU5LCAxNzddLFxuICAgICAgICBbMTA5LCAxMTYsIDEzNywgMjAwLCAxNzgsIDExMiwgMTI1LCAxNjRdLFxuICAgICAgICBbNzAsIDIxMCwgMjA4LCAyMDIsIDE4NCwgMTMwLCAxNzksIDExNV0sXG4gICAgICAgIFsxMzQsIDE5MSwgMTUxLCAzMSwgOTMsIDY4LCAyMDQsIDE5MF0sXG4gICAgICAgIFsxNDgsIDIyLCA2NiwgMTk4LCAxNzIsIDk0LCA3MSwgMl0sXG4gICAgICAgIFs2LCAxOCwgNTQsIDE2MiwgNjQsIDE5MiwgMTU0LCA0MF0sXG4gICAgICAgIFsxMjAsIDE0OSwgMjUsIDc1LCAxNCwgNDIsIDEyNiwgMTY3XSxcbiAgICAgICAgWzc5LCAyNiwgNzgsIDIzLCA2OSwgMjA3LCAxOTksIDE3NV0sXG4gICAgICAgIFsxMDMsIDk4LCA4MywgMzgsIDExNCwgMTMxLCAxODIsIDEyNF0sXG4gICAgICAgIFsxNjEsIDYxLCAxODMsIDEyNywgMTcwLCA4OCwgNTMsIDE1OV0sXG4gICAgICAgIFs1NSwgMTY1LCA3MywgOCwgMjQsIDcyLCA1LCAxNV0sXG4gICAgICAgIFs0NSwgMTM1LCAxOTQsIDE2MCwgNTgsIDE3NCwgMTAwLCA4OV1cbiAgICBdO1xuICAgIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSA9IDA7XG4gICAgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9CID0gMTtcbiAgICBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0MgPSAyO1xuICAgIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCA9IDM7XG4gICAgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9FID0gNDtcbiAgICBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0YgPSA1O1xuICAgIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRURVJOX1NFUVVFTkNFUyA9IFtcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9CLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0JdLFxuICAgICAgICBbUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0MsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9EXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9FLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0IsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9DXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9FLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0IsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9ELCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0ZdLFxuICAgICAgICBbUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0UsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9ELCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0UsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9GXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0IsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9DLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0MsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9EXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0IsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9DLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0MsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9FLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0VdLFxuICAgICAgICBbUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0EsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9CLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0MsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQywgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9ELCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0UsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9GXSxcbiAgICAgICAgW1JTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQSwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9BLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0IsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfQiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9DLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0QsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRCwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9FLCBSU1NFeHBhbmRlZFJlYWRlci5GSU5ERVJfUEFUX0UsIFJTU0V4cGFuZGVkUmVhZGVyLkZJTkRFUl9QQVRfRiwgUlNTRXhwYW5kZWRSZWFkZXIuRklOREVSX1BBVF9GXSxcbiAgICBdO1xuICAgIFJTU0V4cGFuZGVkUmVhZGVyLk1BWF9QQUlSUyA9IDExO1xuXG4gICAgY2xhc3MgUGFpciBleHRlbmRzIERhdGFDaGFyYWN0ZXIge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgY2hlY2tzdW1Qb3J0aW9uLCBmaW5kZXJQYXR0ZXJuKSB7XG4gICAgICAgICAgICBzdXBlcih2YWx1ZSwgY2hlY2tzdW1Qb3J0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5maW5kZXJQYXR0ZXJuID0gZmluZGVyUGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBnZXRGaW5kZXJQYXR0ZXJuKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZGVyUGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBnZXRDb3VudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGluY3JlbWVudENvdW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgUlNTMTRSZWFkZXIgZXh0ZW5kcyBBYnN0cmFjdFJTU1JlYWRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMucG9zc2libGVMZWZ0UGFpcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucG9zc2libGVSaWdodFBhaXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBoaW50cykge1xuICAgICAgICAgICAgY29uc3QgbGVmdFBhaXIgPSB0aGlzLmRlY29kZVBhaXIocm93LCBmYWxzZSwgcm93TnVtYmVyLCBoaW50cyk7XG4gICAgICAgICAgICBSU1MxNFJlYWRlci5hZGRPclRhbGx5KHRoaXMucG9zc2libGVMZWZ0UGFpcnMsIGxlZnRQYWlyKTtcbiAgICAgICAgICAgIHJvdy5yZXZlcnNlKCk7XG4gICAgICAgICAgICBsZXQgcmlnaHRQYWlyID0gdGhpcy5kZWNvZGVQYWlyKHJvdywgdHJ1ZSwgcm93TnVtYmVyLCBoaW50cyk7XG4gICAgICAgICAgICBSU1MxNFJlYWRlci5hZGRPclRhbGx5KHRoaXMucG9zc2libGVSaWdodFBhaXJzLCByaWdodFBhaXIpO1xuICAgICAgICAgICAgcm93LnJldmVyc2UoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGxlZnQgb2YgdGhpcy5wb3NzaWJsZUxlZnRQYWlycykge1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0LmdldENvdW50KCkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJpZ2h0IG9mIHRoaXMucG9zc2libGVSaWdodFBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmlnaHQuZ2V0Q291bnQoKSA+IDEgJiYgUlNTMTRSZWFkZXIuY2hlY2tDaGVja3N1bShsZWZ0LCByaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUlNTMTRSZWFkZXIuY29uc3RydWN0UmVzdWx0KGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBhZGRPclRhbGx5KHBvc3NpYmxlUGFpcnMsIHBhaXIpIHtcbiAgICAgICAgICAgIGlmIChwYWlyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IG90aGVyIG9mIHBvc3NpYmxlUGFpcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3RoZXIuZ2V0VmFsdWUoKSA9PT0gcGFpci5nZXRWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG90aGVyLmluY3JlbWVudENvdW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIHBvc3NpYmxlUGFpcnMucHVzaChwYWlyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIHRoaXMucG9zc2libGVMZWZ0UGFpcnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMucG9zc2libGVSaWdodFBhaXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNvbnN0cnVjdFJlc3VsdChsZWZ0UGFpciwgcmlnaHRQYWlyKSB7XG4gICAgICAgICAgICBsZXQgc3ltYm9sVmFsdWUgPSA0NTM3MDc3ICogbGVmdFBhaXIuZ2V0VmFsdWUoKSArIHJpZ2h0UGFpci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgbGV0IHRleHQgPSBuZXcgU3RyaW5nKHN5bWJvbFZhbHVlKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTMgLSB0ZXh0Lmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoJzAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQodGV4dCk7XG4gICAgICAgICAgICBsZXQgY2hlY2tEaWdpdCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBidWZmZXIuY2hhckF0KGkpLmNoYXJDb2RlQXQoMCkgLSAnMCcuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgICAgICBjaGVja0RpZ2l0ICs9ICgoaSAmIDB4MDEpID09PSAwKSA/IDMgKiBkaWdpdCA6IGRpZ2l0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tEaWdpdCA9IDEwIC0gKGNoZWNrRGlnaXQgJSAxMCk7XG4gICAgICAgICAgICBpZiAoY2hlY2tEaWdpdCA9PT0gMTApIHtcbiAgICAgICAgICAgICAgICBjaGVja0RpZ2l0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoY2hlY2tEaWdpdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGxldCBsZWZ0UG9pbnRzID0gbGVmdFBhaXIuZ2V0RmluZGVyUGF0dGVybigpLmdldFJlc3VsdFBvaW50cygpO1xuICAgICAgICAgICAgbGV0IHJpZ2h0UG9pbnRzID0gcmlnaHRQYWlyLmdldEZpbmRlclBhdHRlcm4oKS5nZXRSZXN1bHRQb2ludHMoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0KGJ1ZmZlci50b1N0cmluZygpLCBudWxsLCAwLCBbbGVmdFBvaW50c1swXSwgbGVmdFBvaW50c1sxXSwgcmlnaHRQb2ludHNbMF0sIHJpZ2h0UG9pbnRzWzFdXSwgQmFyY29kZUZvcm1hdCQxLlJTU18xNCwgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjaGVja0NoZWNrc3VtKGxlZnRQYWlyLCByaWdodFBhaXIpIHtcbiAgICAgICAgICAgIGxldCBjaGVja1ZhbHVlID0gKGxlZnRQYWlyLmdldENoZWNrc3VtUG9ydGlvbigpICsgMTYgKiByaWdodFBhaXIuZ2V0Q2hlY2tzdW1Qb3J0aW9uKCkpICUgNzk7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0Q2hlY2tWYWx1ZSA9IDkgKiBsZWZ0UGFpci5nZXRGaW5kZXJQYXR0ZXJuKCkuZ2V0VmFsdWUoKSArIHJpZ2h0UGFpci5nZXRGaW5kZXJQYXR0ZXJuKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRDaGVja1ZhbHVlID4gNzIpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRDaGVja1ZhbHVlLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0Q2hlY2tWYWx1ZSA+IDgpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRDaGVja1ZhbHVlLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tWYWx1ZSA9PT0gdGFyZ2V0Q2hlY2tWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVQYWlyKHJvdywgcmlnaHQsIHJvd051bWJlciwgaGludHMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0RW5kID0gdGhpcy5maW5kRmluZGVyUGF0dGVybihyb3csIHJpZ2h0KTtcbiAgICAgICAgICAgICAgICBsZXQgcGF0dGVybiA9IHRoaXMucGFyc2VGb3VuZEZpbmRlclBhdHRlcm4ocm93LCByb3dOdW1iZXIsIHJpZ2h0LCBzdGFydEVuZCk7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdFBvaW50Q2FsbGJhY2sgPSBoaW50cyA9PSBudWxsID8gbnVsbCA6IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0UG9pbnRDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSAoc3RhcnRFbmRbMF0gKyBzdGFydEVuZFsxXSkgLyAyLjA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGlzIGFjdHVhbGx5IHJldmVyc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSByb3cuZ2V0U2l6ZSgpIC0gMSAtIGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChuZXcgUmVzdWx0UG9pbnQoY2VudGVyLCByb3dOdW1iZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG91dHNpZGUgPSB0aGlzLmRlY29kZURhdGFDaGFyYWN0ZXIocm93LCBwYXR0ZXJuLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zaWRlID0gdGhpcy5kZWNvZGVEYXRhQ2hhcmFjdGVyKHJvdywgcGF0dGVybiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFpcigxNTk3ICogb3V0c2lkZS5nZXRWYWx1ZSgpICsgaW5zaWRlLmdldFZhbHVlKCksIG91dHNpZGUuZ2V0Q2hlY2tzdW1Qb3J0aW9uKCkgKyA0ICogaW5zaWRlLmdldENoZWNrc3VtUG9ydGlvbigpLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVEYXRhQ2hhcmFjdGVyKHJvdywgcGF0dGVybiwgb3V0c2lkZUNoYXIpIHtcbiAgICAgICAgICAgIGxldCBjb3VudGVycyA9IHRoaXMuZ2V0RGF0YUNoYXJhY3RlckNvdW50ZXJzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvdW50ZXJzLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgY291bnRlcnNbeF0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG91dHNpZGVDaGFyKSB7XG4gICAgICAgICAgICAgICAgT25lRFJlYWRlci5yZWNvcmRQYXR0ZXJuSW5SZXZlcnNlKHJvdywgcGF0dGVybi5nZXRTdGFydEVuZCgpWzBdLCBjb3VudGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBPbmVEUmVhZGVyLnJlY29yZFBhdHRlcm4ocm93LCBwYXR0ZXJuLmdldFN0YXJ0RW5kKClbMV0gKyAxLCBjb3VudGVycyk7XG4gICAgICAgICAgICAgICAgLy8gcmV2ZXJzZSBpdFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gY291bnRlcnMubGVuZ3RoIC0gMTsgaSA8IGo7IGkrKywgai0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gY291bnRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2ldID0gY291bnRlcnNbal07XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2pdID0gdGVtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbnVtTW9kdWxlcyA9IG91dHNpZGVDaGFyID8gMTYgOiAxNTtcbiAgICAgICAgICAgIGxldCBlbGVtZW50V2lkdGggPSBNYXRoVXRpbHMuc3VtKG5ldyBJbnQzMkFycmF5KGNvdW50ZXJzKSkgLyBudW1Nb2R1bGVzO1xuICAgICAgICAgICAgbGV0IG9kZENvdW50cyA9IHRoaXMuZ2V0T2RkQ291bnRzKCk7XG4gICAgICAgICAgICBsZXQgZXZlbkNvdW50cyA9IHRoaXMuZ2V0RXZlbkNvdW50cygpO1xuICAgICAgICAgICAgbGV0IG9kZFJvdW5kaW5nRXJyb3JzID0gdGhpcy5nZXRPZGRSb3VuZGluZ0Vycm9ycygpO1xuICAgICAgICAgICAgbGV0IGV2ZW5Sb3VuZGluZ0Vycm9ycyA9IHRoaXMuZ2V0RXZlblJvdW5kaW5nRXJyb3JzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gY291bnRlcnNbaV0gLyBlbGVtZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gTWF0aC5mbG9vcih2YWx1ZSArIDAuNSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50IDwgMSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID4gOCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBNYXRoLmZsb29yKGkgLyAyKTtcbiAgICAgICAgICAgICAgICBpZiAoKGkgJiAweDAxKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvZGRDb3VudHNbb2Zmc2V0XSA9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICBvZGRSb3VuZGluZ0Vycm9yc1tvZmZzZXRdID0gdmFsdWUgLSBjb3VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW5Db3VudHNbb2Zmc2V0XSA9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICBldmVuUm91bmRpbmdFcnJvcnNbb2Zmc2V0XSA9IHZhbHVlIC0gY291bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGp1c3RPZGRFdmVuQ291bnRzKG91dHNpZGVDaGFyLCBudW1Nb2R1bGVzKTtcbiAgICAgICAgICAgIGxldCBvZGRTdW0gPSAwO1xuICAgICAgICAgICAgbGV0IG9kZENoZWNrc3VtUG9ydGlvbiA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gb2RkQ291bnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgb2RkQ2hlY2tzdW1Qb3J0aW9uICo9IDk7XG4gICAgICAgICAgICAgICAgb2RkQ2hlY2tzdW1Qb3J0aW9uICs9IG9kZENvdW50c1tpXTtcbiAgICAgICAgICAgICAgICBvZGRTdW0gKz0gb2RkQ291bnRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGV2ZW5DaGVja3N1bVBvcnRpb24gPSAwO1xuICAgICAgICAgICAgbGV0IGV2ZW5TdW0gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV2ZW5Db3VudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBldmVuQ2hlY2tzdW1Qb3J0aW9uICo9IDk7XG4gICAgICAgICAgICAgICAgZXZlbkNoZWNrc3VtUG9ydGlvbiArPSBldmVuQ291bnRzW2ldO1xuICAgICAgICAgICAgICAgIGV2ZW5TdW0gKz0gZXZlbkNvdW50c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGVja3N1bVBvcnRpb24gPSBvZGRDaGVja3N1bVBvcnRpb24gKyAzICogZXZlbkNoZWNrc3VtUG9ydGlvbjtcbiAgICAgICAgICAgIGlmIChvdXRzaWRlQ2hhcikge1xuICAgICAgICAgICAgICAgIGlmICgob2RkU3VtICYgMHgwMSkgIT09IDAgfHwgb2RkU3VtID4gMTIgfHwgb2RkU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gKDEyIC0gb2RkU3VtKSAvIDI7XG4gICAgICAgICAgICAgICAgbGV0IG9kZFdpZGVzdCA9IFJTUzE0UmVhZGVyLk9VVFNJREVfT0REX1dJREVTVFtncm91cF07XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW5XaWRlc3QgPSA5IC0gb2RkV2lkZXN0O1xuICAgICAgICAgICAgICAgIGxldCB2T2RkID0gUlNTVXRpbHMuZ2V0UlNTdmFsdWUob2RkQ291bnRzLCBvZGRXaWRlc3QsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBsZXQgdkV2ZW4gPSBSU1NVdGlscy5nZXRSU1N2YWx1ZShldmVuQ291bnRzLCBldmVuV2lkZXN0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBsZXQgdEV2ZW4gPSBSU1MxNFJlYWRlci5PVVRTSURFX0VWRU5fVE9UQUxfU1VCU0VUW2dyb3VwXTtcbiAgICAgICAgICAgICAgICBsZXQgZ1N1bSA9IFJTUzE0UmVhZGVyLk9VVFNJREVfR1NVTVtncm91cF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ2hhcmFjdGVyKHZPZGQgKiB0RXZlbiArIHZFdmVuICsgZ1N1bSwgY2hlY2tzdW1Qb3J0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgoZXZlblN1bSAmIDB4MDEpICE9PSAwIHx8IGV2ZW5TdW0gPiAxMCB8fCBldmVuU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gKDEwIC0gZXZlblN1bSkgLyAyO1xuICAgICAgICAgICAgICAgIGxldCBvZGRXaWRlc3QgPSBSU1MxNFJlYWRlci5JTlNJREVfT0REX1dJREVTVFtncm91cF07XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW5XaWRlc3QgPSA5IC0gb2RkV2lkZXN0O1xuICAgICAgICAgICAgICAgIGxldCB2T2RkID0gUlNTVXRpbHMuZ2V0UlNTdmFsdWUob2RkQ291bnRzLCBvZGRXaWRlc3QsIHRydWUpO1xuICAgICAgICAgICAgICAgIGxldCB2RXZlbiA9IFJTU1V0aWxzLmdldFJTU3ZhbHVlKGV2ZW5Db3VudHMsIGV2ZW5XaWRlc3QsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBsZXQgdE9kZCA9IFJTUzE0UmVhZGVyLklOU0lERV9PRERfVE9UQUxfU1VCU0VUW2dyb3VwXTtcbiAgICAgICAgICAgICAgICBsZXQgZ1N1bSA9IFJTUzE0UmVhZGVyLklOU0lERV9HU1VNW2dyb3VwXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFDaGFyYWN0ZXIodkV2ZW4gKiB0T2RkICsgdk9kZCArIGdTdW0sIGNoZWNrc3VtUG9ydGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluZEZpbmRlclBhdHRlcm4ocm93LCByaWdodEZpbmRlclBhdHRlcm4pIHtcbiAgICAgICAgICAgIGxldCBjb3VudGVycyA9IHRoaXMuZ2V0RGVjb2RlRmluZGVyQ291bnRlcnMoKTtcbiAgICAgICAgICAgIGNvdW50ZXJzWzBdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzFdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHJvdy5nZXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgaXNXaGl0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHJvd09mZnNldCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAocm93T2Zmc2V0IDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpc1doaXRlID0gIXJvdy5nZXQocm93T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRGaW5kZXJQYXR0ZXJuID09PSBpc1doaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdpbGwgZW5jb3VudGVyIHdoaXRlIGZpcnN0IHdoZW4gc2VhcmNoaW5nIGZvciByaWdodCBmaW5kZXIgcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm93T2Zmc2V0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY291bnRlclBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuU3RhcnQgPSByb3dPZmZzZXQ7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gcm93T2Zmc2V0OyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuZ2V0KHgpICE9PSBpc1doaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyUG9zaXRpb24gPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBYnN0cmFjdFJTU1JlYWRlci5pc0ZpbmRlclBhdHRlcm4oY291bnRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtwYXR0ZXJuU3RhcnQsIHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVyblN0YXJ0ICs9IGNvdW50ZXJzWzBdICsgY291bnRlcnNbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1swXSA9IGNvdW50ZXJzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbMV0gPSBjb3VudGVyc1szXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzWzJdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzWzNdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJQb3NpdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZUZvdW5kRmluZGVyUGF0dGVybihyb3csIHJvd051bWJlciwgcmlnaHQsIHN0YXJ0RW5kKSB7XG4gICAgICAgICAgICAvLyBBY3R1YWxseSB3ZSBmb3VuZCBlbGVtZW50cyAyLTVcbiAgICAgICAgICAgIGxldCBmaXJzdElzQmxhY2sgPSByb3cuZ2V0KHN0YXJ0RW5kWzBdKTtcbiAgICAgICAgICAgIGxldCBmaXJzdEVsZW1lbnRTdGFydCA9IHN0YXJ0RW5kWzBdIC0gMTtcbiAgICAgICAgICAgIC8vIExvY2F0ZSBlbGVtZW50IDFcbiAgICAgICAgICAgIHdoaWxlIChmaXJzdEVsZW1lbnRTdGFydCA+PSAwICYmIGZpcnN0SXNCbGFjayAhPT0gcm93LmdldChmaXJzdEVsZW1lbnRTdGFydCkpIHtcbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTdGFydC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlyc3RFbGVtZW50U3RhcnQrKztcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q291bnRlciA9IHN0YXJ0RW5kWzBdIC0gZmlyc3RFbGVtZW50U3RhcnQ7XG4gICAgICAgICAgICAvLyBNYWtlICdjb3VudGVycycgaG9sZCAxLTRcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ZXJzID0gdGhpcy5nZXREZWNvZGVGaW5kZXJDb3VudGVycygpO1xuICAgICAgICAgICAgY29uc3QgY29weSA9IG5ldyBJbnQzMkFycmF5KGNvdW50ZXJzLmxlbmd0aCk7XG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KGNvdW50ZXJzLCAwLCBjb3B5LCAxLCBjb3VudGVycy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvcHlbMF0gPSBmaXJzdENvdW50ZXI7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyc2VGaW5kZXJWYWx1ZShjb3B5LCBSU1MxNFJlYWRlci5GSU5ERVJfUEFUVEVSTlMpO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gZmlyc3RFbGVtZW50U3RhcnQ7XG4gICAgICAgICAgICBsZXQgZW5kID0gc3RhcnRFbmRbMV07XG4gICAgICAgICAgICBpZiAocmlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyByb3cgaXMgYWN0dWFsbHkgcmV2ZXJzZWRcbiAgICAgICAgICAgICAgICBzdGFydCA9IHJvdy5nZXRTaXplKCkgLSAxIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgZW5kID0gcm93LmdldFNpemUoKSAtIDEgLSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm4odmFsdWUsIFtmaXJzdEVsZW1lbnRTdGFydCwgc3RhcnRFbmRbMV1dLCBzdGFydCwgZW5kLCByb3dOdW1iZXIpO1xuICAgICAgICB9XG4gICAgICAgIGFkanVzdE9kZEV2ZW5Db3VudHMob3V0c2lkZUNoYXIsIG51bU1vZHVsZXMpIHtcbiAgICAgICAgICAgIGxldCBvZGRTdW0gPSBNYXRoVXRpbHMuc3VtKG5ldyBJbnQzMkFycmF5KHRoaXMuZ2V0T2RkQ291bnRzKCkpKTtcbiAgICAgICAgICAgIGxldCBldmVuU3VtID0gTWF0aFV0aWxzLnN1bShuZXcgSW50MzJBcnJheSh0aGlzLmdldEV2ZW5Db3VudHMoKSkpO1xuICAgICAgICAgICAgbGV0IGluY3JlbWVudE9kZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGRlY3JlbWVudE9kZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGluY3JlbWVudEV2ZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBkZWNyZW1lbnRFdmVuID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAob3V0c2lkZUNoYXIpIHtcbiAgICAgICAgICAgICAgICBpZiAob2RkU3VtID4gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50T2RkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2RkU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlblN1bSA+IDEyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY3JlbWVudEV2ZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVuU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFdmVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2RkU3VtID4gMTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50T2RkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2RkU3VtIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlblN1bSA+IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY3JlbWVudEV2ZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVuU3VtIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRFdmVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbWlzbWF0Y2ggPSBvZGRTdW0gKyBldmVuU3VtIC0gbnVtTW9kdWxlcztcbiAgICAgICAgICAgIGxldCBvZGRQYXJpdHlCYWQgPSAob2RkU3VtICYgMHgwMSkgPT09IChvdXRzaWRlQ2hhciA/IDEgOiAwKTtcbiAgICAgICAgICAgIGxldCBldmVuUGFyaXR5QmFkID0gKGV2ZW5TdW0gJiAweDAxKSA9PT0gMTtcbiAgICAgICAgICAgIGlmIChtaXNtYXRjaCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChvZGRQYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlY3JlbWVudE9kZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlY3JlbWVudEV2ZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1pc21hdGNoID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChvZGRQYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE9kZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudEV2ZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1pc21hdGNoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9kZFBhcml0eUJhZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW5QYXJpdHlCYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEJvdGggYmFkXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZGRTdW0gPCBldmVuU3VtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNyZW1lbnRPZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RXZlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVuUGFyaXR5QmFkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvIVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluY3JlbWVudE9kZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWNyZW1lbnRPZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEFic3RyYWN0UlNTUmVhZGVyLmluY3JlbWVudCh0aGlzLmdldE9kZENvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY3JlbWVudE9kZCkge1xuICAgICAgICAgICAgICAgIEFic3RyYWN0UlNTUmVhZGVyLmRlY3JlbWVudCh0aGlzLmdldE9kZENvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluY3JlbWVudEV2ZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVjcmVtZW50RXZlbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQWJzdHJhY3RSU1NSZWFkZXIuaW5jcmVtZW50KHRoaXMuZ2V0RXZlbkNvdW50cygpLCB0aGlzLmdldE9kZFJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY3JlbWVudEV2ZW4pIHtcbiAgICAgICAgICAgICAgICBBYnN0cmFjdFJTU1JlYWRlci5kZWNyZW1lbnQodGhpcy5nZXRFdmVuQ291bnRzKCksIHRoaXMuZ2V0RXZlblJvdW5kaW5nRXJyb3JzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFJTUzE0UmVhZGVyLk9VVFNJREVfRVZFTl9UT1RBTF9TVUJTRVQgPSBbMSwgMTAsIDM0LCA3MCwgMTI2XTtcbiAgICBSU1MxNFJlYWRlci5JTlNJREVfT0REX1RPVEFMX1NVQlNFVCA9IFs0LCAyMCwgNDgsIDgxXTtcbiAgICBSU1MxNFJlYWRlci5PVVRTSURFX0dTVU0gPSBbMCwgMTYxLCA5NjEsIDIwMTUsIDI3MTVdO1xuICAgIFJTUzE0UmVhZGVyLklOU0lERV9HU1VNID0gWzAsIDMzNiwgMTAzNiwgMTUxNl07XG4gICAgUlNTMTRSZWFkZXIuT1VUU0lERV9PRERfV0lERVNUID0gWzgsIDYsIDQsIDMsIDFdO1xuICAgIFJTUzE0UmVhZGVyLklOU0lERV9PRERfV0lERVNUID0gWzIsIDQsIDYsIDhdO1xuICAgIFJTUzE0UmVhZGVyLkZJTkRFUl9QQVRURVJOUyA9IFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCA4LCAyLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMywgNSwgNSwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDMsIDcsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFszLCAxLCA5LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMiwgNywgNCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzIsIDUsIDYsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCAzLCA4LCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgNSwgNywgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDMsIDksIDFdKSxcbiAgICBdO1xuXG4gICAgLyoqXG4gICAgICogQGF1dGhvciBEYW5pZWwgU3dpdGtpbiA8ZHN3aXRraW5AZ29vZ2xlLmNvbT5cbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIE11bHRpRm9ybWF0T25lRFJlYWRlciBleHRlbmRzIE9uZURSZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihoaW50cywgdmVyYm9zZSkge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVhZGVycyA9IFtdO1xuICAgICAgICAgICAgdGhpcy52ZXJib3NlID0gKHZlcmJvc2UgPT09IHRydWUpO1xuICAgICAgICAgICAgY29uc3QgcG9zc2libGVGb3JtYXRzID0gIWhpbnRzID8gbnVsbCA6IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLlBPU1NJQkxFX0ZPUk1BVFMpO1xuICAgICAgICAgICAgY29uc3QgdXNlQ29kZTM5Q2hlY2tEaWdpdCA9IGhpbnRzICYmIGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLkFTU1VNRV9DT0RFXzM5X0NIRUNLX0RJR0lUKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHBvc3NpYmxlRm9ybWF0cykge1xuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLkVBTl8xMykgfHxcbiAgICAgICAgICAgICAgICAgICAgcG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5VUENfQSkgfHxcbiAgICAgICAgICAgICAgICAgICAgcG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5FQU5fOCkgfHxcbiAgICAgICAgICAgICAgICAgICAgcG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5VUENfRSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IE11bHRpRm9ybWF0VVBDRUFOUmVhZGVyKGhpbnRzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLkNPREVfMzkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBDb2RlMzlSZWFkZXIodXNlQ29kZTM5Q2hlY2tEaWdpdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiAocG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQuQ09ERV85MykpIHtcbiAgICAgICAgICAgICAgICAvLyAgICB0aGlzLnJlYWRlcnMucHVzaChuZXcgQ29kZTkzUmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5DT0RFXzEyOCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IENvZGUxMjhSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLklURikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IElURlJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgKHBvc3NpYmxlRm9ybWF0cy5pbmNsdWRlcyhCYXJjb2RlRm9ybWF0LkNPREFCQVIpKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IENvZGFCYXJSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLlJTU18xNCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IFJTUzE0UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zc2libGVGb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5SU1NfRVhQQU5ERUQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBSU1NFeHBhbmRlZFJlYWRlcih0aGlzLnZlcmJvc2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENhc2Ugd2hlbiBubyBoaW50cyB3ZXJlIHByb3ZpZGVkIC0+IGFkZCBhbGwuXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IE11bHRpRm9ybWF0VVBDRUFOUmVhZGVyKGhpbnRzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IENvZGUzOVJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlYWRlcnMucHVzaChuZXcgQ29kYUJhclJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlYWRlcnMucHVzaChuZXcgQ29kZTkzUmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBNdWx0aUZvcm1hdFVQQ0VBTlJlYWRlcihoaW50cykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBDb2RlMTI4UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBJVEZSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXJzLnB1c2gobmV3IFJTUzE0UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVycy5wdXNoKG5ldyBSU1NFeHBhbmRlZFJlYWRlcih0aGlzLnZlcmJvc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBAT3ZlcnJpZGVcbiAgICAgICAgZGVjb2RlUm93KHJvd051bWJlciwgcm93LCBoaW50cykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFkZXJzW2ldLmRlY29kZVJvdyhyb3dOdW1iZXIsIHJvdywgaGludHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAocmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGludWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBAT3ZlcnJpZGVcbiAgICAgICAgcmVzZXQoKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlcnMuZm9yRWFjaChyZWFkZXIgPT4gcmVhZGVyLnJlc2V0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgTW92aW5nIHRvIEB6eGluZy9icm93c2VyXG4gICAgICpcbiAgICAgKiBCYXJjb2RlIHJlYWRlciByZWFkZXIgdG8gdXNlIGZyb20gYnJvd3Nlci5cbiAgICAgKi9cbiAgICBjbGFzcyBCcm93c2VyQmFyY29kZVJlYWRlciBleHRlbmRzIEJyb3dzZXJDb2RlUmVhZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQnJvd3NlckJhcmNvZGVSZWFkZXIuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZUJldHdlZW5TY2Fuc01pbGxpcz01MDBdIHRoZSB0aW1lIGRlbGF5IGJldHdlZW4gc3Vic2VxdWVudCBkZWNvZGUgdHJpZXNcbiAgICAgICAgICogQHBhcmFtIHtNYXA8RGVjb2RlSGludFR5cGUsIGFueT59IGhpbnRzXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcih0aW1lQmV0d2VlblNjYW5zTWlsbGlzID0gNTAwLCBoaW50cykge1xuICAgICAgICAgICAgc3VwZXIobmV3IE11bHRpRm9ybWF0T25lRFJlYWRlcihoaW50cyksIHRpbWVCZXR3ZWVuU2NhbnNNaWxsaXMsIGhpbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGEgc2V0IG9mIGVycm9yLWNvcnJlY3Rpb24gYmxvY2tzIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4gTW9zdCB2ZXJzaW9ucyB3aWxsXG4gICAgICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yXG4gICAgICogZWFjaCBzZXQgb2YgYmxvY2tzLiBJdCBhbHNvIGhvbGRzIHRoZSBudW1iZXIgb2YgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMgcGVyIGJsb2NrIHNpbmNlIGl0XG4gICAgICogd2lsbCBiZSB0aGUgc2FtZSBhY3Jvc3MgYWxsIGJsb2NrcyB3aXRoaW4gb25lIHZlcnNpb24uPC9wPlxuICAgICAqL1xuICAgIGNsYXNzIEVDQmxvY2tzIHtcbiAgICAgICAgY29uc3RydWN0b3IoZWNDb2Rld29yZHMsIGVjQmxvY2tzMSwgZWNCbG9ja3MyKSB7XG4gICAgICAgICAgICB0aGlzLmVjQ29kZXdvcmRzID0gZWNDb2Rld29yZHM7XG4gICAgICAgICAgICB0aGlzLmVjQmxvY2tzID0gW2VjQmxvY2tzMV07XG4gICAgICAgICAgICBlY0Jsb2NrczIgJiYgdGhpcy5lY0Jsb2Nrcy5wdXNoKGVjQmxvY2tzMik7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RUNDb2Rld29yZHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lY0NvZGV3b3JkcztcbiAgICAgICAgfVxuICAgICAgICBnZXRFQ0Jsb2NrcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyB0aGUgcGFyYW1ldGVycyBmb3Igb25lIGVycm9yLWNvcnJlY3Rpb24gYmxvY2sgaW4gb25lIHN5bWJvbCB2ZXJzaW9uLlxuICAgICAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlXG4gICAgICogcGFyYW1ldGVycyBpcyB1c2VkIGNvbnNlY3V0aXZlbHkgaW4gdGhlIERhdGEgTWF0cml4IGNvZGUgdmVyc2lvbidzIGZvcm1hdC48L3A+XG4gICAgICovXG4gICAgY2xhc3MgRUNCIHtcbiAgICAgICAgY29uc3RydWN0b3IoY291bnQsIGRhdGFDb2Rld29yZHMpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNvZGV3b3JkcyA9IGRhdGFDb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICBnZXREYXRhQ29kZXdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUNvZGV3b3JkcztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgVmVyc2lvbiBvYmplY3QgZW5jYXBzdWxhdGVzIGF0dHJpYnV0ZXMgYWJvdXQgYSBwYXJ0aWN1bGFyXG4gICAgICogc2l6ZSBEYXRhIE1hdHJpeCBDb2RlLlxuICAgICAqXG4gICAgICogQGF1dGhvciBiYnJvd25AZ29vZ2xlLmNvbSAoQnJpYW4gQnJvd24pXG4gICAgICovXG4gICAgY2xhc3MgVmVyc2lvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZlcnNpb25OdW1iZXIsIHN5bWJvbFNpemVSb3dzLCBzeW1ib2xTaXplQ29sdW1ucywgZGF0YVJlZ2lvblNpemVSb3dzLCBkYXRhUmVnaW9uU2l6ZUNvbHVtbnMsIGVjQmxvY2tzKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uTnVtYmVyO1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xTaXplUm93cyA9IHN5bWJvbFNpemVSb3dzO1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xTaXplQ29sdW1ucyA9IHN5bWJvbFNpemVDb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy5kYXRhUmVnaW9uU2l6ZVJvd3MgPSBkYXRhUmVnaW9uU2l6ZVJvd3M7XG4gICAgICAgICAgICB0aGlzLmRhdGFSZWdpb25TaXplQ29sdW1ucyA9IGRhdGFSZWdpb25TaXplQ29sdW1ucztcbiAgICAgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrcztcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIGNvZGV3b3Jkc1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGVjQ29kZXdvcmRzID0gZWNCbG9ja3MuZ2V0RUNDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGVjYkFycmF5ID0gZWNCbG9ja3MuZ2V0RUNCbG9ja3MoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGVjQmxvY2sgb2YgZWNiQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCkgKiAoZWNCbG9jay5nZXREYXRhQ29kZXdvcmRzKCkgKyBlY0NvZGV3b3Jkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvdGFsQ29kZXdvcmRzID0gdG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0VmVyc2lvbk51bWJlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnNpb25OdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U3ltYm9sU2l6ZVJvd3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zeW1ib2xTaXplUm93cztcbiAgICAgICAgfVxuICAgICAgICBnZXRTeW1ib2xTaXplQ29sdW1ucygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN5bWJvbFNpemVDb2x1bW5zO1xuICAgICAgICB9XG4gICAgICAgIGdldERhdGFSZWdpb25TaXplUm93cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFSZWdpb25TaXplUm93cztcbiAgICAgICAgfVxuICAgICAgICBnZXREYXRhUmVnaW9uU2l6ZUNvbHVtbnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhUmVnaW9uU2l6ZUNvbHVtbnM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0VG90YWxDb2Rld29yZHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbENvZGV3b3JkcztcbiAgICAgICAgfVxuICAgICAgICBnZXRFQ0Jsb2NrcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5EZWR1Y2VzIHZlcnNpb24gaW5mb3JtYXRpb24gZnJvbSBEYXRhIE1hdHJpeCBkaW1lbnNpb25zLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG51bVJvd3MgTnVtYmVyIG9mIHJvd3MgaW4gbW9kdWxlc1xuICAgICAgICAgKiBAcGFyYW0gbnVtQ29sdW1ucyBOdW1iZXIgb2YgY29sdW1ucyBpbiBtb2R1bGVzXG4gICAgICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBEYXRhIE1hdHJpeCBDb2RlIG9mIHRob3NlIGRpbWVuc2lvbnNcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9ucyBkbyBjb3JyZXNwb25kIHRvIGEgdmFsaWQgRGF0YSBNYXRyaXggc2l6ZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldFZlcnNpb25Gb3JEaW1lbnNpb25zKG51bVJvd3MsIG51bUNvbHVtbnMpIHtcbiAgICAgICAgICAgIGlmICgobnVtUm93cyAmIDB4MDEpICE9PSAwIHx8IChudW1Db2x1bW5zICYgMHgwMSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB2ZXJzaW9uIG9mIFZlcnNpb24uVkVSU0lPTlMpIHtcbiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbi5zeW1ib2xTaXplUm93cyA9PT0gbnVtUm93cyAmJiB2ZXJzaW9uLnN5bWJvbFNpemVDb2x1bW5zID09PSBudW1Db2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAgQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgSVNPIDE2MDIyOjIwMDYgNS41LjEgVGFibGUgN1xuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGJ1aWxkVmVyc2lvbnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDEsIDEwLCAxMCwgOCwgOCwgbmV3IEVDQmxvY2tzKDUsIG5ldyBFQ0IoMSwgMykpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigyLCAxMiwgMTIsIDEwLCAxMCwgbmV3IEVDQmxvY2tzKDcsIG5ldyBFQ0IoMSwgNSkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigzLCAxNCwgMTQsIDEyLCAxMiwgbmV3IEVDQmxvY2tzKDEwLCBuZXcgRUNCKDEsIDgpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oNCwgMTYsIDE2LCAxNCwgMTQsIG5ldyBFQ0Jsb2NrcygxMiwgbmV3IEVDQigxLCAxMikpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbig1LCAxOCwgMTgsIDE2LCAxNiwgbmV3IEVDQmxvY2tzKDE0LCBuZXcgRUNCKDEsIDE4KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDYsIDIwLCAyMCwgMTgsIDE4LCBuZXcgRUNCbG9ja3MoMTgsIG5ldyBFQ0IoMSwgMjIpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oNywgMjIsIDIyLCAyMCwgMjAsIG5ldyBFQ0Jsb2NrcygyMCwgbmV3IEVDQigxLCAzMCkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbig4LCAyNCwgMjQsIDIyLCAyMiwgbmV3IEVDQmxvY2tzKDI0LCBuZXcgRUNCKDEsIDM2KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDksIDI2LCAyNiwgMjQsIDI0LCBuZXcgRUNCbG9ja3MoMjgsIG5ldyBFQ0IoMSwgNDQpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMTAsIDMyLCAzMiwgMTQsIDE0LCBuZXcgRUNCbG9ja3MoMzYsIG5ldyBFQ0IoMSwgNjIpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMTEsIDM2LCAzNiwgMTYsIDE2LCBuZXcgRUNCbG9ja3MoNDIsIG5ldyBFQ0IoMSwgODYpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMTIsIDQwLCA0MCwgMTgsIDE4LCBuZXcgRUNCbG9ja3MoNDgsIG5ldyBFQ0IoMSwgMTE0KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDEzLCA0NCwgNDQsIDIwLCAyMCwgbmV3IEVDQmxvY2tzKDU2LCBuZXcgRUNCKDEsIDE0NCkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigxNCwgNDgsIDQ4LCAyMiwgMjIsIG5ldyBFQ0Jsb2Nrcyg2OCwgbmV3IEVDQigxLCAxNzQpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMTUsIDUyLCA1MiwgMjQsIDI0LCBuZXcgRUNCbG9ja3MoNDIsIG5ldyBFQ0IoMiwgMTAyKSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDE2LCA2NCwgNjQsIDE0LCAxNCwgbmV3IEVDQmxvY2tzKDU2LCBuZXcgRUNCKDIsIDE0MCkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigxNywgNzIsIDcyLCAxNiwgMTYsIG5ldyBFQ0Jsb2NrcygzNiwgbmV3IEVDQig0LCA5MikpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigxOCwgODAsIDgwLCAxOCwgMTgsIG5ldyBFQ0Jsb2Nrcyg0OCwgbmV3IEVDQig0LCAxMTQpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMTksIDg4LCA4OCwgMjAsIDIwLCBuZXcgRUNCbG9ja3MoNTYsIG5ldyBFQ0IoNCwgMTQ0KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDIwLCA5NiwgOTYsIDIyLCAyMiwgbmV3IEVDQmxvY2tzKDY4LCBuZXcgRUNCKDQsIDE3NCkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigyMSwgMTA0LCAxMDQsIDI0LCAyNCwgbmV3IEVDQmxvY2tzKDU2LCBuZXcgRUNCKDYsIDEzNikpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigyMiwgMTIwLCAxMjAsIDE4LCAxOCwgbmV3IEVDQmxvY2tzKDY4LCBuZXcgRUNCKDYsIDE3NSkpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigyMywgMTMyLCAxMzIsIDIwLCAyMCwgbmV3IEVDQmxvY2tzKDYyLCBuZXcgRUNCKDgsIDE2MykpKSxcbiAgICAgICAgICAgICAgICBuZXcgVmVyc2lvbigyNCwgMTQ0LCAxNDQsIDIyLCAyMiwgbmV3IEVDQmxvY2tzKDYyLCBuZXcgRUNCKDgsIDE1NiksIG5ldyBFQ0IoMiwgMTU1KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDI1LCA4LCAxOCwgNiwgMTYsIG5ldyBFQ0Jsb2Nrcyg3LCBuZXcgRUNCKDEsIDUpKSksXG4gICAgICAgICAgICAgICAgbmV3IFZlcnNpb24oMjYsIDgsIDMyLCA2LCAxNCwgbmV3IEVDQmxvY2tzKDExLCBuZXcgRUNCKDEsIDEwKSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDI3LCAxMiwgMjYsIDEwLCAyNCwgbmV3IEVDQmxvY2tzKDE0LCBuZXcgRUNCKDEsIDE2KSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDI4LCAxMiwgMzYsIDEwLCAxNiwgbmV3IEVDQmxvY2tzKDE4LCBuZXcgRUNCKDEsIDIyKSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDI5LCAxNiwgMzYsIDE0LCAxNiwgbmV3IEVDQmxvY2tzKDI0LCBuZXcgRUNCKDEsIDMyKSkpLFxuICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uKDMwLCAxNiwgNDgsIDE0LCAyMiwgbmV3IEVDQmxvY2tzKDI4LCBuZXcgRUNCKDEsIDQ5KSkpXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFZlcnNpb24uVkVSU0lPTlMgPSBWZXJzaW9uLmJ1aWxkVmVyc2lvbnMoKTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogQGF1dGhvciBiYnJvd25AZ29vZ2xlLmNvbSAoQnJpYW4gQnJvd24pXG4gICAgICovXG4gICAgY2xhc3MgQml0TWF0cml4UGFyc2VyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBiaXRNYXRyaXgge0BsaW5rIEJpdE1hdHJpeH0gdG8gcGFyc2VcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIDwgOCBvciA+IDE0NCBvciBub3QgMCBtb2QgMlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoYml0TWF0cml4KSB7XG4gICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBpZiAoZGltZW5zaW9uIDwgOCB8fCBkaW1lbnNpb24gPiAxNDQgfHwgKGRpbWVuc2lvbiAmIDB4MDEpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52ZXJzaW9uID0gQml0TWF0cml4UGFyc2VyLnJlYWRWZXJzaW9uKGJpdE1hdHJpeCk7XG4gICAgICAgICAgICB0aGlzLm1hcHBpbmdCaXRNYXRyaXggPSB0aGlzLmV4dHJhY3REYXRhUmVnaW9uKGJpdE1hdHJpeCk7XG4gICAgICAgICAgICB0aGlzLnJlYWRNYXBwaW5nTWF0cml4ID0gbmV3IEJpdE1hdHJpeCh0aGlzLm1hcHBpbmdCaXRNYXRyaXguZ2V0V2lkdGgoKSwgdGhpcy5tYXBwaW5nQml0TWF0cml4LmdldEhlaWdodCgpKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRWZXJzaW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+Q3JlYXRlcyB0aGUgdmVyc2lvbiBvYmplY3QgYmFzZWQgb24gdGhlIGRpbWVuc2lvbiBvZiB0aGUgb3JpZ2luYWwgYml0IG1hdHJpeCBmcm9tXG4gICAgICAgICAqIHRoZSBkYXRhbWF0cml4IGNvZGUuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD5TZWUgSVNPIDE2MDIyOjIwMDYgVGFibGUgNyAtIEVDQyAyMDAgc3ltYm9sIGF0dHJpYnV0ZXM8L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBiaXRNYXRyaXggT3JpZ2luYWwge0BsaW5rIEJpdE1hdHJpeH0gaW5jbHVkaW5nIGFsaWdubWVudCBwYXR0ZXJuc1xuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBWZXJzaW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBEYXRhIE1hdHJpeCBDb2RlJ3MgXCJ2ZXJzaW9uXCJcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIG1hcHBpbmcgbWF0cml4IGFyZSBub3QgdmFsaWRcbiAgICAgICAgICogRGF0YSBNYXRyaXggZGltZW5zaW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyByZWFkVmVyc2lvbihiaXRNYXRyaXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bVJvd3MgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCBudW1Db2x1bW5zID0gYml0TWF0cml4LmdldFdpZHRoKCk7XG4gICAgICAgICAgICByZXR1cm4gVmVyc2lvbi5nZXRWZXJzaW9uRm9yRGltZW5zaW9ucyhudW1Sb3dzLCBudW1Db2x1bW5zKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+UmVhZHMgdGhlIGJpdHMgaW4gdGhlIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGluZyB0aGUgbWFwcGluZyBtYXRyaXggKE5vIGFsaWdubWVudCBwYXR0ZXJucylcbiAgICAgICAgICogaW4gdGhlIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdGl0dXRlIHRoZSBjb2Rld29yZHMgYnl0ZXMgY29udGFpbmVkIHdpdGhpbiB0aGVcbiAgICAgICAgICogRGF0YSBNYXRyaXggQ29kZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gYnl0ZXMgZW5jb2RlZCB3aXRoaW4gdGhlIERhdGEgTWF0cml4IENvZGVcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIGV4YWN0IG51bWJlciBvZiBieXRlcyBleHBlY3RlZCBpcyBub3QgcmVhZFxuICAgICAgICAgKi9cbiAgICAgICAgcmVhZENvZGV3b3JkcygpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBJbnQ4QXJyYXkodGhpcy52ZXJzaW9uLmdldFRvdGFsQ29kZXdvcmRzKCkpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdE9mZnNldCA9IDA7XG4gICAgICAgICAgICBsZXQgcm93ID0gNDtcbiAgICAgICAgICAgIGxldCBjb2x1bW4gPSAwO1xuICAgICAgICAgICAgY29uc3QgbnVtUm93cyA9IHRoaXMubWFwcGluZ0JpdE1hdHJpeC5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG51bUNvbHVtbnMgPSB0aGlzLm1hcHBpbmdCaXRNYXRyaXguZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGxldCBjb3JuZXIxUmVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNvcm5lcjJSZWFkID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgY29ybmVyM1JlYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjb3JuZXI0UmVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gUmVhZCBhbGwgb2YgdGhlIGNvZGV3b3Jkc1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoZSBmb3VyIGNvcm5lciBjYXNlc1xuICAgICAgICAgICAgICAgIGlmICgocm93ID09PSBudW1Sb3dzKSAmJiAoY29sdW1uID09PSAwKSAmJiAhY29ybmVyMVJlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdE9mZnNldCsrXSA9IHRoaXMucmVhZENvcm5lcjEobnVtUm93cywgbnVtQ29sdW1ucykgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICByb3cgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvcm5lcjFSZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHJvdyA9PT0gbnVtUm93cyAtIDIpICYmIChjb2x1bW4gPT09IDApICYmICgobnVtQ29sdW1ucyAmIDB4MDMpICE9PSAwKSAmJiAhY29ybmVyMlJlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdE9mZnNldCsrXSA9IHRoaXMucmVhZENvcm5lcjIobnVtUm93cywgbnVtQ29sdW1ucykgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICByb3cgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvcm5lcjJSZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHJvdyA9PT0gbnVtUm93cyArIDQpICYmIChjb2x1bW4gPT09IDIpICYmICgobnVtQ29sdW1ucyAmIDB4MDcpID09PSAwKSAmJiAhY29ybmVyM1JlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdE9mZnNldCsrXSA9IHRoaXMucmVhZENvcm5lcjMobnVtUm93cywgbnVtQ29sdW1ucykgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICByb3cgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvcm5lcjNSZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHJvdyA9PT0gbnVtUm93cyAtIDIpICYmIChjb2x1bW4gPT09IDApICYmICgobnVtQ29sdW1ucyAmIDB4MDcpID09PSA0KSAmJiAhY29ybmVyNFJlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdE9mZnNldCsrXSA9IHRoaXMucmVhZENvcm5lcjQobnVtUm93cywgbnVtQ29sdW1ucykgJiAweGZmO1xuICAgICAgICAgICAgICAgICAgICByb3cgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uICs9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNvcm5lcjRSZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN3ZWVwIHVwd2FyZCBkaWFnb25hbGx5IHRvIHRoZSByaWdodFxuICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdyA8IG51bVJvd3MpICYmIChjb2x1bW4gPj0gMCkgJiYgIXRoaXMucmVhZE1hcHBpbmdNYXRyaXguZ2V0KGNvbHVtbiwgcm93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSB0aGlzLnJlYWRVdGFoKHJvdywgY29sdW1uLCBudW1Sb3dzLCBudW1Db2x1bW5zKSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiArPSAyO1xuICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgocm93ID49IDApICYmIChjb2x1bW4gPCBudW1Db2x1bW5zKSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdyArPSAxO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gKz0gMztcbiAgICAgICAgICAgICAgICAgICAgLy8gU3dlZXAgZG93bndhcmQgZGlhZ29uYWxseSB0byB0aGUgbGVmdFxuICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJvdyA+PSAwKSAmJiAoY29sdW1uIDwgbnVtQ29sdW1ucykgJiYgIXRoaXMucmVhZE1hcHBpbmdNYXRyaXguZ2V0KGNvbHVtbiwgcm93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSB0aGlzLnJlYWRVdGFoKHJvdywgY29sdW1uLCBudW1Sb3dzLCBudW1Db2x1bW5zKSAmIDB4ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiAtPSAyO1xuICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgocm93IDwgbnVtUm93cykgJiYgKGNvbHVtbiA+PSAwKSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdyArPSAzO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICgocm93IDwgbnVtUm93cykgfHwgKGNvbHVtbiA8IG51bUNvbHVtbnMpKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRPZmZzZXQgIT09IHRoaXMudmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+UmVhZHMgYSBiaXQgb2YgdGhlIG1hcHBpbmcgbWF0cml4IGFjY291bnRpbmcgZm9yIGJvdW5kYXJ5IHdyYXBwaW5nLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvdyBSb3cgdG8gcmVhZCBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHBhcmFtIGNvbHVtbiBDb2x1bW4gdG8gcmVhZCBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHBhcmFtIG51bVJvd3MgTnVtYmVyIG9mIHJvd3MgaW4gdGhlIG1hcHBpbmcgbWF0cml4XG4gICAgICAgICAqIEBwYXJhbSBudW1Db2x1bW5zIE51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBtYXBwaW5nIG1hdHJpeFxuICAgICAgICAgKiBAcmV0dXJuIHZhbHVlIG9mIHRoZSBnaXZlbiBiaXQgaW4gdGhlIG1hcHBpbmcgbWF0cml4XG4gICAgICAgICAqL1xuICAgICAgICByZWFkTW9kdWxlKHJvdywgY29sdW1uLCBudW1Sb3dzLCBudW1Db2x1bW5zKSB7XG4gICAgICAgICAgICAvLyBBZGp1c3QgdGhlIHJvdyBhbmQgY29sdW1uIGluZGljZXMgYmFzZWQgb24gYm91bmRhcnkgd3JhcHBpbmdcbiAgICAgICAgICAgIGlmIChyb3cgPCAwKSB7XG4gICAgICAgICAgICAgICAgcm93ICs9IG51bVJvd3M7XG4gICAgICAgICAgICAgICAgY29sdW1uICs9IDQgLSAoKG51bVJvd3MgKyA0KSAmIDB4MDcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbHVtbiA8IDApIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gKz0gbnVtQ29sdW1ucztcbiAgICAgICAgICAgICAgICByb3cgKz0gNCAtICgobnVtQ29sdW1ucyArIDQpICYgMHgwNyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlYWRNYXBwaW5nTWF0cml4LnNldChjb2x1bW4sIHJvdyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBwaW5nQml0TWF0cml4LmdldChjb2x1bW4sIHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlJlYWRzIHRoZSA4IGJpdHMgb2YgdGhlIHN0YW5kYXJkIFV0YWgtc2hhcGVkIHBhdHRlcm4uPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD5TZWUgSVNPIDE2MDIyOjIwMDYsIDUuOC4xIEZpZ3VyZSA2PC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcm93IEN1cnJlbnQgcm93IGluIHRoZSBtYXBwaW5nIG1hdHJpeCwgYW5jaG9yZWQgYXQgdGhlIDh0aCBiaXQgKExTQikgb2YgdGhlIHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIGNvbHVtbiBDdXJyZW50IGNvbHVtbiBpbiB0aGUgbWFwcGluZyBtYXRyaXgsIGFuY2hvcmVkIGF0IHRoZSA4dGggYml0IChMU0IpIG9mIHRoZSBwYXR0ZXJuXG4gICAgICAgICAqIEBwYXJhbSBudW1Sb3dzIE51bWJlciBvZiByb3dzIGluIHRoZSBtYXBwaW5nIG1hdHJpeFxuICAgICAgICAgKiBAcGFyYW0gbnVtQ29sdW1ucyBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHJldHVybiBieXRlIGZyb20gdGhlIHV0YWggc2hhcGVcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRVdGFoKHJvdywgY29sdW1uLCBudW1Sb3dzLCBudW1Db2x1bW5zKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudEJ5dGUgPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZShyb3cgLSAyLCBjb2x1bW4gLSAyLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUocm93IC0gMiwgY29sdW1uIC0gMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKHJvdyAtIDEsIGNvbHVtbiAtIDIsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZShyb3cgLSAxLCBjb2x1bW4gLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUocm93IC0gMSwgY29sdW1uLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUocm93LCBjb2x1bW4gLSAyLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUocm93LCBjb2x1bW4gLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUocm93LCBjb2x1bW4sIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Qnl0ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+UmVhZHMgdGhlIDggYml0cyBvZiB0aGUgc3BlY2lhbCBjb3JuZXIgY29uZGl0aW9uIDEuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD5TZWUgSVNPIDE2MDIyOjIwMDYsIEZpZ3VyZSBGLjM8L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBudW1Sb3dzIE51bWJlciBvZiByb3dzIGluIHRoZSBtYXBwaW5nIG1hdHJpeFxuICAgICAgICAgKiBAcGFyYW0gbnVtQ29sdW1ucyBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHJldHVybiBieXRlIGZyb20gdGhlIENvcm5lciBjb25kaXRpb24gMVxuICAgICAgICAgKi9cbiAgICAgICAgcmVhZENvcm5lcjEobnVtUm93cywgbnVtQ29sdW1ucykge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRCeXRlID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUobnVtUm93cyAtIDEsIDAsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZShudW1Sb3dzIC0gMSwgMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKG51bVJvd3MgLSAxLCAyLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMCwgbnVtQ29sdW1ucyAtIDIsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgwLCBudW1Db2x1bW5zIC0gMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDEsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMiwgbnVtQ29sdW1ucyAtIDEsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgzLCBudW1Db2x1bW5zIC0gMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRCeXRlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5SZWFkcyB0aGUgOCBiaXRzIG9mIHRoZSBzcGVjaWFsIGNvcm5lciBjb25kaXRpb24gMi48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIDxwPlNlZSBJU08gMTYwMjI6MjAwNiwgRmlndXJlIEYuNDwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG51bVJvd3MgTnVtYmVyIG9mIHJvd3MgaW4gdGhlIG1hcHBpbmcgbWF0cml4XG4gICAgICAgICAqIEBwYXJhbSBudW1Db2x1bW5zIE51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBtYXBwaW5nIG1hdHJpeFxuICAgICAgICAgKiBAcmV0dXJuIGJ5dGUgZnJvbSB0aGUgQ29ybmVyIGNvbmRpdGlvbiAyXG4gICAgICAgICAqL1xuICAgICAgICByZWFkQ29ybmVyMihudW1Sb3dzLCBudW1Db2x1bW5zKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudEJ5dGUgPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZShudW1Sb3dzIC0gMywgMCwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKG51bVJvd3MgLSAyLCAwLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUobnVtUm93cyAtIDEsIDAsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgwLCBudW1Db2x1bW5zIC0gNCwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDAsIG51bUNvbHVtbnMgLSAzLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMCwgbnVtQ29sdW1ucyAtIDIsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgwLCBudW1Db2x1bW5zIC0gMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDEsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEJ5dGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlJlYWRzIHRoZSA4IGJpdHMgb2YgdGhlIHNwZWNpYWwgY29ybmVyIGNvbmRpdGlvbiAzLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogPHA+U2VlIElTTyAxNjAyMjoyMDA2LCBGaWd1cmUgRi41PC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbnVtUm93cyBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHBhcmFtIG51bUNvbHVtbnMgTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG1hcHBpbmcgbWF0cml4XG4gICAgICAgICAqIEByZXR1cm4gYnl0ZSBmcm9tIHRoZSBDb3JuZXIgY29uZGl0aW9uIDNcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRDb3JuZXIzKG51bVJvd3MsIG51bUNvbHVtbnMpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Qnl0ZSA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKG51bVJvd3MgLSAxLCAwLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUobnVtUm93cyAtIDEsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMCwgbnVtQ29sdW1ucyAtIDMsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgwLCBudW1Db2x1bW5zIC0gMiwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDAsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMSwgbnVtQ29sdW1ucyAtIDMsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgxLCBudW1Db2x1bW5zIC0gMiwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDEsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEJ5dGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlJlYWRzIHRoZSA4IGJpdHMgb2YgdGhlIHNwZWNpYWwgY29ybmVyIGNvbmRpdGlvbiA0LjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogPHA+U2VlIElTTyAxNjAyMjoyMDA2LCBGaWd1cmUgRi42PC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbnVtUm93cyBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgbWFwcGluZyBtYXRyaXhcbiAgICAgICAgICogQHBhcmFtIG51bUNvbHVtbnMgTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG1hcHBpbmcgbWF0cml4XG4gICAgICAgICAqIEByZXR1cm4gYnl0ZSBmcm9tIHRoZSBDb3JuZXIgY29uZGl0aW9uIDRcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRDb3JuZXI0KG51bVJvd3MsIG51bUNvbHVtbnMpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Qnl0ZSA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKG51bVJvd3MgLSAzLCAwLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUobnVtUm93cyAtIDIsIDAsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZShudW1Sb3dzIC0gMSwgMCwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDAsIG51bUNvbHVtbnMgLSAyLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMCwgbnVtQ29sdW1ucyAtIDEsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vZHVsZSgxLCBudW1Db2x1bW5zIC0gMSwgbnVtUm93cywgbnVtQ29sdW1ucykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSB8PSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJ5dGUgPDw9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9kdWxlKDIsIG51bUNvbHVtbnMgLSAxLCBudW1Sb3dzLCBudW1Db2x1bW5zKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Qnl0ZSA8PD0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb2R1bGUoMywgbnVtQ29sdW1ucyAtIDEsIG51bVJvd3MsIG51bUNvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Qnl0ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+RXh0cmFjdHMgdGhlIGRhdGEgcmVnaW9uIGZyb20gYSB7QGxpbmsgQml0TWF0cml4fSB0aGF0IGNvbnRhaW5zXG4gICAgICAgICAqIGFsaWdubWVudCBwYXR0ZXJucy48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBiaXRNYXRyaXggT3JpZ2luYWwge0BsaW5rIEJpdE1hdHJpeH0gd2l0aCBhbGlnbm1lbnQgcGF0dGVybnNcbiAgICAgICAgICogQHJldHVybiBCaXRNYXRyaXggdGhhdCBoYXMgdGhlIGFsaWdubWVudCBwYXR0ZXJucyByZW1vdmVkXG4gICAgICAgICAqL1xuICAgICAgICBleHRyYWN0RGF0YVJlZ2lvbihiaXRNYXRyaXgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN5bWJvbFNpemVSb3dzID0gdGhpcy52ZXJzaW9uLmdldFN5bWJvbFNpemVSb3dzKCk7XG4gICAgICAgICAgICBjb25zdCBzeW1ib2xTaXplQ29sdW1ucyA9IHRoaXMudmVyc2lvbi5nZXRTeW1ib2xTaXplQ29sdW1ucygpO1xuICAgICAgICAgICAgaWYgKGJpdE1hdHJpeC5nZXRIZWlnaHQoKSAhPT0gc3ltYm9sU2l6ZVJvd3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdEaW1lbnNpb24gb2YgYml0TWF0cml4IG11c3QgbWF0Y2ggdGhlIHZlcnNpb24gc2l6ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0YVJlZ2lvblNpemVSb3dzID0gdGhpcy52ZXJzaW9uLmdldERhdGFSZWdpb25TaXplUm93cygpO1xuICAgICAgICAgICAgY29uc3QgZGF0YVJlZ2lvblNpemVDb2x1bW5zID0gdGhpcy52ZXJzaW9uLmdldERhdGFSZWdpb25TaXplQ29sdW1ucygpO1xuICAgICAgICAgICAgY29uc3QgbnVtRGF0YVJlZ2lvbnNSb3cgPSBzeW1ib2xTaXplUm93cyAvIGRhdGFSZWdpb25TaXplUm93cyB8IDA7XG4gICAgICAgICAgICBjb25zdCBudW1EYXRhUmVnaW9uc0NvbHVtbiA9IHN5bWJvbFNpemVDb2x1bW5zIC8gZGF0YVJlZ2lvblNpemVDb2x1bW5zIHwgMDtcbiAgICAgICAgICAgIGNvbnN0IHNpemVEYXRhUmVnaW9uUm93ID0gbnVtRGF0YVJlZ2lvbnNSb3cgKiBkYXRhUmVnaW9uU2l6ZVJvd3M7XG4gICAgICAgICAgICBjb25zdCBzaXplRGF0YVJlZ2lvbkNvbHVtbiA9IG51bURhdGFSZWdpb25zQ29sdW1uICogZGF0YVJlZ2lvblNpemVDb2x1bW5zO1xuICAgICAgICAgICAgY29uc3QgYml0TWF0cml4V2l0aG91dEFsaWdubWVudCA9IG5ldyBCaXRNYXRyaXgoc2l6ZURhdGFSZWdpb25Db2x1bW4sIHNpemVEYXRhUmVnaW9uUm93KTtcbiAgICAgICAgICAgIGZvciAobGV0IGRhdGFSZWdpb25Sb3cgPSAwOyBkYXRhUmVnaW9uUm93IDwgbnVtRGF0YVJlZ2lvbnNSb3c7ICsrZGF0YVJlZ2lvblJvdykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFSZWdpb25Sb3dPZmZzZXQgPSBkYXRhUmVnaW9uUm93ICogZGF0YVJlZ2lvblNpemVSb3dzO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGRhdGFSZWdpb25Db2x1bW4gPSAwOyBkYXRhUmVnaW9uQ29sdW1uIDwgbnVtRGF0YVJlZ2lvbnNDb2x1bW47ICsrZGF0YVJlZ2lvbkNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhUmVnaW9uQ29sdW1uT2Zmc2V0ID0gZGF0YVJlZ2lvbkNvbHVtbiAqIGRhdGFSZWdpb25TaXplQ29sdW1ucztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhUmVnaW9uU2l6ZVJvd3M7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZFJvd09mZnNldCA9IGRhdGFSZWdpb25Sb3cgKiAoZGF0YVJlZ2lvblNpemVSb3dzICsgMikgKyAxICsgaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlUm93T2Zmc2V0ID0gZGF0YVJlZ2lvblJvd09mZnNldCArIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFSZWdpb25TaXplQ29sdW1uczsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZENvbHVtbk9mZnNldCA9IGRhdGFSZWdpb25Db2x1bW4gKiAoZGF0YVJlZ2lvblNpemVDb2x1bW5zICsgMikgKyAxICsgajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYml0TWF0cml4LmdldChyZWFkQ29sdW1uT2Zmc2V0LCByZWFkUm93T2Zmc2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3cml0ZUNvbHVtbk9mZnNldCA9IGRhdGFSZWdpb25Db2x1bW5PZmZzZXQgKyBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXhXaXRob3V0QWxpZ25tZW50LnNldCh3cml0ZUNvbHVtbk9mZnNldCwgd3JpdGVSb3dPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiaXRNYXRyaXhXaXRob3V0QWxpZ25tZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGEgYmxvY2sgb2YgZGF0YSB3aXRoaW4gYSBEYXRhIE1hdHJpeCBDb2RlLiBEYXRhIE1hdHJpeCBDb2RlcyBtYXkgc3BsaXQgdGhlaXIgZGF0YSBpbnRvXG4gICAgICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaFxuICAgICAqIGlzIHJlcHJlc2VudGVkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBiYnJvd25AZ29vZ2xlLmNvbSAoQnJpYW4gQnJvd24pXG4gICAgICovXG4gICAgY2xhc3MgRGF0YUJsb2NrIHtcbiAgICAgICAgY29uc3RydWN0b3IobnVtRGF0YUNvZGV3b3JkcywgY29kZXdvcmRzKSB7XG4gICAgICAgICAgICB0aGlzLm51bURhdGFDb2Rld29yZHMgPSBudW1EYXRhQ29kZXdvcmRzO1xuICAgICAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPldoZW4gRGF0YSBNYXRyaXggQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFjdHVhbGx5IGludGVybGVhdmUgdGhlIGJ5dGVzIG9mIGVhY2ggb2YgdGhlbS5cbiAgICAgICAgICogVGhhdCBpcywgdGhlIGZpcnN0IGJ5dGUgb2YgZGF0YSBibG9jayAxIHRvIG4gaXMgd3JpdHRlbiwgdGhlbiB0aGUgc2Vjb25kIGJ5dGVzLCBhbmQgc28gb24uIFRoaXNcbiAgICAgICAgICogbWV0aG9kIHdpbGwgc2VwYXJhdGUgdGhlIGRhdGEgaW50byBvcmlnaW5hbCBibG9ja3MuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcmF3Q29kZXdvcmRzIGJ5dGVzIGFzIHJlYWQgZGlyZWN0bHkgZnJvbSB0aGUgRGF0YSBNYXRyaXggQ29kZVxuICAgICAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIG9mIHRoZSBEYXRhIE1hdHJpeCBDb2RlXG4gICAgICAgICAqIEByZXR1cm4gRGF0YUJsb2NrcyBjb250YWluaW5nIG9yaWdpbmFsIGJ5dGVzLCBcImRlLWludGVybGVhdmVkXCIgZnJvbSByZXByZXNlbnRhdGlvbiBpbiB0aGVcbiAgICAgICAgICogICAgICAgICBEYXRhIE1hdHJpeCBDb2RlXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0RGF0YUJsb2NrcyhyYXdDb2Rld29yZHMsIHZlcnNpb24pIHtcbiAgICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvblxuICAgICAgICAgICAgY29uc3QgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzKCk7XG4gICAgICAgICAgICAvLyBGaXJzdCBjb3VudCB0aGUgdG90YWwgbnVtYmVyIG9mIGRhdGEgYmxvY2tzXG4gICAgICAgICAgICBsZXQgdG90YWxCbG9ja3MgPSAwO1xuICAgICAgICAgICAgY29uc3QgZWNCbG9ja0FycmF5ID0gZWNCbG9ja3MuZ2V0RUNCbG9ja3MoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGVjQmxvY2sgb2YgZWNCbG9ja0FycmF5KSB7XG4gICAgICAgICAgICAgICAgdG90YWxCbG9ja3MgKz0gZWNCbG9jay5nZXRDb3VudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHNcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7XG4gICAgICAgICAgICBsZXQgbnVtUmVzdWx0QmxvY2tzID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGVjQmxvY2sgb2YgZWNCbG9ja0FycmF5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1EYXRhQ29kZXdvcmRzID0gZWNCbG9jay5nZXREYXRhQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bUJsb2NrQ29kZXdvcmRzID0gZWNCbG9ja3MuZ2V0RUNDb2Rld29yZHMoKSArIG51bURhdGFDb2Rld29yZHM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtudW1SZXN1bHRCbG9ja3MrK10gPSBuZXcgRGF0YUJsb2NrKG51bURhdGFDb2Rld29yZHMsIG5ldyBVaW50OEFycmF5KG51bUJsb2NrQ29kZXdvcmRzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWxsIGJsb2NrcyBoYXZlIHRoZSBzYW1lIGFtb3VudCBvZiBkYXRhLCBleGNlcHQgdGhhdCB0aGUgbGFzdCBuXG4gICAgICAgICAgICAvLyAod2hlcmUgbiBtYXkgYmUgMCkgaGF2ZSAxIGxlc3MgYnl0ZS4gRmlndXJlIG91dCB3aGVyZSB0aGVzZSBzdGFydC5cbiAgICAgICAgICAgIC8vIFRPRE8oYmJyb3duKTogVGhlcmUgaXMgb25seSBvbmUgY2FzZSB3aGVyZSB0aGVyZSBpcyBhIGRpZmZlcmVuY2UgZm9yIERhdGEgTWF0cml4IGZvciBzaXplIDE0NFxuICAgICAgICAgICAgY29uc3QgbG9uZ2VyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDtcbiAgICAgICAgICAgIC8vIGludCBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSBsb25nZXJCbG9ja3NUb3RhbENvZGV3b3JkcyAtIDE7XG4gICAgICAgICAgICBjb25zdCBsb25nZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzID0gbG9uZ2VyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3JkcygpO1xuICAgICAgICAgICAgY29uc3Qgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBsb25nZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzIC0gMTtcbiAgICAgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IHNob3J0ZXIgZm9yIDE0NCBtYXRyaXhcbiAgICAgICAgICAgIC8vIGZpcnN0IGZpbGwgb3V0IGFzIG1hbnkgZWxlbWVudHMgYXMgYWxsIG9mIHRoZW0gaGF2ZSBtaW51cyAxXG4gICAgICAgICAgICBsZXQgcmF3Q29kZXdvcmRzT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2pdLmNvZGV3b3Jkc1tpXSA9IHJhd0NvZGV3b3Jkc1tyYXdDb2Rld29yZHNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmlsbCBvdXQgdGhlIGxhc3QgZGF0YSBibG9jayBpbiB0aGUgbG9uZ2VyIG9uZXNcbiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxWZXJzaW9uID0gdmVyc2lvbi5nZXRWZXJzaW9uTnVtYmVyKCkgPT09IDI0O1xuICAgICAgICAgICAgY29uc3QgbnVtTG9uZ2VyQmxvY2tzID0gc3BlY2lhbFZlcnNpb24gPyA4IDogbnVtUmVzdWx0QmxvY2tzO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1Mb25nZXJCbG9ja3M7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbbG9uZ2VyQmxvY2tzTnVtRGF0YUNvZGV3b3JkcyAtIDFdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdyBhZGQgaW4gZXJyb3IgY29ycmVjdGlvbiBibG9ja3NcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHJlc3VsdFswXS5jb2Rld29yZHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGxvbmdlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgak9mZnNldCA9IHNwZWNpYWxWZXJzaW9uID8gKGogKyA4KSAlIG51bVJlc3VsdEJsb2NrcyA6IGo7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlPZmZzZXQgPSBzcGVjaWFsVmVyc2lvbiAmJiBqT2Zmc2V0ID4gNyA/IGkgLSAxIDogaTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2pPZmZzZXRdLmNvZGV3b3Jkc1tpT2Zmc2V0XSA9IHJhd0NvZGV3b3Jkc1tyYXdDb2Rld29yZHNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJhd0NvZGV3b3Jkc09mZnNldCAhPT0gcmF3Q29kZXdvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TnVtRGF0YUNvZGV3b3JkcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q29kZXdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZVxuICAgICAqIG51bWJlciBvZiBiaXRzIHJlYWQgaXMgbm90IG9mdGVuIGEgbXVsdGlwbGUgb2YgOC48L3A+XG4gICAgICpcbiAgICAgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheVxuICAgICAqIGl0IHBhc3NlZCBpbiwgaW4gd2hpY2ggY2FzZSBhbGwgYmV0cyBhcmUgb2ZmLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgQml0U291cmNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBieXRlcyBieXRlcyBmcm9tIHdoaWNoIHRoaXMgd2lsbCByZWFkIGJpdHMuIEJpdHMgd2lsbCBiZSByZWFkIGZyb20gdGhlIGZpcnN0IGJ5dGUgZmlyc3QuXG4gICAgICAgICAqIEJpdHMgYXJlIHJlYWQgd2l0aGluIGEgYnl0ZSBmcm9tIG1vc3Qtc2lnbmlmaWNhbnQgdG8gbGVhc3Qtc2lnbmlmaWNhbnQgYml0LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoYnl0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYnl0ZXMgPSBieXRlcztcbiAgICAgICAgICAgIHRoaXMuYnl0ZU9mZnNldCA9IDA7XG4gICAgICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Qml0T2Zmc2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYml0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Qnl0ZU9mZnNldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ5dGVPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWRcbiAgICAgICAgICogQHJldHVybiBpbnQgcmVwcmVzZW50aW5nIHRoZSBiaXRzIHJlYWQuIFRoZSBiaXRzIHdpbGwgYXBwZWFyIGFzIHRoZSBsZWFzdC1zaWduaWZpY2FudFxuICAgICAgICAgKiAgICAgICAgIGJpdHMgb2YgdGhlIGludFxuICAgICAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlXG4gICAgICAgICAqL1xuICAgICAgICByZWFkQml0cyhudW1CaXRzIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChudW1CaXRzIDwgMSB8fCBudW1CaXRzID4gMzIgfHwgbnVtQml0cyA+IHRoaXMuYXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCcnICsgbnVtQml0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICAgICAgICAgIGxldCBiaXRPZmZzZXQgPSB0aGlzLmJpdE9mZnNldDtcbiAgICAgICAgICAgIGxldCBieXRlT2Zmc2V0ID0gdGhpcy5ieXRlT2Zmc2V0O1xuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSB0aGlzLmJ5dGVzO1xuICAgICAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlXG4gICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpdHNMZWZ0ID0gOCAtIGJpdE9mZnNldDtcbiAgICAgICAgICAgICAgICBjb25zdCB0b1JlYWQgPSBudW1CaXRzIDwgYml0c0xlZnQgPyBudW1CaXRzIDogYml0c0xlZnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYml0c1RvTm90UmVhZCA9IGJpdHNMZWZ0IC0gdG9SZWFkO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSAoMHhGRiA+PiAoOCAtIHRvUmVhZCkpIDw8IGJpdHNUb05vdFJlYWQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGJ5dGVzW2J5dGVPZmZzZXRdICYgbWFzaykgPj4gYml0c1RvTm90UmVhZDtcbiAgICAgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDtcbiAgICAgICAgICAgICAgICBiaXRPZmZzZXQgKz0gdG9SZWFkO1xuICAgICAgICAgICAgICAgIGlmIChiaXRPZmZzZXQgPT09IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnl0ZU9mZnNldCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5leHQgcmVhZCB3aG9sZSBieXRlc1xuICAgICAgICAgICAgaWYgKG51bUJpdHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IDgpIHwgKGJ5dGVzW2J5dGVPZmZzZXRdICYgMHhGRik7XG4gICAgICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQrKztcbiAgICAgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5IHJlYWQgYSBwYXJ0aWFsIGJ5dGVcbiAgICAgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKHJlc3VsdCA8PCBudW1CaXRzKSB8ICgoYnl0ZXNbYnl0ZU9mZnNldF0gJiBtYXNrKSA+PiBiaXRzVG9Ob3RSZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgYml0T2Zmc2V0ICs9IG51bUJpdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iaXRPZmZzZXQgPSBiaXRPZmZzZXQ7XG4gICAgICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0O1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgKi9cbiAgICAgICAgYXZhaWxhYmxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIDggKiAodGhpcy5ieXRlcy5sZW5ndGggLSB0aGlzLmJ5dGVPZmZzZXQpIC0gdGhpcy5iaXRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgTW9kZTtcbiAgICAoZnVuY3Rpb24gKE1vZGUpIHtcbiAgICAgICAgTW9kZVtNb2RlW1wiUEFEX0VOQ09ERVwiXSA9IDBdID0gXCJQQURfRU5DT0RFXCI7XG4gICAgICAgIE1vZGVbTW9kZVtcIkFTQ0lJX0VOQ09ERVwiXSA9IDFdID0gXCJBU0NJSV9FTkNPREVcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiQzQwX0VOQ09ERVwiXSA9IDJdID0gXCJDNDBfRU5DT0RFXCI7XG4gICAgICAgIE1vZGVbTW9kZVtcIlRFWFRfRU5DT0RFXCJdID0gM10gPSBcIlRFWFRfRU5DT0RFXCI7XG4gICAgICAgIE1vZGVbTW9kZVtcIkFOU0lYMTJfRU5DT0RFXCJdID0gNF0gPSBcIkFOU0lYMTJfRU5DT0RFXCI7XG4gICAgICAgIE1vZGVbTW9kZVtcIkVESUZBQ1RfRU5DT0RFXCJdID0gNV0gPSBcIkVESUZBQ1RfRU5DT0RFXCI7XG4gICAgICAgIE1vZGVbTW9kZVtcIkJBU0UyNTZfRU5DT0RFXCJdID0gNl0gPSBcIkJBU0UyNTZfRU5DT0RFXCI7XG4gICAgfSkoTW9kZSB8fCAoTW9kZSA9IHt9KSk7XG4gICAgLyoqXG4gICAgICogPHA+RGF0YSBNYXRyaXggQ29kZXMgY2FuIGVuY29kZSB0ZXh0IGFzIGJpdHMgaW4gb25lIG9mIHNldmVyYWwgbW9kZXMsIGFuZCBjYW4gdXNlIG11bHRpcGxlIG1vZGVzXG4gICAgICogaW4gb25lIERhdGEgTWF0cml4IENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+XG4gICAgICpcbiAgICAgKiA8cD5TZWUgSVNPIDE2MDIyOjIwMDYsIDUuMi4xIC0gNS4yLjkuMjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgYmJyb3duQGdvb2dsZS5jb20gKEJyaWFuIEJyb3duKVxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciB7XG4gICAgICAgIHN0YXRpYyBkZWNvZGUoYnl0ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSBuZXcgQml0U291cmNlKGJ5dGVzKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRUcmFpbGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVTZWdtZW50cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgbGV0IG1vZGUgPSBNb2RlLkFTQ0lJX0VOQ09ERTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gTW9kZS5BU0NJSV9FTkNPREUpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IHRoaXMuZGVjb2RlQXNjaWlTZWdtZW50KGJpdHMsIHJlc3VsdCwgcmVzdWx0VHJhaWxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZS5DNDBfRU5DT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlQzQwU2VnbWVudChiaXRzLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlLlRFWFRfRU5DT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlVGV4dFNlZ21lbnQoYml0cywgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZS5BTlNJWDEyX0VOQ09ERTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY29kZUFuc2lYMTJTZWdtZW50KGJpdHMsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGUuRURJRkFDVF9FTkNPREU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNvZGVFZGlmYWN0U2VnbWVudChiaXRzLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlLkJBU0UyNTZfRU5DT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb2RlQmFzZTI1NlNlZ21lbnQoYml0cywgcmVzdWx0LCBieXRlU2VnbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGUuQVNDSUlfRU5DT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKG1vZGUgIT09IE1vZGUuUEFEX0VOQ09ERSAmJiBiaXRzLmF2YWlsYWJsZSgpID4gMCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0VHJhaWxlci5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKHJlc3VsdFRyYWlsZXIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHQoYnl0ZXMsIHJlc3VsdC50b1N0cmluZygpLCBieXRlU2VnbWVudHMubGVuZ3RoID09PSAwID8gbnVsbCA6IGJ5dGVTZWdtZW50cywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlZSBJU08gMTYwMjI6MjAwNiwgNS4yLjMgYW5kIEFubmV4IEMsIFRhYmxlIEMuMlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZUFzY2lpU2VnbWVudChiaXRzLCByZXN1bHQsIHJlc3VsdFRyYWlsZXIpIHtcbiAgICAgICAgICAgIGxldCB1cHBlclNoaWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgbGV0IG9uZUJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpO1xuICAgICAgICAgICAgICAgIGlmIChvbmVCeXRlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob25lQnl0ZSA8PSAxMjgpIHsgLy8gQVNDSUkgZGF0YSAoQVNDSUkgdmFsdWUgKyAxKVxuICAgICAgICAgICAgICAgICAgICBpZiAodXBwZXJTaGlmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25lQnl0ZSArPSAxMjg7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cHBlclNoaWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKG9uZUJ5dGUgLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLkFTQ0lJX0VOQ09ERTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob25lQnl0ZSA9PT0gMTI5KSB7IC8vIFBhZFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTW9kZS5QQURfRU5DT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvbmVCeXRlIDw9IDIyOSkgeyAvLyAyLWRpZ2l0IGRhdGEgMDAtOTkgKE51bWVyaWMgVmFsdWUgKyAxMzApXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gb25lQnl0ZSAtIDEzMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMTApIHsgLy8gcGFkIHdpdGggJzAnIGZvciBzaW5nbGUgZGlnaXQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCcwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnJyArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob25lQnl0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzA6IC8vIExhdGNoIHRvIEM0MCBlbmNvZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZGUuQzQwX0VOQ09ERTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjMxOiAvLyBMYXRjaCB0byBCYXNlIDI1NiBlbmNvZGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZGUuQkFTRTI1Nl9FTkNPREU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzMjogLy8gRk5DMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZSgyOSkpOyAvLyB0cmFuc2xhdGUgYXMgQVNDSUkgMjlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjMzOiAvLyBTdHJ1Y3R1cmVkIEFwcGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzQ6IC8vIFJlYWRlciBQcm9ncmFtbWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB0aGVzZSBzeW1ib2xzIGZvciBub3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyBSZWFkZXJFeGNlcHRpb24uZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM1OiAvLyBVcHBlciBTaGlmdCAoc2hpZnQgdG8gRXh0ZW5kZWQgQVNDSUkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJTaGlmdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzNjogLy8gMDUgTWFjcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCdbKT5cXHUwMDFFMDVcXHUwMDFEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0VHJhaWxlci5pbnNlcnQoMCwgJ1xcdTAwMUVcXHUwMDA0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzNzogLy8gMDYgTWFjcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCdbKT5cXHUwMDFFMDZcXHUwMDFEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0VHJhaWxlci5pbnNlcnQoMCwgJ1xcdTAwMUVcXHUwMDA0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzODogLy8gTGF0Y2ggdG8gQU5TSSBYMTIgZW5jb2RhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLkFOU0lYMTJfRU5DT0RFO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzk6IC8vIExhdGNoIHRvIFRleHQgZW5jb2RhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLlRFWFRfRU5DT0RFO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDA6IC8vIExhdGNoIHRvIEVESUZBQ1QgZW5jb2RhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNb2RlLkVESUZBQ1RfRU5DT0RFO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDE6IC8vIEVDSSBDaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGJicm93bik6IEkgdGhpbmsgd2UgbmVlZCB0byBzdXBwb3J0IEVDSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93IFJlYWRlckV4Y2VwdGlvbi5nZXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB0aGlzIHN5bWJvbCBmb3Igbm93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCB0byBiZSB1c2VkIGluIEFTQ0lJIGVuY29kYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgd29yayBhcm91bmQgZW5jb2RlcnMgdGhhdCBlbmQgd2l0aCAyNTQsIGxhdGNoIGJhY2sgdG8gQVNDSUlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25lQnl0ZSAhPT0gMjU0IHx8IGJpdHMuYXZhaWxhYmxlKCkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGJpdHMuYXZhaWxhYmxlKCkgPiAwKTtcbiAgICAgICAgICAgIHJldHVybiBNb2RlLkFTQ0lJX0VOQ09ERTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2VlIElTTyAxNjAyMjoyMDA2LCA1LjIuNSBhbmQgQW5uZXggQywgVGFibGUgQy4xXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlQzQwU2VnbWVudChiaXRzLCByZXN1bHQpIHtcbiAgICAgICAgICAgIC8vIFRocmVlIEM0MCB2YWx1ZXMgYXJlIGVuY29kZWQgaW4gYSAxNi1iaXQgdmFsdWUgYXNcbiAgICAgICAgICAgIC8vICgxNjAwICogQzEpICsgKDQwICogQzIpICsgQzMgKyAxXG4gICAgICAgICAgICAvLyBUT0RPKGJicm93bik6IFRoZSBVcHBlciBTaGlmdCB3aXRoIEM0MCBkb2Vzbid0IHdvcmsgaW4gdGhlIDQgdmFsdWUgc2NlbmFyaW8gYWxsIHRoZSB0aW1lXG4gICAgICAgICAgICBsZXQgdXBwZXJTaGlmdCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgY1ZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgbGV0IHNoaWZ0ID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBieXRlIGxlZnQgdGhlbiBpdCB3aWxsIGJlIGVuY29kZWQgYXMgQVNDSUlcbiAgICAgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA9PT0gOCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Qnl0ZSA9IGJpdHMucmVhZEJpdHMoOCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA9PT0gMjU0KSB7IC8vIFVubGF0Y2ggY29kZXdvcmRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlVHdvQnl0ZXMoZmlyc3RCeXRlLCBiaXRzLnJlYWRCaXRzKDgpLCBjVmFsdWVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjVmFsdWUgPSBjVmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNWYWx1ZSA8IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnQgPSBjVmFsdWUgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjVmFsdWUgPCB0aGlzLkM0MF9CQVNJQ19TRVRfQ0hBUlMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGM0MGNoYXIgPSB0aGlzLkM0MF9CQVNJQ19TRVRfQ0hBUlNbY1ZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVyU2hpZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZShjNDBjaGFyLmNoYXJDb2RlQXQoMCkgKyAxMjgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyU2hpZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoYzQwY2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVyU2hpZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKGNWYWx1ZSArIDEyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclNoaWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoY1ZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1ZhbHVlIDwgdGhpcy5DNDBfU0hJRlQyX1NFVF9DSEFSUy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYzQwY2hhciA9IHRoaXMuQzQwX1NISUZUMl9TRVRfQ0hBUlNbY1ZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVyU2hpZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZShjNDBjaGFyLmNoYXJDb2RlQXQoMCkgKyAxMjgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyU2hpZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoYzQwY2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OiAvLyBGTkMxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKDI5KSk7IC8vIHRyYW5zbGF0ZSBhcyBBU0NJSSAyOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDogLy8gVXBwZXIgU2hpZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclNoaWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBwZXJTaGlmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoY1ZhbHVlICsgMjI0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyU2hpZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZShjVmFsdWUgKyA5NikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGJpdHMuYXZhaWxhYmxlKCkgPiAwKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2VlIElTTyAxNjAyMjoyMDA2LCA1LjIuNiBhbmQgQW5uZXggQywgVGFibGUgQy4yXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlVGV4dFNlZ21lbnQoYml0cywgcmVzdWx0KSB7XG4gICAgICAgICAgICAvLyBUaHJlZSBUZXh0IHZhbHVlcyBhcmUgZW5jb2RlZCBpbiBhIDE2LWJpdCB2YWx1ZSBhc1xuICAgICAgICAgICAgLy8gKDE2MDAgKiBDMSkgKyAoNDAgKiBDMikgKyBDMyArIDFcbiAgICAgICAgICAgIC8vIFRPRE8oYmJyb3duKTogVGhlIFVwcGVyIFNoaWZ0IHdpdGggVGV4dCBkb2Vzbid0IHdvcmsgaW4gdGhlIDQgdmFsdWUgc2NlbmFyaW8gYWxsIHRoZSB0aW1lXG4gICAgICAgICAgICBsZXQgdXBwZXJTaGlmdCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGxldCBzaGlmdCA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgYnl0ZSBsZWZ0IHRoZW4gaXQgd2lsbCBiZSBlbmNvZGVkIGFzIEFTQ0lJXG4gICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPT09IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpO1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPT09IDI1NCkgeyAvLyBVbmxhdGNoIGNvZGV3b3JkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVR3b0J5dGVzKGZpcnN0Qnl0ZSwgYml0cy5yZWFkQml0cyg4KSwgY1ZhbHVlcyk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY1ZhbHVlID0gY1ZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzaGlmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjVmFsdWUgPCAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gY1ZhbHVlICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY1ZhbHVlIDwgdGhpcy5URVhUX0JBU0lDX1NFVF9DSEFSUy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dENoYXIgPSB0aGlzLlRFWFRfQkFTSUNfU0VUX0NIQVJTW2NWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cHBlclNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUodGV4dENoYXIuY2hhckNvZGVBdCgwKSArIDEyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJTaGlmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0ZXh0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVyU2hpZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKGNWYWx1ZSArIDEyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlclNoaWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoY1ZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGlmdCAyIGZvciBUZXh0IGlzIHRoZSBzYW1lIGVuY29kaW5nIGFzIEM0MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjVmFsdWUgPCB0aGlzLlRFWFRfU0hJRlQyX1NFVF9DSEFSUy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dENoYXIgPSB0aGlzLlRFWFRfU0hJRlQyX1NFVF9DSEFSU1tjVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBwZXJTaGlmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKHRleHRDaGFyLmNoYXJDb2RlQXQoMCkgKyAxMjgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyU2hpZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQodGV4dENoYXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzogLy8gRk5DMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZSgyOSkpOyAvLyB0cmFuc2xhdGUgYXMgQVNDSUkgMjlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6IC8vIFVwcGVyIFNoaWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJTaGlmdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNWYWx1ZSA8IHRoaXMuVEVYVF9TSElGVDNfU0VUX0NIQVJTLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0Q2hhciA9IHRoaXMuVEVYVF9TSElGVDNfU0VUX0NIQVJTW2NWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cHBlclNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUodGV4dENoYXIuY2hhckNvZGVBdCgwKSArIDEyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJTaGlmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0ZXh0Q2hhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoYml0cy5hdmFpbGFibGUoKSA+IDApO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgSVNPIDE2MDIyOjIwMDYsIDUuMi43XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlQW5zaVgxMlNlZ21lbnQoYml0cywgcmVzdWx0KSB7XG4gICAgICAgICAgICAvLyBUaHJlZSBBTlNJIFgxMiB2YWx1ZXMgYXJlIGVuY29kZWQgaW4gYSAxNi1iaXQgdmFsdWUgYXNcbiAgICAgICAgICAgIC8vICgxNjAwICogQzEpICsgKDQwICogQzIpICsgQzMgKyAxXG4gICAgICAgICAgICBjb25zdCBjVmFsdWVzID0gW107XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgYnl0ZSBsZWZ0IHRoZW4gaXQgd2lsbCBiZSBlbmNvZGVkIGFzIEFTQ0lJXG4gICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPT09IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpO1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPT09IDI1NCkgeyAvLyBVbmxhdGNoIGNvZGV3b3JkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZVR3b0J5dGVzKGZpcnN0Qnl0ZSwgYml0cy5yZWFkQml0cyg4KSwgY1ZhbHVlcyk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY1ZhbHVlID0gY1ZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogLy8gWDEyIHNlZ21lbnQgdGVybWluYXRvciA8Q1I+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXFxyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIFgxMiBzZWdtZW50IHNlcGFyYXRvciAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnKicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiAvLyBYMTIgc3ViLWVsZW1lbnQgc2VwYXJhdG9yID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCc+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIHNwYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1ZhbHVlIDwgMTQpIHsgLy8gMCAtIDlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKGNWYWx1ZSArIDQ0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNWYWx1ZSA8IDQwKSB7IC8vIEEgLSBaXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nLmZyb21DaGFyQ29kZShjVmFsdWUgKyA1MSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGJpdHMuYXZhaWxhYmxlKCkgPiAwKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcGFyc2VUd29CeXRlcyhmaXJzdEJ5dGUsIHNlY29uZEJ5dGUsIHJlc3VsdCkge1xuICAgICAgICAgICAgbGV0IGZ1bGxCaXRWYWx1ZSA9IChmaXJzdEJ5dGUgPDwgOCkgKyBzZWNvbmRCeXRlIC0gMTtcbiAgICAgICAgICAgIGxldCB0ZW1wID0gTWF0aC5mbG9vcihmdWxsQml0VmFsdWUgLyAxNjAwKTtcbiAgICAgICAgICAgIHJlc3VsdFswXSA9IHRlbXA7XG4gICAgICAgICAgICBmdWxsQml0VmFsdWUgLT0gdGVtcCAqIDE2MDA7XG4gICAgICAgICAgICB0ZW1wID0gTWF0aC5mbG9vcihmdWxsQml0VmFsdWUgLyA0MCk7XG4gICAgICAgICAgICByZXN1bHRbMV0gPSB0ZW1wO1xuICAgICAgICAgICAgcmVzdWx0WzJdID0gZnVsbEJpdFZhbHVlIC0gdGVtcCAqIDQwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgSVNPIDE2MDIyOjIwMDYsIDUuMi44IGFuZCBBbm5leCBDIFRhYmxlIEMuM1xuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZUVkaWZhY3RTZWdtZW50KGJpdHMsIHJlc3VsdCkge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG9ubHkgdHdvIG9yIGxlc3MgYnl0ZXMgbGVmdCB0aGVuIGl0IHdpbGwgYmUgZW5jb2RlZCBhcyBBU0NJSVxuICAgICAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDw9IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVkaWZhY3RWYWx1ZSA9IGJpdHMucmVhZEJpdHMoNik7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciB0aGUgdW5sYXRjaCBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkaWZhY3RWYWx1ZSA9PT0gMHgxRikgeyAvLyAwMTExMTFcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlYWQgcmVzdCBvZiBieXRlLCB3aGljaCBzaG91bGQgYmUgMCwgYW5kIHN0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdHNMZWZ0ID0gOCAtIGJpdHMuZ2V0Qml0T2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYml0c0xlZnQgIT09IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnJlYWRCaXRzKGJpdHNMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGVkaWZhY3RWYWx1ZSAmIDB4MjApID09PSAwKSB7IC8vIG5vIDEgaW4gdGhlIGxlYWRpbmcgKDZ0aCkgYml0XG4gICAgICAgICAgICAgICAgICAgICAgICBlZGlmYWN0VmFsdWUgfD0gMHg0MDsgLy8gQWRkIGEgbGVhZGluZyAwMSB0byB0aGUgNiBiaXQgYmluYXJ5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlKGVkaWZhY3RWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGJpdHMuYXZhaWxhYmxlKCkgPiAwKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2VlIElTTyAxNjAyMjoyMDA2LCA1LjIuOSBhbmQgQW5uZXggQiwgQi4yXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlQmFzZTI1NlNlZ21lbnQoYml0cywgcmVzdWx0LCBieXRlU2VnbWVudHMpIHtcbiAgICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgaG93IGxvbmcgdGhlIEJhc2UgMjU2IFNlZ21lbnQgaXMuXG4gICAgICAgICAgICBsZXQgY29kZXdvcmRQb3NpdGlvbiA9IDEgKyBiaXRzLmdldEJ5dGVPZmZzZXQoKTsgLy8gcG9zaXRpb24gaXMgMS1pbmRleGVkXG4gICAgICAgICAgICBjb25zdCBkMSA9IHRoaXMudW5yYW5kb21pemUyNTVTdGF0ZShiaXRzLnJlYWRCaXRzKDgpLCBjb2Rld29yZFBvc2l0aW9uKyspO1xuICAgICAgICAgICAgbGV0IGNvdW50O1xuICAgICAgICAgICAgaWYgKGQxID09PSAwKSB7IC8vIFJlYWQgdGhlIHJlbWFpbmRlciBvZiB0aGUgc3ltYm9sXG4gICAgICAgICAgICAgICAgY291bnQgPSBiaXRzLmF2YWlsYWJsZSgpIC8gOCB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkMSA8IDI1MCkge1xuICAgICAgICAgICAgICAgIGNvdW50ID0gZDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3VudCA9IDI1MCAqIChkMSAtIDI0OSkgKyB0aGlzLnVucmFuZG9taXplMjU1U3RhdGUoYml0cy5yZWFkQml0cyg4KSwgY29kZXdvcmRQb3NpdGlvbisrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlJ3JlIHNlZWluZyBOZWdhdGl2ZUFycmF5U2l6ZUV4Y2VwdGlvbiBlcnJvcnMgZnJvbSB1c2Vycy5cbiAgICAgICAgICAgIGlmIChjb3VudCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGNvdW50KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIEhhdmUgc2VlbiB0aGlzIHBhcnRpY3VsYXIgZXJyb3IgaW4gdGhlIHdpbGQsIHN1Y2ggYXMgYXRcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vd3d3LmJjZ2VuLmNvbS9kZW1vL0lEQXV0b21hdGlvblN0cmVhbWluZ0RhdGFNYXRyaXguYXNweD9NT0RFPTMmRD1GcmVkJlBGTVQ9MyZQVD1GJlg9MC4zJk89MCZMTT0wLjJcbiAgICAgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBieXRlc1tpXSA9IHRoaXMudW5yYW5kb21pemUyNTVTdGF0ZShiaXRzLnJlYWRCaXRzKDgpLCBjb2Rld29yZFBvc2l0aW9uKyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnl0ZVNlZ21lbnRzLnB1c2goYnl0ZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZ0VuY29kaW5nLmRlY29kZShieXRlcywgU3RyaW5nVXRpbHMuSVNPODg1OTEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoICh1ZWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdQbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IHJlcXVpcmVkIGVuY29kaW5nOiAnICsgdWVlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgSVNPIDE2MDIyOjIwMDYsIEFubmV4IEIsIEIuMlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIHVucmFuZG9taXplMjU1U3RhdGUocmFuZG9taXplZEJhc2UyNTZDb2Rld29yZCwgYmFzZTI1NkNvZGV3b3JkUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBzZXVkb1JhbmRvbU51bWJlciA9ICgoMTQ5ICogYmFzZTI1NkNvZGV3b3JkUG9zaXRpb24pICUgMjU1KSArIDE7XG4gICAgICAgICAgICBjb25zdCB0ZW1wVmFyaWFibGUgPSByYW5kb21pemVkQmFzZTI1NkNvZGV3b3JkIC0gcHNldWRvUmFuZG9tTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBWYXJpYWJsZSA+PSAwID8gdGVtcFZhcmlhYmxlIDogdGVtcFZhcmlhYmxlICsgMjU2O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlZSBJU08gMTYwMjI6MjAwNiwgQW5uZXggQyBUYWJsZSBDLjFcbiAgICAgKiBUaGUgQzQwIEJhc2ljIENoYXJhY3RlciBTZXQgKConcyB1c2VkIGZvciBwbGFjZWhvbGRlcnMgZm9yIHRoZSBzaGlmdCB2YWx1ZXMpXG4gICAgICovXG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5DNDBfQkFTSUNfU0VUX0NIQVJTID0gW1xuICAgICAgICAnKicsICcqJywgJyonLCAnICcsICcwJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JyxcbiAgICAgICAgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsXG4gICAgICAgICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWidcbiAgICBdO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQzQwX1NISUZUMl9TRVRfQ0hBUlMgPSBbXG4gICAgICAgICchJywgJ1wiJywgJyMnLCAnJCcsICclJywgJyYnLCAnXFwnJywgJygnLCAnKScsICcqJywgJysnLCAnLCcsICctJywgJy4nLFxuICAgICAgICAnLycsICc6JywgJzsnLCAnPCcsICc9JywgJz4nLCAnPycsICdAJywgJ1snLCAnXFxcXCcsICddJywgJ14nLCAnXydcbiAgICBdO1xuICAgIC8qKlxuICAgICAqIFNlZSBJU08gMTYwMjI6MjAwNiwgQW5uZXggQyBUYWJsZSBDLjJcbiAgICAgKiBUaGUgVGV4dCBCYXNpYyBDaGFyYWN0ZXIgU2V0ICgqJ3MgdXNlZCBmb3IgcGxhY2Vob2xkZXJzIGZvciB0aGUgc2hpZnQgdmFsdWVzKVxuICAgICAqL1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuVEVYVF9CQVNJQ19TRVRfQ0hBUlMgPSBbXG4gICAgICAgICcqJywgJyonLCAnKicsICcgJywgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLFxuICAgICAgICAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJyxcbiAgICAgICAgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6J1xuICAgIF07XG4gICAgLy8gU2hpZnQgMiBmb3IgVGV4dCBpcyB0aGUgc2FtZSBlbmNvZGluZyBhcyBDNDBcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLlRFWFRfU0hJRlQyX1NFVF9DSEFSUyA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQzQwX1NISUZUMl9TRVRfQ0hBUlM7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5URVhUX1NISUZUM19TRVRfQ0hBUlMgPSBbXG4gICAgICAgICdgJywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsXG4gICAgICAgICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWicsICd7JywgJ3wnLCAnfScsICd+JywgU3RyaW5nLmZyb21DaGFyQ29kZSgxMjcpXG4gICAgXTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+VGhlIG1haW4gY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBEYXRhIE1hdHJpeCBDb2RlIGRlY29kaW5nIC0tIGFzIG9wcG9zZWQgdG8gbG9jYXRpbmcgYW5kIGV4dHJhY3RpbmdcbiAgICAgKiB0aGUgRGF0YSBNYXRyaXggQ29kZSBmcm9tIGFuIGltYWdlLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgYmJyb3duQGdvb2dsZS5jb20gKEJyaWFuIEJyb3duKVxuICAgICAqL1xuICAgIGNsYXNzIERlY29kZXIkMSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5yc0RlY29kZXIgPSBuZXcgUmVlZFNvbG9tb25EZWNvZGVyKEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTYpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5EZWNvZGVzIGEgRGF0YSBNYXRyaXggQ29kZSByZXByZXNlbnRlZCBhcyBhIHtAbGluayBCaXRNYXRyaXh9LiBBIDEgb3IgXCJ0cnVlXCIgaXMgdGFrZW5cbiAgICAgICAgICogdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBiaXRzIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBEYXRhIE1hdHJpeCBDb2RlIG1vZHVsZXNcbiAgICAgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgRGF0YSBNYXRyaXggQ29kZVxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiB0aGUgRGF0YSBNYXRyaXggQ29kZSBjYW5ub3QgYmUgZGVjb2RlZFxuICAgICAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHNcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZShiaXRzKSB7XG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3QgYSBwYXJzZXIgYW5kIHJlYWQgdmVyc2lvbiwgZXJyb3ItY29ycmVjdGlvbiBsZXZlbFxuICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IEJpdE1hdHJpeFBhcnNlcihiaXRzKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBwYXJzZXIuZ2V0VmVyc2lvbigpO1xuICAgICAgICAgICAgLy8gUmVhZCBjb2Rld29yZHNcbiAgICAgICAgICAgIGNvbnN0IGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICAvLyBTZXBhcmF0ZSBpbnRvIGRhdGEgYmxvY2tzXG4gICAgICAgICAgICBjb25zdCBkYXRhQmxvY2tzID0gRGF0YUJsb2NrLmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uKTtcbiAgICAgICAgICAgIC8vIENvdW50IHRvdGFsIG51bWJlciBvZiBkYXRhIGJ5dGVzXG4gICAgICAgICAgICBsZXQgdG90YWxCeXRlcyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBkYiBvZiBkYXRhQmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgdG90YWxCeXRlcyArPSBkYi5nZXROdW1EYXRhQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHRCeXRlcyA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgY29uc3QgZGF0YUJsb2Nrc0NvdW50ID0gZGF0YUJsb2Nrcy5sZW5ndGg7XG4gICAgICAgICAgICAvLyBFcnJvci1jb3JyZWN0IGFuZCBjb3B5IGRhdGEgYmxvY2tzIHRvZ2V0aGVyIGludG8gYSBzdHJlYW0gb2YgYnl0ZXNcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YUJsb2Nrc0NvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQmxvY2sgPSBkYXRhQmxvY2tzW2pdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVtRGF0YUNvZGV3b3JkcyA9IGRhdGFCbG9jay5nZXROdW1EYXRhQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3JyZWN0RXJyb3JzKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRGF0YUNvZGV3b3JkczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlLWludGVybGFjZSBkYXRhIGJsb2Nrcy5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Qnl0ZXNbaSAqIGRhdGFCbG9ja3NDb3VudCArIGpdID0gY29kZXdvcmRCeXRlc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZWNvZGUgdGhlIGNvbnRlbnRzIG9mIHRoYXQgc3RyZWFtIG9mIGJ5dGVzXG4gICAgICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGUocmVzdWx0Qnl0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG9cbiAgICAgICAgICogY29ycmVjdCB0aGUgZXJyb3JzIGluLXBsYWNlIHVzaW5nIFJlZWQtU29sb21vbiBlcnJvciBjb3JyZWN0aW9uLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHNcbiAgICAgICAgICogQHBhcmFtIG51bURhdGFDb2Rld29yZHMgbnVtYmVyIG9mIGNvZGV3b3JkcyB0aGF0IGFyZSBkYXRhIGJ5dGVzXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24gaWYgZXJyb3IgY29ycmVjdGlvbiBmYWlsc1xuICAgICAgICAgKi9cbiAgICAgICAgY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKSB7XG4gICAgICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIC8vIEZpcnN0IHJlYWQgaW50byBhbiBhcnJheSBvZiBpbnRzXG4gICAgICAgICAgICBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkoY29kZXdvcmRCeXRlcyk7XG4gICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7XG4gICAgICAgICAgICAvLyAgIGNvZGV3b3Jkc0ludHNbaV0gPSBjb2Rld29yZEJ5dGVzW2ldICYgMHhGRjtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yc0RlY29kZXIuZGVjb2RlKGNvZGV3b3Jkc0ludHMsIGNvZGV3b3JkQnl0ZXMubGVuZ3RoIC0gbnVtRGF0YUNvZGV3b3Jkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCAvKiBSZWVkU29sb21vbkV4Y2VwdGlvbiAqLykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDaGVja3N1bUV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YVxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FyZSBhYm91dCBlcnJvcnMgaW4gdGhlIGVycm9yLWNvcnJlY3Rpb24gY29kZXdvcmRzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSBjb2Rld29yZHNJbnRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGxvZ2ljIHRoYXQgY2FuIGRldGVjdCBhIERhdGEgTWF0cml4IENvZGUgaW4gYW4gaW1hZ2UsIGV2ZW4gaWYgdGhlIERhdGEgTWF0cml4IENvZGVcbiAgICAgKiBpcyByb3RhdGVkIG9yIHNrZXdlZCwgb3IgcGFydGlhbGx5IG9ic2N1cmVkLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGV0ZWN0b3IkMSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGltYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICB0aGlzLnJlY3RhbmdsZURldGVjdG9yID0gbmV3IFdoaXRlUmVjdGFuZ2xlRGV0ZWN0b3IodGhpcy5pbWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkRldGVjdHMgYSBEYXRhIE1hdHJpeCBDb2RlIGluIGFuIGltYWdlLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBEYXRhIE1hdHJpeCBDb2RlXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgbm8gRGF0YSBNYXRyaXggQ29kZSBjYW4gYmUgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGRldGVjdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcm5lclBvaW50cyA9IHRoaXMucmVjdGFuZ2xlRGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgICAgICAgICBsZXQgcG9pbnRzID0gdGhpcy5kZXRlY3RTb2xpZDEoY29ybmVyUG9pbnRzKTtcbiAgICAgICAgICAgIHBvaW50cyA9IHRoaXMuZGV0ZWN0U29saWQyKHBvaW50cyk7XG4gICAgICAgICAgICBwb2ludHNbM10gPSB0aGlzLmNvcnJlY3RUb3BSaWdodChwb2ludHMpO1xuICAgICAgICAgICAgaWYgKCFwb2ludHNbM10pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50cyA9IHRoaXMuc2hpZnRUb01vZHVsZUNlbnRlcihwb2ludHMpO1xuICAgICAgICAgICAgY29uc3QgdG9wTGVmdCA9IHBvaW50c1swXTtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbUxlZnQgPSBwb2ludHNbMV07XG4gICAgICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHBvaW50c1syXTtcbiAgICAgICAgICAgIGNvbnN0IHRvcFJpZ2h0ID0gcG9pbnRzWzNdO1xuICAgICAgICAgICAgbGV0IGRpbWVuc2lvblRvcCA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHRvcExlZnQsIHRvcFJpZ2h0KSArIDE7XG4gICAgICAgICAgICBsZXQgZGltZW5zaW9uUmlnaHQgPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihib3R0b21SaWdodCwgdG9wUmlnaHQpICsgMTtcbiAgICAgICAgICAgIGlmICgoZGltZW5zaW9uVG9wICYgMHgwMSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25Ub3AgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoZGltZW5zaW9uUmlnaHQgJiAweDAxKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGRpbWVuc2lvblJpZ2h0ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoNCAqIGRpbWVuc2lvblRvcCA8IDcgKiBkaW1lbnNpb25SaWdodCAmJiA0ICogZGltZW5zaW9uUmlnaHQgPCA3ICogZGltZW5zaW9uVG9wKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG1hdHJpeCBpcyBzcXVhcmVcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25Ub3AgPSBkaW1lbnNpb25SaWdodCA9IE1hdGgubWF4KGRpbWVuc2lvblRvcCwgZGltZW5zaW9uUmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGJpdHMgPSBEZXRlY3RvciQxLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdG9wTGVmdCwgYm90dG9tTGVmdCwgYm90dG9tUmlnaHQsIHRvcFJpZ2h0LCBkaW1lbnNpb25Ub3AsIGRpbWVuc2lvblJpZ2h0KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0ZWN0b3JSZXN1bHQoYml0cywgW3RvcExlZnQsIGJvdHRvbUxlZnQsIGJvdHRvbVJpZ2h0LCB0b3BSaWdodF0pO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBzaGlmdFBvaW50KHBvaW50LCB0bywgZGl2KSB7XG4gICAgICAgICAgICBsZXQgeCA9ICh0by5nZXRYKCkgLSBwb2ludC5nZXRYKCkpIC8gKGRpdiArIDEpO1xuICAgICAgICAgICAgbGV0IHkgPSAodG8uZ2V0WSgpIC0gcG9pbnQuZ2V0WSgpKSAvIChkaXYgKyAxKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0UG9pbnQocG9pbnQuZ2V0WCgpICsgeCwgcG9pbnQuZ2V0WSgpICsgeSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIG1vdmVBd2F5KHBvaW50LCBmcm9tWCwgZnJvbVkpIHtcbiAgICAgICAgICAgIGxldCB4ID0gcG9pbnQuZ2V0WCgpO1xuICAgICAgICAgICAgbGV0IHkgPSBwb2ludC5nZXRZKCk7XG4gICAgICAgICAgICBpZiAoeCA8IGZyb21YKSB7XG4gICAgICAgICAgICAgICAgeCAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHkgPCBmcm9tWSkge1xuICAgICAgICAgICAgICAgIHkgLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdWx0UG9pbnQoeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVjdCBhIHNvbGlkIHNpZGUgd2hpY2ggaGFzIG1pbmltdW0gdHJhbnNpdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGRldGVjdFNvbGlkMShjb3JuZXJQb2ludHMpIHtcbiAgICAgICAgICAgIC8vIDAgIDJcbiAgICAgICAgICAgIC8vIDEgIDNcbiAgICAgICAgICAgIGxldCBwb2ludEEgPSBjb3JuZXJQb2ludHNbMF07XG4gICAgICAgICAgICBsZXQgcG9pbnRCID0gY29ybmVyUG9pbnRzWzFdO1xuICAgICAgICAgICAgbGV0IHBvaW50QyA9IGNvcm5lclBvaW50c1szXTtcbiAgICAgICAgICAgIGxldCBwb2ludEQgPSBjb3JuZXJQb2ludHNbMl07XG4gICAgICAgICAgICBsZXQgdHJBQiA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50QSwgcG9pbnRCKTtcbiAgICAgICAgICAgIGxldCB0ckJDID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRCLCBwb2ludEMpO1xuICAgICAgICAgICAgbGV0IHRyQ0QgPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludEMsIHBvaW50RCk7XG4gICAgICAgICAgICBsZXQgdHJEQSA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50RCwgcG9pbnRBKTtcbiAgICAgICAgICAgIC8vIDAuLjNcbiAgICAgICAgICAgIC8vIDogIDpcbiAgICAgICAgICAgIC8vIDEtLTJcbiAgICAgICAgICAgIGxldCBtaW4gPSB0ckFCO1xuICAgICAgICAgICAgbGV0IHBvaW50cyA9IFtwb2ludEQsIHBvaW50QSwgcG9pbnRCLCBwb2ludENdO1xuICAgICAgICAgICAgaWYgKG1pbiA+IHRyQkMpIHtcbiAgICAgICAgICAgICAgICBtaW4gPSB0ckJDO1xuICAgICAgICAgICAgICAgIHBvaW50c1swXSA9IHBvaW50QTtcbiAgICAgICAgICAgICAgICBwb2ludHNbMV0gPSBwb2ludEI7XG4gICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gcG9pbnRDO1xuICAgICAgICAgICAgICAgIHBvaW50c1szXSA9IHBvaW50RDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW4gPiB0ckNEKSB7XG4gICAgICAgICAgICAgICAgbWluID0gdHJDRDtcbiAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBwb2ludEI7XG4gICAgICAgICAgICAgICAgcG9pbnRzWzFdID0gcG9pbnRDO1xuICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IHBvaW50RDtcbiAgICAgICAgICAgICAgICBwb2ludHNbM10gPSBwb2ludEE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWluID4gdHJEQSkge1xuICAgICAgICAgICAgICAgIHBvaW50c1swXSA9IHBvaW50QztcbiAgICAgICAgICAgICAgICBwb2ludHNbMV0gPSBwb2ludEQ7XG4gICAgICAgICAgICAgICAgcG9pbnRzWzJdID0gcG9pbnRBO1xuICAgICAgICAgICAgICAgIHBvaW50c1szXSA9IHBvaW50QjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVjdCBhIHNlY29uZCBzb2xpZCBzaWRlIG5leHQgdG8gZmlyc3Qgc29saWQgc2lkZS5cbiAgICAgICAgICovXG4gICAgICAgIGRldGVjdFNvbGlkMihwb2ludHMpIHtcbiAgICAgICAgICAgIC8vIEEuLkRcbiAgICAgICAgICAgIC8vIDogIDpcbiAgICAgICAgICAgIC8vIEItLUNcbiAgICAgICAgICAgIGxldCBwb2ludEEgPSBwb2ludHNbMF07XG4gICAgICAgICAgICBsZXQgcG9pbnRCID0gcG9pbnRzWzFdO1xuICAgICAgICAgICAgbGV0IHBvaW50QyA9IHBvaW50c1syXTtcbiAgICAgICAgICAgIGxldCBwb2ludEQgPSBwb2ludHNbM107XG4gICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGRldGVjdGlvbiBvbiB0aGUgZWRnZSBpcyBub3Qgc3RhYmxlLlxuICAgICAgICAgICAgLy8gVG8gc2FmZWx5IGRldGVjdCwgc2hpZnQgdGhlIHBvaW50cyB0byB0aGUgbW9kdWxlIGNlbnRlci5cbiAgICAgICAgICAgIGxldCB0ciA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50QSwgcG9pbnREKTtcbiAgICAgICAgICAgIGxldCBwb2ludEJzID0gRGV0ZWN0b3IkMS5zaGlmdFBvaW50KHBvaW50QiwgcG9pbnRDLCAodHIgKyAxKSAqIDQpO1xuICAgICAgICAgICAgbGV0IHBvaW50Q3MgPSBEZXRlY3RvciQxLnNoaWZ0UG9pbnQocG9pbnRDLCBwb2ludEIsICh0ciArIDEpICogNCk7XG4gICAgICAgICAgICBsZXQgdHJCQSA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50QnMsIHBvaW50QSk7XG4gICAgICAgICAgICBsZXQgdHJDRCA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50Q3MsIHBvaW50RCk7XG4gICAgICAgICAgICAvLyAwLi4zXG4gICAgICAgICAgICAvLyB8ICA6XG4gICAgICAgICAgICAvLyAxLS0yXG4gICAgICAgICAgICBpZiAodHJCQSA8IHRyQ0QpIHtcbiAgICAgICAgICAgICAgICAvLyBzb2xpZCBzaWRlczogQS1CLUNcbiAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBwb2ludEE7XG4gICAgICAgICAgICAgICAgcG9pbnRzWzFdID0gcG9pbnRCO1xuICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IHBvaW50QztcbiAgICAgICAgICAgICAgICBwb2ludHNbM10gPSBwb2ludEQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzb2xpZCBzaWRlczogQi1DLURcbiAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBwb2ludEI7XG4gICAgICAgICAgICAgICAgcG9pbnRzWzFdID0gcG9pbnRDO1xuICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IHBvaW50RDtcbiAgICAgICAgICAgICAgICBwb2ludHNbM10gPSBwb2ludEE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9pbnRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBjb3JuZXIgcG9zaXRpb24gb2YgdGhlIHdoaXRlIHRvcCByaWdodCBtb2R1bGUuXG4gICAgICAgICAqL1xuICAgICAgICBjb3JyZWN0VG9wUmlnaHQocG9pbnRzKSB7XG4gICAgICAgICAgICAvLyBBLi5EXG4gICAgICAgICAgICAvLyB8ICA6XG4gICAgICAgICAgICAvLyBCLS1DXG4gICAgICAgICAgICBsZXQgcG9pbnRBID0gcG9pbnRzWzBdO1xuICAgICAgICAgICAgbGV0IHBvaW50QiA9IHBvaW50c1sxXTtcbiAgICAgICAgICAgIGxldCBwb2ludEMgPSBwb2ludHNbMl07XG4gICAgICAgICAgICBsZXQgcG9pbnREID0gcG9pbnRzWzNdO1xuICAgICAgICAgICAgLy8gc2hpZnQgcG9pbnRzIGZvciBzYWZlIHRyYW5zaXRpb24gZGV0ZWN0aW9uLlxuICAgICAgICAgICAgbGV0IHRyVG9wID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRBLCBwb2ludEQpO1xuICAgICAgICAgICAgbGV0IHRyUmlnaHQgPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludEIsIHBvaW50RCk7XG4gICAgICAgICAgICBsZXQgcG9pbnRBcyA9IERldGVjdG9yJDEuc2hpZnRQb2ludChwb2ludEEsIHBvaW50QiwgKHRyUmlnaHQgKyAxKSAqIDQpO1xuICAgICAgICAgICAgbGV0IHBvaW50Q3MgPSBEZXRlY3RvciQxLnNoaWZ0UG9pbnQocG9pbnRDLCBwb2ludEIsICh0clRvcCArIDEpICogNCk7XG4gICAgICAgICAgICB0clRvcCA9IHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50QXMsIHBvaW50RCk7XG4gICAgICAgICAgICB0clJpZ2h0ID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRDcywgcG9pbnREKTtcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGUxID0gbmV3IFJlc3VsdFBvaW50KHBvaW50RC5nZXRYKCkgKyAocG9pbnRDLmdldFgoKSAtIHBvaW50Qi5nZXRYKCkpIC8gKHRyVG9wICsgMSksIHBvaW50RC5nZXRZKCkgKyAocG9pbnRDLmdldFkoKSAtIHBvaW50Qi5nZXRZKCkpIC8gKHRyVG9wICsgMSkpO1xuICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZTIgPSBuZXcgUmVzdWx0UG9pbnQocG9pbnRELmdldFgoKSArIChwb2ludEEuZ2V0WCgpIC0gcG9pbnRCLmdldFgoKSkgLyAodHJSaWdodCArIDEpLCBwb2ludEQuZ2V0WSgpICsgKHBvaW50QS5nZXRZKCkgLSBwb2ludEIuZ2V0WSgpKSAvICh0clJpZ2h0ICsgMSkpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQoY2FuZGlkYXRlMSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKGNhbmRpZGF0ZTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGUyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKGNhbmRpZGF0ZTIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3VtYzEgPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludEFzLCBjYW5kaWRhdGUxKSArIHRoaXMudHJhbnNpdGlvbnNCZXR3ZWVuKHBvaW50Q3MsIGNhbmRpZGF0ZTEpO1xuICAgICAgICAgICAgbGV0IHN1bWMyID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRBcywgY2FuZGlkYXRlMikgKyB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludENzLCBjYW5kaWRhdGUyKTtcbiAgICAgICAgICAgIGlmIChzdW1jMSA+IHN1bWMyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2hpZnQgdGhlIGVkZ2UgcG9pbnRzIHRvIHRoZSBtb2R1bGUgY2VudGVyLlxuICAgICAgICAgKi9cbiAgICAgICAgc2hpZnRUb01vZHVsZUNlbnRlcihwb2ludHMpIHtcbiAgICAgICAgICAgIC8vIEEuLkRcbiAgICAgICAgICAgIC8vIHwgIDpcbiAgICAgICAgICAgIC8vIEItLUNcbiAgICAgICAgICAgIGxldCBwb2ludEEgPSBwb2ludHNbMF07XG4gICAgICAgICAgICBsZXQgcG9pbnRCID0gcG9pbnRzWzFdO1xuICAgICAgICAgICAgbGV0IHBvaW50QyA9IHBvaW50c1syXTtcbiAgICAgICAgICAgIGxldCBwb2ludEQgPSBwb2ludHNbM107XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgcHNldWRvIGRpbWVuc2lvbnNcbiAgICAgICAgICAgIGxldCBkaW1IID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRBLCBwb2ludEQpICsgMTtcbiAgICAgICAgICAgIGxldCBkaW1WID0gdGhpcy50cmFuc2l0aW9uc0JldHdlZW4ocG9pbnRDLCBwb2ludEQpICsgMTtcbiAgICAgICAgICAgIC8vIHNoaWZ0IHBvaW50cyBmb3Igc2FmZSBkaW1lbnNpb24gZGV0ZWN0aW9uXG4gICAgICAgICAgICBsZXQgcG9pbnRBcyA9IERldGVjdG9yJDEuc2hpZnRQb2ludChwb2ludEEsIHBvaW50QiwgZGltViAqIDQpO1xuICAgICAgICAgICAgbGV0IHBvaW50Q3MgPSBEZXRlY3RvciQxLnNoaWZ0UG9pbnQocG9pbnRDLCBwb2ludEIsIGRpbUggKiA0KTtcbiAgICAgICAgICAgIC8vICBjYWxjdWxhdGUgbW9yZSBwcmVjaXNlIGRpbWVuc2lvbnNcbiAgICAgICAgICAgIGRpbUggPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludEFzLCBwb2ludEQpICsgMTtcbiAgICAgICAgICAgIGRpbVYgPSB0aGlzLnRyYW5zaXRpb25zQmV0d2Vlbihwb2ludENzLCBwb2ludEQpICsgMTtcbiAgICAgICAgICAgIGlmICgoZGltSCAmIDB4MDEpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZGltSCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChkaW1WICYgMHgwMSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBkaW1WICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXaGl0ZVJlY3RhbmdsZURldGVjdG9yIHJldHVybnMgcG9pbnRzIGluc2lkZSBvZiB0aGUgcmVjdGFuZ2xlLlxuICAgICAgICAgICAgLy8gSSB3YW50IHBvaW50cyBvbiB0aGUgZWRnZXMuXG4gICAgICAgICAgICBsZXQgY2VudGVyWCA9IChwb2ludEEuZ2V0WCgpICsgcG9pbnRCLmdldFgoKSArIHBvaW50Qy5nZXRYKCkgKyBwb2ludEQuZ2V0WCgpKSAvIDQ7XG4gICAgICAgICAgICBsZXQgY2VudGVyWSA9IChwb2ludEEuZ2V0WSgpICsgcG9pbnRCLmdldFkoKSArIHBvaW50Qy5nZXRZKCkgKyBwb2ludEQuZ2V0WSgpKSAvIDQ7XG4gICAgICAgICAgICBwb2ludEEgPSBEZXRlY3RvciQxLm1vdmVBd2F5KHBvaW50QSwgY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgICAgICBwb2ludEIgPSBEZXRlY3RvciQxLm1vdmVBd2F5KHBvaW50QiwgY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgICAgICBwb2ludEMgPSBEZXRlY3RvciQxLm1vdmVBd2F5KHBvaW50QywgY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgICAgICBwb2ludEQgPSBEZXRlY3RvciQxLm1vdmVBd2F5KHBvaW50RCwgY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgICAgICBsZXQgcG9pbnRCcztcbiAgICAgICAgICAgIGxldCBwb2ludERzO1xuICAgICAgICAgICAgLy8gc2hpZnQgcG9pbnRzIHRvIHRoZSBjZW50ZXIgb2YgZWFjaCBtb2R1bGVzXG4gICAgICAgICAgICBwb2ludEFzID0gRGV0ZWN0b3IkMS5zaGlmdFBvaW50KHBvaW50QSwgcG9pbnRCLCBkaW1WICogNCk7XG4gICAgICAgICAgICBwb2ludEFzID0gRGV0ZWN0b3IkMS5zaGlmdFBvaW50KHBvaW50QXMsIHBvaW50RCwgZGltSCAqIDQpO1xuICAgICAgICAgICAgcG9pbnRCcyA9IERldGVjdG9yJDEuc2hpZnRQb2ludChwb2ludEIsIHBvaW50QSwgZGltViAqIDQpO1xuICAgICAgICAgICAgcG9pbnRCcyA9IERldGVjdG9yJDEuc2hpZnRQb2ludChwb2ludEJzLCBwb2ludEMsIGRpbUggKiA0KTtcbiAgICAgICAgICAgIHBvaW50Q3MgPSBEZXRlY3RvciQxLnNoaWZ0UG9pbnQocG9pbnRDLCBwb2ludEQsIGRpbVYgKiA0KTtcbiAgICAgICAgICAgIHBvaW50Q3MgPSBEZXRlY3RvciQxLnNoaWZ0UG9pbnQocG9pbnRDcywgcG9pbnRCLCBkaW1IICogNCk7XG4gICAgICAgICAgICBwb2ludERzID0gRGV0ZWN0b3IkMS5zaGlmdFBvaW50KHBvaW50RCwgcG9pbnRDLCBkaW1WICogNCk7XG4gICAgICAgICAgICBwb2ludERzID0gRGV0ZWN0b3IkMS5zaGlmdFBvaW50KHBvaW50RHMsIHBvaW50QSwgZGltSCAqIDQpO1xuICAgICAgICAgICAgcmV0dXJuIFtwb2ludEFzLCBwb2ludEJzLCBwb2ludENzLCBwb2ludERzXTtcbiAgICAgICAgfVxuICAgICAgICBpc1ZhbGlkKHApIHtcbiAgICAgICAgICAgIHJldHVybiBwLmdldFgoKSA+PSAwICYmIHAuZ2V0WCgpIDwgdGhpcy5pbWFnZS5nZXRXaWR0aCgpICYmIHAuZ2V0WSgpID4gMCAmJiBwLmdldFkoKSA8IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHNhbXBsZUdyaWQoaW1hZ2UsIHRvcExlZnQsIGJvdHRvbUxlZnQsIGJvdHRvbVJpZ2h0LCB0b3BSaWdodCwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWQoaW1hZ2UsIGRpbWVuc2lvblgsIGRpbWVuc2lvblksIDAuNSwgMC41LCBkaW1lbnNpb25YIC0gMC41LCAwLjUsIGRpbWVuc2lvblggLSAwLjUsIGRpbWVuc2lvblkgLSAwLjUsIDAuNSwgZGltZW5zaW9uWSAtIDAuNSwgdG9wTGVmdC5nZXRYKCksIHRvcExlZnQuZ2V0WSgpLCB0b3BSaWdodC5nZXRYKCksIHRvcFJpZ2h0LmdldFkoKSwgYm90dG9tUmlnaHQuZ2V0WCgpLCBib3R0b21SaWdodC5nZXRZKCksIGJvdHRvbUxlZnQuZ2V0WCgpLCBib3R0b21MZWZ0LmdldFkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50cyB0aGUgbnVtYmVyIG9mIGJsYWNrL3doaXRlIHRyYW5zaXRpb25zIGJldHdlZW4gdHdvIHBvaW50cywgdXNpbmcgc29tZXRoaW5nIGxpa2UgQnJlc2VuaGFtJ3MgYWxnb3JpdGhtLlxuICAgICAgICAgKi9cbiAgICAgICAgdHJhbnNpdGlvbnNCZXR3ZWVuKGZyb20sIHRvKSB7XG4gICAgICAgICAgICAvLyBTZWUgUVIgQ29kZSBEZXRlY3Rvciwgc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKClcbiAgICAgICAgICAgIGxldCBmcm9tWCA9IE1hdGgudHJ1bmMoZnJvbS5nZXRYKCkpO1xuICAgICAgICAgICAgbGV0IGZyb21ZID0gTWF0aC50cnVuYyhmcm9tLmdldFkoKSk7XG4gICAgICAgICAgICBsZXQgdG9YID0gTWF0aC50cnVuYyh0by5nZXRYKCkpO1xuICAgICAgICAgICAgbGV0IHRvWSA9IE1hdGgudHJ1bmModG8uZ2V0WSgpKTtcbiAgICAgICAgICAgIGxldCBzdGVlcCA9IE1hdGguYWJzKHRvWSAtIGZyb21ZKSA+IE1hdGguYWJzKHRvWCAtIGZyb21YKTtcbiAgICAgICAgICAgIGlmIChzdGVlcCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gZnJvbVg7XG4gICAgICAgICAgICAgICAgZnJvbVggPSBmcm9tWTtcbiAgICAgICAgICAgICAgICBmcm9tWSA9IHRlbXA7XG4gICAgICAgICAgICAgICAgdGVtcCA9IHRvWDtcbiAgICAgICAgICAgICAgICB0b1ggPSB0b1k7XG4gICAgICAgICAgICAgICAgdG9ZID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBkeCA9IE1hdGguYWJzKHRvWCAtIGZyb21YKTtcbiAgICAgICAgICAgIGxldCBkeSA9IE1hdGguYWJzKHRvWSAtIGZyb21ZKTtcbiAgICAgICAgICAgIGxldCBlcnJvciA9IC1keCAvIDI7XG4gICAgICAgICAgICBsZXQgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTtcbiAgICAgICAgICAgIGxldCB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xO1xuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25zID0gMDtcbiAgICAgICAgICAgIGxldCBpbkJsYWNrID0gdGhpcy5pbWFnZS5nZXQoc3RlZXAgPyBmcm9tWSA6IGZyb21YLCBzdGVlcCA/IGZyb21YIDogZnJvbVkpO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHRvWDsgeCArPSB4c3RlcCkge1xuICAgICAgICAgICAgICAgIGxldCBpc0JsYWNrID0gdGhpcy5pbWFnZS5nZXQoc3RlZXAgPyB5IDogeCwgc3RlZXAgPyB4IDogeSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQmxhY2sgIT09IGluQmxhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbnMrKztcbiAgICAgICAgICAgICAgICAgICAgaW5CbGFjayA9IGlzQmxhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVycm9yICs9IGR5O1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgeSArPSB5c3RlcDtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgLT0gZHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25zO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBUaGlzIGltcGxlbWVudGF0aW9uIGNhbiBkZXRlY3QgYW5kIGRlY29kZSBEYXRhIE1hdHJpeCBjb2RlcyBpbiBhbiBpbWFnZS5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgYmJyb3duQGdvb2dsZS5jb20gKEJyaWFuIEJyb3duKVxuICAgICAqL1xuICAgIGNsYXNzIERhdGFNYXRyaXhSZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyJDEoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogTG9jYXRlcyBhbmQgZGVjb2RlcyBhIERhdGEgTWF0cml4IGNvZGUgaW4gYW4gaW1hZ2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gYSBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb250ZW50IGVuY29kZWQgYnkgdGhlIERhdGEgTWF0cml4IGNvZGVcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIERhdGEgTWF0cml4IGNvZGUgY2Fubm90IGJlIGZvdW5kXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgRGF0YSBNYXRyaXggY29kZSBjYW5ub3QgYmUgZGVjb2RlZFxuICAgICAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHNcbiAgICAgICAgICovXG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICAvLyBwdWJsaWMgUmVzdWx0IGRlY29kZShCaW5hcnlCaXRtYXAgaW1hZ2UpIHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiB7XG4gICAgICAgIC8vICAgcmV0dXJuIGRlY29kZShpbWFnZSwgbnVsbCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIGRlY29kZShpbWFnZSwgaGludHMgPSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgZGVjb2RlclJlc3VsdDtcbiAgICAgICAgICAgIGxldCBwb2ludHM7XG4gICAgICAgICAgICBpZiAoaGludHMgIT0gbnVsbCAmJiBoaW50cy5oYXMoRGVjb2RlSGludFR5cGUkMS5QVVJFX0JBUkNPREUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYml0cyA9IERhdGFNYXRyaXhSZWFkZXIuZXh0cmFjdFB1cmVCaXRzKGltYWdlLmdldEJsYWNrTWF0cml4KCkpO1xuICAgICAgICAgICAgICAgIGRlY29kZXJSZXN1bHQgPSB0aGlzLmRlY29kZXIuZGVjb2RlKGJpdHMpO1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IERhdGFNYXRyaXhSZWFkZXIuTk9fUE9JTlRTO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV0ZWN0b3JSZXN1bHQgPSBuZXcgRGV0ZWN0b3IkMShpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoKTtcbiAgICAgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZShkZXRlY3RvclJlc3VsdC5nZXRCaXRzKCkpO1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IGRldGVjdG9yUmVzdWx0LmdldFBvaW50cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmF3Qnl0ZXMgPSBkZWNvZGVyUmVzdWx0LmdldFJhd0J5dGVzKCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgUmVzdWx0KGRlY29kZXJSZXN1bHQuZ2V0VGV4dCgpLCByYXdCeXRlcywgOCAqIHJhd0J5dGVzLmxlbmd0aCwgcG9pbnRzLCBCYXJjb2RlRm9ybWF0JDEuREFUQV9NQVRSSVgsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7XG4gICAgICAgICAgICBpZiAoYnl0ZVNlZ21lbnRzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0TWV0YWRhdGEoUmVzdWx0TWV0YWRhdGFUeXBlJDEuQllURV9TRUdNRU5UUywgYnl0ZVNlZ21lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTtcbiAgICAgICAgICAgIGlmIChlY0xldmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0TWV0YWRhdGEoUmVzdWx0TWV0YWRhdGFUeXBlJDEuRVJST1JfQ09SUkVDVElPTl9MRVZFTCwgZWNMZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgZGV0ZWN0cyBhIGNvZGUgaW4gYSBcInB1cmVcIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2VcbiAgICAgICAgICogd2hpY2ggY29udGFpbnMgb25seSBhbiB1bnJvdGF0ZWQsIHVuc2tld2VkLCBpbWFnZSBvZiBhIGNvZGUsIHdpdGggc29tZSB3aGl0ZSBib3JkZXJcbiAgICAgICAgICogYXJvdW5kIGl0LiBUaGlzIGlzIGEgc3BlY2lhbGl6ZWQgbWV0aG9kIHRoYXQgd29ya3MgZXhjZXB0aW9uYWxseSBmYXN0IGluIHRoaXMgc3BlY2lhbFxuICAgICAgICAgKiBjYXNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLlFSQ29kZVJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGV4dHJhY3RQdXJlQml0cyhpbWFnZSkge1xuICAgICAgICAgICAgY29uc3QgbGVmdFRvcEJsYWNrID0gaW1hZ2UuZ2V0VG9wTGVmdE9uQml0KCk7XG4gICAgICAgICAgICBjb25zdCByaWdodEJvdHRvbUJsYWNrID0gaW1hZ2UuZ2V0Qm90dG9tUmlnaHRPbkJpdCgpO1xuICAgICAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PSBudWxsIHx8IHJpZ2h0Qm90dG9tQmxhY2sgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZShsZWZ0VG9wQmxhY2ssIGltYWdlKTtcbiAgICAgICAgICAgIGxldCB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07XG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdO1xuICAgICAgICAgICAgbGV0IGxlZnQgPSBsZWZ0VG9wQmxhY2tbMF07XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHJpZ2h0Qm90dG9tQmxhY2tbMF07XG4gICAgICAgICAgICBjb25zdCBtYXRyaXhXaWR0aCA9IChyaWdodCAtIGxlZnQgKyAxKSAvIG1vZHVsZVNpemU7XG4gICAgICAgICAgICBjb25zdCBtYXRyaXhIZWlnaHQgPSAoYm90dG9tIC0gdG9wICsgMSkgLyBtb2R1bGVTaXplO1xuICAgICAgICAgICAgaWYgKG1hdHJpeFdpZHRoIDw9IDAgfHwgbWF0cml4SGVpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFB1c2ggaW4gdGhlIFwiYm9yZGVyXCIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnRcbiAgICAgICAgICAgIC8vIHNhbXBsaW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIG1vZHVsZS4gSnVzdCBpbiBjYXNlIHRoZSBpbWFnZSBpcyBhXG4gICAgICAgICAgICAvLyBsaXR0bGUgb2ZmLCB0aGlzIHdpbGwgaGVscCByZWNvdmVyLlxuICAgICAgICAgICAgY29uc3QgbnVkZ2UgPSBtb2R1bGVTaXplIC8gMjtcbiAgICAgICAgICAgIHRvcCArPSBudWRnZTtcbiAgICAgICAgICAgIGxlZnQgKz0gbnVkZ2U7XG4gICAgICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0c1xuICAgICAgICAgICAgY29uc3QgYml0cyA9IG5ldyBCaXRNYXRyaXgobWF0cml4V2lkdGgsIG1hdHJpeEhlaWdodCk7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaU9mZnNldCA9IHRvcCArIHkgKiBtb2R1bGVTaXplO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWF0cml4V2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyB4ICogbW9kdWxlU2l6ZSwgaU9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIG1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSkge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWFnZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgbGV0IHggPSBsZWZ0VG9wQmxhY2tbMF07XG4gICAgICAgICAgICBjb25zdCB5ID0gbGVmdFRvcEJsYWNrWzFdO1xuICAgICAgICAgICAgd2hpbGUgKHggPCB3aWR0aCAmJiBpbWFnZS5nZXQoeCwgeSkpIHtcbiAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeCA9PT0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZVNpemUgPSB4IC0gbGVmdFRvcEJsYWNrWzBdO1xuICAgICAgICAgICAgaWYgKG1vZHVsZVNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIERhdGFNYXRyaXhSZWFkZXIuTk9fUE9JTlRTID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBNb3ZpbmcgdG8gQHp4aW5nL2Jyb3dzZXJcbiAgICAgKlxuICAgICAqIFFSIENvZGUgcmVhZGVyIHRvIHVzZSBmcm9tIGJyb3dzZXIuXG4gICAgICovXG4gICAgY2xhc3MgQnJvd3NlckRhdGFtYXRyaXhDb2RlUmVhZGVyIGV4dGVuZHMgQnJvd3NlckNvZGVSZWFkZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBCcm93c2VyUVJDb2RlUmVhZGVyLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVCZXR3ZWVuU2NhbnNNaWxsaXM9NTAwXSB0aGUgdGltZSBkZWxheSBiZXR3ZWVuIHN1YnNlcXVlbnQgZGVjb2RlIHRyaWVzXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcih0aW1lQmV0d2VlblNjYW5zTWlsbGlzID0gNTAwKSB7XG4gICAgICAgICAgICBzdXBlcihuZXcgRGF0YU1hdHJpeFJlYWRlcigpLCB0aW1lQmV0d2VlblNjYW5zTWlsbGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzO1xuICAgIChmdW5jdGlvbiAoRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMpIHtcbiAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbXCJMXCJdID0gMF0gPSBcIkxcIjtcbiAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbXCJNXCJdID0gMV0gPSBcIk1cIjtcbiAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbXCJRXCJdID0gMl0gPSBcIlFcIjtcbiAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbXCJIXCJdID0gM10gPSBcIkhcIjtcbiAgICB9KShFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgPSB7fSkpO1xuICAgIC8qKlxuICAgICAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHNcbiAgICAgKiBkZWZpbmVkIGJ5IHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRXJyb3JDb3JyZWN0aW9uTGV2ZWwge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zdHJpbmdWYWx1ZSA9IHN0cmluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0cztcbiAgICAgICAgICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTtcbiAgICAgICAgICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLkZPUl9WQUxVRS5zZXQodmFsdWUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGdldFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Qml0cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGZyb21TdHJpbmcocykge1xuICAgICAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MO1xuICAgICAgICAgICAgICAgIGNhc2UgJ00nOiByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuTTtcbiAgICAgICAgICAgICAgICBjYXNlICdRJzogcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsLlE7XG4gICAgICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihzICsgJ25vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZ1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVxdWFscyhvKSB7XG4gICAgICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXIgPSBvO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gYml0cyBpbnQgY29udGFpbmluZyB0aGUgdHdvIGJpdHMgZW5jb2RpbmcgYSBRUiBDb2RlJ3MgZXJyb3IgY29ycmVjdGlvbiBsZXZlbFxuICAgICAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZm9yQml0cyhiaXRzIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChiaXRzIDwgMCB8fCBiaXRzID49IEVycm9yQ29ycmVjdGlvbkxldmVsLkZPUl9CSVRTLnNpemUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLkZPUl9CSVRTID0gbmV3IE1hcCgpO1xuICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLkZPUl9WQUxVRSA9IG5ldyBNYXAoKTtcbiAgICAvKiogTCA9IH43JSBjb3JyZWN0aW9uICovXG4gICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuTCA9IG5ldyBFcnJvckNvcnJlY3Rpb25MZXZlbChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcy5MLCAnTCcsIDB4MDEpO1xuICAgIC8qKiBNID0gfjE1JSBjb3JyZWN0aW9uICovXG4gICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuTSA9IG5ldyBFcnJvckNvcnJlY3Rpb25MZXZlbChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcy5NLCAnTScsIDB4MDApO1xuICAgIC8qKiBRID0gfjI1JSBjb3JyZWN0aW9uICovXG4gICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuUSA9IG5ldyBFcnJvckNvcnJlY3Rpb25MZXZlbChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcy5RLCAnUScsIDB4MDMpO1xuICAgIC8qKiBIID0gfjMwJSBjb3JyZWN0aW9uICovXG4gICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuSCA9IG5ldyBFcnJvckNvcnJlY3Rpb25MZXZlbChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcy5ILCAnSCcsIDB4MDIpO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZFxuICAgICAqIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAc2VlIERhdGFNYXNrXG4gICAgICogQHNlZSBFcnJvckNvcnJlY3Rpb25MZXZlbFxuICAgICAqL1xuICAgIGNsYXNzIEZvcm1hdEluZm9ybWF0aW9uIHtcbiAgICAgICAgY29uc3RydWN0b3IoZm9ybWF0SW5mbyAvKmludCovKSB7XG4gICAgICAgICAgICAvLyBCaXRzIDMsNFxuICAgICAgICAgICAgdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9IEVycm9yQ29ycmVjdGlvbkxldmVsLmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTtcbiAgICAgICAgICAgIC8vIEJvdHRvbSAzIGJpdHNcbiAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPSAvKihieXRlKSAqLyAoZm9ybWF0SW5mbyAmIDB4MDcpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBudW1CaXRzRGlmZmVyaW5nKGEgLyppbnQqLywgYiAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gSW50ZWdlci5iaXRDb3VudChhIF4gYik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBtYXNrZWRGb3JtYXRJbmZvMSBmb3JtYXQgaW5mbyBpbmRpY2F0b3IsIHdpdGggbWFzayBzdGlsbCBhcHBsaWVkXG4gICAgICAgICAqIEBwYXJhbSBtYXNrZWRGb3JtYXRJbmZvMiBzZWNvbmQgY29weSBvZiBzYW1lIGluZm87IGJvdGggYXJlIGNoZWNrZWQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2hcbiAgICAgICAgICogQHJldHVybiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZm9ybWF0IGl0IHNwZWNpZmllcywgb3Ige0Bjb2RlIG51bGx9XG4gICAgICAgICAqICBpZiBkb2Vzbid0IHNlZW0gdG8gbWF0Y2ggYW55IGtub3duIHBhdHRlcm5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBkZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSAvKmludCovLCBtYXNrZWRGb3JtYXRJbmZvMiAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXRJbmZvID0gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSwgbWFza2VkRm9ybWF0SW5mbzIpO1xuICAgICAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0SW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHlcbiAgICAgICAgICAgIC8vIGRvIG5vdCBtYXNrIHRoaXMgaW5mby4gVHJ5IGFnYWluIGJ5IGFjdHVhbGx5IG1hc2tpbmcgdGhlIHBhdHRlcm5cbiAgICAgICAgICAgIC8vIGZpcnN0XG4gICAgICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgaW50IGluIEZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgd2l0aCBmZXdlc3QgYml0cyBkaWZmZXJpbmdcbiAgICAgICAgICAgIGxldCBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgICAgICAgbGV0IGJlc3RGb3JtYXRJbmZvID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGVjb2RlSW5mbyBvZiBGb3JtYXRJbmZvcm1hdGlvbi5GT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pO1xuICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTtcbiAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzXG4gICAgICAgICAgICAvLyBkaWZmZXJpbmcgbWVhbnMgd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGdldEVycm9yQ29ycmVjdGlvbkxldmVsKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RGF0YU1hc2soKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFzaztcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGhhc2hDb2RlKCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBlcXVhbHMobykge1xuICAgICAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEZvcm1hdEluZm9ybWF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG90aGVyID0gbztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID09PSBvdGhlci5lcnJvckNvcnJlY3Rpb25MZXZlbCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrO1xuICAgICAgICB9XG4gICAgfVxuICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIgPSAweDU0MTI7XG4gICAgLyoqXG4gICAgICogU2VlIElTTyAxODAwNDoyMDA2LCBBbm5leCBDLCBUYWJsZSBDLjFcbiAgICAgKi9cbiAgICBGb3JtYXRJbmZvcm1hdGlvbi5GT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQID0gW1xuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NTQxMiwgMHgwMF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NTEyNSwgMHgwMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NUU3QywgMHgwMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NUI0QiwgMHgwM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NDVGOSwgMHgwNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NDBDRSwgMHgwNV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NEY5NywgMHgwNl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NEFBMCwgMHgwN10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NzdDNCwgMHgwOF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NzJGMywgMHgwOV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4N0RBQSwgMHgwQV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4Nzg5RCwgMHgwQl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NjYyRiwgMHgwQ10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NjMxOCwgMHgwRF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4NkM0MSwgMHgwRV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4Njk3NiwgMHgwRl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MTY4OSwgMHgxMF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MTNCRSwgMHgxMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MUNFNywgMHgxMl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MTlEMCwgMHgxM10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MDc2MiwgMHgxNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MDI1NSwgMHgxNV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MEQwQywgMHgxNl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MDgzQiwgMHgxN10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MzU1RiwgMHgxOF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MzA2OCwgMHgxOV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4M0YzMSwgMHgxQV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4M0EwNiwgMHgxQl0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MjRCNCwgMHgxQ10pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MjE4MywgMHgxRF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MkVEQSwgMHgxRV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzB4MkJFRCwgMHgxRl0pLFxuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiA8cD5FbmNhcHN1bGF0ZXMgYSBzZXQgb2YgZXJyb3ItY29ycmVjdGlvbiBibG9ja3MgaW4gb25lIHN5bWJvbCB2ZXJzaW9uLiBNb3N0IHZlcnNpb25zIHdpbGxcbiAgICAgKiB1c2UgYmxvY2tzIG9mIGRpZmZlcmluZyBzaXplcyB3aXRoaW4gb25lIHZlcnNpb24sIHNvLCB0aGlzIGVuY2Fwc3VsYXRlcyB0aGUgcGFyYW1ldGVycyBmb3JcbiAgICAgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXRcbiAgICAgKiB3aWxsIGJlIHRoZSBzYW1lIGFjcm9zcyBhbGwgYmxvY2tzIHdpdGhpbiBvbmUgdmVyc2lvbi48L3A+XG4gICAgICovXG4gICAgY2xhc3MgRUNCbG9ja3MkMSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLywgLi4uZWNCbG9ja3MpIHtcbiAgICAgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7XG4gICAgICAgICAgICB0aGlzLmVjQmxvY2tzID0gZWNCbG9ja3M7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RUNDb2Rld29yZHNQZXJCbG9jaygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TnVtQmxvY2tzKCkge1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrcztcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWNCbG9jayBvZiBlY0Jsb2Nrcykge1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IGVjQmxvY2suZ2V0Q291bnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcbiAgICAgICAgfVxuICAgICAgICBnZXRUb3RhbEVDQ29kZXdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RUNCbG9ja3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2NrcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyB0aGUgcGFyYW1ldGVycyBmb3Igb25lIGVycm9yLWNvcnJlY3Rpb24gYmxvY2sgaW4gb25lIHN5bWJvbCB2ZXJzaW9uLlxuICAgICAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlXG4gICAgICogcGFyYW1ldGVycyBpcyB1c2VkIGNvbnNlY3V0aXZlbHkgaW4gdGhlIFFSIGNvZGUgdmVyc2lvbidzIGZvcm1hdC48L3A+XG4gICAgICovXG4gICAgY2xhc3MgRUNCJDEge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb3VudCAvKmludCovLCBkYXRhQ29kZXdvcmRzIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNvZGV3b3JkcyA9IGRhdGFDb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICBnZXREYXRhQ29kZXdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUNvZGV3b3JkcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IERcbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgVmVyc2lvbiQxIHtcbiAgICAgICAgY29uc3RydWN0b3IodmVyc2lvbk51bWJlciAvKmludCovLCBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVycywgLi4uZWNCbG9ja3MpIHtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7XG4gICAgICAgICAgICB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzID0gYWxpZ25tZW50UGF0dGVybkNlbnRlcnM7XG4gICAgICAgICAgICB0aGlzLmVjQmxvY2tzID0gZWNCbG9ja3M7XG4gICAgICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICAgICAgY29uc3QgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7XG4gICAgICAgICAgICBjb25zdCBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVjQmxvY2sgb2YgZWNiQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCkgKiAoZWNCbG9jay5nZXREYXRhQ29kZXdvcmRzKCkgKyBlY0NvZGV3b3Jkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvdGFsQ29kZXdvcmRzID0gdG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0VmVyc2lvbk51bWJlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnNpb25OdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVycztcbiAgICAgICAgfVxuICAgICAgICBnZXRUb3RhbENvZGV3b3JkcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzO1xuICAgICAgICB9XG4gICAgICAgIGdldERpbWVuc2lvbkZvclZlcnNpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gMTcgKyA0ICogdGhpcy52ZXJzaW9uTnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIGdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWNCbG9ja3NbZWNMZXZlbC5nZXRWYWx1ZSgpXTtcbiAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBvcmlnaW5hbCB3YXMgdXNpbmcgb3JkaW5hbCwgYW5kIHVzaW5nIHRoZSBvcmRlciBvZiBsZXZlbHMgYXMgZGVmaW5lZCBpbiBFcnJvckNvcnJlY3Rpb25MZXZlbCBlbnVtIChMTVFIKVxuICAgICAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXJcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+RGVkdWNlcyB2ZXJzaW9uIGluZm9ybWF0aW9uIHB1cmVseSBmcm9tIFFSIENvZGUgZGltZW5zaW9ucy48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBkaW1lbnNpb24gZGltZW5zaW9uIGluIG1vZHVsZXNcbiAgICAgICAgICogQHJldHVybiBWZXJzaW9uIGZvciBhIFFSIENvZGUgb2YgdGhhdCBkaW1lbnNpb25cbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0XG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0UHJvdmlzaW9uYWxWZXJzaW9uRm9yRGltZW5zaW9uKGRpbWVuc2lvbiAvKmludCovKSB7XG4gICAgICAgICAgICBpZiAoZGltZW5zaW9uICUgNCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGdldFZlcnNpb25Gb3JOdW1iZXIodmVyc2lvbk51bWJlciAvKmludCovKSB7XG4gICAgICAgICAgICBpZiAodmVyc2lvbk51bWJlciA8IDEgfHwgdmVyc2lvbk51bWJlciA+IDQwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24kMS5WRVJTSU9OU1t2ZXJzaW9uTnVtYmVyIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGRlY29kZVZlcnNpb25JbmZvcm1hdGlvbih2ZXJzaW9uQml0cyAvKmludCovKSB7XG4gICAgICAgICAgICBsZXQgYmVzdERpZmZlcmVuY2UgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcbiAgICAgICAgICAgIGxldCBiZXN0VmVyc2lvbiA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFZlcnNpb24kMS5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24kMS5WRVJTSU9OX0RFQ09ERV9JTkZPW2ldO1xuICAgICAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLlxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRWZXJzaW9uID09PSB2ZXJzaW9uQml0cykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmVyc2lvbiQxLmdldFZlcnNpb25Gb3JOdW1iZXIoaSArIDcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBzZWVuIHNvIGZhclxuICAgICAgICAgICAgICAgIGNvbnN0IGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyh2ZXJzaW9uQml0cywgdGFyZ2V0VmVyc2lvbik7XG4gICAgICAgICAgICAgICAgaWYgKGJpdHNEaWZmZXJlbmNlIDwgYmVzdERpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNztcbiAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBjYW4gdG9sZXJhdGUgdXAgdG8gMyBiaXRzIG9mIGVycm9yIHNpbmNlIG5vIHR3byB2ZXJzaW9uIGluZm8gY29kZXdvcmRzIHdpbGxcbiAgICAgICAgICAgIC8vIGRpZmZlciBpbiBsZXNzIHRoYW4gOCBiaXRzLlxuICAgICAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVmVyc2lvbiQxLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYSBjbG9zZSBlbm91Z2ggbWF0Y2gsIGZhaWxcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRVxuICAgICAgICAgKi9cbiAgICAgICAgYnVpbGRGdW5jdGlvblBhdHRlcm4oKSB7XG4gICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLmdldERpbWVuc2lvbkZvclZlcnNpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGJpdE1hdHJpeCA9IG5ldyBCaXRNYXRyaXgoZGltZW5zaW9uKTtcbiAgICAgICAgICAgIC8vIFRvcCBsZWZ0IGZpbmRlciBwYXR0ZXJuICsgc2VwYXJhdG9yICsgZm9ybWF0XG4gICAgICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpO1xuICAgICAgICAgICAgLy8gVG9wIHJpZ2h0IGZpbmRlciBwYXR0ZXJuICsgc2VwYXJhdG9yICsgZm9ybWF0XG4gICAgICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKGRpbWVuc2lvbiAtIDgsIDAsIDgsIDkpO1xuICAgICAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXRcbiAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oMCwgZGltZW5zaW9uIC0gOCwgOSwgOCk7XG4gICAgICAgICAgICAvLyBBbGlnbm1lbnQgcGF0dGVybnNcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBtYXg7IHgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG1heDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoeCA9PT0gMCAmJiAoeSA9PT0gMCB8fCB5ID09PSBtYXggLSAxKSkgfHwgKHggPT09IG1heCAtIDEgJiYgeSA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuXG4gICAgICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDYsIDksIDEsIGRpbWVuc2lvbiAtIDE3KTtcbiAgICAgICAgICAgIC8vIEhvcml6b250YWwgdGltaW5nIHBhdHRlcm5cbiAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpO1xuICAgICAgICAgICAgaWYgKHRoaXMudmVyc2lvbk51bWJlciA+IDYpIHtcbiAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGluZm8sIHRvcCByaWdodFxuICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpO1xuICAgICAgICAgICAgICAgIC8vIFZlcnNpb24gaW5mbywgYm90dG9tIGxlZnRcbiAgICAgICAgICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIGRpbWVuc2lvbiAtIDExLCA2LCAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiaXRNYXRyaXg7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiAnJyArIHRoaXMudmVyc2lvbk51bWJlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBELlxuICAgICAgICogRWxlbWVudCBpIHJlcHJlc2VudHMgdGhlIHJhdyB2ZXJzaW9uIGJpdHMgdGhhdCBzcGVjaWZ5IHZlcnNpb24gaSArIDdcbiAgICAgICAqL1xuICAgIFZlcnNpb24kMS5WRVJTSU9OX0RFQ09ERV9JTkZPID0gSW50MzJBcnJheS5mcm9tKFtcbiAgICAgICAgMHgwN0M5NCwgMHgwODVCQywgMHgwOUE5OSwgMHgwQTREMywgMHgwQkJGNixcbiAgICAgICAgMHgwQzc2MiwgMHgwRDg0NywgMHgwRTYwRCwgMHgwRjkyOCwgMHgxMEI3OCxcbiAgICAgICAgMHgxMTQ1RCwgMHgxMkExNywgMHgxMzUzMiwgMHgxNDlBNiwgMHgxNTY4MyxcbiAgICAgICAgMHgxNjhDOSwgMHgxNzdFQywgMHgxOEVDNCwgMHgxOTFFMSwgMHgxQUZBQixcbiAgICAgICAgMHgxQjA4RSwgMHgxQ0MxQSwgMHgxRDMzRiwgMHgxRUQ3NSwgMHgxRjI1MCxcbiAgICAgICAgMHgyMDlENSwgMHgyMTZGMCwgMHgyMjhCQSwgMHgyMzc5RiwgMHgyNEIwQixcbiAgICAgICAgMHgyNTQyRSwgMHgyNkE2NCwgMHgyNzU0MSwgMHgyOEM2OVxuICAgIF0pO1xuICAgIC8qKlxuICAgICAgICogU2VlIElTTyAxODAwNDoyMDA2IDYuNS4xIFRhYmxlIDlcbiAgICAgICAqL1xuICAgIFZlcnNpb24kMS5WRVJTSU9OUyA9IFtcbiAgICAgICAgbmV3IFZlcnNpb24kMSgxLCBuZXcgSW50MzJBcnJheSgwKSwgbmV3IEVDQmxvY2tzJDEoNywgbmV3IEVDQiQxKDEsIDE5KSksIG5ldyBFQ0Jsb2NrcyQxKDEwLCBuZXcgRUNCJDEoMSwgMTYpKSwgbmV3IEVDQmxvY2tzJDEoMTMsIG5ldyBFQ0IkMSgxLCAxMykpLCBuZXcgRUNCbG9ja3MkMSgxNywgbmV3IEVDQiQxKDEsIDkpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3MkMSgxMCwgbmV3IEVDQiQxKDEsIDM0KSksIG5ldyBFQ0Jsb2NrcyQxKDE2LCBuZXcgRUNCJDEoMSwgMjgpKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSgxLCAyMikpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDEsIDE2KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDMsIEludDMyQXJyYXkuZnJvbShbNiwgMjJdKSwgbmV3IEVDQmxvY2tzJDEoMTUsIG5ldyBFQ0IkMSgxLCA1NSkpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDEsIDQ0KSksIG5ldyBFQ0Jsb2NrcyQxKDE4LCBuZXcgRUNCJDEoMiwgMTcpKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSgyLCAxMykpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSg0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2XSksIG5ldyBFQ0Jsb2NrcyQxKDIwLCBuZXcgRUNCJDEoMSwgODApKSwgbmV3IEVDQmxvY2tzJDEoMTgsIG5ldyBFQ0IkMSgyLCAzMikpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDIsIDI0KSksIG5ldyBFQ0Jsb2NrcyQxKDE2LCBuZXcgRUNCJDEoNCwgOSkpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSg1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2NrcyQxKDI2LCBuZXcgRUNCJDEoMSwgMTA4KSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoMiwgNDMpKSwgbmV3IEVDQmxvY2tzJDEoMTgsIG5ldyBFQ0IkMSgyLCAxNSksIG5ldyBFQ0IkMSgyLCAxNikpLCBuZXcgRUNCbG9ja3MkMSgyMiwgbmV3IEVDQiQxKDIsIDExKSwgbmV3IEVDQiQxKDIsIDEyKSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzJDEoMTgsIG5ldyBFQ0IkMSgyLCA2OCkpLCBuZXcgRUNCbG9ja3MkMSgxNiwgbmV3IEVDQiQxKDQsIDI3KSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoNCwgMTkpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSg0LCAxNSkpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSg3LCBJbnQzMkFycmF5LmZyb20oWzYsIDIyLCAzOF0pLCBuZXcgRUNCbG9ja3MkMSgyMCwgbmV3IEVDQiQxKDIsIDc4KSksIG5ldyBFQ0Jsb2NrcyQxKDE4LCBuZXcgRUNCJDEoNCwgMzEpKSwgbmV3IEVDQmxvY2tzJDEoMTgsIG5ldyBFQ0IkMSgyLCAxNCksIG5ldyBFQ0IkMSg0LCAxNSkpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDQsIDEzKSwgbmV3IEVDQiQxKDEsIDE0KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDgsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDQyXSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoMiwgOTcpKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSgyLCAzOCksIG5ldyBFQ0IkMSgyLCAzOSkpLCBuZXcgRUNCbG9ja3MkMSgyMiwgbmV3IEVDQiQxKDQsIDE4KSwgbmV3IEVDQiQxKDIsIDE5KSksIG5ldyBFQ0Jsb2NrcyQxKDI2LCBuZXcgRUNCJDEoNCwgMTQpLCBuZXcgRUNCJDEoMiwgMTUpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoOSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDZdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgyLCAxMTYpKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSgzLCAzNiksIG5ldyBFQ0IkMSgyLCAzNykpLCBuZXcgRUNCbG9ja3MkMSgyMCwgbmV3IEVDQiQxKDQsIDE2KSwgbmV3IEVDQiQxKDQsIDE3KSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoNCwgMTIpLCBuZXcgRUNCJDEoNCwgMTMpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2NrcyQxKDE4LCBuZXcgRUNCJDEoMiwgNjgpLCBuZXcgRUNCJDEoMiwgNjkpKSwgbmV3IEVDQmxvY2tzJDEoMjYsIG5ldyBFQ0IkMSg0LCA0MyksIG5ldyBFQ0IkMSgxLCA0NCkpLCBuZXcgRUNCbG9ja3MkMSgyNCwgbmV3IEVDQiQxKDYsIDE5KSwgbmV3IEVDQiQxKDIsIDIwKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoNiwgMTUpLCBuZXcgRUNCJDEoMiwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTEsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0XSksIG5ldyBFQ0Jsb2NrcyQxKDIwLCBuZXcgRUNCJDEoNCwgODEpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxLCA1MCksIG5ldyBFQ0IkMSg0LCA1MSkpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDQsIDIyKSwgbmV3IEVDQiQxKDQsIDIzKSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoMywgMTIpLCBuZXcgRUNCJDEoOCwgMTMpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoMiwgOTIpLCBuZXcgRUNCJDEoMiwgOTMpKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSg2LCAzNiksIG5ldyBFQ0IkMSgyLCAzNykpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDQsIDIwKSwgbmV3IEVDQiQxKDYsIDIxKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoNywgMTQpLCBuZXcgRUNCJDEoNCwgMTUpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTMsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyXSksIG5ldyBFQ0Jsb2NrcyQxKDI2LCBuZXcgRUNCJDEoNCwgMTA3KSksIG5ldyBFQ0Jsb2NrcyQxKDIyLCBuZXcgRUNCJDEoOCwgMzcpLCBuZXcgRUNCJDEoMSwgMzgpKSwgbmV3IEVDQmxvY2tzJDEoMjQsIG5ldyBFQ0IkMSg4LCAyMCksIG5ldyBFQ0IkMSg0LCAyMSkpLCBuZXcgRUNCbG9ja3MkMSgyMiwgbmV3IEVDQiQxKDEyLCAxMSksIG5ldyBFQ0IkMSg0LCAxMikpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMywgMTE1KSwgbmV3IEVDQiQxKDEsIDExNikpLCBuZXcgRUNCbG9ja3MkMSgyNCwgbmV3IEVDQiQxKDQsIDQwKSwgbmV3IEVDQiQxKDUsIDQxKSksIG5ldyBFQ0Jsb2NrcyQxKDIwLCBuZXcgRUNCJDEoMTEsIDE2KSwgbmV3IEVDQiQxKDUsIDE3KSksIG5ldyBFQ0Jsb2NrcyQxKDI0LCBuZXcgRUNCJDEoMTEsIDEyKSwgbmV3IEVDQiQxKDUsIDEzKSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDE1LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA0OCwgNzBdKSwgbmV3IEVDQmxvY2tzJDEoMjIsIG5ldyBFQ0IkMSg1LCA4NyksIG5ldyBFQ0IkMSgxLCA4OCkpLCBuZXcgRUNCbG9ja3MkMSgyNCwgbmV3IEVDQiQxKDUsIDQxKSwgbmV3IEVDQiQxKDUsIDQyKSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoNSwgMjQpLCBuZXcgRUNCJDEoNywgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMjQsIG5ldyBFQ0IkMSgxMSwgMTIpLCBuZXcgRUNCJDEoNywgMTMpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTYsIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDUwLCA3NF0pLCBuZXcgRUNCbG9ja3MkMSgyNCwgbmV3IEVDQiQxKDUsIDk4KSwgbmV3IEVDQiQxKDEsIDk5KSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoNywgNDUpLCBuZXcgRUNCJDEoMywgNDYpKSwgbmV3IEVDQmxvY2tzJDEoMjQsIG5ldyBFQ0IkMSgxNSwgMTkpLCBuZXcgRUNCJDEoMiwgMjApKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgzLCAxNSksIG5ldyBFQ0IkMSgxMywgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDEsIDEwNyksIG5ldyBFQ0IkMSg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxMCwgNDYpLCBuZXcgRUNCJDEoMSwgNDcpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxLCAyMiksIG5ldyBFQ0IkMSgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgyLCAxNCksIG5ldyBFQ0IkMSgxNywgMTUpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMTgsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU2LCA4Ml0pLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDUsIDEyMCksIG5ldyBFQ0IkMSgxLCAxMjEpKSwgbmV3IEVDQmxvY2tzJDEoMjYsIG5ldyBFQ0IkMSg5LCA0MyksIG5ldyBFQ0IkMSg0LCA0NCkpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDE3LCAyMiksIG5ldyBFQ0IkMSgxLCAyMykpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDIsIDE0KSwgbmV3IEVDQiQxKDE5LCAxNSkpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgxOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2XSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMywgMTEzKSwgbmV3IEVDQiQxKDQsIDExNCkpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDMsIDQ0KSwgbmV3IEVDQiQxKDExLCA0NSkpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDE3LCAyMSksIG5ldyBFQ0IkMSg0LCAyMikpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDksIDEzKSwgbmV3IEVDQiQxKDE2LCAxNCkpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMywgMTA3KSwgbmV3IEVDQiQxKDUsIDEwOCkpLCBuZXcgRUNCbG9ja3MkMSgyNiwgbmV3IEVDQiQxKDMsIDQxKSwgbmV3IEVDQiQxKDEzLCA0MikpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDE1LCAyNCksIG5ldyBFQ0IkMSg1LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDE1LCAxNSksIG5ldyBFQ0IkMSgxMCwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjEsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwLCA3MiwgOTRdKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSg0LCAxMTYpLCBuZXcgRUNCJDEoNCwgMTE3KSksIG5ldyBFQ0Jsb2NrcyQxKDI2LCBuZXcgRUNCJDEoMTcsIDQyKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMTcsIDIyKSwgbmV3IEVDQiQxKDYsIDIzKSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTksIDE2KSwgbmV3IEVDQiQxKDYsIDE3KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMiwgMTExKSwgbmV3IEVDQiQxKDcsIDExMikpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDE3LCA0NikpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDcsIDI0KSwgbmV3IEVDQiQxKDE2LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgyNCwgbmV3IEVDQiQxKDM0LCAxMykpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg0LCAxMjEpLCBuZXcgRUNCJDEoNSwgMTIyKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoNCwgNDcpLCBuZXcgRUNCJDEoMTQsIDQ4KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTEsIDI0KSwgbmV3IEVDQiQxKDE0LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDE2LCAxNSksIG5ldyBFQ0IkMSgxNCwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjQsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2XSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoNiwgMTE3KSwgbmV3IEVDQiQxKDQsIDExOCkpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDYsIDQ1KSwgbmV3IEVDQiQxKDE0LCA0NikpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDExLCAyNCksIG5ldyBFQ0IkMSgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgzMCwgMTYpLCBuZXcgRUNCJDEoMiwgMTcpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjUsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4LCA4NCwgMTEwXSksIG5ldyBFQ0Jsb2NrcyQxKDI2LCBuZXcgRUNCJDEoOCwgMTA2KSwgbmV3IEVDQiQxKDQsIDEwNykpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDgsIDQ3KSwgbmV3IEVDQiQxKDEzLCA0OCkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDcsIDI0KSwgbmV3IEVDQiQxKDIyLCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDIyLCAxNSksIG5ldyBFQ0IkMSgxMywgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMTAsIDExNCksIG5ldyBFQ0IkMSgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxOSwgNDYpLCBuZXcgRUNCJDEoNCwgNDcpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgyOCwgMjIpLCBuZXcgRUNCJDEoNiwgMjMpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgzMywgMTYpLCBuZXcgRUNCJDEoNCwgMTcpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjcsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4XSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoOCwgMTIyKSwgbmV3IEVDQiQxKDQsIDEyMykpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDIyLCA0NSksIG5ldyBFQ0IkMSgzLCA0NikpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDgsIDIzKSwgbmV3IEVDQiQxKDI2LCAyNCkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDEyLCAxNSksIG5ldyBFQ0IkMSgyOCwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMjgsIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDUwLCA3NCwgOTgsIDEyMl0pLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDMsIDExNyksIG5ldyBFQ0IkMSgxMCwgMTE4KSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMywgNDUpLCBuZXcgRUNCJDEoMjMsIDQ2KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoNCwgMjQpLCBuZXcgRUNCJDEoMzEsIDI1KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTEsIDE1KSwgbmV3IEVDQiQxKDMxLCAxNikpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDcsIDExNiksIG5ldyBFQ0IkMSg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgyMSwgNDUpLCBuZXcgRUNCJDEoNywgNDYpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxLCAyMyksIG5ldyBFQ0IkMSgzNywgMjQpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxOSwgMTUpLCBuZXcgRUNCJDEoMjYsIDE2KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDMwLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MiwgNzgsIDEwNCwgMTMwXSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoNSwgMTE1KSwgbmV3IEVDQiQxKDEwLCAxMTYpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxOSwgNDcpLCBuZXcgRUNCJDEoMTAsIDQ4KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTUsIDI0KSwgbmV3IEVDQiQxKDI1LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDIzLCAxNSksIG5ldyBFQ0IkMSgyNSwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMzEsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU2LCA4MiwgMTA4LCAxMzRdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxMywgMTE1KSwgbmV3IEVDQiQxKDMsIDExNikpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDIsIDQ2KSwgbmV3IEVDQiQxKDI5LCA0NykpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDQyLCAyNCksIG5ldyBFQ0IkMSgxLCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDIzLCAxNSksIG5ldyBFQ0IkMSgyOCwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxNywgMTE1KSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMTAsIDQ2KSwgbmV3IEVDQiQxKDIzLCA0NykpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDEwLCAyNCksIG5ldyBFQ0IkMSgzNSwgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxOSwgMTUpLCBuZXcgRUNCJDEoMzUsIDE2KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDMzLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODYsIDExNCwgMTQyXSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTcsIDExNSksIG5ldyBFQ0IkMSgxLCAxMTYpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxNCwgNDYpLCBuZXcgRUNCJDEoMjEsIDQ3KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMjksIDI0KSwgbmV3IEVDQiQxKDE5LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDExLCAxNSksIG5ldyBFQ0IkMSg0NiwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgxMywgMTE1KSwgbmV3IEVDQiQxKDYsIDExNikpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDE0LCA0NiksIG5ldyBFQ0IkMSgyMywgNDcpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg0NCwgMjQpLCBuZXcgRUNCJDEoNywgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg1OSwgMTYpLCBuZXcgRUNCJDEoMSwgMTcpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMzUsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjYsIDE1MF0pLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDEyLCAxMjEpLCBuZXcgRUNCJDEoNywgMTIyKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMTIsIDQ3KSwgbmV3IEVDQiQxKDI2LCA0OCkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDM5LCAyNCksIG5ldyBFQ0IkMSgxNCwgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgyMiwgMTUpLCBuZXcgRUNCJDEoNDEsIDE2KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDM2LCBJbnQzMkFycmF5LmZyb20oWzYsIDI0LCA1MCwgNzYsIDEwMiwgMTI4LCAxNTRdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg2LCAxMjEpLCBuZXcgRUNCJDEoMTQsIDEyMikpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDYsIDQ3KSwgbmV3IEVDQiQxKDM0LCA0OCkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDQ2LCAyNCksIG5ldyBFQ0IkMSgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgyLCAxNSksIG5ldyBFQ0IkMSg2NCwgMTYpKSksXG4gICAgICAgIG5ldyBWZXJzaW9uJDEoMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDE3LCAxMjIpLCBuZXcgRUNCJDEoNCwgMTIzKSksIG5ldyBFQ0Jsb2NrcyQxKDI4LCBuZXcgRUNCJDEoMjksIDQ2KSwgbmV3IEVDQiQxKDE0LCA0NykpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDQ5LCAyNCksIG5ldyBFQ0IkMSgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSgyNCwgMTUpLCBuZXcgRUNCJDEoNDYsIDE2KSkpLFxuICAgICAgICBuZXcgVmVyc2lvbiQxKDM4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMyLCA1OCwgODQsIDExMCwgMTM2LCAxNjJdKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg0LCAxMjIpLCBuZXcgRUNCJDEoMTgsIDEyMykpLCBuZXcgRUNCbG9ja3MkMSgyOCwgbmV3IEVDQiQxKDEzLCA0NiksIG5ldyBFQ0IkMSgzMiwgNDcpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg0OCwgMjQpLCBuZXcgRUNCJDEoMTQsIDI1KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoNDIsIDE1KSwgbmV3IEVDQiQxKDMyLCAxNikpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSgzOSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTQsIDgyLCAxMTAsIDEzOCwgMTY2XSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMjAsIDExNyksIG5ldyBFQ0IkMSg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSg0MCwgNDcpLCBuZXcgRUNCJDEoNywgNDgpKSwgbmV3IEVDQmxvY2tzJDEoMzAsIG5ldyBFQ0IkMSg0MywgMjQpLCBuZXcgRUNCJDEoMjIsIDI1KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTAsIDE1KSwgbmV3IEVDQiQxKDY3LCAxNikpKSxcbiAgICAgICAgbmV3IFZlcnNpb24kMSg0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMTksIDExOCksIG5ldyBFQ0IkMSg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzJDEoMjgsIG5ldyBFQ0IkMSgxOCwgNDcpLCBuZXcgRUNCJDEoMzEsIDQ4KSksIG5ldyBFQ0Jsb2NrcyQxKDMwLCBuZXcgRUNCJDEoMzQsIDI0KSwgbmV3IEVDQiQxKDM0LCAyNSkpLCBuZXcgRUNCbG9ja3MkMSgzMCwgbmV3IEVDQiQxKDIwLCAxNSksIG5ldyBFQ0IkMSg2MSwgMTYpKSlcbiAgICBdO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICB2YXIgRGF0YU1hc2tWYWx1ZXM7XG4gICAgKGZ1bmN0aW9uIChEYXRhTWFza1ZhbHVlcykge1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18wMDBcIl0gPSAwXSA9IFwiREFUQV9NQVNLXzAwMFwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18wMDFcIl0gPSAxXSA9IFwiREFUQV9NQVNLXzAwMVwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18wMTBcIl0gPSAyXSA9IFwiREFUQV9NQVNLXzAxMFwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18wMTFcIl0gPSAzXSA9IFwiREFUQV9NQVNLXzAxMVwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18xMDBcIl0gPSA0XSA9IFwiREFUQV9NQVNLXzEwMFwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18xMDFcIl0gPSA1XSA9IFwiREFUQV9NQVNLXzEwMVwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18xMTBcIl0gPSA2XSA9IFwiREFUQV9NQVNLXzExMFwiO1xuICAgICAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1tcIkRBVEFfTUFTS18xMTFcIl0gPSA3XSA9IFwiREFUQV9NQVNLXzExMVwiO1xuICAgIH0pKERhdGFNYXNrVmFsdWVzIHx8IChEYXRhTWFza1ZhbHVlcyA9IHt9KSk7XG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnNcbiAgICAgKiBvZiB0aGlzIGNsYXNzIGNhbiB1bi1tYXNrIGEgcmF3IEJpdE1hdHJpeC4gRm9yIHNpbXBsaWNpdHksIHRoZXkgd2lsbCB1bm1hc2sgdGhlIGVudGlyZSBCaXRNYXRyaXgsXG4gICAgICogaW5jbHVkaW5nIGFyZWFzIHVzZWQgZm9yIGZpbmRlciBwYXR0ZXJucywgdGltaW5nIHBhdHRlcm5zLCBldGMuIFRoZXNlIGFyZWFzIHNob3VsZCBiZSB1bnVzZWRcbiAgICAgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD5cbiAgICAgKlxuICAgICAqIDxwPk5vdGUgdGhhdCB0aGUgZGlhZ3JhbSBpbiBzZWN0aW9uIDYuOC4xIGlzIG1pc2xlYWRpbmcgc2luY2UgaXQgaW5kaWNhdGVzIHRoYXQgaSBpcyBjb2x1bW4gcG9zaXRpb25cbiAgICAgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIERhdGFNYXNrIHtcbiAgICAgICAgLy8gU2VlIElTTyAxODAwNDoyMDA2IDYuOC4xXG4gICAgICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBpc01hc2tlZCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5pc01hc2tlZCA9IGlzTWFza2VkO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuZCBvZiBlbnVtIGNvbnN0YW50cy5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmRcbiAgICAgICAgICogbWFrZSBpdHMgYml0cyByZWFkeSB0byByZWFkLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzXG4gICAgICAgICAqIEBwYXJhbSBkaW1lbnNpb24gZGltZW5zaW9uIG9mIFFSIENvZGUsIHJlcHJlc2VudGVkIGJ5IGJpdHMsIGJlaW5nIHVubWFza2VkXG4gICAgICAgICAqL1xuICAgICAgICB1bm1hc2tCaXRNYXRyaXgoYml0cywgZGltZW5zaW9uIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpbWVuc2lvbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTWFza2VkKGksIGopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGF0YU1hc2sudmFsdWVzID0gbmV3IE1hcChbXG4gICAgICAgIC8qKlxuICAgICAgICAgKiAwMDA6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMiA9PSAwXG4gICAgICAgICAqL1xuICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDAsIChpIC8qaW50Ki8sIGogLyppbnQqLykgPT4geyByZXR1cm4gKChpICsgaikgJiAweDAxKSA9PT0gMDsgfSldLFxuICAgICAgICAvKipcbiAgICAgICAgICogMDAxOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHggbW9kIDIgPT0gMFxuICAgICAgICAgKi9cbiAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAxLCAoaSAvKmludCovLCBqIC8qaW50Ki8pID0+IHsgcmV0dXJuIChpICYgMHgwMSkgPT09IDA7IH0pXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDAxMDogbWFzayBiaXRzIGZvciB3aGljaCB5IG1vZCAzID09IDBcbiAgICAgICAgICovXG4gICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMCwgKGkgLyppbnQqLywgaiAvKmludCovKSA9PiB7IHJldHVybiBqICUgMyA9PT0gMDsgfSldLFxuICAgICAgICAvKipcbiAgICAgICAgICogMDExOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4ICsgeSkgbW9kIDMgPT0gMFxuICAgICAgICAgKi9cbiAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDExLCAoaSAvKmludCovLCBqIC8qaW50Ki8pID0+IHsgcmV0dXJuIChpICsgaikgJSAzID09PSAwOyB9KV0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiAxMDA6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHgvMiArIHkvMykgbW9kIDIgPT0gMFxuICAgICAgICAgKi9cbiAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAwLCAoaSAvKmludCovLCBqIC8qaW50Ki8pID0+IHsgcmV0dXJuICgoTWF0aC5mbG9vcihpIC8gMikgKyBNYXRoLmZsb29yKGogLyAzKSkgJiAweDAxKSA9PT0gMDsgfSldLFxuICAgICAgICAvKipcbiAgICAgICAgICogMTAxOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHh5IG1vZCAyICsgeHkgbW9kIDMgPT0gMFxuICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCB4eSBtb2QgNiA9PSAwXG4gICAgICAgICAqL1xuICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDEsIChpIC8qaW50Ki8sIGogLyppbnQqLykgPT4geyByZXR1cm4gKGkgKiBqKSAlIDYgPT09IDA7IH0pXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDExMDogbWFzayBiaXRzIGZvciB3aGljaCAoeHkgbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMFxuICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCB4eSBtb2QgNiA8IDNcbiAgICAgICAgICovXG4gICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzExMCwgKGkgLyppbnQqLywgaiAvKmludCovKSA9PiB7IHJldHVybiAoKGkgKiBqKSAlIDYpIDwgMzsgfSldLFxuICAgICAgICAvKipcbiAgICAgICAgICogMTExOiBtYXNrIGJpdHMgZm9yIHdoaWNoICgoeCt5KW1vZCAyICsgeHkgbW9kIDMpIG1vZCAyID09IDBcbiAgICAgICAgICogZXF1aXZhbGVudGx5LCBzdWNoIHRoYXQgKHggKyB5ICsgeHkgbW9kIDMpIG1vZCAyID09IDBcbiAgICAgICAgICovXG4gICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzExMSwgKGkgLyppbnQqLywgaiAvKmludCovKSA9PiB7IHJldHVybiAoKGkgKyBqICsgKChpICogaikgJSAzKSkgJiAweDAxKSA9PT0gMDsgfSldLFxuICAgIF0pO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIEJpdE1hdHJpeFBhcnNlciQxIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBiaXRNYXRyaXgge0BsaW5rIEJpdE1hdHJpeH0gdG8gcGFyc2VcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNFxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoYml0TWF0cml4KSB7XG4gICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBpZiAoZGltZW5zaW9uIDwgMjEgfHwgKGRpbWVuc2lvbiAmIDB4MDMpICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5iaXRNYXRyaXggPSBiaXRNYXRyaXg7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlJlYWRzIGZvcm1hdCBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBGb3JtYXRJbmZvcm1hdGlvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIGZvcm1hdCBpbmZvXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGJvdGggZm9ybWF0IGluZm9ybWF0aW9uIGxvY2F0aW9ucyBjYW5ub3QgYmUgcGFyc2VkIGFzXG4gICAgICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHJlYWRGb3JtYXRJbmZvcm1hdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRGb3JtYXRJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZWRGb3JtYXRJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVhZCB0b3AtbGVmdCBmb3JtYXQgaW5mbyBiaXRzXG4gICAgICAgICAgICBsZXQgZm9ybWF0SW5mb0JpdHMxID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KGksIDgsIGZvcm1hdEluZm9CaXRzMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uXG4gICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoNywgOCwgZm9ybWF0SW5mb0JpdHMxKTtcbiAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg4LCA4LCBmb3JtYXRJbmZvQml0czEpO1xuICAgICAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7XG4gICAgICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gNTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlYWQgdGhlIHRvcC1yaWdodC9ib3R0b20tbGVmdCBwYXR0ZXJuIHRvb1xuICAgICAgICAgICAgY29uc3QgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgZm9ybWF0SW5mb0JpdHMyID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGpNaW4gPSBkaW1lbnNpb24gLSA3O1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGRpbWVuc2lvbiAtIDE7IGogPj0gak1pbjsgai0tKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0SW5mb0JpdHMyID0gdGhpcy5jb3B5Qml0KDgsIGosIGZvcm1hdEluZm9CaXRzMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZGltZW5zaW9uIC0gODsgaSA8IGRpbWVuc2lvbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0SW5mb0JpdHMyID0gdGhpcy5jb3B5Qml0KGksIDgsIGZvcm1hdEluZm9CaXRzMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhcnNlZEZvcm1hdEluZm8gPSBGb3JtYXRJbmZvcm1hdGlvbi5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJzZWRGb3JtYXRJbmZvICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBWZXJzaW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgdmVyc2lvblxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXNcbiAgICAgICAgICogdGhlIHZhbGlkIGVuY29kaW5nIG9mIHZlcnNpb24gaW5mb3JtYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHJlYWRWZXJzaW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZFZlcnNpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLmJpdE1hdHJpeC5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHByb3Zpc2lvbmFsVmVyc2lvbiA9IE1hdGguZmxvb3IoKGRpbWVuc2lvbiAtIDE3KSAvIDQpO1xuICAgICAgICAgICAgaWYgKHByb3Zpc2lvbmFsVmVyc2lvbiA8PSA2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24kMS5nZXRWZXJzaW9uRm9yTnVtYmVyKHByb3Zpc2lvbmFsVmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWFkIHRvcC1yaWdodCB2ZXJzaW9uIGluZm86IDMgd2lkZSBieSA2IHRhbGxcbiAgICAgICAgICAgIGxldCB2ZXJzaW9uQml0cyA9IDA7XG4gICAgICAgICAgICBjb25zdCBpak1pbiA9IGRpbWVuc2lvbiAtIDExO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDU7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGRpbWVuc2lvbiAtIDk7IGkgPj0gaWpNaW47IGktLSkge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uQml0cyA9IHRoaXMuY29weUJpdChpLCBqLCB2ZXJzaW9uQml0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRoZVBhcnNlZFZlcnNpb24gPSBWZXJzaW9uJDEuZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uKHZlcnNpb25CaXRzKTtcbiAgICAgICAgICAgIGlmICh0aGVQYXJzZWRWZXJzaW9uICE9PSBudWxsICYmIHRoZVBhcnNlZFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpID09PSBkaW1lbnNpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGVQYXJzZWRWZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbFxuICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDU7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uQml0cyA9IHRoaXMuY29weUJpdChpLCBqLCB2ZXJzaW9uQml0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhlUGFyc2VkVmVyc2lvbiA9IFZlcnNpb24kMS5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpO1xuICAgICAgICAgICAgaWYgKHRoZVBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhlUGFyc2VkVmVyc2lvbi5nZXREaW1lbnNpb25Gb3JWZXJzaW9uKCkgPT09IGRpbWVuc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IHRoZVBhcnNlZFZlcnNpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29weUJpdChpIC8qaW50Ki8sIGogLyppbnQqLywgdmVyc2lvbkJpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3QgYml0ID0gdGhpcy5pc01pcnJvciA/IHRoaXMuYml0TWF0cml4LmdldChqLCBpKSA6IHRoaXMuYml0TWF0cml4LmdldChpLCBqKTtcbiAgICAgICAgICAgIHJldHVybiBiaXQgPyAodmVyc2lvbkJpdHMgPDwgMSkgfCAweDEgOiB2ZXJzaW9uQml0cyA8PCAxO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5SZWFkcyB0aGUgYml0cyBpbiB0aGUge0BsaW5rIEJpdE1hdHJpeH0gcmVwcmVzZW50aW5nIHRoZSBmaW5kZXIgcGF0dGVybiBpbiB0aGVcbiAgICAgICAgICogY29ycmVjdCBvcmRlciBpbiBvcmRlciB0byByZWNvbnN0cnVjdCB0aGUgY29kZXdvcmRzIGJ5dGVzIGNvbnRhaW5lZCB3aXRoaW4gdGhlXG4gICAgICAgICAqIFFSIENvZGUuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWRcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRDb2Rld29yZHMoKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIGRhdGEgbWFzayBmb3IgdGhlIGZvcm1hdCB1c2VkIGluIHRoaXMgUVIgQ29kZS4gVGhpcyB3aWxsIGV4Y2x1ZGVcbiAgICAgICAgICAgIC8vIHNvbWUgYml0cyBmcm9tIHJlYWRpbmcgYXMgd2Ugd2luZCB0aHJvdWdoIHRoZSBiaXQgbWF0cml4LlxuICAgICAgICAgICAgY29uc3QgZGF0YU1hc2sgPSBEYXRhTWFzay52YWx1ZXMuZ2V0KGZvcm1hdEluZm8uZ2V0RGF0YU1hc2soKSk7XG4gICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLmJpdE1hdHJpeC5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uUGF0dGVybiA9IHZlcnNpb24uYnVpbGRGdW5jdGlvblBhdHRlcm4oKTtcbiAgICAgICAgICAgIGxldCByZWFkaW5nVXAgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTtcbiAgICAgICAgICAgIGxldCByZXN1bHRPZmZzZXQgPSAwO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRCeXRlID0gMDtcbiAgICAgICAgICAgIGxldCBiaXRzUmVhZCA9IDA7XG4gICAgICAgICAgICAvLyBSZWFkIGNvbHVtbnMgaW4gcGFpcnMsIGZyb20gcmlnaHQgdG8gbGVmdFxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGRpbWVuc2lvbiAtIDE7IGogPiAwOyBqIC09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gNikge1xuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHdob2xlIGNvbHVtbiB3aXRoIHZlcnRpY2FsIGFsaWdubWVudCBwYXR0ZXJuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNhdmVzIHRpbWUgYW5kIG1ha2VzIHRoZSBvdGhlciBjb2RlIHByb2NlZWQgbW9yZSBjbGVhbmx5XG4gICAgICAgICAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVhZCBhbHRlcm5hdGluZ2x5IGZyb20gYm90dG9tIHRvIHRvcCB0aGVuIHRvcCB0byBib3R0b21cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMjsgY29sKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBiaXRzIGNvdmVyZWQgYnkgdGhlIGZ1bmN0aW9uIHBhdHRlcm5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlYWQgYSBiaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJpdE1hdHJpeC5nZXQoaiAtIGNvbCwgaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgfD0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UndmUgbWFkZSBhIHdob2xlIGJ5dGUsIHNhdmUgaXQgb2ZmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHNSZWFkID09PSA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Qnl0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHJlYWRpbmdVcCBePSB0cnVlOyAvLyByZWFkaW5nVXAgPSAhcmVhZGluZ1VwOyAvLyBzd2l0Y2ggZGlyZWN0aW9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV2ZXJ0IHRoZSBtYXNrIHJlbW92YWwgZG9uZSB3aGlsZSByZWFkaW5nIHRoZSBjb2RlIHdvcmRzLiBUaGUgYml0IG1hdHJpeCBzaG91bGQgcmV2ZXJ0IHRvIGl0cyBvcmlnaW5hbCBzdGF0ZS5cbiAgICAgICAgICovXG4gICAgICAgIHJlbWFzaygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFdlIGhhdmUgbm8gZm9ybWF0IGluZm9ybWF0aW9uLCBhbmQgaGF2ZSBubyBkYXRhIG1hc2tcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRhdGFNYXNrID0gRGF0YU1hc2sudmFsdWVzW3RoaXMucGFyc2VkRm9ybWF0SW5mby5nZXREYXRhTWFzaygpXTtcbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpO1xuICAgICAgICAgICAgZGF0YU1hc2sudW5tYXNrQml0TWF0cml4KHRoaXMuYml0TWF0cml4LCBkaW1lbnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVwYXJlIHRoZSBwYXJzZXIgZm9yIGEgbWlycm9yZWQgb3BlcmF0aW9uLlxuICAgICAgICAgKiBUaGlzIGZsYWcgaGFzIGVmZmVjdCBvbmx5IG9uIHRoZSB7QGxpbmsgI3JlYWRGb3JtYXRJbmZvcm1hdGlvbigpfSBhbmQgdGhlXG4gICAgICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZVxuICAgICAgICAgKiB7QGxpbmsgI21pcnJvcigpfSBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0TWlycm9yKGlzTWlycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wYXJzZWRGb3JtYXRJbmZvID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjtcbiAgICAgICAgfVxuICAgICAgICAvKiogTWlycm9yIHRoZSBiaXQgbWF0cml4IGluIG9yZGVyIHRvIGF0dGVtcHQgYSBzZWNvbmQgcmVhZGluZy4gKi9cbiAgICAgICAgbWlycm9yKCkge1xuICAgICAgICAgICAgY29uc3QgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMCwgd2lkdGggPSBiaXRNYXRyaXguZ2V0V2lkdGgoKTsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0geCArIDEsIGhlaWdodCA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh5LCB4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5FbmNhcHN1bGF0ZXMgYSBibG9jayBvZiBkYXRhIHdpdGhpbiBhIFFSIENvZGUuIFFSIENvZGVzIG1heSBzcGxpdCB0aGVpciBkYXRhIGludG9cbiAgICAgKiBtdWx0aXBsZSBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaXMgYSB1bml0IG9mIGRhdGEgYW5kIGVycm9yLWNvcnJlY3Rpb24gY29kZXdvcmRzLiBFYWNoXG4gICAgICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIERhdGFCbG9jayQxIHtcbiAgICAgICAgY29uc3RydWN0b3IobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHtcbiAgICAgICAgICAgIHRoaXMubnVtRGF0YUNvZGV3b3JkcyA9IG51bURhdGFDb2Rld29yZHM7XG4gICAgICAgICAgICB0aGlzLmNvZGV3b3JkcyA9IGNvZGV3b3JkcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+V2hlbiBRUiBDb2RlcyB1c2UgbXVsdGlwbGUgZGF0YSBibG9ja3MsIHRoZXkgYXJlIGFjdHVhbGx5IGludGVybGVhdmVkLlxuICAgICAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpc1xuICAgICAgICAgKiBtZXRob2Qgd2lsbCBzZXBhcmF0ZSB0aGUgZGF0YSBpbnRvIG9yaWdpbmFsIGJsb2Nrcy48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlXG4gICAgICAgICAqIEBwYXJhbSB2ZXJzaW9uIHZlcnNpb24gb2YgdGhlIFFSIENvZGVcbiAgICAgICAgICogQHBhcmFtIGVjTGV2ZWwgZXJyb3ItY29ycmVjdGlvbiBsZXZlbCBvZiB0aGUgUVIgQ29kZVxuICAgICAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgXCJkZS1pbnRlcmxlYXZlZFwiIGZyb20gcmVwcmVzZW50YXRpb24gaW4gdGhlXG4gICAgICAgICAqICAgICAgICAgUVIgQ29kZVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGdldERhdGFCbG9ja3MocmF3Q29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKSB7XG4gICAgICAgICAgICBpZiAocmF3Q29kZXdvcmRzLmxlbmd0aCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgbnVtYmVyIGFuZCBzaXplIG9mIGRhdGEgYmxvY2tzIHVzZWQgYnkgdGhpcyB2ZXJzaW9uIGFuZFxuICAgICAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbFxuICAgICAgICAgICAgY29uc3QgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7XG4gICAgICAgICAgICAvLyBGaXJzdCBjb3VudCB0aGUgdG90YWwgbnVtYmVyIG9mIGRhdGEgYmxvY2tzXG4gICAgICAgICAgICBsZXQgdG90YWxCbG9ja3MgPSAwO1xuICAgICAgICAgICAgY29uc3QgZWNCbG9ja0FycmF5ID0gZWNCbG9ja3MuZ2V0RUNCbG9ja3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWNCbG9jayBvZiBlY0Jsb2NrQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOb3cgZXN0YWJsaXNoIERhdGFCbG9ja3Mgb2YgdGhlIGFwcHJvcHJpYXRlIHNpemUgYW5kIG51bWJlciBvZiBkYXRhIGNvZGV3b3Jkc1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KHRvdGFsQmxvY2tzKTtcbiAgICAgICAgICAgIGxldCBudW1SZXN1bHRCbG9ja3MgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlY0Jsb2NrIG9mIGVjQmxvY2tBcnJheSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWNCbG9jay5nZXRDb3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1CbG9ja0NvZGV3b3JkcyA9IGVjQmxvY2tzLmdldEVDQ29kZXdvcmRzUGVyQmxvY2soKSArIG51bURhdGFDb2Rld29yZHM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtudW1SZXN1bHRCbG9ja3MrK10gPSBuZXcgRGF0YUJsb2NrJDEobnVtRGF0YUNvZGV3b3JkcywgbmV3IFVpbnQ4QXJyYXkobnVtQmxvY2tDb2Rld29yZHMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG5cbiAgICAgICAgICAgIC8vICh3aGVyZSBuIG1heSBiZSAwKSBoYXZlIDEgbW9yZSBieXRlLiBGaWd1cmUgb3V0IHdoZXJlIHRoZXNlIHN0YXJ0LlxuICAgICAgICAgICAgY29uc3Qgc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzID0gcmVzdWx0WzBdLmNvZGV3b3Jkcy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgbG9uZ2VyQmxvY2tzU3RhcnRBdCA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmVcbiAgICAgICAgICAgIHdoaWxlIChsb25nZXJCbG9ja3NTdGFydEF0ID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBudW1Db2Rld29yZHMgPSByZXN1bHRbbG9uZ2VyQmxvY2tzU3RhcnRBdF0uY29kZXdvcmRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobnVtQ29kZXdvcmRzID09PSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvbmdlckJsb2Nrc1N0YXJ0QXQtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvbmdlckJsb2Nrc1N0YXJ0QXQrKztcbiAgICAgICAgICAgIGNvbnN0IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzID0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzIC0gZWNCbG9ja3MuZ2V0RUNDb2Rld29yZHNQZXJCbG9jaygpO1xuICAgICAgICAgICAgLy8gVGhlIGxhc3QgZWxlbWVudHMgb2YgcmVzdWx0IG1heSBiZSAxIGVsZW1lbnQgbG9uZ2VyXG4gICAgICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmVcbiAgICAgICAgICAgIGxldCByYXdDb2Rld29yZHNPZmZzZXQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaG9ydGVyQmxvY2tzTnVtRGF0YUNvZGV3b3JkczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbal0uY29kZXdvcmRzW2ldID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaWxsIG91dCB0aGUgbGFzdCBkYXRhIGJsb2NrIGluIHRoZSBsb25nZXIgb25lc1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGxvbmdlckJsb2Nrc1N0YXJ0QXQ7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdyBhZGQgaW4gZXJyb3IgY29ycmVjdGlvbiBibG9ja3NcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IHJlc3VsdFswXS5jb2Rld29yZHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bVJlc3VsdEJsb2NrczsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlPZmZzZXQgPSBqIDwgbG9uZ2VyQmxvY2tzU3RhcnRBdCA/IGkgOiBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2pdLmNvZGV3b3Jkc1tpT2Zmc2V0XSA9IHJhd0NvZGV3b3Jkc1tyYXdDb2Rld29yZHNPZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBnZXROdW1EYXRhQ29kZXdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtRGF0YUNvZGV3b3JkcztcbiAgICAgICAgfVxuICAgICAgICBnZXRDb2Rld29yZHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIHZhciBNb2RlVmFsdWVzO1xuICAgIChmdW5jdGlvbiAoTW9kZVZhbHVlcykge1xuICAgICAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbXCJURVJNSU5BVE9SXCJdID0gMF0gPSBcIlRFUk1JTkFUT1JcIjtcbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiTlVNRVJJQ1wiXSA9IDFdID0gXCJOVU1FUklDXCI7XG4gICAgICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1tcIkFMUEhBTlVNRVJJQ1wiXSA9IDJdID0gXCJBTFBIQU5VTUVSSUNcIjtcbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiU1RSVUNUVVJFRF9BUFBFTkRcIl0gPSAzXSA9IFwiU1RSVUNUVVJFRF9BUFBFTkRcIjtcbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiQllURVwiXSA9IDRdID0gXCJCWVRFXCI7XG4gICAgICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1tcIkVDSVwiXSA9IDVdID0gXCJFQ0lcIjtcbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiS0FOSklcIl0gPSA2XSA9IFwiS0FOSklcIjtcbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiRk5DMV9GSVJTVF9QT1NJVElPTlwiXSA9IDddID0gXCJGTkMxX0ZJUlNUX1BPU0lUSU9OXCI7XG4gICAgICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1tcIkZOQzFfU0VDT05EX1BPU0lUSU9OXCJdID0gOF0gPSBcIkZOQzFfU0VDT05EX1BPU0lUSU9OXCI7XG4gICAgICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7IFwiSGFuemlcIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi9cbiAgICAgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzW1wiSEFOWklcIl0gPSA5XSA9IFwiSEFOWklcIjtcbiAgICB9KShNb2RlVmFsdWVzIHx8IChNb2RlVmFsdWVzID0ge30pKTtcbiAgICAvKipcbiAgICAgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaFxuICAgICAqIGRhdGEgY2FuIGJlIGVuY29kZWQgdG8gYml0cyBpbiB0aGUgUVIgY29kZSBzdGFuZGFyZC48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIE1vZGUkMSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zdHJpbmdWYWx1ZSA9IHN0cmluZ1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zO1xuICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0cztcbiAgICAgICAgICAgIE1vZGUkMS5GT1JfQklUUy5zZXQoYml0cywgdGhpcyk7XG4gICAgICAgICAgICBNb2RlJDEuRk9SX1ZBTFVFLnNldCh2YWx1ZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBiaXRzIGZvdXIgYml0cyBlbmNvZGluZyBhIFFSIENvZGUgZGF0YSBtb2RlXG4gICAgICAgICAqIEByZXR1cm4gTW9kZSBlbmNvZGVkIGJ5IHRoZXNlIGJpdHNcbiAgICAgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGVcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBmb3JCaXRzKGJpdHMgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IE1vZGUkMS5GT1JfQklUUy5nZXQoYml0cyk7XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB2ZXJzaW9uIHZlcnNpb24gaW4gcXVlc3Rpb25cbiAgICAgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZVxuICAgICAgICAgKiAgICAgICAgIGNvdW50IG9mIGNoYXJhY3RlcnMgdGhhdCB3aWxsIGZvbGxvdyBlbmNvZGVkIGluIHRoaXMgTW9kZVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q2hhcmFjdGVyQ291bnRCaXRzKHZlcnNpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTtcbiAgICAgICAgICAgIGxldCBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAodmVyc2lvbk51bWJlciA8PSA5KSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZlcnNpb25OdW1iZXIgPD0gMjYpIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zW29mZnNldF07XG4gICAgICAgIH1cbiAgICAgICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRCaXRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYml0cztcbiAgICAgICAgfVxuICAgICAgICBlcXVhbHMobykge1xuICAgICAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIE1vZGUkMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdGhlciA9IG87XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gb3RoZXIudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBNb2RlJDEuRk9SX0JJVFMgPSBuZXcgTWFwKCk7XG4gICAgTW9kZSQxLkZPUl9WQUxVRSA9IG5ldyBNYXAoKTtcbiAgICBNb2RlJDEuVEVSTUlOQVRPUiA9IG5ldyBNb2RlJDEoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi5cbiAgICBNb2RlJDEuTlVNRVJJQyA9IG5ldyBNb2RlJDEoTW9kZVZhbHVlcy5OVU1FUklDLCAnTlVNRVJJQycsIEludDMyQXJyYXkuZnJvbShbMTAsIDEyLCAxNF0pLCAweDAxKTtcbiAgICBNb2RlJDEuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUkMShNb2RlVmFsdWVzLkFMUEhBTlVNRVJJQywgJ0FMUEhBTlVNRVJJQycsIEludDMyQXJyYXkuZnJvbShbOSwgMTEsIDEzXSksIDB4MDIpO1xuICAgIE1vZGUkMS5TVFJVQ1RVUkVEX0FQUEVORCA9IG5ldyBNb2RlJDEoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkXG4gICAgTW9kZSQxLkJZVEUgPSBuZXcgTW9kZSQxKE1vZGVWYWx1ZXMuQllURSwgJ0JZVEUnLCBJbnQzMkFycmF5LmZyb20oWzgsIDE2LCAxNl0pLCAweDA0KTtcbiAgICBNb2RlJDEuRUNJID0gbmV3IE1vZGUkMShNb2RlVmFsdWVzLkVDSSwgJ0VDSScsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA3KTsgLy8gY2hhcmFjdGVyIGNvdW50cyBkb24ndCBhcHBseVxuICAgIE1vZGUkMS5LQU5KSSA9IG5ldyBNb2RlJDEoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7XG4gICAgTW9kZSQxLkZOQzFfRklSU1RfUE9TSVRJT04gPSBuZXcgTW9kZSQxKE1vZGVWYWx1ZXMuRk5DMV9GSVJTVF9QT1NJVElPTiwgJ0ZOQzFfRklSU1RfUE9TSVRJT04nLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNSk7XG4gICAgTW9kZSQxLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUkMShNb2RlVmFsdWVzLkZOQzFfU0VDT05EX1BPU0lUSU9OLCAnRk5DMV9TRUNPTkRfUE9TSVRJT04nLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwOSk7XG4gICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgXCJIYW56aVwiIGlzIGEgdHJhbnNsaXRlcmF0aW9uIG9mIHRoaXMgbW9kZSBuYW1lLiAqL1xuICAgIE1vZGUkMS5IQU5aSSA9IG5ldyBNb2RlJDEoTW9kZVZhbHVlcy5IQU5aSSwgJ0hBTlpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwRCk7XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovXG4gICAgLyppbXBvcnQgamF2YS51dGlsLk1hcDsqL1xuICAgIC8qKlxuICAgICAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2Rlc1xuICAgICAqIGluIG9uZSBRUiBDb2RlLiBUaGlzIGNsYXNzIGRlY29kZXMgdGhlIGJpdHMgYmFjayBpbnRvIHRleHQuPC9wPlxuICAgICAqXG4gICAgICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEge1xuICAgICAgICBzdGF0aWMgZGVjb2RlKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykge1xuICAgICAgICAgICAgY29uc3QgYml0cyA9IG5ldyBCaXRTb3VyY2UoYnl0ZXMpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICBjb25zdCBieXRlU2VnbWVudHMgPSBuZXcgQXJyYXkoKTsgLy8gMVxuICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3dcbiAgICAgICAgICAgIGxldCBzeW1ib2xTZXF1ZW5jZSA9IC0xO1xuICAgICAgICAgICAgbGV0IHBhcml0eURhdGEgPSAtMTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRDaGFyYWN0ZXJTZXRFQ0kgPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBmYzFJbkVmZmVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBtb2RlO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hpbGUgc3RpbGwgYW5vdGhlciBzZWdtZW50IHRvIHJlYWQuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPSywgYXNzdW1lIHdlJ3JlIGRvbmUuIFJlYWxseSwgYSBURVJNSU5BVE9SIG1vZGUgc2hvdWxkIGhhdmUgYmVlbiByZWNvcmRlZCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZSQxLlRFUk1JTkFUT1I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlQml0cyA9IGJpdHMucmVhZEJpdHMoNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZSQxLmZvckJpdHMobW9kZUJpdHMpOyAvLyBtb2RlIGlzIGVuY29kZWQgYnkgNCBiaXRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5URVJNSU5BVE9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlJDEuRk5DMV9GSVJTVF9QT1NJVElPTjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQxLkZOQzFfU0VDT05EX1BPU0lUSU9OOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvIGxpdHRsZSB3aXRoIEZOQzEgZXhjZXB0IGFsdGVyIHRoZSBwYXJzZWQgcmVzdWx0IGEgYml0IGFjY29yZGluZyB0byB0aGUgc3BlY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQxLlNUUlVDVFVSRURfQVBQRU5EOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBuZXh0IDggYml0cyAoc3ltYm9sIHNlcXVlbmNlICMpIGFuZCA4IGJpdHMgKGRhdGE6IHBhcml0eSksIHRoZW4gY29udGludWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2xTZXF1ZW5jZSA9IGJpdHMucmVhZEJpdHMoOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5FQ0k6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnQgZG9lc24ndCBhcHBseSB0byBFQ0lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS5wYXJzZUVDSVZhbHVlKGJpdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDaGFyYWN0ZXJTZXRFQ0kgPSBDaGFyYWN0ZXJTZXRFQ0kuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDaGFyYWN0ZXJTZXRFQ0kgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQxLkhBTlpJOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hpbmVzZSBtb2RlIGNvbnRhaW5zIGEgc3ViIHNldCBpbmRpY2F0b3IgcmlnaHQgYWZ0ZXIgbW9kZSBpbmRpY2F0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzZXQgPSBiaXRzLnJlYWRCaXRzKDQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50SGFuemkgPSBiaXRzLnJlYWRCaXRzKG1vZGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzKHZlcnNpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2V0ID09PSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuR0IyMzEyX1NVQlNFVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVjb2RlSGFuemlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnRIYW56aSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcIk5vcm1hbFwiIFFSIGNvZGUgbW9kZXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IG1hbnkgY2hhcmFjdGVycyB3aWxsIGZvbGxvdywgZW5jb2RlZCBpbiB0aGlzIG1vZGU/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBiaXRzLnJlYWRCaXRzKG1vZGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzKHZlcnNpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlJDEuTlVNRVJJQzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS5kZWNvZGVOdW1lcmljU2VnbWVudChiaXRzLCByZXN1bHQsIGNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5BTFBIQU5VTUVSSUM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVjb2RlQWxwaGFudW1lcmljU2VnbWVudChiaXRzLCByZXN1bHQsIGNvdW50LCBmYzFJbkVmZmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlJDEuQllURTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS5kZWNvZGVCeXRlU2VnbWVudChiaXRzLCByZXN1bHQsIGNvdW50LCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5LQU5KSTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS5kZWNvZGVLYW5qaVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IHdoaWxlIChtb2RlICE9PSBNb2RlJDEuVEVSTUlOQVRPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWFlIC8qOiBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24qLykge1xuICAgICAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxsc1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb2RlclJlc3VsdChieXRlcywgcmVzdWx0LnRvU3RyaW5nKCksIGJ5dGVTZWdtZW50cy5sZW5ndGggPT09IDAgPyBudWxsIDogYnl0ZVNlZ21lbnRzLCBlY0xldmVsID09PSBudWxsID8gbnVsbCA6IGVjTGV2ZWwudG9TdHJpbmcoKSwgc3ltYm9sU2VxdWVuY2UsIHBhcml0eURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZUhhbnppU2VnbWVudChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzXG4gICAgICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzXG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpO1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgY29uc3QgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTtcbiAgICAgICAgICAgICAgICBsZXQgYXNzZW1ibGVkVHdvQnl0ZXMgPSAoKCh0d29CeXRlcyAvIDB4MDYwKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgKHR3b0J5dGVzICUgMHgwNjApO1xuICAgICAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDAzQkYpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgYXNzZW1ibGVkVHdvQnl0ZXMgKz0gMHgwQTFBMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHRoZSAweEIwQTEgdG8gMHhGQUZFIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEE2QTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KSAmIDB4RkYpO1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyAmIDB4RkYpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSAyO1xuICAgICAgICAgICAgICAgIGNvdW50LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmcuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHMuR0IyMzEyKSk7XG4gICAgICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uKi8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKGlnbm9yZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBkZWNvZGVLYW5qaVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmIChjb3VudCAqIDEzID4gYml0cy5hdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlyc1xuICAgICAgICAgICAgLy8gYW5kIGRlY29kZSBhcyBTaGlmdF9KSVMgYWZ0ZXJ3YXJkc1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoMiAqIGNvdW50KTtcbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIEVhY2ggMTMgYml0cyBlbmNvZGVzIGEgMi1ieXRlIGNoYXJhY3RlclxuICAgICAgICAgICAgICAgIGNvbnN0IHR3b0J5dGVzID0gYml0cy5yZWFkQml0cygxMyk7XG4gICAgICAgICAgICAgICAgbGV0IGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTtcbiAgICAgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAxRjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHRoZSAweDgxNDAgdG8gMHg5RkZDIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZVxuICAgICAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBDMTQwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTtcbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyBhc3NlbWJsZWRUd29CeXRlcztcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgICAgICAgICBjb3VudC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2hpZnRfSklTIG1heSBub3QgYmUgc3VwcG9ydGVkIGluIHNvbWUgZW52aXJvbm1lbnRzOlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKFN0cmluZ0VuY29kaW5nLmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzLlNISUZUX0pJUykpO1xuICAgICAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbihpZ25vcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmICg4ICogY291bnQgPiBiaXRzLmF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVhZEJ5dGVzW2ldID0gLyooYnl0ZSkgKi8gYml0cy5yZWFkQml0cyg4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbmNvZGluZztcbiAgICAgICAgICAgIGlmIChjdXJyZW50Q2hhcmFjdGVyU2V0RUNJID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWVcbiAgICAgICAgICAgICAgICAvLyBzZWN0aW9uIDYuNC41OiB0IGRvZXMgbm90IHNheSB3aGljaCBlbmNvZGluZyB0byBhc3N1bWluZ1xuICAgICAgICAgICAgICAgIC8vIHVwb24gZGVjb2RpbmcuIEkgaGF2ZSBzZWVuIElTTy04ODU5LTEgdXNlZCBhcyB3ZWxsIGFzXG4gICAgICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0b1xuICAgICAgICAgICAgICAgIC8vIGdpdmUgYSBoaW50LlxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gU3RyaW5nVXRpbHMuZ3Vlc3NFbmNvZGluZyhyZWFkQnl0ZXMsIGhpbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gY3VycmVudENoYXJhY3RlclNldEVDSS5nZXROYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmcuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uKi8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKGlnbm9yZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnl0ZVNlZ21lbnRzLnB1c2gocmVhZEJ5dGVzKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgdG9BbHBoYU51bWVyaWNDaGFyKHZhbHVlIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuQUxQSEFOVU1FUklDX0NIQVJTLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuQUxQSEFOVU1FUklDX0NIQVJTW3ZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZGVjb2RlQWxwaGFudW1lcmljU2VnbWVudChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8sIGZjMUluRWZmZWN0KSB7XG4gICAgICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZVxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7XG4gICAgICAgICAgICB3aGlsZSAoY291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpO1xuICAgICAgICAgICAgICAgIGNvdW50IC09IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2U6IG9uZSBjaGFyYWN0ZXIgbGVmdFxuICAgICAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgNikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQxLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWUgc2VjdGlvbiA2LjQuOC4xLCA2LjQuOC4yXG4gICAgICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIG1hc3NhZ2UgdGhlIHJlc3VsdCBhIGJpdCBpZiBpbiBhbiBGTkMxIG1vZGU6XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCByZXN1bHQubGVuZ3RoKCkgLSAxICYmIHJlc3VsdC5jaGFyQXQoaSArIDEpID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAlJSBpcyByZW5kZXJlZCBhcyAlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRDaGFyQXQoaSwgU3RyaW5nLmZyb21DaGFyQ29kZSgweDFEKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGRlY29kZU51bWVyaWNTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykge1xuICAgICAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lXG4gICAgICAgICAgICB3aGlsZSAoY291bnQgPj0gMykge1xuICAgICAgICAgICAgICAgIC8vIEVhY2ggMTAgYml0cyBlbmNvZGVzIHRocmVlIGRpZ2l0c1xuICAgICAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0aHJlZURpZ2l0c0JpdHMgPSBiaXRzLnJlYWRCaXRzKDEwKTtcbiAgICAgICAgICAgICAgICBpZiAodGhyZWVEaWdpdHNCaXRzID49IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTtcbiAgICAgICAgICAgICAgICBjb3VudCAtPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgLy8gVHdvIGRpZ2l0cyBsZWZ0IG92ZXIgdG8gcmVhZCwgZW5jb2RlZCBpbiA3IGJpdHNcbiAgICAgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTtcbiAgICAgICAgICAgICAgICBpZiAodHdvRGlnaXRzQml0cyA+PSAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0d29EaWdpdHNCaXRzIC8gMTApKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEudG9BbHBoYU51bWVyaWNDaGFyKHR3b0RpZ2l0c0JpdHMgJSAxMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmUgZGlnaXQgbGVmdCBvdmVyIHRvIHJlYWRcbiAgICAgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkaWdpdEJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpO1xuICAgICAgICAgICAgICAgIGlmIChkaWdpdEJpdHMgPj0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHBhcnNlRUNJVmFsdWUoYml0cykge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RCeXRlID0gYml0cy5yZWFkQml0cyg4KTtcbiAgICAgICAgICAgIGlmICgoZmlyc3RCeXRlICYgMHg4MCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0Qnl0ZSAmIDB4N0Y7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgLy8gdHdvIGJ5dGVzXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kQnl0ZSA9IGJpdHMucmVhZEJpdHMoOCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoKGZpcnN0Qnl0ZSAmIDB4M0YpIDw8IDgpICYgMHhGRkZGRkZGRikgfCBzZWNvbmRCeXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChmaXJzdEJ5dGUgJiAweEUwKSA9PT0gMHhDMCkge1xuICAgICAgICAgICAgICAgIC8vIHRocmVlIGJ5dGVzXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kVGhpcmRCeXRlcyA9IGJpdHMucmVhZEJpdHMoMTYpO1xuICAgICAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VlIElTTyAxODAwNDoyMDA2LCA2LjQuNCBUYWJsZSA1XG4gICAgICovXG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQxLkFMUEhBTlVNRVJJQ19DSEFSUyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVogJCUqKy0uLzonO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMS5HQjIzMTJfU1VCU0VUID0gMTtcbiAgICAvLyBmdW5jdGlvbiBVaW50OEFycmF5VG9TdHJpbmcoYTogVWludDhBcnJheSk6IHN0cmluZyB7XG4gICAgLy8gICAgIGNvbnN0IENIVU5LX1NaID0gMHg4MDAwO1xuICAgIC8vICAgICBjb25zdCBjID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGEubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpICs9IENIVU5LX1NaKSB7XG4gICAgLy8gICAgICAgICBjLmFwcGVuZChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGEuc3ViYXJyYXkoaSwgaSArIENIVU5LX1NaKSkpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHJldHVybiBjLnRvU3RyaW5nKCk7XG4gICAgLy8gfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGVcbiAgICAgKiBkZWNvZGluZyBjYWxsZXIuIENhbGxlcnMgYXJlIGV4cGVjdGVkIHRvIHByb2Nlc3MgdGhpcy5cbiAgICAgKlxuICAgICAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpXG4gICAgICovXG4gICAgY2xhc3MgUVJDb2RlRGVjb2Rlck1ldGFEYXRhIHtcbiAgICAgICAgY29uc3RydWN0b3IobWlycm9yZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC5cbiAgICAgICAgICovXG4gICAgICAgIGlzTWlycm9yZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5taXJyb3JlZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHBvaW50cyBBcnJheSBvZiBwb2ludHMgdG8gYXBwbHkgbWlycm9yIGNvcnJlY3Rpb24gdG8uXG4gICAgICAgICAqL1xuICAgICAgICBhcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBib3R0b21MZWZ0ID0gcG9pbnRzWzBdO1xuICAgICAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdO1xuICAgICAgICAgICAgcG9pbnRzWzJdID0gYm90dG9tTGVmdDtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gJ2ZpeCcgdG9wLWxlZnQgYW5kIGFsaWdubWVudCBwYXR0ZXJuLlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovXG4gICAgLyoqXG4gICAgICogPHA+VGhlIG1haW4gY2xhc3Mgd2hpY2ggaW1wbGVtZW50cyBRUiBDb2RlIGRlY29kaW5nIC0tIGFzIG9wcG9zZWQgdG8gbG9jYXRpbmcgYW5kIGV4dHJhY3RpbmdcbiAgICAgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGVjb2RlciQyIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXIoR2VuZXJpY0dGLlFSX0NPREVfRklFTERfMjU2KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHtcbiAgICAgICAgLy8gICByZXR1cm4gZGVjb2RlKGltYWdlLCBudWxsKVxuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5Db252ZW5pZW5jZSBtZXRob2QgdGhhdCBjYW4gZGVjb2RlIGEgUVIgQ29kZSByZXByZXNlbnRlZCBhcyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zLlxuICAgICAgICAgKiBcInRydWVcIiBpcyB0YWtlbiB0byBtZWFuIGEgYmxhY2sgbW9kdWxlLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXNcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nXG4gICAgICAgICAqIEByZXR1cm4gdGV4dCBhbmQgYnl0ZXMgZW5jb2RlZCB3aXRoaW4gdGhlIFFSIENvZGVcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWRcbiAgICAgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVCb29sZWFuQXJyYXkoaW1hZ2UsIGhpbnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVCaXRNYXRyaXgoQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheShpbWFnZSksIGhpbnRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwdWJsaWMgZGVjb2RlQml0TWF0cml4KGJpdHM6IEJpdE1hdHJpeCk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHtcbiAgICAgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpXG4gICAgICAgIC8vIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciBcInRydWVcIiBpcyB0YWtlbiB0byBtZWFuIGEgYmxhY2sgbW9kdWxlLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGJpdHMgYm9vbGVhbnMgcmVwcmVzZW50aW5nIHdoaXRlL2JsYWNrIFFSIENvZGUgbW9kdWxlc1xuICAgICAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmdcbiAgICAgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZVxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiB0aGUgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZFxuICAgICAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHNcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cykge1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IGEgcGFyc2VyIGFuZCByZWFkIHZlcnNpb24sIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWxcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBCaXRNYXRyaXhQYXJzZXIkMShiaXRzKTtcbiAgICAgICAgICAgIGxldCBleCA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlIC8qOiBGb3JtYXRFeGNlcHRpb24sIENoZWNrc3VtRXhjZXB0aW9uKi8pIHtcbiAgICAgICAgICAgICAgICBleCA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeFxuICAgICAgICAgICAgICAgIHBhcnNlci5yZW1hc2soKTtcbiAgICAgICAgICAgICAgICAvLyBXaWxsIGJlIGF0dGVtcHRpbmcgYSBtaXJyb3JlZCByZWFkaW5nIG9mIHRoZSB2ZXJzaW9uIGFuZCBmb3JtYXQgaW5mby5cbiAgICAgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpO1xuICAgICAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgIHBhcnNlci5yZWFkVmVyc2lvbigpO1xuICAgICAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAgICAgcGFyc2VyLnJlYWRGb3JtYXRJbmZvcm1hdGlvbigpO1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmRcbiAgICAgICAgICAgICAgICAgKiBvZiB2ZXJzaW9uIGFuZCBmb3JtYXQgaW5mb3JtYXRpb24gd2hlbiBtaXJyb3JlZC4gVGhpcyBpcyBhIGdvb2Qgc2lnbixcbiAgICAgICAgICAgICAgICAgKiB0aGF0IHRoZSBRUiBjb2RlIG1heSBiZSBtaXJyb3JlZCwgYW5kIHdlIHNob3VsZCB0cnkgb25jZSBtb3JlIHdpdGggYVxuICAgICAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBmb3IgYSBtaXJyb3JlZCByZWFkaW5nLlxuICAgICAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTtcbiAgICAgICAgICAgICAgICAvLyBTdWNjZXNzISBOb3RpZnkgdGhlIGNhbGxlciB0aGF0IHRoZSBjb2RlIHdhcyBtaXJyb3JlZC5cbiAgICAgICAgICAgICAgICByZXN1bHQuc2V0T3RoZXIobmV3IFFSQ29kZURlY29kZXJNZXRhRGF0YSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlIC8qRm9ybWF0RXhjZXB0aW9uIHwgQ2hlY2tzdW1FeGNlcHRpb24qLykge1xuICAgICAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZ1xuICAgICAgICAgICAgICAgIGlmIChleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVCaXRNYXRyaXhQYXJzZXIocGFyc2VyLCBoaW50cykge1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IHBhcnNlci5yZWFkVmVyc2lvbigpO1xuICAgICAgICAgICAgY29uc3QgZWNMZXZlbCA9IHBhcnNlci5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCgpO1xuICAgICAgICAgICAgLy8gUmVhZCBjb2Rld29yZHNcbiAgICAgICAgICAgIGNvbnN0IGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICAvLyBTZXBhcmF0ZSBpbnRvIGRhdGEgYmxvY2tzXG4gICAgICAgICAgICBjb25zdCBkYXRhQmxvY2tzID0gRGF0YUJsb2NrJDEuZ2V0RGF0YUJsb2Nrcyhjb2Rld29yZHMsIHZlcnNpb24sIGVjTGV2ZWwpO1xuICAgICAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXNcbiAgICAgICAgICAgIGxldCB0b3RhbEJ5dGVzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YUJsb2NrIG9mIGRhdGFCbG9ja3MpIHtcbiAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzICs9IGRhdGFCbG9jay5nZXROdW1EYXRhQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHRCeXRlcyA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdE9mZnNldCA9IDA7XG4gICAgICAgICAgICAvLyBFcnJvci1jb3JyZWN0IGFuZCBjb3B5IGRhdGEgYmxvY2tzIHRvZ2V0aGVyIGludG8gYSBzdHJlYW0gb2YgYnl0ZXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YUJsb2NrIG9mIGRhdGFCbG9ja3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2Rld29yZEJ5dGVzID0gZGF0YUJsb2NrLmdldENvZGV3b3JkcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlY29kZSB0aGUgY29udGVudHMgb2YgdGhhdCBzdHJlYW0gb2YgYnl0ZXNcbiAgICAgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkdpdmVuIGRhdGEgYW5kIGVycm9yLWNvcnJlY3Rpb24gY29kZXdvcmRzIHJlY2VpdmVkLCBwb3NzaWJseSBjb3JydXB0ZWQgYnkgZXJyb3JzLCBhdHRlbXB0cyB0b1xuICAgICAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gY29kZXdvcmRCeXRlcyBkYXRhIGFuZCBlcnJvciBjb3JyZWN0aW9uIGNvZGV3b3Jkc1xuICAgICAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXNcbiAgICAgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzXG4gICAgICAgICAqL1xuICAgICAgICBjb3JyZWN0RXJyb3JzKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykge1xuICAgICAgICAgICAgLy8gY29uc3QgbnVtQ29kZXdvcmRzID0gY29kZXdvcmRCeXRlcy5sZW5ndGg7XG4gICAgICAgICAgICAvLyBGaXJzdCByZWFkIGludG8gYW4gYXJyYXkgb2YgaW50c1xuICAgICAgICAgICAgY29uc3QgY29kZXdvcmRzSW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZGV3b3JkQnl0ZXMpO1xuICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzP1xuICAgICAgICAgICAgLy8gY29uc3QgY29kZXdvcmRzSW50cyA9IG5ldyBJbnQzMkFycmF5KG51bUNvZGV3b3JkcylcbiAgICAgICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ29kZXdvcmRzOyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFJlZWRTb2xvbW9uRXhjZXB0aW9uKi8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENvcHkgYmFjayBpbnRvIGFycmF5IG9mIGJ5dGVzIC0tIG9ubHkgbmVlZCB0byB3b3JyeSBhYm91dCB0aGUgYnl0ZXMgdGhhdCB3ZXJlIGRhdGFcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhcmUgYWJvdXQgZXJyb3JzIGluIHRoZSBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb2Rld29yZEJ5dGVzW2ldID0gLyooYnl0ZSkgKi8gY29kZXdvcmRzSW50c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluXG4gICAgICogYWxsIGJ1dCB0aGUgc2ltcGxlc3QgUVIgQ29kZXMuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBBbGlnbm1lbnRQYXR0ZXJuIGV4dGVuZHMgUmVzdWx0UG9pbnQge1xuICAgICAgICBjb25zdHJ1Y3Rvcihwb3NYIC8qZmxvYXQqLywgcG9zWSAvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemUgLypmbG9hdCovKSB7XG4gICAgICAgICAgICBzdXBlcihwb3NYLCBwb3NZKTtcbiAgICAgICAgICAgIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBhbGlnbm1lbnQgcGF0dGVybiBcImFib3V0IGVxdWFsc1wiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWRcbiAgICAgICAgICogcG9zaXRpb24gYW5kIHNpemUgLS0gbWVhbmluZywgaXQgaXMgYXQgbmVhcmx5IHRoZSBzYW1lIGNlbnRlciB3aXRoIG5lYXJseSB0aGUgc2FtZSBzaXplLjwvcD5cbiAgICAgICAgICovXG4gICAgICAgIGFib3V0RXF1YWxzKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhpIC0gdGhpcy5nZXRZKCkpIDw9IG1vZHVsZVNpemUgJiYgTWF0aC5hYnMoaiAtIHRoaXMuZ2V0WCgpKSA8PSBtb2R1bGVTaXplKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kdWxlU2l6ZURpZmYgPSBNYXRoLmFicyhtb2R1bGVTaXplIC0gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZURpZmYgPD0gMS4wIHx8IG1vZHVsZVNpemVEaWZmIDw9IHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplXG4gICAgICAgICAqIHdpdGggYSBuZXcgZXN0aW1hdGUuIEl0IHJldHVybnMgYSBuZXcge0Bjb2RlIEZpbmRlclBhdHRlcm59IGNvbnRhaW5pbmcgYW4gYXZlcmFnZSBvZiB0aGUgdHdvLlxuICAgICAgICAgKi9cbiAgICAgICAgY29tYmluZUVzdGltYXRlKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wO1xuICAgICAgICAgICAgY29uc3QgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7XG4gICAgICAgICAgICBjb25zdCBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFsaWdubWVudFBhdHRlcm4oY29tYmluZWRYLCBjb21iaW5lZFksIGNvbWJpbmVkTW9kdWxlU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTGlzdDsqL1xuICAgIC8qKlxuICAgICAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlclxuICAgICAqIHBhdHRlcm5zIGJ1dCBhcmUgc21hbGxlciBhbmQgYXBwZWFyIGF0IHJlZ3VsYXIgaW50ZXJ2YWxzIHRocm91Z2hvdXQgdGhlIGltYWdlLjwvcD5cbiAgICAgKlxuICAgICAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD5cbiAgICAgKlxuICAgICAqIDxwPlRoaXMgaXMgbW9zdGx5IGEgc2ltcGxpZmllZCBjb3B5IG9mIHtAbGluayBGaW5kZXJQYXR0ZXJuRmluZGVyfS4gSXQgaXMgY29waWVkLFxuICAgICAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlXG4gICAgICogc29tZSBjb2RlLjwvcD5cbiAgICAgKlxuICAgICAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2hcbiAgICAgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZ1xuICAgICAgICAgKiBAcGFyYW0gc3RhcnRZIHRvcCByb3cgZnJvbSB3aGljaCB0byBzdGFydCBzZWFyY2hpbmdcbiAgICAgICAgICogQHBhcmFtIHdpZHRoIHdpZHRoIG9mIHJlZ2lvbiB0byBzZWFyY2hcbiAgICAgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaFxuICAgICAgICAgKiBAcGFyYW0gbW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihpbWFnZSwgc3RhcnRYIC8qaW50Ki8sIHN0YXJ0WSAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgbW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIHJlc3VsdFBvaW50Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYO1xuICAgICAgICAgICAgdGhpcy5zdGFydFkgPSBzdGFydFk7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMubW9kdWxlU2l6ZSA9IG1vZHVsZVNpemU7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgPSByZXN1bHRQb2ludENhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpXG4gICAgICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogYXJyYXkgaW5pdGlhbGl6YXRpb24gd2l0aG91dCBzaXplIGFzIHRoZSBsZW5ndGggaXMgY2hlY2tlZCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5jcm9zc0NoZWNrU3RhdGVDb3VudCA9IG5ldyBJbnQzMkFycmF5KDMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5UaGlzIG1ldGhvZCBhdHRlbXB0cyB0byBmaW5kIHRoZSBib3R0b20tcmlnaHQgYWxpZ25tZW50IHBhdHRlcm4gaW4gdGhlIGltYWdlLiBJdCBpcyBhIGJpdCBtZXNzeSBzaW5jZVxuICAgICAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgZm91bmRcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGZpbmQoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFggPSB0aGlzLnN0YXJ0WDtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgY29uc3QgbWF4SiA9IHN0YXJ0WCArIHdpZHRoO1xuICAgICAgICAgICAgY29uc3QgbWlkZGxlSSA9IHRoaXMuc3RhcnRZICsgKGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW9cbiAgICAgICAgICAgIC8vIHRoaXMgdHJhY2tzIHRoZSBudW1iZXIgb2YgYmxhY2svd2hpdGUvYmxhY2sgbW9kdWxlcyBzZWVuIHNvIGZhclxuICAgICAgICAgICAgY29uc3Qgc3RhdGVDb3VudCA9IG5ldyBJbnQzMkFycmF5KDMpO1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmltYWdlO1xuICAgICAgICAgICAgZm9yIChsZXQgaUdlbiA9IDA7IGlHZW4gPCBoZWlnaHQ7IGlHZW4rKykge1xuICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkc1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFswXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGogPSBzdGFydFg7XG4gICAgICAgICAgICAgICAgLy8gQnVybiBvZmYgbGVhZGluZyB3aGl0ZSBwaXhlbHMgYmVmb3JlIGFueXRoaW5nIGVsc2U7IGlmIHdlIHN0YXJ0IGluIHRoZSBtaWRkbGUgb2ZcbiAgICAgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlXG4gICAgICAgICAgICAgICAgLy8gd2hpdGUgcnVuIGNvbnRpbnVlZCB0byB0aGUgbGVmdCBvZiB0aGUgc3RhcnQgcG9pbnRcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4Sikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGosIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFjayBwaXhlbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMikgeyAvLyBBIHdpbm5lcj9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25maXJtZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFswXSA9IHN0YXRlQ291bnRbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbKytjdXJyZW50U3RhdGVdKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBXaGl0ZSBwaXhlbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhtbSwgbm90aGluZyB3ZSBzYXcgd2FzIG9ic2VydmVkIGFuZCBjb25maXJtZWQgdHdpY2UuIElmIHdlIGhhZFxuICAgICAgICAgICAgLy8gYW55IGd1ZXNzIGF0IGFsbCwgcmV0dXJuIGl0LlxuICAgICAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc3NpYmxlQ2VudGVyc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbixcbiAgICAgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBjZW50ZXJGcm9tRW5kKHN0YXRlQ291bnQsIGVuZCAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbMl0pIC0gc3RhdGVDb3VudFsxXSAvIDIuMDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHN0YXRlQ291bnQgY291bnQgb2YgYmxhY2svd2hpdGUvYmxhY2sgcGl4ZWxzIGp1c3QgcmVhZFxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWZmIHRoZSBwcm9wb3J0aW9ucyBvZiB0aGUgY291bnRzIGlzIGNsb3NlIGVub3VnaCB0byB0aGUgMS8xLzEgcmF0aW9zXG4gICAgICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoXG4gICAgICAgICAqL1xuICAgICAgICBmb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSB7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVTaXplID0gdGhpcy5tb2R1bGVTaXplO1xuICAgICAgICAgICAgY29uc3QgbWF4VmFyaWFuY2UgPSBtb2R1bGVTaXplIC8gMi4wO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbaV0pID49IG1heFZhcmlhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+QWZ0ZXIgYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3RlbnRpYWwgYWxpZ25tZW50IHBhdHRlcm4sIHRoaXMgbWV0aG9kXG4gICAgICAgICAqIFwiY3Jvc3MtY2hlY2tzXCIgYnkgc2Nhbm5pbmcgZG93biB2ZXJ0aWNhbGx5IHRocm91Z2ggdGhlIGNlbnRlciBvZiB0aGUgcG9zc2libGVcbiAgICAgICAgICogYWxpZ25tZW50IHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhbiBhbGlnbm1lbnQgcGF0dGVybiB3YXMgZGV0ZWN0ZWRcbiAgICAgICAgICogQHBhcmFtIGNlbnRlckogY2VudGVyIG9mIHRoZSBzZWN0aW9uIHRoYXQgYXBwZWFycyB0byBjcm9zcyBhbiBhbGlnbm1lbnQgcGF0dGVyblxuICAgICAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlXG4gICAgICAgICAqIG9ic2VydmVkIGluIGFueSByZWFkaW5nIHN0YXRlLCBiYXNlZCBvbiB0aGUgcmVzdWx0cyBvZiB0aGUgaG9yaXpvbnRhbCBzY2FuXG4gICAgICAgICAqIEByZXR1cm4gdmVydGljYWwgY2VudGVyIG9mIGFsaWdubWVudCBwYXR0ZXJuLCBvciB7QGxpbmsgRmxvYXQjTmFOfSBpZiBub3QgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGNyb3NzQ2hlY2tWZXJ0aWNhbChzdGFydEkgLyppbnQqLywgY2VudGVySiAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50ID0gdGhpcy5jcm9zc0NoZWNrU3RhdGVDb3VudDtcbiAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSAwO1xuICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7XG4gICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyXG4gICAgICAgICAgICBsZXQgaSA9IHN0YXJ0STtcbiAgICAgICAgICAgIHdoaWxlIChpID49IDAgJiYgaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMV0gPD0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZTpcbiAgICAgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOb3cgYWxzbyBjb3VudCBkb3duIGZyb20gY2VudGVyXG4gICAgICAgICAgICBpID0gc3RhcnRJICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKztcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA9PT0gbWF4SSB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsyXSA8PSBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKztcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGVDb3VudFsyXSA+IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXTtcbiAgICAgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+VGhpcyBpcyBjYWxsZWQgd2hlbiBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvc3NpYmxlIGFsaWdubWVudCBwYXR0ZXJuLiBJdCB3aWxsXG4gICAgICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCBzZWUgaWYgdGhpcyBwYXR0ZXJuIGhhZCBiZWVuXG4gICAgICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlXG4gICAgICAgICAqIGZvdW5kIHRoZSBhbGlnbm1lbnQgcGF0dGVybi48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhblxuICAgICAgICAgKiBAcGFyYW0gaSByb3cgd2hlcmUgYWxpZ25tZW50IHBhdHRlcm4gbWF5IGJlIGZvdW5kXG4gICAgICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybiBpbiByb3dcbiAgICAgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlUG9zc2libGVDZW50ZXIoc3RhdGVDb3VudCwgaSAvKmludCovLCBqIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXTtcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlckogPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7XG4gICAgICAgICAgICBjb25zdCBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBjZW50ZXJKLCAyICogc3RhdGVDb3VudFsxXSwgc3RhdGVDb3VudFRvdGFsKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oY2VudGVySSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWRNb2R1bGVTaXplID0gKHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSkgLyAzLjA7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjZW50ZXIgb2YgdGhpcy5wb3NzaWJsZUNlbnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSGFkbid0IGZvdW5kIHRoaXMgYmVmb3JlOyBzYXZlIGl0XG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBuZXcgQWxpZ25tZW50UGF0dGVybihjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRQb2ludENhbGxiYWNrICE9PSBudWxsICYmIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW5cbiAgICAgKiB0aGUgY29ybmVycyBvZiBRUiBDb2Rlcy4gSXQgYWxzbyBlbmNhcHN1bGF0ZXMgYSBjb3VudCBvZiBzaW1pbGFyIGZpbmRlciBwYXR0ZXJucyxcbiAgICAgKiBhcyBhIGNvbnZlbmllbmNlIHRvIHRoZSBmaW5kZXIncyBib29ra2VlcGluZy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIEZpbmRlclBhdHRlcm4kMSBleHRlbmRzIFJlc3VsdFBvaW50IHtcbiAgICAgICAgLy8gRmluZGVyUGF0dGVybihwb3NYOiBudW1iZXIvKmZsb2F0Ki8sIHBvc1k6IG51bWJlci8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZTogbnVtYmVyLypmbG9hdCovKSB7XG4gICAgICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKVxuICAgICAgICAvLyB9XG4gICAgICAgIGNvbnN0cnVjdG9yKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHN1cGVyKHBvc1gsIHBvc1kpO1xuICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplID0gZXN0aW1hdGVkTW9kdWxlU2l6ZTtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICB2b2lkIGluY3JlbWVudENvdW50KCkge1xuICAgICAgICAgIHRoaXMuY291bnQrK1xuICAgICAgICB9XG4gICAgICAgICAqL1xuICAgICAgICAvKipcbiAgICAgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGZpbmRlciBwYXR0ZXJuIFwiYWJvdXQgZXF1YWxzXCIgYSBmaW5kZXIgcGF0dGVybiBhdCB0aGUgc3RhdGVkXG4gICAgICAgICAqIHBvc2l0aW9uIGFuZCBzaXplIC0tIG1lYW5pbmcsIGl0IGlzIGF0IG5lYXJseSB0aGUgc2FtZSBjZW50ZXIgd2l0aCBuZWFybHkgdGhlIHNhbWUgc2l6ZS48L3A+XG4gICAgICAgICAqL1xuICAgICAgICBhYm91dEVxdWFscyhtb2R1bGVTaXplIC8qZmxvYXQqLywgaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoaSAtIHRoaXMuZ2V0WSgpKSA8PSBtb2R1bGVTaXplICYmIE1hdGguYWJzKGogLSB0aGlzLmdldFgoKSkgPD0gbW9kdWxlU2l6ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsZVNpemVEaWZmID0gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbWJpbmVzIHRoaXMgb2JqZWN0J3MgY3VycmVudCBlc3RpbWF0ZSBvZiBhIGZpbmRlciBwYXR0ZXJuIHBvc2l0aW9uIGFuZCBtb2R1bGUgc2l6ZVxuICAgICAgICAgKiB3aXRoIGEgbmV3IGVzdGltYXRlLiBJdCByZXR1cm5zIGEgbmV3IHtAY29kZSBGaW5kZXJQYXR0ZXJufSBjb250YWluaW5nIGEgd2VpZ2h0ZWQgYXZlcmFnZVxuICAgICAgICAgKiBiYXNlZCBvbiBjb3VudC5cbiAgICAgICAgICovXG4gICAgICAgIGNvbWJpbmVFc3RpbWF0ZShpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8sIG5ld01vZHVsZVNpemUgLypmbG9hdCovKSB7XG4gICAgICAgICAgICBjb25zdCBjb21iaW5lZENvdW50ID0gdGhpcy5jb3VudCArIDE7XG4gICAgICAgICAgICBjb25zdCBjb21iaW5lZFggPSAodGhpcy5jb3VudCAqIHRoaXMuZ2V0WCgpICsgaikgLyBjb21iaW5lZENvdW50O1xuICAgICAgICAgICAgY29uc3QgY29tYmluZWRZID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFkoKSArIGkpIC8gY29tYmluZWRDb3VudDtcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkTW9kdWxlU2l6ZSA9ICh0aGlzLmNvdW50ICogdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyBjb21iaW5lZENvdW50O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuJDEoY29tYmluZWRYLCBjb21iaW5lZFksIGNvbWJpbmVkTW9kdWxlU2l6ZSwgY29tYmluZWRDb3VudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyBpbmZvcm1hdGlvbiBhYm91dCBmaW5kZXIgcGF0dGVybnMgaW4gYW4gaW1hZ2UsIGluY2x1ZGluZyB0aGUgbG9jYXRpb24gb2ZcbiAgICAgKiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLCBhbmQgdGhlaXIgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRmluZGVyUGF0dGVybkluZm8ge1xuICAgICAgICBjb25zdHJ1Y3RvcihwYXR0ZXJuQ2VudGVycykge1xuICAgICAgICAgICAgdGhpcy5ib3R0b21MZWZ0ID0gcGF0dGVybkNlbnRlcnNbMF07XG4gICAgICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTtcbiAgICAgICAgICAgIHRoaXMudG9wUmlnaHQgPSBwYXR0ZXJuQ2VudGVyc1syXTtcbiAgICAgICAgfVxuICAgICAgICBnZXRCb3R0b21MZWZ0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBnZXRUb3BMZWZ0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9wTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBnZXRUb3BSaWdodCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvcFJpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuQ29tcGFyYXRvcjsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovXG4gICAgLyppbXBvcnQgamF2YS51dGlsLk1hcDsqL1xuICAgIC8qKlxuICAgICAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmVcbiAgICAgKiBtYXJrZXJzIGF0IHRocmVlIGNvcm5lcnMgb2YgYSBRUiBDb2RlLjwvcD5cbiAgICAgKlxuICAgICAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIEZpbmRlclBhdHRlcm5GaW5kZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGltYWdlIGltYWdlIHRvIHNlYXJjaFxuICAgICAgICAgKi9cbiAgICAgICAgLy8gcHVibGljIGNvbnN0cnVjdG9yKGltYWdlOiBCaXRNYXRyaXgpIHtcbiAgICAgICAgLy8gICB0aGlzKGltYWdlLCBudWxsKVxuICAgICAgICAvLyB9XG4gICAgICAgIGNvbnN0cnVjdG9yKGltYWdlLCByZXN1bHRQb2ludENhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgPSByZXN1bHRQb2ludENhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0SW1hZ2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRQb3NzaWJsZUNlbnRlcnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7XG4gICAgICAgIH1cbiAgICAgICAgZmluZChoaW50cykge1xuICAgICAgICAgICAgY29uc3QgdHJ5SGFyZGVyID0gKGhpbnRzICE9PSBudWxsICYmIGhpbnRzICE9PSB1bmRlZmluZWQpICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuVFJZX0hBUkRFUik7XG4gICAgICAgICAgICBjb25zdCBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLlBVUkVfQkFSQ09ERSk7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluXG4gICAgICAgICAgICAvLyAxOjE6MzoxOjEgcmF0aW87IHRoaXMgdHJhY2tzIHRoZSBudW1iZXIgb2Ygc3VjaCBtb2R1bGVzIHNlZW4gc28gZmFyXG4gICAgICAgICAgICAvLyBMZXQncyBhc3N1bWUgdGhhdCB0aGUgbWF4aW11bSB2ZXJzaW9uIFFSIENvZGUgd2Ugc3VwcG9ydCB0YWtlcyB1cCAxLzQgdGhlIGhlaWdodCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdFxuICAgICAgICAgICAgLy8gbnVtYmVyIG9mIHBpeGVscyB0aGUgY2VudGVyIGNvdWxkIGJlLCBzbyBza2lwIHRoaXMgb2Z0ZW4uIFdoZW4gdHJ5aW5nIGhhcmRlciwgbG9vayBmb3IgYWxsXG4gICAgICAgICAgICAvLyBRUiB2ZXJzaW9ucyByZWdhcmRsZXNzIG9mIGhvdyBkZW5zZSB0aGV5IGFyZS5cbiAgICAgICAgICAgIGxldCBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpO1xuICAgICAgICAgICAgaWYgKGlTa2lwIDwgRmluZGVyUGF0dGVybkZpbmRlci5NSU5fU0tJUCB8fCB0cnlIYXJkZXIpIHtcbiAgICAgICAgICAgICAgICBpU2tpcCA9IEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGVDb3VudCA9IG5ldyBJbnQzMkFycmF5KDUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGlTa2lwIC0gMTsgaSA8IG1heEkgJiYgIWRvbmU7IGkgKz0gaVNraXApIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzXG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFswXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFszXSA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXhKOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldChqLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY3VycmVudFN0YXRlICYgMSkgPT09IDEpIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50W2N1cnJlbnRTdGF0ZV0rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY3VycmVudFN0YXRlICYgMSkgPT09IDApIHsgLy8gQ291bnRpbmcgYmxhY2sgcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gNCkgeyAvLyBBIHdpbm5lcj9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFydCBleGFtaW5pbmcgZXZlcnkgb3RoZXIgbGluZS4gQ2hlY2tpbmcgZWFjaCBsaW5lIHR1cm5lZCBvdXQgdG8gYmUgdG9vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzU2tpcHBlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dTa2lwID0gdGhpcy5maW5kUm93U2tpcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgcm93cyBiZXR3ZWVuIHJvdyBvZiBsb3dlciBjb25maXJtZWQgY2VudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdG9wIG9mIHByZXN1bWVkIHRoaXJkIGNvbmZpcm1lZCBjZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQsIGVudGlyZSB3aWR0aCBvZiBjZW50ZXIgb2YgZmluZGVyIHBhdHRlcm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgYnkgcm93U2tpcCwgYnV0IGJhY2sgb2ZmIGJ5IHN0YXRlQ291bnRbMl0gKHNpemUgb2YgbGFzdCBjZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpcyBhYm91dCB0byBiZSByZS1hZGRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArPSByb3dTa2lwIC0gc3RhdGVDb3VudFsyXSAtIGlTa2lwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFswXSA9IHN0YXRlQ291bnRbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFszXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIHN0YXRlIHRvIHN0YXJ0IGxvb2tpbmcgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSBzdGF0ZUNvdW50WzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFtjdXJyZW50U3RhdGVdKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gc3RhdGVDb3VudFswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCBhIHRoaXJkIG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0aGlzLmhhdmVNdWx0aXBseUNvbmZpcm1lZENlbnRlcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTtcbiAgICAgICAgICAgIFJlc3VsdFBvaW50Lm9yZGVyQmVzdFBhdHRlcm5zKHBhdHRlcm5JbmZvKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmluZGVyUGF0dGVybkluZm8ocGF0dGVybkluZm8pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbixcbiAgICAgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIHJ1bi5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBjZW50ZXJGcm9tRW5kKHN0YXRlQ291bnQsIGVuZCAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHJlYWRcbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3NcbiAgICAgICAgICogICAgICAgICB1c2VkIGJ5IGZpbmRlciBwYXR0ZXJucyB0byBiZSBjb25zaWRlcmVkIGEgbWF0Y2hcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBmb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSB7XG4gICAgICAgICAgICBsZXQgdG90YWxNb2R1bGVTaXplID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBzdGF0ZUNvdW50W2ldO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3RhbE1vZHVsZVNpemUgPCA3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDtcbiAgICAgICAgICAgIGNvbnN0IG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDtcbiAgICAgICAgICAgIC8vIEFsbG93IGxlc3MgdGhhbiA1MCUgdmFyaWFuY2UgZnJvbSAxLTEtMy0xLTEgcHJvcG9ydGlvbnNcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFswXSkgPCBtYXhWYXJpYW5jZSAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoMy4wICogbW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMl0pIDwgMyAqIG1heFZhcmlhbmNlICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbM10pIDwgbWF4VmFyaWFuY2UgJiZcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRDcm9zc0NoZWNrU3RhdGVDb3VudCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gdGhpcy5jcm9zc0NoZWNrU3RhdGVDb3VudDtcbiAgICAgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzBdID0gMDtcbiAgICAgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDtcbiAgICAgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzJdID0gMDtcbiAgICAgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzNdID0gMDtcbiAgICAgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDtcbiAgICAgICAgICAgIHJldHVybiBjcm9zc0NoZWNrU3RhdGVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZFxuICAgICAgICAgKiBcImNyb3NzLWNyb3NzLWNyb3NzLWNoZWNrc1wiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlXG4gICAgICAgICAqIGZpbmRlciBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZFxuICAgICAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIG1heENvdW50IG1heGltdW0gcmVhc29uYWJsZSBudW1iZXIgb2YgbW9kdWxlcyB0aGF0IHNob3VsZCBiZVxuICAgICAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW5cbiAgICAgICAgICogQHBhcmFtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIFRoZSBvcmlnaW5hbCBzdGF0ZSBjb3VudCB0b3RhbC5cbiAgICAgICAgICogQHJldHVybiB0cnVlIGlmIHByb3BvcnRpb25zIGFyZSB3aXRoaW5nIGV4cGVjdGVkIGxpbWl0c1xuICAgICAgICAgKi9cbiAgICAgICAgY3Jvc3NDaGVja0RpYWdvbmFsKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7XG4gICAgICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCwgbGVmdCBmcm9tIGNlbnRlciBmaW5kaW5nIGJsYWNrIGNlbnRlciBtYXNzXG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1hZ2U7XG4gICAgICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmIGltYWdlLmdldChjZW50ZXJKIC0gaSwgc3RhcnRJIC0gaSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDb250aW51ZSB1cCwgbGVmdCBmaW5kaW5nIHdoaXRlIHNwYWNlXG4gICAgICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmXG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKztcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBhbHJlYWR5IHRvbyBtYW55IG1vZHVsZXMgaW4gdGhpcyBzdGF0ZSBvciByYW4gb2ZmIHRoZSBlZGdlOlxuICAgICAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXJcbiAgICAgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSAmJlxuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1heEogPSBpbWFnZS5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXJcbiAgICAgICAgICAgIGkgPSAxO1xuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/XG4gICAgICAgICAgICBpZiAoc3RhcnRJICsgaSA+PSBtYXhJIHx8IGNlbnRlckogKyBpID49IG1heEopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoc3RhcnRJICsgaSA8IG1heEkgJiYgY2VudGVySiArIGkgPCBtYXhKICYmICFpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmXG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFszXSA8IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmXG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSsrO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZUNvdW50WzRdID49IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBtb3JlIHRoYW4gMTAwJSBkaWZmZXJlbnQgdGhhblxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhzdGF0ZUNvdW50VG90YWwgLSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgPCAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgJiZcbiAgICAgICAgICAgICAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBmaW5kZXIgcGF0dGVybiwgdGhpcyBtZXRob2RcbiAgICAgICAgICogXCJjcm9zcy1jaGVja3NcIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZVxuICAgICAgICAgKiBmaW5kZXIgcGF0dGVybiB0byBzZWUgaWYgdGhlIHNhbWUgcHJvcG9ydGlvbiBpcyBkZXRlY3RlZC48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGEgZmluZGVyIHBhdHRlcm4gd2FzIGRldGVjdGVkXG4gICAgICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVyblxuICAgICAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlXG4gICAgICAgICAqIG9ic2VydmVkIGluIGFueSByZWFkaW5nIHN0YXRlLCBiYXNlZCBvbiB0aGUgcmVzdWx0cyBvZiB0aGUgaG9yaXpvbnRhbCBzY2FuXG4gICAgICAgICAqIEByZXR1cm4gdmVydGljYWwgY2VudGVyIG9mIGZpbmRlciBwYXR0ZXJuLCBvciB7QGxpbmsgRmxvYXQjTmFOfSBpZiBub3QgZm91bmRcbiAgICAgICAgICovXG4gICAgICAgIGNyb3NzQ2hlY2tWZXJ0aWNhbChzdGFydEkgLyppbnQqLywgY2VudGVySiAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50ID0gdGhpcy5nZXRDcm9zc0NoZWNrU3RhdGVDb3VudCgpO1xuICAgICAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAgZnJvbSBjZW50ZXJcbiAgICAgICAgICAgIGxldCBpID0gc3RhcnRJO1xuICAgICAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpID49IDAgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6XG4gICAgICAgICAgICBpZiAoaSA8IDAgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpID49IDAgJiYgaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOb3cgYWxzbyBjb3VudCBkb3duIGZyb20gY2VudGVyXG4gICAgICAgICAgICBpID0gc3RhcnRJICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPT09IG1heEkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFszXSA8IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBtb3JlIHRoYW4gNDAlIGRpZmZlcmVudCB0aGFuXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwsIGFzc3VtZSBpdCdzIGEgZmFsc2UgcG9zaXRpdmVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gK1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbNF07XG4gICAgICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsXG4gICAgICAgICAqIGV4Y2VwdCBpdCByZWFkcyBob3Jpem9udGFsbHkgaW5zdGVhZCBvZiB2ZXJ0aWNhbGx5LiBUaGlzIGlzIHVzZWQgdG8gY3Jvc3MtY3Jvc3NcbiAgICAgICAgICogY2hlY2sgYSB2ZXJ0aWNhbCBjcm9zcyBjaGVjayBhbmQgbG9jYXRlIHRoZSByZWFsIGNlbnRlciBvZiB0aGUgYWxpZ25tZW50IHBhdHRlcm4uPC9wPlxuICAgICAgICAgKi9cbiAgICAgICAgY3Jvc3NDaGVja0hvcml6b250YWwoc3RhcnRKIC8qaW50Ki8sIGNlbnRlckkgLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmltYWdlO1xuICAgICAgICAgICAgY29uc3QgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50ID0gdGhpcy5nZXRDcm9zc0NoZWNrU3RhdGVDb3VudCgpO1xuICAgICAgICAgICAgbGV0IGogPSBzdGFydEo7XG4gICAgICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkge1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKztcbiAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGogPj0gMCAmJiAhaW1hZ2UuZ2V0KGosIGNlbnRlckkpICYmIHN0YXRlQ291bnRbMV0gPD0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7XG4gICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGogPCAwIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrO1xuICAgICAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaiA9IHN0YXJ0SiArIDE7XG4gICAgICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgaW1hZ2UuZ2V0KGosIGNlbnRlckkpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrO1xuICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqID09PSBtYXhKKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiAhaW1hZ2UuZ2V0KGosIGNlbnRlckkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKztcbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSsrO1xuICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZUNvdW50WzRdID49IG1heENvdW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgc2lnbmlmaWNhbnRseSBkaWZmZXJlbnQgdGhhblxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlXG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdO1xuICAgICAgICAgICAgaWYgKDUgKiBNYXRoLmFicyhzdGF0ZUNvdW50VG90YWwgLSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgPj0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaikgOiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbFxuICAgICAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwsIGFoLCBjcm9zcy1jcm9zcy1jaGVja1xuICAgICAgICAgKiB3aXRoIGFub3RoZXIgaG9yaXpvbnRhbCBzY2FuLiBUaGlzIGlzIG5lZWRlZCBwcmltYXJpbHkgdG8gbG9jYXRlIHRoZSByZWFsIGhvcml6b250YWxcbiAgICAgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy5cbiAgICAgICAgICogQW5kIHRoZW4gd2UgY3Jvc3MtY3Jvc3MtY3Jvc3MgY2hlY2sgd2l0aCBhbm90aGVyIGRpYWdvbmFsIHNjYW4uPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3NcbiAgICAgICAgICogdGhlIG51bWJlciBvZiB0aW1lcyBlYWNoIGxvY2F0aW9uIGhhcyBiZWVuIG5lYXJseS1tYXRjaGVkIGFzIGEgZmluZGVyIHBhdHRlcm4uXG4gICAgICAgICAqIEVhY2ggYWRkaXRpb25hbCBmaW5kIGlzIG1vcmUgZXZpZGVuY2UgdGhhdCB0aGUgbG9jYXRpb24gaXMgaW4gZmFjdCBhIGZpbmRlclxuICAgICAgICAgKiBwYXR0ZXJuIGNlbnRlclxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCByZWFkaW5nIHN0YXRlIG1vZHVsZSBjb3VudHMgZnJvbSBob3Jpem9udGFsIHNjYW5cbiAgICAgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZFxuICAgICAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgZmluZGVyIHBhdHRlcm4gaW4gcm93XG4gICAgICAgICAqIEBwYXJhbSBwdXJlQmFyY29kZSB0cnVlIGlmIGluIFwicHVyZSBiYXJjb2RlXCIgbW9kZVxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWYgYSBmaW5kZXIgcGF0dGVybiBjYW5kaWRhdGUgd2FzIGZvdW5kIHRoaXMgdGltZVxuICAgICAgICAgKi9cbiAgICAgICAgaGFuZGxlUG9zc2libGVDZW50ZXIoc3RhdGVDb3VudCwgaSAvKmludCovLCBqIC8qaW50Ki8sIHB1cmVCYXJjb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICtcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdO1xuICAgICAgICAgICAgbGV0IGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7XG4gICAgICAgICAgICBsZXQgY2VudGVySSA9IHRoaXMuY3Jvc3NDaGVja1ZlcnRpY2FsKGksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oY2VudGVySSkpIHtcbiAgICAgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVja1xuICAgICAgICAgICAgICAgIGNlbnRlckogPSB0aGlzLmNyb3NzQ2hlY2tIb3Jpem9udGFsKC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckkpLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oY2VudGVySikgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGxlbmd0aCA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnNbaW5kZXhdID0gY2VudGVyLmNvbWJpbmVFc3RpbWF0ZShjZW50ZXJJLCBjZW50ZXJKLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybiQxKGNlbnRlckosIGNlbnRlckksIGVzdGltYXRlZE1vZHVsZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdFxuICAgICAgICAgKiAgICAgICAgIHR3byBmaW5kZXIgcGF0dGVybnMgdGhhdCBoYXZlIGJlZW4gbG9jYXRlZC4gSW4gc29tZSBjYXNlcyB0aGVpciBwb3NpdGlvbiB3aWxsXG4gICAgICAgICAqICAgICAgICAgYWxsb3cgdXMgdG8gaW5mZXIgdGhhdCB0aGUgdGhpcmQgcGF0dGVybiBtdXN0IGxpZSBiZWxvdyBhIGNlcnRhaW4gcG9pbnQgZmFydGhlclxuICAgICAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgZmluZFJvd1NraXAoKSB7XG4gICAgICAgICAgICBjb25zdCBtYXggPSB0aGlzLnBvc3NpYmxlQ2VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobWF4IDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmaXJzdENvbmZpcm1lZENlbnRlciA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNlbnRlciBvZiB0aGlzLnBvc3NpYmxlQ2VudGVycykge1xuICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuZ2V0Q291bnQoKSA+PSBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Q29uZmlybWVkQ2VudGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0Q29uZmlybWVkQ2VudGVyID0gY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0d28gY29uZmlybWVkIGNlbnRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBmYXIgZG93biBjYW4gd2Ugc2tpcCBiZWZvcmUgcmVzdW1pbmcgbG9va2luZyBmb3IgdGhlIG5leHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhdHRlcm4/IEluIHRoZSB3b3JzdCBjYXNlLCBvbmx5IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSB4IC8geSBjb29yZGluYXRlcyBvZiB0aGUgdHdvIGNlbnRlcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBjYXNlIHdoZXJlIHlvdSBmaW5kIHRvcCBsZWZ0IGxhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc1NraXBwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qKGludCkgKi8gTWF0aC5mbG9vcigoTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WCgpIC0gY2VudGVyLmdldFgoKSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGZpcnN0Q29uZmlybWVkQ2VudGVyLmdldFkoKSAtIGNlbnRlci5nZXRZKCkpKSAvIDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZFxuICAgICAgICAgKiAgICAgICAgIGF0IGxlYXN0IHtAbGluayAjQ0VOVEVSX1FVT1JVTX0gdGltZXMgZWFjaCwgYW5kLCB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplIG9mIHRoZVxuICAgICAgICAgKiAgICAgICAgIGNhbmRpZGF0ZXMgaXMgXCJwcmV0dHkgc2ltaWxhclwiXG4gICAgICAgICAqL1xuICAgICAgICBoYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCkge1xuICAgICAgICAgICAgbGV0IGNvbmZpcm1lZENvdW50ID0gMDtcbiAgICAgICAgICAgIGxldCB0b3RhbE1vZHVsZVNpemUgPSAwLjA7XG4gICAgICAgICAgICBjb25zdCBtYXggPSB0aGlzLnBvc3NpYmxlQ2VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgdGhpcy5wb3NzaWJsZUNlbnRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkge1xuICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhIFwiZmFsc2UgcG9zaXRpdmVcIlxuICAgICAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplc1xuICAgICAgICAgICAgLy8gdmFyeSB0b28gbXVjaC4gV2UgYXJiaXRyYXJpbHkgc2F5IHRoYXQgd2hlbiB0aGUgdG90YWwgZGV2aWF0aW9uIGZyb20gYXZlcmFnZSBleGNlZWRzXG4gICAgICAgICAgICAvLyA1JSBvZiB0aGUgdG90YWwgbW9kdWxlIHNpemUgZXN0aW1hdGVzLCBpdCdzIHRvbyBtdWNoLlxuICAgICAgICAgICAgY29uc3QgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIG1heDtcbiAgICAgICAgICAgIGxldCB0b3RhbERldmlhdGlvbiA9IDAuMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLnBvc3NpYmxlQ2VudGVycykge1xuICAgICAgICAgICAgICAgIHRvdGFsRGV2aWF0aW9uICs9IE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG90YWxEZXZpYXRpb24gPD0gMC4wNSAqIHRvdGFsTW9kdWxlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB0aGUgMyBiZXN0IHtAbGluayBGaW5kZXJQYXR0ZXJufXMgZnJvbSBvdXIgbGlzdCBvZiBjYW5kaWRhdGVzLiBUaGUgXCJiZXN0XCIgYXJlXG4gICAgICAgICAqICAgICAgICAgdGhvc2UgdGhhdCBoYXZlIGJlZW4gZGV0ZWN0ZWQgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcywgYW5kIHdob3NlIG1vZHVsZVxuICAgICAgICAgKiAgICAgICAgIHNpemUgZGlmZmVycyBmcm9tIHRoZSBhdmVyYWdlIGFtb25nIHRob3NlIHBhdHRlcm5zIHRoZSBsZWFzdFxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0XG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RCZXN0UGF0dGVybnMoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFNpemUgPSB0aGlzLnBvc3NpYmxlQ2VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoc3RhcnRTaXplIDwgMykge1xuICAgICAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJuc1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7XG4gICAgICAgICAgICBsZXQgYXZlcmFnZTtcbiAgICAgICAgICAgIC8vIEZpbHRlciBvdXRsaWVyIHBvc3NpYmlsaXRpZXMgd2hvc2UgbW9kdWxlIHNpemUgaXMgdG9vIGRpZmZlcmVudFxuICAgICAgICAgICAgaWYgKHN0YXJ0U2l6ZSA+IDMpIHtcbiAgICAgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tXG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDtcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gMC4wO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2VudGVyIG9mIHRoaXMucG9zc2libGVDZW50ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpemUgPSBjZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlICs9IHNpemUgKiBzaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gc3RhcnRTaXplO1xuICAgICAgICAgICAgICAgIGxldCBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpO1xuICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KFxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgLy8gRnVydGhlc3RGcm9tQXZlcmFnZUNvbXBhcmF0b3IgaW1wbGVtZW50cyBDb21wYXJhdG9yPEZpbmRlclBhdHRlcm4+XG4gICAgICAgICAgICAgICAgKGNlbnRlcjEsIGNlbnRlcjIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkQSA8IGRCID8gLTEgOiBkQSA+IGRCID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGltaXQgPSBNYXRoLm1heCgwLjIgKiBhdmVyYWdlLCBzdGREZXYpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpID4gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgICAgICAgICAvLyBUaHJvdyBhd2F5IGFsbCBidXQgdGhvc2UgZmlyc3Qgc2l6ZSBjYW5kaWRhdGUgcG9pbnRzIHdlIGZvdW5kLlxuICAgICAgICAgICAgICAgIGxldCB0b3RhbE1vZHVsZVNpemUgPSAwLjA7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwb3NzaWJsZUNlbnRlciBvZiBwb3NzaWJsZUNlbnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxNb2R1bGVTaXplICs9IHBvc3NpYmxlQ2VudGVyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogPHA+T3JkZXJzIGJ5IHtAbGluayBGaW5kZXJQYXR0ZXJuI2dldENvdW50KCl9LCBkZXNjZW5kaW5nLjwvcD5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPlxuICAgICAgICAgICAgICAgIChjZW50ZXIxLCBjZW50ZXIyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIyLmdldENvdW50KCkgPT09IGNlbnRlcjEuZ2V0Q291bnQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZEIgPSBNYXRoLmFicyhjZW50ZXIxLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLFxuICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1sxXSxcbiAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnNbMl1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgRmluZGVyUGF0dGVybkZpbmRlci5DRU5URVJfUVVPUlVNID0gMjtcbiAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQID0gMzsgLy8gMSBwaXhlbC9tb2R1bGUgdGltZXMgMyBtb2R1bGVzL2NlbnRlclxuICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUFYX01PRFVMRVMgPSA1NzsgLy8gc3VwcG9ydCB1cCB0byB2ZXJzaW9uIDEwIGZvciBtb2JpbGUgY2xpZW50c1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovXG4gICAgLyoqXG4gICAgICogPHA+RW5jYXBzdWxhdGVzIGxvZ2ljIHRoYXQgY2FuIGRldGVjdCBhIFFSIENvZGUgaW4gYW4gaW1hZ2UsIGV2ZW4gaWYgdGhlIFFSIENvZGVcbiAgICAgKiBpcyByb3RhdGVkIG9yIHNrZXdlZCwgb3IgcGFydGlhbGx5IG9ic2N1cmVkLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICovXG4gICAgY2xhc3MgRGV0ZWN0b3IkMiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGltYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0SW1hZ2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBnZXRSZXN1bHRQb2ludENhbGxiYWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIHtAbGluayBEZXRlY3RvclJlc3VsdH0gZW5jYXBzdWxhdGluZyByZXN1bHRzIG9mIGRldGVjdGluZyBhIFFSIENvZGVcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZFxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBhIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWRcbiAgICAgICAgICovXG4gICAgICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHtcbiAgICAgICAgLy8gICByZXR1cm4gZGV0ZWN0KG51bGwpXG4gICAgICAgIC8vIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkRldGVjdHMgYSBRUiBDb2RlIGluIGFuIGltYWdlLjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIERldGVjdG9yUmVzdWx0fSBlbmNhcHN1bGF0aW5nIHJlc3VsdHMgb2YgZGV0ZWN0aW5nIGEgUVIgQ29kZVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIFFSIENvZGUgY2Fubm90IGJlIGZvdW5kXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZFxuICAgICAgICAgKi9cbiAgICAgICAgZGV0ZWN0KGhpbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgPSAoaGludHMgPT09IG51bGwgfHwgaGludHMgPT09IHVuZGVmaW5lZCkgPyBudWxsIDpcbiAgICAgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGUkMS5ORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyk7XG4gICAgICAgICAgICBjb25zdCBmaW5kZXIgPSBuZXcgRmluZGVyUGF0dGVybkZpbmRlcih0aGlzLmltYWdlLCB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2spO1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IGZpbmRlci5maW5kKGhpbnRzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NGaW5kZXJQYXR0ZXJuSW5mbyhpbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbykge1xuICAgICAgICAgICAgY29uc3QgdG9wTGVmdCA9IGluZm8uZ2V0VG9wTGVmdCgpO1xuICAgICAgICAgICAgY29uc3QgdG9wUmlnaHQgPSBpbmZvLmdldFRvcFJpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCBib3R0b21MZWZ0ID0gaW5mby5nZXRCb3R0b21MZWZ0KCk7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVTaXplID0gdGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0KTtcbiAgICAgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdObyBwYXR0ZXJuIGZvdW5kIGluIHByb2NjZXNzIGZpbmRlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IERldGVjdG9yJDIuY29tcHV0ZURpbWVuc2lvbih0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgbW9kdWxlU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBwcm92aXNpb25hbFZlcnNpb24gPSBWZXJzaW9uJDEuZ2V0UHJvdmlzaW9uYWxWZXJzaW9uRm9yRGltZW5zaW9uKGRpbWVuc2lvbik7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVzQmV0d2VlbkZQQ2VudGVycyA9IHByb3Zpc2lvbmFsVmVyc2lvbi5nZXREaW1lbnNpb25Gb3JWZXJzaW9uKCkgLSA3O1xuICAgICAgICAgICAgbGV0IGFsaWdubWVudFBhdHRlcm4gPSBudWxsO1xuICAgICAgICAgICAgLy8gQW55dGhpbmcgYWJvdmUgdmVyc2lvbiAxIGhhcyBhbiBhbGlnbm1lbnQgcGF0dGVyblxuICAgICAgICAgICAgaWYgKHByb3Zpc2lvbmFsVmVyc2lvbi5nZXRBbGlnbm1lbnRQYXR0ZXJuQ2VudGVycygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhIFwiYm90dG9tIHJpZ2h0XCIgZmluZGVyIHBhdHRlcm4gd291bGQgaGF2ZSBiZWVuXG4gICAgICAgICAgICAgICAgY29uc3QgYm90dG9tUmlnaHRYID0gdG9wUmlnaHQuZ2V0WCgpIC0gdG9wTGVmdC5nZXRYKCkgKyBib3R0b21MZWZ0LmdldFgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3R0b21SaWdodFkgPSB0b3BSaWdodC5nZXRZKCkgLSB0b3BMZWZ0LmdldFkoKSArIGJvdHRvbUxlZnQuZ2V0WSgpO1xuICAgICAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlc1xuICAgICAgICAgICAgICAgIC8vIGZyb20gXCJib3R0b20gcmlnaHRcIiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVycztcbiAgICAgICAgICAgICAgICBjb25zdCBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7XG4gICAgICAgICAgICAgICAgLy8gS2luZCBvZiBhcmJpdHJhcnkgLS0gZXhwYW5kIHNlYXJjaCByYWRpdXMgYmVmb3JlIGdpdmluZyB1cFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSA0OyBpIDw9IDE2OyBpIDw8PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnRQYXR0ZXJuID0gdGhpcy5maW5kQWxpZ25tZW50SW5SZWdpb24obW9kdWxlU2l6ZSwgZXN0QWxpZ25tZW50WCwgZXN0QWxpZ25tZW50WSwgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAocmUgLypOb3RGb3VuZEV4Y2VwdGlvbiovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXhjZXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IG5leHQgcm91bmRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkaWRuJ3QgZmluZCBhbGlnbm1lbnQgcGF0dGVybi4uLiB3ZWxsIHRyeSBhbnl3YXkgd2l0aG91dCBpdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gRGV0ZWN0b3IkMi5jcmVhdGVUcmFuc2Zvcm0odG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbUxlZnQsIGFsaWdubWVudFBhdHRlcm4sIGRpbWVuc2lvbik7XG4gICAgICAgICAgICBjb25zdCBiaXRzID0gRGV0ZWN0b3IkMi5zYW1wbGVHcmlkKHRoaXMuaW1hZ2UsIHRyYW5zZm9ybSwgZGltZW5zaW9uKTtcbiAgICAgICAgICAgIGxldCBwb2ludHM7XG4gICAgICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBbYm90dG9tTGVmdCwgdG9wTGVmdCwgdG9wUmlnaHQsIGFsaWdubWVudFBhdHRlcm5dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdChiaXRzLCBwb2ludHMpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjcmVhdGVUcmFuc2Zvcm0odG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbUxlZnQsIGFsaWdubWVudFBhdHRlcm4sIGRpbWVuc2lvbiAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBkaW1NaW51c1RocmVlID0gZGltZW5zaW9uIC0gMy41O1xuICAgICAgICAgICAgbGV0IGJvdHRvbVJpZ2h0WDsgLypmbG9hdCovXG4gICAgICAgICAgICBsZXQgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki9cbiAgICAgICAgICAgIGxldCBzb3VyY2VCb3R0b21SaWdodFg7IC8qZmxvYXQqL1xuICAgICAgICAgICAgbGV0IHNvdXJjZUJvdHRvbVJpZ2h0WTsgLypmbG9hdCovXG4gICAgICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0WCA9IGFsaWdubWVudFBhdHRlcm4uZ2V0WCgpO1xuICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0WSA9IGFsaWdubWVudFBhdHRlcm4uZ2V0WSgpO1xuICAgICAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7XG4gICAgICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRZID0gc291cmNlQm90dG9tUmlnaHRYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgaGF2ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiwganVzdCBtYWtlIHVwIHRoZSBib3R0b20tcmlnaHQgcG9pbnRcbiAgICAgICAgICAgICAgICBib3R0b21SaWdodFggPSAodG9wUmlnaHQuZ2V0WCgpIC0gdG9wTGVmdC5nZXRYKCkpICsgYm90dG9tTGVmdC5nZXRYKCk7XG4gICAgICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpO1xuICAgICAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWU7XG4gICAgICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRZID0gZGltTWludXNUaHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBzYW1wbGVHcmlkKGltYWdlLCB0cmFuc2Zvcm0sIGRpbWVuc2lvbiAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVyID0gR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXIuc2FtcGxlR3JpZFdpdGhUcmFuc2Zvcm0oaW1hZ2UsIGRpbWVuc2lvbiwgZGltZW5zaW9uLCB0cmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5Db21wdXRlcyB0aGUgZGltZW5zaW9uIChudW1iZXIgb2YgbW9kdWxlcyBvbiBhIHNpemUpIG9mIHRoZSBRUiBDb2RlIGJhc2VkIG9uIHRoZSBwb3NpdGlvblxuICAgICAgICAgKiBvZiB0aGUgZmluZGVyIHBhdHRlcm5zIGFuZCBlc3RpbWF0ZWQgbW9kdWxlIHNpemUuPC9wPlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNvbXB1dGVEaW1lbnNpb24odG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbUxlZnQsIG1vZHVsZVNpemUgLypmbG9hdCovKSB7XG4gICAgICAgICAgICBjb25zdCB0bHRyQ2VudGVyc0RpbWVuc2lvbiA9IE1hdGhVdGlscy5yb3VuZChSZXN1bHRQb2ludC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTtcbiAgICAgICAgICAgIGNvbnN0IHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzLnJvdW5kKFJlc3VsdFBvaW50LmRpc3RhbmNlKHRvcExlZnQsIGJvdHRvbUxlZnQpIC8gbW9kdWxlU2l6ZSk7XG4gICAgICAgICAgICBsZXQgZGltZW5zaW9uID0gTWF0aC5mbG9vcigodGx0ckNlbnRlcnNEaW1lbnNpb24gKyB0bGJsQ2VudGVyc0RpbWVuc2lvbikgLyAyKSArIDc7XG4gICAgICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDRcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbisrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyAxPyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRpbWVuc2lvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+Q29tcHV0ZXMgYW4gYXZlcmFnZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgYmFzZWQgb24gZXN0aW1hdGVkIGRlcml2ZWQgZnJvbSB0aGUgcG9zaXRpb25zXG4gICAgICAgICAqIG9mIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdG9wTGVmdCBkZXRlY3RlZCB0b3AtbGVmdCBmaW5kZXIgcGF0dGVybiBjZW50ZXJcbiAgICAgICAgICogQHBhcmFtIHRvcFJpZ2h0IGRldGVjdGVkIHRvcC1yaWdodCBmaW5kZXIgcGF0dGVybiBjZW50ZXJcbiAgICAgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyXG4gICAgICAgICAqIEByZXR1cm4gZXN0aW1hdGVkIG1vZHVsZSBzaXplXG4gICAgICAgICAqL1xuICAgICAgICBjYWxjdWxhdGVNb2R1bGVTaXplKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0KSB7XG4gICAgICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZU9uZVdheSh0b3BMZWZ0LCB0b3BSaWdodCkgK1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZU9uZVdheSh0b3BMZWZ0LCBib3R0b21MZWZ0KSkgLyAyLjA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkVzdGltYXRlcyBtb2R1bGUgc2l6ZSBiYXNlZCBvbiB0d28gZmluZGVyIHBhdHRlcm5zIC0tIGl0IHVzZXNcbiAgICAgICAgICoge0BsaW5rICNzaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cyhpbnQsIGludCwgaW50LCBpbnQpfSB0byBmaWd1cmUgdGhlXG4gICAgICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPlxuICAgICAgICAgKi9cbiAgICAgICAgY2FsY3VsYXRlTW9kdWxlU2l6ZU9uZVdheShwYXR0ZXJuLCBvdGhlclBhdHRlcm4pIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZVNpemVFc3QxID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCBcbiAgICAgICAgICAgIC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFkoKSksIFxuICAgICAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCBcbiAgICAgICAgICAgIC8qKGludCkgKi8gTWF0aC5mbG9vcihvdGhlclBhdHRlcm4uZ2V0WSgpKSk7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVTaXplRXN0MiA9IHRoaXMuc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCBcbiAgICAgICAgICAgIC8qKGludCkgKi8gTWF0aC5mbG9vcihvdGhlclBhdHRlcm4uZ2V0WSgpKSwgXG4gICAgICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCBcbiAgICAgICAgICAgIC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFkoKSkpO1xuICAgICAgICAgICAgaWYgKGlzTmFOKG1vZHVsZVNpemVFc3QxKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBdmVyYWdlIHRoZW0sIGFuZCBkaXZpZGUgYnkgNyBzaW5jZSB3ZSd2ZSBjb3VudGVkIHRoZSB3aWR0aCBvZiAzIGJsYWNrIG1vZHVsZXMsXG4gICAgICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuXG4gICAgICAgICAgICByZXR1cm4gKG1vZHVsZVNpemVFc3QxICsgbW9kdWxlU2l6ZUVzdDIpIC8gMTQuMDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2ZcbiAgICAgICAgICogYSBmaW5kZXIgcGF0dGVybiBieSBsb29raW5nIGZvciBhIGJsYWNrLXdoaXRlLWJsYWNrIHJ1biBmcm9tIHRoZSBjZW50ZXIgaW4gdGhlIGRpcmVjdGlvblxuICAgICAgICAgKiBvZiBhbm90aGVyIHBvaW50IChhbm90aGVyIGZpbmRlciBwYXR0ZXJuIGNlbnRlciksIGFuZCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIHRvby5cbiAgICAgICAgICovXG4gICAgICAgIHNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGZyb21YLCBmcm9tWSwgdG9YLCB0b1kpO1xuICAgICAgICAgICAgLy8gTm93IGNvdW50IG90aGVyIHdheSAtLSBkb24ndCBydW4gb2ZmIGltYWdlIHRob3VnaCBvZiBjb3Vyc2VcbiAgICAgICAgICAgIGxldCBzY2FsZSA9IDEuMDtcbiAgICAgICAgICAgIGxldCBvdGhlclRvWCA9IGZyb21YIC0gKHRvWCAtIGZyb21YKTtcbiAgICAgICAgICAgIGlmIChvdGhlclRvWCA8IDApIHtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTtcbiAgICAgICAgICAgICAgICBvdGhlclRvWCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHtcbiAgICAgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxIC0gZnJvbVgpIC8gLyooZmxvYXQpICovIChvdGhlclRvWCAtIGZyb21YKTtcbiAgICAgICAgICAgICAgICBvdGhlclRvWCA9IHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgb3RoZXJUb1kgPSAvKihpbnQpICovIE1hdGguZmxvb3IoZnJvbVkgLSAodG9ZIC0gZnJvbVkpICogc2NhbGUpO1xuICAgICAgICAgICAgc2NhbGUgPSAxLjA7XG4gICAgICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7XG4gICAgICAgICAgICAgICAgc2NhbGUgPSBmcm9tWSAvIC8qKGZsb2F0KSAqLyAoZnJvbVkgLSBvdGhlclRvWSk7XG4gICAgICAgICAgICAgICAgb3RoZXJUb1kgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3RoZXJUb1kgPj0gdGhpcy5pbWFnZS5nZXRIZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxIC0gZnJvbVkpIC8gLyooZmxvYXQpICovIChvdGhlclRvWSAtIGZyb21ZKTtcbiAgICAgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3RoZXJUb1ggPSAvKihpbnQpICovIE1hdGguZmxvb3IoZnJvbVggKyAob3RoZXJUb1ggLSBmcm9tWCkgKiBzY2FsZSk7XG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpO1xuICAgICAgICAgICAgLy8gTWlkZGxlIHBpeGVsIGlzIGRvdWJsZS1jb3VudGVkIHRoaXMgd2F5OyBzdWJ0cmFjdCAxXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0IC0gMS4wO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5UaGlzIG1ldGhvZCB0cmFjZXMgYSBsaW5lIGZyb20gYSBwb2ludCBpbiB0aGUgaW1hZ2UsIGluIHRoZSBkaXJlY3Rpb24gdG93YXJkcyBhbm90aGVyIHBvaW50LlxuICAgICAgICAgKiBJdCBiZWdpbnMgaW4gYSBibGFjayByZWdpb24sIGFuZCBrZWVwcyBnb2luZyB1bnRpbCBpdCBmaW5kcyB3aGl0ZSwgdGhlbiBibGFjaywgdGhlbiB3aGl0ZSBhZ2Fpbi5cbiAgICAgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+XG4gICAgICAgICAqXG4gICAgICAgICAqIDxwPlRoaXMgaXMgdXNlZCB3aGVuIGZpZ3VyaW5nIG91dCBob3cgd2lkZSBhIGZpbmRlciBwYXR0ZXJuIGlzLCB3aGVuIHRoZSBmaW5kZXIgcGF0dGVyblxuICAgICAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPlxuICAgICAgICAgKi9cbiAgICAgICAgc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykge1xuICAgICAgICAgICAgLy8gTWlsZCB2YXJpYW50IG9mIEJyZXNlbmhhbSdzIGFsZ29yaXRobVxuICAgICAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG1cbiAgICAgICAgICAgIGNvbnN0IHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpO1xuICAgICAgICAgICAgaWYgKHN0ZWVwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBmcm9tWDtcbiAgICAgICAgICAgICAgICBmcm9tWCA9IGZyb21ZO1xuICAgICAgICAgICAgICAgIGZyb21ZID0gdGVtcDtcbiAgICAgICAgICAgICAgICB0ZW1wID0gdG9YO1xuICAgICAgICAgICAgICAgIHRvWCA9IHRvWTtcbiAgICAgICAgICAgICAgICB0b1kgPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZHggPSBNYXRoLmFicyh0b1ggLSBmcm9tWCk7XG4gICAgICAgICAgICBjb25zdCBkeSA9IE1hdGguYWJzKHRvWSAtIGZyb21ZKTtcbiAgICAgICAgICAgIGxldCBlcnJvciA9IC1keCAvIDI7XG4gICAgICAgICAgICBjb25zdCB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xO1xuICAgICAgICAgICAgY29uc3QgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTtcbiAgICAgICAgICAgIC8vIEluIGJsYWNrIHBpeGVscywgbG9va2luZyBmb3Igd2hpdGUsIGZpcnN0IG9yIHNlY29uZCB0aW1lLlxuICAgICAgICAgICAgbGV0IHN0YXRlID0gMDtcbiAgICAgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kXG4gICAgICAgICAgICBjb25zdCB4TGltaXQgPSB0b1ggKyB4c3RlcDtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSBmcm9tWCwgeSA9IGZyb21ZOyB4ICE9PSB4TGltaXQ7IHggKz0geHN0ZXApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHN0ZWVwID8geSA6IHg7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSBzdGVlcCA/IHggOiB5O1xuICAgICAgICAgICAgICAgIC8vIERvZXMgY3VycmVudCBwaXhlbCBtZWFuIHdlIGhhdmUgbW92ZWQgd2hpdGUgdG8gYmxhY2sgb3IgdmljZSB2ZXJzYT9cbiAgICAgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nXG4gICAgICAgICAgICAgICAgLy8gY29sb3IsIGFkdmFuY2UgdG8gbmV4dCBzdGF0ZSBvciBlbmQgaWYgd2UgYXJlIGluIHN0YXRlIDIgYWxyZWFkeVxuICAgICAgICAgICAgICAgIGlmICgoc3RhdGUgPT09IDEpID09PSB0aGlzLmltYWdlLmdldChyZWFsWCwgcmVhbFkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGhVdGlscy5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVycm9yICs9IGR5O1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgeSArPSB5c3RlcDtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgLT0gZHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm91bmQgYmxhY2std2hpdGUtYmxhY2s7IGdpdmUgdGhlIGJlbmVmaXQgb2YgdGhlIGRvdWJ0IHRoYXQgdGhlIG5leHQgcGl4ZWwgb3V0c2lkZSB0aGUgaW1hZ2VcbiAgICAgICAgICAgIC8vIGlzIFwid2hpdGVcIiBzbyB0aGlzIGxhc3QgcG9pbnQgYXQgKHRvWCt4U3RlcCx0b1kpIGlzIHRoZSByaWdodCBlbmRpbmcuIFRoaXMgaXMgcmVhbGx5IGFcbiAgICAgICAgICAgIC8vIHNtYWxsIGFwcHJveGltYXRpb247ICh0b1greFN0ZXAsdG9ZK3lTdGVwKSBtaWdodCBiZSByZWFsbHkgY29ycmVjdC4gSWdub3JlIHRoaXMuXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzLmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbHNlIHdlIGRpZG4ndCBmaW5kIGV2ZW4gYmxhY2std2hpdGUtYmxhY2s7IG5vIGVzdGltYXRlIGlzIHJlYWxseSBwb3NzaWJsZVxuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogPHA+QXR0ZW1wdHMgdG8gbG9jYXRlIGFuIGFsaWdubWVudCBwYXR0ZXJuIGluIGEgbGltaXRlZCByZWdpb24gb2YgdGhlIGltYWdlLCB3aGljaCBpc1xuICAgICAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG92ZXJhbGxFc3RNb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXJcbiAgICAgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm5cbiAgICAgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFkgeSBjb29yZGluYXRlIG9mIGFib3ZlXG4gICAgICAgICAqIEBwYXJhbSBhbGxvd2FuY2VGYWN0b3IgbnVtYmVyIG9mIHBpeGVscyBpbiBhbGwgZGlyZWN0aW9ucyB0byBzZWFyY2ggZnJvbSB0aGUgY2VudGVyXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIGFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJzIGR1cmluZyBkZXRlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGZpbmRBbGlnbm1lbnRJblJlZ2lvbihvdmVyYWxsRXN0TW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGVzdEFsaWdubWVudFggLyppbnQqLywgZXN0QWxpZ25tZW50WSAvKmludCovLCBhbGxvd2FuY2VGYWN0b3IgLypmbG9hdCovKSB7XG4gICAgICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdFxuICAgICAgICAgICAgLy8gc2hvdWxkIGJlXG4gICAgICAgICAgICBjb25zdCBhbGxvd2FuY2UgPSAvKihpbnQpICovIE1hdGguZmxvb3IoYWxsb3dhbmNlRmFjdG9yICogb3ZlcmFsbEVzdE1vZHVsZVNpemUpO1xuICAgICAgICAgICAgY29uc3QgYWxpZ25tZW50QXJlYUxlZnRYID0gTWF0aC5tYXgoMCwgZXN0QWxpZ25tZW50WCAtIGFsbG93YW5jZSk7XG4gICAgICAgICAgICBjb25zdCBhbGlnbm1lbnRBcmVhUmlnaHRYID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRXaWR0aCgpIC0gMSwgZXN0QWxpZ25tZW50WCArIGFsbG93YW5jZSk7XG4gICAgICAgICAgICBpZiAoYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFsaWdubWVudEFyZWFUb3BZID0gTWF0aC5tYXgoMCwgZXN0QWxpZ25tZW50WSAtIGFsbG93YW5jZSk7XG4gICAgICAgICAgICBjb25zdCBhbGlnbm1lbnRBcmVhQm90dG9tWSA9IE1hdGgubWluKHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxLCBlc3RBbGlnbm1lbnRZICsgYWxsb3dhbmNlKTtcbiAgICAgICAgICAgIGlmIChhbGlnbm1lbnRBcmVhQm90dG9tWSAtIGFsaWdubWVudEFyZWFUb3BZIDwgb3ZlcmFsbEVzdE1vZHVsZVNpemUgKiAzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWxpZ25tZW50RmluZGVyID0gbmV3IEFsaWdubWVudFBhdHRlcm5GaW5kZXIodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gYWxpZ25tZW50RmluZGVyLmZpbmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovXG4gICAgLyoqXG4gICAgICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqL1xuICAgIGNsYXNzIFFSQ29kZVJlYWRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVyID0gbmV3IERlY29kZXIkMigpO1xuICAgICAgICB9XG4gICAgICAgIGdldERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBhIHJlcHJlc2VudGluZzogc3RyaW5nIHRoZSBjb250ZW50IGVuY29kZWQgYnkgdGhlIFFSIGNvZGVcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgY29kZSBjYW5ub3QgYmUgZGVjb2RlZFxuICAgICAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHNcbiAgICAgICAgICovXG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgLy8gcHVibGljIGRlY29kZShpbWFnZTogQmluYXJ5Qml0bWFwKTogUmVzdWx0IC8qdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiwgRm9ybWF0RXhjZXB0aW9uICovIHtcbiAgICAgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpXG4gICAgICAgIC8vIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBkZWNvZGUoaW1hZ2UsIGhpbnRzKSB7XG4gICAgICAgICAgICBsZXQgZGVjb2RlclJlc3VsdDtcbiAgICAgICAgICAgIGxldCBwb2ludHM7XG4gICAgICAgICAgICBpZiAoaGludHMgIT09IHVuZGVmaW5lZCAmJiBoaW50cyAhPT0gbnVsbCAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLlBVUkVfQkFSQ09ERSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiaXRzID0gUVJDb2RlUmVhZGVyLmV4dHJhY3RQdXJlQml0cyhpbWFnZS5nZXRCbGFja01hdHJpeCgpKTtcbiAgICAgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7XG4gICAgICAgICAgICAgICAgcG9pbnRzID0gUVJDb2RlUmVhZGVyLk5PX1BPSU5UUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yJDIoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSkuZGV0ZWN0KGhpbnRzKTtcbiAgICAgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChkZXRlY3RvclJlc3VsdC5nZXRCaXRzKCksIGhpbnRzKTtcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSBjb2RlIHdhcyBtaXJyb3JlZDogc3dhcCB0aGUgYm90dG9tLWxlZnQgYW5kIHRoZSB0b3AtcmlnaHQgcG9pbnRzLlxuICAgICAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YSkge1xuICAgICAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFJlc3VsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdCQxLlFSX0NPREUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBieXRlU2VnbWVudHMgPSBkZWNvZGVyUmVzdWx0LmdldEJ5dGVTZWdtZW50cygpO1xuICAgICAgICAgICAgaWYgKGJ5dGVTZWdtZW50cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGUkMS5CWVRFX1NFR01FTlRTLCBieXRlU2VnbWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWNMZXZlbCA9IGRlY29kZXJSZXN1bHQuZ2V0RUNMZXZlbCgpO1xuICAgICAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0TWV0YWRhdGEoUmVzdWx0TWV0YWRhdGFUeXBlJDEuRVJST1JfQ09SUkVDVElPTl9MRVZFTCwgZWNMZXZlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVjb2RlclJlc3VsdC5oYXNTdHJ1Y3R1cmVkQXBwZW5kKCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0TWV0YWRhdGEoUmVzdWx0TWV0YWRhdGFUeXBlJDEuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGUkMS5TVFJVQ1RVUkVEX0FQUEVORF9QQVJJVFksIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFBhcml0eSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgZGV0ZWN0cyBhIGNvZGUgaW4gYSBcInB1cmVcIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2VcbiAgICAgICAgICogd2hpY2ggY29udGFpbnMgb25seSBhbiB1bnJvdGF0ZWQsIHVuc2tld2VkLCBpbWFnZSBvZiBhIGNvZGUsIHdpdGggc29tZSB3aGl0ZSBib3JkZXJcbiAgICAgICAgICogYXJvdW5kIGl0LiBUaGlzIGlzIGEgc3BlY2lhbGl6ZWQgbWV0aG9kIHRoYXQgd29ya3MgZXhjZXB0aW9uYWxseSBmYXN0IGluIHRoaXMgc3BlY2lhbFxuICAgICAgICAgKiBjYXNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIGNvbS5nb29nbGUuenhpbmcuZGF0YW1hdHJpeC5EYXRhTWF0cml4UmVhZGVyI2V4dHJhY3RQdXJlQml0cyhCaXRNYXRyaXgpXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZXh0cmFjdFB1cmVCaXRzKGltYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0VG9wQmxhY2sgPSBpbWFnZS5nZXRUb3BMZWZ0T25CaXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0Qm90dG9tQmxhY2sgPSBpbWFnZS5nZXRCb3R0b21SaWdodE9uQml0KCk7XG4gICAgICAgICAgICBpZiAobGVmdFRvcEJsYWNrID09PSBudWxsIHx8IHJpZ2h0Qm90dG9tQmxhY2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7XG4gICAgICAgICAgICBsZXQgdG9wID0gbGVmdFRvcEJsYWNrWzFdO1xuICAgICAgICAgICAgbGV0IGJvdHRvbSA9IHJpZ2h0Qm90dG9tQmxhY2tbMV07XG4gICAgICAgICAgICBsZXQgbGVmdCA9IGxlZnRUb3BCbGFja1swXTtcbiAgICAgICAgICAgIGxldCByaWdodCA9IHJpZ2h0Qm90dG9tQmxhY2tbMF07XG4gICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2shXG4gICAgICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYm90dG9tIC0gdG9wICE9PSByaWdodCAtIGxlZnQpIHtcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvd1xuICAgICAgICAgICAgICAgIC8vIEFzc3VtZSBpdCdzIGEgc3F1YXJlLCBzbyB1c2UgaGVpZ2h0IGFzIHRoZSB3aWR0aFxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gbGVmdCArIChib3R0b20gLSB0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFib3J0IGlmIHRoYXQgd291bGQgbm90IG1ha2Ugc2Vuc2UgLS0gb2ZmIGltYWdlXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7XG4gICAgICAgICAgICBpZiAobWF0cml4V2lkdGggPD0gMCB8fCBtYXRyaXhIZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHBvc3NpYmx5IGRlY29kZSBzcXVhcmUgcmVnaW9uc1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHVzaCBpbiB0aGUgXCJib3JkZXJcIiBieSBoYWxmIHRoZSBtb2R1bGUgd2lkdGggc28gdGhhdCB3ZSBzdGFydFxuICAgICAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGFcbiAgICAgICAgICAgIC8vIGxpdHRsZSBvZmYsIHRoaXMgd2lsbCBoZWxwIHJlY292ZXIuXG4gICAgICAgICAgICBjb25zdCBudWRnZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihtb2R1bGVTaXplIC8gMi4wKTtcbiAgICAgICAgICAgIHRvcCArPSBudWRnZTtcbiAgICAgICAgICAgIGxlZnQgKz0gbnVkZ2U7XG4gICAgICAgICAgICAvLyBCdXQgY2FyZWZ1bCB0aGF0IHRoaXMgZG9lcyBub3Qgc2FtcGxlIG9mZiB0aGUgZWRnZVxuICAgICAgICAgICAgLy8gXCJyaWdodFwiIGlzIHRoZSBmYXJ0aGVzdC1yaWdodCB2YWxpZCBwaXhlbCBsb2NhdGlvbiAtLSByaWdodCsxIGlzIG5vdCBuZWNlc3NhcmlseVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBwb3NpdGl2ZSBieSBob3cgbXVjaCB0aGUgaW5uZXIgeCBsb29wIGJlbG93IHdvdWxkIGJlIHRvbyBsYXJnZVxuICAgICAgICAgICAgY29uc3QgbnVkZ2VkVG9vRmFyUmlnaHQgPSBsZWZ0ICsgLyooaW50KSAqLyBNYXRoLmZsb29yKChtYXRyaXhXaWR0aCAtIDEpICogbW9kdWxlU2l6ZSkgLSByaWdodDtcbiAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyUmlnaHQgPiBudWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBOZWl0aGVyIHdheSBmaXRzOyBhYm9ydFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGVmdCAtPSBudWRnZWRUb29GYXJSaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZVxuICAgICAgICAgICAgY29uc3QgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTtcbiAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJEb3duID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJEb3duID4gbnVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnRcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvcCAtPSBudWRnZWRUb29GYXJEb3duO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93IGp1c3QgcmVhZCBvZmYgdGhlIGJpdHNcbiAgICAgICAgICAgIGNvbnN0IGJpdHMgPSBuZXcgQml0TWF0cml4KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBtYXRyaXhIZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlPZmZzZXQgPSB0b3AgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeSAqIG1vZHVsZVNpemUpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWF0cml4V2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYml0cy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYml0cztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgbW9kdWxlU2l6ZShsZWZ0VG9wQmxhY2ssIGltYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGxldCB4ID0gbGVmdFRvcEJsYWNrWzBdO1xuICAgICAgICAgICAgbGV0IHkgPSBsZWZ0VG9wQmxhY2tbMV07XG4gICAgICAgICAgICBsZXQgaW5CbGFjayA9IHRydWU7XG4gICAgICAgICAgICBsZXQgdHJhbnNpdGlvbnMgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHggPCB3aWR0aCAmJiB5IDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKyt0cmFuc2l0aW9ucyA9PT0gNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5CbGFjayA9ICFpbkJsYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgeSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICh4IC0gbGVmdFRvcEJsYWNrWzBdKSAvIDcuMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7XG5cbiAgICAvKlxuICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICpcbiAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAqXG4gICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICpcbiAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgKi9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIFNJVEEgTGFiIChrZXZpbi5vc3VsbGl2YW5Ac2l0YS5hZXJvKVxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIC8qcHVibGljIGZpbmFsKi8gY2xhc3MgUERGNDE3Q29tbW9uIHtcbiAgICAgICAgUERGNDE3Q29tbW9uKCkge1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbW9kdWxlQml0Q291bnQgdmFsdWVzIHRvIHN1bVxuICAgICAgICAgKiBAcmV0dXJuIHN1bSBvZiB2YWx1ZXNcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgTWF0aFV0aWxzI3N1bShpbnRbXSl9XG4gICAgICAgICAqL1xuICAgICAgICAvLyBARGVwcmVjYXRlZFxuICAgICAgICBzdGF0aWMgZ2V0Qml0Q291bnRTdW0obW9kdWxlQml0Q291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHMuc3VtKG1vZHVsZUJpdENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgdG9JbnRBcnJheShsaXN0KSB7XG4gICAgICAgICAgICBpZiAobGlzdCA9PSBudWxsIHx8ICFsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQREY0MTdDb21tb24uRU1QVFlfSU5UX0FSUkFZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkobGlzdC5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbnRlZ2VyIG9mIGxpc3QpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaSsrXSA9IGludGVnZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gc3ltYm9sIGVuY29kZWQgc3ltYm9sIHRvIHRyYW5zbGF0ZSB0byBhIGNvZGV3b3JkXG4gICAgICAgICAqIEByZXR1cm4gdGhlIGNvZGV3b3JkIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN5bWJvbC5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBnZXRDb2Rld29yZChzeW1ib2wgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3QgaSA9IEFycmF5cy5iaW5hcnlTZWFyY2goUERGNDE3Q29tbW9uLlNZTUJPTF9UQUJMRSwgc3ltYm9sICYgMHgzRkZGRik7XG4gICAgICAgICAgICBpZiAoaSA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKFBERjQxN0NvbW1vbi5DT0RFV09SRF9UQUJMRVtpXSAtIDEpICUgUERGNDE3Q29tbW9uLk5VTUJFUl9PRl9DT0RFV09SRFM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUERGNDE3Q29tbW9uLk5VTUJFUl9PRl9DT0RFV09SRFMgPSA5Mjk7XG4gICAgLy8gTWF4aW11bSBDb2Rld29yZHMgKERhdGEgKyBFcnJvcikuXG4gICAgUERGNDE3Q29tbW9uLk1BWF9DT0RFV09SRFNfSU5fQkFSQ09ERSA9IFBERjQxN0NvbW1vbi5OVU1CRVJfT0ZfQ09ERVdPUkRTIC0gMTtcbiAgICBQREY0MTdDb21tb24uTUlOX1JPV1NfSU5fQkFSQ09ERSA9IDM7XG4gICAgUERGNDE3Q29tbW9uLk1BWF9ST1dTX0lOX0JBUkNPREUgPSA5MDtcbiAgICAvLyBPbmUgbGVmdCByb3cgaW5kaWNhdGlvbiBjb2x1bW4gKyBtYXggMzAgZGF0YSBjb2x1bW5zICsgb25lIHJpZ2h0IHJvdyBpbmRpY2F0b3IgY29sdW1uXG4gICAgLy8gcHVibGljIHN0YXRpYyAvKmZpbmFsKi8gTUFYX0NPREVXT1JEU19JTl9ST1c6IC8qaW50Ki8gbnVtYmVyID0gMzI7XG4gICAgUERGNDE3Q29tbW9uLk1PRFVMRVNfSU5fQ09ERVdPUkQgPSAxNztcbiAgICBQREY0MTdDb21tb24uTU9EVUxFU19JTl9TVE9QX1BBVFRFUk4gPSAxODtcbiAgICBQREY0MTdDb21tb24uQkFSU19JTl9NT0RVTEUgPSA4O1xuICAgIFBERjQxN0NvbW1vbi5FTVBUWV9JTlRfQVJSQVkgPSBuZXcgSW50MzJBcnJheShbXSk7XG4gICAgLyoqXG4gICAgICogVGhlIHNvcnRlZCB0YWJsZSBvZiBhbGwgcG9zc2libGUgc3ltYm9scy4gRXh0cmFjdGVkIGZyb20gdGhlIFBERjQxN1xuICAgICAqIHNwZWNpZmljYXRpb24uIFRoZSBpbmRleCBvZiBhIHN5bWJvbCBpbiB0aGlzIHRhYmxlIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgICAqIGluZGV4IGludG8gdGhlIGNvZGV3b3JkIHRhYmxlLlxuICAgICAqL1xuICAgIFBERjQxN0NvbW1vbi5TWU1CT0xfVEFCTEUgPSBJbnQzMkFycmF5LmZyb20oW1xuICAgICAgICAweDEwMjVlLCAweDEwMjdhLCAweDEwMjllLCAweDEwMmJjLCAweDEwMmYyLCAweDEwMmY0LCAweDEwMzJlLCAweDEwMzRlLCAweDEwMzVjLCAweDEwMzk2LCAweDEwM2E2LCAweDEwM2FjLFxuICAgICAgICAweDEwNDIyLCAweDEwNDI4LCAweDEwNDM2LCAweDEwNDQyLCAweDEwNDQ0LCAweDEwNDQ4LCAweDEwNDUwLCAweDEwNDVlLCAweDEwNDY2LCAweDEwNDZjLCAweDEwNDdhLCAweDEwNDgyLFxuICAgICAgICAweDEwNDllLCAweDEwNGEwLCAweDEwNGJjLCAweDEwNGM2LCAweDEwNGQ4LCAweDEwNGVlLCAweDEwNGYyLCAweDEwNGY0LCAweDEwNTA0LCAweDEwNTA4LCAweDEwNTEwLCAweDEwNTFlLFxuICAgICAgICAweDEwNTIwLCAweDEwNTNjLCAweDEwNTQwLCAweDEwNTc4LCAweDEwNTg2LCAweDEwNThjLCAweDEwNTk4LCAweDEwNWIwLCAweDEwNWJlLCAweDEwNWNlLCAweDEwNWRjLCAweDEwNWUyLFxuICAgICAgICAweDEwNWU0LCAweDEwNWU4LCAweDEwNWY2LCAweDEwNjJlLCAweDEwNjRlLCAweDEwNjVjLCAweDEwNjhlLCAweDEwNjljLCAweDEwNmI4LCAweDEwNmRlLCAweDEwNmZhLCAweDEwNzE2LFxuICAgICAgICAweDEwNzI2LCAweDEwNzJjLCAweDEwNzQ2LCAweDEwNzRjLCAweDEwNzU4LCAweDEwNzZlLCAweDEwNzkyLCAweDEwNzk0LCAweDEwN2EyLCAweDEwN2E0LCAweDEwN2E4LCAweDEwN2I2LFxuICAgICAgICAweDEwODIyLCAweDEwODI4LCAweDEwODQyLCAweDEwODQ4LCAweDEwODUwLCAweDEwODVlLCAweDEwODY2LCAweDEwODZjLCAweDEwODdhLCAweDEwODgyLCAweDEwODg0LCAweDEwODkwLFxuICAgICAgICAweDEwODllLCAweDEwOGEwLCAweDEwOGJjLCAweDEwOGM2LCAweDEwOGNjLCAweDEwOGQ4LCAweDEwOGVlLCAweDEwOGYyLCAweDEwOGY0LCAweDEwOTAyLCAweDEwOTA4LCAweDEwOTFlLFxuICAgICAgICAweDEwOTIwLCAweDEwOTNjLCAweDEwOTQwLCAweDEwOTc4LCAweDEwOTg2LCAweDEwOTk4LCAweDEwOWIwLCAweDEwOWJlLCAweDEwOWNlLCAweDEwOWRjLCAweDEwOWUyLCAweDEwOWU0LFxuICAgICAgICAweDEwOWU4LCAweDEwOWY2LCAweDEwYTA4LCAweDEwYTEwLCAweDEwYTFlLCAweDEwYTIwLCAweDEwYTNjLCAweDEwYTQwLCAweDEwYTc4LCAweDEwYWYwLCAweDEwYjA2LCAweDEwYjBjLFxuICAgICAgICAweDEwYjE4LCAweDEwYjMwLCAweDEwYjNlLCAweDEwYjYwLCAweDEwYjdjLCAweDEwYjhlLCAweDEwYjljLCAweDEwYmI4LCAweDEwYmMyLCAweDEwYmM0LCAweDEwYmM4LCAweDEwYmQwLFxuICAgICAgICAweDEwYmRlLCAweDEwYmU2LCAweDEwYmVjLCAweDEwYzJlLCAweDEwYzRlLCAweDEwYzVjLCAweDEwYzYyLCAweDEwYzY0LCAweDEwYzY4LCAweDEwYzc2LCAweDEwYzhlLCAweDEwYzljLFxuICAgICAgICAweDEwY2I4LCAweDEwY2MyLCAweDEwY2M0LCAweDEwY2M4LCAweDEwY2QwLCAweDEwY2RlLCAweDEwY2U2LCAweDEwY2VjLCAweDEwY2ZhLCAweDEwZDBlLCAweDEwZDFjLCAweDEwZDM4LFxuICAgICAgICAweDEwZDcwLCAweDEwZDdlLCAweDEwZDgyLCAweDEwZDg0LCAweDEwZDg4LCAweDEwZDkwLCAweDEwZDllLCAweDEwZGEwLCAweDEwZGJjLCAweDEwZGM2LCAweDEwZGNjLCAweDEwZGQ4LFxuICAgICAgICAweDEwZGVlLCAweDEwZGYyLCAweDEwZGY0LCAweDEwZTE2LCAweDEwZTI2LCAweDEwZTJjLCAweDEwZTQ2LCAweDEwZTU4LCAweDEwZTZlLCAweDEwZTg2LCAweDEwZThjLCAweDEwZTk4LFxuICAgICAgICAweDEwZWIwLCAweDEwZWJlLCAweDEwZWNlLCAweDEwZWRjLCAweDEwZjBhLCAweDEwZjEyLCAweDEwZjE0LCAweDEwZjIyLCAweDEwZjI4LCAweDEwZjM2LCAweDEwZjQyLCAweDEwZjQ0LFxuICAgICAgICAweDEwZjQ4LCAweDEwZjUwLCAweDEwZjVlLCAweDEwZjY2LCAweDEwZjZjLCAweDEwZmIyLCAweDEwZmI0LCAweDExMDIyLCAweDExMDI4LCAweDExMDQyLCAweDExMDQ4LCAweDExMDUwLFxuICAgICAgICAweDExMDVlLCAweDExMDdhLCAweDExMDgyLCAweDExMDg0LCAweDExMDkwLCAweDExMDllLCAweDExMGEwLCAweDExMGJjLCAweDExMGM2LCAweDExMGNjLCAweDExMGQ4LCAweDExMGVlLFxuICAgICAgICAweDExMGYyLCAweDExMGY0LCAweDExMTAyLCAweDExMTFlLCAweDExMTIwLCAweDExMTNjLCAweDExMTQwLCAweDExMTc4LCAweDExMTg2LCAweDExMTk4LCAweDExMWIwLCAweDExMWJlLFxuICAgICAgICAweDExMWNlLCAweDExMWRjLCAweDExMWUyLCAweDExMWU0LCAweDExMWU4LCAweDExMWY2LCAweDExMjA4LCAweDExMjFlLCAweDExMjIwLCAweDExMjc4LCAweDExMmYwLCAweDExMzBjLFxuICAgICAgICAweDExMzMwLCAweDExMzNlLCAweDExMzYwLCAweDExMzdjLCAweDExMzhlLCAweDExMzljLCAweDExM2I4LCAweDExM2MyLCAweDExM2M4LCAweDExM2QwLCAweDExM2RlLCAweDExM2U2LFxuICAgICAgICAweDExM2VjLCAweDExNDA4LCAweDExNDEwLCAweDExNDFlLCAweDExNDIwLCAweDExNDNjLCAweDExNDQwLCAweDExNDc4LCAweDExNGYwLCAweDExNWUwLCAweDExNjBjLCAweDExNjE4LFxuICAgICAgICAweDExNjMwLCAweDExNjNlLCAweDExNjYwLCAweDExNjdjLCAweDExNmMwLCAweDExNmY4LCAweDExNzFjLCAweDExNzM4LCAweDExNzcwLCAweDExNzdlLCAweDExNzgyLCAweDExNzg0LFxuICAgICAgICAweDExNzg4LCAweDExNzkwLCAweDExNzllLCAweDExN2EwLCAweDExN2JjLCAweDExN2M2LCAweDExN2NjLCAweDExN2Q4LCAweDExN2VlLCAweDExODJlLCAweDExODM0LCAweDExODRlLFxuICAgICAgICAweDExODVjLCAweDExODYyLCAweDExODY0LCAweDExODY4LCAweDExODc2LCAweDExODhlLCAweDExODljLCAweDExOGI4LCAweDExOGMyLCAweDExOGM4LCAweDExOGQwLCAweDExOGRlLFxuICAgICAgICAweDExOGU2LCAweDExOGVjLCAweDExOGZhLCAweDExOTBlLCAweDExOTFjLCAweDExOTM4LCAweDExOTcwLCAweDExOTdlLCAweDExOTgyLCAweDExOTg0LCAweDExOTkwLCAweDExOTllLFxuICAgICAgICAweDExOWEwLCAweDExOWJjLCAweDExOWM2LCAweDExOWNjLCAweDExOWQ4LCAweDExOWVlLCAweDExOWYyLCAweDExOWY0LCAweDExYTBlLCAweDExYTFjLCAweDExYTM4LCAweDExYTcwLFxuICAgICAgICAweDExYTdlLCAweDExYWUwLCAweDExYWZjLCAweDExYjA4LCAweDExYjEwLCAweDExYjFlLCAweDExYjIwLCAweDExYjNjLCAweDExYjQwLCAweDExYjc4LCAweDExYjhjLCAweDExYjk4LFxuICAgICAgICAweDExYmIwLCAweDExYmJlLCAweDExYmNlLCAweDExYmRjLCAweDExYmUyLCAweDExYmU0LCAweDExYmU4LCAweDExYmY2LCAweDExYzE2LCAweDExYzI2LCAweDExYzJjLCAweDExYzQ2LFxuICAgICAgICAweDExYzRjLCAweDExYzU4LCAweDExYzZlLCAweDExYzg2LCAweDExYzk4LCAweDExY2IwLCAweDExY2JlLCAweDExY2NlLCAweDExY2RjLCAweDExY2UyLCAweDExY2U0LCAweDExY2U4LFxuICAgICAgICAweDExY2Y2LCAweDExZDA2LCAweDExZDBjLCAweDExZDE4LCAweDExZDMwLCAweDExZDNlLCAweDExZDYwLCAweDExZDdjLCAweDExZDhlLCAweDExZDljLCAweDExZGI4LCAweDExZGM0LFxuICAgICAgICAweDExZGM4LCAweDExZGQwLCAweDExZGRlLCAweDExZGU2LCAweDExZGVjLCAweDExZGZhLCAweDExZTBhLCAweDExZTEyLCAweDExZTE0LCAweDExZTIyLCAweDExZTI0LCAweDExZTI4LFxuICAgICAgICAweDExZTM2LCAweDExZTQyLCAweDExZTQ0LCAweDExZTUwLCAweDExZTVlLCAweDExZTY2LCAweDExZTZjLCAweDExZTgyLCAweDExZTg0LCAweDExZTg4LCAweDExZTkwLCAweDExZTllLFxuICAgICAgICAweDExZWEwLCAweDExZWJjLCAweDExZWM2LCAweDExZWNjLCAweDExZWQ4LCAweDExZWVlLCAweDExZjFhLCAweDExZjJlLCAweDExZjMyLCAweDExZjM0LCAweDExZjRlLCAweDExZjVjLFxuICAgICAgICAweDExZjYyLCAweDExZjY0LCAweDExZjY4LCAweDExZjc2LCAweDEyMDQ4LCAweDEyMDVlLCAweDEyMDgyLCAweDEyMDg0LCAweDEyMDkwLCAweDEyMDllLCAweDEyMGEwLCAweDEyMGJjLFxuICAgICAgICAweDEyMGQ4LCAweDEyMGYyLCAweDEyMGY0LCAweDEyMTA4LCAweDEyMTFlLCAweDEyMTIwLCAweDEyMTNjLCAweDEyMTQwLCAweDEyMTc4LCAweDEyMTg2LCAweDEyMTk4LCAweDEyMWIwLFxuICAgICAgICAweDEyMWJlLCAweDEyMWUyLCAweDEyMWU0LCAweDEyMWU4LCAweDEyMWY2LCAweDEyMjA0LCAweDEyMjEwLCAweDEyMjFlLCAweDEyMjIwLCAweDEyMjc4LCAweDEyMmYwLCAweDEyMzA2LFxuICAgICAgICAweDEyMzBjLCAweDEyMzMwLCAweDEyMzNlLCAweDEyMzYwLCAweDEyMzdjLCAweDEyMzhlLCAweDEyMzljLCAweDEyM2I4LCAweDEyM2MyLCAweDEyM2M4LCAweDEyM2QwLCAweDEyM2U2LFxuICAgICAgICAweDEyM2VjLCAweDEyNDFlLCAweDEyNDIwLCAweDEyNDNjLCAweDEyNGYwLCAweDEyNWUwLCAweDEyNjE4LCAweDEyNjNlLCAweDEyNjYwLCAweDEyNjdjLCAweDEyNmMwLCAweDEyNmY4LFxuICAgICAgICAweDEyNzM4LCAweDEyNzcwLCAweDEyNzdlLCAweDEyNzgyLCAweDEyNzg0LCAweDEyNzkwLCAweDEyNzllLCAweDEyN2EwLCAweDEyN2JjLCAweDEyN2M2LCAweDEyN2NjLCAweDEyN2Q4LFxuICAgICAgICAweDEyN2VlLCAweDEyODIwLCAweDEyODNjLCAweDEyODQwLCAweDEyODc4LCAweDEyOGYwLCAweDEyOWUwLCAweDEyYmMwLCAweDEyYzE4LCAweDEyYzMwLCAweDEyYzNlLCAweDEyYzYwLFxuICAgICAgICAweDEyYzdjLCAweDEyY2MwLCAweDEyY2Y4LCAweDEyZGYwLCAweDEyZTFjLCAweDEyZTM4LCAweDEyZTcwLCAweDEyZTdlLCAweDEyZWUwLCAweDEyZWZjLCAweDEyZjA0LCAweDEyZjA4LFxuICAgICAgICAweDEyZjEwLCAweDEyZjIwLCAweDEyZjNjLCAweDEyZjQwLCAweDEyZjc4LCAweDEyZjg2LCAweDEyZjhjLCAweDEyZjk4LCAweDEyZmIwLCAweDEyZmJlLCAweDEyZmNlLCAweDEyZmRjLFxuICAgICAgICAweDEzMDJlLCAweDEzMDRlLCAweDEzMDVjLCAweDEzMDYyLCAweDEzMDY4LCAweDEzMDhlLCAweDEzMDljLCAweDEzMGI4LCAweDEzMGMyLCAweDEzMGM4LCAweDEzMGQwLCAweDEzMGRlLFxuICAgICAgICAweDEzMGVjLCAweDEzMGZhLCAweDEzMTBlLCAweDEzMTM4LCAweDEzMTcwLCAweDEzMTdlLCAweDEzMTgyLCAweDEzMTg0LCAweDEzMTkwLCAweDEzMTllLCAweDEzMWEwLCAweDEzMWJjLFxuICAgICAgICAweDEzMWM2LCAweDEzMWNjLCAweDEzMWQ4LCAweDEzMWYyLCAweDEzMWY0LCAweDEzMjBlLCAweDEzMjFjLCAweDEzMjcwLCAweDEzMjdlLCAweDEzMmUwLCAweDEzMmZjLCAweDEzMzA4LFxuICAgICAgICAweDEzMzFlLCAweDEzMzIwLCAweDEzMzNjLCAweDEzMzQwLCAweDEzMzc4LCAweDEzMzg2LCAweDEzMzk4LCAweDEzM2IwLCAweDEzM2JlLCAweDEzM2NlLCAweDEzM2RjLCAweDEzM2UyLFxuICAgICAgICAweDEzM2U0LCAweDEzM2U4LCAweDEzM2Y2LCAweDEzNDBlLCAweDEzNDFjLCAweDEzNDM4LCAweDEzNDcwLCAweDEzNDdlLCAweDEzNGUwLCAweDEzNGZjLCAweDEzNWMwLCAweDEzNWY4LFxuICAgICAgICAweDEzNjA4LCAweDEzNjEwLCAweDEzNjFlLCAweDEzNjIwLCAweDEzNjNjLCAweDEzNjQwLCAweDEzNjc4LCAweDEzNmYwLCAweDEzNzBjLCAweDEzNzE4LCAweDEzNzMwLCAweDEzNzNlLFxuICAgICAgICAweDEzNzYwLCAweDEzNzdjLCAweDEzNzljLCAweDEzN2I4LCAweDEzN2MyLCAweDEzN2M0LCAweDEzN2M4LCAweDEzN2QwLCAweDEzN2RlLCAweDEzN2U2LCAweDEzN2VjLCAweDEzODE2LFxuICAgICAgICAweDEzODI2LCAweDEzODJjLCAweDEzODQ2LCAweDEzODRjLCAweDEzODU4LCAweDEzODZlLCAweDEzODc0LCAweDEzODg2LCAweDEzODk4LCAweDEzOGIwLCAweDEzOGJlLCAweDEzOGNlLFxuICAgICAgICAweDEzOGRjLCAweDEzOGUyLCAweDEzOGU0LCAweDEzOGU4LCAweDEzOTA2LCAweDEzOTBjLCAweDEzOTMwLCAweDEzOTNlLCAweDEzOTYwLCAweDEzOTdjLCAweDEzOThlLCAweDEzOTljLFxuICAgICAgICAweDEzOWI4LCAweDEzOWM4LCAweDEzOWQwLCAweDEzOWRlLCAweDEzOWU2LCAweDEzOWVjLCAweDEzOWZhLCAweDEzYTA2LCAweDEzYTBjLCAweDEzYTE4LCAweDEzYTMwLCAweDEzYTNlLFxuICAgICAgICAweDEzYTYwLCAweDEzYTdjLCAweDEzYWMwLCAweDEzYWY4LCAweDEzYjBlLCAweDEzYjFjLCAweDEzYjM4LCAweDEzYjcwLCAweDEzYjdlLCAweDEzYjg4LCAweDEzYjkwLCAweDEzYjllLFxuICAgICAgICAweDEzYmEwLCAweDEzYmJjLCAweDEzYmNjLCAweDEzYmQ4LCAweDEzYmVlLCAweDEzYmYyLCAweDEzYmY0LCAweDEzYzEyLCAweDEzYzE0LCAweDEzYzIyLCAweDEzYzI0LCAweDEzYzI4LFxuICAgICAgICAweDEzYzM2LCAweDEzYzQyLCAweDEzYzQ4LCAweDEzYzUwLCAweDEzYzVlLCAweDEzYzY2LCAweDEzYzZjLCAweDEzYzgyLCAweDEzYzg0LCAweDEzYzkwLCAweDEzYzllLCAweDEzY2EwLFxuICAgICAgICAweDEzY2JjLCAweDEzY2M2LCAweDEzY2NjLCAweDEzY2Q4LCAweDEzY2VlLCAweDEzZDAyLCAweDEzZDA0LCAweDEzZDA4LCAweDEzZDEwLCAweDEzZDFlLCAweDEzZDIwLCAweDEzZDNjLFxuICAgICAgICAweDEzZDQwLCAweDEzZDc4LCAweDEzZDg2LCAweDEzZDhjLCAweDEzZDk4LCAweDEzZGIwLCAweDEzZGJlLCAweDEzZGNlLCAweDEzZGRjLCAweDEzZGU0LCAweDEzZGU4LCAweDEzZGY2LFxuICAgICAgICAweDEzZTFhLCAweDEzZTJlLCAweDEzZTMyLCAweDEzZTM0LCAweDEzZTRlLCAweDEzZTVjLCAweDEzZTYyLCAweDEzZTY0LCAweDEzZTY4LCAweDEzZTc2LCAweDEzZThlLCAweDEzZTljLFxuICAgICAgICAweDEzZWI4LCAweDEzZWMyLCAweDEzZWM0LCAweDEzZWM4LCAweDEzZWQwLCAweDEzZWRlLCAweDEzZWU2LCAweDEzZWVjLCAweDEzZjI2LCAweDEzZjJjLCAweDEzZjNhLCAweDEzZjQ2LFxuICAgICAgICAweDEzZjRjLCAweDEzZjU4LCAweDEzZjZlLCAweDEzZjcyLCAweDEzZjc0LCAweDE0MDgyLCAweDE0MDllLCAweDE0MGEwLCAweDE0MGJjLCAweDE0MTA0LCAweDE0MTA4LCAweDE0MTEwLFxuICAgICAgICAweDE0MTFlLCAweDE0MTIwLCAweDE0MTNjLCAweDE0MTQwLCAweDE0MTc4LCAweDE0MThjLCAweDE0MTk4LCAweDE0MWIwLCAweDE0MWJlLCAweDE0MWUyLCAweDE0MWU0LCAweDE0MWU4LFxuICAgICAgICAweDE0MjA4LCAweDE0MjEwLCAweDE0MjFlLCAweDE0MjIwLCAweDE0MjNjLCAweDE0MjQwLCAweDE0Mjc4LCAweDE0MmYwLCAweDE0MzA2LCAweDE0MzBjLCAweDE0MzE4LCAweDE0MzMwLFxuICAgICAgICAweDE0MzNlLCAweDE0MzYwLCAweDE0MzdjLCAweDE0MzhlLCAweDE0M2MyLCAweDE0M2M0LCAweDE0M2M4LCAweDE0M2QwLCAweDE0M2U2LCAweDE0M2VjLCAweDE0NDA4LCAweDE0NDEwLFxuICAgICAgICAweDE0NDFlLCAweDE0NDIwLCAweDE0NDNjLCAweDE0NDQwLCAweDE0NDc4LCAweDE0NGYwLCAweDE0NWUwLCAweDE0NjBjLCAweDE0NjE4LCAweDE0NjMwLCAweDE0NjNlLCAweDE0NjYwLFxuICAgICAgICAweDE0NjdjLCAweDE0NmMwLCAweDE0NmY4LCAweDE0NzFjLCAweDE0NzM4LCAweDE0NzcwLCAweDE0NzdlLCAweDE0NzgyLCAweDE0Nzg0LCAweDE0Nzg4LCAweDE0NzkwLCAweDE0N2EwLFxuICAgICAgICAweDE0N2JjLCAweDE0N2M2LCAweDE0N2NjLCAweDE0N2Q4LCAweDE0N2VlLCAweDE0ODEwLCAweDE0ODIwLCAweDE0ODNjLCAweDE0ODQwLCAweDE0ODc4LCAweDE0OGYwLCAweDE0OWUwLFxuICAgICAgICAweDE0YmMwLCAweDE0YzMwLCAweDE0YzNlLCAweDE0YzYwLCAweDE0YzdjLCAweDE0Y2MwLCAweDE0Y2Y4LCAweDE0ZGYwLCAweDE0ZTM4LCAweDE0ZTcwLCAweDE0ZTdlLCAweDE0ZWUwLFxuICAgICAgICAweDE0ZWZjLCAweDE0ZjA0LCAweDE0ZjA4LCAweDE0ZjEwLCAweDE0ZjFlLCAweDE0ZjIwLCAweDE0ZjNjLCAweDE0ZjQwLCAweDE0Zjc4LCAweDE0Zjg2LCAweDE0ZjhjLCAweDE0Zjk4LFxuICAgICAgICAweDE0ZmIwLCAweDE0ZmNlLCAweDE0ZmRjLCAweDE1MDIwLCAweDE1MDQwLCAweDE1MDc4LCAweDE1MGYwLCAweDE1MWUwLCAweDE1M2MwLCAweDE1ODYwLCAweDE1ODdjLCAweDE1OGMwLFxuICAgICAgICAweDE1OGY4LCAweDE1OWYwLCAweDE1YmUwLCAweDE1YzcwLCAweDE1YzdlLCAweDE1Y2UwLCAweDE1Y2ZjLCAweDE1ZGMwLCAweDE1ZGY4LCAweDE1ZTA4LCAweDE1ZTEwLCAweDE1ZTIwLFxuICAgICAgICAweDE1ZTQwLCAweDE1ZTc4LCAweDE1ZWYwLCAweDE1ZjBjLCAweDE1ZjE4LCAweDE1ZjMwLCAweDE1ZjYwLCAweDE1ZjdjLCAweDE1ZjhlLCAweDE1ZjljLCAweDE1ZmI4LCAweDE2MDRlLFxuICAgICAgICAweDE2MDVjLCAweDE2MDhlLCAweDE2MDljLCAweDE2MGI4LCAweDE2MGMyLCAweDE2MGM0LCAweDE2MGM4LCAweDE2MGRlLCAweDE2MTBlLCAweDE2MTFjLCAweDE2MTM4LCAweDE2MTcwLFxuICAgICAgICAweDE2MTdlLCAweDE2MTg0LCAweDE2MTg4LCAweDE2MTkwLCAweDE2MTllLCAweDE2MWEwLCAweDE2MWJjLCAweDE2MWM2LCAweDE2MWNjLCAweDE2MWQ4LCAweDE2MWYyLCAweDE2MWY0LFxuICAgICAgICAweDE2MjBlLCAweDE2MjFjLCAweDE2MjM4LCAweDE2MjcwLCAweDE2MjdlLCAweDE2MmUwLCAweDE2MmZjLCAweDE2MzA0LCAweDE2MzA4LCAweDE2MzEwLCAweDE2MzFlLCAweDE2MzIwLFxuICAgICAgICAweDE2MzNjLCAweDE2MzQwLCAweDE2Mzc4LCAweDE2Mzg2LCAweDE2MzhjLCAweDE2Mzk4LCAweDE2M2IwLCAweDE2M2JlLCAweDE2M2NlLCAweDE2M2RjLCAweDE2M2UyLCAweDE2M2U0LFxuICAgICAgICAweDE2M2U4LCAweDE2M2Y2LCAweDE2NDBlLCAweDE2NDFjLCAweDE2NDM4LCAweDE2NDcwLCAweDE2NDdlLCAweDE2NGUwLCAweDE2NGZjLCAweDE2NWMwLCAweDE2NWY4LCAweDE2NjEwLFxuICAgICAgICAweDE2NjFlLCAweDE2NjIwLCAweDE2NjNjLCAweDE2NjQwLCAweDE2Njc4LCAweDE2NmYwLCAweDE2NzE4LCAweDE2NzMwLCAweDE2NzNlLCAweDE2NzYwLCAweDE2NzdjLCAweDE2NzhlLFxuICAgICAgICAweDE2NzljLCAweDE2N2I4LCAweDE2N2MyLCAweDE2N2M0LCAweDE2N2M4LCAweDE2N2QwLCAweDE2N2RlLCAweDE2N2U2LCAweDE2N2VjLCAweDE2ODFjLCAweDE2ODM4LCAweDE2ODcwLFxuICAgICAgICAweDE2OGUwLCAweDE2OGZjLCAweDE2OWMwLCAweDE2OWY4LCAweDE2YmYwLCAweDE2YzEwLCAweDE2YzFlLCAweDE2YzIwLCAweDE2YzNjLCAweDE2YzQwLCAweDE2Yzc4LCAweDE2Y2YwLFxuICAgICAgICAweDE2ZGUwLCAweDE2ZTE4LCAweDE2ZTMwLCAweDE2ZTNlLCAweDE2ZTYwLCAweDE2ZTdjLCAweDE2ZWMwLCAweDE2ZWY4LCAweDE2ZjFjLCAweDE2ZjM4LCAweDE2ZjcwLCAweDE2ZjdlLFxuICAgICAgICAweDE2Zjg0LCAweDE2Zjg4LCAweDE2ZjkwLCAweDE2ZjllLCAweDE2ZmEwLCAweDE2ZmJjLCAweDE2ZmM2LCAweDE2ZmNjLCAweDE2ZmQ4LCAweDE3MDI2LCAweDE3MDJjLCAweDE3MDQ2LFxuICAgICAgICAweDE3MDRjLCAweDE3MDU4LCAweDE3MDZlLCAweDE3MDg2LCAweDE3MDhjLCAweDE3MDk4LCAweDE3MGIwLCAweDE3MGJlLCAweDE3MGNlLCAweDE3MGRjLCAweDE3MGU4LCAweDE3MTA2LFxuICAgICAgICAweDE3MTBjLCAweDE3MTE4LCAweDE3MTMwLCAweDE3MTNlLCAweDE3MTYwLCAweDE3MTdjLCAweDE3MThlLCAweDE3MTljLCAweDE3MWI4LCAweDE3MWMyLCAweDE3MWM0LCAweDE3MWM4LFxuICAgICAgICAweDE3MWQwLCAweDE3MWRlLCAweDE3MWU2LCAweDE3MWVjLCAweDE3MWZhLCAweDE3MjA2LCAweDE3MjBjLCAweDE3MjE4LCAweDE3MjMwLCAweDE3MjNlLCAweDE3MjYwLCAweDE3MjdjLFxuICAgICAgICAweDE3MmMwLCAweDE3MmY4LCAweDE3MzBlLCAweDE3MzFjLCAweDE3MzM4LCAweDE3MzcwLCAweDE3MzdlLCAweDE3Mzg4LCAweDE3MzkwLCAweDE3MzllLCAweDE3M2EwLCAweDE3M2JjLFxuICAgICAgICAweDE3M2NjLCAweDE3M2Q4LCAweDE3M2VlLCAweDE3M2YyLCAweDE3M2Y0LCAweDE3NDBjLCAweDE3NDE4LCAweDE3NDMwLCAweDE3NDNlLCAweDE3NDYwLCAweDE3NDdjLCAweDE3NGMwLFxuICAgICAgICAweDE3NGY4LCAweDE3NWYwLCAweDE3NjBlLCAweDE3NjFjLCAweDE3NjM4LCAweDE3NjcwLCAweDE3NjdlLCAweDE3NmUwLCAweDE3NmZjLCAweDE3NzA4LCAweDE3NzEwLCAweDE3NzFlLFxuICAgICAgICAweDE3NzIwLCAweDE3NzNjLCAweDE3NzQwLCAweDE3Nzc4LCAweDE3Nzk4LCAweDE3N2IwLCAweDE3N2JlLCAweDE3N2RjLCAweDE3N2UyLCAweDE3N2U0LCAweDE3N2U4LCAweDE3ODIyLFxuICAgICAgICAweDE3ODI0LCAweDE3ODI4LCAweDE3ODM2LCAweDE3ODQyLCAweDE3ODQ0LCAweDE3ODQ4LCAweDE3ODUwLCAweDE3ODVlLCAweDE3ODY2LCAweDE3ODZjLCAweDE3ODgyLCAweDE3ODg0LFxuICAgICAgICAweDE3ODg4LCAweDE3ODkwLCAweDE3ODllLCAweDE3OGEwLCAweDE3OGJjLCAweDE3OGM2LCAweDE3OGNjLCAweDE3OGQ4LCAweDE3OGVlLCAweDE3OGYyLCAweDE3OGY0LCAweDE3OTAyLFxuICAgICAgICAweDE3OTA0LCAweDE3OTA4LCAweDE3OTEwLCAweDE3OTFlLCAweDE3OTIwLCAweDE3OTNjLCAweDE3OTQwLCAweDE3OTc4LCAweDE3OTg2LCAweDE3OThjLCAweDE3OTk4LCAweDE3OWIwLFxuICAgICAgICAweDE3OWJlLCAweDE3OWNlLCAweDE3OWRjLCAweDE3OWUyLCAweDE3OWU0LCAweDE3OWU4LCAweDE3OWY2LCAweDE3YTA0LCAweDE3YTA4LCAweDE3YTEwLCAweDE3YTFlLCAweDE3YTIwLFxuICAgICAgICAweDE3YTNjLCAweDE3YTQwLCAweDE3YTc4LCAweDE3YWYwLCAweDE3YjA2LCAweDE3YjBjLCAweDE3YjE4LCAweDE3YjMwLCAweDE3YjNlLCAweDE3YjYwLCAweDE3YjdjLCAweDE3YjhlLFxuICAgICAgICAweDE3YjljLCAweDE3YmI4LCAweDE3YmM0LCAweDE3YmM4LCAweDE3YmQwLCAweDE3YmRlLCAweDE3YmU2LCAweDE3YmVjLCAweDE3YzJlLCAweDE3YzMyLCAweDE3YzM0LCAweDE3YzRlLFxuICAgICAgICAweDE3YzVjLCAweDE3YzYyLCAweDE3YzY0LCAweDE3YzY4LCAweDE3Yzc2LCAweDE3YzhlLCAweDE3YzljLCAweDE3Y2I4LCAweDE3Y2MyLCAweDE3Y2M0LCAweDE3Y2M4LCAweDE3Y2QwLFxuICAgICAgICAweDE3Y2RlLCAweDE3Y2U2LCAweDE3Y2VjLCAweDE3ZDBlLCAweDE3ZDFjLCAweDE3ZDM4LCAweDE3ZDcwLCAweDE3ZDgyLCAweDE3ZDg0LCAweDE3ZDg4LCAweDE3ZDkwLCAweDE3ZDllLFxuICAgICAgICAweDE3ZGEwLCAweDE3ZGJjLCAweDE3ZGM2LCAweDE3ZGNjLCAweDE3ZGQ4LCAweDE3ZGVlLCAweDE3ZTI2LCAweDE3ZTJjLCAweDE3ZTNhLCAweDE3ZTQ2LCAweDE3ZTRjLCAweDE3ZTU4LFxuICAgICAgICAweDE3ZTZlLCAweDE3ZTcyLCAweDE3ZTc0LCAweDE3ZTg2LCAweDE3ZThjLCAweDE3ZTk4LCAweDE3ZWIwLCAweDE3ZWNlLCAweDE3ZWRjLCAweDE3ZWUyLCAweDE3ZWU0LCAweDE3ZWU4LFxuICAgICAgICAweDE3ZWY2LCAweDE4MTNhLCAweDE4MTcyLCAweDE4MTc0LCAweDE4MjE2LCAweDE4MjI2LCAweDE4MjNhLCAweDE4MjRjLCAweDE4MjU4LCAweDE4MjZlLCAweDE4MjcyLCAweDE4Mjc0LFxuICAgICAgICAweDE4Mjk4LCAweDE4MmJlLCAweDE4MmUyLCAweDE4MmU0LCAweDE4MmU4LCAweDE4MmY2LCAweDE4MzVlLCAweDE4MzdhLCAweDE4M2FlLCAweDE4M2Q2LCAweDE4NDE2LCAweDE4NDI2LFxuICAgICAgICAweDE4NDJjLCAweDE4NDNhLCAweDE4NDQ2LCAweDE4NDU4LCAweDE4NDZlLCAweDE4NDcyLCAweDE4NDc0LCAweDE4NDg2LCAweDE4NGIwLCAweDE4NGJlLCAweDE4NGNlLCAweDE4NGRjLFxuICAgICAgICAweDE4NGUyLCAweDE4NGU0LCAweDE4NGU4LCAweDE4NGY2LCAweDE4NTA2LCAweDE4NTBjLCAweDE4NTE4LCAweDE4NTMwLCAweDE4NTNlLCAweDE4NTYwLCAweDE4NTdjLCAweDE4NThlLFxuICAgICAgICAweDE4NTljLCAweDE4NWI4LCAweDE4NWMyLCAweDE4NWM0LCAweDE4NWM4LCAweDE4NWQwLCAweDE4NWRlLCAweDE4NWU2LCAweDE4NWVjLCAweDE4NWZhLCAweDE4NjEyLCAweDE4NjE0LFxuICAgICAgICAweDE4NjIyLCAweDE4NjI4LCAweDE4NjM2LCAweDE4NjQyLCAweDE4NjUwLCAweDE4NjVlLCAweDE4NjdhLCAweDE4NjgyLCAweDE4Njg0LCAweDE4Njg4LCAweDE4NjkwLCAweDE4NjllLFxuICAgICAgICAweDE4NmEwLCAweDE4NmJjLCAweDE4NmM2LCAweDE4NmNjLCAweDE4NmQ4LCAweDE4NmVlLCAweDE4NmYyLCAweDE4NmY0LCAweDE4NzJlLCAweDE4NzRlLCAweDE4NzVjLCAweDE4Nzk2LFxuICAgICAgICAweDE4N2E2LCAweDE4N2FjLCAweDE4N2QyLCAweDE4N2Q0LCAweDE4ODI2LCAweDE4ODJjLCAweDE4ODNhLCAweDE4ODQ2LCAweDE4ODRjLCAweDE4ODU4LCAweDE4ODZlLCAweDE4ODcyLFxuICAgICAgICAweDE4ODc0LCAweDE4ODg2LCAweDE4ODk4LCAweDE4OGIwLCAweDE4OGJlLCAweDE4OGNlLCAweDE4OGRjLCAweDE4OGUyLCAweDE4OGU0LCAweDE4OGU4LCAweDE4OGY2LCAweDE4OTBjLFxuICAgICAgICAweDE4OTMwLCAweDE4OTNlLCAweDE4OTYwLCAweDE4OTdjLCAweDE4OThlLCAweDE4OWI4LCAweDE4OWMyLCAweDE4OWM4LCAweDE4OWQwLCAweDE4OWRlLCAweDE4OWU2LCAweDE4OWVjLFxuICAgICAgICAweDE4OWZhLCAweDE4YTE4LCAweDE4YTMwLCAweDE4YTNlLCAweDE4YTYwLCAweDE4YTdjLCAweDE4YWMwLCAweDE4YWY4LCAweDE4YjFjLCAweDE4YjM4LCAweDE4YjcwLCAweDE4YjdlLFxuICAgICAgICAweDE4YjgyLCAweDE4Yjg0LCAweDE4Yjg4LCAweDE4YjkwLCAweDE4YjllLCAweDE4YmEwLCAweDE4YmJjLCAweDE4YmM2LCAweDE4YmNjLCAweDE4YmQ4LCAweDE4YmVlLCAweDE4YmYyLFxuICAgICAgICAweDE4YmY0LCAweDE4YzIyLCAweDE4YzI0LCAweDE4YzI4LCAweDE4YzM2LCAweDE4YzQyLCAweDE4YzQ4LCAweDE4YzUwLCAweDE4YzVlLCAweDE4YzY2LCAweDE4YzdhLCAweDE4YzgyLFxuICAgICAgICAweDE4Yzg0LCAweDE4YzkwLCAweDE4YzllLCAweDE4Y2EwLCAweDE4Y2JjLCAweDE4Y2NjLCAweDE4Y2YyLCAweDE4Y2Y0LCAweDE4ZDA0LCAweDE4ZDA4LCAweDE4ZDEwLCAweDE4ZDFlLFxuICAgICAgICAweDE4ZDIwLCAweDE4ZDNjLCAweDE4ZDQwLCAweDE4ZDc4LCAweDE4ZDg2LCAweDE4ZDk4LCAweDE4ZGNlLCAweDE4ZGUyLCAweDE4ZGU0LCAweDE4ZGU4LCAweDE4ZTJlLCAweDE4ZTMyLFxuICAgICAgICAweDE4ZTM0LCAweDE4ZTRlLCAweDE4ZTVjLCAweDE4ZTYyLCAweDE4ZTY0LCAweDE4ZTY4LCAweDE4ZThlLCAweDE4ZTljLCAweDE4ZWI4LCAweDE4ZWMyLCAweDE4ZWM0LCAweDE4ZWM4LFxuICAgICAgICAweDE4ZWQwLCAweDE4ZWZhLCAweDE4ZjE2LCAweDE4ZjI2LCAweDE4ZjJjLCAweDE4ZjQ2LCAweDE4ZjRjLCAweDE4ZjU4LCAweDE4ZjZlLCAweDE4ZjhhLCAweDE4ZjkyLCAweDE4Zjk0LFxuICAgICAgICAweDE4ZmEyLCAweDE4ZmE0LCAweDE4ZmE4LCAweDE4ZmI2LCAweDE5MDJjLCAweDE5MDNhLCAweDE5MDQ2LCAweDE5MDRjLCAweDE5MDU4LCAweDE5MDcyLCAweDE5MDc0LCAweDE5MDg2LFxuICAgICAgICAweDE5MDk4LCAweDE5MGIwLCAweDE5MGJlLCAweDE5MGNlLCAweDE5MGRjLCAweDE5MGUyLCAweDE5MGU4LCAweDE5MGY2LCAweDE5MTA2LCAweDE5MTBjLCAweDE5MTMwLCAweDE5MTNlLFxuICAgICAgICAweDE5MTYwLCAweDE5MTdjLCAweDE5MThlLCAweDE5MTljLCAweDE5MWI4LCAweDE5MWMyLCAweDE5MWM4LCAweDE5MWQwLCAweDE5MWRlLCAweDE5MWU2LCAweDE5MWVjLCAweDE5MWZhLFxuICAgICAgICAweDE5MjE4LCAweDE5MjNlLCAweDE5MjYwLCAweDE5MjdjLCAweDE5MmMwLCAweDE5MmY4LCAweDE5MzM4LCAweDE5MzcwLCAweDE5MzdlLCAweDE5MzgyLCAweDE5Mzg0LCAweDE5MzkwLFxuICAgICAgICAweDE5MzllLCAweDE5M2EwLCAweDE5M2JjLCAweDE5M2M2LCAweDE5M2NjLCAweDE5M2Q4LCAweDE5M2VlLCAweDE5M2YyLCAweDE5M2Y0LCAweDE5NDMwLCAweDE5NDNlLCAweDE5NDYwLFxuICAgICAgICAweDE5NDdjLCAweDE5NGMwLCAweDE5NGY4LCAweDE5NWYwLCAweDE5NjM4LCAweDE5NjcwLCAweDE5NjdlLCAweDE5NmUwLCAweDE5NmZjLCAweDE5NzAyLCAweDE5NzA0LCAweDE5NzA4LFxuICAgICAgICAweDE5NzEwLCAweDE5NzIwLCAweDE5NzNjLCAweDE5NzQwLCAweDE5Nzc4LCAweDE5Nzg2LCAweDE5NzhjLCAweDE5Nzk4LCAweDE5N2IwLCAweDE5N2JlLCAweDE5N2NlLCAweDE5N2RjLFxuICAgICAgICAweDE5N2UyLCAweDE5N2U0LCAweDE5N2U4LCAweDE5ODIyLCAweDE5ODI0LCAweDE5ODQyLCAweDE5ODQ4LCAweDE5ODUwLCAweDE5ODVlLCAweDE5ODY2LCAweDE5ODdhLCAweDE5ODgyLFxuICAgICAgICAweDE5ODg0LCAweDE5ODkwLCAweDE5ODllLCAweDE5OGEwLCAweDE5OGJjLCAweDE5OGNjLCAweDE5OGYyLCAweDE5OGY0LCAweDE5OTAyLCAweDE5OTA4LCAweDE5OTFlLCAweDE5OTIwLFxuICAgICAgICAweDE5OTNjLCAweDE5OTQwLCAweDE5OTc4LCAweDE5OTg2LCAweDE5OTk4LCAweDE5OWNlLCAweDE5OWUyLCAweDE5OWU0LCAweDE5OWU4LCAweDE5YTA4LCAweDE5YTEwLCAweDE5YTFlLFxuICAgICAgICAweDE5YTIwLCAweDE5YTNjLCAweDE5YTQwLCAweDE5YTc4LCAweDE5YWYwLCAweDE5YjE4LCAweDE5YjNlLCAweDE5YjYwLCAweDE5YjljLCAweDE5YmMyLCAweDE5YmM0LCAweDE5YmM4LFxuICAgICAgICAweDE5YmQwLCAweDE5YmU2LCAweDE5YzJlLCAweDE5YzM0LCAweDE5YzRlLCAweDE5YzVjLCAweDE5YzYyLCAweDE5YzY0LCAweDE5YzY4LCAweDE5YzhlLCAweDE5YzljLCAweDE5Y2I4LFxuICAgICAgICAweDE5Y2MyLCAweDE5Y2M4LCAweDE5Y2QwLCAweDE5Y2U2LCAweDE5Y2ZhLCAweDE5ZDBlLCAweDE5ZDFjLCAweDE5ZDM4LCAweDE5ZDcwLCAweDE5ZDdlLCAweDE5ZDgyLCAweDE5ZDg0LFxuICAgICAgICAweDE5ZDg4LCAweDE5ZDkwLCAweDE5ZGEwLCAweDE5ZGNjLCAweDE5ZGYyLCAweDE5ZGY0LCAweDE5ZTE2LCAweDE5ZTI2LCAweDE5ZTJjLCAweDE5ZTQ2LCAweDE5ZTRjLCAweDE5ZTU4LFxuICAgICAgICAweDE5ZTc0LCAweDE5ZTg2LCAweDE5ZThjLCAweDE5ZTk4LCAweDE5ZWIwLCAweDE5ZWJlLCAweDE5ZWNlLCAweDE5ZWUyLCAweDE5ZWU0LCAweDE5ZWU4LCAweDE5ZjBhLCAweDE5ZjEyLFxuICAgICAgICAweDE5ZjE0LCAweDE5ZjIyLCAweDE5ZjI0LCAweDE5ZjI4LCAweDE5ZjQyLCAweDE5ZjQ0LCAweDE5ZjQ4LCAweDE5ZjUwLCAweDE5ZjVlLCAweDE5ZjZjLCAweDE5ZjlhLCAweDE5ZmFlLFxuICAgICAgICAweDE5ZmIyLCAweDE5ZmI0LCAweDFhMDQ2LCAweDFhMDRjLCAweDFhMDcyLCAweDFhMDc0LCAweDFhMDg2LCAweDFhMDhjLCAweDFhMDk4LCAweDFhMGIwLCAweDFhMGJlLCAweDFhMGUyLFxuICAgICAgICAweDFhMGU0LCAweDFhMGU4LCAweDFhMGY2LCAweDFhMTA2LCAweDFhMTBjLCAweDFhMTE4LCAweDFhMTMwLCAweDFhMTNlLCAweDFhMTYwLCAweDFhMTdjLCAweDFhMThlLCAweDFhMTljLFxuICAgICAgICAweDFhMWI4LCAweDFhMWMyLCAweDFhMWM0LCAweDFhMWM4LCAweDFhMWQwLCAweDFhMWRlLCAweDFhMWU2LCAweDFhMWVjLCAweDFhMjE4LCAweDFhMjMwLCAweDFhMjNlLCAweDFhMjYwLFxuICAgICAgICAweDFhMjdjLCAweDFhMmMwLCAweDFhMmY4LCAweDFhMzFjLCAweDFhMzM4LCAweDFhMzcwLCAweDFhMzdlLCAweDFhMzgyLCAweDFhMzg0LCAweDFhMzg4LCAweDFhMzkwLCAweDFhMzllLFxuICAgICAgICAweDFhM2EwLCAweDFhM2JjLCAweDFhM2M2LCAweDFhM2NjLCAweDFhM2Q4LCAweDFhM2VlLCAweDFhM2YyLCAweDFhM2Y0LCAweDFhNDE4LCAweDFhNDMwLCAweDFhNDNlLCAweDFhNDYwLFxuICAgICAgICAweDFhNDdjLCAweDFhNGMwLCAweDFhNGY4LCAweDFhNWYwLCAweDFhNjFjLCAweDFhNjM4LCAweDFhNjcwLCAweDFhNjdlLCAweDFhNmUwLCAweDFhNmZjLCAweDFhNzAyLCAweDFhNzA0LFxuICAgICAgICAweDFhNzA4LCAweDFhNzEwLCAweDFhNzFlLCAweDFhNzIwLCAweDFhNzNjLCAweDFhNzQwLCAweDFhNzc4LCAweDFhNzg2LCAweDFhNzhjLCAweDFhNzk4LCAweDFhN2IwLCAweDFhN2JlLFxuICAgICAgICAweDFhN2NlLCAweDFhN2RjLCAweDFhN2UyLCAweDFhN2U0LCAweDFhN2U4LCAweDFhODMwLCAweDFhODYwLCAweDFhODdjLCAweDFhOGMwLCAweDFhOGY4LCAweDFhOWYwLCAweDFhYmUwLFxuICAgICAgICAweDFhYzcwLCAweDFhYzdlLCAweDFhY2UwLCAweDFhY2ZjLCAweDFhZGMwLCAweDFhZGY4LCAweDFhZTA0LCAweDFhZTA4LCAweDFhZTEwLCAweDFhZTIwLCAweDFhZTNjLCAweDFhZTQwLFxuICAgICAgICAweDFhZTc4LCAweDFhZWYwLCAweDFhZjA2LCAweDFhZjBjLCAweDFhZjE4LCAweDFhZjMwLCAweDFhZjNlLCAweDFhZjYwLCAweDFhZjdjLCAweDFhZjhlLCAweDFhZjljLCAweDFhZmI4LFxuICAgICAgICAweDFhZmM0LCAweDFhZmM4LCAweDFhZmQwLCAweDFhZmRlLCAweDFiMDQyLCAweDFiMDVlLCAweDFiMDdhLCAweDFiMDgyLCAweDFiMDg0LCAweDFiMDg4LCAweDFiMDkwLCAweDFiMDllLFxuICAgICAgICAweDFiMGEwLCAweDFiMGJjLCAweDFiMGNjLCAweDFiMGYyLCAweDFiMGY0LCAweDFiMTAyLCAweDFiMTA0LCAweDFiMTA4LCAweDFiMTEwLCAweDFiMTFlLCAweDFiMTIwLCAweDFiMTNjLFxuICAgICAgICAweDFiMTQwLCAweDFiMTc4LCAweDFiMTg2LCAweDFiMTk4LCAweDFiMWNlLCAweDFiMWUyLCAweDFiMWU0LCAweDFiMWU4LCAweDFiMjA0LCAweDFiMjA4LCAweDFiMjEwLCAweDFiMjFlLFxuICAgICAgICAweDFiMjIwLCAweDFiMjNjLCAweDFiMjQwLCAweDFiMjc4LCAweDFiMmYwLCAweDFiMzBjLCAweDFiMzNlLCAweDFiMzYwLCAweDFiMzljLCAweDFiM2MyLCAweDFiM2M0LCAweDFiM2M4LFxuICAgICAgICAweDFiM2QwLCAweDFiM2U2LCAweDFiNDEwLCAweDFiNDFlLCAweDFiNDIwLCAweDFiNDNjLCAweDFiNDQwLCAweDFiNDc4LCAweDFiNGYwLCAweDFiNWUwLCAweDFiNjE4LCAweDFiNjYwLFxuICAgICAgICAweDFiNjdjLCAweDFiNmMwLCAweDFiNzM4LCAweDFiNzgyLCAweDFiNzg0LCAweDFiNzg4LCAweDFiNzkwLCAweDFiNzllLCAweDFiN2EwLCAweDFiN2NjLCAweDFiODJlLCAweDFiODRlLFxuICAgICAgICAweDFiODVjLCAweDFiODhlLCAweDFiODljLCAweDFiOGI4LCAweDFiOGMyLCAweDFiOGM0LCAweDFiOGM4LCAweDFiOGQwLCAweDFiOGU2LCAweDFiOGZhLCAweDFiOTBlLCAweDFiOTFjLFxuICAgICAgICAweDFiOTM4LCAweDFiOTcwLCAweDFiOTdlLCAweDFiOTgyLCAweDFiOTg0LCAweDFiOTg4LCAweDFiOTkwLCAweDFiOTllLCAweDFiOWEwLCAweDFiOWNjLCAweDFiOWYyLCAweDFiOWY0LFxuICAgICAgICAweDFiYTBlLCAweDFiYTFjLCAweDFiYTM4LCAweDFiYTcwLCAweDFiYTdlLCAweDFiYWUwLCAweDFiYWZjLCAweDFiYjA4LCAweDFiYjEwLCAweDFiYjIwLCAweDFiYjNjLCAweDFiYjQwLFxuICAgICAgICAweDFiYjk4LCAweDFiYmNlLCAweDFiYmUyLCAweDFiYmU0LCAweDFiYmU4LCAweDFiYzE2LCAweDFiYzI2LCAweDFiYzJjLCAweDFiYzQ2LCAweDFiYzRjLCAweDFiYzU4LCAweDFiYzcyLFxuICAgICAgICAweDFiYzc0LCAweDFiYzg2LCAweDFiYzhjLCAweDFiYzk4LCAweDFiY2IwLCAweDFiY2JlLCAweDFiY2NlLCAweDFiY2UyLCAweDFiY2U0LCAweDFiY2U4LCAweDFiZDA2LCAweDFiZDBjLFxuICAgICAgICAweDFiZDE4LCAweDFiZDMwLCAweDFiZDNlLCAweDFiZDYwLCAweDFiZDdjLCAweDFiZDljLCAweDFiZGMyLCAweDFiZGM0LCAweDFiZGM4LCAweDFiZGQwLCAweDFiZGU2LCAweDFiZGZhLFxuICAgICAgICAweDFiZTEyLCAweDFiZTE0LCAweDFiZTIyLCAweDFiZTI0LCAweDFiZTI4LCAweDFiZTQyLCAweDFiZTQ0LCAweDFiZTQ4LCAweDFiZTUwLCAweDFiZTVlLCAweDFiZTY2LCAweDFiZTgyLFxuICAgICAgICAweDFiZTg0LCAweDFiZTg4LCAweDFiZTkwLCAweDFiZTllLCAweDFiZWEwLCAweDFiZWJjLCAweDFiZWNjLCAweDFiZWY0LCAweDFiZjFhLCAweDFiZjJlLCAweDFiZjMyLCAweDFiZjM0LFxuICAgICAgICAweDFiZjRlLCAweDFiZjVjLCAweDFiZjYyLCAweDFiZjY0LCAweDFiZjY4LCAweDFjMDlhLCAweDFjMGIyLCAweDFjMGI0LCAweDFjMTFhLCAweDFjMTMyLCAweDFjMTM0LCAweDFjMTYyLFxuICAgICAgICAweDFjMTY0LCAweDFjMTY4LCAweDFjMTc2LCAweDFjMWJhLCAweDFjMjFhLCAweDFjMjMyLCAweDFjMjM0LCAweDFjMjRlLCAweDFjMjVjLCAweDFjMjYyLCAweDFjMjY0LCAweDFjMjY4LFxuICAgICAgICAweDFjMjc2LCAweDFjMjhlLCAweDFjMmMyLCAweDFjMmM0LCAweDFjMmM4LCAweDFjMmQwLCAweDFjMmRlLCAweDFjMmU2LCAweDFjMmVjLCAweDFjMmZhLCAweDFjMzE2LCAweDFjMzI2LFxuICAgICAgICAweDFjMzNhLCAweDFjMzQ2LCAweDFjMzRjLCAweDFjMzcyLCAweDFjMzc0LCAweDFjNDFhLCAweDFjNDJlLCAweDFjNDMyLCAweDFjNDM0LCAweDFjNDRlLCAweDFjNDVjLCAweDFjNDYyLFxuICAgICAgICAweDFjNDY0LCAweDFjNDY4LCAweDFjNDc2LCAweDFjNDhlLCAweDFjNDljLCAweDFjNGI4LCAweDFjNGMyLCAweDFjNGM4LCAweDFjNGQwLCAweDFjNGRlLCAweDFjNGU2LCAweDFjNGVjLFxuICAgICAgICAweDFjNGZhLCAweDFjNTFjLCAweDFjNTM4LCAweDFjNTcwLCAweDFjNTdlLCAweDFjNTgyLCAweDFjNTg0LCAweDFjNTg4LCAweDFjNTkwLCAweDFjNTllLCAweDFjNWEwLCAweDFjNWJjLFxuICAgICAgICAweDFjNWM2LCAweDFjNWNjLCAweDFjNWQ4LCAweDFjNWVlLCAweDFjNWYyLCAweDFjNWY0LCAweDFjNjE2LCAweDFjNjI2LCAweDFjNjJjLCAweDFjNjNhLCAweDFjNjQ2LCAweDFjNjRjLFxuICAgICAgICAweDFjNjU4LCAweDFjNjZlLCAweDFjNjcyLCAweDFjNjc0LCAweDFjNjg2LCAweDFjNjhjLCAweDFjNjk4LCAweDFjNmIwLCAweDFjNmJlLCAweDFjNmNlLCAweDFjNmRjLCAweDFjNmUyLFxuICAgICAgICAweDFjNmU0LCAweDFjNmU4LCAweDFjNzEyLCAweDFjNzE0LCAweDFjNzIyLCAweDFjNzI4LCAweDFjNzM2LCAweDFjNzQyLCAweDFjNzQ0LCAweDFjNzQ4LCAweDFjNzUwLCAweDFjNzVlLFxuICAgICAgICAweDFjNzY2LCAweDFjNzZjLCAweDFjNzdhLCAweDFjN2FlLCAweDFjN2Q2LCAweDFjN2VhLCAweDFjODFhLCAweDFjODJlLCAweDFjODMyLCAweDFjODM0LCAweDFjODRlLCAweDFjODVjLFxuICAgICAgICAweDFjODYyLCAweDFjODY0LCAweDFjODY4LCAweDFjODc2LCAweDFjODhlLCAweDFjODljLCAweDFjOGI4LCAweDFjOGMyLCAweDFjOGM4LCAweDFjOGQwLCAweDFjOGRlLCAweDFjOGU2LFxuICAgICAgICAweDFjOGVjLCAweDFjOGZhLCAweDFjOTBlLCAweDFjOTM4LCAweDFjOTcwLCAweDFjOTdlLCAweDFjOTgyLCAweDFjOTg0LCAweDFjOTkwLCAweDFjOTllLCAweDFjOWEwLCAweDFjOWJjLFxuICAgICAgICAweDFjOWM2LCAweDFjOWNjLCAweDFjOWQ4LCAweDFjOWVlLCAweDFjOWYyLCAweDFjOWY0LCAweDFjYTM4LCAweDFjYTcwLCAweDFjYTdlLCAweDFjYWUwLCAweDFjYWZjLCAweDFjYjAyLFxuICAgICAgICAweDFjYjA0LCAweDFjYjA4LCAweDFjYjEwLCAweDFjYjIwLCAweDFjYjNjLCAweDFjYjQwLCAweDFjYjc4LCAweDFjYjg2LCAweDFjYjhjLCAweDFjYjk4LCAweDFjYmIwLCAweDFjYmJlLFxuICAgICAgICAweDFjYmNlLCAweDFjYmRjLCAweDFjYmUyLCAweDFjYmU0LCAweDFjYmU4LCAweDFjYmY2LCAweDFjYzE2LCAweDFjYzI2LCAweDFjYzJjLCAweDFjYzNhLCAweDFjYzQ2LCAweDFjYzU4LFxuICAgICAgICAweDFjYzcyLCAweDFjYzc0LCAweDFjYzg2LCAweDFjY2IwLCAweDFjY2JlLCAweDFjY2NlLCAweDFjY2UyLCAweDFjY2U0LCAweDFjY2U4LCAweDFjZDA2LCAweDFjZDBjLCAweDFjZDE4LFxuICAgICAgICAweDFjZDMwLCAweDFjZDNlLCAweDFjZDYwLCAweDFjZDdjLCAweDFjZDljLCAweDFjZGMyLCAweDFjZGM0LCAweDFjZGM4LCAweDFjZGQwLCAweDFjZGRlLCAweDFjZGU2LCAweDFjZGZhLFxuICAgICAgICAweDFjZTIyLCAweDFjZTI4LCAweDFjZTQyLCAweDFjZTUwLCAweDFjZTVlLCAweDFjZTY2LCAweDFjZTdhLCAweDFjZTgyLCAweDFjZTg0LCAweDFjZTg4LCAweDFjZTkwLCAweDFjZTllLFxuICAgICAgICAweDFjZWEwLCAweDFjZWJjLCAweDFjZWNjLCAweDFjZWYyLCAweDFjZWY0LCAweDFjZjJlLCAweDFjZjMyLCAweDFjZjM0LCAweDFjZjRlLCAweDFjZjVjLCAweDFjZjYyLCAweDFjZjY0LFxuICAgICAgICAweDFjZjY4LCAweDFjZjk2LCAweDFjZmE2LCAweDFjZmFjLCAweDFjZmNhLCAweDFjZmQyLCAweDFjZmQ0LCAweDFkMDJlLCAweDFkMDMyLCAweDFkMDM0LCAweDFkMDRlLCAweDFkMDVjLFxuICAgICAgICAweDFkMDYyLCAweDFkMDY0LCAweDFkMDY4LCAweDFkMDc2LCAweDFkMDhlLCAweDFkMDljLCAweDFkMGI4LCAweDFkMGMyLCAweDFkMGM0LCAweDFkMGM4LCAweDFkMGQwLCAweDFkMGRlLFxuICAgICAgICAweDFkMGU2LCAweDFkMGVjLCAweDFkMGZhLCAweDFkMTFjLCAweDFkMTM4LCAweDFkMTcwLCAweDFkMTdlLCAweDFkMTgyLCAweDFkMTg0LCAweDFkMTg4LCAweDFkMTkwLCAweDFkMTllLFxuICAgICAgICAweDFkMWEwLCAweDFkMWJjLCAweDFkMWM2LCAweDFkMWNjLCAweDFkMWQ4LCAweDFkMWVlLCAweDFkMWYyLCAweDFkMWY0LCAweDFkMjFjLCAweDFkMjM4LCAweDFkMjcwLCAweDFkMjdlLFxuICAgICAgICAweDFkMmUwLCAweDFkMmZjLCAweDFkMzAyLCAweDFkMzA0LCAweDFkMzA4LCAweDFkMzEwLCAweDFkMzFlLCAweDFkMzIwLCAweDFkMzNjLCAweDFkMzQwLCAweDFkMzc4LCAweDFkMzg2LFxuICAgICAgICAweDFkMzhjLCAweDFkMzk4LCAweDFkM2IwLCAweDFkM2JlLCAweDFkM2NlLCAweDFkM2RjLCAweDFkM2UyLCAweDFkM2U0LCAweDFkM2U4LCAweDFkM2Y2LCAweDFkNDcwLCAweDFkNDdlLFxuICAgICAgICAweDFkNGUwLCAweDFkNGZjLCAweDFkNWMwLCAweDFkNWY4LCAweDFkNjA0LCAweDFkNjA4LCAweDFkNjEwLCAweDFkNjIwLCAweDFkNjQwLCAweDFkNjc4LCAweDFkNmYwLCAweDFkNzA2LFxuICAgICAgICAweDFkNzBjLCAweDFkNzE4LCAweDFkNzMwLCAweDFkNzNlLCAweDFkNzYwLCAweDFkNzdjLCAweDFkNzhlLCAweDFkNzljLCAweDFkN2I4LCAweDFkN2MyLCAweDFkN2M0LCAweDFkN2M4LFxuICAgICAgICAweDFkN2QwLCAweDFkN2RlLCAweDFkN2U2LCAweDFkN2VjLCAweDFkODI2LCAweDFkODJjLCAweDFkODNhLCAweDFkODQ2LCAweDFkODRjLCAweDFkODU4LCAweDFkODcyLCAweDFkODc0LFxuICAgICAgICAweDFkODg2LCAweDFkODhjLCAweDFkODk4LCAweDFkOGIwLCAweDFkOGJlLCAweDFkOGNlLCAweDFkOGUyLCAweDFkOGU0LCAweDFkOGU4LCAweDFkOGY2LCAweDFkOTBjLCAweDFkOTE4LFxuICAgICAgICAweDFkOTMwLCAweDFkOTNlLCAweDFkOTYwLCAweDFkOTdjLCAweDFkOTljLCAweDFkOWMyLCAweDFkOWM0LCAweDFkOWM4LCAweDFkOWQwLCAweDFkOWU2LCAweDFkOWZhLCAweDFkYTBjLFxuICAgICAgICAweDFkYTE4LCAweDFkYTMwLCAweDFkYTNlLCAweDFkYTYwLCAweDFkYTdjLCAweDFkYWMwLCAweDFkYWY4LCAweDFkYjM4LCAweDFkYjgyLCAweDFkYjg0LCAweDFkYjg4LCAweDFkYjkwLFxuICAgICAgICAweDFkYjllLCAweDFkYmEwLCAweDFkYmNjLCAweDFkYmYyLCAweDFkYmY0LCAweDFkYzIyLCAweDFkYzQyLCAweDFkYzQ0LCAweDFkYzQ4LCAweDFkYzUwLCAweDFkYzVlLCAweDFkYzY2LFxuICAgICAgICAweDFkYzdhLCAweDFkYzgyLCAweDFkYzg0LCAweDFkYzg4LCAweDFkYzkwLCAweDFkYzllLCAweDFkY2EwLCAweDFkY2JjLCAweDFkY2NjLCAweDFkY2YyLCAweDFkY2Y0LCAweDFkZDA0LFxuICAgICAgICAweDFkZDA4LCAweDFkZDEwLCAweDFkZDFlLCAweDFkZDIwLCAweDFkZDNjLCAweDFkZDQwLCAweDFkZDc4LCAweDFkZDg2LCAweDFkZDk4LCAweDFkZGNlLCAweDFkZGUyLCAweDFkZGU0LFxuICAgICAgICAweDFkZGU4LCAweDFkZTJlLCAweDFkZTMyLCAweDFkZTM0LCAweDFkZTRlLCAweDFkZTVjLCAweDFkZTYyLCAweDFkZTY0LCAweDFkZTY4LCAweDFkZThlLCAweDFkZTljLCAweDFkZWI4LFxuICAgICAgICAweDFkZWMyLCAweDFkZWM0LCAweDFkZWM4LCAweDFkZWQwLCAweDFkZWU2LCAweDFkZWZhLCAweDFkZjE2LCAweDFkZjI2LCAweDFkZjJjLCAweDFkZjQ2LCAweDFkZjRjLCAweDFkZjU4LFxuICAgICAgICAweDFkZjcyLCAweDFkZjc0LCAweDFkZjhhLCAweDFkZjkyLCAweDFkZjk0LCAweDFkZmEyLCAweDFkZmE0LCAweDFkZmE4LCAweDFlMDhhLCAweDFlMDkyLCAweDFlMDk0LCAweDFlMGEyLFxuICAgICAgICAweDFlMGE0LCAweDFlMGE4LCAweDFlMGI2LCAweDFlMGRhLCAweDFlMTBhLCAweDFlMTEyLCAweDFlMTE0LCAweDFlMTIyLCAweDFlMTI0LCAweDFlMTI4LCAweDFlMTM2LCAweDFlMTQyLFxuICAgICAgICAweDFlMTQ0LCAweDFlMTQ4LCAweDFlMTUwLCAweDFlMTY2LCAweDFlMTZjLCAweDFlMTdhLCAweDFlMTlhLCAweDFlMWIyLCAweDFlMWI0LCAweDFlMjBhLCAweDFlMjEyLCAweDFlMjE0LFxuICAgICAgICAweDFlMjIyLCAweDFlMjI0LCAweDFlMjI4LCAweDFlMjM2LCAweDFlMjQyLCAweDFlMjQ4LCAweDFlMjUwLCAweDFlMjVlLCAweDFlMjY2LCAweDFlMjZjLCAweDFlMjdhLCAweDFlMjgyLFxuICAgICAgICAweDFlMjg0LCAweDFlMjg4LCAweDFlMjkwLCAweDFlMmEwLCAweDFlMmJjLCAweDFlMmM2LCAweDFlMmNjLCAweDFlMmQ4LCAweDFlMmVlLCAweDFlMmYyLCAweDFlMmY0LCAweDFlMzFhLFxuICAgICAgICAweDFlMzMyLCAweDFlMzM0LCAweDFlMzVjLCAweDFlMzYyLCAweDFlMzY0LCAweDFlMzY4LCAweDFlM2JhLCAweDFlNDBhLCAweDFlNDEyLCAweDFlNDE0LCAweDFlNDIyLCAweDFlNDI4LFxuICAgICAgICAweDFlNDM2LCAweDFlNDQyLCAweDFlNDQ4LCAweDFlNDUwLCAweDFlNDVlLCAweDFlNDY2LCAweDFlNDZjLCAweDFlNDdhLCAweDFlNDgyLCAweDFlNDg0LCAweDFlNDkwLCAweDFlNDllLFxuICAgICAgICAweDFlNGEwLCAweDFlNGJjLCAweDFlNGM2LCAweDFlNGNjLCAweDFlNGQ4LCAweDFlNGVlLCAweDFlNGYyLCAweDFlNGY0LCAweDFlNTAyLCAweDFlNTA0LCAweDFlNTA4LCAweDFlNTEwLFxuICAgICAgICAweDFlNTFlLCAweDFlNTIwLCAweDFlNTNjLCAweDFlNTQwLCAweDFlNTc4LCAweDFlNTg2LCAweDFlNThjLCAweDFlNTk4LCAweDFlNWIwLCAweDFlNWJlLCAweDFlNWNlLCAweDFlNWRjLFxuICAgICAgICAweDFlNWUyLCAweDFlNWU0LCAweDFlNWU4LCAweDFlNWY2LCAweDFlNjFhLCAweDFlNjJlLCAweDFlNjMyLCAweDFlNjM0LCAweDFlNjRlLCAweDFlNjVjLCAweDFlNjYyLCAweDFlNjY4LFxuICAgICAgICAweDFlNjhlLCAweDFlNjljLCAweDFlNmI4LCAweDFlNmMyLCAweDFlNmM0LCAweDFlNmM4LCAweDFlNmQwLCAweDFlNmU2LCAweDFlNmZhLCAweDFlNzE2LCAweDFlNzI2LCAweDFlNzJjLFxuICAgICAgICAweDFlNzNhLCAweDFlNzQ2LCAweDFlNzRjLCAweDFlNzU4LCAweDFlNzcyLCAweDFlNzc0LCAweDFlNzkyLCAweDFlNzk0LCAweDFlN2EyLCAweDFlN2E0LCAweDFlN2E4LCAweDFlN2I2LFxuICAgICAgICAweDFlODEyLCAweDFlODE0LCAweDFlODIyLCAweDFlODI0LCAweDFlODI4LCAweDFlODM2LCAweDFlODQyLCAweDFlODQ0LCAweDFlODQ4LCAweDFlODUwLCAweDFlODVlLCAweDFlODY2LFxuICAgICAgICAweDFlODZjLCAweDFlODdhLCAweDFlODgyLCAweDFlODg0LCAweDFlODg4LCAweDFlODkwLCAweDFlODllLCAweDFlOGEwLCAweDFlOGJjLCAweDFlOGM2LCAweDFlOGNjLCAweDFlOGQ4LFxuICAgICAgICAweDFlOGVlLCAweDFlOGYyLCAweDFlOGY0LCAweDFlOTAyLCAweDFlOTA0LCAweDFlOTA4LCAweDFlOTEwLCAweDFlOTIwLCAweDFlOTNjLCAweDFlOTQwLCAweDFlOTc4LCAweDFlOTg2LFxuICAgICAgICAweDFlOThjLCAweDFlOTk4LCAweDFlOWIwLCAweDFlOWJlLCAweDFlOWNlLCAweDFlOWRjLCAweDFlOWUyLCAweDFlOWU0LCAweDFlOWU4LCAweDFlOWY2LCAweDFlYTA0LCAweDFlYTA4LFxuICAgICAgICAweDFlYTEwLCAweDFlYTIwLCAweDFlYTQwLCAweDFlYTc4LCAweDFlYWYwLCAweDFlYjA2LCAweDFlYjBjLCAweDFlYjE4LCAweDFlYjMwLCAweDFlYjNlLCAweDFlYjYwLCAweDFlYjdjLFxuICAgICAgICAweDFlYjhlLCAweDFlYjljLCAweDFlYmI4LCAweDFlYmMyLCAweDFlYmM0LCAweDFlYmM4LCAweDFlYmQwLCAweDFlYmRlLCAweDFlYmU2LCAweDFlYmVjLCAweDFlYzFhLCAweDFlYzJlLFxuICAgICAgICAweDFlYzMyLCAweDFlYzM0LCAweDFlYzRlLCAweDFlYzVjLCAweDFlYzYyLCAweDFlYzY0LCAweDFlYzY4LCAweDFlYzhlLCAweDFlYzljLCAweDFlY2I4LCAweDFlY2MyLCAweDFlY2M0LFxuICAgICAgICAweDFlY2M4LCAweDFlY2QwLCAweDFlY2U2LCAweDFlY2ZhLCAweDFlZDBlLCAweDFlZDFjLCAweDFlZDM4LCAweDFlZDcwLCAweDFlZDdlLCAweDFlZDgyLCAweDFlZDg0LCAweDFlZDg4LFxuICAgICAgICAweDFlZDkwLCAweDFlZDllLCAweDFlZGEwLCAweDFlZGNjLCAweDFlZGYyLCAweDFlZGY0LCAweDFlZTE2LCAweDFlZTI2LCAweDFlZTJjLCAweDFlZTNhLCAweDFlZTQ2LCAweDFlZTRjLFxuICAgICAgICAweDFlZTU4LCAweDFlZTZlLCAweDFlZTcyLCAweDFlZTc0LCAweDFlZTg2LCAweDFlZThjLCAweDFlZTk4LCAweDFlZWIwLCAweDFlZWJlLCAweDFlZWNlLCAweDFlZWRjLCAweDFlZWUyLFxuICAgICAgICAweDFlZWU0LCAweDFlZWU4LCAweDFlZjEyLCAweDFlZjIyLCAweDFlZjI0LCAweDFlZjI4LCAweDFlZjM2LCAweDFlZjQyLCAweDFlZjQ0LCAweDFlZjQ4LCAweDFlZjUwLCAweDFlZjVlLFxuICAgICAgICAweDFlZjY2LCAweDFlZjZjLCAweDFlZjdhLCAweDFlZmFlLCAweDFlZmIyLCAweDFlZmI0LCAweDFlZmQ2LCAweDFmMDk2LCAweDFmMGE2LCAweDFmMGFjLCAweDFmMGJhLCAweDFmMGNhLFxuICAgICAgICAweDFmMGQyLCAweDFmMGQ0LCAweDFmMTE2LCAweDFmMTI2LCAweDFmMTJjLCAweDFmMTNhLCAweDFmMTQ2LCAweDFmMTRjLCAweDFmMTU4LCAweDFmMTZlLCAweDFmMTcyLCAweDFmMTc0LFxuICAgICAgICAweDFmMThhLCAweDFmMTkyLCAweDFmMTk0LCAweDFmMWEyLCAweDFmMWE0LCAweDFmMWE4LCAweDFmMWRhLCAweDFmMjE2LCAweDFmMjI2LCAweDFmMjJjLCAweDFmMjNhLCAweDFmMjQ2LFxuICAgICAgICAweDFmMjU4LCAweDFmMjZlLCAweDFmMjcyLCAweDFmMjc0LCAweDFmMjg2LCAweDFmMjhjLCAweDFmMjk4LCAweDFmMmIwLCAweDFmMmJlLCAweDFmMmNlLCAweDFmMmRjLCAweDFmMmUyLFxuICAgICAgICAweDFmMmU0LCAweDFmMmU4LCAweDFmMmY2LCAweDFmMzBhLCAweDFmMzEyLCAweDFmMzE0LCAweDFmMzIyLCAweDFmMzI4LCAweDFmMzQyLCAweDFmMzQ0LCAweDFmMzQ4LCAweDFmMzUwLFxuICAgICAgICAweDFmMzVlLCAweDFmMzY2LCAweDFmMzdhLCAweDFmMzlhLCAweDFmM2FlLCAweDFmM2IyLCAweDFmM2I0LCAweDFmNDE2LCAweDFmNDI2LCAweDFmNDJjLCAweDFmNDNhLCAweDFmNDQ2LFxuICAgICAgICAweDFmNDRjLCAweDFmNDU4LCAweDFmNDZlLCAweDFmNDcyLCAweDFmNDc0LCAweDFmNDg2LCAweDFmNDhjLCAweDFmNDk4LCAweDFmNGIwLCAweDFmNGJlLCAweDFmNGNlLCAweDFmNGRjLFxuICAgICAgICAweDFmNGUyLCAweDFmNGU0LCAweDFmNGU4LCAweDFmNGY2LCAweDFmNTA2LCAweDFmNTBjLCAweDFmNTE4LCAweDFmNTMwLCAweDFmNTNlLCAweDFmNTYwLCAweDFmNTdjLCAweDFmNThlLFxuICAgICAgICAweDFmNTljLCAweDFmNWI4LCAweDFmNWMyLCAweDFmNWM0LCAweDFmNWM4LCAweDFmNWQwLCAweDFmNWRlLCAweDFmNWU2LCAweDFmNWVjLCAweDFmNWZhLCAweDFmNjBhLCAweDFmNjEyLFxuICAgICAgICAweDFmNjE0LCAweDFmNjIyLCAweDFmNjI0LCAweDFmNjI4LCAweDFmNjM2LCAweDFmNjQyLCAweDFmNjQ0LCAweDFmNjQ4LCAweDFmNjUwLCAweDFmNjVlLCAweDFmNjY2LCAweDFmNjdhLFxuICAgICAgICAweDFmNjgyLCAweDFmNjg0LCAweDFmNjg4LCAweDFmNjkwLCAweDFmNjllLCAweDFmNmEwLCAweDFmNmJjLCAweDFmNmNjLCAweDFmNmYyLCAweDFmNmY0LCAweDFmNzFhLCAweDFmNzJlLFxuICAgICAgICAweDFmNzMyLCAweDFmNzM0LCAweDFmNzRlLCAweDFmNzVjLCAweDFmNzYyLCAweDFmNzY0LCAweDFmNzY4LCAweDFmNzc2LCAweDFmNzk2LCAweDFmN2E2LCAweDFmN2FjLCAweDFmN2JhLFxuICAgICAgICAweDFmN2QyLCAweDFmN2Q0LCAweDFmODlhLCAweDFmOGFlLCAweDFmOGIyLCAweDFmOGI0LCAweDFmOGQ2LCAweDFmOGVhLCAweDFmOTFhLCAweDFmOTJlLCAweDFmOTMyLCAweDFmOTM0LFxuICAgICAgICAweDFmOTRlLCAweDFmOTVjLCAweDFmOTYyLCAweDFmOTY0LCAweDFmOTY4LCAweDFmOTc2LCAweDFmOTk2LCAweDFmOWE2LCAweDFmOWFjLCAweDFmOWJhLCAweDFmOWNhLCAweDFmOWQyLFxuICAgICAgICAweDFmOWQ0LCAweDFmYTFhLCAweDFmYTJlLCAweDFmYTMyLCAweDFmYTM0LCAweDFmYTRlLCAweDFmYTVjLCAweDFmYTYyLCAweDFmYTY0LCAweDFmYTY4LCAweDFmYTc2LCAweDFmYThlLFxuICAgICAgICAweDFmYTljLCAweDFmYWI4LCAweDFmYWMyLCAweDFmYWM0LCAweDFmYWM4LCAweDFmYWQwLCAweDFmYWRlLCAweDFmYWU2LCAweDFmYWVjLCAweDFmYjE2LCAweDFmYjI2LCAweDFmYjJjLFxuICAgICAgICAweDFmYjNhLCAweDFmYjQ2LCAweDFmYjRjLCAweDFmYjU4LCAweDFmYjZlLCAweDFmYjcyLCAweDFmYjc0LCAweDFmYjhhLCAweDFmYjkyLCAweDFmYjk0LCAweDFmYmEyLCAweDFmYmE0LFxuICAgICAgICAweDFmYmE4LCAweDFmYmI2LCAweDFmYmRhXG4gICAgXSk7XG4gICAgLyoqXG4gICAgICogVGhpcyB0YWJsZSBjb250YWlucyB0byBjb2Rld29yZHMgZm9yIGFsbCBzeW1ib2xzLlxuICAgICAqL1xuICAgIFBERjQxN0NvbW1vbi5DT0RFV09SRF9UQUJMRSA9IEludDMyQXJyYXkuZnJvbShbXG4gICAgICAgIDI2MjcsIDE4MTksIDI2MjIsIDI2MjEsIDE4MTMsIDE4MTIsIDI3MjksIDI3MjQsIDI3MjMsIDI3NzksIDI3NzQsIDI3NzMsIDkwMiwgODk2LCA5MDgsIDg2OCwgODY1LCA4NjEsIDg1OSwgMjUxMSxcbiAgICAgICAgODczLCA4NzEsIDE3ODAsIDgzNSwgMjQ5MywgODI1LCAyNDkxLCA4NDIsIDgzNywgODQ0LCAxNzY0LCAxNzYyLCA4MTEsIDgxMCwgODA5LCAyNDgzLCA4MDcsIDI0ODIsIDgwNiwgMjQ4MCwgODE1LFxuICAgICAgICA4MTQsIDgxMywgODEyLCAyNDg0LCA4MTcsIDgxNiwgMTc0NSwgMTc0NCwgMTc0MiwgMTc0NiwgMjY1NSwgMjYzNywgMjYzNSwgMjYyNiwgMjYyNSwgMjYyMywgMjYyOCwgMTgyMCwgMjc1MixcbiAgICAgICAgMjczOSwgMjczNywgMjcyOCwgMjcyNywgMjcyNSwgMjczMCwgMjc4NSwgMjc4MywgMjc3OCwgMjc3NywgMjc3NSwgMjc4MCwgNzg3LCA3ODEsIDc0NywgNzM5LCA3MzYsIDI0MTMsIDc1NCwgNzUyLFxuICAgICAgICAxNzE5LCA2OTIsIDY4OSwgNjgxLCAyMzcxLCA2NzgsIDIzNjksIDcwMCwgNjk3LCA2OTQsIDcwMywgMTY4OCwgMTY4NiwgNjQyLCA2MzgsIDIzNDMsIDYzMSwgMjM0MSwgNjI3LCAyMzM4LCA2NTEsXG4gICAgICAgIDY0NiwgNjQzLCAyMzQ1LCA2NTQsIDY1MiwgMTY1MiwgMTY1MCwgMTY0NywgMTY1NCwgNjAxLCA1OTksIDIzMjIsIDU5NiwgMjMyMSwgNTk0LCAyMzE5LCAyMzE3LCA2MTEsIDYxMCwgNjA4LCA2MDYsXG4gICAgICAgIDIzMjQsIDYwMywgMjMyMywgNjE1LCA2MTQsIDYxMiwgMTYxNywgMTYxNiwgMTYxNCwgMTYxMiwgNjE2LCAxNjE5LCAxNjE4LCAyNTc1LCAyNTM4LCAyNTM2LCA5MDUsIDkwMSwgODk4LCA5MDksXG4gICAgICAgIDI1MDksIDI1MDcsIDI1MDQsIDg3MCwgODY3LCA4NjQsIDg2MCwgMjUxMiwgODc1LCA4NzIsIDE3ODEsIDI0OTAsIDI0ODksIDI0ODcsIDI0ODUsIDE3NDgsIDgzNiwgODM0LCA4MzIsIDgzMCxcbiAgICAgICAgMjQ5NCwgODI3LCAyNDkyLCA4NDMsIDg0MSwgODM5LCA4NDUsIDE3NjUsIDE3NjMsIDI3MDEsIDI2NzYsIDI2NzQsIDI2NTMsIDI2NDgsIDI2NTYsIDI2MzQsIDI2MzMsIDI2MzEsIDI2MjksXG4gICAgICAgIDE4MjEsIDI2MzgsIDI2MzYsIDI3NzAsIDI3NjMsIDI3NjEsIDI3NTAsIDI3NDUsIDI3NTMsIDI3MzYsIDI3MzUsIDI3MzMsIDI3MzEsIDE4NDgsIDI3NDAsIDI3MzgsIDI3ODYsIDI3ODQsIDU5MSxcbiAgICAgICAgNTg4LCA1NzYsIDU2OSwgNTY2LCAyMjk2LCAxNTkwLCA1MzcsIDUzNCwgNTI2LCAyMjc2LCA1MjIsIDIyNzQsIDU0NSwgNTQyLCA1MzksIDU0OCwgMTU3MiwgMTU3MCwgNDgxLCAyMjQ1LCA0NjYsXG4gICAgICAgIDIyNDIsIDQ2MiwgMjIzOSwgNDkyLCA0ODUsIDQ4MiwgMjI0OSwgNDk2LCA0OTQsIDE1MzQsIDE1MzEsIDE1MjgsIDE1MzgsIDQxMywgMjE5NiwgNDA2LCAyMTkxLCAyMTg4LCA0MjUsIDQxOSxcbiAgICAgICAgMjIwMiwgNDE1LCAyMTk5LCA0MzIsIDQzMCwgNDI3LCAxNDcyLCAxNDY3LCAxNDY0LCA0MzMsIDE0NzYsIDE0NzQsIDM2OCwgMzY3LCAyMTYwLCAzNjUsIDIxNTksIDM2MiwgMjE1NywgMjE1NSxcbiAgICAgICAgMjE1MiwgMzc4LCAzNzcsIDM3NSwgMjE2NiwgMzcyLCAyMTY1LCAzNjksIDIxNjIsIDM4MywgMzgxLCAzNzksIDIxNjgsIDE0MTksIDE0MTgsIDE0MTYsIDE0MTQsIDM4NSwgMTQxMSwgMzg0LFxuICAgICAgICAxNDIzLCAxNDIyLCAxNDIwLCAxNDI0LCAyNDYxLCA4MDIsIDI0NDEsIDI0MzksIDc5MCwgNzg2LCA3ODMsIDc5NCwgMjQwOSwgMjQwNiwgMjQwMywgNzUwLCA3NDIsIDczOCwgMjQxNCwgNzU2LFxuICAgICAgICA3NTMsIDE3MjAsIDIzNjcsIDIzNjUsIDIzNjIsIDIzNTksIDE2NjMsIDY5MywgNjkxLCA2ODQsIDIzNzMsIDY4MCwgMjM3MCwgNzAyLCA2OTksIDY5NiwgNzA0LCAxNjkwLCAxNjg3LCAyMzM3LFxuICAgICAgICAyMzM2LCAyMzM0LCAyMzMyLCAxNjI0LCAyMzI5LCAxNjIyLCA2NDAsIDYzNywgMjM0NCwgNjM0LCAyMzQyLCA2MzAsIDIzNDAsIDY1MCwgNjQ4LCA2NDUsIDIzNDYsIDY1NSwgNjUzLCAxNjUzLFxuICAgICAgICAxNjUxLCAxNjQ5LCAxNjU1LCAyNjEyLCAyNTk3LCAyNTk1LCAyNTcxLCAyNTY4LCAyNTY1LCAyNTc2LCAyNTM0LCAyNTI5LCAyNTI2LCAxNzg3LCAyNTQwLCAyNTM3LCA5MDcsIDkwNCwgOTAwLFxuICAgICAgICA5MTAsIDI1MDMsIDI1MDIsIDI1MDAsIDI0OTgsIDE3NjgsIDI0OTUsIDE3NjcsIDI1MTAsIDI1MDgsIDI1MDYsIDg2OSwgODY2LCA4NjMsIDI1MTMsIDg3NiwgODc0LCAxNzgyLCAyNzIwLCAyNzEzLFxuICAgICAgICAyNzExLCAyNjk3LCAyNjk0LCAyNjkxLCAyNzAyLCAyNjcyLCAyNjcwLCAyNjY0LCAxODI4LCAyNjc4LCAyNjc1LCAyNjQ3LCAyNjQ2LCAyNjQ0LCAyNjQyLCAxODIzLCAyNjM5LCAxODIyLCAyNjU0LFxuICAgICAgICAyNjUyLCAyNjUwLCAyNjU3LCAyNzcxLCAxODU1LCAyNzY1LCAyNzYyLCAxODUwLCAxODQ5LCAyNzUxLCAyNzQ5LCAyNzQ3LCAyNzU0LCAzNTMsIDIxNDgsIDM0NCwgMzQyLCAzMzYsIDIxNDIsXG4gICAgICAgIDMzMiwgMjE0MCwgMzQ1LCAxMzc1LCAxMzczLCAzMDYsIDIxMzAsIDI5OSwgMjEyOCwgMjk1LCAyMTI1LCAzMTksIDMxNCwgMzExLCAyMTMyLCAxMzU0LCAxMzUyLCAxMzQ5LCAxMzU2LCAyNjIsXG4gICAgICAgIDI1NywgMjEwMSwgMjUzLCAyMDk2LCAyMDkzLCAyNzQsIDI3MywgMjY3LCAyMTA3LCAyNjMsIDIxMDQsIDI4MCwgMjc4LCAyNzUsIDEzMTYsIDEzMTEsIDEzMDgsIDEzMjAsIDEzMTgsIDIwNTIsXG4gICAgICAgIDIwMiwgMjA1MCwgMjA0NCwgMjA0MCwgMjE5LCAyMDYzLCAyMTIsIDIwNjAsIDIwOCwgMjA1NSwgMjI0LCAyMjEsIDIwNjYsIDEyNjAsIDEyNTgsIDEyNTIsIDIzMSwgMTI0OCwgMjI5LCAxMjY2LFxuICAgICAgICAxMjY0LCAxMjYxLCAxMjY4LCAxNTUsIDE5OTgsIDE1MywgMTk5NiwgMTk5NCwgMTk5MSwgMTk4OCwgMTY1LCAxNjQsIDIwMDcsIDE2MiwgMjAwNiwgMTU5LCAyMDAzLCAyMDAwLCAxNzIsIDE3MSxcbiAgICAgICAgMTY5LCAyMDEyLCAxNjYsIDIwMTAsIDExODYsIDExODQsIDExODIsIDExNzksIDE3NSwgMTE3NiwgMTczLCAxMTkyLCAxMTkxLCAxMTg5LCAxMTg3LCAxNzYsIDExOTQsIDExOTMsIDIzMTMsXG4gICAgICAgIDIzMDcsIDIzMDUsIDU5MiwgNTg5LCAyMjk0LCAyMjkyLCAyMjg5LCA1NzgsIDU3MiwgNTY4LCAyMjk3LCA1ODAsIDE1OTEsIDIyNzIsIDIyNjcsIDIyNjQsIDE1NDcsIDUzOCwgNTM2LCA1MjksXG4gICAgICAgIDIyNzgsIDUyNSwgMjI3NSwgNTQ3LCA1NDQsIDU0MSwgMTU3NCwgMTU3MSwgMjIzNywgMjIzNSwgMjIyOSwgMTQ5MywgMjIyNSwgMTQ4OSwgNDc4LCAyMjQ3LCA0NzAsIDIyNDQsIDQ2NSwgMjI0MSxcbiAgICAgICAgNDkzLCA0ODgsIDQ4NCwgMjI1MCwgNDk4LCA0OTUsIDE1MzYsIDE1MzMsIDE1MzAsIDE1MzksIDIxODcsIDIxODYsIDIxODQsIDIxODIsIDE0MzIsIDIxNzksIDE0MzAsIDIxNzYsIDE0MjcsIDQxNCxcbiAgICAgICAgNDEyLCAyMTk3LCA0MDksIDIxOTUsIDQwNSwgMjE5MywgMjE5MCwgNDI2LCA0MjQsIDQyMSwgMjIwMywgNDE4LCAyMjAxLCA0MzEsIDQyOSwgMTQ3MywgMTQ3MSwgMTQ2OSwgMTQ2NiwgNDM0LFxuICAgICAgICAxNDc3LCAxNDc1LCAyNDc4LCAyNDcyLCAyNDcwLCAyNDU5LCAyNDU3LCAyNDU0LCAyNDYyLCA4MDMsIDI0MzcsIDI0MzIsIDI0MjksIDE3MjYsIDI0NDMsIDI0NDAsIDc5MiwgNzg5LCA3ODUsXG4gICAgICAgIDI0MDEsIDIzOTksIDIzOTMsIDE3MDIsIDIzODksIDE2OTksIDI0MTEsIDI0MDgsIDI0MDUsIDc0NSwgNzQxLCAyNDE1LCA3NTgsIDc1NSwgMTcyMSwgMjM1OCwgMjM1NywgMjM1NSwgMjM1MyxcbiAgICAgICAgMTY2MSwgMjM1MCwgMTY2MCwgMjM0NywgMTY1NywgMjM2OCwgMjM2NiwgMjM2NCwgMjM2MSwgMTY2NiwgNjkwLCA2ODcsIDIzNzQsIDY4MywgMjM3MiwgNzAxLCA2OTgsIDcwNSwgMTY5MSwgMTY4OSxcbiAgICAgICAgMjYxOSwgMjYxNywgMjYxMCwgMjYwOCwgMjYwNSwgMjYxMywgMjU5MywgMjU4OCwgMjU4NSwgMTgwMywgMjU5OSwgMjU5NiwgMjU2MywgMjU2MSwgMjU1NSwgMTc5NywgMjU1MSwgMTc5NSwgMjU3MyxcbiAgICAgICAgMjU3MCwgMjU2NywgMjU3NywgMjUyNSwgMjUyNCwgMjUyMiwgMjUyMCwgMTc4NiwgMjUxNywgMTc4NSwgMjUxNCwgMTc4MywgMjUzNSwgMjUzMywgMjUzMSwgMjUyOCwgMTc4OCwgMjU0MSwgMjUzOSxcbiAgICAgICAgOTA2LCA5MDMsIDkxMSwgMjcyMSwgMTg0NCwgMjcxNSwgMjcxMiwgMTgzOCwgMTgzNiwgMjY5OSwgMjY5NiwgMjY5MywgMjcwMywgMTgyNywgMTgyNiwgMTgyNCwgMjY3MywgMjY3MSwgMjY2OSxcbiAgICAgICAgMjY2NiwgMTgyOSwgMjY3OSwgMjY3NywgMTg1OCwgMTg1NywgMjc3MiwgMTg1NCwgMTg1MywgMTg1MSwgMTg1NiwgMjc2NiwgMjc2NCwgMTQzLCAxOTg3LCAxMzksIDE5ODYsIDEzNSwgMTMzLFxuICAgICAgICAxMzEsIDE5ODQsIDEyOCwgMTk4MywgMTI1LCAxOTgxLCAxMzgsIDEzNywgMTM2LCAxOTg1LCAxMTMzLCAxMTMyLCAxMTMwLCAxMTIsIDExMCwgMTk3NCwgMTA3LCAxOTczLCAxMDQsIDE5NzEsXG4gICAgICAgIDE5NjksIDEyMiwgMTIxLCAxMTksIDExNywgMTk3NywgMTE0LCAxOTc2LCAxMjQsIDExMTUsIDExMTQsIDExMTIsIDExMTAsIDExMTcsIDExMTYsIDg0LCA4MywgMTk1MywgODEsIDE5NTIsIDc4LFxuICAgICAgICAxOTUwLCAxOTQ4LCAxOTQ1LCA5NCwgOTMsIDkxLCAxOTU5LCA4OCwgMTk1OCwgODUsIDE5NTUsIDk5LCA5NywgOTUsIDE5NjEsIDEwODYsIDEwODUsIDEwODMsIDEwODEsIDEwNzgsIDEwMCxcbiAgICAgICAgMTA5MCwgMTA4OSwgMTA4NywgMTA5MSwgNDksIDQ3LCAxOTE3LCA0NCwgMTkxNSwgMTkxMywgMTkxMCwgMTkwNywgNTksIDE5MjYsIDU2LCAxOTI1LCA1MywgMTkyMiwgMTkxOSwgNjYsIDY0LFxuICAgICAgICAxOTMxLCA2MSwgMTkyOSwgMTA0MiwgMTA0MCwgMTAzOCwgNzEsIDEwMzUsIDcwLCAxMDMyLCA2OCwgMTA0OCwgMTA0NywgMTA0NSwgMTA0MywgMTA1MCwgMTA0OSwgMTIsIDEwLCAxODY5LCAxODY3LFxuICAgICAgICAxODY0LCAxODYxLCAyMSwgMTg4MCwgMTksIDE4NzcsIDE4NzQsIDE4NzEsIDI4LCAxODg4LCAyNSwgMTg4NiwgMjIsIDE4ODMsIDk4MiwgOTgwLCA5NzcsIDk3NCwgMzIsIDMwLCA5OTEsIDk4OSxcbiAgICAgICAgOTg3LCA5ODQsIDM0LCA5OTUsIDk5NCwgOTkyLCAyMTUxLCAyMTUwLCAyMTQ3LCAyMTQ2LCAyMTQ0LCAzNTYsIDM1NSwgMzU0LCAyMTQ5LCAyMTM5LCAyMTM4LCAyMTM2LCAyMTM0LCAxMzU5LFxuICAgICAgICAzNDMsIDM0MSwgMzM4LCAyMTQzLCAzMzUsIDIxNDEsIDM0OCwgMzQ3LCAzNDYsIDEzNzYsIDEzNzQsIDIxMjQsIDIxMjMsIDIxMjEsIDIxMTksIDEzMjYsIDIxMTYsIDEzMjQsIDMxMCwgMzA4LFxuICAgICAgICAzMDUsIDIxMzEsIDMwMiwgMjEyOSwgMjk4LCAyMTI3LCAzMjAsIDMxOCwgMzE2LCAzMTMsIDIxMzMsIDMyMiwgMzIxLCAxMzU1LCAxMzUzLCAxMzUxLCAxMzU3LCAyMDkyLCAyMDkxLCAyMDg5LFxuICAgICAgICAyMDg3LCAxMjc2LCAyMDg0LCAxMjc0LCAyMDgxLCAxMjcxLCAyNTksIDIxMDIsIDI1NiwgMjEwMCwgMjUyLCAyMDk4LCAyMDk1LCAyNzIsIDI2OSwgMjEwOCwgMjY2LCAyMTA2LCAyODEsIDI3OSxcbiAgICAgICAgMjc3LCAxMzE3LCAxMzE1LCAxMzEzLCAxMzEwLCAyODIsIDEzMjEsIDEzMTksIDIwMzksIDIwMzcsIDIwMzUsIDIwMzIsIDEyMDMsIDIwMjksIDEyMDAsIDExOTcsIDIwNywgMjA1MywgMjA1LFxuICAgICAgICAyMDUxLCAyMDEsIDIwNDksIDIwNDYsIDIwNDMsIDIyMCwgMjE4LCAyMDY0LCAyMTUsIDIwNjIsIDIxMSwgMjA1OSwgMjI4LCAyMjYsIDIyMywgMjA2OSwgMTI1OSwgMTI1NywgMTI1NCwgMjMyLFxuICAgICAgICAxMjUxLCAyMzAsIDEyNjcsIDEyNjUsIDEyNjMsIDIzMTYsIDIzMTUsIDIzMTIsIDIzMTEsIDIzMDksIDIzMTQsIDIzMDQsIDIzMDMsIDIzMDEsIDIyOTksIDE1OTMsIDIzMDgsIDIzMDYsIDU5MCxcbiAgICAgICAgMjI4OCwgMjI4NywgMjI4NSwgMjI4MywgMTU3OCwgMjI4MCwgMTU3NywgMjI5NSwgMjI5MywgMjI5MSwgNTc5LCA1NzcsIDU3NCwgNTcxLCAyMjk4LCA1ODIsIDU4MSwgMTU5MiwgMjI2MywgMjI2MixcbiAgICAgICAgMjI2MCwgMjI1OCwgMTU0NSwgMjI1NSwgMTU0NCwgMjI1MiwgMTU0MSwgMjI3MywgMjI3MSwgMjI2OSwgMjI2NiwgMTU1MCwgNTM1LCA1MzIsIDIyNzksIDUyOCwgMjI3NywgNTQ2LCA1NDMsIDU0OSxcbiAgICAgICAgMTU3NSwgMTU3MywgMjIyNCwgMjIyMiwgMjIyMCwgMTQ4NiwgMjIxNywgMTQ4NSwgMjIxNCwgMTQ4MiwgMTQ3OSwgMjIzOCwgMjIzNiwgMjIzNCwgMjIzMSwgMTQ5NiwgMjIyOCwgMTQ5MiwgNDgwLFxuICAgICAgICA0NzcsIDIyNDgsIDQ3MywgMjI0NiwgNDY5LCAyMjQzLCA0OTAsIDQ4NywgMjI1MSwgNDk3LCAxNTM3LCAxNTM1LCAxNTMyLCAyNDc3LCAyNDc2LCAyNDc0LCAyNDc5LCAyNDY5LCAyNDY4LCAyNDY2LFxuICAgICAgICAyNDY0LCAxNzMwLCAyNDczLCAyNDcxLCAyNDUzLCAyNDUyLCAyNDUwLCAyNDQ4LCAxNzI5LCAyNDQ1LCAxNzI4LCAyNDYwLCAyNDU4LCAyNDU2LCAyNDYzLCA4MDUsIDgwNCwgMjQyOCwgMjQyNyxcbiAgICAgICAgMjQyNSwgMjQyMywgMTcyNSwgMjQyMCwgMTcyNCwgMjQxNywgMTcyMiwgMjQzOCwgMjQzNiwgMjQzNCwgMjQzMSwgMTcyNywgMjQ0NCwgMjQ0MiwgNzkzLCA3OTEsIDc4OCwgNzk1LCAyMzg4LFxuICAgICAgICAyMzg2LCAyMzg0LCAxNjk3LCAyMzgxLCAxNjk2LCAyMzc4LCAxNjk0LCAxNjkyLCAyNDAyLCAyNDAwLCAyMzk4LCAyMzk1LCAxNzAzLCAyMzkyLCAxNzAxLCAyNDEyLCAyNDEwLCAyNDA3LCA3NTEsXG4gICAgICAgIDc0OCwgNzQ0LCAyNDE2LCA3NTksIDc1NywgMTgwNywgMjYyMCwgMjYxOCwgMTgwNiwgMTgwNSwgMjYxMSwgMjYwOSwgMjYwNywgMjYxNCwgMTgwMiwgMTgwMSwgMTc5OSwgMjU5NCwgMjU5MixcbiAgICAgICAgMjU5MCwgMjU4NywgMTgwNCwgMjYwMCwgMjU5OCwgMTc5NCwgMTc5MywgMTc5MSwgMTc4OSwgMjU2NCwgMjU2MiwgMjU2MCwgMjU1NywgMTc5OCwgMjU1NCwgMTc5NiwgMjU3NCwgMjU3MiwgMjU2OSxcbiAgICAgICAgMjU3OCwgMTg0NywgMTg0NiwgMjcyMiwgMTg0MywgMTg0MiwgMTg0MCwgMTg0NSwgMjcxNiwgMjcxNCwgMTgzNSwgMTgzNCwgMTgzMiwgMTgzMCwgMTgzOSwgMTgzNywgMjcwMCwgMjY5OCwgMjY5NSxcbiAgICAgICAgMjcwNCwgMTgxNywgMTgxMSwgMTgxMCwgODk3LCA4NjIsIDE3NzcsIDgyOSwgODI2LCA4MzgsIDE3NjAsIDE3NTgsIDgwOCwgMjQ4MSwgMTc0MSwgMTc0MCwgMTczOCwgMTc0MywgMjYyNCwgMTgxOCxcbiAgICAgICAgMjcyNiwgMjc3NiwgNzgyLCA3NDAsIDczNywgMTcxNSwgNjg2LCA2NzksIDY5NSwgMTY4MiwgMTY4MCwgNjM5LCA2MjgsIDIzMzksIDY0NywgNjQ0LCAxNjQ1LCAxNjQzLCAxNjQwLCAxNjQ4LFxuICAgICAgICA2MDIsIDYwMCwgNTk3LCA1OTUsIDIzMjAsIDU5MywgMjMxOCwgNjA5LCA2MDcsIDYwNCwgMTYxMSwgMTYxMCwgMTYwOCwgMTYwNiwgNjEzLCAxNjE1LCAxNjEzLCAyMzI4LCA5MjYsIDkyNCwgODkyLFxuICAgICAgICA4ODYsIDg5OSwgODU3LCA4NTAsIDI1MDUsIDE3NzgsIDgyNCwgODIzLCA4MjEsIDgxOSwgMjQ4OCwgODE4LCAyNDg2LCA4MzMsIDgzMSwgODI4LCA4NDAsIDE3NjEsIDE3NTksIDI2NDksIDI2MzIsXG4gICAgICAgIDI2MzAsIDI3NDYsIDI3MzQsIDI3MzIsIDI3ODIsIDI3ODEsIDU3MCwgNTY3LCAxNTg3LCA1MzEsIDUyNywgNTIzLCA1NDAsIDE1NjYsIDE1NjQsIDQ3NiwgNDY3LCA0NjMsIDIyNDAsIDQ4NixcbiAgICAgICAgNDgzLCAxNTI0LCAxNTIxLCAxNTE4LCAxNTI5LCA0MTEsIDQwMywgMjE5MiwgMzk5LCAyMTg5LCA0MjMsIDQxNiwgMTQ2MiwgMTQ1NywgMTQ1NCwgNDI4LCAxNDY4LCAxNDY1LCAyMjEwLCAzNjYsXG4gICAgICAgIDM2MywgMjE1OCwgMzYwLCAyMTU2LCAzNTcsIDIxNTMsIDM3NiwgMzczLCAzNzAsIDIxNjMsIDE0MTAsIDE0MDksIDE0MDcsIDE0MDUsIDM4MiwgMTQwMiwgMzgwLCAxNDE3LCAxNDE1LCAxNDEyLFxuICAgICAgICAxNDIxLCAyMTc1LCAyMTc0LCA3NzcsIDc3NCwgNzcxLCA3ODQsIDczMiwgNzI1LCA3MjIsIDI0MDQsIDc0MywgMTcxNiwgNjc2LCA2NzQsIDY2OCwgMjM2MywgNjY1LCAyMzYwLCA2ODUsIDE2ODQsXG4gICAgICAgIDE2ODEsIDYyNiwgNjI0LCA2MjIsIDIzMzUsIDYyMCwgMjMzMywgNjE3LCAyMzMwLCA2NDEsIDYzNSwgNjQ5LCAxNjQ2LCAxNjQ0LCAxNjQyLCAyNTY2LCA5MjgsIDkyNSwgMjUzMCwgMjUyNyxcbiAgICAgICAgODk0LCA4OTEsIDg4OCwgMjUwMSwgMjQ5OSwgMjQ5NiwgODU4LCA4NTYsIDg1NCwgODUxLCAxNzc5LCAyNjkyLCAyNjY4LCAyNjY1LCAyNjQ1LCAyNjQzLCAyNjQwLCAyNjUxLCAyNzY4LCAyNzU5LFxuICAgICAgICAyNzU3LCAyNzQ0LCAyNzQzLCAyNzQxLCAyNzQ4LCAzNTIsIDEzODIsIDM0MCwgMzM3LCAzMzMsIDEzNzEsIDEzNjksIDMwNywgMzAwLCAyOTYsIDIxMjYsIDMxNSwgMzEyLCAxMzQ3LCAxMzQyLFxuICAgICAgICAxMzUwLCAyNjEsIDI1OCwgMjUwLCAyMDk3LCAyNDYsIDIwOTQsIDI3MSwgMjY4LCAyNjQsIDEzMDYsIDEzMDEsIDEyOTgsIDI3NiwgMTMxMiwgMTMwOSwgMjExNSwgMjAzLCAyMDQ4LCAxOTUsXG4gICAgICAgIDIwNDUsIDE5MSwgMjA0MSwgMjEzLCAyMDksIDIwNTYsIDEyNDYsIDEyNDQsIDEyMzgsIDIyNSwgMTIzNCwgMjIyLCAxMjU2LCAxMjUzLCAxMjQ5LCAxMjYyLCAyMDgwLCAyMDc5LCAxNTQsIDE5OTcsXG4gICAgICAgIDE1MCwgMTk5NSwgMTQ3LCAxOTkyLCAxOTg5LCAxNjMsIDE2MCwgMjAwNCwgMTU2LCAyMDAxLCAxMTc1LCAxMTc0LCAxMTcyLCAxMTcwLCAxMTY3LCAxNzAsIDExNjQsIDE2NywgMTE4NSwgMTE4MyxcbiAgICAgICAgMTE4MCwgMTE3NywgMTc0LCAxMTkwLCAxMTg4LCAyMDI1LCAyMDI0LCAyMDIyLCA1ODcsIDU4NiwgNTY0LCA1NTksIDU1NiwgMjI5MCwgNTczLCAxNTg4LCA1MjAsIDUxOCwgNTEyLCAyMjY4LFxuICAgICAgICA1MDgsIDIyNjUsIDUzMCwgMTU2OCwgMTU2NSwgNDYxLCA0NTcsIDIyMzMsIDQ1MCwgMjIzMCwgNDQ2LCAyMjI2LCA0NzksIDQ3MSwgNDg5LCAxNTI2LCAxNTIzLCAxNTIwLCAzOTcsIDM5NSxcbiAgICAgICAgMjE4NSwgMzkyLCAyMTgzLCAzODksIDIxODAsIDIxNzcsIDQxMCwgMjE5NCwgNDAyLCA0MjIsIDE0NjMsIDE0NjEsIDE0NTksIDE0NTYsIDE0NzAsIDI0NTUsIDc5OSwgMjQzMywgMjQzMCwgNzc5LFxuICAgICAgICA3NzYsIDc3MywgMjM5NywgMjM5NCwgMjM5MCwgNzM0LCA3MjgsIDcyNCwgNzQ2LCAxNzE3LCAyMzU2LCAyMzU0LCAyMzUxLCAyMzQ4LCAxNjU4LCA2NzcsIDY3NSwgNjczLCA2NzAsIDY2NywgNjg4LFxuICAgICAgICAxNjg1LCAxNjgzLCAyNjA2LCAyNTg5LCAyNTg2LCAyNTU5LCAyNTU2LCAyNTUyLCA5MjcsIDI1MjMsIDI1MjEsIDI1MTgsIDI1MTUsIDE3ODQsIDI1MzIsIDg5NSwgODkzLCA4OTAsIDI3MTgsXG4gICAgICAgIDI3MDksIDI3MDcsIDI2ODksIDI2ODcsIDI2ODQsIDI2NjMsIDI2NjIsIDI2NjAsIDI2NTgsIDE4MjUsIDI2NjcsIDI3NjksIDE4NTIsIDI3NjAsIDI3NTgsIDE0MiwgMTQxLCAxMTM5LCAxMTM4LFxuICAgICAgICAxMzQsIDEzMiwgMTI5LCAxMjYsIDE5ODIsIDExMjksIDExMjgsIDExMjYsIDExMzEsIDExMywgMTExLCAxMDgsIDEwNSwgMTk3MiwgMTAxLCAxOTcwLCAxMjAsIDExOCwgMTE1LCAxMTA5LCAxMTA4LFxuICAgICAgICAxMTA2LCAxMTA0LCAxMjMsIDExMTMsIDExMTEsIDgyLCA3OSwgMTk1MSwgNzUsIDE5NDksIDcyLCAxOTQ2LCA5MiwgODksIDg2LCAxOTU2LCAxMDc3LCAxMDc2LCAxMDc0LCAxMDcyLCA5OCxcbiAgICAgICAgMTA2OSwgOTYsIDEwODQsIDEwODIsIDEwNzksIDEwODgsIDE5NjgsIDE5NjcsIDQ4LCA0NSwgMTkxNiwgNDIsIDE5MTQsIDM5LCAxOTExLCAxOTA4LCA2MCwgNTcsIDU0LCAxOTIzLCA1MCwgMTkyMCxcbiAgICAgICAgMTAzMSwgMTAzMCwgMTAyOCwgMTAyNiwgNjcsIDEwMjMsIDY1LCAxMDIwLCA2MiwgMTA0MSwgMTAzOSwgMTAzNiwgMTAzMywgNjksIDEwNDYsIDEwNDQsIDE5NDQsIDE5NDMsIDE5NDEsIDExLCA5LFxuICAgICAgICAxODY4LCA3LCAxODY1LCAxODYyLCAxODU5LCAyMCwgMTg3OCwgMTYsIDE4NzUsIDEzLCAxODcyLCA5NzAsIDk2OCwgOTY2LCA5NjMsIDI5LCA5NjAsIDI2LCAyMywgOTgzLCA5ODEsIDk3OCwgOTc1LFxuICAgICAgICAzMywgOTcxLCAzMSwgOTkwLCA5ODgsIDk4NSwgMTkwNiwgMTkwNCwgMTkwMiwgOTkzLCAzNTEsIDIxNDUsIDEzODMsIDMzMSwgMzMwLCAzMjgsIDMyNiwgMjEzNywgMzIzLCAyMTM1LCAzMzksXG4gICAgICAgIDEzNzIsIDEzNzAsIDI5NCwgMjkzLCAyOTEsIDI4OSwgMjEyMiwgMjg2LCAyMTIwLCAyODMsIDIxMTcsIDMwOSwgMzAzLCAzMTcsIDEzNDgsIDEzNDYsIDEzNDQsIDI0NSwgMjQ0LCAyNDIsIDIwOTAsXG4gICAgICAgIDIzOSwgMjA4OCwgMjM2LCAyMDg1LCAyMDgyLCAyNjAsIDIwOTksIDI0OSwgMjcwLCAxMzA3LCAxMzA1LCAxMzAzLCAxMzAwLCAxMzE0LCAxODksIDIwMzgsIDE4NiwgMjAzNiwgMTgzLCAyMDMzLFxuICAgICAgICAyMDMwLCAyMDI2LCAyMDYsIDE5OCwgMjA0NywgMTk0LCAyMTYsIDEyNDcsIDEyNDUsIDEyNDMsIDEyNDAsIDIyNywgMTIzNywgMTI1NSwgMjMxMCwgMjMwMiwgMjMwMCwgMjI4NiwgMjI4NCxcbiAgICAgICAgMjI4MSwgNTY1LCA1NjMsIDU2MSwgNTU4LCA1NzUsIDE1ODksIDIyNjEsIDIyNTksIDIyNTYsIDIyNTMsIDE1NDIsIDUyMSwgNTE5LCA1MTcsIDUxNCwgMjI3MCwgNTExLCA1MzMsIDE1NjksXG4gICAgICAgIDE1NjcsIDIyMjMsIDIyMjEsIDIyMTgsIDIyMTUsIDE0ODMsIDIyMTEsIDE0ODAsIDQ1OSwgNDU2LCA0NTMsIDIyMzIsIDQ0OSwgNDc0LCA0OTEsIDE1MjcsIDE1MjUsIDE1MjIsIDI0NzUsIDI0NjcsXG4gICAgICAgIDI0NjUsIDI0NTEsIDI0NDksIDI0NDYsIDgwMSwgODAwLCAyNDI2LCAyNDI0LCAyNDIxLCAyNDE4LCAxNzIzLCAyNDM1LCA3ODAsIDc3OCwgNzc1LCAyMzg3LCAyMzg1LCAyMzgyLCAyMzc5LFxuICAgICAgICAxNjk1LCAyMzc1LCAxNjkzLCAyMzk2LCA3MzUsIDczMywgNzMwLCA3MjcsIDc0OSwgMTcxOCwgMjYxNiwgMjYxNSwgMjYwNCwgMjYwMywgMjYwMSwgMjU4NCwgMjU4MywgMjU4MSwgMjU3OSxcbiAgICAgICAgMTgwMCwgMjU5MSwgMjU1MCwgMjU0OSwgMjU0NywgMjU0NSwgMTc5MiwgMjU0MiwgMTc5MCwgMjU1OCwgOTI5LCAyNzE5LCAxODQxLCAyNzEwLCAyNzA4LCAxODMzLCAxODMxLCAyNjkwLCAyNjg4LFxuICAgICAgICAyNjg2LCAxODE1LCAxODA5LCAxODA4LCAxNzc0LCAxNzU2LCAxNzU0LCAxNzM3LCAxNzM2LCAxNzM0LCAxNzM5LCAxODE2LCAxNzExLCAxNjc2LCAxNjc0LCA2MzMsIDYyOSwgMTYzOCwgMTYzNixcbiAgICAgICAgMTYzMywgMTY0MSwgNTk4LCAxNjA1LCAxNjA0LCAxNjAyLCAxNjAwLCA2MDUsIDE2MDksIDE2MDcsIDIzMjcsIDg4NywgODUzLCAxNzc1LCA4MjIsIDgyMCwgMTc1NywgMTc1NSwgMTU4NCwgNTI0LFxuICAgICAgICAxNTYwLCAxNTU4LCA0NjgsIDQ2NCwgMTUxNCwgMTUxMSwgMTUwOCwgMTUxOSwgNDA4LCA0MDQsIDQwMCwgMTQ1MiwgMTQ0NywgMTQ0NCwgNDE3LCAxNDU4LCAxNDU1LCAyMjA4LCAzNjQsIDM2MSxcbiAgICAgICAgMzU4LCAyMTU0LCAxNDAxLCAxNDAwLCAxMzk4LCAxMzk2LCAzNzQsIDEzOTMsIDM3MSwgMTQwOCwgMTQwNiwgMTQwMywgMTQxMywgMjE3MywgMjE3MiwgNzcyLCA3MjYsIDcyMywgMTcxMiwgNjcyLFxuICAgICAgICA2NjksIDY2NiwgNjgyLCAxNjc4LCAxNjc1LCA2MjUsIDYyMywgNjIxLCA2MTgsIDIzMzEsIDYzNiwgNjMyLCAxNjM5LCAxNjM3LCAxNjM1LCA5MjAsIDkxOCwgODg0LCA4ODAsIDg4OSwgODQ5LFxuICAgICAgICA4NDgsIDg0NywgODQ2LCAyNDk3LCA4NTUsIDg1MiwgMTc3NiwgMjY0MSwgMjc0MiwgMjc4NywgMTM4MCwgMzM0LCAxMzY3LCAxMzY1LCAzMDEsIDI5NywgMTM0MCwgMTMzOCwgMTMzNSwgMTM0MyxcbiAgICAgICAgMjU1LCAyNTEsIDI0NywgMTI5NiwgMTI5MSwgMTI4OCwgMjY1LCAxMzAyLCAxMjk5LCAyMTEzLCAyMDQsIDE5NiwgMTkyLCAyMDQyLCAxMjMyLCAxMjMwLCAxMjI0LCAyMTQsIDEyMjAsIDIxMCxcbiAgICAgICAgMTI0MiwgMTIzOSwgMTIzNSwgMTI1MCwgMjA3NywgMjA3NSwgMTUxLCAxNDgsIDE5OTMsIDE0NCwgMTk5MCwgMTE2MywgMTE2MiwgMTE2MCwgMTE1OCwgMTE1NSwgMTYxLCAxMTUyLCAxNTcsXG4gICAgICAgIDExNzMsIDExNzEsIDExNjgsIDExNjUsIDE2OCwgMTE4MSwgMTE3OCwgMjAyMSwgMjAyMCwgMjAxOCwgMjAyMywgNTg1LCA1NjAsIDU1NywgMTU4NSwgNTE2LCA1MDksIDE1NjIsIDE1NTksIDQ1OCxcbiAgICAgICAgNDQ3LCAyMjI3LCA0NzIsIDE1MTYsIDE1MTMsIDE1MTAsIDM5OCwgMzk2LCAzOTMsIDM5MCwgMjE4MSwgMzg2LCAyMTc4LCA0MDcsIDE0NTMsIDE0NTEsIDE0NDksIDE0NDYsIDQyMCwgMTQ2MCxcbiAgICAgICAgMjIwOSwgNzY5LCA3NjQsIDcyMCwgNzEyLCAyMzkxLCA3MjksIDE3MTMsIDY2NCwgNjYzLCA2NjEsIDY1OSwgMjM1MiwgNjU2LCAyMzQ5LCA2NzEsIDE2NzksIDE2NzcsIDI1NTMsIDkyMiwgOTE5LFxuICAgICAgICAyNTE5LCAyNTE2LCA4ODUsIDg4MywgODgxLCAyNjg1LCAyNjYxLCAyNjU5LCAyNzY3LCAyNzU2LCAyNzU1LCAxNDAsIDExMzcsIDExMzYsIDEzMCwgMTI3LCAxMTI1LCAxMTI0LCAxMTIyLCAxMTI3LFxuICAgICAgICAxMDksIDEwNiwgMTAyLCAxMTAzLCAxMTAyLCAxMTAwLCAxMDk4LCAxMTYsIDExMDcsIDExMDUsIDE5ODAsIDgwLCA3NiwgNzMsIDE5NDcsIDEwNjgsIDEwNjcsIDEwNjUsIDEwNjMsIDkwLCAxMDYwLFxuICAgICAgICA4NywgMTA3NSwgMTA3MywgMTA3MCwgMTA4MCwgMTk2NiwgMTk2NSwgNDYsIDQzLCA0MCwgMTkxMiwgMzYsIDE5MDksIDEwMTksIDEwMTgsIDEwMTYsIDEwMTQsIDU4LCAxMDExLCA1NSwgMTAwOCxcbiAgICAgICAgNTEsIDEwMjksIDEwMjcsIDEwMjQsIDEwMjEsIDYzLCAxMDM3LCAxMDM0LCAxOTQwLCAxOTM5LCAxOTM3LCAxOTQyLCA4LCAxODY2LCA0LCAxODYzLCAxLCAxODYwLCA5NTYsIDk1NCwgOTUyLFxuICAgICAgICA5NDksIDk0NiwgMTcsIDE0LCA5NjksIDk2NywgOTY0LCA5NjEsIDI3LCA5NTcsIDI0LCA5NzksIDk3NiwgOTcyLCAxOTAxLCAxOTAwLCAxODk4LCAxODk2LCA5ODYsIDE5MDUsIDE5MDMsIDM1MCxcbiAgICAgICAgMzQ5LCAxMzgxLCAzMjksIDMyNywgMzI0LCAxMzY4LCAxMzY2LCAyOTIsIDI5MCwgMjg3LCAyODQsIDIxMTgsIDMwNCwgMTM0MSwgMTMzOSwgMTMzNywgMTM0NSwgMjQzLCAyNDAsIDIzNywgMjA4NixcbiAgICAgICAgMjMzLCAyMDgzLCAyNTQsIDEyOTcsIDEyOTUsIDEyOTMsIDEyOTAsIDEzMDQsIDIxMTQsIDE5MCwgMTg3LCAxODQsIDIwMzQsIDE4MCwgMjAzMSwgMTc3LCAyMDI3LCAxOTksIDEyMzMsIDEyMzEsXG4gICAgICAgIDEyMjksIDEyMjYsIDIxNywgMTIyMywgMTI0MSwgMjA3OCwgMjA3NiwgNTg0LCA1NTUsIDU1NCwgNTUyLCA1NTAsIDIyODIsIDU2MiwgMTU4NiwgNTA3LCA1MDYsIDUwNCwgNTAyLCAyMjU3LCA0OTksXG4gICAgICAgIDIyNTQsIDUxNSwgMTU2MywgMTU2MSwgNDQ1LCA0NDMsIDQ0MSwgMjIxOSwgNDM4LCAyMjE2LCA0MzUsIDIyMTIsIDQ2MCwgNDU0LCA0NzUsIDE1MTcsIDE1MTUsIDE1MTIsIDI0NDcsIDc5OCxcbiAgICAgICAgNzk3LCAyNDIyLCAyNDE5LCA3NzAsIDc2OCwgNzY2LCAyMzgzLCAyMzgwLCAyMzc2LCA3MjEsIDcxOSwgNzE3LCA3MTQsIDczMSwgMTcxNCwgMjYwMiwgMjU4MiwgMjU4MCwgMjU0OCwgMjU0NixcbiAgICAgICAgMjU0MywgOTIzLCA5MjEsIDI3MTcsIDI3MDYsIDI3MDUsIDI2ODMsIDI2ODIsIDI2ODAsIDE3NzEsIDE3NTIsIDE3NTAsIDE3MzMsIDE3MzIsIDE3MzEsIDE3MzUsIDE4MTQsIDE3MDcsIDE2NzAsXG4gICAgICAgIDE2NjgsIDE2MzEsIDE2MjksIDE2MjYsIDE2MzQsIDE1OTksIDE1OTgsIDE1OTYsIDE1OTQsIDE2MDMsIDE2MDEsIDIzMjYsIDE3NzIsIDE3NTMsIDE3NTEsIDE1ODEsIDE1NTQsIDE1NTIsIDE1MDQsXG4gICAgICAgIDE1MDEsIDE0OTgsIDE1MDksIDE0NDIsIDE0MzcsIDE0MzQsIDQwMSwgMTQ0OCwgMTQ0NSwgMjIwNiwgMTM5MiwgMTM5MSwgMTM4OSwgMTM4NywgMTM4NCwgMzU5LCAxMzk5LCAxMzk3LCAxMzk0LFxuICAgICAgICAxNDA0LCAyMTcxLCAyMTcwLCAxNzA4LCAxNjcyLCAxNjY5LCA2MTksIDE2MzIsIDE2MzAsIDE2MjgsIDE3NzMsIDEzNzgsIDEzNjMsIDEzNjEsIDEzMzMsIDEzMjgsIDEzMzYsIDEyODYsIDEyODEsXG4gICAgICAgIDEyNzgsIDI0OCwgMTI5MiwgMTI4OSwgMjExMSwgMTIxOCwgMTIxNiwgMTIxMCwgMTk3LCAxMjA2LCAxOTMsIDEyMjgsIDEyMjUsIDEyMjEsIDEyMzYsIDIwNzMsIDIwNzEsIDExNTEsIDExNTAsXG4gICAgICAgIDExNDgsIDExNDYsIDE1MiwgMTE0MywgMTQ5LCAxMTQwLCAxNDUsIDExNjEsIDExNTksIDExNTYsIDExNTMsIDE1OCwgMTE2OSwgMTE2NiwgMjAxNywgMjAxNiwgMjAxNCwgMjAxOSwgMTU4MixcbiAgICAgICAgNTEwLCAxNTU2LCAxNTUzLCA0NTIsIDQ0OCwgMTUwNiwgMTUwMCwgMzk0LCAzOTEsIDM4NywgMTQ0MywgMTQ0MSwgMTQzOSwgMTQzNiwgMTQ1MCwgMjIwNywgNzY1LCA3MTYsIDcxMywgMTcwOSxcbiAgICAgICAgNjYyLCA2NjAsIDY1NywgMTY3MywgMTY3MSwgOTE2LCA5MTQsIDg3OSwgODc4LCA4NzcsIDg4MiwgMTEzNSwgMTEzNCwgMTEyMSwgMTEyMCwgMTExOCwgMTEyMywgMTA5NywgMTA5NiwgMTA5NCxcbiAgICAgICAgMTA5MiwgMTAzLCAxMTAxLCAxMDk5LCAxOTc5LCAxMDU5LCAxMDU4LCAxMDU2LCAxMDU0LCA3NywgMTA1MSwgNzQsIDEwNjYsIDEwNjQsIDEwNjEsIDEwNzEsIDE5NjQsIDE5NjMsIDEwMDcsXG4gICAgICAgIDEwMDYsIDEwMDQsIDEwMDIsIDk5OSwgNDEsIDk5NiwgMzcsIDEwMTcsIDEwMTUsIDEwMTIsIDEwMDksIDUyLCAxMDI1LCAxMDIyLCAxOTM2LCAxOTM1LCAxOTMzLCAxOTM4LCA5NDIsIDk0MCxcbiAgICAgICAgOTM4LCA5MzUsIDkzMiwgNSwgMiwgOTU1LCA5NTMsIDk1MCwgOTQ3LCAxOCwgOTQzLCAxNSwgOTY1LCA5NjIsIDk1OCwgMTg5NSwgMTg5NCwgMTg5MiwgMTg5MCwgOTczLCAxODk5LCAxODk3LFxuICAgICAgICAxMzc5LCAzMjUsIDEzNjQsIDEzNjIsIDI4OCwgMjg1LCAxMzM0LCAxMzMyLCAxMzMwLCAyNDEsIDIzOCwgMjM0LCAxMjg3LCAxMjg1LCAxMjgzLCAxMjgwLCAxMjk0LCAyMTEyLCAxODgsIDE4NSxcbiAgICAgICAgMTgxLCAxNzgsIDIwMjgsIDEyMTksIDEyMTcsIDEyMTUsIDEyMTIsIDIwMCwgMTIwOSwgMTIyNywgMjA3NCwgMjA3MiwgNTgzLCA1NTMsIDU1MSwgMTU4MywgNTA1LCA1MDMsIDUwMCwgNTEzLFxuICAgICAgICAxNTU3LCAxNTU1LCA0NDQsIDQ0MiwgNDM5LCA0MzYsIDIyMTMsIDQ1NSwgNDUxLCAxNTA3LCAxNTA1LCAxNTAyLCA3OTYsIDc2MywgNzYyLCA3NjAsIDc2NywgNzExLCA3MTAsIDcwOCwgNzA2LFxuICAgICAgICAyMzc3LCA3MTgsIDcxNSwgMTcxMCwgMjU0NCwgOTE3LCA5MTUsIDI2ODEsIDE2MjcsIDE1OTcsIDE1OTUsIDIzMjUsIDE3NjksIDE3NDksIDE3NDcsIDE0OTksIDE0MzgsIDE0MzUsIDIyMDQsXG4gICAgICAgIDEzOTAsIDEzODgsIDEzODUsIDEzOTUsIDIxNjksIDIxNjcsIDE3MDQsIDE2NjUsIDE2NjIsIDE2MjUsIDE2MjMsIDE2MjAsIDE3NzAsIDEzMjksIDEyODIsIDEyNzksIDIxMDksIDEyMTQsIDEyMDcsXG4gICAgICAgIDEyMjIsIDIwNjgsIDIwNjUsIDExNDksIDExNDcsIDExNDQsIDExNDEsIDE0NiwgMTE1NywgMTE1NCwgMjAxMywgMjAxMSwgMjAwOCwgMjAxNSwgMTU3OSwgMTU0OSwgMTU0NiwgMTQ5NSwgMTQ4NyxcbiAgICAgICAgMTQzMywgMTQzMSwgMTQyOCwgMTQyNSwgMzg4LCAxNDQwLCAyMjA1LCAxNzA1LCA2NTgsIDE2NjcsIDE2NjQsIDExMTksIDEwOTUsIDEwOTMsIDE5NzgsIDEwNTcsIDEwNTUsIDEwNTIsIDEwNjIsXG4gICAgICAgIDE5NjIsIDE5NjAsIDEwMDUsIDEwMDMsIDEwMDAsIDk5NywgMzgsIDEwMTMsIDEwMTAsIDE5MzIsIDE5MzAsIDE5MjcsIDE5MzQsIDk0MSwgOTM5LCA5MzYsIDkzMywgNiwgOTMwLCAzLCA5NTEsXG4gICAgICAgIDk0OCwgOTQ0LCAxODg5LCAxODg3LCAxODg0LCAxODgxLCA5NTksIDE4OTMsIDE4OTEsIDM1LCAxMzc3LCAxMzYwLCAxMzU4LCAxMzI3LCAxMzI1LCAxMzIyLCAxMzMxLCAxMjc3LCAxMjc1LFxuICAgICAgICAxMjcyLCAxMjY5LCAyMzUsIDEyODQsIDIxMTAsIDEyMDUsIDEyMDQsIDEyMDEsIDExOTgsIDE4MiwgMTE5NSwgMTc5LCAxMjEzLCAyMDcwLCAyMDY3LCAxNTgwLCA1MDEsIDE1NTEsIDE1NDgsXG4gICAgICAgIDQ0MCwgNDM3LCAxNDk3LCAxNDk0LCAxNDkwLCAxNTAzLCA3NjEsIDcwOSwgNzA3LCAxNzA2LCA5MTMsIDkxMiwgMjE5OCwgMTM4NiwgMjE2NCwgMjE2MSwgMTYyMSwgMTc2NiwgMjEwMywgMTIwOCxcbiAgICAgICAgMjA1OCwgMjA1NCwgMTE0NSwgMTE0MiwgMjAwNSwgMjAwMiwgMTk5OSwgMjAwOSwgMTQ4OCwgMTQyOSwgMTQyNiwgMjIwMCwgMTY5OCwgMTY1OSwgMTY1NiwgMTk3NSwgMTA1MywgMTk1NywgMTk1NCxcbiAgICAgICAgMTAwMSwgOTk4LCAxOTI0LCAxOTIxLCAxOTE4LCAxOTI4LCA5MzcsIDkzNCwgOTMxLCAxODc5LCAxODc2LCAxODczLCAxODcwLCA5NDUsIDE4ODUsIDE4ODIsIDEzMjMsIDEyNzMsIDEyNzAsXG4gICAgICAgIDIxMDUsIDEyMDIsIDExOTksIDExOTYsIDEyMTEsIDIwNjEsIDIwNTcsIDE1NzYsIDE1NDMsIDE1NDAsIDE0ODQsIDE0ODEsIDE0NzgsIDE0OTEsIDE3MDBcbiAgICBdKTtcblxuICAgIC8qXG4gICAgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzXG4gICAgKlxuICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICpcbiAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgKlxuICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAqL1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKnB1YmxpYyBmaW5hbCovIGNsYXNzIFBERjQxN0RldGVjdG9yUmVzdWx0IHtcbiAgICAgICAgY29uc3RydWN0b3IoYml0cywgcG9pbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmJpdHMgPSBiaXRzO1xuICAgICAgICAgICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Qml0cygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0UG9pbnRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5BcnJheXM7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuTWFwO1xuICAgIC8qKlxuICAgICAqIDxwPkVuY2Fwc3VsYXRlcyBsb2dpYyB0aGF0IGNhbiBkZXRlY3QgYSBQREY0MTcgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGVcbiAgICAgKiBQREY0MTcgQ29kZSBpcyByb3RhdGVkIG9yIHNrZXdlZCwgb3IgcGFydGlhbGx5IG9ic2N1cmVkLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU0lUQSBMYWIgKGtldmluLm9zdWxsaXZhbkBzaXRhLmFlcm8pXG4gICAgICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbilcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKnB1YmxpYyovIC8qZmluYWwqLyBjbGFzcyBEZXRlY3RvciQzIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkRldGVjdHMgYSBQREY0MTcgQ29kZSBpbiBhbiBpbWFnZS4gT25seSBjaGVja3MgMCBhbmQgMTgwIGRlZ3JlZSByb3RhdGlvbnMuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2UgYmFyY29kZSBpbWFnZSB0byBkZWNvZGVcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yXG4gICAgICAgICAqIEBwYXJhbSBtdWx0aXBsZSBpZiB0cnVlLCB0aGVuIHRoZSBpbWFnZSBpcyBzZWFyY2hlZCBmb3IgbXVsdGlwbGUgY29kZXMuIElmIGZhbHNlLCB0aGVuIGF0IG1vc3Qgb25lIGNvZGUgd2lsbFxuICAgICAgICAgKiBiZSBmb3VuZCBhbmQgcmV0dXJuZWRcbiAgICAgICAgICogQHJldHVybiB7QGxpbmsgUERGNDE3RGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBQREY0MTcgY29kZVxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIG5vIFBERjQxNyBDb2RlIGNhbiBiZSBmb3VuZFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRldGVjdE11bHRpcGxlKGltYWdlLCBoaW50cywgbXVsdGlwbGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gZGV0ZWN0aW9uIGltcHJvdmVtZW50LCB0cnlIYXJkZXIgY291bGQgdHJ5IHNldmVyYWwgZGlmZmVyZW50IGx1bWluYW5jZSB0aHJlc2hvbGRzL2JsYWNrcG9pbnRzIG9yIGV2ZW5cbiAgICAgICAgICAgIC8vIGRpZmZlcmVudCBiaW5hcml6ZXJzXG4gICAgICAgICAgICAvLyBib29sZWFuIHRyeUhhcmRlciA9IGhpbnRzICE9IG51bGwgJiYgaGludHMuY29udGFpbnNLZXkoRGVjb2RlSGludFR5cGUuVFJZX0hBUkRFUik7XG4gICAgICAgICAgICBsZXQgYml0TWF0cml4ID0gaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKTtcbiAgICAgICAgICAgIGxldCBiYXJjb2RlQ29vcmRpbmF0ZXMgPSBEZXRlY3RvciQzLmRldGVjdChtdWx0aXBsZSwgYml0TWF0cml4KTtcbiAgICAgICAgICAgIGlmICghYmFyY29kZUNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGJpdE1hdHJpeCA9IGJpdE1hdHJpeC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5yb3RhdGUxODAoKTtcbiAgICAgICAgICAgICAgICBiYXJjb2RlQ29vcmRpbmF0ZXMgPSBEZXRlY3RvciQzLmRldGVjdChtdWx0aXBsZSwgYml0TWF0cml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUERGNDE3RGV0ZWN0b3JSZXN1bHQoYml0TWF0cml4LCBiYXJjb2RlQ29vcmRpbmF0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlY3RzIFBERjQxNyBjb2RlcyBpbiBhbiBpbWFnZS4gT25seSBjaGVja3MgMCBkZWdyZWUgcm90YXRpb25cbiAgICAgICAgICogQHBhcmFtIG11bHRpcGxlIGlmIHRydWUsIHRoZW4gdGhlIGltYWdlIGlzIHNlYXJjaGVkIGZvciBtdWx0aXBsZSBjb2Rlcy4gSWYgZmFsc2UsIHRoZW4gYXQgbW9zdCBvbmUgY29kZSB3aWxsXG4gICAgICAgICAqIGJlIGZvdW5kIGFuZCByZXR1cm5lZFxuICAgICAgICAgKiBAcGFyYW0gYml0TWF0cml4IGJpdCBtYXRyaXggdG8gZGV0ZWN0IGJhcmNvZGVzIGluXG4gICAgICAgICAqIEByZXR1cm4gTGlzdCBvZiBSZXN1bHRQb2ludCBhcnJheXMgY29udGFpbmluZyB0aGUgY29vcmRpbmF0ZXMgb2YgZm91bmQgYmFyY29kZXNcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBkZXRlY3QobXVsdGlwbGUsIGJpdE1hdHJpeCkge1xuICAgICAgICAgICAgY29uc3QgYmFyY29kZUNvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBsZXQgcm93ID0gMDtcbiAgICAgICAgICAgIGxldCBjb2x1bW4gPSAwO1xuICAgICAgICAgICAgbGV0IGZvdW5kQmFyY29kZUluUm93ID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAocm93IDwgYml0TWF0cml4LmdldEhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGljZXMgPSBEZXRlY3RvciQzLmZpbmRWZXJ0aWNlcyhiaXRNYXRyaXgsIHJvdywgY29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAodmVydGljZXNbMF0gPT0gbnVsbCAmJiB2ZXJ0aWNlc1szXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRCYXJjb2RlSW5Sb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGRpZG4ndCBmaW5kIGFueSBiYXJjb2RlIHNvIHRoYXQncyB0aGUgZW5kIG9mIHNlYXJjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZGlkbid0IGZpbmQgYSBiYXJjb2RlIHN0YXJ0aW5nIGF0IHRoZSBnaXZlbiBjb2x1bW4gYW5kIHJvdy4gVHJ5IGFnYWluIGZyb20gdGhlIGZpcnN0IGNvbHVtbiBhbmQgc2xpZ2h0bHlcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVsb3cgdGhlIGxvd2VzdCBiYXJjb2RlIHdlIGZvdW5kIHNvIGZhci5cbiAgICAgICAgICAgICAgICAgICAgZm91bmRCYXJjb2RlSW5Sb3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBiYXJjb2RlQ29vcmRpbmF0ZSBvZiBiYXJjb2RlQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYXJjb2RlQ29vcmRpbmF0ZVsxXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gTWF0aC50cnVuYyhNYXRoLm1heChyb3csIGJhcmNvZGVDb29yZGluYXRlWzFdLmdldFkoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhcmNvZGVDb29yZGluYXRlWzNdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cgPSBNYXRoLm1heChyb3csIE1hdGgudHJ1bmMoYmFyY29kZUNvb3JkaW5hdGVbM10uZ2V0WSgpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm93ICs9IERldGVjdG9yJDMuUk9XX1NURVA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3VuZEJhcmNvZGVJblJvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmFyY29kZUNvb3JkaW5hdGVzLnB1c2godmVydGljZXMpO1xuICAgICAgICAgICAgICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRpZG4ndCBmaW5kIGEgcmlnaHQgcm93IGluZGljYXRvciBjb2x1bW4sIHRoZW4gY29udGludWUgdGhlIHNlYXJjaCBmb3IgdGhlIG5leHQgYmFyY29kZSBhZnRlciB0aGVcbiAgICAgICAgICAgICAgICAvLyBzdGFydCBwYXR0ZXJuIG9mIHRoZSBiYXJjb2RlIGp1c3QgZm91bmQuXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRpY2VzWzJdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTWF0aC50cnVuYyh2ZXJ0aWNlc1syXS5nZXRYKCkpO1xuICAgICAgICAgICAgICAgICAgICByb3cgPSBNYXRoLnRydW5jKHZlcnRpY2VzWzJdLmdldFkoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBNYXRoLnRydW5jKHZlcnRpY2VzWzRdLmdldFgoKSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IE1hdGgudHJ1bmModmVydGljZXNbNF0uZ2V0WSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmFyY29kZUNvb3JkaW5hdGVzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGUgdGhlIHZlcnRpY2VzIGFuZCB0aGUgY29kZXdvcmRzIGFyZWEgb2YgYSBibGFjayBibG9iIHVzaW5nIHRoZSBTdGFydFxuICAgICAgICAgKiBhbmQgU3RvcCBwYXR0ZXJucyBhcyBsb2NhdG9ycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG1hdHJpeCB0aGUgc2Nhbm5lZCBiYXJjb2RlIGltYWdlLlxuICAgICAgICAgKiBAcmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHZlcnRpY2VzOlxuICAgICAgICAgKiAgICAgICAgICAgdmVydGljZXNbMF0geCwgeSB0b3AgbGVmdCBiYXJjb2RlXG4gICAgICAgICAqICAgICAgICAgICB2ZXJ0aWNlc1sxXSB4LCB5IGJvdHRvbSBsZWZ0IGJhcmNvZGVcbiAgICAgICAgICogICAgICAgICAgIHZlcnRpY2VzWzJdIHgsIHkgdG9wIHJpZ2h0IGJhcmNvZGVcbiAgICAgICAgICogICAgICAgICAgIHZlcnRpY2VzWzNdIHgsIHkgYm90dG9tIHJpZ2h0IGJhcmNvZGVcbiAgICAgICAgICogICAgICAgICAgIHZlcnRpY2VzWzRdIHgsIHkgdG9wIGxlZnQgY29kZXdvcmQgYXJlYVxuICAgICAgICAgKiAgICAgICAgICAgdmVydGljZXNbNV0geCwgeSBib3R0b20gbGVmdCBjb2Rld29yZCBhcmVhXG4gICAgICAgICAqICAgICAgICAgICB2ZXJ0aWNlc1s2XSB4LCB5IHRvcCByaWdodCBjb2Rld29yZCBhcmVhXG4gICAgICAgICAqICAgICAgICAgICB2ZXJ0aWNlc1s3XSB4LCB5IGJvdHRvbSByaWdodCBjb2Rld29yZCBhcmVhXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZmluZFZlcnRpY2VzKG1hdHJpeCwgc3RhcnRSb3csIHN0YXJ0Q29sdW1uKSB7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBtYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IG1hdHJpeC5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gbmV3IFJlc3VsdFBvaW50WzhdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KDgpO1xuICAgICAgICAgICAgRGV0ZWN0b3IkMy5jb3B5VG9SZXN1bHQocmVzdWx0LCBEZXRlY3RvciQzLmZpbmRSb3dzV2l0aFBhdHRlcm4obWF0cml4LCBoZWlnaHQsIHdpZHRoLCBzdGFydFJvdywgc3RhcnRDb2x1bW4sIERldGVjdG9yJDMuU1RBUlRfUEFUVEVSTiksIERldGVjdG9yJDMuSU5ERVhFU19TVEFSVF9QQVRURVJOKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRbNF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1uID0gTWF0aC50cnVuYyhyZXN1bHRbNF0uZ2V0WCgpKTtcbiAgICAgICAgICAgICAgICBzdGFydFJvdyA9IE1hdGgudHJ1bmMocmVzdWx0WzRdLmdldFkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBEZXRlY3RvciQzLmNvcHlUb1Jlc3VsdChyZXN1bHQsIERldGVjdG9yJDMuZmluZFJvd3NXaXRoUGF0dGVybihtYXRyaXgsIGhlaWdodCwgd2lkdGgsIHN0YXJ0Um93LCBzdGFydENvbHVtbiwgRGV0ZWN0b3IkMy5TVE9QX1BBVFRFUk4pLCBEZXRlY3RvciQzLklOREVYRVNfU1RPUF9QQVRURVJOKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNvcHlUb1Jlc3VsdChyZXN1bHQsIHRtcFJlc3VsdCwgZGVzdGluYXRpb25JbmRleGVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uSW5kZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtkZXN0aW5hdGlvbkluZGV4ZXNbaV1dID0gdG1wUmVzdWx0W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBmaW5kUm93c1dpdGhQYXR0ZXJuKG1hdHJpeCwgaGVpZ2h0LCB3aWR0aCwgc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBwYXR0ZXJuKSB7XG4gICAgICAgICAgICAvLyBjb25zdCByZXN1bHQgPSBuZXcgUmVzdWx0UG9pbnRbNF07XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkoNCk7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ZXJzID0gbmV3IEludDMyQXJyYXkocGF0dGVybi5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yICg7IHN0YXJ0Um93IDwgaGVpZ2h0OyBzdGFydFJvdyArPSBEZXRlY3RvciQzLlJPV19TVEVQKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxvYyA9IERldGVjdG9yJDMuZmluZEd1YXJkUGF0dGVybihtYXRyaXgsIHN0YXJ0Q29sdW1uLCBzdGFydFJvdywgd2lkdGgsIGZhbHNlLCBwYXR0ZXJuLCBjb3VudGVycyk7XG4gICAgICAgICAgICAgICAgaWYgKGxvYyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChzdGFydFJvdyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUm93TG9jID0gRGV0ZWN0b3IkMy5maW5kR3VhcmRQYXR0ZXJuKG1hdHJpeCwgc3RhcnRDb2x1bW4sIC0tc3RhcnRSb3csIHdpZHRoLCBmYWxzZSwgcGF0dGVybiwgY291bnRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzUm93TG9jICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MgPSBwcmV2aW91c1Jvd0xvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Um93Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0WzBdID0gbmV3IFJlc3VsdFBvaW50KGxvY1swXSwgc3RhcnRSb3cpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbMV0gPSBuZXcgUmVzdWx0UG9pbnQobG9jWzFdLCBzdGFydFJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0b3BSb3cgPSBzdGFydFJvdyArIDE7XG4gICAgICAgICAgICAvLyBMYXN0IHJvdyBvZiB0aGUgY3VycmVudCBzeW1ib2wgdGhhdCBjb250YWlucyBwYXR0ZXJuXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2tpcHBlZFJvd0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNSb3dMb2MgPSBJbnQzMkFycmF5LmZyb20oW01hdGgudHJ1bmMocmVzdWx0WzBdLmdldFgoKSksIE1hdGgudHJ1bmMocmVzdWx0WzFdLmdldFgoKSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKDsgc3RvcFJvdyA8IGhlaWdodDsgc3RvcFJvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYyA9IERldGVjdG9yJDMuZmluZEd1YXJkUGF0dGVybihtYXRyaXgsIHByZXZpb3VzUm93TG9jWzBdLCBzdG9wUm93LCB3aWR0aCwgZmFsc2UsIHBhdHRlcm4sIGNvdW50ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmb3VuZCBwYXR0ZXJuIGlzIG9ubHkgY29uc2lkZXJlZCB0byBiZWxvbmcgdG8gdGhlIHNhbWUgYmFyY29kZSBpZiB0aGUgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgZGlmZmVyIHRvbyBtdWNoLiBQYXR0ZXJuIGRyaWZ0IHNob3VsZCBiZSBub3QgYmlnZ2VyIHRoYW4gdHdvIGZvciBjb25zZWN1dGl2ZSByb3dzLiBXaXRoXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgaGlnaGVyIG51bWJlciBvZiBza2lwcGVkIHJvd3MgZHJpZnQgY291bGQgYmUgbGFyZ2VyLiBUbyBrZWVwIGl0IHNpbXBsZSBmb3Igbm93LCB3ZSBhbGxvdyBhIHNsaWdodGx5XG4gICAgICAgICAgICAgICAgICAgIC8vIGxhcmdlciBkcmlmdCBhbmQgZG9uJ3QgY2hlY2sgZm9yIHNraXBwZWQgcm93cy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYyAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhwcmV2aW91c1Jvd0xvY1swXSAtIGxvY1swXSkgPCBEZXRlY3RvciQzLk1BWF9QQVRURVJOX0RSSUZUICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhwcmV2aW91c1Jvd0xvY1sxXSAtIGxvY1sxXSkgPCBEZXRlY3RvciQzLk1BWF9QQVRURVJOX0RSSUZUKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvd0xvYyA9IGxvYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcHBlZFJvd0NvdW50ID4gRGV0ZWN0b3IkMy5TS0lQUEVEX1JPV19DT1VOVF9NQVgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0b3BSb3cgLT0gc2tpcHBlZFJvd0NvdW50ICsgMTtcbiAgICAgICAgICAgICAgICByZXN1bHRbMl0gPSBuZXcgUmVzdWx0UG9pbnQocHJldmlvdXNSb3dMb2NbMF0sIHN0b3BSb3cpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFszXSA9IG5ldyBSZXN1bHRQb2ludChwcmV2aW91c1Jvd0xvY1sxXSwgc3RvcFJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcFJvdyAtIHN0YXJ0Um93IDwgRGV0ZWN0b3IkMy5CQVJDT0RFX01JTl9IRUlHSFQpIHtcbiAgICAgICAgICAgICAgICBBcnJheXMuZmlsbChyZXN1bHQsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIG1hdHJpeCByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzIHRvIHNlYXJjaFxuICAgICAgICAgKiBAcGFyYW0gY29sdW1uIHggcG9zaXRpb24gdG8gc3RhcnQgc2VhcmNoXG4gICAgICAgICAqIEBwYXJhbSByb3cgeSBwb3NpdGlvbiB0byBzdGFydCBzZWFyY2hcbiAgICAgICAgICogQHBhcmFtIHdpZHRoIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRvIHNlYXJjaCBvbiB0aGlzIHJvd1xuICAgICAgICAgKiBAcGFyYW0gcGF0dGVybiBwYXR0ZXJuIG9mIGNvdW50cyBvZiBudW1iZXIgb2YgYmxhY2sgYW5kIHdoaXRlIHBpeGVscyB0aGF0IGFyZVxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgYmVpbmcgc2VhcmNoZWQgZm9yIGFzIGEgcGF0dGVyblxuICAgICAgICAgKiBAcGFyYW0gY291bnRlcnMgYXJyYXkgb2YgY291bnRlcnMsIGFzIGxvbmcgYXMgcGF0dGVybiwgdG8gcmUtdXNlXG4gICAgICAgICAqIEByZXR1cm4gc3RhcnQvZW5kIGhvcml6b250YWwgb2Zmc2V0IG9mIGd1YXJkIHBhdHRlcm4sIGFzIGFuIGFycmF5IG9mIHR3byBpbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGZpbmRHdWFyZFBhdHRlcm4obWF0cml4LCBjb2x1bW4sIHJvdywgd2lkdGgsIHdoaXRlRmlyc3QsIHBhdHRlcm4sIGNvdW50ZXJzKSB7XG4gICAgICAgICAgICBBcnJheXMuZmlsbFdpdGhpbihjb3VudGVycywgMCwgY291bnRlcnMubGVuZ3RoLCAwKTtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuU3RhcnQgPSBjb2x1bW47XG4gICAgICAgICAgICBsZXQgcGl4ZWxEcmlmdCA9IDA7XG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgYmxhY2sgcGl4ZWxzIGxlZnQgb2YgdGhlIGN1cnJlbnQgcGl4ZWwgc2hpZnQgdG8gdGhlIGxlZnQsIGJ1dCBvbmx5IGZvciBNQVhfUElYRUxfRFJJRlQgcGl4ZWxzXG4gICAgICAgICAgICB3aGlsZSAobWF0cml4LmdldChwYXR0ZXJuU3RhcnQsIHJvdykgJiYgcGF0dGVyblN0YXJ0ID4gMCAmJiBwaXhlbERyaWZ0KysgPCBEZXRlY3RvciQzLk1BWF9QSVhFTF9EUklGVCkge1xuICAgICAgICAgICAgICAgIHBhdHRlcm5TdGFydC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHggPSBwYXR0ZXJuU3RhcnQ7XG4gICAgICAgICAgICBsZXQgY291bnRlclBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuTGVuZ3RoID0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpc1doaXRlID0gd2hpdGVGaXJzdDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWwgPSBtYXRyaXguZ2V0KHgsIHJvdyk7XG4gICAgICAgICAgICAgICAgaWYgKHBpeGVsICE9PSBpc1doaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXJzW2NvdW50ZXJQb3NpdGlvbl0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyUG9zaXRpb24gPT09IHBhdHRlcm5MZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGV0ZWN0b3IkMy5wYXR0ZXJuTWF0Y2hWYXJpYW5jZShjb3VudGVycywgcGF0dGVybiwgRGV0ZWN0b3IkMy5NQVhfSU5ESVZJRFVBTF9WQVJJQU5DRSkgPCBEZXRlY3RvciQzLk1BWF9BVkdfVkFSSUFOQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkoW3BhdHRlcm5TdGFydCwgeF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVyblN0YXJ0ICs9IGNvdW50ZXJzWzBdICsgY291bnRlcnNbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KGNvdW50ZXJzLCAyLCBjb3VudGVycywgMCwgY291bnRlclBvc2l0aW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb24gLSAxXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyc1tjb3VudGVyUG9zaXRpb25dID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJQb3NpdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlclBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY291bnRlcnNbY291bnRlclBvc2l0aW9uXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzV2hpdGUgPSAhaXNXaGl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnRlclBvc2l0aW9uID09PSBwYXR0ZXJuTGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgICAgIERldGVjdG9yJDMucGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIERldGVjdG9yJDMuTUFYX0lORElWSURVQUxfVkFSSUFOQ0UpIDwgRGV0ZWN0b3IkMy5NQVhfQVZHX1ZBUklBTkNFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KFtwYXR0ZXJuU3RhcnQsIHggLSAxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBob3cgY2xvc2VseSBhIHNldCBvZiBvYnNlcnZlZCBjb3VudHMgb2YgcnVucyBvZiBibGFjay93aGl0ZVxuICAgICAgICAgKiB2YWx1ZXMgbWF0Y2hlcyBhIGdpdmVuIHRhcmdldCBwYXR0ZXJuLiBUaGlzIGlzIHJlcG9ydGVkIGFzIHRoZSByYXRpbyBvZlxuICAgICAgICAgKiB0aGUgdG90YWwgdmFyaWFuY2UgZnJvbSB0aGUgZXhwZWN0ZWQgcGF0dGVybiBwcm9wb3J0aW9ucyBhY3Jvc3MgYWxsXG4gICAgICAgICAqIHBhdHRlcm4gZWxlbWVudHMsIHRvIHRoZSBsZW5ndGggb2YgdGhlIHBhdHRlcm4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb3VudGVycyBvYnNlcnZlZCBjb3VudGVyc1xuICAgICAgICAgKiBAcGFyYW0gcGF0dGVybiBleHBlY3RlZCBwYXR0ZXJuXG4gICAgICAgICAqIEBwYXJhbSBtYXhJbmRpdmlkdWFsVmFyaWFuY2UgVGhlIG1vc3QgYW55IGNvdW50ZXIgY2FuIGRpZmZlciBiZWZvcmUgd2UgZ2l2ZSB1cFxuICAgICAgICAgKiBAcmV0dXJuIHJhdGlvIG9mIHRvdGFsIHZhcmlhbmNlIGJldHdlZW4gY291bnRlcnMgYW5kIHBhdHRlcm4gY29tcGFyZWQgdG8gdG90YWwgcGF0dGVybiBzaXplXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgcGF0dGVybk1hdGNoVmFyaWFuY2UoY291bnRlcnMsIHBhdHRlcm4sIG1heEluZGl2aWR1YWxWYXJpYW5jZSkge1xuICAgICAgICAgICAgbGV0IG51bUNvdW50ZXJzID0gY291bnRlcnMubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgICAgIGxldCBwYXR0ZXJuTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ291bnRlcnM7IGkrKykge1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IGNvdW50ZXJzW2ldO1xuICAgICAgICAgICAgICAgIHBhdHRlcm5MZW5ndGggKz0gcGF0dGVybltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3RhbCA8IHBhdHRlcm5MZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBldmVuIGhhdmUgb25lIHBpeGVsIHBlciB1bml0IG9mIGJhciB3aWR0aCwgYXNzdW1lIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyB0b28gc21hbGwgdG8gcmVsaWFibHkgbWF0Y2gsIHNvIGZhaWw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qRmxvYXQuUE9TSVRJVkVfSU5GSU5JVFkqLyBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlJ3JlIGdvaW5nIHRvIGZha2UgZmxvYXRpbmctcG9pbnQgbWF0aCBpbiBpbnRlZ2Vycy4gV2UganVzdCBuZWVkIHRvIHVzZSBtb3JlIGJpdHMuXG4gICAgICAgICAgICAvLyBTY2FsZSB1cCBwYXR0ZXJuTGVuZ3RoIHNvIHRoYXQgaW50ZXJtZWRpYXRlIHZhbHVlcyBiZWxvdyBsaWtlIHNjYWxlZENvdW50ZXIgd2lsbCBoYXZlXG4gICAgICAgICAgICAvLyBtb3JlIFwic2lnbmlmaWNhbnQgZGlnaXRzXCIuXG4gICAgICAgICAgICBsZXQgdW5pdEJhcldpZHRoID0gdG90YWwgLyBwYXR0ZXJuTGVuZ3RoO1xuICAgICAgICAgICAgbWF4SW5kaXZpZHVhbFZhcmlhbmNlICo9IHVuaXRCYXJXaWR0aDtcbiAgICAgICAgICAgIGxldCB0b3RhbFZhcmlhbmNlID0gMC4wO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBudW1Db3VudGVyczsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSBjb3VudGVyc1t4XTtcbiAgICAgICAgICAgICAgICBsZXQgc2NhbGVkUGF0dGVybiA9IHBhdHRlcm5beF0gKiB1bml0QmFyV2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IHZhcmlhbmNlID0gY291bnRlciA+IHNjYWxlZFBhdHRlcm4gPyBjb3VudGVyIC0gc2NhbGVkUGF0dGVybiA6IHNjYWxlZFBhdHRlcm4gLSBjb3VudGVyO1xuICAgICAgICAgICAgICAgIGlmICh2YXJpYW5jZSA+IG1heEluZGl2aWR1YWxWYXJpYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLypGbG9hdC5QT1NJVElWRV9JTkZJTklUWSovIEluZmluaXR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3RhbFZhcmlhbmNlICs9IHZhcmlhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsVmFyaWFuY2UgLyB0b3RhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBEZXRlY3RvciQzLklOREVYRVNfU1RBUlRfUEFUVEVSTiA9IEludDMyQXJyYXkuZnJvbShbMCwgNCwgMSwgNV0pO1xuICAgIERldGVjdG9yJDMuSU5ERVhFU19TVE9QX1BBVFRFUk4gPSBJbnQzMkFycmF5LmZyb20oWzYsIDIsIDcsIDNdKTtcbiAgICBEZXRlY3RvciQzLk1BWF9BVkdfVkFSSUFOQ0UgPSAwLjQyO1xuICAgIERldGVjdG9yJDMuTUFYX0lORElWSURVQUxfVkFSSUFOQ0UgPSAwLjg7XG4gICAgLy8gQiBTIEIgUyBCIFMgQiBTIEJhci9TcGFjZSBwYXR0ZXJuXG4gICAgLy8gMTExMTExMTEgMCAxIDAgMSAwIDEgMDAwXG4gICAgRGV0ZWN0b3IkMy5TVEFSVF9QQVRURVJOID0gSW50MzJBcnJheS5mcm9tKFs4LCAxLCAxLCAxLCAxLCAxLCAxLCAzXSk7XG4gICAgLy8gMTExMTExMSAwIDEgMDAwIDEgMCAxIDAwIDFcbiAgICBEZXRlY3RvciQzLlNUT1BfUEFUVEVSTiA9IEludDMyQXJyYXkuZnJvbShbNywgMSwgMSwgMywgMSwgMSwgMSwgMiwgMV0pO1xuICAgIERldGVjdG9yJDMuTUFYX1BJWEVMX0RSSUZUID0gMztcbiAgICBEZXRlY3RvciQzLk1BWF9QQVRURVJOX0RSSUZUID0gNTtcbiAgICAvLyBpZiB3ZSBzZXQgdGhlIHZhbHVlIHRvbyBsb3csIHRoZW4gd2UgZG9uJ3QgZGV0ZWN0IHRoZSBjb3JyZWN0IGhlaWdodCBvZiB0aGUgYmFyIGlmIHRoZSBzdGFydCBwYXR0ZXJucyBhcmUgZGFtYWdlZC5cbiAgICAvLyBpZiB3ZSBzZXQgdGhlIHZhbHVlIHRvbyBoaWdoLCB0aGVuIHdlIG1pZ2h0IGRldGVjdCB0aGUgc3RhcnQgcGF0dGVybiBmcm9tIGEgbmVpZ2hib3IgYmFyY29kZS5cbiAgICBEZXRlY3RvciQzLlNLSVBQRURfUk9XX0NPVU5UX01BWCA9IDI1O1xuICAgIC8vIEEgUERGNDcxIGJhcmNvZGUgc2hvdWxkIGhhdmUgYXQgbGVhc3QgMyByb3dzLCB3aXRoIGVhY2ggcm93IGJlaW5nID49IDMgdGltZXMgdGhlIG1vZHVsZSB3aWR0aC4gVGhlcmVmb3JlIGl0IHNob3VsZCBiZSBhdCBsZWFzdFxuICAgIC8vIDkgcGl4ZWxzIHRhbGwuIFRvIGJlIGNvbnNlcnZhdGl2ZSwgd2UgdXNlIGFib3V0IGhhbGYgdGhlIHNpemUgdG8gZW5zdXJlIHdlIGRvbid0IG1pc3MgaXQuXG4gICAgRGV0ZWN0b3IkMy5ST1dfU1RFUCA9IDU7XG4gICAgRGV0ZWN0b3IkMy5CQVJDT0RFX01JTl9IRUlHSFQgPSAxMDtcblxuICAgIC8qXG4gICAgKiBDb3B5cmlnaHQgMjAxMiBaWGluZyBhdXRob3JzXG4gICAgKlxuICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICpcbiAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgKlxuICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAqL1xuICAgIC8qKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbi5HZW5lcmljR0ZQb2x5XG4gICAgICovXG4gICAgLypmaW5hbCovIGNsYXNzIE1vZHVsdXNQb2x5IHtcbiAgICAgICAgY29uc3RydWN0b3IoZmllbGQsIGNvZWZmaWNpZW50cykge1xuICAgICAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgICAgICBsZXQgY29lZmZpY2llbnRzTGVuZ3RoID0gLyppbnQqLyBjb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGNvZWZmaWNpZW50c0xlbmd0aCA+IDEgJiYgY29lZmZpY2llbnRzWzBdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVhZGluZyB0ZXJtIG11c3QgYmUgbm9uLXplcm8gZm9yIGFueXRoaW5nIGV4Y2VwdCB0aGUgY29uc3RhbnQgcG9seW5vbWlhbCBcIjBcIlxuICAgICAgICAgICAgICAgIGxldCBmaXJzdE5vblplcm8gPSAvKmludCovIDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGZpcnN0Tm9uWmVybyA8IGNvZWZmaWNpZW50c0xlbmd0aCAmJiBjb2VmZmljaWVudHNbZmlyc3ROb25aZXJvXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Tm9uWmVybyA9PT0gY29lZmZpY2llbnRzTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gbmV3IEludDMyQXJyYXkoWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gbmV3IEludDMyQXJyYXkoY29lZmZpY2llbnRzTGVuZ3RoIC0gZmlyc3ROb25aZXJvKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLmFycmF5Y29weShjb2VmZmljaWVudHMsIGZpcnN0Tm9uWmVybywgdGhpcy5jb2VmZmljaWVudHMsIDAsIHRoaXMuY29lZmZpY2llbnRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q29lZmZpY2llbnRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWxcbiAgICAgICAgICovXG4gICAgICAgIGdldERlZ3JlZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWZmIHRoaXMgcG9seW5vbWlhbCBpcyB0aGUgbW9ub21pYWwgXCIwXCJcbiAgICAgICAgICovXG4gICAgICAgIGlzWmVybygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1swXSA9PT0gMDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q29lZmZpY2llbnQoZGVncmVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHNbdGhpcy5jb2VmZmljaWVudHMubGVuZ3RoIC0gMSAtIGRlZ3JlZV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludFxuICAgICAgICAgKi9cbiAgICAgICAgZXZhbHVhdGVBdChhKSB7XG4gICAgICAgICAgICBpZiAoYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIEp1c3QgcmV0dXJuIHRoZSB4XjAgY29lZmZpY2llbnRcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gSnVzdCB0aGUgc3VtIG9mIHRoZSBjb2VmZmljaWVudHNcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gLyppbnQqLyAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvZWZmaWNpZW50IC8qaW50Ki8gb2YgdGhpcy5jb2VmZmljaWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtID0gdGhpcy5maWVsZC5hZGQoc3VtLCBjb2VmZmljaWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gLyppbnQqLyB0aGlzLmNvZWZmaWNpZW50c1swXTtcbiAgICAgICAgICAgIGxldCBzaXplID0gLyppbnQqLyB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAxOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5maWVsZC5hZGQodGhpcy5maWVsZC5tdWx0aXBseShhLCByZXN1bHQpLCB0aGlzLmNvZWZmaWNpZW50c1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGFkZChvdGhlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdNb2R1bHVzUG9seXMgZG8gbm90IGhhdmUgc2FtZSBNb2R1bHVzR0YgZmllbGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG90aGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc21hbGxlckNvZWZmaWNpZW50cyA9IHRoaXMuY29lZmZpY2llbnRzO1xuICAgICAgICAgICAgbGV0IGxhcmdlckNvZWZmaWNpZW50cyA9IG90aGVyLmNvZWZmaWNpZW50cztcbiAgICAgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IHNtYWxsZXJDb2VmZmljaWVudHM7XG4gICAgICAgICAgICAgICAgc21hbGxlckNvZWZmaWNpZW50cyA9IGxhcmdlckNvZWZmaWNpZW50cztcbiAgICAgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN1bURpZmYgPSBuZXcgSW50MzJBcnJheShsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGxldCBsZW5ndGhEaWZmID0gLyppbnQqLyBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoIC0gc21hbGxlckNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHNcbiAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdW1EaWZmW2ldID0gdGhpcy5maWVsZC5hZGQoc21hbGxlckNvZWZmaWNpZW50c1tpIC0gbGVuZ3RoRGlmZl0sIGxhcmdlckNvZWZmaWNpZW50c1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1vZHVsdXNQb2x5KHRoaXMuZmllbGQsIHN1bURpZmYpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnRyYWN0KG90aGVyKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmllbGQuZXF1YWxzKG90aGVyLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ01vZHVsdXNQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIE1vZHVsdXNHRiBmaWVsZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQob3RoZXIubmVnYXRpdmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHkob3RoZXIpIHtcbiAgICAgICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE1vZHVsdXNQb2x5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHlPdGhlcihvdGhlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihvdGhlcik7XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHlPdGhlcihvdGhlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdNb2R1bHVzUG9seXMgZG8gbm90IGhhdmUgc2FtZSBNb2R1bHVzR0YgZmllbGQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTW9kdWx1c1BvbHkodGhpcy5maWVsZCwgbmV3IEludDMyQXJyYXkoWzBdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYUNvZWZmaWNpZW50cyA9IHRoaXMuY29lZmZpY2llbnRzO1xuICAgICAgICAgICAgbGV0IGFMZW5ndGggPSAvKmludCovIGFDb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7XG4gICAgICAgICAgICBsZXQgYkxlbmd0aCA9IC8qaW50Ki8gYkNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KGFMZW5ndGggKyBiTGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgYUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFDb2VmZiA9IC8qaW50Ki8gYUNvZWZmaWNpZW50c1tpXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqIC8qaW50Ki8gPSAwOyBqIDwgYkxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RbaSArIGpdID0gdGhpcy5maWVsZC5hZGQocHJvZHVjdFtpICsgal0sIHRoaXMuZmllbGQubXVsdGlwbHkoYUNvZWZmLCBiQ29lZmZpY2llbnRzW2pdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCBwcm9kdWN0KTtcbiAgICAgICAgfVxuICAgICAgICBuZWdhdGl2ZSgpIHtcbiAgICAgICAgICAgIGxldCBzaXplID0gLyppbnQqLyB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgbmVnYXRpdmVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShzaXplKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuZWdhdGl2ZUNvZWZmaWNpZW50c1tpXSA9IHRoaXMuZmllbGQuc3VidHJhY3QoMCwgdGhpcy5jb2VmZmljaWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCBuZWdhdGl2ZUNvZWZmaWNpZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHlTY2FsYXIoc2NhbGFyKSB7XG4gICAgICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCBuZXcgSW50MzJBcnJheShbMF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY2FsYXIgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzaXplID0gLyppbnQqLyB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHByb2R1Y3RbaV0gPSB0aGlzLmZpZWxkLm11bHRpcGx5KHRoaXMuY29lZmZpY2llbnRzW2ldLCBzY2FsYXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCBwcm9kdWN0KTtcbiAgICAgICAgfVxuICAgICAgICBtdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlLCBjb2VmZmljaWVudCkge1xuICAgICAgICAgICAgaWYgKGRlZ3JlZSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29lZmZpY2llbnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1vZHVsdXNQb2x5KHRoaXMuZmllbGQsIG5ldyBJbnQzMkFycmF5KFswXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNpemUgPSAvKmludCovIHRoaXMuY29lZmZpY2llbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSArIGRlZ3JlZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcHJvZHVjdFtpXSA9IHRoaXMuZmllbGQubXVsdGlwbHkodGhpcy5jb2VmZmljaWVudHNbaV0sIGNvZWZmaWNpZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTW9kdWx1c1BvbHkodGhpcy5maWVsZCwgcHJvZHVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgTW9kdWx1c1BvbHlbXSBkaXZpZGUob3RoZXI6IE1vZHVsdXNQb2x5KSB7XG4gICAgICAgICAgaWYgKCFmaWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiTW9kdWx1c1BvbHlzIGRvIG5vdCBoYXZlIHNhbWUgTW9kdWx1c0dGIGZpZWxkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJEaXZpZGUgYnkgMFwiKTtcbiAgICAgICAgICB9XG4gICAgICBcbiAgICAgICAgICBsZXQgcXVvdGllbnQ6IE1vZHVsdXNQb2x5ID0gZmllbGQuZ2V0WmVybygpO1xuICAgICAgICAgIGxldCByZW1haW5kZXI6IE1vZHVsdXNQb2x5ID0gdGhpcztcbiAgICAgIFxuICAgICAgICAgIGxldCBkZW5vbWluYXRvckxlYWRpbmdUZXJtOiAvKmludC8gbnVtYmVyID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpO1xuICAgICAgICAgIGxldCBpbnZlcnNlRGVub21pbmF0b3JMZWFkaW5nVGVybTogLyppbnQvIG51bWJlciA9IGZpZWxkLmludmVyc2UoZGVub21pbmF0b3JMZWFkaW5nVGVybSk7XG4gICAgICBcbiAgICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgIGxldCBkZWdyZWVEaWZmZXJlbmNlOiAvKmludC8gbnVtYmVyID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7XG4gICAgICAgICAgICBsZXQgc2NhbGU6IC8qaW50LyBudW1iZXIgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pO1xuICAgICAgICAgICAgbGV0IHRlcm06IE1vZHVsdXNQb2x5ID0gb3RoZXIubXVsdGlwbHlCeU1vbm9taWFsKGRlZ3JlZURpZmZlcmVuY2UsIHNjYWxlKTtcbiAgICAgICAgICAgIGxldCBpdGVyYXRpb25RdW90aWVudDogTW9kdWx1c1BvbHkgPSBmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmZlcmVuY2UsIHNjYWxlKTtcbiAgICAgICAgICAgIHF1b3RpZW50ID0gcXVvdGllbnQuYWRkKGl0ZXJhdGlvblF1b3RpZW50KTtcbiAgICAgICAgICAgIHJlbWFpbmRlciA9IHJlbWFpbmRlci5zdWJ0cmFjdCh0ZXJtKTtcbiAgICAgICAgICB9XG4gICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IE1vZHVsdXNQb2x5W10geyBxdW90aWVudCwgcmVtYWluZGVyIH07XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCAvKjggKiB0aGlzLmdldERlZ3JlZSgpKi8pOyAvLyBkeW5hbWljIHN0cmluZyBzaXplIGluIEpTXG4gICAgICAgICAgICBmb3IgKGxldCBkZWdyZWUgLyppbnQqLyA9IHRoaXMuZ2V0RGVncmVlKCk7IGRlZ3JlZSA+PSAwOyBkZWdyZWUtLSkge1xuICAgICAgICAgICAgICAgIGxldCBjb2VmZmljaWVudCA9IC8qaW50Ki8gdGhpcy5nZXRDb2VmZmljaWVudChkZWdyZWUpO1xuICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29lZmZpY2llbnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCcgLSAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZWZmaWNpZW50ID0gLWNvZWZmaWNpZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCcgKyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlID09PSAwIHx8IGNvZWZmaWNpZW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGNvZWZmaWNpZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVncmVlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgneCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgneF4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGRlZ3JlZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBNb2R1bHVzQmFzZSB7XG4gICAgICAgIGFkZChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gKGEgKyBiKSAlIHRoaXMubW9kdWx1cztcbiAgICAgICAgfVxuICAgICAgICBzdWJ0cmFjdChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMubW9kdWx1cyArIGEgLSBiKSAlIHRoaXMubW9kdWx1cztcbiAgICAgICAgfVxuICAgICAgICBleHAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbYV07XG4gICAgICAgIH1cbiAgICAgICAgbG9nKGEpIHtcbiAgICAgICAgICAgIGlmIChhID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9nVGFibGVbYV07XG4gICAgICAgIH1cbiAgICAgICAgaW52ZXJzZShhKSB7XG4gICAgICAgICAgICBpZiAoYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcml0aG1ldGljRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLm1vZHVsdXMgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgbXVsdGlwbHkoYSwgYikge1xuICAgICAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLm1vZHVsdXMgLSAxKV07XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZHVsdXM7XG4gICAgICAgIH1cbiAgICAgICAgZXF1YWxzKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvID09PSB0aGlzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMiBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5BIGZpZWxkIGJhc2VkIG9uIHBvd2VycyBvZiBhIGdlbmVyYXRvciBpbnRlZ2VyLCBtb2R1bG8gc29tZSBtb2R1bHVzLjwvcD5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgU2VhbiBPd2VuXG4gICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbi5HZW5lcmljR0ZcbiAgICAgKi9cbiAgICAvKnB1YmxpYyBmaW5hbCovIGNsYXNzIE1vZHVsdXNHRiBleHRlbmRzIE1vZHVsdXNCYXNlIHtcbiAgICAgICAgLy8gcHJpdmF0ZSAvKmZpbmFsKi8gbW9kdWx1czogLyppbnQqLyBudW1iZXI7XG4gICAgICAgIGNvbnN0cnVjdG9yKG1vZHVsdXMsIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMubW9kdWx1cyA9IG1vZHVsdXM7XG4gICAgICAgICAgICB0aGlzLmV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkobW9kdWx1cyk7XG4gICAgICAgICAgICB0aGlzLmxvZ1RhYmxlID0gbmV3IEludDMyQXJyYXkobW9kdWx1cyk7XG4gICAgICAgICAgICBsZXQgeCA9IC8qaW50Ki8gMTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBtb2R1bHVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cFRhYmxlW2ldID0geDtcbiAgICAgICAgICAgICAgICB4ID0gKHggKiBnZW5lcmF0b3IpICUgbW9kdWx1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBtb2R1bHVzIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dUYWJsZVt0aGlzLmV4cFRhYmxlW2ldXSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBsb2dUYWJsZVswXSA9PSAwIGJ1dCB0aGlzIHNob3VsZCBuZXZlciBiZSB1c2VkXG4gICAgICAgICAgICB0aGlzLnplcm8gPSBuZXcgTW9kdWx1c1BvbHkodGhpcywgbmV3IEludDMyQXJyYXkoWzBdKSk7XG4gICAgICAgICAgICB0aGlzLm9uZSA9IG5ldyBNb2R1bHVzUG9seSh0aGlzLCBuZXcgSW50MzJBcnJheShbMV0pKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRaZXJvKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuemVybztcbiAgICAgICAgfVxuICAgICAgICBnZXRPbmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRNb25vbWlhbChkZWdyZWUsIGNvZWZmaWNpZW50KSB7XG4gICAgICAgICAgICBpZiAoZGVncmVlIDwgMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnplcm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY29lZmZpY2llbnRzID0gbmV3IEludDMyQXJyYXkoZGVncmVlICsgMSk7XG4gICAgICAgICAgICBjb2VmZmljaWVudHNbMF0gPSBjb2VmZmljaWVudDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTW9kdWx1c1BvbHkodGhpcywgY29lZmZpY2llbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBNb2R1bHVzR0YuUERGNDE3X0dGID0gbmV3IE1vZHVsdXNHRihQREY0MTdDb21tb24uTlVNQkVSX09GX0NPREVXT1JEUywgMyk7XG5cbiAgICAvKlxuICAgICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9yc1xuICAgICpcbiAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAqXG4gICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICpcbiAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgKi9cbiAgICAvKipcbiAgICAgKiA8cD5QREY0MTcgZXJyb3IgY29ycmVjdGlvbiBpbXBsZW1lbnRhdGlvbi48L3A+XG4gICAgICpcbiAgICAgKiA8cD5UaGlzIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JlZWQlRTIlODAlOTNTb2xvbW9uX2Vycm9yX2NvcnJlY3Rpb24jRXhhbXBsZVwiPmV4YW1wbGU8L2E+XG4gICAgICogaXMgcXVpdGUgdXNlZnVsIGluIHVuZGVyc3RhbmRpbmcgdGhlIGFsZ29yaXRobS48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNlYW4gT3dlblxuICAgICAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24uUmVlZFNvbG9tb25EZWNvZGVyXG4gICAgICovXG4gICAgLypwdWJsaWMgZmluYWwqLyBjbGFzcyBFcnJvckNvcnJlY3Rpb24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBNb2R1bHVzR0YuUERGNDE3X0dGO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gcmVjZWl2ZWQgcmVjZWl2ZWQgY29kZXdvcmRzXG4gICAgICAgICAqIEBwYXJhbSBudW1FQ0NvZGV3b3JkcyBudW1iZXIgb2YgdGhvc2UgY29kZXdvcmRzIHVzZWQgZm9yIEVDXG4gICAgICAgICAqIEBwYXJhbSBlcmFzdXJlcyBsb2NhdGlvbiBvZiBlcmFzdXJlc1xuICAgICAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBlcnJvcnNcbiAgICAgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvcnMgY2Fubm90IGJlIGNvcnJlY3RlZCwgbWF5YmUgYmVjYXVzZSBvZiB0b28gbWFueSBlcnJvcnNcbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZShyZWNlaXZlZCwgbnVtRUNDb2Rld29yZHMsIGVyYXN1cmVzKSB7XG4gICAgICAgICAgICBsZXQgcG9seSA9IG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCByZWNlaXZlZCk7XG4gICAgICAgICAgICBsZXQgUyA9IG5ldyBJbnQzMkFycmF5KG51bUVDQ29kZXdvcmRzKTtcbiAgICAgICAgICAgIGxldCBlcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gbnVtRUNDb2Rld29yZHM7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZhbHVhdGlvbiA9IHBvbHkuZXZhbHVhdGVBdCh0aGlzLmZpZWxkLmV4cChpKSk7XG4gICAgICAgICAgICAgICAgU1tudW1FQ0NvZGV3b3JkcyAtIGldID0gZXZhbHVhdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoZXZhbHVhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGtub3duRXJyb3JzID0gdGhpcy5maWVsZC5nZXRPbmUoKTtcbiAgICAgICAgICAgIGlmIChlcmFzdXJlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlcmFzdXJlIG9mIGVyYXN1cmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiID0gdGhpcy5maWVsZC5leHAocmVjZWl2ZWQubGVuZ3RoIC0gMSAtIGVyYXN1cmUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgKDEgLSBieCkgdGVybTpcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm0gPSBuZXcgTW9kdWx1c1BvbHkodGhpcy5maWVsZCwgbmV3IEludDMyQXJyYXkoW3RoaXMuZmllbGQuc3VidHJhY3QoMCwgYiksIDFdKSk7XG4gICAgICAgICAgICAgICAgICAgIGtub3duRXJyb3JzID0ga25vd25FcnJvcnMubXVsdGlwbHkodGVybSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN5bmRyb21lID0gbmV3IE1vZHVsdXNQb2x5KHRoaXMuZmllbGQsIFMpO1xuICAgICAgICAgICAgLy8gc3luZHJvbWUgPSBzeW5kcm9tZS5tdWx0aXBseShrbm93bkVycm9ycyk7XG4gICAgICAgICAgICBsZXQgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKHRoaXMuZmllbGQuYnVpbGRNb25vbWlhbChudW1FQ0NvZGV3b3JkcywgMSksIHN5bmRyb21lLCBudW1FQ0NvZGV3b3Jkcyk7XG4gICAgICAgICAgICBsZXQgc2lnbWEgPSBzaWdtYU9tZWdhWzBdO1xuICAgICAgICAgICAgbGV0IG9tZWdhID0gc2lnbWFPbWVnYVsxXTtcbiAgICAgICAgICAgIC8vIHNpZ21hID0gc2lnbWEubXVsdGlwbHkoa25vd25FcnJvcnMpO1xuICAgICAgICAgICAgbGV0IGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpO1xuICAgICAgICAgICAgbGV0IGVycm9yTWFnbml0dWRlcyA9IHRoaXMuZmluZEVycm9yTWFnbml0dWRlcyhvbWVnYSwgc2lnbWEsIGVycm9yTG9jYXRpb25zKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBlcnJvckxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSB0aGlzLmZpZWxkLmxvZyhlcnJvckxvY2F0aW9uc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlY2VpdmVkW3Bvc2l0aW9uXSA9IHRoaXMuZmllbGQuc3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVycm9yTG9jYXRpb25zLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIE1vZHVsdXNQb2x5XG4gICAgICAgICAqIEBwYXJhbSBhXG4gICAgICAgICAqIEBwYXJhbSBNb2R1bHVzUG9seVxuICAgICAgICAgKiBAcGFyYW0gYlxuICAgICAgICAgKiBAcGFyYW0gaW50XG4gICAgICAgICAqIEBwYXJhbSBSXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHJ1bkV1Y2xpZGVhbkFsZ29yaXRobShhLCBiLCBSKSB7XG4gICAgICAgICAgICAvLyBBc3N1bWUgYSdzIGRlZ3JlZSBpcyA+PSBiJ3NcbiAgICAgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gYTtcbiAgICAgICAgICAgICAgICBhID0gYjtcbiAgICAgICAgICAgICAgICBiID0gdGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByTGFzdCA9IGE7XG4gICAgICAgICAgICBsZXQgciA9IGI7XG4gICAgICAgICAgICBsZXQgdExhc3QgPSB0aGlzLmZpZWxkLmdldFplcm8oKTtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy5maWVsZC5nZXRPbmUoKTtcbiAgICAgICAgICAgIC8vIFJ1biBFdWNsaWRlYW4gYWxnb3JpdGhtIHVudGlsIHIncyBkZWdyZWUgaXMgbGVzcyB0aGFuIFIvMlxuICAgICAgICAgICAgd2hpbGUgKHIuZ2V0RGVncmVlKCkgPj0gTWF0aC5yb3VuZChSIC8gMikpIHtcbiAgICAgICAgICAgICAgICBsZXQgckxhc3RMYXN0ID0gckxhc3Q7XG4gICAgICAgICAgICAgICAgbGV0IHRMYXN0TGFzdCA9IHRMYXN0O1xuICAgICAgICAgICAgICAgIHJMYXN0ID0gcjtcbiAgICAgICAgICAgICAgICB0TGFzdCA9IHQ7XG4gICAgICAgICAgICAgICAgLy8gRGl2aWRlIHJMYXN0TGFzdCBieSByTGFzdCwgd2l0aCBxdW90aWVudCBpbiBxIGFuZCByZW1haW5kZXIgaW4gclxuICAgICAgICAgICAgICAgIGlmIChyTGFzdC5pc1plcm8oKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD9cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ2hlY2tzdW1FeGNlcHRpb24uZ2V0Q2hlY2tzdW1JbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByID0gckxhc3RMYXN0O1xuICAgICAgICAgICAgICAgIGxldCBxID0gdGhpcy5maWVsZC5nZXRaZXJvKCk7XG4gICAgICAgICAgICAgICAgbGV0IGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSByTGFzdC5nZXRDb2VmZmljaWVudChyTGFzdC5nZXREZWdyZWUoKSk7XG4gICAgICAgICAgICAgICAgbGV0IGRsdEludmVyc2UgPSB0aGlzLmZpZWxkLmludmVyc2UoZGVub21pbmF0b3JMZWFkaW5nVGVybSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHIuZ2V0RGVncmVlKCkgPj0gckxhc3QuZ2V0RGVncmVlKCkgJiYgIXIuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzY2FsZSA9IHRoaXMuZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7XG4gICAgICAgICAgICAgICAgICAgIHEgPSBxLmFkZCh0aGlzLmZpZWxkLmJ1aWxkTW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgciA9IHIuc3VidHJhY3Qockxhc3QubXVsdGlwbHlCeU1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5zdWJ0cmFjdCh0TGFzdExhc3QpLm5lZ2F0aXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2lnbWFUaWxkZUF0WmVybyA9IHQuZ2V0Q29lZmZpY2llbnQoMCk7XG4gICAgICAgICAgICBpZiAoc2lnbWFUaWxkZUF0WmVybyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IENoZWNrc3VtRXhjZXB0aW9uLmdldENoZWNrc3VtSW5zdGFuY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbnZlcnNlID0gdGhpcy5maWVsZC5pbnZlcnNlKHNpZ21hVGlsZGVBdFplcm8pO1xuICAgICAgICAgICAgbGV0IHNpZ21hID0gdC5tdWx0aXBseShpbnZlcnNlKTtcbiAgICAgICAgICAgIGxldCBvbWVnYSA9IHIubXVsdGlwbHkoaW52ZXJzZSk7XG4gICAgICAgICAgICByZXR1cm4gW3NpZ21hLCBvbWVnYV07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlcnJvckxvY2F0b3JcbiAgICAgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZmluZEVycm9yTG9jYXRpb25zKGVycm9yTG9jYXRvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGRpcmVjdCBhcHBsaWNhdGlvbiBvZiBDaGllbidzIHNlYXJjaFxuICAgICAgICAgICAgbGV0IG51bUVycm9ycyA9IGVycm9yTG9jYXRvci5nZXREZWdyZWUoKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpO1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMTsgaSA8IHRoaXMuZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvckxvY2F0b3IuZXZhbHVhdGVBdChpKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbZV0gPSB0aGlzLmZpZWxkLmludmVyc2UoaSk7XG4gICAgICAgICAgICAgICAgICAgIGUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZSAhPT0gbnVtRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgQ2hlY2tzdW1FeGNlcHRpb24uZ2V0Q2hlY2tzdW1JbnN0YW5jZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBmaW5kRXJyb3JNYWduaXR1ZGVzKGVycm9yRXZhbHVhdG9yLCBlcnJvckxvY2F0b3IsIGVycm9yTG9jYXRpb25zKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3JMb2NhdG9yRGVncmVlID0gZXJyb3JMb2NhdG9yLmdldERlZ3JlZSgpO1xuICAgICAgICAgICAgbGV0IGZvcm1hbERlcml2YXRpdmVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShlcnJvckxvY2F0b3JEZWdyZWUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMTsgaSA8PSBlcnJvckxvY2F0b3JEZWdyZWU7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvcm1hbERlcml2YXRpdmVDb2VmZmljaWVudHNbZXJyb3JMb2NhdG9yRGVncmVlIC0gaV0gPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkLm11bHRpcGx5KGksIGVycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudChpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZm9ybWFsRGVyaXZhdGl2ZSA9IG5ldyBNb2R1bHVzUG9seSh0aGlzLmZpZWxkLCBmb3JtYWxEZXJpdmF0aXZlQ29lZmZpY2llbnRzKTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgZGlyZWN0bHkgYXBwbHlpbmcgRm9ybmV5J3MgRm9ybXVsYVxuICAgICAgICAgICAgbGV0IHMgPSBlcnJvckxvY2F0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHhpSW52ZXJzZSA9IHRoaXMuZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7XG4gICAgICAgICAgICAgICAgbGV0IG51bWVyYXRvciA9IHRoaXMuZmllbGQuc3VidHJhY3QoMCwgZXJyb3JFdmFsdWF0b3IuZXZhbHVhdGVBdCh4aUludmVyc2UpKTtcbiAgICAgICAgICAgICAgICBsZXQgZGVub21pbmF0b3IgPSB0aGlzLmZpZWxkLmludmVyc2UoZm9ybWFsRGVyaXZhdGl2ZS5ldmFsdWF0ZUF0KHhpSW52ZXJzZSkpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuZmllbGQubXVsdGlwbHkobnVtZXJhdG9yLCBkZW5vbWluYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgLyoqXG4gICAgICogQGF1dGhvciBHdWVudGhlciBHcmF1XG4gICAgICovXG4gICAgLypmaW5hbCovIGNsYXNzIEJvdW5kaW5nQm94IHtcbiAgICAgICAgY29uc3RydWN0b3IoaW1hZ2UsIHRvcExlZnQsIGJvdHRvbUxlZnQsIHRvcFJpZ2h0LCBib3R0b21SaWdodCkge1xuICAgICAgICAgICAgaWYgKGltYWdlIGluc3RhbmNlb2YgQm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yXzIoaW1hZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvcl8xKGltYWdlLCB0b3BMZWZ0LCBib3R0b21MZWZ0LCB0b3BSaWdodCwgYm90dG9tUmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2VcbiAgICAgICAgICogQHBhcmFtIHRvcExlZnRcbiAgICAgICAgICogQHBhcmFtIGJvdHRvbUxlZnRcbiAgICAgICAgICogQHBhcmFtIHRvcFJpZ2h0XG4gICAgICAgICAqIEBwYXJhbSBib3R0b21SaWdodFxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcl8xKGltYWdlLCB0b3BMZWZ0LCBib3R0b21MZWZ0LCB0b3BSaWdodCwgYm90dG9tUmlnaHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRVbnNwZWNpZmllZCA9IHRvcExlZnQgPT0gbnVsbCB8fCBib3R0b21MZWZ0ID09IG51bGw7XG4gICAgICAgICAgICBjb25zdCByaWdodFVuc3BlY2lmaWVkID0gdG9wUmlnaHQgPT0gbnVsbCB8fCBib3R0b21SaWdodCA9PSBudWxsO1xuICAgICAgICAgICAgaWYgKGxlZnRVbnNwZWNpZmllZCAmJiByaWdodFVuc3BlY2lmaWVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVmdFVuc3BlY2lmaWVkKSB7XG4gICAgICAgICAgICAgICAgdG9wTGVmdCA9IG5ldyBSZXN1bHRQb2ludCgwLCB0b3BSaWdodC5nZXRZKCkpO1xuICAgICAgICAgICAgICAgIGJvdHRvbUxlZnQgPSBuZXcgUmVzdWx0UG9pbnQoMCwgYm90dG9tUmlnaHQuZ2V0WSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJpZ2h0VW5zcGVjaWZpZWQpIHtcbiAgICAgICAgICAgICAgICB0b3BSaWdodCA9IG5ldyBSZXN1bHRQb2ludChpbWFnZS5nZXRXaWR0aCgpIC0gMSwgdG9wTGVmdC5nZXRZKCkpO1xuICAgICAgICAgICAgICAgIGJvdHRvbVJpZ2h0ID0gbmV3IFJlc3VsdFBvaW50KGltYWdlLmdldFdpZHRoKCkgLSAxLCBib3R0b21MZWZ0LmdldFkoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICB0aGlzLnRvcExlZnQgPSB0b3BMZWZ0O1xuICAgICAgICAgICAgdGhpcy5ib3R0b21MZWZ0ID0gYm90dG9tTGVmdDtcbiAgICAgICAgICAgIHRoaXMudG9wUmlnaHQgPSB0b3BSaWdodDtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tUmlnaHQgPSBib3R0b21SaWdodDtcbiAgICAgICAgICAgIHRoaXMubWluWCA9IE1hdGgudHJ1bmMoTWF0aC5taW4odG9wTGVmdC5nZXRYKCksIGJvdHRvbUxlZnQuZ2V0WCgpKSk7XG4gICAgICAgICAgICB0aGlzLm1heFggPSBNYXRoLnRydW5jKE1hdGgubWF4KHRvcFJpZ2h0LmdldFgoKSwgYm90dG9tUmlnaHQuZ2V0WCgpKSk7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSBNYXRoLnRydW5jKE1hdGgubWluKHRvcExlZnQuZ2V0WSgpLCB0b3BSaWdodC5nZXRZKCkpKTtcbiAgICAgICAgICAgIHRoaXMubWF4WSA9IE1hdGgudHJ1bmMoTWF0aC5tYXgoYm90dG9tTGVmdC5nZXRZKCksIGJvdHRvbVJpZ2h0LmdldFkoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yXzIoYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSBib3VuZGluZ0JveC5pbWFnZTtcbiAgICAgICAgICAgIHRoaXMudG9wTGVmdCA9IGJvdW5kaW5nQm94LmdldFRvcExlZnQoKTtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IGJvdW5kaW5nQm94LmdldEJvdHRvbUxlZnQoKTtcbiAgICAgICAgICAgIHRoaXMudG9wUmlnaHQgPSBib3VuZGluZ0JveC5nZXRUb3BSaWdodCgpO1xuICAgICAgICAgICAgdGhpcy5ib3R0b21SaWdodCA9IGJvdW5kaW5nQm94LmdldEJvdHRvbVJpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLm1pblggPSBib3VuZGluZ0JveC5nZXRNaW5YKCk7XG4gICAgICAgICAgICB0aGlzLm1heFggPSBib3VuZGluZ0JveC5nZXRNYXhYKCk7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSBib3VuZGluZ0JveC5nZXRNaW5ZKCk7XG4gICAgICAgICAgICB0aGlzLm1heFkgPSBib3VuZGluZ0JveC5nZXRNYXhZKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBtZXJnZShsZWZ0Qm94LCByaWdodEJveCkge1xuICAgICAgICAgICAgaWYgKGxlZnRCb3ggPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByaWdodEJveDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyaWdodEJveCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnRCb3g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kaW5nQm94KGxlZnRCb3guaW1hZ2UsIGxlZnRCb3gudG9wTGVmdCwgbGVmdEJveC5ib3R0b21MZWZ0LCByaWdodEJveC50b3BSaWdodCwgcmlnaHRCb3guYm90dG9tUmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBhZGRNaXNzaW5nUm93cyhtaXNzaW5nU3RhcnRSb3dzLCBtaXNzaW5nRW5kUm93cywgaXNMZWZ0KSB7XG4gICAgICAgICAgICBsZXQgbmV3VG9wTGVmdCA9IHRoaXMudG9wTGVmdDtcbiAgICAgICAgICAgIGxldCBuZXdCb3R0b21MZWZ0ID0gdGhpcy5ib3R0b21MZWZ0O1xuICAgICAgICAgICAgbGV0IG5ld1RvcFJpZ2h0ID0gdGhpcy50b3BSaWdodDtcbiAgICAgICAgICAgIGxldCBuZXdCb3R0b21SaWdodCA9IHRoaXMuYm90dG9tUmlnaHQ7XG4gICAgICAgICAgICBpZiAobWlzc2luZ1N0YXJ0Um93cyA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wID0gaXNMZWZ0ID8gdGhpcy50b3BMZWZ0IDogdGhpcy50b3BSaWdodDtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TWluWSA9IE1hdGgudHJ1bmModG9wLmdldFkoKSAtIG1pc3NpbmdTdGFydFJvd3MpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdNaW5ZIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdNaW5ZID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5ld1RvcCA9IG5ldyBSZXN1bHRQb2ludCh0b3AuZ2V0WCgpLCBuZXdNaW5ZKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNMZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RvcExlZnQgPSBuZXdUb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdUb3BSaWdodCA9IG5ld1RvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWlzc2luZ0VuZFJvd3MgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGJvdHRvbSA9IGlzTGVmdCA/IHRoaXMuYm90dG9tTGVmdCA6IHRoaXMuYm90dG9tUmlnaHQ7XG4gICAgICAgICAgICAgICAgbGV0IG5ld01heFkgPSBNYXRoLnRydW5jKGJvdHRvbS5nZXRZKCkgKyBtaXNzaW5nRW5kUm93cyk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld01heFkgPj0gdGhpcy5pbWFnZS5nZXRIZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdNYXhZID0gdGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuZXdCb3R0b20gPSBuZXcgUmVzdWx0UG9pbnQoYm90dG9tLmdldFgoKSwgbmV3TWF4WSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdCb3R0b21MZWZ0ID0gbmV3Qm90dG9tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Qm90dG9tUmlnaHQgPSBuZXdCb3R0b207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZGluZ0JveCh0aGlzLmltYWdlLCBuZXdUb3BMZWZ0LCBuZXdCb3R0b21MZWZ0LCBuZXdUb3BSaWdodCwgbmV3Qm90dG9tUmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGdldE1pblgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5taW5YO1xuICAgICAgICB9XG4gICAgICAgIGdldE1heFgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXhYO1xuICAgICAgICB9XG4gICAgICAgIGdldE1pblkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5taW5ZO1xuICAgICAgICB9XG4gICAgICAgIGdldE1heFkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXhZO1xuICAgICAgICB9XG4gICAgICAgIGdldFRvcExlZnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGdldFRvcFJpZ2h0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9wUmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Qm90dG9tTGVmdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdHRvbUxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Qm90dG9tUmlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3R0b21SaWdodDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMTMgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLy8gcGFja2FnZSBjb20uZ29vZ2xlLnp4aW5nLnBkZjQxNy5kZWNvZGVyO1xuICAgIC8qKlxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIC8qZmluYWwqLyBjbGFzcyBCYXJjb2RlTWV0YWRhdGEge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb2x1bW5Db3VudCwgcm93Q291bnRVcHBlclBhcnQsIHJvd0NvdW50TG93ZXJQYXJ0LCBlcnJvckNvcnJlY3Rpb25MZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5Db3VudCA9IGNvbHVtbkNvdW50O1xuICAgICAgICAgICAgdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9IGVycm9yQ29ycmVjdGlvbkxldmVsO1xuICAgICAgICAgICAgdGhpcy5yb3dDb3VudFVwcGVyUGFydCA9IHJvd0NvdW50VXBwZXJQYXJ0O1xuICAgICAgICAgICAgdGhpcy5yb3dDb3VudExvd2VyUGFydCA9IHJvd0NvdW50TG93ZXJQYXJ0O1xuICAgICAgICAgICAgdGhpcy5yb3dDb3VudCA9IHJvd0NvdW50VXBwZXJQYXJ0ICsgcm93Q291bnRMb3dlclBhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Q29sdW1uQ291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBnZXRFcnJvckNvcnJlY3Rpb25MZXZlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsO1xuICAgICAgICB9XG4gICAgICAgIGdldFJvd0NvdW50KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93Q291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Um93Q291bnRVcHBlclBhcnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dDb3VudFVwcGVyUGFydDtcbiAgICAgICAgfVxuICAgICAgICBnZXRSb3dDb3VudExvd2VyUGFydCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd0NvdW50TG93ZXJQYXJ0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSmF2YSBGb3JtYXR0ZXIgY2xhc3MgcG9seWZpbGwgdGhhdCB3b3JrcyBpbiB0aGUgSlMgd2F5LlxuICAgICAqL1xuICAgIGNsYXNzIEZvcm1hdHRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTM0Mzk3MTEvNDM2NzY4M1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RyXG4gICAgICAgICAqIEBwYXJhbSBhcnJcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBmb3JtKHN0ciwgYXJyKSB7XG4gICAgICAgICAgICBsZXQgaSA9IC0xO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2soZXhwLCBwMCwgcDEsIHAyLCBwMywgcDQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhwID09PSAnJSUnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyUnO1xuICAgICAgICAgICAgICAgIGlmIChhcnJbKytpXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGV4cCA9IHAyID8gcGFyc2VJbnQocDIuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsZXQgdmFsO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocDQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcnJbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcnJbaV1bMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFycltpXSkudG9GaXhlZChleHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcnJbaV0pLnRvUHJlY2lzaW9uKGV4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFycltpXSkudG9FeHBvbmVudGlhbChleHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VJbnQoYXJyW2ldKS50b1N0cmluZyhiYXNlID8gYmFzZSA6IDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQocGFyc2VJbnQoYXJyW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTtcbiAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHBhcnNlSW50KHAxKTsgLyogcGFkZGluZyBzaXplICovXG4gICAgICAgICAgICAgICAgbGV0IGNoID0gcDEgJiYgKHAxWzBdICsgJycpID09PSAnMCcgPyAnMCcgOiAnICc7IC8qIGlzbnVsbD8gKi9cbiAgICAgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IHAwICE9PSB1bmRlZmluZWQgPyB2YWwgKyBjaCA6IGNoICsgdmFsOyAvKiBpc21pbnVzPyAqL1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVnZXggPSAvJSgtKT8oMD9bMC05XSspPyhbLl1bMC05XSspPyhbI11bMC05XSspPyhbc2NmcGV4ZCVdKS9nO1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4LCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBhcHBlbmQgVGhlIG5ldyBzdHJpbmcgdG8gYXBwZW5kLlxuICAgICAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICBmb3JtYXQoYXBwZW5kLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciArPSBGb3JtYXR0ZXIuZm9ybShhcHBlbmQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBGb3JtYXR0ZXIgc3RyaW5nIHZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIGNsYXNzIERldGVjdGlvblJlc3VsdENvbHVtbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KGJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgIC8vIHRoaXMuY29kZXdvcmRzID0gbmV3IENvZGV3b3JkW2JvdW5kaW5nQm94LmdldE1heFkoKSAtIGJvdW5kaW5nQm94LmdldE1pblkoKSArIDFdO1xuICAgICAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBuZXcgQXJyYXkoYm91bmRpbmdCb3guZ2V0TWF4WSgpIC0gYm91bmRpbmdCb3guZ2V0TWluWSgpICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgLypmaW5hbCovIGdldENvZGV3b3JkTmVhcmJ5KGltYWdlUm93KSB7XG4gICAgICAgICAgICBsZXQgY29kZXdvcmQgPSB0aGlzLmdldENvZGV3b3JkKGltYWdlUm93KTtcbiAgICAgICAgICAgIGlmIChjb2Rld29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGV3b3JkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBEZXRlY3Rpb25SZXN1bHRDb2x1bW4uTUFYX05FQVJCWV9ESVNUQU5DRTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5lYXJJbWFnZVJvdyA9IHRoaXMuaW1hZ2VSb3dUb0NvZGV3b3JkSW5kZXgoaW1hZ2VSb3cpIC0gaTtcbiAgICAgICAgICAgICAgICBpZiAobmVhckltYWdlUm93ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmQgPSB0aGlzLmNvZGV3b3Jkc1tuZWFySW1hZ2VSb3ddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZXdvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvZGV3b3JkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5lYXJJbWFnZVJvdyA9IHRoaXMuaW1hZ2VSb3dUb0NvZGV3b3JkSW5kZXgoaW1hZ2VSb3cpICsgaTtcbiAgICAgICAgICAgICAgICBpZiAobmVhckltYWdlUm93IDwgdGhpcy5jb2Rld29yZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGV3b3JkID0gdGhpcy5jb2Rld29yZHNbbmVhckltYWdlUm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2Rld29yZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8qZmluYWwgaW50Ki8gaW1hZ2VSb3dUb0NvZGV3b3JkSW5kZXgoaW1hZ2VSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiBpbWFnZVJvdyAtIHRoaXMuYm91bmRpbmdCb3guZ2V0TWluWSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qZmluYWwgdm9pZCovIHNldENvZGV3b3JkKGltYWdlUm93LCBjb2Rld29yZCkge1xuICAgICAgICAgICAgdGhpcy5jb2Rld29yZHNbdGhpcy5pbWFnZVJvd1RvQ29kZXdvcmRJbmRleChpbWFnZVJvdyldID0gY29kZXdvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgLypmaW5hbCovIGdldENvZGV3b3JkKGltYWdlUm93KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2Rld29yZHNbdGhpcy5pbWFnZVJvd1RvQ29kZXdvcmRJbmRleChpbWFnZVJvdyldO1xuICAgICAgICB9XG4gICAgICAgIC8qZmluYWwqLyBnZXRCb3VuZGluZ0JveCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94O1xuICAgICAgICB9XG4gICAgICAgIC8qZmluYWwqLyBnZXRDb2Rld29yZHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2Rld29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEZvcm1hdHRlcigpO1xuICAgICAgICAgICAgbGV0IHJvdyA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvZGV3b3JkIG9mIHRoaXMuY29kZXdvcmRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyLmZvcm1hdCgnJTNkOiAgICB8ICAgJW4nLCByb3crKyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCclM2Q6ICUzZHwlM2QlbicsIHJvdysrLCBjb2Rld29yZC5nZXRSb3dOdW1iZXIoKSwgY29kZXdvcmQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVyLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGV0ZWN0aW9uUmVzdWx0Q29sdW1uLk1BWF9ORUFSQllfRElTVEFOQ0UgPSA1O1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuTWFwO1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuTWFwLkVudHJ5O1xuICAgIC8qKlxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIC8qZmluYWwqLyBjbGFzcyBCYXJjb2RlVmFsdWUge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgYW4gb2NjdXJyZW5jZSBvZiBhIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSBNYXRoLnRydW5jKHZhbHVlKTtcbiAgICAgICAgICAgIGxldCBjb25maWRlbmNlID0gdGhpcy52YWx1ZXMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjb25maWRlbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25maWRlbmNlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZGVuY2UrKztcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNldCh2YWx1ZSwgY29uZmlkZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgdGhlIG1heGltdW0gb2NjdXJyZW5jZSBvZiBhIHNldCB2YWx1ZSBhbmQgcmV0dXJucyBhbGwgdmFsdWVzIHdoaWNoIHdlcmUgc2V0IHdpdGggdGhpcyBvY2N1cnJlbmNlLlxuICAgICAgICAgKiBAcmV0dXJuIGFuIGFycmF5IG9mIGludCwgY29udGFpbmluZyB0aGUgdmFsdWVzIHdpdGggdGhlIGhpZ2hlc3Qgb2NjdXJyZW5jZSwgb3IgbnVsbCwgaWYgbm8gdmFsdWUgd2FzIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgICAgICBsZXQgbWF4Q29uZmlkZW5jZSA9IC0xO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy52YWx1ZXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGdldEtleTogKCkgPT4ga2V5LFxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gdmFsdWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuZ2V0VmFsdWUoKSA+IG1heENvbmZpZGVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4Q29uZmlkZW5jZSA9IGVudHJ5LmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbnRyeS5nZXRLZXkoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5LmdldFZhbHVlKCkgPT09IG1heENvbmZpZGVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZW50cnkuZ2V0S2V5KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQREY0MTdDb21tb24udG9JbnRBcnJheShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGdldENvbmZpZGVuY2UodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5nZXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKmZpbmFsKi8gY2xhc3MgRGV0ZWN0aW9uUmVzdWx0Um93SW5kaWNhdG9yQ29sdW1uIGV4dGVuZHMgRGV0ZWN0aW9uUmVzdWx0Q29sdW1uIHtcbiAgICAgICAgY29uc3RydWN0b3IoYm91bmRpbmdCb3gsIGlzTGVmdCkge1xuICAgICAgICAgICAgc3VwZXIoYm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgdGhpcy5faXNMZWZ0ID0gaXNMZWZ0O1xuICAgICAgICB9XG4gICAgICAgIHNldFJvd051bWJlcnMoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2Rld29yZCAvKkNvZGV3b3JkKi8gb2YgdGhpcy5nZXRDb2Rld29yZHMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChjb2Rld29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGV3b3JkLnNldFJvd051bWJlckFzUm93SW5kaWNhdG9yQ29sdW1uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gaW1wbGVtZW50IHByb3Blcmx5XG4gICAgICAgIC8vIFRPRE8gbWF5YmUgd2Ugc2hvdWxkIGFkZCBtaXNzaW5nIGNvZGV3b3JkcyB0byBzdG9yZSB0aGUgY29ycmVjdCByb3cgbnVtYmVyIHRvIG1ha2VcbiAgICAgICAgLy8gZmluZGluZyByb3cgbnVtYmVycyBmb3Igb3RoZXIgY29sdW1ucyBlYXNpZXJcbiAgICAgICAgLy8gdXNlIHJvdyBoZWlnaHQgY291bnQgdG8gbWFrZSBkZXRlY3Rpb24gb2YgaW52YWxpZCByb3cgbnVtYmVycyBtb3JlIHJlbGlhYmxlXG4gICAgICAgIGFkanVzdENvbXBsZXRlSW5kaWNhdG9yQ29sdW1uUm93TnVtYmVycyhiYXJjb2RlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxldCBjb2Rld29yZHMgPSB0aGlzLmdldENvZGV3b3JkcygpO1xuICAgICAgICAgICAgdGhpcy5zZXRSb3dOdW1iZXJzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUluY29ycmVjdENvZGV3b3Jkcyhjb2Rld29yZHMsIGJhcmNvZGVNZXRhZGF0YSk7XG4gICAgICAgICAgICBsZXQgYm91bmRpbmdCb3ggPSB0aGlzLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgICBsZXQgdG9wID0gdGhpcy5faXNMZWZ0ID8gYm91bmRpbmdCb3guZ2V0VG9wTGVmdCgpIDogYm91bmRpbmdCb3guZ2V0VG9wUmlnaHQoKTtcbiAgICAgICAgICAgIGxldCBib3R0b20gPSB0aGlzLl9pc0xlZnQgPyBib3VuZGluZ0JveC5nZXRCb3R0b21MZWZ0KCkgOiBib3VuZGluZ0JveC5nZXRCb3R0b21SaWdodCgpO1xuICAgICAgICAgICAgbGV0IGZpcnN0Um93ID0gdGhpcy5pbWFnZVJvd1RvQ29kZXdvcmRJbmRleChNYXRoLnRydW5jKHRvcC5nZXRZKCkpKTtcbiAgICAgICAgICAgIGxldCBsYXN0Um93ID0gdGhpcy5pbWFnZVJvd1RvQ29kZXdvcmRJbmRleChNYXRoLnRydW5jKGJvdHRvbS5nZXRZKCkpKTtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYmUgY2FyZWZ1bCB1c2luZyB0aGUgYXZlcmFnZSByb3cgaGVpZ2h0LiBCYXJjb2RlIGNvdWxkIGJlIHNrZXdlZCBzbyB0aGF0IHdlIGhhdmUgc21hbGxlciBhbmRcbiAgICAgICAgICAgIC8vIHRhbGxlciByb3dzXG4gICAgICAgICAgICAvLyBmbG9hdCBhdmVyYWdlUm93SGVpZ2h0ID0gKGxhc3RSb3cgLSBmaXJzdFJvdykgLyAvKihmbG9hdCkqLyBiYXJjb2RlTWV0YWRhdGEuZ2V0Um93Q291bnQoKTtcbiAgICAgICAgICAgIGxldCBiYXJjb2RlUm93ID0gLTE7XG4gICAgICAgICAgICBsZXQgbWF4Um93SGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Um93SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gZmlyc3RSb3c7IGNvZGV3b3Jkc1JvdyA8IGxhc3RSb3c7IGNvZGV3b3Jkc1JvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddO1xuICAgICAgICAgICAgICAgIC8vICAgICAgZmxvYXQgZXhwZWN0ZWRSb3dOdW1iZXIgPSAoY29kZXdvcmRzUm93IC0gZmlyc3RSb3cpIC8gYXZlcmFnZVJvd0hlaWdodDtcbiAgICAgICAgICAgICAgICAvLyAgICAgIGlmIChNYXRoLmFicyhjb2Rld29yZC5nZXRSb3dOdW1iZXIoKSAtIGV4cGVjdGVkUm93TnVtYmVyKSA+IDIpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgU2ltcGxlTG9nLmxvZyhMRVZFTC5XQVJOSU5HLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgXCJSZW1vdmluZyBjb2Rld29yZCwgcm93TnVtYmVyU2tldyB0b28gaGlnaCwgY29kZXdvcmRbXCIgKyBjb2Rld29yZHNSb3cgKyBcIl06IEV4cGVjdGVkIFJvdzogXCIgK1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGV4cGVjdGVkUm93TnVtYmVyICsgXCIsIFJlYWxSb3c6IFwiICsgY29kZXdvcmQuZ2V0Um93TnVtYmVyKCkgKyBcIiwgdmFsdWU6IFwiICsgY29kZXdvcmQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvLyAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcm93RGlmZmVyZW5jZSA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpIC0gYmFyY29kZVJvdztcbiAgICAgICAgICAgICAgICAvLyBUT0RPIGltcHJvdmUgaGFuZGxpbmcgd2l0aCBjYXNlIHdoZXJlIGZpcnN0IHJvdyBpbmRpY2F0b3IgZG9lc24ndCBzdGFydCB3aXRoIDBcbiAgICAgICAgICAgICAgICBpZiAocm93RGlmZmVyZW5jZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um93SGVpZ2h0Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvd0RpZmZlcmVuY2UgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4Um93SGVpZ2h0ID0gTWF0aC5tYXgobWF4Um93SGVpZ2h0LCBjdXJyZW50Um93SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvd0hlaWdodCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJhcmNvZGVSb3cgPSBjb2Rld29yZC5nZXRSb3dOdW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocm93RGlmZmVyZW5jZSA8IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmQuZ2V0Um93TnVtYmVyKCkgPj0gYmFyY29kZU1ldGFkYXRhLmdldFJvd0NvdW50KCkgfHxcbiAgICAgICAgICAgICAgICAgICAgcm93RGlmZmVyZW5jZSA+IGNvZGV3b3Jkc1Jvdykge1xuICAgICAgICAgICAgICAgICAgICBjb2Rld29yZHNbY29kZXdvcmRzUm93XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZFJvd3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhSb3dIZWlnaHQgPiAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkUm93cyA9IChtYXhSb3dIZWlnaHQgLSAyKSAqIHJvd0RpZmZlcmVuY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkUm93cyA9IHJvd0RpZmZlcmVuY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NlUHJldmlvdXNDb2Rld29yZEZvdW5kID0gY2hlY2tlZFJvd3MgPj0gY29kZXdvcmRzUm93O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAxOyBpIDw9IGNoZWNrZWRSb3dzICYmICFjbG9zZVByZXZpb3VzQ29kZXdvcmRGb3VuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIChoZWlnaHQgKiByb3dEaWZmZXJlbmNlKSBudW1iZXIgb2YgY29kZXdvcmRzIG1pc3NpbmcuIEZvciBub3cgd2UgYXNzdW1lIGhlaWdodCA9IDEuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBob3BlZnVsbHkgZ2V0IHJpZCBvZiBtb3N0IHByb2JsZW1zIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVByZXZpb3VzQ29kZXdvcmRGb3VuZCA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgLSBpXSAhPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZVByZXZpb3VzQ29kZXdvcmRGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZVJvdyA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvd0hlaWdodCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gKGludCkgKGF2ZXJhZ2VSb3dIZWlnaHQgKyAwLjUpO1xuICAgICAgICB9XG4gICAgICAgIGdldFJvd0hlaWdodHMoKSB7XG4gICAgICAgICAgICBsZXQgYmFyY29kZU1ldGFkYXRhID0gdGhpcy5nZXRCYXJjb2RlTWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChiYXJjb2RlTWV0YWRhdGEgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGp1c3RJbmNvbXBsZXRlSW5kaWNhdG9yQ29sdW1uUm93TnVtYmVycyhiYXJjb2RlTWV0YWRhdGEpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBJbnQzMkFycmF5KGJhcmNvZGVNZXRhZGF0YS5nZXRSb3dDb3VudCgpKTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3JkIC8qQ29kZXdvcmQqLyBvZiB0aGlzLmdldENvZGV3b3JkcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd051bWJlciA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93TnVtYmVyID49IHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgbW9yZSByb3dzIHRoYW4gdGhlIGJhcmNvZGUgbWV0YWRhdGEgYWxsb3dzIGZvciwgaWdub3JlIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcm93TnVtYmVyXSsrO1xuICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB0aHJvdyBleGNlcHRpb24/XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gbWF5YmUgd2Ugc2hvdWxkIGFkZCBtaXNzaW5nIGNvZGV3b3JkcyB0byBzdG9yZSB0aGUgY29ycmVjdCByb3cgbnVtYmVyIHRvIG1ha2VcbiAgICAgICAgLy8gZmluZGluZyByb3cgbnVtYmVycyBmb3Igb3RoZXIgY29sdW1ucyBlYXNpZXJcbiAgICAgICAgLy8gdXNlIHJvdyBoZWlnaHQgY291bnQgdG8gbWFrZSBkZXRlY3Rpb24gb2YgaW52YWxpZCByb3cgbnVtYmVycyBtb3JlIHJlbGlhYmxlXG4gICAgICAgIGFkanVzdEluY29tcGxldGVJbmRpY2F0b3JDb2x1bW5Sb3dOdW1iZXJzKGJhcmNvZGVNZXRhZGF0YSkge1xuICAgICAgICAgICAgbGV0IGJvdW5kaW5nQm94ID0gdGhpcy5nZXRCb3VuZGluZ0JveCgpO1xuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMuX2lzTGVmdCA/IGJvdW5kaW5nQm94LmdldFRvcExlZnQoKSA6IGJvdW5kaW5nQm94LmdldFRvcFJpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgYm90dG9tID0gdGhpcy5faXNMZWZ0ID8gYm91bmRpbmdCb3guZ2V0Qm90dG9tTGVmdCgpIDogYm91bmRpbmdCb3guZ2V0Qm90dG9tUmlnaHQoKTtcbiAgICAgICAgICAgIGxldCBmaXJzdFJvdyA9IHRoaXMuaW1hZ2VSb3dUb0NvZGV3b3JkSW5kZXgoTWF0aC50cnVuYyh0b3AuZ2V0WSgpKSk7XG4gICAgICAgICAgICBsZXQgbGFzdFJvdyA9IHRoaXMuaW1hZ2VSb3dUb0NvZGV3b3JkSW5kZXgoTWF0aC50cnVuYyhib3R0b20uZ2V0WSgpKSk7XG4gICAgICAgICAgICAvLyBmbG9hdCBhdmVyYWdlUm93SGVpZ2h0ID0gKGxhc3RSb3cgLSBmaXJzdFJvdykgLyAvKihmbG9hdCkqLyBiYXJjb2RlTWV0YWRhdGEuZ2V0Um93Q291bnQoKTtcbiAgICAgICAgICAgIGxldCBjb2Rld29yZHMgPSB0aGlzLmdldENvZGV3b3JkcygpO1xuICAgICAgICAgICAgbGV0IGJhcmNvZGVSb3cgPSAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gZmlyc3RSb3c7IGNvZGV3b3Jkc1JvdyA8IGxhc3RSb3c7IGNvZGV3b3Jkc1JvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddO1xuICAgICAgICAgICAgICAgIGNvZGV3b3JkLnNldFJvd051bWJlckFzUm93SW5kaWNhdG9yQ29sdW1uKCk7XG4gICAgICAgICAgICAgICAgbGV0IHJvd0RpZmZlcmVuY2UgPSBjb2Rld29yZC5nZXRSb3dOdW1iZXIoKSAtIGJhcmNvZGVSb3c7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBpbXByb3ZlIGhhbmRsaW5nIHdpdGggY2FzZSB3aGVyZSBmaXJzdCByb3cgaW5kaWNhdG9yIGRvZXNuJ3Qgc3RhcnQgd2l0aCAwXG4gICAgICAgICAgICAgICAgaWYgKHJvd0RpZmZlcmVuY2UgPT09IDApIDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3dEaWZmZXJlbmNlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhcmNvZGVSb3cgPSBjb2Rld29yZC5nZXRSb3dOdW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZXdvcmQuZ2V0Um93TnVtYmVyKCkgPj0gYmFyY29kZU1ldGFkYXRhLmdldFJvd0NvdW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd10gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFyY29kZVJvdyA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiAoaW50KSAoYXZlcmFnZVJvd0hlaWdodCArIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0QmFyY29kZU1ldGFkYXRhKCkge1xuICAgICAgICAgICAgbGV0IGNvZGV3b3JkcyA9IHRoaXMuZ2V0Q29kZXdvcmRzKCk7XG4gICAgICAgICAgICBsZXQgYmFyY29kZUNvbHVtbkNvdW50ID0gbmV3IEJhcmNvZGVWYWx1ZSgpO1xuICAgICAgICAgICAgbGV0IGJhcmNvZGVSb3dDb3VudFVwcGVyUGFydCA9IG5ldyBCYXJjb2RlVmFsdWUoKTtcbiAgICAgICAgICAgIGxldCBiYXJjb2RlUm93Q291bnRMb3dlclBhcnQgPSBuZXcgQmFyY29kZVZhbHVlKCk7XG4gICAgICAgICAgICBsZXQgYmFyY29kZUVDTGV2ZWwgPSBuZXcgQmFyY29kZVZhbHVlKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2Rld29yZCAvKkNvZGV3b3JkKi8gb2YgY29kZXdvcmRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvZGV3b3JkLnNldFJvd051bWJlckFzUm93SW5kaWNhdG9yQ29sdW1uKCk7XG4gICAgICAgICAgICAgICAgbGV0IHJvd0luZGljYXRvclZhbHVlID0gY29kZXdvcmQuZ2V0VmFsdWUoKSAlIDMwO1xuICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZFJvd051bWJlciA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNMZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGV3b3JkUm93TnVtYmVyICs9IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29kZXdvcmRSb3dOdW1iZXIgJSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhcmNvZGVSb3dDb3VudFVwcGVyUGFydC5zZXRWYWx1ZShyb3dJbmRpY2F0b3JWYWx1ZSAqIDMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlRUNMZXZlbC5zZXRWYWx1ZShyb3dJbmRpY2F0b3JWYWx1ZSAvIDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZVJvd0NvdW50TG93ZXJQYXJ0LnNldFZhbHVlKHJvd0luZGljYXRvclZhbHVlICUgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgYmFyY29kZUNvbHVtbkNvdW50LnNldFZhbHVlKHJvd0luZGljYXRvclZhbHVlICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYXliZSB3ZSBzaG91bGQgY2hlY2sgaWYgd2UgaGF2ZSBhbWJpZ3VvdXMgdmFsdWVzP1xuICAgICAgICAgICAgaWYgKChiYXJjb2RlQ29sdW1uQ291bnQuZ2V0VmFsdWUoKS5sZW5ndGggPT09IDApIHx8XG4gICAgICAgICAgICAgICAgKGJhcmNvZGVSb3dDb3VudFVwcGVyUGFydC5nZXRWYWx1ZSgpLmxlbmd0aCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAoYmFyY29kZVJvd0NvdW50TG93ZXJQYXJ0LmdldFZhbHVlKCkubGVuZ3RoID09PSAwKSB8fFxuICAgICAgICAgICAgICAgIChiYXJjb2RlRUNMZXZlbC5nZXRWYWx1ZSgpLmxlbmd0aCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICBiYXJjb2RlQ29sdW1uQ291bnQuZ2V0VmFsdWUoKVswXSA8IDEgfHxcbiAgICAgICAgICAgICAgICBiYXJjb2RlUm93Q291bnRVcHBlclBhcnQuZ2V0VmFsdWUoKVswXSArIGJhcmNvZGVSb3dDb3VudExvd2VyUGFydC5nZXRWYWx1ZSgpWzBdIDwgUERGNDE3Q29tbW9uLk1JTl9ST1dTX0lOX0JBUkNPREUgfHxcbiAgICAgICAgICAgICAgICBiYXJjb2RlUm93Q291bnRVcHBlclBhcnQuZ2V0VmFsdWUoKVswXSArIGJhcmNvZGVSb3dDb3VudExvd2VyUGFydC5nZXRWYWx1ZSgpWzBdID4gUERGNDE3Q29tbW9uLk1BWF9ST1dTX0lOX0JBUkNPREUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBiYXJjb2RlTWV0YWRhdGEgPSBuZXcgQmFyY29kZU1ldGFkYXRhKGJhcmNvZGVDb2x1bW5Db3VudC5nZXRWYWx1ZSgpWzBdLCBiYXJjb2RlUm93Q291bnRVcHBlclBhcnQuZ2V0VmFsdWUoKVswXSwgYmFyY29kZVJvd0NvdW50TG93ZXJQYXJ0LmdldFZhbHVlKClbMF0sIGJhcmNvZGVFQ0xldmVsLmdldFZhbHVlKClbMF0pO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVJbmNvcnJlY3RDb2Rld29yZHMoY29kZXdvcmRzLCBiYXJjb2RlTWV0YWRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIGJhcmNvZGVNZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVJbmNvcnJlY3RDb2Rld29yZHMoY29kZXdvcmRzLCBiYXJjb2RlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBjb2Rld29yZHMgd2hpY2ggZG8gbm90IG1hdGNoIHRoZSBtZXRhZGF0YVxuICAgICAgICAgICAgLy8gVE9ETyBNYXliZSB3ZSBzaG91bGQga2VlcCB0aGUgaW5jb3JyZWN0IGNvZGV3b3JkcyBmb3IgdGhlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zP1xuICAgICAgICAgICAgZm9yIChsZXQgY29kZXdvcmRSb3cgLyppbnQqLyA9IDA7IGNvZGV3b3JkUm93IDwgY29kZXdvcmRzLmxlbmd0aDsgY29kZXdvcmRSb3crKykge1xuICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IGNvZGV3b3Jkc1tjb2Rld29yZFJvd107XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1tjb2Rld29yZFJvd10gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJvd0luZGljYXRvclZhbHVlID0gY29kZXdvcmQuZ2V0VmFsdWUoKSAlIDMwO1xuICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZFJvd051bWJlciA9IGNvZGV3b3JkLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgIGlmIChjb2Rld29yZFJvd051bWJlciA+IGJhcmNvZGVNZXRhZGF0YS5nZXRSb3dDb3VudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGV3b3Jkc1tjb2Rld29yZFJvd10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0xlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRSb3dOdW1iZXIgKz0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb2Rld29yZFJvd051bWJlciAlIDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGljYXRvclZhbHVlICogMyArIDEgIT09IGJhcmNvZGVNZXRhZGF0YS5nZXRSb3dDb3VudFVwcGVyUGFydCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzW2NvZGV3b3JkUm93XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgudHJ1bmMocm93SW5kaWNhdG9yVmFsdWUgLyAzKSAhPT0gYmFyY29kZU1ldGFkYXRhLmdldEVycm9yQ29ycmVjdGlvbkxldmVsKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRpY2F0b3JWYWx1ZSAlIDMgIT09IGJhcmNvZGVNZXRhZGF0YS5nZXRSb3dDb3VudExvd2VyUGFydCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzW2NvZGV3b3JkUm93XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGljYXRvclZhbHVlICsgMSAhPT0gYmFyY29kZU1ldGFkYXRhLmdldENvbHVtbkNvdW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2Rld29yZHNbY29kZXdvcmRSb3ddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc0xlZnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNMZWZ0O1xuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiAnSXNMZWZ0OiAnICsgdGhpcy5faXNMZWZ0ICsgJ1xcbicgKyBzdXBlci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKmZpbmFsKi8gY2xhc3MgRGV0ZWN0aW9uUmVzdWx0IHtcbiAgICAgICAgY29uc3RydWN0b3IoYmFyY29kZU1ldGFkYXRhLCBib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgLypmaW5hbCovIHRoaXMuQURKVVNUX1JPV19OVU1CRVJfU0tJUCA9IDI7XG4gICAgICAgICAgICB0aGlzLmJhcmNvZGVNZXRhZGF0YSA9IGJhcmNvZGVNZXRhZGF0YTtcbiAgICAgICAgICAgIHRoaXMuYmFyY29kZUNvbHVtbkNvdW50ID0gYmFyY29kZU1ldGFkYXRhLmdldENvbHVtbkNvdW50KCk7XG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gYm91bmRpbmdCb3g7XG4gICAgICAgICAgICAvLyB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnMgPSBuZXcgRGV0ZWN0aW9uUmVzdWx0Q29sdW1uW3RoaXMuYmFyY29kZUNvbHVtbkNvdW50ICsgMl07XG4gICAgICAgICAgICB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnMgPSBuZXcgQXJyYXkodGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAyKTtcbiAgICAgICAgfVxuICAgICAgICBnZXREZXRlY3Rpb25SZXN1bHRDb2x1bW5zKCkge1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RJbmRpY2F0b3JDb2x1bW5Sb3dOdW1iZXJzKHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1swXSk7XG4gICAgICAgICAgICB0aGlzLmFkanVzdEluZGljYXRvckNvbHVtblJvd051bWJlcnModGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW3RoaXMuYmFyY29kZUNvbHVtbkNvdW50ICsgMV0pO1xuICAgICAgICAgICAgbGV0IHVuYWRqdXN0ZWRDb2Rld29yZENvdW50ID0gUERGNDE3Q29tbW9uLk1BWF9DT0RFV09SRFNfSU5fQkFSQ09ERTtcbiAgICAgICAgICAgIGxldCBwcmV2aW91c1VuYWRqdXN0ZWRDb3VudDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1VuYWRqdXN0ZWRDb3VudCA9IHVuYWRqdXN0ZWRDb2Rld29yZENvdW50O1xuICAgICAgICAgICAgICAgIHVuYWRqdXN0ZWRDb2Rld29yZENvdW50ID0gdGhpcy5hZGp1c3RSb3dOdW1iZXJzQW5kR2V0Q291bnQoKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKHVuYWRqdXN0ZWRDb2Rld29yZENvdW50ID4gMCAmJiB1bmFkanVzdGVkQ29kZXdvcmRDb3VudCA8IHByZXZpb3VzVW5hZGp1c3RlZENvdW50KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnM7XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0SW5kaWNhdG9yQ29sdW1uUm93TnVtYmVycyhkZXRlY3Rpb25SZXN1bHRDb2x1bW4pIHtcbiAgICAgICAgICAgIGlmIChkZXRlY3Rpb25SZXN1bHRDb2x1bW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGRldGVjdGlvblJlc3VsdENvbHVtblxuICAgICAgICAgICAgICAgICAgICAuYWRqdXN0Q29tcGxldGVJbmRpY2F0b3JDb2x1bW5Sb3dOdW1iZXJzKHRoaXMuYmFyY29kZU1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIGVuc3VyZSB0aGF0IG5vIGRldGVjdGVkIGNvZGV3b3JkcyB3aXRoIHVua25vd24gcm93IG51bWJlciBhcmUgbGVmdFxuICAgICAgICAvLyB3ZSBzaG91bGQgYmUgYWJsZSB0byBlc3RpbWF0ZSB0aGUgcm93IGhlaWdodCBhbmQgdXNlIGl0IGFzIGEgaGludCBmb3IgdGhlIHJvdyBudW1iZXJcbiAgICAgICAgLy8gd2Ugc2hvdWxkIGFsc28gZmlsbCB0aGUgcm93cyB0b3AgdG8gYm90dG9tIGFuZCBib3R0b20gdG8gdG9wXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBjb2Rld29yZHMgd2hpY2ggZG9uJ3QgaGF2ZSBhIHZhbGlkIHJvdyBudW1iZXIuIE5vdGUgdGhhdCB0aGUgY291bnQgaXMgbm90IGFjY3VyYXRlIGFzIGNvZGV3b3Jkc1xuICAgICAgICAgKiB3aWxsIGJlIGNvdW50ZWQgc2V2ZXJhbCB0aW1lcy4gSXQganVzdCBzZXJ2ZXMgYXMgYW4gaW5kaWNhdG9yIHRvIHNlZSB3aGVuIHdlIGNhbiBzdG9wIGFkanVzdGluZyByb3cgbnVtYmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgYWRqdXN0Um93TnVtYmVyc0FuZEdldENvdW50KCkge1xuICAgICAgICAgICAgbGV0IHVuYWRqdXN0ZWRDb3VudCA9IHRoaXMuYWRqdXN0Um93TnVtYmVyc0J5Um93KCk7XG4gICAgICAgICAgICBpZiAodW5hZGp1c3RlZENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBiYXJjb2RlQ29sdW1uIC8qaW50Ki8gPSAxOyBiYXJjb2RlQ29sdW1uIDwgdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAxOyBiYXJjb2RlQ29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY29kZXdvcmRzID0gdGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW2JhcmNvZGVDb2x1bW5dLmdldENvZGV3b3JkcygpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gMDsgY29kZXdvcmRzUm93IDwgY29kZXdvcmRzLmxlbmd0aDsgY29kZXdvcmRzUm93KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd10uaGFzVmFsaWRSb3dOdW1iZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RSb3dOdW1iZXJzKGJhcmNvZGVDb2x1bW4sIGNvZGV3b3Jkc1JvdywgY29kZXdvcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmFkanVzdGVkQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0Um93TnVtYmVyc0J5Um93KCkge1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RSb3dOdW1iZXJzRnJvbUJvdGhSSSgpO1xuICAgICAgICAgICAgLy8gVE9ETyB3ZSBzaG91bGQgb25seSBkbyBmdWxsIHJvdyBhZGp1c3RtZW50cyBpZiByb3cgbnVtYmVycyBvZiBsZWZ0IGFuZCByaWdodCByb3cgaW5kaWNhdG9yIGNvbHVtbiBtYXRjaC5cbiAgICAgICAgICAgIC8vIE1heWJlIGl0J3MgZXZlbiBiZXR0ZXIgdG8gY2FsY3VsYXRlZCB0aGUgaGVpZ2h0IChyb3dzOiBkKSBhbmQgZGl2aWRlIGl0IGJ5IHRoZSBudW1iZXIgb2YgYmFyY29kZVxuICAgICAgICAgICAgLy8gcm93cy4gVGhpcywgdG9nZXRoZXIgd2l0aCB0aGUgTFJJIGFuZCBSUkkgcm93IG51bWJlcnMgc2hvdWxkIGFsbG93IHVzIHRvIGdldCBhIGdvb2QgZXN0aW1hdGUgd2hlcmUgYSByb3dcbiAgICAgICAgICAgIC8vIG51bWJlciBzdGFydHMgYW5kIGVuZHMuXG4gICAgICAgICAgICBsZXQgdW5hZGp1c3RlZENvdW50ID0gdGhpcy5hZGp1c3RSb3dOdW1iZXJzRnJvbUxSSSgpO1xuICAgICAgICAgICAgcmV0dXJuIHVuYWRqdXN0ZWRDb3VudCArIHRoaXMuYWRqdXN0Um93TnVtYmVyc0Zyb21SUkkoKTtcbiAgICAgICAgfVxuICAgICAgICBhZGp1c3RSb3dOdW1iZXJzRnJvbUJvdGhSSSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbMF0gPT0gbnVsbCB8fCB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAxXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IExSSWNvZGV3b3JkcyA9IHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1swXS5nZXRDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIGxldCBSUkljb2Rld29yZHMgPSB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAxXS5nZXRDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gMDsgY29kZXdvcmRzUm93IDwgTFJJY29kZXdvcmRzLmxlbmd0aDsgY29kZXdvcmRzUm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoTFJJY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd10gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICBSUkljb2Rld29yZHNbY29kZXdvcmRzUm93XSAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIExSSWNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddLmdldFJvd051bWJlcigpID09PSBSUkljb2Rld29yZHNbY29kZXdvcmRzUm93XS5nZXRSb3dOdW1iZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiYXJjb2RlQ29sdW1uIC8qaW50Ki8gPSAxOyBiYXJjb2RlQ29sdW1uIDw9IHRoaXMuYmFyY29kZUNvbHVtbkNvdW50OyBiYXJjb2RlQ29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1tiYXJjb2RlQ29sdW1uXS5nZXRDb2Rld29yZHMoKVtjb2Rld29yZHNSb3ddO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGV3b3JkLnNldFJvd051bWJlcihMUkljb2Rld29yZHNbY29kZXdvcmRzUm93XS5nZXRSb3dOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvZGV3b3JkLmhhc1ZhbGlkUm93TnVtYmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbl0uZ2V0Q29kZXdvcmRzKClbY29kZXdvcmRzUm93XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0Um93TnVtYmVyc0Zyb21SUkkoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW3RoaXMuYmFyY29kZUNvbHVtbkNvdW50ICsgMV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHVuYWRqdXN0ZWRDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgY29kZXdvcmRzID0gdGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW3RoaXMuYmFyY29kZUNvbHVtbkNvdW50ICsgMV0uZ2V0Q29kZXdvcmRzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2Rld29yZHNSb3cgLyppbnQqLyA9IDA7IGNvZGV3b3Jkc1JvdyA8IGNvZGV3b3Jkcy5sZW5ndGg7IGNvZGV3b3Jkc1JvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByb3dJbmRpY2F0b3JSb3dOdW1iZXIgPSBjb2Rld29yZHNbY29kZXdvcmRzUm93XS5nZXRSb3dOdW1iZXIoKTtcbiAgICAgICAgICAgICAgICBsZXQgaW52YWxpZFJvd0NvdW50cyA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYmFyY29kZUNvbHVtbiAvKmludCovID0gdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAxOyBiYXJjb2RlQ29sdW1uID4gMCAmJiBpbnZhbGlkUm93Q291bnRzIDwgdGhpcy5BREpVU1RfUk9XX05VTUJFUl9TS0lQOyBiYXJjb2RlQ29sdW1uLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGV3b3JkID0gdGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW2JhcmNvZGVDb2x1bW5dLmdldENvZGV3b3JkcygpW2NvZGV3b3Jkc1Jvd107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2Rld29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUm93Q291bnRzID0gRGV0ZWN0aW9uUmVzdWx0LmFkanVzdFJvd051bWJlcklmVmFsaWQocm93SW5kaWNhdG9yUm93TnVtYmVyLCBpbnZhbGlkUm93Q291bnRzLCBjb2Rld29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvZGV3b3JkLmhhc1ZhbGlkUm93TnVtYmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmFkanVzdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmFkanVzdGVkQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0Um93TnVtYmVyc0Zyb21MUkkoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zWzBdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB1bmFkanVzdGVkQ291bnQgPSAwO1xuICAgICAgICAgICAgbGV0IGNvZGV3b3JkcyA9IHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1swXS5nZXRDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gMDsgY29kZXdvcmRzUm93IDwgY29kZXdvcmRzLmxlbmd0aDsgY29kZXdvcmRzUm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd10gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJvd0luZGljYXRvclJvd051bWJlciA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddLmdldFJvd051bWJlcigpO1xuICAgICAgICAgICAgICAgIGxldCBpbnZhbGlkUm93Q291bnRzID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBiYXJjb2RlQ29sdW1uIC8qaW50Ki8gPSAxOyBiYXJjb2RlQ29sdW1uIDwgdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAxICYmIGludmFsaWRSb3dDb3VudHMgPCB0aGlzLkFESlVTVF9ST1dfTlVNQkVSX1NLSVA7IGJhcmNvZGVDb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29kZXdvcmQgPSB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbl0uZ2V0Q29kZXdvcmRzKClbY29kZXdvcmRzUm93XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRSb3dDb3VudHMgPSBEZXRlY3Rpb25SZXN1bHQuYWRqdXN0Um93TnVtYmVySWZWYWxpZChyb3dJbmRpY2F0b3JSb3dOdW1iZXIsIGludmFsaWRSb3dDb3VudHMsIGNvZGV3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29kZXdvcmQuaGFzVmFsaWRSb3dOdW1iZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuYWRqdXN0ZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuYWRqdXN0ZWRDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgYWRqdXN0Um93TnVtYmVySWZWYWxpZChyb3dJbmRpY2F0b3JSb3dOdW1iZXIsIGludmFsaWRSb3dDb3VudHMsIGNvZGV3b3JkKSB7XG4gICAgICAgICAgICBpZiAoY29kZXdvcmQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnZhbGlkUm93Q291bnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjb2Rld29yZC5oYXNWYWxpZFJvd051bWJlcigpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkLmlzVmFsaWRSb3dOdW1iZXIocm93SW5kaWNhdG9yUm93TnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb2Rld29yZC5zZXRSb3dOdW1iZXIocm93SW5kaWNhdG9yUm93TnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFJvd0NvdW50cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICArK2ludmFsaWRSb3dDb3VudHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGludmFsaWRSb3dDb3VudHM7XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0Um93TnVtYmVycyhiYXJjb2RlQ29sdW1uLCBjb2Rld29yZHNSb3csIGNvZGV3b3Jkcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbiAtIDFdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNvZGV3b3JkID0gY29kZXdvcmRzW2NvZGV3b3Jkc1Jvd107XG4gICAgICAgICAgICBsZXQgcHJldmlvdXNDb2x1bW5Db2Rld29yZHMgPSB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbiAtIDFdLmdldENvZGV3b3JkcygpO1xuICAgICAgICAgICAgbGV0IG5leHRDb2x1bW5Db2Rld29yZHMgPSBwcmV2aW91c0NvbHVtbkNvZGV3b3JkcztcbiAgICAgICAgICAgIGlmICh0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbiArIDFdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXh0Q29sdW1uQ29kZXdvcmRzID0gdGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW2JhcmNvZGVDb2x1bW4gKyAxXS5nZXRDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxldCBvdGhlckNvZGV3b3JkczogQ29kZXdvcmRbXSA9IG5ldyBDb2Rld29yZFsxNF07XG4gICAgICAgICAgICBsZXQgb3RoZXJDb2Rld29yZHMgPSBuZXcgQXJyYXkoMTQpO1xuICAgICAgICAgICAgb3RoZXJDb2Rld29yZHNbMl0gPSBwcmV2aW91c0NvbHVtbkNvZGV3b3Jkc1tjb2Rld29yZHNSb3ddO1xuICAgICAgICAgICAgb3RoZXJDb2Rld29yZHNbM10gPSBuZXh0Q29sdW1uQ29kZXdvcmRzW2NvZGV3b3Jkc1Jvd107XG4gICAgICAgICAgICBpZiAoY29kZXdvcmRzUm93ID4gMCkge1xuICAgICAgICAgICAgICAgIG90aGVyQ29kZXdvcmRzWzBdID0gY29kZXdvcmRzW2NvZGV3b3Jkc1JvdyAtIDFdO1xuICAgICAgICAgICAgICAgIG90aGVyQ29kZXdvcmRzWzRdID0gcHJldmlvdXNDb2x1bW5Db2Rld29yZHNbY29kZXdvcmRzUm93IC0gMV07XG4gICAgICAgICAgICAgICAgb3RoZXJDb2Rld29yZHNbNV0gPSBuZXh0Q29sdW1uQ29kZXdvcmRzW2NvZGV3b3Jkc1JvdyAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1JvdyA+IDEpIHtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1s4XSA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgLSAyXTtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1sxMF0gPSBwcmV2aW91c0NvbHVtbkNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgLSAyXTtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1sxMV0gPSBuZXh0Q29sdW1uQ29kZXdvcmRzW2NvZGV3b3Jkc1JvdyAtIDJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZGV3b3Jkc1JvdyA8IGNvZGV3b3Jkcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJDb2Rld29yZHNbMV0gPSBjb2Rld29yZHNbY29kZXdvcmRzUm93ICsgMV07XG4gICAgICAgICAgICAgICAgb3RoZXJDb2Rld29yZHNbNl0gPSBwcmV2aW91c0NvbHVtbkNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgKyAxXTtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1s3XSA9IG5leHRDb2x1bW5Db2Rld29yZHNbY29kZXdvcmRzUm93ICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29kZXdvcmRzUm93IDwgY29kZXdvcmRzLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1s5XSA9IGNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgKyAyXTtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1sxMl0gPSBwcmV2aW91c0NvbHVtbkNvZGV3b3Jkc1tjb2Rld29yZHNSb3cgKyAyXTtcbiAgICAgICAgICAgICAgICBvdGhlckNvZGV3b3Jkc1sxM10gPSBuZXh0Q29sdW1uQ29kZXdvcmRzW2NvZGV3b3Jkc1JvdyArIDJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgb3RoZXJDb2Rld29yZCBvZiBvdGhlckNvZGV3b3Jkcykge1xuICAgICAgICAgICAgICAgIGlmIChEZXRlY3Rpb25SZXN1bHQuYWRqdXN0Um93TnVtYmVyKGNvZGV3b3JkLCBvdGhlckNvZGV3b3JkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRydWUsIGlmIHJvdyBudW1iZXIgd2FzIGFkanVzdGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhZGp1c3RSb3dOdW1iZXIoY29kZXdvcmQsIG90aGVyQ29kZXdvcmQpIHtcbiAgICAgICAgICAgIGlmIChvdGhlckNvZGV3b3JkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3RoZXJDb2Rld29yZC5oYXNWYWxpZFJvd051bWJlcigpICYmIG90aGVyQ29kZXdvcmQuZ2V0QnVja2V0KCkgPT09IGNvZGV3b3JkLmdldEJ1Y2tldCgpKSB7XG4gICAgICAgICAgICAgICAgY29kZXdvcmQuc2V0Um93TnVtYmVyKG90aGVyQ29kZXdvcmQuZ2V0Um93TnVtYmVyKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGdldEJhcmNvZGVDb2x1bW5Db3VudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhcmNvZGVDb2x1bW5Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBnZXRCYXJjb2RlUm93Q291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYXJjb2RlTWV0YWRhdGEuZ2V0Um93Q291bnQoKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRCYXJjb2RlRUNMZXZlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhcmNvZGVNZXRhZGF0YS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCgpO1xuICAgICAgICB9XG4gICAgICAgIHNldEJvdW5kaW5nQm94KGJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gYm91bmRpbmdCb3g7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Qm91bmRpbmdCb3goKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3VuZGluZ0JveDtcbiAgICAgICAgfVxuICAgICAgICBzZXREZXRlY3Rpb25SZXN1bHRDb2x1bW4oYmFyY29kZUNvbHVtbiwgZGV0ZWN0aW9uUmVzdWx0Q29sdW1uKSB7XG4gICAgICAgICAgICB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbl0gPSBkZXRlY3Rpb25SZXN1bHRDb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RGV0ZWN0aW9uUmVzdWx0Q29sdW1uKGJhcmNvZGVDb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGVjdGlvblJlc3VsdENvbHVtbnNbYmFyY29kZUNvbHVtbl07XG4gICAgICAgIH1cbiAgICAgICAgLy8gQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgbGV0IHJvd0luZGljYXRvckNvbHVtbiA9IHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1swXTtcbiAgICAgICAgICAgIGlmIChyb3dJbmRpY2F0b3JDb2x1bW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJvd0luZGljYXRvckNvbHVtbiA9IHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1t0aGlzLmJhcmNvZGVDb2x1bW5Db3VudCArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJ5IChcbiAgICAgICAgICAgIGxldCBmb3JtYXR0ZXIgPSBuZXcgRm9ybWF0dGVyKCk7XG4gICAgICAgICAgICAvLyApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvZGV3b3Jkc1JvdyAvKmludCovID0gMDsgY29kZXdvcmRzUm93IDwgcm93SW5kaWNhdG9yQ29sdW1uLmdldENvZGV3b3JkcygpLmxlbmd0aDsgY29kZXdvcmRzUm93KyspIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCdDVyAlM2Q6JywgY29kZXdvcmRzUm93KTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBiYXJjb2RlQ29sdW1uIC8qaW50Ki8gPSAwOyBiYXJjb2RlQ29sdW1uIDwgdGhpcy5iYXJjb2RlQ29sdW1uQ291bnQgKyAyOyBiYXJjb2RlQ29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGV0ZWN0aW9uUmVzdWx0Q29sdW1uc1tiYXJjb2RlQ29sdW1uXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCcgICAgfCAgICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGV3b3JkID0gdGhpcy5kZXRlY3Rpb25SZXN1bHRDb2x1bW5zW2JhcmNvZGVDb2x1bW5dLmdldENvZGV3b3JkcygpW2NvZGV3b3Jkc1Jvd107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2Rld29yZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCcgICAgfCAgICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyLmZvcm1hdCgnICUzZHwlM2QnLCBjb2Rld29yZC5nZXRSb3dOdW1iZXIoKSwgY29kZXdvcmQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcm1hdHRlci5mb3JtYXQoJyVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8vIHBhY2thZ2UgY29tLmdvb2dsZS56eGluZy5wZGY0MTcuZGVjb2RlcjtcbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKmZpbmFsKi8gY2xhc3MgQ29kZXdvcmQge1xuICAgICAgICBjb25zdHJ1Y3RvcihzdGFydFgsIGVuZFgsIGJ1Y2tldCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucm93TnVtYmVyID0gQ29kZXdvcmQuQkFSQ09ERV9ST1dfVU5LTk9XTjtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRYID0gTWF0aC50cnVuYyhzdGFydFgpO1xuICAgICAgICAgICAgdGhpcy5lbmRYID0gTWF0aC50cnVuYyhlbmRYKTtcbiAgICAgICAgICAgIHRoaXMuYnVja2V0ID0gTWF0aC50cnVuYyhidWNrZXQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IE1hdGgudHJ1bmModmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGhhc1ZhbGlkUm93TnVtYmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZFJvd051bWJlcih0aGlzLnJvd051bWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgaXNWYWxpZFJvd051bWJlcihyb3dOdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByb3dOdW1iZXIgIT09IENvZGV3b3JkLkJBUkNPREVfUk9XX1VOS05PV04gJiYgdGhpcy5idWNrZXQgPT09IChyb3dOdW1iZXIgJSAzKSAqIDM7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Um93TnVtYmVyQXNSb3dJbmRpY2F0b3JDb2x1bW4oKSB7XG4gICAgICAgICAgICB0aGlzLnJvd051bWJlciA9IE1hdGgudHJ1bmMoKE1hdGgudHJ1bmModGhpcy52YWx1ZSAvIDMwKSkgKiAzICsgTWF0aC50cnVuYyh0aGlzLmJ1Y2tldCAvIDMpKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuZFggLSB0aGlzLnN0YXJ0WDtcbiAgICAgICAgfVxuICAgICAgICBnZXRTdGFydFgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydFg7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RW5kWCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuZFg7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0QnVja2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVja2V0O1xuICAgICAgICB9XG4gICAgICAgIGdldFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0Um93TnVtYmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93TnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIHNldFJvd051bWJlcihyb3dOdW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMucm93TnVtYmVyID0gcm93TnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIC8vICAgQE92ZXJyaWRlXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93TnVtYmVyICsgJ3wnICsgdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDb2Rld29yZC5CQVJDT0RFX1JPV19VTktOT1dOID0gLTE7XG5cbiAgICAvKlxuICAgICogQ29weXJpZ2h0IDIwMTMgWlhpbmcgYXV0aG9yc1xuICAgICpcbiAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAqXG4gICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICpcbiAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgKi9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKiBAYXV0aG9yIGNyZWF0YWxlIEdtYkggKGNocmlzdG9waC5zY2h1bHpAY3JlYXRhbGUuZGUpXG4gICAgICovXG4gICAgLypmaW5hbCovIGNsYXNzIFBERjQxN0NvZGV3b3JkRGVjb2RlciB7XG4gICAgICAgIC8qIEBub3RlXG4gICAgICAgICAqIHRoaXMgYWN0aW9uIGhhdmUgdG8gYmUgcGVyZm9ybWVkIGJlZm9yZSBmaXJzdCB1c2Ugb2YgY2xhc3NcbiAgICAgICAgICogLSBzdGF0aWMgY29uc3RydWN0b3JcbiAgICAgICAgICogd29ya2luZyB3aXRoIDMyYml0IGZsb2F0IChiYXNlZCBmcm9tIEphdmEgbG9naWMpXG4gICAgICAgICovXG4gICAgICAgIHN0YXRpYyBpbml0aWFsaXplKCkge1xuICAgICAgICAgICAgLy8gUHJlLWNvbXB1dGVzIHRoZSBzeW1ib2wgcmF0aW8gdGFibGUuXG4gICAgICAgICAgICBmb3IgKCAvKmludCovbGV0IGkgPSAwOyBpIDwgUERGNDE3Q29tbW9uLlNZTUJPTF9UQUJMRS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U3ltYm9sID0gUERGNDE3Q29tbW9uLlNZTUJPTF9UQUJMRVtpXTtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJpdCA9IGN1cnJlbnRTeW1ib2wgJiAweDE7XG4gICAgICAgICAgICAgICAgZm9yICggLyppbnQqL2xldCBqID0gMDsgaiA8IFBERjQxN0NvbW1vbi5CQVJTX0lOX01PRFVMRTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaXplID0gMC4wO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGN1cnJlbnRTeW1ib2wgJiAweDEpID09PSBjdXJyZW50Qml0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTeW1ib2wgPj49IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJpdCA9IGN1cnJlbnRTeW1ib2wgJiAweDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICghUERGNDE3Q29kZXdvcmREZWNvZGVyLlJBVElPU19UQUJMRVtpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUERGNDE3Q29kZXdvcmREZWNvZGVyLlJBVElPU19UQUJMRVtpXSA9IG5ldyBBcnJheShQREY0MTdDb21tb24uQkFSU19JTl9NT0RVTEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFBERjQxN0NvZGV3b3JkRGVjb2Rlci5SQVRJT1NfVEFCTEVbaV1bUERGNDE3Q29tbW9uLkJBUlNfSU5fTU9EVUxFIC0gaiAtIDFdID0gTWF0aC5mcm91bmQoc2l6ZSAvIFBERjQxN0NvbW1vbi5NT0RVTEVTX0lOX0NPREVXT1JEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJTeW1ib2xUYWJsZVJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0RGVjb2RlZFZhbHVlKG1vZHVsZUJpdENvdW50KSB7XG4gICAgICAgICAgICBsZXQgZGVjb2RlZFZhbHVlID0gUERGNDE3Q29kZXdvcmREZWNvZGVyLmdldERlY29kZWRDb2Rld29yZFZhbHVlKFBERjQxN0NvZGV3b3JkRGVjb2Rlci5zYW1wbGVCaXRDb3VudHMobW9kdWxlQml0Q291bnQpKTtcbiAgICAgICAgICAgIGlmIChkZWNvZGVkVmFsdWUgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZWRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQREY0MTdDb2Rld29yZERlY29kZXIuZ2V0Q2xvc2VzdERlY29kZWRWYWx1ZShtb2R1bGVCaXRDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHNhbXBsZUJpdENvdW50cyhtb2R1bGVCaXRDb3VudCkge1xuICAgICAgICAgICAgbGV0IGJpdENvdW50U3VtID0gTWF0aFV0aWxzLnN1bShtb2R1bGVCaXRDb3VudCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkoUERGNDE3Q29tbW9uLkJBUlNfSU5fTU9EVUxFKTtcbiAgICAgICAgICAgIGxldCBiaXRDb3VudEluZGV4ID0gMDtcbiAgICAgICAgICAgIGxldCBzdW1QcmV2aW91c0JpdHMgPSAwO1xuICAgICAgICAgICAgZm9yICggLyppbnQqL2xldCBpID0gMDsgaSA8IFBERjQxN0NvbW1vbi5NT0RVTEVTX0lOX0NPREVXT1JEOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc2FtcGxlSW5kZXggPSBiaXRDb3VudFN1bSAvICgyICogUERGNDE3Q29tbW9uLk1PRFVMRVNfSU5fQ09ERVdPUkQpICtcbiAgICAgICAgICAgICAgICAgICAgKGkgKiBiaXRDb3VudFN1bSkgLyBQREY0MTdDb21tb24uTU9EVUxFU19JTl9DT0RFV09SRDtcbiAgICAgICAgICAgICAgICBpZiAoc3VtUHJldmlvdXNCaXRzICsgbW9kdWxlQml0Q291bnRbYml0Q291bnRJbmRleF0gPD0gc2FtcGxlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtUHJldmlvdXNCaXRzICs9IG1vZHVsZUJpdENvdW50W2JpdENvdW50SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBiaXRDb3VudEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdFtiaXRDb3VudEluZGV4XSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0RGVjb2RlZENvZGV3b3JkVmFsdWUobW9kdWxlQml0Q291bnQpIHtcbiAgICAgICAgICAgIGxldCBkZWNvZGVkVmFsdWUgPSBQREY0MTdDb2Rld29yZERlY29kZXIuZ2V0Qml0VmFsdWUobW9kdWxlQml0Q291bnQpO1xuICAgICAgICAgICAgcmV0dXJuIFBERjQxN0NvbW1vbi5nZXRDb2Rld29yZChkZWNvZGVkVmFsdWUpID09PSAtMSA/IC0xIDogZGVjb2RlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRCaXRWYWx1ZShtb2R1bGVCaXRDb3VudCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IC8qbG9uZyovIDA7XG4gICAgICAgICAgICBmb3IgKGxldCAvKmludCovIGkgPSAwOyBpIDwgbW9kdWxlQml0Q291bnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKCAvKmludCovbGV0IGJpdCA9IDA7IGJpdCA8IG1vZHVsZUJpdENvdW50W2ldOyBiaXQrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IDEpIHwgKGkgJSAyID09PSAwID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBNYXRoLnRydW5jKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd29ya2luZyB3aXRoIDMyYml0IGZsb2F0IChhcyBpbiBKYXZhKVxuICAgICAgICBzdGF0aWMgZ2V0Q2xvc2VzdERlY29kZWRWYWx1ZShtb2R1bGVCaXRDb3VudCkge1xuICAgICAgICAgICAgbGV0IGJpdENvdW50U3VtID0gTWF0aFV0aWxzLnN1bShtb2R1bGVCaXRDb3VudCk7XG4gICAgICAgICAgICBsZXQgYml0Q291bnRSYXRpb3MgPSBuZXcgQXJyYXkoUERGNDE3Q29tbW9uLkJBUlNfSU5fTU9EVUxFKTtcbiAgICAgICAgICAgIGlmIChiaXRDb3VudFN1bSA+IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCAvKmludCovIGkgPSAwOyBpIDwgYml0Q291bnRSYXRpb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYml0Q291bnRSYXRpb3NbaV0gPSBNYXRoLmZyb3VuZChtb2R1bGVCaXRDb3VudFtpXSAvIGJpdENvdW50U3VtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYmVzdE1hdGNoRXJyb3IgPSBGbG9hdC5NQVhfVkFMVUU7XG4gICAgICAgICAgICBsZXQgYmVzdE1hdGNoID0gLTE7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYlN5bWJvbFRhYmxlUmVhZHkpIHtcbiAgICAgICAgICAgICAgICBQREY0MTdDb2Rld29yZERlY29kZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICggLyppbnQqL2xldCBqID0gMDsgaiA8IFBERjQxN0NvZGV3b3JkRGVjb2Rlci5SQVRJT1NfVEFCTEUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSAwLjA7XG4gICAgICAgICAgICAgICAgbGV0IHJhdGlvVGFibGVSb3cgPSBQREY0MTdDb2Rld29yZERlY29kZXIuUkFUSU9TX1RBQkxFW2pdO1xuICAgICAgICAgICAgICAgIGZvciAoIC8qaW50Ki9sZXQgayA9IDA7IGsgPCBQREY0MTdDb21tb24uQkFSU19JTl9NT0RVTEU7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGlmZiA9IE1hdGguZnJvdW5kKHJhdGlvVGFibGVSb3dba10gLSBiaXRDb3VudFJhdGlvc1trXSk7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yICs9IE1hdGguZnJvdW5kKGRpZmYgKiBkaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yID49IGJlc3RNYXRjaEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPCBiZXN0TWF0Y2hFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2hFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBiZXN0TWF0Y2ggPSBQREY0MTdDb21tb24uU1lNQk9MX1RBQkxFW2pdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiZXN0TWF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZmxhZyB0aGF0IHRoZSB0YWJsZSBpcyByZWFkeSBmb3IgdXNlXG4gICAgUERGNDE3Q29kZXdvcmREZWNvZGVyLmJTeW1ib2xUYWJsZVJlYWR5ID0gZmFsc2U7XG4gICAgUERGNDE3Q29kZXdvcmREZWNvZGVyLlJBVElPU19UQUJMRSA9IG5ldyBBcnJheShQREY0MTdDb21tb24uU1lNQk9MX1RBQkxFLmxlbmd0aCkubWFwKHggPT4geCA9IG5ldyBBcnJheShQREY0MTdDb21tb24uQkFSU19JTl9NT0RVTEUpKTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMTMgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLy8gcGFja2FnZSBjb20uZ29vZ2xlLnp4aW5nLnBkZjQxNztcbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIEd1ZW50aGVyIEdyYXVcbiAgICAgKi9cbiAgICAvKnB1YmxpYyBmaW5hbCovIGNsYXNzIFBERjQxN1Jlc3VsdE1ldGFkYXRhIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLnNlZ21lbnRDb3VudCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5maWxlU2l6ZSA9IC0xO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tzdW0gPSAtMTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFNlZ21lbnQgSUQgcmVwcmVzZW50cyB0aGUgc2VnbWVudCBvZiB0aGUgd2hvbGUgZmlsZSBkaXN0cmlidXRlZCBvdmVyIGRpZmZlcmVudCBzeW1ib2xzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIEZpbGUgc2VnbWVudCBpbmRleFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0U2VnbWVudEluZGV4KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHNldFNlZ21lbnRJbmRleChzZWdtZW50SW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudEluZGV4ID0gc2VnbWVudEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJcyB0aGUgc2FtZSBmb3IgZWFjaCByZWxhdGVkIFBERjQxNyBzeW1ib2xcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBGaWxlIElEXG4gICAgICAgICAqL1xuICAgICAgICBnZXRGaWxlSWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsZUlkKGZpbGVJZCkge1xuICAgICAgICAgICAgdGhpcy5maWxlSWQgPSBmaWxlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gYWx3YXlzIG51bGxcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgdXNlIGRlZGljYXRlZCBhbHJlYWR5IHBhcnNlZCBmaWVsZHNcbiAgICAgICAgICovXG4gICAgICAgIC8vICAgQERlcHJlY2F0ZWRcbiAgICAgICAgZ2V0T3B0aW9uYWxEYXRhKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uYWxEYXRhO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uYWxEYXRhIG9sZCBvcHRpb25hbCBkYXRhIGZvcm1hdCBhcyBpbnQgYXJyYXlcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgcGFyc2UgYW5kIHVzZSBuZXcgZmllbGRzXG4gICAgICAgICAqL1xuICAgICAgICAvLyAgIEBEZXByZWNhdGVkXG4gICAgICAgIHNldE9wdGlvbmFsRGF0YShvcHRpb25hbERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uYWxEYXRhID0gb3B0aW9uYWxEYXRhO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWYgaXQgaXMgdGhlIGxhc3Qgc2VnbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgaXNMYXN0U2VnbWVudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhc3RTZWdtZW50O1xuICAgICAgICB9XG4gICAgICAgIHNldExhc3RTZWdtZW50KGxhc3RTZWdtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTZWdtZW50ID0gbGFzdFNlZ21lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gY291bnQgb2Ygc2VnbWVudHMsIC0xIGlmIG5vdCBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGdldFNlZ21lbnRDb3VudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBzZXRTZWdtZW50Q291bnQoc2VnbWVudENvdW50IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMuc2VnbWVudENvdW50ID0gc2VnbWVudENvdW50O1xuICAgICAgICB9XG4gICAgICAgIGdldFNlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRlciB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHNldFNlbmRlcihzZW5kZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZGVyID0gc2VuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGdldEFkZHJlc3NlZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZHJlc3NlZSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHNldEFkZHJlc3NlZShhZGRyZXNzZWUpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzc2VlID0gYWRkcmVzc2VlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaWxlbmFtZSBvZiB0aGUgZW5jb2RlZCBmaWxlXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gZmlsZW5hbWVcbiAgICAgICAgICovXG4gICAgICAgIGdldEZpbGVOYW1lKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsZU5hbWUoZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSBmaWxlTmFtZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogZmlsZXNpemUgaW4gYnl0ZXMgb2YgdGhlIGVuY29kZWQgZmlsZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIGZpbGVzaXplIGluIGJ5dGVzLCAtMSBpZiBub3Qgc2V0XG4gICAgICAgICAqL1xuICAgICAgICBnZXRGaWxlU2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIHNldEZpbGVTaXplKGZpbGVTaXplIC8qbG9uZyovKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVTaXplID0gZmlsZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDE2LWJpdCBDUkMgY2hlY2tzdW0gdXNpbmcgQ0NJVFQtMTZcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBjcmMgY2hlY2tzdW0sIC0xIGlmIG5vdCBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGdldENoZWNrc3VtKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tzdW07XG4gICAgICAgIH1cbiAgICAgICAgc2V0Q2hlY2tzdW0oY2hlY2tzdW0gLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy5jaGVja3N1bSA9IGNoZWNrc3VtO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB1bml4IGVwb2NrIHRpbWVzdGFtcCwgZWxhcHNlZCBzZWNvbmRzIHNpbmNlIDE5NzAtMDEtMDFcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBlbGFwc2VkIHNlY29uZHMsIC0xIGlmIG5vdCBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGdldFRpbWVzdGFtcCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lc3RhbXAodGltZXN0YW1wIC8qbG9uZyovKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgTG9uZyBjbGFzcy5cbiAgICAgKi9cbiAgICBjbGFzcyBMb25nIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhcnNlcyBhIHN0cmluZyB0byBhIG51bWJlciwgc2luY2UgSlMgaGFzIG5vIHJlYWxseSBJbnQ2NC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG51bSBOdW1lcmljIHN0cmluZy5cbiAgICAgICAgICogQHBhcmFtIHJhZGl4IERlc3RpbmF0aW9uIHJhZGl4LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIHBhcnNlTG9uZyhudW0sIHJhZGl4ID0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQobnVtLCByYWRpeCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uXG4gICAgICovXG4gICAgY2xhc3MgTnVsbFBvaW50ZXJFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIH1cbiAgICBOdWxsUG9pbnRlckV4Y2VwdGlvbi5raW5kID0gJ051bGxQb2ludGVyRXhjZXB0aW9uJztcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IChjKSAxOTk0LCAyMDA0LCBPcmFjbGUgYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgICAqIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi5cbiAgICAgKlxuICAgICAqIFRoaXMgY29kZSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0XG4gICAgICogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXNcbiAgICAgKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4gIE9yYWNsZSBkZXNpZ25hdGVzIHRoaXNcbiAgICAgKiBwYXJ0aWN1bGFyIGZpbGUgYXMgc3ViamVjdCB0byB0aGUgXCJDbGFzc3BhdGhcIiBleGNlcHRpb24gYXMgcHJvdmlkZWRcbiAgICAgKiBieSBPcmFjbGUgaW4gdGhlIExJQ0VOU0UgZmlsZSB0aGF0IGFjY29tcGFuaWVkIHRoaXMgY29kZS5cbiAgICAgKlxuICAgICAqIFRoaXMgY29kZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVFxuICAgICAqIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvclxuICAgICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgICAqIHZlcnNpb24gMiBmb3IgbW9yZSBkZXRhaWxzIChhIGNvcHkgaXMgaW5jbHVkZWQgaW4gdGhlIExJQ0VOU0UgZmlsZSB0aGF0XG4gICAgICogYWNjb21wYW5pZWQgdGhpcyBjb2RlKS5cbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb25cbiAgICAgKiAyIGFsb25nIHdpdGggdGhpcyB3b3JrOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sXG4gICAgICogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLlxuICAgICAqXG4gICAgICogUGxlYXNlIGNvbnRhY3QgT3JhY2xlLCA1MDAgT3JhY2xlIFBhcmt3YXksIFJlZHdvb2QgU2hvcmVzLCBDQSA5NDA2NSBVU0FcbiAgICAgKiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55XG4gICAgICogcXVlc3Rpb25zLlxuICAgICAqL1xuICAgIC8vIHBhY2thZ2UgamF2YS5pbztcbiAgICAvKipcbiAgICAgKiBUaGlzIGFic3RyYWN0IGNsYXNzIGlzIHRoZSBzdXBlcmNsYXNzIG9mIGFsbCBjbGFzc2VzIHJlcHJlc2VudGluZ1xuICAgICAqIGFuIG91dHB1dCBzdHJlYW0gb2YgYnl0ZXMuIEFuIG91dHB1dCBzdHJlYW0gYWNjZXB0cyBvdXRwdXQgYnl0ZXNcbiAgICAgKiBhbmQgc2VuZHMgdGhlbSB0byBzb21lIHNpbmsuXG4gICAgICogPHA+XG4gICAgICogQXBwbGljYXRpb25zIHRoYXQgbmVlZCB0byBkZWZpbmUgYSBzdWJjbGFzcyBvZlxuICAgICAqIDxjb2RlPk91dHB1dFN0cmVhbTwvY29kZT4gbXVzdCBhbHdheXMgcHJvdmlkZSBhdCBsZWFzdCBhIG1ldGhvZFxuICAgICAqIHRoYXQgd3JpdGVzIG9uZSBieXRlIG9mIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgIEFydGh1ciB2YW4gSG9mZlxuICAgICAqIEBzZWUgICAgIGphdmEuaW8uQnVmZmVyZWRPdXRwdXRTdHJlYW1cbiAgICAgKiBAc2VlICAgICBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbVxuICAgICAqIEBzZWUgICAgIGphdmEuaW8uRGF0YU91dHB1dFN0cmVhbVxuICAgICAqIEBzZWUgICAgIGphdmEuaW8uRmlsdGVyT3V0cHV0U3RyZWFtXG4gICAgICogQHNlZSAgICAgamF2YS5pby5JbnB1dFN0cmVhbVxuICAgICAqIEBzZWUgICAgIGphdmEuaW8uT3V0cHV0U3RyZWFtI3dyaXRlKGludClcbiAgICAgKiBAc2luY2UgICBKREsxLjBcbiAgICAgKi9cbiAgICAvKnB1YmxpYyovIGNsYXNzIE91dHB1dFN0cmVhbSAvKmltcGxlbWVudHMgQ2xvc2VhYmxlLCBGbHVzaGFibGUqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcml0ZXMgPGNvZGU+Yi5sZW5ndGg8L2NvZGU+IGJ5dGVzIGZyb20gdGhlIHNwZWNpZmllZCBieXRlIGFycmF5XG4gICAgICAgICAqIHRvIHRoaXMgb3V0cHV0IHN0cmVhbS4gVGhlIGdlbmVyYWwgY29udHJhY3QgZm9yIDxjb2RlPndyaXRlKGIpPC9jb2RlPlxuICAgICAgICAgKiBpcyB0aGF0IGl0IHNob3VsZCBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWZmZWN0IGFzIHRoZSBjYWxsXG4gICAgICAgICAqIDxjb2RlPndyaXRlKGIsIDAsIGIubGVuZ3RoKTwvY29kZT4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSAgICAgIGIgICB0aGUgZGF0YS5cbiAgICAgICAgICogQGV4Y2VwdGlvbiAgSU9FeGNlcHRpb24gIGlmIGFuIEkvTyBlcnJvciBvY2N1cnMuXG4gICAgICAgICAqIEBzZWUgICAgICAgIGphdmEuaW8uT3V0cHV0U3RyZWFtI3dyaXRlKGJ5dGVbXSwgaW50LCBpbnQpXG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZUJ5dGVzKGIpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVCeXRlc09mZnNldChiLCAwLCBiLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdyaXRlcyA8Y29kZT5sZW48L2NvZGU+IGJ5dGVzIGZyb20gdGhlIHNwZWNpZmllZCBieXRlIGFycmF5XG4gICAgICAgICAqIHN0YXJ0aW5nIGF0IG9mZnNldCA8Y29kZT5vZmY8L2NvZGU+IHRvIHRoaXMgb3V0cHV0IHN0cmVhbS5cbiAgICAgICAgICogVGhlIGdlbmVyYWwgY29udHJhY3QgZm9yIDxjb2RlPndyaXRlKGIsIG9mZiwgbGVuKTwvY29kZT4gaXMgdGhhdFxuICAgICAgICAgKiBzb21lIG9mIHRoZSBieXRlcyBpbiB0aGUgYXJyYXkgPGNvZGU+YjwvY29kZT4gYXJlIHdyaXR0ZW4gdG8gdGhlXG4gICAgICAgICAqIG91dHB1dCBzdHJlYW0gaW4gb3JkZXI7IGVsZW1lbnQgPGNvZGU+YltvZmZdPC9jb2RlPiBpcyB0aGUgZmlyc3RcbiAgICAgICAgICogYnl0ZSB3cml0dGVuIGFuZCA8Y29kZT5iW29mZitsZW4tMV08L2NvZGU+IGlzIHRoZSBsYXN0IGJ5dGUgd3JpdHRlblxuICAgICAgICAgKiBieSB0aGlzIG9wZXJhdGlvbi5cbiAgICAgICAgICogPHA+XG4gICAgICAgICAqIFRoZSA8Y29kZT53cml0ZTwvY29kZT4gbWV0aG9kIG9mIDxjb2RlPk91dHB1dFN0cmVhbTwvY29kZT4gY2FsbHNcbiAgICAgICAgICogdGhlIHdyaXRlIG1ldGhvZCBvZiBvbmUgYXJndW1lbnQgb24gZWFjaCBvZiB0aGUgYnl0ZXMgdG8gYmVcbiAgICAgICAgICogd3JpdHRlbiBvdXQuIFN1YmNsYXNzZXMgYXJlIGVuY291cmFnZWQgdG8gb3ZlcnJpZGUgdGhpcyBtZXRob2QgYW5kXG4gICAgICAgICAqIHByb3ZpZGUgYSBtb3JlIGVmZmljaWVudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICogPHA+XG4gICAgICAgICAqIElmIDxjb2RlPmI8L2NvZGU+IGlzIDxjb2RlPm51bGw8L2NvZGU+LCBhXG4gICAgICAgICAqIDxjb2RlPk51bGxQb2ludGVyRXhjZXB0aW9uPC9jb2RlPiBpcyB0aHJvd24uXG4gICAgICAgICAqIDxwPlxuICAgICAgICAgKiBJZiA8Y29kZT5vZmY8L2NvZGU+IGlzIG5lZ2F0aXZlLCBvciA8Y29kZT5sZW48L2NvZGU+IGlzIG5lZ2F0aXZlLCBvclxuICAgICAgICAgKiA8Y29kZT5vZmYrbGVuPC9jb2RlPiBpcyBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgYXJyYXlcbiAgICAgICAgICogPGNvZGU+YjwvY29kZT4sIHRoZW4gYW4gPHR0PkluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb248L3R0PiBpcyB0aHJvd24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSAgICAgIGIgICAgIHRoZSBkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gICAgICBvZmYgICB0aGUgc3RhcnQgb2Zmc2V0IGluIHRoZSBkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gICAgICBsZW4gICB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHdyaXRlLlxuICAgICAgICAgKiBAZXhjZXB0aW9uICBJT0V4Y2VwdGlvbiAgaWYgYW4gSS9PIGVycm9yIG9jY3Vycy4gSW4gcGFydGljdWxhcixcbiAgICAgICAgICogICAgICAgICAgICAgYW4gPGNvZGU+SU9FeGNlcHRpb248L2NvZGU+IGlzIHRocm93biBpZiB0aGUgb3V0cHV0XG4gICAgICAgICAqICAgICAgICAgICAgIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZUJ5dGVzT2Zmc2V0KGIsIG9mZiwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoYiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgob2ZmIDwgMCkgfHwgKG9mZiA+IGIubGVuZ3RoKSB8fCAobGVuIDwgMCkgfHxcbiAgICAgICAgICAgICAgICAoKG9mZiArIGxlbikgPiBiLmxlbmd0aCkgfHwgKChvZmYgKyBsZW4pIDwgMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGUoYltvZmYgKyBpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZsdXNoZXMgdGhpcyBvdXRwdXQgc3RyZWFtIGFuZCBmb3JjZXMgYW55IGJ1ZmZlcmVkIG91dHB1dCBieXRlc1xuICAgICAgICAgKiB0byBiZSB3cml0dGVuIG91dC4gVGhlIGdlbmVyYWwgY29udHJhY3Qgb2YgPGNvZGU+Zmx1c2g8L2NvZGU+IGlzXG4gICAgICAgICAqIHRoYXQgY2FsbGluZyBpdCBpcyBhbiBpbmRpY2F0aW9uIHRoYXQsIGlmIGFueSBieXRlcyBwcmV2aW91c2x5XG4gICAgICAgICAqIHdyaXR0ZW4gaGF2ZSBiZWVuIGJ1ZmZlcmVkIGJ5IHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgb3V0cHV0XG4gICAgICAgICAqIHN0cmVhbSwgc3VjaCBieXRlcyBzaG91bGQgaW1tZWRpYXRlbHkgYmUgd3JpdHRlbiB0byB0aGVpclxuICAgICAgICAgKiBpbnRlbmRlZCBkZXN0aW5hdGlvbi5cbiAgICAgICAgICogPHA+XG4gICAgICAgICAqIElmIHRoZSBpbnRlbmRlZCBkZXN0aW5hdGlvbiBvZiB0aGlzIHN0cmVhbSBpcyBhbiBhYnN0cmFjdGlvbiBwcm92aWRlZCBieVxuICAgICAgICAgKiB0aGUgdW5kZXJseWluZyBvcGVyYXRpbmcgc3lzdGVtLCBmb3IgZXhhbXBsZSBhIGZpbGUsIHRoZW4gZmx1c2hpbmcgdGhlXG4gICAgICAgICAqIHN0cmVhbSBndWFyYW50ZWVzIG9ubHkgdGhhdCBieXRlcyBwcmV2aW91c2x5IHdyaXR0ZW4gdG8gdGhlIHN0cmVhbSBhcmVcbiAgICAgICAgICogcGFzc2VkIHRvIHRoZSBvcGVyYXRpbmcgc3lzdGVtIGZvciB3cml0aW5nOyBpdCBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdFxuICAgICAgICAgKiB0aGV5IGFyZSBhY3R1YWxseSB3cml0dGVuIHRvIGEgcGh5c2ljYWwgZGV2aWNlIHN1Y2ggYXMgYSBkaXNrIGRyaXZlLlxuICAgICAgICAgKiA8cD5cbiAgICAgICAgICogVGhlIDxjb2RlPmZsdXNoPC9jb2RlPiBtZXRob2Qgb2YgPGNvZGU+T3V0cHV0U3RyZWFtPC9jb2RlPiBkb2VzIG5vdGhpbmcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGNlcHRpb24gIElPRXhjZXB0aW9uICBpZiBhbiBJL08gZXJyb3Igb2NjdXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgZmx1c2goKSB7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsb3NlcyB0aGlzIG91dHB1dCBzdHJlYW0gYW5kIHJlbGVhc2VzIGFueSBzeXN0ZW0gcmVzb3VyY2VzXG4gICAgICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHN0cmVhbS4gVGhlIGdlbmVyYWwgY29udHJhY3Qgb2YgPGNvZGU+Y2xvc2U8L2NvZGU+XG4gICAgICAgICAqIGlzIHRoYXQgaXQgY2xvc2VzIHRoZSBvdXRwdXQgc3RyZWFtLiBBIGNsb3NlZCBzdHJlYW0gY2Fubm90IHBlcmZvcm1cbiAgICAgICAgICogb3V0cHV0IG9wZXJhdGlvbnMgYW5kIGNhbm5vdCBiZSByZW9wZW5lZC5cbiAgICAgICAgICogPHA+XG4gICAgICAgICAqIFRoZSA8Y29kZT5jbG9zZTwvY29kZT4gbWV0aG9kIG9mIDxjb2RlPk91dHB1dFN0cmVhbTwvY29kZT4gZG9lcyBub3RoaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXhjZXB0aW9uICBJT0V4Y2VwdGlvbiAgaWYgYW4gSS9PIGVycm9yIG9jY3Vycy5cbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlKCkge1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIE91dE9mTWVtb3J5RXJyb3IgZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IChjKSAxOTk0LCAyMDEwLCBPcmFjbGUgYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgICAqIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi5cbiAgICAgKlxuICAgICAqIFRoaXMgY29kZSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0XG4gICAgICogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXNcbiAgICAgKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4gIE9yYWNsZSBkZXNpZ25hdGVzIHRoaXNcbiAgICAgKiBwYXJ0aWN1bGFyIGZpbGUgYXMgc3ViamVjdCB0byB0aGUgXCJDbGFzc3BhdGhcIiBleGNlcHRpb24gYXMgcHJvdmlkZWRcbiAgICAgKiBieSBPcmFjbGUgaW4gdGhlIExJQ0VOU0UgZmlsZSB0aGF0IGFjY29tcGFuaWVkIHRoaXMgY29kZS5cbiAgICAgKlxuICAgICAqIFRoaXMgY29kZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVFxuICAgICAqIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvclxuICAgICAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICAgICAqIHZlcnNpb24gMiBmb3IgbW9yZSBkZXRhaWxzIChhIGNvcHkgaXMgaW5jbHVkZWQgaW4gdGhlIExJQ0VOU0UgZmlsZSB0aGF0XG4gICAgICogYWNjb21wYW5pZWQgdGhpcyBjb2RlKS5cbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb25cbiAgICAgKiAyIGFsb25nIHdpdGggdGhpcyB3b3JrOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sXG4gICAgICogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLlxuICAgICAqXG4gICAgICogUGxlYXNlIGNvbnRhY3QgT3JhY2xlLCA1MDAgT3JhY2xlIFBhcmt3YXksIFJlZHdvb2QgU2hvcmVzLCBDQSA5NDA2NSBVU0FcbiAgICAgKiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55XG4gICAgICogcXVlc3Rpb25zLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhbiBvdXRwdXQgc3RyZWFtIGluIHdoaWNoIHRoZSBkYXRhIGlzXG4gICAgICogd3JpdHRlbiBpbnRvIGEgYnl0ZSBhcnJheS4gVGhlIGJ1ZmZlciBhdXRvbWF0aWNhbGx5IGdyb3dzIGFzIGRhdGFcbiAgICAgKiBpcyB3cml0dGVuIHRvIGl0LlxuICAgICAqIFRoZSBkYXRhIGNhbiBiZSByZXRyaWV2ZWQgdXNpbmcgPGNvZGU+dG9CeXRlQXJyYXkoKTwvY29kZT4gYW5kXG4gICAgICogPGNvZGU+dG9TdHJpbmcoKTwvY29kZT4uXG4gICAgICogPHA+XG4gICAgICogQ2xvc2luZyBhIDx0dD5CeXRlQXJyYXlPdXRwdXRTdHJlYW08L3R0PiBoYXMgbm8gZWZmZWN0LiBUaGUgbWV0aG9kcyBpblxuICAgICAqIHRoaXMgY2xhc3MgY2FuIGJlIGNhbGxlZCBhZnRlciB0aGUgc3RyZWFtIGhhcyBiZWVuIGNsb3NlZCB3aXRob3V0XG4gICAgICogZ2VuZXJhdGluZyBhbiA8dHQ+SU9FeGNlcHRpb248L3R0Pi5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgIEFydGh1ciB2YW4gSG9mZlxuICAgICAqIEBzaW5jZSAgIEpESzEuMFxuICAgICAqL1xuICAgIC8qcHVibGljKi8gY2xhc3MgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGV4dGVuZHMgT3V0cHV0U3RyZWFtIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgYnl0ZSBhcnJheSBvdXRwdXQgc3RyZWFtLiBUaGUgYnVmZmVyIGNhcGFjaXR5IGlzXG4gICAgICAgICAqIGluaXRpYWxseSAzMiBieXRlcywgdGhvdWdoIGl0cyBzaXplIGluY3JlYXNlcyBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAqL1xuICAgICAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vICAgICB0aGlzKDMyKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBieXRlIGFycmF5IG91dHB1dCBzdHJlYW0sIHdpdGggYSBidWZmZXIgY2FwYWNpdHkgb2ZcbiAgICAgICAgICogdGhlIHNwZWNpZmllZCBzaXplLCBpbiBieXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtICAgc2l6ZSAgIHRoZSBpbml0aWFsIHNpemUuXG4gICAgICAgICAqIEBleGNlcHRpb24gIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBzaXplIGlzIG5lZ2F0aXZlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3Ioc2l6ZSA9IDMyKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHZhbGlkIGJ5dGVzIGluIHRoZSBidWZmZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICAgICAgaWYgKHNpemUgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignTmVnYXRpdmUgaW5pdGlhbCBzaXplOiAnXG4gICAgICAgICAgICAgICAgICAgICsgc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1ZiA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmNyZWFzZXMgdGhlIGNhcGFjaXR5IGlmIG5lY2Vzc2FyeSB0byBlbnN1cmUgdGhhdCBpdCBjYW4gaG9sZFxuICAgICAgICAgKiBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHNwZWNpZmllZCBieSB0aGUgbWluaW11bVxuICAgICAgICAgKiBjYXBhY2l0eSBhcmd1bWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG1pbkNhcGFjaXR5IHRoZSBkZXNpcmVkIG1pbmltdW0gY2FwYWNpdHlcbiAgICAgICAgICogQHRocm93cyBPdXRPZk1lbW9yeUVycm9yIGlmIHtAY29kZSBtaW5DYXBhY2l0eSA8IDB9LiAgVGhpcyBpc1xuICAgICAgICAgKiBpbnRlcnByZXRlZCBhcyBhIHJlcXVlc3QgZm9yIHRoZSB1bnNhdGlzZmlhYmx5IGxhcmdlIGNhcGFjaXR5XG4gICAgICAgICAqIHtAY29kZSAobG9uZykgSW50ZWdlci5NQVhfVkFMVUUgKyAobWluQ2FwYWNpdHkgLSBJbnRlZ2VyLk1BWF9WQUxVRSl9LlxuICAgICAgICAgKi9cbiAgICAgICAgZW5zdXJlQ2FwYWNpdHkobWluQ2FwYWNpdHkpIHtcbiAgICAgICAgICAgIC8vIG92ZXJmbG93LWNvbnNjaW91cyBjb2RlXG4gICAgICAgICAgICBpZiAobWluQ2FwYWNpdHkgLSB0aGlzLmJ1Zi5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdyhtaW5DYXBhY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluY3JlYXNlcyB0aGUgY2FwYWNpdHkgdG8gZW5zdXJlIHRoYXQgaXQgY2FuIGhvbGQgYXQgbGVhc3QgdGhlXG4gICAgICAgICAqIG51bWJlciBvZiBlbGVtZW50cyBzcGVjaWZpZWQgYnkgdGhlIG1pbmltdW0gY2FwYWNpdHkgYXJndW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBtaW5DYXBhY2l0eSB0aGUgZGVzaXJlZCBtaW5pbXVtIGNhcGFjaXR5XG4gICAgICAgICAqL1xuICAgICAgICBncm93KG1pbkNhcGFjaXR5KSB7XG4gICAgICAgICAgICAvLyBvdmVyZmxvdy1jb25zY2lvdXMgY29kZVxuICAgICAgICAgICAgbGV0IG9sZENhcGFjaXR5ID0gdGhpcy5idWYubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IG5ld0NhcGFjaXR5ID0gb2xkQ2FwYWNpdHkgPDwgMTtcbiAgICAgICAgICAgIGlmIChuZXdDYXBhY2l0eSAtIG1pbkNhcGFjaXR5IDwgMClcbiAgICAgICAgICAgICAgICBuZXdDYXBhY2l0eSA9IG1pbkNhcGFjaXR5O1xuICAgICAgICAgICAgaWYgKG5ld0NhcGFjaXR5IDwgMCkge1xuICAgICAgICAgICAgICAgIGlmIChtaW5DYXBhY2l0eSA8IDApIC8vIG92ZXJmbG93XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRPZk1lbW9yeUVycm9yKCk7XG4gICAgICAgICAgICAgICAgbmV3Q2FwYWNpdHkgPSBJbnRlZ2VyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYnVmID0gQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkodGhpcy5idWYsIG5ld0NhcGFjaXR5KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogV3JpdGVzIHRoZSBzcGVjaWZpZWQgYnl0ZSB0byB0aGlzIGJ5dGUgYXJyYXkgb3V0cHV0IHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtICAgYiAgIHRoZSBieXRlIHRvIGJlIHdyaXR0ZW4uXG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZShiKSB7XG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuY291bnQgKyAxKTtcbiAgICAgICAgICAgIHRoaXMuYnVmW3RoaXMuY291bnRdID0gLyooYnl0ZSkqLyBiO1xuICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcml0ZXMgPGNvZGU+bGVuPC9jb2RlPiBieXRlcyBmcm9tIHRoZSBzcGVjaWZpZWQgYnl0ZSBhcnJheVxuICAgICAgICAgKiBzdGFydGluZyBhdCBvZmZzZXQgPGNvZGU+b2ZmPC9jb2RlPiB0byB0aGlzIGJ5dGUgYXJyYXkgb3V0cHV0IHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtICAgYiAgICAgdGhlIGRhdGEuXG4gICAgICAgICAqIEBwYXJhbSAgIG9mZiAgIHRoZSBzdGFydCBvZmZzZXQgaW4gdGhlIGRhdGEuXG4gICAgICAgICAqIEBwYXJhbSAgIGxlbiAgIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gd3JpdGUuXG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZUJ5dGVzT2Zmc2V0KGIsIG9mZiwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoKG9mZiA8IDApIHx8IChvZmYgPiBiLmxlbmd0aCkgfHwgKGxlbiA8IDApIHx8XG4gICAgICAgICAgICAgICAgKChvZmYgKyBsZW4pIC0gYi5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuY291bnQgKyBsZW4pO1xuICAgICAgICAgICAgU3lzdGVtLmFycmF5Y29weShiLCBvZmYsIHRoaXMuYnVmLCB0aGlzLmNvdW50LCBsZW4pO1xuICAgICAgICAgICAgdGhpcy5jb3VudCArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdyaXRlcyB0aGUgY29tcGxldGUgY29udGVudHMgb2YgdGhpcyBieXRlIGFycmF5IG91dHB1dCBzdHJlYW0gdG9cbiAgICAgICAgICogdGhlIHNwZWNpZmllZCBvdXRwdXQgc3RyZWFtIGFyZ3VtZW50LCBhcyBpZiBieSBjYWxsaW5nIHRoZSBvdXRwdXRcbiAgICAgICAgICogc3RyZWFtJ3Mgd3JpdGUgbWV0aG9kIHVzaW5nIDxjb2RlPm91dC53cml0ZShidWYsIDAsIGNvdW50KTwvY29kZT4uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSAgICAgIG91dCAgIHRoZSBvdXRwdXQgc3RyZWFtIHRvIHdoaWNoIHRvIHdyaXRlIHRoZSBkYXRhLlxuICAgICAgICAgKiBAZXhjZXB0aW9uICBJT0V4Y2VwdGlvbiAgaWYgYW4gSS9PIGVycm9yIG9jY3Vycy5cbiAgICAgICAgICovXG4gICAgICAgIHdyaXRlVG8ob3V0KSB7XG4gICAgICAgICAgICBvdXQud3JpdGVCeXRlc09mZnNldCh0aGlzLmJ1ZiwgMCwgdGhpcy5jb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlc2V0cyB0aGUgPGNvZGU+Y291bnQ8L2NvZGU+IGZpZWxkIG9mIHRoaXMgYnl0ZSBhcnJheSBvdXRwdXRcbiAgICAgICAgICogc3RyZWFtIHRvIHplcm8sIHNvIHRoYXQgYWxsIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBvdXRwdXQgaW4gdGhlXG4gICAgICAgICAqIG91dHB1dCBzdHJlYW0gaXMgZGlzY2FyZGVkLiBUaGUgb3V0cHV0IHN0cmVhbSBjYW4gYmUgdXNlZCBhZ2FpbixcbiAgICAgICAgICogcmV1c2luZyB0aGUgYWxyZWFkeSBhbGxvY2F0ZWQgYnVmZmVyIHNwYWNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlICAgICBqYXZhLmlvLkJ5dGVBcnJheUlucHV0U3RyZWFtI2NvdW50XG4gICAgICAgICAqL1xuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3bHkgYWxsb2NhdGVkIGJ5dGUgYXJyYXkuIEl0cyBzaXplIGlzIHRoZSBjdXJyZW50XG4gICAgICAgICAqIHNpemUgb2YgdGhpcyBvdXRwdXQgc3RyZWFtIGFuZCB0aGUgdmFsaWQgY29udGVudHMgb2YgdGhlIGJ1ZmZlclxuICAgICAgICAgKiBoYXZlIGJlZW4gY29waWVkIGludG8gaXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gIHRoZSBjdXJyZW50IGNvbnRlbnRzIG9mIHRoaXMgb3V0cHV0IHN0cmVhbSwgYXMgYSBieXRlIGFycmF5LlxuICAgICAgICAgKiBAc2VlICAgICBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbSNzaXplKClcbiAgICAgICAgICovXG4gICAgICAgIHRvQnl0ZUFycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5cy5jb3B5T2ZVaW50OEFycmF5KHRoaXMuYnVmLCB0aGlzLmNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudCBzaXplIG9mIHRoZSBidWZmZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gIHRoZSB2YWx1ZSBvZiB0aGUgPGNvZGU+Y291bnQ8L2NvZGU+IGZpZWxkLCB3aGljaCBpcyB0aGUgbnVtYmVyXG4gICAgICAgICAqICAgICAgICAgIG9mIHZhbGlkIGJ5dGVzIGluIHRoaXMgb3V0cHV0IHN0cmVhbS5cbiAgICAgICAgICogQHNlZSAgICAgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW0jY291bnRcbiAgICAgICAgICovXG4gICAgICAgIHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICB0b1N0cmluZyhwYXJhbSkge1xuICAgICAgICAgICAgaWYgKCFwYXJhbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nX3ZvaWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmdfc3RyaW5nKHBhcmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nX251bWJlcihwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoZSBidWZmZXIncyBjb250ZW50cyBpbnRvIGEgc3RyaW5nIGRlY29kaW5nIGJ5dGVzIHVzaW5nIHRoZVxuICAgICAgICAgKiBwbGF0Zm9ybSdzIGRlZmF1bHQgY2hhcmFjdGVyIHNldC4gVGhlIGxlbmd0aCBvZiB0aGUgbmV3IDx0dD5TdHJpbmc8L3R0PlxuICAgICAgICAgKiBpcyBhIGZ1bmN0aW9uIG9mIHRoZSBjaGFyYWN0ZXIgc2V0LCBhbmQgaGVuY2UgbWF5IG5vdCBiZSBlcXVhbCB0byB0aGVcbiAgICAgICAgICogc2l6ZSBvZiB0aGUgYnVmZmVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiA8cD4gVGhpcyBtZXRob2QgYWx3YXlzIHJlcGxhY2VzIG1hbGZvcm1lZC1pbnB1dCBhbmQgdW5tYXBwYWJsZS1jaGFyYWN0ZXJcbiAgICAgICAgICogc2VxdWVuY2VzIHdpdGggdGhlIGRlZmF1bHQgcmVwbGFjZW1lbnQgc3RyaW5nIGZvciB0aGUgcGxhdGZvcm0nc1xuICAgICAgICAgKiBkZWZhdWx0IGNoYXJhY3RlciBzZXQuIFRoZSB7QGxpbmtwbGFpbiBqYXZhLm5pby5jaGFyc2V0LkNoYXJzZXREZWNvZGVyfVxuICAgICAgICAgKiBjbGFzcyBzaG91bGQgYmUgdXNlZCB3aGVuIG1vcmUgY29udHJvbCBvdmVyIHRoZSBkZWNvZGluZyBwcm9jZXNzIGlzXG4gICAgICAgICAqIHJlcXVpcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIFN0cmluZyBkZWNvZGVkIGZyb20gdGhlIGJ1ZmZlcidzIGNvbnRlbnRzLlxuICAgICAgICAgKiBAc2luY2UgIEpESzEuMVxuICAgICAgICAgKi9cbiAgICAgICAgdG9TdHJpbmdfdm9pZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nKHRoaXMuYnVmIC8qLCAwLCB0aGlzLmNvdW50Ki8pLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoZSBidWZmZXIncyBjb250ZW50cyBpbnRvIGEgc3RyaW5nIGJ5IGRlY29kaW5nIHRoZSBieXRlcyB1c2luZ1xuICAgICAgICAgKiB0aGUgc3BlY2lmaWVkIHtAbGluayBqYXZhLm5pby5jaGFyc2V0LkNoYXJzZXQgY2hhcnNldE5hbWV9LiBUaGUgbGVuZ3RoIG9mXG4gICAgICAgICAqIHRoZSBuZXcgPHR0PlN0cmluZzwvdHQ+IGlzIGEgZnVuY3Rpb24gb2YgdGhlIGNoYXJzZXQsIGFuZCBoZW5jZSBtYXkgbm90IGJlXG4gICAgICAgICAqIGVxdWFsIHRvIHRoZSBsZW5ndGggb2YgdGhlIGJ5dGUgYXJyYXkuXG4gICAgICAgICAqXG4gICAgICAgICAqIDxwPiBUaGlzIG1ldGhvZCBhbHdheXMgcmVwbGFjZXMgbWFsZm9ybWVkLWlucHV0IGFuZCB1bm1hcHBhYmxlLWNoYXJhY3RlclxuICAgICAgICAgKiBzZXF1ZW5jZXMgd2l0aCB0aGlzIGNoYXJzZXQncyBkZWZhdWx0IHJlcGxhY2VtZW50IHN0cmluZy4gVGhlIHtAbGlua1xuICAgICAgICAgKiBqYXZhLm5pby5jaGFyc2V0LkNoYXJzZXREZWNvZGVyfSBjbGFzcyBzaG91bGQgYmUgdXNlZCB3aGVuIG1vcmUgY29udHJvbFxuICAgICAgICAgKiBvdmVyIHRoZSBkZWNvZGluZyBwcm9jZXNzIGlzIHJlcXVpcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gIGNoYXJzZXROYW1lICB0aGUgbmFtZSBvZiBhIHN1cHBvcnRlZFxuICAgICAgICAgKiAgICAgICAgICAgICAge0BsaW5rcGxhaW4gamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0IDwvY29kZT5jaGFyc2V0PGNvZGU+fVxuICAgICAgICAgKiBAcmV0dXJuIFN0cmluZyBkZWNvZGVkIGZyb20gdGhlIGJ1ZmZlcidzIGNvbnRlbnRzLlxuICAgICAgICAgKiBAZXhjZXB0aW9uICBVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uXG4gICAgICAgICAqICAgICAgICAgICAgIElmIHRoZSBuYW1lZCBjaGFyc2V0IGlzIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgICogQHNpbmNlICAgSkRLMS4xXG4gICAgICAgICAqL1xuICAgICAgICB0b1N0cmluZ19zdHJpbmcoY2hhcnNldE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nKHRoaXMuYnVmIC8qLCAwLCB0aGlzLmNvdW50LCBjaGFyc2V0TmFtZSovKS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3bHkgYWxsb2NhdGVkIHN0cmluZy4gSXRzIHNpemUgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZlxuICAgICAgICAgKiB0aGUgb3V0cHV0IHN0cmVhbSBhbmQgdGhlIHZhbGlkIGNvbnRlbnRzIG9mIHRoZSBidWZmZXIgaGF2ZSBiZWVuXG4gICAgICAgICAqIGNvcGllZCBpbnRvIGl0LiBFYWNoIGNoYXJhY3RlciA8aT5jPC9pPiBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZyBpc1xuICAgICAgICAgKiBjb25zdHJ1Y3RlZCBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgPGk+YjwvaT4gaW4gdGhlIGJ5dGVcbiAgICAgICAgICogYXJyYXkgc3VjaCB0aGF0OlxuICAgICAgICAgKiA8YmxvY2txdW90ZT48cHJlPlxuICAgICAgICAgKiAgICAgYyA9PSAoY2hhcikoKChoaWJ5dGUgJmFtcDsgMHhmZikgJmx0OyZsdDsgOCkgfCAoYiAmYW1wOyAweGZmKSlcbiAgICAgICAgICogPC9wcmU+PC9ibG9ja3F1b3RlPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCBkb2VzIG5vdCBwcm9wZXJseSBjb252ZXJ0IGJ5dGVzIGludG8gY2hhcmFjdGVycy5cbiAgICAgICAgICogQXMgb2YgSkRLJm5ic3A7MS4xLCB0aGUgcHJlZmVycmVkIHdheSB0byBkbyB0aGlzIGlzIHZpYSB0aGVcbiAgICAgICAgICogPGNvZGU+dG9TdHJpbmcoU3RyaW5nIGVuYyk8L2NvZGU+IG1ldGhvZCwgd2hpY2ggdGFrZXMgYW4gZW5jb2RpbmctbmFtZVxuICAgICAgICAgKiBhcmd1bWVudCwgb3IgdGhlIDxjb2RlPnRvU3RyaW5nKCk8L2NvZGU+IG1ldGhvZCwgd2hpY2ggdXNlcyB0aGVcbiAgICAgICAgICogcGxhdGZvcm0ncyBkZWZhdWx0IGNoYXJhY3RlciBlbmNvZGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtICAgICAgaGlieXRlICAgIHRoZSBoaWdoIGJ5dGUgb2YgZWFjaCByZXN1bHRpbmcgVW5pY29kZSBjaGFyYWN0ZXIuXG4gICAgICAgICAqIEByZXR1cm4gICAgIHRoZSBjdXJyZW50IGNvbnRlbnRzIG9mIHRoZSBvdXRwdXQgc3RyZWFtLCBhcyBhIHN0cmluZy5cbiAgICAgICAgICogQHNlZSAgICAgICAgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW0jc2l6ZSgpXG4gICAgICAgICAqIEBzZWUgICAgICAgIGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtI3RvU3RyaW5nKFN0cmluZylcbiAgICAgICAgICogQHNlZSAgICAgICAgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW0jdG9TdHJpbmcoKVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gQERlcHJlY2F0ZWRcbiAgICAgICAgdG9TdHJpbmdfbnVtYmVyKGhpYnl0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmcodGhpcy5idWYgLyosIGhpYnl0ZSwgMCwgdGhpcy5jb3VudCovKS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbG9zaW5nIGEgPHR0PkJ5dGVBcnJheU91dHB1dFN0cmVhbTwvdHQ+IGhhcyBubyBlZmZlY3QuIFRoZSBtZXRob2RzIGluXG4gICAgICAgICAqIHRoaXMgY2xhc3MgY2FuIGJlIGNhbGxlZCBhZnRlciB0aGUgc3RyZWFtIGhhcyBiZWVuIGNsb3NlZCB3aXRob3V0XG4gICAgICAgICAqIGdlbmVyYXRpbmcgYW4gPHR0PklPRXhjZXB0aW9uPC90dD4uXG4gICAgICAgICAqIDxwPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZSgpIHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLypwcml2YXRlKi8gdmFyIE1vZGUkMjtcbiAgICAoZnVuY3Rpb24gKE1vZGUpIHtcbiAgICAgICAgTW9kZVtNb2RlW1wiQUxQSEFcIl0gPSAwXSA9IFwiQUxQSEFcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiTE9XRVJcIl0gPSAxXSA9IFwiTE9XRVJcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiTUlYRURcIl0gPSAyXSA9IFwiTUlYRURcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiUFVOQ1RcIl0gPSAzXSA9IFwiUFVOQ1RcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiQUxQSEFfU0hJRlRcIl0gPSA0XSA9IFwiQUxQSEFfU0hJRlRcIjtcbiAgICAgICAgTW9kZVtNb2RlW1wiUFVOQ1RfU0hJRlRcIl0gPSA1XSA9IFwiUFVOQ1RfU0hJRlRcIjtcbiAgICB9KShNb2RlJDIgfHwgKE1vZGUkMiA9IHt9KSk7XG4gICAgLyoqXG4gICAgICogSW5kaXJlY3RseSBhY2Nlc3MgdGhlIGdsb2JhbCBCaWdJbnQgY29uc3RydWN0b3IsIGl0XG4gICAgICogYWxsb3dzIGJyb3dzZXJzIHRoYXQgZG9lc24ndCBzdXBwb3J0IEJpZ0ludCB0byBydW5cbiAgICAgKiB0aGUgbGlicmFyeSB3aXRob3V0IGJyZWFraW5nIGR1ZSB0byBcInVuZGVmaW5lZCBCaWdJbnRcIlxuICAgICAqIGVycm9ycy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCaWdJbnRDb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93WydCaWdJbnQnXSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFsnQmlnSW50J10gfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZlsnQmlnSW50J10gfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhblxcJ3Qgc2VhcmNoIGdsb2JhbHMgZm9yIEJpZ0ludCEnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBzdG9yZSB0aGUgQmlnSW50IGNvbnN0cnVjdG9yLlxuICAgICAqL1xuICAgIGxldCBCaWdJbnRlZ2VyO1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhIGJpZ2ludCB2YWx1ZS4gSXQgYWxsb3dzIGJyb3dzZXJzXG4gICAgICogdGhhdCBkb2Vzbid0IHN1cHBvcnQgQmlnSW50IHRvIHJ1biB0aGUgcmVzdCBvZiB0aGUgbGlicmFyeVxuICAgICAqIGJ5IG5vdCBkaXJlY3RseSBhY2Nlc3NpbmcgdGhlIEJpZ0ludCBjb25zdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVCaWdJbnQobnVtKSB7XG4gICAgICAgIGlmICh0eXBlb2YgQmlnSW50ZWdlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIEJpZ0ludGVnZXIgPSBnZXRCaWdJbnRDb25zdHJ1Y3RvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChCaWdJbnRlZ2VyID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JpZ0ludCBpcyBub3Qgc3VwcG9ydGVkIScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBCaWdJbnRlZ2VyKG51bSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEVYUDkwMCgpIHtcbiAgICAgICAgLy8gaW4gSmF2YSAtIGFycmF5IHdpdGggbGVuZ3RoID0gMTZcbiAgICAgICAgbGV0IEVYUDkwMCA9IFtdO1xuICAgICAgICBFWFA5MDBbMF0gPSBjcmVhdGVCaWdJbnQoMSk7XG4gICAgICAgIGxldCBuaW5lSHVuZHJlZCA9IGNyZWF0ZUJpZ0ludCg5MDApO1xuICAgICAgICBFWFA5MDBbMV0gPSBuaW5lSHVuZHJlZDtcbiAgICAgICAgLy8gaW4gSmF2YSAtIGFycmF5IHdpdGggbGVuZ3RoID0gMTZcbiAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMjsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgIEVYUDkwMFtpXSA9IEVYUDkwMFtpIC0gMV0gKiBuaW5lSHVuZHJlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRVhQOTAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHRoZSBtZXRob2RzIGZvciBkZWNvZGluZyB0aGUgUERGNDE3IGNvZGV3b3Jkcy48L3A+XG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFNJVEEgTGFiIChrZXZpbi5vc3VsbGl2YW5Ac2l0YS5hZXJvKVxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIC8qZmluYWwqLyBjbGFzcyBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIge1xuICAgICAgICAvLyAgIHByaXZhdGUgRGVjb2RlZEJpdFN0cmVhbVBhcnNlcigpIHtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvZGV3b3Jkc1xuICAgICAgICAgKiBAcGFyYW0gZWNMZXZlbFxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZShjb2Rld29yZHMsIGVjTGV2ZWwpIHtcbiAgICAgICAgICAgIC8vIHBhc3MgZW5jb2RpbmcgdG8gcmVzdWx0ICh3aWxsIGJlIHVzZWQgZm9yIGRlY29kZSBzeW1ib2xzIGluIGJ5dGUgbW9kZSlcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBuZXcgU3RyaW5nQnVpbGRlcignJyk7XG4gICAgICAgICAgICAvLyBsZXQgZW5jb2Rpbmc6IENoYXJzZXQgPSBTdGFuZGFyZENoYXJzZXRzLklTT184ODU5XzE7XG4gICAgICAgICAgICBsZXQgZW5jb2RpbmcgPSBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAbm90ZSB0aGUgbmV4dCBjb21tYW5kIGlzIHNwZWNpZmljIGZyb20gdGhpcyBUeXBlU2NyaXB0IGxpYnJhcnlcbiAgICAgICAgICAgICAqIGJlY2F1c2UgVFMgY2FuJ3QgcHJvcGVybHkgY2FzdCBzb21lIHZhbHVlcyB0byBjaGFyIGFuZFxuICAgICAgICAgICAgICogY29udmVydCBpdCB0byBzdHJpbmcgbGF0ZXIgY29ycmVjdGx5IGR1ZSB0byBlbmNvZGluZ1xuICAgICAgICAgICAgICogZGlmZmVyZW5jZXMgZnJvbSBKYXZhIHZlcnNpb24uIEFzIHJlcG9ydGVkIGhlcmU6XG4gICAgICAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20venhpbmctanMvbGlicmFyeS9wdWxsLzI2NC9maWxlcyNyMzgyODMxNTkzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlc3VsdC5lbmFibGVEZWNvZGluZyhlbmNvZGluZyk7XG4gICAgICAgICAgICAvLyBHZXQgY29tcGFjdGlvbiBtb2RlXG4gICAgICAgICAgICBsZXQgY29kZUluZGV4ID0gMTtcbiAgICAgICAgICAgIGxldCBjb2RlID0gY29kZXdvcmRzW2NvZGVJbmRleCsrXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRNZXRhZGF0YSA9IG5ldyBQREY0MTdSZXN1bHRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgd2hpbGUgKGNvZGVJbmRleCA8IGNvZGV3b3Jkc1swXSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi50ZXh0Q29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CWVRFX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQllURV9DT01QQUNUSU9OX01PREVfTEFUQ0hfNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5ieXRlQ29tcGFjdGlvbihjb2RlLCBjb2Rld29yZHMsIGVuY29kaW5nLCBjb2RlSW5kZXgsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTU9ERV9TSElGVF9UT19CWVRFX0NPTVBBQ1RJT05fTU9ERTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoLyooY2hhcikqLyBjb2Rld29yZHNbY29kZUluZGV4KytdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5OVU1FUklDX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5udW1lcmljQ29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5FQ0lfQ0hBUlNFVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyc2V0RUNJID0gQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUoY29kZXdvcmRzW2NvZGVJbmRleCsrXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmNvZGluZyA9IENoYXJzZXQuZm9yTmFtZShjaGFyc2V0RUNJLmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuRUNJX0dFTkVSQUxfUFVSUE9TRTpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbid0IGRvIGFueXRoaW5nIHdpdGggZ2VuZXJpYyBFQ0k7IHNraXAgaXRzIDIgY2hhcmFjdGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZUluZGV4ICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuRUNJX1VTRVJfREVGSU5FRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbid0IGRvIGFueXRoaW5nIHdpdGggdXNlciBFQ0k7IHNraXAgaXRzIDEgY2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfQ09OVFJPTF9CTE9DSzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5kZWNvZGVNYWNyb0Jsb2NrKGNvZGV3b3JkcywgY29kZUluZGV4LCByZXN1bHRNZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQkVHSU5fTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfVEVSTUlOQVRPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3VsZCBub3Qgc2VlIHRoZXNlIG91dHNpZGUgYSBtYWNybyBibG9ja1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB0byB0ZXh0IGNvbXBhY3Rpb24uIER1cmluZyB0ZXN0aW5nIG51bWVyb3VzIGJhcmNvZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhcHBlYXJlZCB0byBiZSBtaXNzaW5nIHRoZSBzdGFydGluZyBtb2RlLiBJbiB0aGVzZSBjYXNlcyBkZWZhdWx0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byB0ZXh0IGNvbXBhY3Rpb24gc2VlbXMgdG8gd29yay5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZUluZGV4ID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLnRleHRDb21wYWN0aW9uKGNvZGV3b3JkcywgY29kZUluZGV4LCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb2RlSW5kZXggPCBjb2Rld29yZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgPSBjb2Rld29yZHNbY29kZUluZGV4KytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IEZvcm1hdEV4Y2VwdGlvbi5nZXRGb3JtYXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGRlY29kZXJSZXN1bHQgPSBuZXcgRGVjb2RlclJlc3VsdChudWxsLCByZXN1bHQudG9TdHJpbmcoKSwgbnVsbCwgZWNMZXZlbCk7XG4gICAgICAgICAgICBkZWNvZGVyUmVzdWx0LnNldE90aGVyKHJlc3VsdE1ldGFkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVyUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gaW50XG4gICAgICAgICAqIEBwYXJhbSBwYXJhbTFcbiAgICAgICAgICogQHBhcmFtIGNvZGV3b3Jkc1xuICAgICAgICAgKiBAcGFyYW0gaW50XG4gICAgICAgICAqIEBwYXJhbSBjb2RlSW5kZXhcbiAgICAgICAgICogQHBhcmFtIFBERjQxN1Jlc3VsdE1ldGFkYXRhXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHRNZXRhZGF0YVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgLy8gQFN1cHByZXNzV2FybmluZ3MoXCJkZXByZWNhdGlvblwiKVxuICAgICAgICBzdGF0aWMgZGVjb2RlTWFjcm9CbG9jayhjb2Rld29yZHMsIGNvZGVJbmRleCwgcmVzdWx0TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGlmIChjb2RlSW5kZXggKyBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNQkVSX09GX1NFUVVFTkNFX0NPREVXT1JEUyA+IGNvZGV3b3Jkc1swXSkge1xuICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgaGF2ZSBhdCBsZWFzdCB0d28gYnl0ZXMgbGVmdCBmb3IgdGhlIHNlZ21lbnQgaW5kZXhcbiAgICAgICAgICAgICAgICB0aHJvdyBGb3JtYXRFeGNlcHRpb24uZ2V0Rm9ybWF0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzZWdtZW50SW5kZXhBcnJheSA9IG5ldyBJbnQzMkFycmF5KERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5OVU1CRVJfT0ZfU0VRVUVOQ0VfQ09ERVdPUkRTKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNQkVSX09GX1NFUVVFTkNFX0NPREVXT1JEUzsgaSsrLCBjb2RlSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHNlZ21lbnRJbmRleEFycmF5W2ldID0gY29kZXdvcmRzW2NvZGVJbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRNZXRhZGF0YS5zZXRTZWdtZW50SW5kZXgoSW50ZWdlci5wYXJzZUludChEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuZGVjb2RlQmFzZTkwMHRvQmFzZTEwKHNlZ21lbnRJbmRleEFycmF5LCBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNQkVSX09GX1NFUVVFTkNFX0NPREVXT1JEUykpKTtcbiAgICAgICAgICAgIGxldCBmaWxlSWQgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgY29kZUluZGV4ID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLnRleHRDb21wYWN0aW9uKGNvZGV3b3JkcywgY29kZUluZGV4LCBmaWxlSWQpO1xuICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0RmlsZUlkKGZpbGVJZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25hbEZpZWxkc1N0YXJ0ID0gLTE7XG4gICAgICAgICAgICBpZiAoY29kZXdvcmRzW2NvZGVJbmRleF0gPT09IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTEQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25hbEZpZWxkc1N0YXJ0ID0gY29kZUluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjb2RlSW5kZXggPCBjb2Rld29yZHNbMF0pIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvZGV3b3Jkc1tjb2RlSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJFR0lOX01BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2Rld29yZHNbY29kZUluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9GSUxFX05BTUU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi50ZXh0Q29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCArIDEsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0RmlsZU5hbWUoZmlsZU5hbWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9TRU5ERVI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZW5kZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlSW5kZXggPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIudGV4dENvbXBhY3Rpb24oY29kZXdvcmRzLCBjb2RlSW5kZXggKyAxLCBzZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXRhZGF0YS5zZXRTZW5kZXIoc2VuZGVyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTERfQUREUkVTU0VFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcmVzc2VlID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZUluZGV4ID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLnRleHRDb21wYWN0aW9uKGNvZGV3b3JkcywgY29kZUluZGV4ICsgMSwgYWRkcmVzc2VlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0QWRkcmVzc2VlKGFkZHJlc3NlZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEX1NFR01FTlRfQ09VTlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWdtZW50Q291bnQgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlSW5kZXggPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIubnVtZXJpY0NvbXBhY3Rpb24oY29kZXdvcmRzLCBjb2RlSW5kZXggKyAxLCBzZWdtZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNZXRhZGF0YS5zZXRTZWdtZW50Q291bnQoSW50ZWdlci5wYXJzZUludChzZWdtZW50Q291bnQudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTERfVElNRV9TVEFNUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWVzdGFtcCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5udW1lcmljQ29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCArIDEsIHRpbWVzdGFtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdE1ldGFkYXRhLnNldFRpbWVzdGFtcChMb25nLnBhcnNlTG9uZyh0aW1lc3RhbXAudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTERfQ0hFQ0tTVU06XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja3N1bSA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5udW1lcmljQ29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCArIDEsIGNoZWNrc3VtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0Q2hlY2tzdW0oSW50ZWdlci5wYXJzZUludChjaGVja3N1bS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9GSUxFX1NJWkU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlU2l6ZSA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5udW1lcmljQ29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCArIDEsIGZpbGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0RmlsZVNpemUoTG9uZy5wYXJzZUxvbmcoZmlsZVNpemUudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBGb3JtYXRFeGNlcHRpb24uZ2V0Rm9ybWF0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfVEVSTUlOQVRPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0TGFzdFNlZ21lbnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEZvcm1hdEV4Y2VwdGlvbi5nZXRGb3JtYXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgb3B0aW9uYWwgZmllbGRzIHRvIGFkZGl0aW9uYWwgb3B0aW9uc1xuICAgICAgICAgICAgaWYgKG9wdGlvbmFsRmllbGRzU3RhcnQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbmFsRmllbGRzTGVuZ3RoID0gY29kZUluZGV4IC0gb3B0aW9uYWxGaWVsZHNTdGFydDtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0TWV0YWRhdGEuaXNMYXN0U2VnbWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBpbmNsdWRlIHRlcm1pbmF0b3JcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxGaWVsZHNMZW5ndGgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0TWV0YWRhdGEuc2V0T3B0aW9uYWxEYXRhKEFycmF5cy5jb3B5T2ZSYW5nZShjb2Rld29yZHMsIG9wdGlvbmFsRmllbGRzU3RhcnQsIG9wdGlvbmFsRmllbGRzU3RhcnQgKyBvcHRpb25hbEZpZWxkc0xlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvZGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGV4dCBDb21wYWN0aW9uIG1vZGUgKHNlZSA1LjQuMS41KSBwZXJtaXRzIGFsbCBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVycyB0byBiZVxuICAgICAgICAgKiBlbmNvZGVkLCBpLmUuIHZhbHVlcyAzMiAtIDEyNiBpbmNsdXNpdmUgaW4gYWNjb3JkYW5jZSB3aXRoIElTTy9JRUMgNjQ2IChJUlYpLCBhc1xuICAgICAgICAgKiB3ZWxsIGFzIHNlbGVjdGVkIGNvbnRyb2wgY2hhcmFjdGVycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGNvZGV3b3JkcyBUaGUgYXJyYXkgb2YgY29kZXdvcmRzIChkYXRhICsgZXJyb3IpXG4gICAgICAgICAqIEBwYXJhbSBjb2RlSW5kZXggVGhlIGN1cnJlbnQgaW5kZXggaW50byB0aGUgY29kZXdvcmQgYXJyYXkuXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHQgICAgVGhlIGRlY29kZWQgZGF0YSBpcyBhcHBlbmRlZCB0byB0aGUgcmVzdWx0LlxuICAgICAgICAgKiBAcmV0dXJuIFRoZSBuZXh0IGluZGV4IGludG8gdGhlIGNvZGV3b3JkIGFycmF5LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIHRleHRDb21wYWN0aW9uKGNvZGV3b3JkcywgY29kZUluZGV4LCByZXN1bHQpIHtcbiAgICAgICAgICAgIC8vIDIgY2hhcmFjdGVyIHBlciBjb2Rld29yZFxuICAgICAgICAgICAgbGV0IHRleHRDb21wYWN0aW9uRGF0YSA9IG5ldyBJbnQzMkFycmF5KChjb2Rld29yZHNbMF0gLSBjb2RlSW5kZXgpICogMik7XG4gICAgICAgICAgICAvLyBVc2VkIHRvIGhvbGQgdGhlIGJ5dGUgY29tcGFjdGlvbiB2YWx1ZSBpZiB0aGVyZSBpcyBhIG1vZGUgc2hpZnRcbiAgICAgICAgICAgIGxldCBieXRlQ29tcGFjdGlvbkRhdGEgPSBuZXcgSW50MzJBcnJheSgoY29kZXdvcmRzWzBdIC0gY29kZUluZGV4KSAqIDIpO1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgIGxldCBlbmQgPSBmYWxzZTtcbiAgICAgICAgICAgIHdoaWxlICgoY29kZUluZGV4IDwgY29kZXdvcmRzWzBdKSAmJiAhZW5kKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBjb2Rld29yZHNbY29kZUluZGV4KytdO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wYWN0aW9uRGF0YVtpbmRleF0gPSBjb2RlIC8gMzA7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wYWN0aW9uRGF0YVtpbmRleCArIDFdID0gY29kZSAlIDMwO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWluaXRpYWxpemUgdGV4dCBjb21wYWN0aW9uIG1vZGUgdG8gYWxwaGEgc3ViIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcGFjdGlvbkRhdGFbaW5kZXgrK10gPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuVEVYVF9DT01QQUNUSU9OX01PREVfTEFUQ0g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CWVRFX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJZVEVfQ09NUEFDVElPTl9NT0RFX0xBVENIXzY6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5OVU1FUklDX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJFR0lOX01BQ1JPX1BERjQxN19DT05UUk9MX0JMT0NLOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQkVHSU5fTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFDUk9fUERGNDE3X1RFUk1JTkFUT1I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZUluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1PREVfU0hJRlRfVE9fQllURV9DT01QQUNUSU9OX01PREU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIE1vZGUgU2hpZnQgY29kZXdvcmQgOTEzIHNoYWxsIGNhdXNlIGEgdGVtcG9yYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3dpdGNoIGZyb20gVGV4dCBDb21wYWN0aW9uIG1vZGUgdG8gQnl0ZSBDb21wYWN0aW9uIG1vZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzd2l0Y2ggc2hhbGwgYmUgaW4gZWZmZWN0IGZvciBvbmx5IHRoZSBuZXh0IGNvZGV3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHdoaWNoIHRoZSBtb2RlIHNoYWxsIHJldmVydCB0byB0aGUgcHJldmFpbGluZyBzdWItbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBUZXh0IENvbXBhY3Rpb24gbW9kZS4gQ29kZXdvcmQgOTEzIGlzIG9ubHkgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gVGV4dCBDb21wYWN0aW9uIG1vZGU7IGl0cyB1c2UgaXMgZGVzY3JpYmVkIGluIDUuNC4yLjQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBhY3Rpb25EYXRhW2luZGV4XSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NT0RFX1NISUZUX1RPX0JZVEVfQ09NUEFDVElPTl9NT0RFO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBjb2Rld29yZHNbY29kZUluZGV4KytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVDb21wYWN0aW9uRGF0YVtpbmRleF0gPSBjb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuZGVjb2RlVGV4dENvbXBhY3Rpb24odGV4dENvbXBhY3Rpb25EYXRhLCBieXRlQ29tcGFjdGlvbkRhdGEsIGluZGV4LCByZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvZGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFRleHQgQ29tcGFjdGlvbiBtb2RlIGluY2x1ZGVzIGFsbCB0aGUgcHJpbnRhYmxlIEFTQ0lJIGNoYXJhY3RlcnNcbiAgICAgICAgICogKGkuZS4gdmFsdWVzIGZyb20gMzIgdG8gMTI2KSBhbmQgdGhyZWUgQVNDSUkgY29udHJvbCBjaGFyYWN0ZXJzOiBIVCBvciB0YWJcbiAgICAgICAgICogKDk6IGUpLCBMRiBvciBsaW5lIGZlZWQgKDEwOiBlKSwgYW5kIENSIG9yIGNhcnJpYWdlXG4gICAgICAgICAqIHJldHVybiAoMTM6IGUpLiBUaGUgVGV4dCBDb21wYWN0aW9uIG1vZGUgYWxzbyBpbmNsdWRlcyB2YXJpb3VzIGxhdGNoXG4gICAgICAgICAqIGFuZCBzaGlmdCBjaGFyYWN0ZXJzIHdoaWNoIGFyZSB1c2VkIGV4Y2x1c2l2ZWx5IHdpdGhpbiB0aGUgbW9kZS4gVGhlIFRleHRcbiAgICAgICAgICogQ29tcGFjdGlvbiBtb2RlIGVuY29kZXMgdXAgdG8gMiBjaGFyYWN0ZXJzIHBlciBjb2Rld29yZC4gVGhlIGNvbXBhY3Rpb24gcnVsZXNcbiAgICAgICAgICogZm9yIGNvbnZlcnRpbmcgZGF0YSBpbnRvIFBERjQxNyBjb2Rld29yZHMgYXJlIGRlZmluZWQgaW4gNS40LjIuMi4gVGhlIHN1Yi1tb2RlXG4gICAgICAgICAqIHN3aXRjaGVzIGFyZSBkZWZpbmVkIGluIDUuNC4yLjMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB0ZXh0Q29tcGFjdGlvbkRhdGEgVGhlIHRleHQgY29tcGFjdGlvbiBkYXRhLlxuICAgICAgICAgKiBAcGFyYW0gYnl0ZUNvbXBhY3Rpb25EYXRhIFRoZSBieXRlIGNvbXBhY3Rpb24gZGF0YSBpZiB0aGVyZVxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcyBhIG1vZGUgc2hpZnQuXG4gICAgICAgICAqIEBwYXJhbSBsZW5ndGggICAgICAgICAgICAgVGhlIHNpemUgb2YgdGhlIHRleHQgY29tcGFjdGlvbiBhbmQgYnl0ZSBjb21wYWN0aW9uIGRhdGEuXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHQgICAgICAgICAgICAgVGhlIGRlY29kZWQgZGF0YSBpcyBhcHBlbmRlZCB0byB0aGUgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZVRleHRDb21wYWN0aW9uKHRleHRDb21wYWN0aW9uRGF0YSwgYnl0ZUNvbXBhY3Rpb25EYXRhLCBsZW5ndGgsIHJlc3VsdCkge1xuICAgICAgICAgICAgLy8gQmVnaW5uaW5nIGZyb20gYW4gaW5pdGlhbCBzdGF0ZSBvZiB0aGUgQWxwaGEgc3ViLW1vZGVcbiAgICAgICAgICAgIC8vIFRoZSBkZWZhdWx0IGNvbXBhY3Rpb24gbW9kZSBmb3IgUERGNDE3IGluIGVmZmVjdCBhdCB0aGUgc3RhcnQgb2YgZWFjaCBzeW1ib2wgc2hhbGwgYWx3YXlzIGJlIFRleHRcbiAgICAgICAgICAgIC8vIENvbXBhY3Rpb24gbW9kZSBBbHBoYSBzdWItbW9kZSAoYWxwaGFiZXRpYzogdXBwZXJjYXNlKS4gQSBsYXRjaCBjb2Rld29yZCBmcm9tIGFub3RoZXIgbW9kZSB0byB0aGUgVGV4dFxuICAgICAgICAgICAgLy8gQ29tcGFjdGlvbiBtb2RlIHNoYWxsIGFsd2F5cyBzd2l0Y2ggdG8gdGhlIFRleHQgQ29tcGFjdGlvbiBBbHBoYSBzdWItbW9kZS5cbiAgICAgICAgICAgIGxldCBzdWJNb2RlID0gTW9kZSQyLkFMUEhBO1xuICAgICAgICAgICAgbGV0IHByaW9yVG9TaGlmdE1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBzdWJNb2RlQ2ggPSB0ZXh0Q29tcGFjdGlvbkRhdGFbaV07XG4gICAgICAgICAgICAgICAgbGV0IGNoID0gLypjaGFyKi8gJyc7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChzdWJNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQyLkFMUEhBOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxwaGEgKGFscGhhYmV0aWM6IHVwcGVyY2FzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNb2RlQ2ggPCAyNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwcGVyIGNhc2UgQWxwaGEgQ2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogNjUgPSAnQScgQVNDSUkgLT4gdGhlcmUgaXMgYnl0ZSBjb2RlIG9mIHN5bWJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gLyooY2hhcikoJ0EnICsgc3ViTW9kZUNoKSAqLyBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgc3ViTW9kZUNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ViTW9kZUNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaCA9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5MTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuTE9XRVI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLk1JWEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlBTOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hpZnQgdG8gcHVuY3R1YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yVG9TaGlmdE1vZGUgPSBzdWJNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTW9kZSA9IE1vZGUkMi5QVU5DVF9TSElGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NT0RFX1NISUZUX1RPX0JZVEVfQ09NUEFDVElPTl9NT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgvKihjaGFyKSovIGJ5dGVDb21wYWN0aW9uRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuVEVYVF9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLkFMUEhBO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQyLkxPV0VSOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG93ZXIgKGFscGhhYmV0aWM6IGxvd2VyY2FzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNb2RlQ2ggPCAyNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gLyooY2hhcikoJ2EnICsgc3ViTW9kZUNoKSovIFN0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBzdWJNb2RlQ2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdWJNb2RlQ2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkFTOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hpZnQgdG8gYWxwaGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yVG9TaGlmdE1vZGUgPSBzdWJNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTW9kZSA9IE1vZGUkMi5BTFBIQV9TSElGVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuTUlYRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUFM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGlmdCB0byBwdW5jdHVhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JUb1NoaWZ0TW9kZSA9IHN1Yk1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLlBVTkNUX1NISUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1PREVfU0hJRlRfVE9fQllURV9DT01QQUNUSU9OX01PREU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIERvZXMgdGhpcyBuZWVkIHRvIHVzZSB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZW5jb2Rpbmc/IFNlZSBvdGhlciBvY2N1cnJlbmNlcyBiZWxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgvKihjaGFyKSovIGJ5dGVDb21wYWN0aW9uRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuVEVYVF9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLkFMUEhBO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQyLk1JWEVEOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWl4ZWQgKHB1bmN0dWF0aW9uOiBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Yk1vZGVDaCA8IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5QTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1JWEVEX0NIQVJTW3N1Yk1vZGVDaF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHN1Yk1vZGVDaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5QTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuUFVOQ1Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkxMOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTW9kZSA9IE1vZGUkMi5MT1dFUjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5BTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUFM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGlmdCB0byBwdW5jdHVhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JUb1NoaWZ0TW9kZSA9IHN1Yk1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLlBVTkNUX1NISUZUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1PREVfU0hJRlRfVE9fQllURV9DT01QQUNUSU9OX01PREU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKC8qKGNoYXIpKi8gYnl0ZUNvbXBhY3Rpb25EYXRhW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlJDIuUFVOQ1Q6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQdW5jdHVhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Yk1vZGVDaCA8IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5QQUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5QVU5DVF9DSEFSU1tzdWJNb2RlQ2hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdWJNb2RlQ2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUEFMOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTW9kZSA9IE1vZGUkMi5BTFBIQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NT0RFX1NISUZUX1RPX0JZVEVfQ09NUEFDVElPTl9NT0RFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgvKihjaGFyKSovIGJ5dGVDb21wYWN0aW9uRGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuVEVYVF9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gTW9kZSQyLkFMUEhBO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQyLkFMUEhBX1NISUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBzdWItbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViTW9kZSA9IHByaW9yVG9TaGlmdE1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViTW9kZUNoIDwgMjYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaCA9IC8qKGNoYXIpKCdBJyArIHN1Yk1vZGVDaCkqLyBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgc3ViTW9kZUNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ViTW9kZUNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaCA9ICcgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlJDIuUFVOQ1RfU0hJRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHN1Yi1tb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJNb2RlID0gcHJpb3JUb1NoaWZ0TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNb2RlQ2ggPCBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUEFMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2ggPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUFVOQ1RfQ0hBUlNbc3ViTW9kZUNoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ViTW9kZUNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlBBTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTU9ERV9TSElGVF9UT19CWVRFX0NPTVBBQ1RJT05fTU9ERTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBTIGJlZm9yZSBTaGlmdC10by1CeXRlIGlzIHVzZWQgYXMgYSBwYWRkaW5nIGNoYXJhY3RlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZSA1LjQuMi40IG9mIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKC8qKGNoYXIpKi8gYnl0ZUNvbXBhY3Rpb25EYXRhW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1vZGUgPSBNb2RlJDIuQUxQSEE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgKGNoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgZGVjb2RlZCBjaGFyYWN0ZXIgdG8gcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoY2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ5dGUgQ29tcGFjdGlvbiBtb2RlIChzZWUgNS40LjMpIHBlcm1pdHMgYWxsIDI1NiBwb3NzaWJsZSA4LWJpdCBieXRlIHZhbHVlcyB0byBiZSBlbmNvZGVkLlxuICAgICAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBBU0NJSSBjaGFyYWN0ZXJzIHZhbHVlIDAgdG8gMTI3IGluY2x1c2l2ZSBhbmQgcHJvdmlkZXMgZm9yIGludGVybmF0aW9uYWxcbiAgICAgICAgICogY2hhcmFjdGVyIHNldCBzdXBwb3J0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gbW9kZSAgICAgIFRoZSBieXRlIGNvbXBhY3Rpb24gbW9kZSBpLmUuIDkwMSBvciA5MjRcbiAgICAgICAgICogQHBhcmFtIGNvZGV3b3JkcyBUaGUgYXJyYXkgb2YgY29kZXdvcmRzIChkYXRhICsgZXJyb3IpXG4gICAgICAgICAqIEBwYXJhbSBlbmNvZGluZyAgQ3VycmVudGx5IGFjdGl2ZSBjaGFyYWN0ZXIgZW5jb2RpbmdcbiAgICAgICAgICogQHBhcmFtIGNvZGVJbmRleCBUaGUgY3VycmVudCBpbmRleCBpbnRvIHRoZSBjb2Rld29yZCBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIHJlc3VsdCAgICBUaGUgZGVjb2RlZCBkYXRhIGlzIGFwcGVuZGVkIHRvIHRoZSByZXN1bHQuXG4gICAgICAgICAqIEByZXR1cm4gVGhlIG5leHQgaW5kZXggaW50byB0aGUgY29kZXdvcmQgYXJyYXkuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgLyppbnQqLyBieXRlQ29tcGFjdGlvbihtb2RlLCBjb2Rld29yZHMsIGVuY29kaW5nLCBjb2RlSW5kZXgsIHJlc3VsdCkge1xuICAgICAgICAgICAgbGV0IGRlY29kZWRCeXRlcyA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSAvKmxvbmcqLyAwO1xuICAgICAgICAgICAgbGV0IGVuZCA9IGZhbHNlO1xuICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQllURV9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgIC8vIFRvdGFsIG51bWJlciBvZiBCeXRlIENvbXBhY3Rpb24gY2hhcmFjdGVycyB0byBiZSBlbmNvZGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG5vdCBhIG11bHRpcGxlIG9mIDZcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJ5dGVDb21wYWN0ZWRDb2Rld29yZHMgPSBuZXcgSW50MzJBcnJheSg2KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRDb2RlID0gY29kZXdvcmRzW2NvZGVJbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChjb2RlSW5kZXggPCBjb2Rld29yZHNbMF0pICYmICFlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVDb21wYWN0ZWRDb2Rld29yZHNbY291bnQrK10gPSBuZXh0Q29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhc2UgOTAwXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDkwMCAqIHZhbHVlICsgbmV4dENvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q29kZSA9IGNvZGV3b3Jkc1tjb2RlSW5kZXgrK107XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwZXJoYXBzIGl0IHNob3VsZCBiZSBvayB0byBjaGVjayBvbmx5IG5leHRDb2RlID49IFRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5leHRDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuVEVYVF9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQllURV9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNRVJJQ19DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQllURV9DT01QQUNUSU9OX01PREVfTEFUQ0hfNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfQ09OVFJPTF9CTE9DSzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTEQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFDUk9fUERGNDE3X1RFUk1JTkFUT1I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVJbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvdW50ICUgNSA9PT0gMCkgJiYgKGNvdW50ID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY29kZSBldmVyeSA1IGNvZGV3b3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0byBCYXNlIDI1NlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiAvKmludCovID0gMDsgaiA8IDY7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEBub3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogSmF2YVNjcmlwdCBzdG9yZXMgbnVtYmVycyBhcyA2NCBiaXRzIGZsb2F0aW5nIHBvaW50IG51bWJlcnMsIGJ1dCBhbGwgYml0d2lzZSBvcGVyYXRpb25zIGFyZSBwZXJmb3JtZWQgb24gMzIgYml0cyBiaW5hcnkgbnVtYmVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTbyB0aGUgbmV4dCBiaXR3aXNlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgZG9uZSB3aXRoIHNpbXBsZSBudW1iZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZEJ5dGVzLndyaXRlKC8qKGJ5dGUpKi8gTnVtYmVyKGNyZWF0ZUJpZ0ludCh2YWx1ZSkgPj4gY3JlYXRlQmlnSW50KDggKiAoNSAtIGopKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbmQgb2YgYWxsIGNvZGV3b3JkcyBpcyByZWFjaGVkIHRoZSBsYXN0IGNvZGV3b3JkIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlSW5kZXggPT09IGNvZGV3b3Jkc1swXSAmJiBuZXh0Q29kZSA8IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZUNvbXBhY3RlZENvZGV3b3Jkc1tjb3VudCsrXSA9IG5leHRDb2RlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIEJ5dGUgQ29tcGFjdGlvbiBtb2RlIGlzIGludm9rZWQgd2l0aCBjb2Rld29yZCA5MDEsXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBsYXN0IGdyb3VwIG9mIGNvZGV3b3JkcyBpcyBpbnRlcnByZXRlZCBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBvbmUgYnl0ZSBwZXIgY29kZXdvcmQsIHdpdGhvdXQgY29tcGFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRCeXRlcy53cml0ZSgvKihieXRlKSovIGJ5dGVDb21wYWN0ZWRDb2Rld29yZHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJZVEVfQ09NUEFDVElPTl9NT0RFX0xBVENIXzY6XG4gICAgICAgICAgICAgICAgICAgIC8vIFRvdGFsIG51bWJlciBvZiBCeXRlIENvbXBhY3Rpb24gY2hhcmFjdGVycyB0byBiZSBlbmNvZGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIGFuIGludGVnZXIgbXVsdGlwbGUgb2YgNlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY29kZUluZGV4IDwgY29kZXdvcmRzWzBdICYmICFlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2RlID0gY29kZXdvcmRzW2NvZGVJbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYXNlIDkwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gOTAwICogdmFsdWUgKyBjb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CWVRFX0NPTVBBQ1RJT05fTU9ERV9MQVRDSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNRVJJQ19DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJZVEVfQ09NUEFDVElPTl9NT0RFX0xBVENIXzY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJFR0lOX01BQ1JPX1BERjQxN19DT05UUk9MX0JMT0NLOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTEQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19URVJNSU5BVE9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZUluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjb3VudCAlIDUgPT09IDApICYmIChjb3VudCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjb2RlIGV2ZXJ5IDUgY29kZXdvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0byBCYXNlIDI1NlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEBub3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogSmF2YVNjcmlwdCBzdG9yZXMgbnVtYmVycyBhcyA2NCBiaXRzIGZsb2F0aW5nIHBvaW50IG51bWJlcnMsIGJ1dCBhbGwgYml0d2lzZSBvcGVyYXRpb25zIGFyZSBwZXJmb3JtZWQgb24gMzIgYml0cyBiaW5hcnkgbnVtYmVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTbyB0aGUgbmV4dCBiaXR3aXNlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgZG9uZSB3aXRoIHNpbXBsZSBudW1iZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqIC8qaW50Ki8gPSAwOyBqIDwgNjsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRCeXRlcy53cml0ZSgvKihieXRlKSovIE51bWJlcihjcmVhdGVCaWdJbnQodmFsdWUpID4+IGNyZWF0ZUJpZ0ludCg4ICogKDUgLSBqKSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmcuZGVjb2RlKGRlY29kZWRCeXRlcy50b0J5dGVBcnJheSgpLCBlbmNvZGluZykpO1xuICAgICAgICAgICAgcmV0dXJuIGNvZGVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogTnVtZXJpYyBDb21wYWN0aW9uIG1vZGUgKHNlZSA1LjQuNCkgcGVybWl0cyBlZmZpY2llbnQgZW5jb2Rpbmcgb2YgbnVtZXJpYyBkYXRhIHN0cmluZ3MuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb2Rld29yZHMgVGhlIGFycmF5IG9mIGNvZGV3b3JkcyAoZGF0YSArIGVycm9yKVxuICAgICAgICAgKiBAcGFyYW0gY29kZUluZGV4IFRoZSBjdXJyZW50IGluZGV4IGludG8gdGhlIGNvZGV3b3JkIGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gcmVzdWx0ICAgIFRoZSBkZWNvZGVkIGRhdGEgaXMgYXBwZW5kZWQgdG8gdGhlIHJlc3VsdC5cbiAgICAgICAgICogQHJldHVybiBUaGUgbmV4dCBpbmRleCBpbnRvIHRoZSBjb2Rld29yZCBhcnJheS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBudW1lcmljQ29tcGFjdGlvbihjb2Rld29yZHMsIGNvZGVJbmRleCAvKmludCovLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgZW5kID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbnVtZXJpY0NvZGV3b3JkcyA9IG5ldyBJbnQzMkFycmF5KERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQVhfTlVNRVJJQ19DT0RFV09SRFMpO1xuICAgICAgICAgICAgd2hpbGUgKGNvZGVJbmRleCA8IGNvZGV3b3Jkc1swXSAmJiAhZW5kKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBjb2Rld29yZHNbY29kZUluZGV4KytdO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlSW5kZXggPT09IGNvZGV3b3Jkc1swXSkge1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29kZSA8IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5URVhUX0NPTVBBQ1RJT05fTU9ERV9MQVRDSCkge1xuICAgICAgICAgICAgICAgICAgICBudW1lcmljQ29kZXdvcmRzW2NvdW50XSA9IGNvZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQllURV9DT01QQUNUSU9OX01PREVfTEFUQ0g6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CWVRFX0NPTVBBQ1RJT05fTU9ERV9MQVRDSF82OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQkVHSU5fTUFDUk9fUERGNDE3X0NPTlRST0xfQkxPQ0s6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTEQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfVEVSTUlOQVRPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlSW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoY291bnQgJSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFYX05VTUVSSUNfQ09ERVdPUkRTID09PSAwIHx8IGNvZGUgPT09IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5OVU1FUklDX0NPTVBBQ1RJT05fTU9ERV9MQVRDSCB8fCBlbmQpICYmIGNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZS1pbnZva2luZyBOdW1lcmljIENvbXBhY3Rpb24gbW9kZSAoYnkgdXNpbmcgY29kZXdvcmQgOTAyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoaWxlIGluIE51bWVyaWMgQ29tcGFjdGlvbiBtb2RlKSBzZXJ2ZXMgIHRvIHRlcm1pbmF0ZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBOdW1lcmljIENvbXBhY3Rpb24gbW9kZSBncm91cGluZyBhcyBkZXNjcmliZWQgaW4gNS40LjQuMixcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZW4gdG8gc3RhcnQgYSBuZXcgb25lIGdyb3VwaW5nLlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5kZWNvZGVCYXNlOTAwdG9CYXNlMTAobnVtZXJpY0NvZGV3b3JkcywgY291bnQpKTtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2RlSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgYSBsaXN0IG9mIE51bWVyaWMgQ29tcGFjdGVkIGNvZGV3b3JkcyBmcm9tIEJhc2UgOTAwIHRvIEJhc2UgMTAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb2Rld29yZHMgVGhlIGFycmF5IG9mIGNvZGV3b3Jkc1xuICAgICAgICAgKiBAcGFyYW0gY291bnQgICAgIFRoZSBudW1iZXIgb2YgY29kZXdvcmRzXG4gICAgICAgICAqIEByZXR1cm4gVGhlIGRlY29kZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgTnVtZXJpYyBkYXRhLlxuICAgICAgICAgKlxuICAgICAgICAgKiBFWEFNUExFXG4gICAgICAgICAqIEVuY29kZSB0aGUgZmlmdGVlbiBkaWdpdCBudW1lcmljIHN0cmluZyAwMDAyMTMyOTgxNzQwMDBcbiAgICAgICAgICogUHJlZml4IHRoZSBudW1lcmljIHN0cmluZyB3aXRoIGEgMSBhbmQgc2V0IHRoZSBpbml0aWFsIHZhbHVlIG9mXG4gICAgICAgICAqIHQgPSAxIDAwMCAyMTMgMjk4IDE3NCAwMDBcbiAgICAgICAgICogQ2FsY3VsYXRlIGNvZGV3b3JkIDBcbiAgICAgICAgICogZDAgPSAxIDAwMCAyMTMgMjk4IDE3NCAwMDAgbW9kIDkwMCA9IDIwMFxuICAgICAgICAgKlxuICAgICAgICAgKiB0ID0gMSAwMDAgMjEzIDI5OCAxNzQgMDAwIGRpdiA5MDAgPSAxIDExMSAzNDggMTA5IDA4MlxuICAgICAgICAgKiBDYWxjdWxhdGUgY29kZXdvcmQgMVxuICAgICAgICAgKiBkMSA9IDEgMTExIDM0OCAxMDkgMDgyIG1vZCA5MDAgPSAyODJcbiAgICAgICAgICpcbiAgICAgICAgICogdCA9IDEgMTExIDM0OCAxMDkgMDgyIGRpdiA5MDAgPSAxIDIzNCA4MzEgMjMyXG4gICAgICAgICAqIENhbGN1bGF0ZSBjb2Rld29yZCAyXG4gICAgICAgICAqIGQyID0gMSAyMzQgODMxIDIzMiBtb2QgOTAwID0gNjMyXG4gICAgICAgICAqXG4gICAgICAgICAqIHQgPSAxIDIzNCA4MzEgMjMyIGRpdiA5MDAgPSAxIDM3MiAwMzRcbiAgICAgICAgICogQ2FsY3VsYXRlIGNvZGV3b3JkIDNcbiAgICAgICAgICogZDMgPSAxIDM3MiAwMzQgbW9kIDkwMCA9IDQzNFxuICAgICAgICAgKlxuICAgICAgICAgKiB0ID0gMSAzNzIgMDM0IGRpdiA5MDAgPSAxIDUyNFxuICAgICAgICAgKiBDYWxjdWxhdGUgY29kZXdvcmQgNFxuICAgICAgICAgKiBkNCA9IDEgNTI0IG1vZCA5MDAgPSA2MjRcbiAgICAgICAgICpcbiAgICAgICAgICogdCA9IDEgNTI0IGRpdiA5MDAgPSAxXG4gICAgICAgICAqIENhbGN1bGF0ZSBjb2Rld29yZCA1XG4gICAgICAgICAqIGQ1ID0gMSBtb2QgOTAwID0gMVxuICAgICAgICAgKiB0ID0gMSBkaXYgOTAwID0gMFxuICAgICAgICAgKiBDb2Rld29yZCBzZXF1ZW5jZSBpczogMSwgNjI0LCA0MzQsIDYzMiwgMjgyLCAyMDBcbiAgICAgICAgICpcbiAgICAgICAgICogRGVjb2RlIHRoZSBhYm92ZSBjb2Rld29yZHMgaW52b2x2ZXNcbiAgICAgICAgICogICAxIHggOTAwIHBvd2VyIG9mIDUgKyA2MjQgeCA5MDAgcG93ZXIgb2YgNCArIDQzNCB4IDkwMCBwb3dlciBvZiAzICtcbiAgICAgICAgICogNjMyIHggOTAwIHBvd2VyIG9mIDIgKyAyODIgeCA5MDAgcG93ZXIgb2YgMSArIDIwMCB4IDkwMCBwb3dlciBvZiAwID0gMTAwMDIxMzI5ODE3NDAwMFxuICAgICAgICAgKlxuICAgICAgICAgKiBSZW1vdmUgbGVhZGluZyAxID0+ICBSZXN1bHQgaXMgMDAwMjEzMjk4MTc0MDAwXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlQmFzZTkwMHRvQmFzZTEwKGNvZGV3b3JkcywgY291bnQpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBjcmVhdGVCaWdJbnQoMCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuRVhQOTAwW2NvdW50IC0gaSAtIDFdICogY3JlYXRlQmlnSW50KGNvZGV3b3Jkc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzdWx0U3RyaW5nID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0U3RyaW5nLmNoYXJBdCgwKSAhPT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFN0cmluZy5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlRFWFRfQ09NUEFDVElPTl9NT0RFX0xBVENIID0gOTAwO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CWVRFX0NPTVBBQ1RJT05fTU9ERV9MQVRDSCA9IDkwMTtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTlVNRVJJQ19DT01QQUNUSU9OX01PREVfTEFUQ0ggPSA5MDI7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkJZVEVfQ09NUEFDVElPTl9NT0RFX0xBVENIXzYgPSA5MjQ7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkVDSV9VU0VSX0RFRklORUQgPSA5MjU7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkVDSV9HRU5FUkFMX1BVUlBPU0UgPSA5MjY7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkVDSV9DSEFSU0VUID0gOTI3O1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5CRUdJTl9NQUNST19QREY0MTdfQ09OVFJPTF9CTE9DSyA9IDkyODtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQkVHSU5fTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEID0gOTIzO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfVEVSTUlOQVRPUiA9IDkyMjtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTU9ERV9TSElGVF9UT19CWVRFX0NPTVBBQ1RJT05fTU9ERSA9IDkxMztcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFYX05VTUVSSUNfQ09ERVdPUkRTID0gMTU7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9GSUxFX05BTUUgPSAwO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTERfU0VHTUVOVF9DT1VOVCA9IDE7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9USU1FX1NUQU1QID0gMjtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEX1NFTkRFUiA9IDM7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLk1BQ1JPX1BERjQxN19PUFRJT05BTF9GSUVMRF9BRERSRVNTRUUgPSA0O1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5NQUNST19QREY0MTdfT1BUSU9OQUxfRklFTERfRklMRV9TSVpFID0gNTtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUFDUk9fUERGNDE3X09QVElPTkFMX0ZJRUxEX0NIRUNLU1VNID0gNjtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUEwgPSAyNTtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTEwgPSAyNztcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQVMgPSAyNztcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUwgPSAyODtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuQUwgPSAyODtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUFMgPSAyOTtcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuUEFMID0gMjk7XG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLlBVTkNUX0NIQVJTID0gJzs8PkBbXFxcXF1fYH4hXFxyXFx0LDpcXG4tLiQvXCJ8KigpP3t9XFwnJztcbiAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDIuTUlYRURfQ0hBUlMgPSAnMDEyMzQ1Njc4OSZcXHJcXHQsOiMtLiQvKyUqPV4nO1xuICAgIC8qKlxuICAgICAqIFRhYmxlIGNvbnRhaW5pbmcgdmFsdWVzIGZvciB0aGUgZXhwb25lbnQgb2YgOTAwLlxuICAgICAqIFRoaXMgaXMgdXNlZCBpbiB0aGUgbnVtZXJpYyBjb21wYWN0aW9uIGRlY29kZSBhbGdvcml0aG0uXG4gICAgICovXG4gICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlciQyLkVYUDkwMCA9IGdldEJpZ0ludENvbnN0cnVjdG9yKCkgPyBnZXRFWFA5MDAoKSA6IFtdO1xuICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5OVU1CRVJfT0ZfU0VRVUVOQ0VfQ09ERVdPUkRTID0gMjtcblxuICAgIC8qXG4gICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgKlxuICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICpcbiAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgKlxuICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAqL1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjtcbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkZvcm1hdHRlcjtcbiAgICAvLyBpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgLyoqXG4gICAgICogQGF1dGhvciBHdWVudGhlciBHcmF1XG4gICAgICovXG4gICAgLypwdWJsaWMgZmluYWwqLyBjbGFzcyBQREY0MTdTY2FubmluZ0RlY29kZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQFRPRE8gZG9uJ3QgcGFzcyBpbiBtaW5Db2Rld29yZFdpZHRoIGFuZCBtYXhDb2Rld29yZFdpZHRoLCBwYXNzIGluIGJhcmNvZGUgY29sdW1ucyBmb3Igc3RhcnQgYW5kIHN0b3AgcGF0dGVyblxuICAgICAgICAgKlxuICAgICAgICAgKiBjb2x1bW5zLiBUaGF0IHdheSB3aWR0aCBjYW4gYmUgZGVkdWN0ZWQgZnJvbSB0aGUgcGF0dGVybiBjb2x1bW4uXG4gICAgICAgICAqIFRoaXMgYXBwcm9hY2ggYWxzbyBhbGxvd3MgdG8gZGV0ZWN0IG1vcmUgZGV0YWlscyBhYm91dCB0aGUgYmFyY29kZSwgZS5nLiBpZiBhIGJhciB0eXBlICh3aGl0ZSBvciBibGFjaykgaXMgd2lkZXJcbiAgICAgICAgICogdGhhbiBpdCBzaG91bGQgYmUuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgc2Nhbm5lciB1c2VkIGEgYmFkIGJsYWNrcG9pbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBCaXRNYXRyaXhcbiAgICAgICAgICogQHBhcmFtIGltYWdlXG4gICAgICAgICAqIEBwYXJhbSBSZXN1bHRQb2ludFxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2VUb3BMZWZ0XG4gICAgICAgICAqIEBwYXJhbSBSZXN1bHRQb2ludFxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2VCb3R0b21MZWZ0XG4gICAgICAgICAqIEBwYXJhbSBSZXN1bHRQb2ludFxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2VUb3BSaWdodFxuICAgICAgICAgKiBAcGFyYW0gUmVzdWx0UG9pbnRcbiAgICAgICAgICogQHBhcmFtIGltYWdlQm90dG9tUmlnaHRcbiAgICAgICAgICogQHBhcmFtIGludFxuICAgICAgICAgKiBAcGFyYW0gbWluQ29kZXdvcmRXaWR0aFxuICAgICAgICAgKiBAcGFyYW0gaW50XG4gICAgICAgICAqIEBwYXJhbSBtYXhDb2Rld29yZFdpZHRoXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb25cbiAgICAgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGRlY29kZShpbWFnZSwgaW1hZ2VUb3BMZWZ0LCBpbWFnZUJvdHRvbUxlZnQsIGltYWdlVG9wUmlnaHQsIGltYWdlQm90dG9tUmlnaHQsIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpIHtcbiAgICAgICAgICAgIGxldCBib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveChpbWFnZSwgaW1hZ2VUb3BMZWZ0LCBpbWFnZUJvdHRvbUxlZnQsIGltYWdlVG9wUmlnaHQsIGltYWdlQm90dG9tUmlnaHQpO1xuICAgICAgICAgICAgbGV0IGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4gPSBudWxsO1xuICAgICAgICAgICAgbGV0IHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkZXRlY3Rpb25SZXN1bHQ7XG4gICAgICAgICAgICBmb3IgKGxldCBmaXJzdFBhc3MgLypib29sZWFuKi8gPSB0cnVlOzsgZmlyc3RQYXNzID0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VUb3BMZWZ0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFJvd0luZGljYXRvckNvbHVtbiA9IFBERjQxN1NjYW5uaW5nRGVjb2Rlci5nZXRSb3dJbmRpY2F0b3JDb2x1bW4oaW1hZ2UsIGJvdW5kaW5nQm94LCBpbWFnZVRvcExlZnQsIHRydWUsIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VUb3BSaWdodCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmdldFJvd0luZGljYXRvckNvbHVtbihpbWFnZSwgYm91bmRpbmdCb3gsIGltYWdlVG9wUmlnaHQsIGZhbHNlLCBtaW5Db2Rld29yZFdpZHRoLCBtYXhDb2Rld29yZFdpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGV0ZWN0aW9uUmVzdWx0ID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLm1lcmdlKGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4sIHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0ZWN0aW9uUmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgTm90Rm91bmRFeGNlcHRpb24uZ2V0Tm90Rm91bmRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0Qm94ID0gZGV0ZWN0aW9uUmVzdWx0LmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0UGFzcyAmJiByZXN1bHRCb3ggIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAocmVzdWx0Qm94LmdldE1pblkoKSA8IGJvdW5kaW5nQm94LmdldE1pblkoKSB8fCByZXN1bHRCb3guZ2V0TWF4WSgpID4gYm91bmRpbmdCb3guZ2V0TWF4WSgpKSkge1xuICAgICAgICAgICAgICAgICAgICBib3VuZGluZ0JveCA9IHJlc3VsdEJveDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRldGVjdGlvblJlc3VsdC5zZXRCb3VuZGluZ0JveChib3VuZGluZ0JveCk7XG4gICAgICAgICAgICBsZXQgbWF4QmFyY29kZUNvbHVtbiA9IGRldGVjdGlvblJlc3VsdC5nZXRCYXJjb2RlQ29sdW1uQ291bnQoKSArIDE7XG4gICAgICAgICAgICBkZXRlY3Rpb25SZXN1bHQuc2V0RGV0ZWN0aW9uUmVzdWx0Q29sdW1uKDAsIGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4pO1xuICAgICAgICAgICAgZGV0ZWN0aW9uUmVzdWx0LnNldERldGVjdGlvblJlc3VsdENvbHVtbihtYXhCYXJjb2RlQ29sdW1uLCByaWdodFJvd0luZGljYXRvckNvbHVtbik7XG4gICAgICAgICAgICBsZXQgbGVmdFRvUmlnaHQgPSBsZWZ0Um93SW5kaWNhdG9yQ29sdW1uICE9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGxldCBiYXJjb2RlQ29sdW1uQ291bnQgLyppbnQqLyA9IDE7IGJhcmNvZGVDb2x1bW5Db3VudCA8PSBtYXhCYXJjb2RlQ29sdW1uOyBiYXJjb2RlQ29sdW1uQ291bnQrKykge1xuICAgICAgICAgICAgICAgIGxldCBiYXJjb2RlQ29sdW1uID0gbGVmdFRvUmlnaHQgPyBiYXJjb2RlQ29sdW1uQ291bnQgOiBtYXhCYXJjb2RlQ29sdW1uIC0gYmFyY29kZUNvbHVtbkNvdW50O1xuICAgICAgICAgICAgICAgIGlmIChkZXRlY3Rpb25SZXN1bHQuZ2V0RGV0ZWN0aW9uUmVzdWx0Q29sdW1uKGJhcmNvZGVDb2x1bW4pICE9PSAvKiBudWxsICovIHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgdGhlIGNhc2UgZm9yIHRoZSBvcHBvc2l0ZSByb3cgaW5kaWNhdG9yIGNvbHVtbiwgd2hpY2ggZG9lc24ndCBuZWVkIHRvIGJlIGRlY29kZWQgYWdhaW4uXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZGV0ZWN0aW9uUmVzdWx0Q29sdW1uO1xuICAgICAgICAgICAgICAgIGlmIChiYXJjb2RlQ29sdW1uID09PSAwIHx8IGJhcmNvZGVDb2x1bW4gPT09IG1heEJhcmNvZGVDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0aW9uUmVzdWx0Q29sdW1uID0gbmV3IERldGVjdGlvblJlc3VsdFJvd0luZGljYXRvckNvbHVtbihib3VuZGluZ0JveCwgYmFyY29kZUNvbHVtbiA9PT0gMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXRlY3Rpb25SZXN1bHRDb2x1bW4gPSBuZXcgRGV0ZWN0aW9uUmVzdWx0Q29sdW1uKGJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGV0ZWN0aW9uUmVzdWx0LnNldERldGVjdGlvblJlc3VsdENvbHVtbihiYXJjb2RlQ29sdW1uLCBkZXRlY3Rpb25SZXN1bHRDb2x1bW4pO1xuICAgICAgICAgICAgICAgIGxldCBzdGFydENvbHVtbiA9IC0xO1xuICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c1N0YXJ0Q29sdW1uID0gc3RhcnRDb2x1bW47XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBzdGFydCBhdCBhIHJvdyBmb3Igd2hpY2ggd2Uga25vdyB0aGUgc3RhcnQgcG9zaXRpb24sIHRoZW4gZGV0ZWN0IHVwd2FyZHMgYW5kIGRvd253YXJkcyBmcm9tIHRoZXJlLlxuICAgICAgICAgICAgICAgIGZvciAobGV0IGltYWdlUm93IC8qaW50Ki8gPSBib3VuZGluZ0JveC5nZXRNaW5ZKCk7IGltYWdlUm93IDw9IGJvdW5kaW5nQm94LmdldE1heFkoKTsgaW1hZ2VSb3crKykge1xuICAgICAgICAgICAgICAgICAgICBzdGFydENvbHVtbiA9IFBERjQxN1NjYW5uaW5nRGVjb2Rlci5nZXRTdGFydENvbHVtbihkZXRlY3Rpb25SZXN1bHQsIGJhcmNvZGVDb2x1bW4sIGltYWdlUm93LCBsZWZ0VG9SaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydENvbHVtbiA8IDAgfHwgc3RhcnRDb2x1bW4gPiBib3VuZGluZ0JveC5nZXRNYXhYKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1N0YXJ0Q29sdW1uID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRDb2x1bW4gPSBwcmV2aW91c1N0YXJ0Q29sdW1uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IFBERjQxN1NjYW5uaW5nRGVjb2Rlci5kZXRlY3RDb2Rld29yZChpbWFnZSwgYm91bmRpbmdCb3guZ2V0TWluWCgpLCBib3VuZGluZ0JveC5nZXRNYXhYKCksIGxlZnRUb1JpZ2h0LCBzdGFydENvbHVtbiwgaW1hZ2VSb3csIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZXdvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0ZWN0aW9uUmVzdWx0Q29sdW1uLnNldENvZGV3b3JkKGltYWdlUm93LCBjb2Rld29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1N0YXJ0Q29sdW1uID0gc3RhcnRDb2x1bW47XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5Db2Rld29yZFdpZHRoID0gTWF0aC5taW4obWluQ29kZXdvcmRXaWR0aCwgY29kZXdvcmQuZ2V0V2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhDb2Rld29yZFdpZHRoID0gTWF0aC5tYXgobWF4Q29kZXdvcmRXaWR0aCwgY29kZXdvcmQuZ2V0V2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmNyZWF0ZURlY29kZXJSZXN1bHQoZGV0ZWN0aW9uUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGxlZnRSb3dJbmRpY2F0b3JDb2x1bW5cbiAgICAgICAgICogQHBhcmFtIHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBtZXJnZShsZWZ0Um93SW5kaWNhdG9yQ29sdW1uLCByaWdodFJvd0luZGljYXRvckNvbHVtbikge1xuICAgICAgICAgICAgaWYgKGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4gPT0gbnVsbCAmJiByaWdodFJvd0luZGljYXRvckNvbHVtbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYmFyY29kZU1ldGFkYXRhID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmdldEJhcmNvZGVNZXRhZGF0YShsZWZ0Um93SW5kaWNhdG9yQ29sdW1uLCByaWdodFJvd0luZGljYXRvckNvbHVtbik7XG4gICAgICAgICAgICBpZiAoYmFyY29kZU1ldGFkYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBib3VuZGluZ0JveCA9IEJvdW5kaW5nQm94Lm1lcmdlKFBERjQxN1NjYW5uaW5nRGVjb2Rlci5hZGp1c3RCb3VuZGluZ0JveChsZWZ0Um93SW5kaWNhdG9yQ29sdW1uKSwgUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmFkanVzdEJvdW5kaW5nQm94KHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERldGVjdGlvblJlc3VsdChiYXJjb2RlTWV0YWRhdGEsIGJvdW5kaW5nQm94KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJvd0luZGljYXRvckNvbHVtblxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgYWRqdXN0Qm91bmRpbmdCb3gocm93SW5kaWNhdG9yQ29sdW1uKSB7XG4gICAgICAgICAgICBpZiAocm93SW5kaWNhdG9yQ29sdW1uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByb3dIZWlnaHRzID0gcm93SW5kaWNhdG9yQ29sdW1uLmdldFJvd0hlaWdodHMoKTtcbiAgICAgICAgICAgIGlmIChyb3dIZWlnaHRzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtYXhSb3dIZWlnaHQgPSBQREY0MTdTY2FubmluZ0RlY29kZXIuZ2V0TWF4KHJvd0hlaWdodHMpO1xuICAgICAgICAgICAgbGV0IG1pc3NpbmdTdGFydFJvd3MgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgcm93SGVpZ2h0IC8qaW50Ki8gb2Ygcm93SGVpZ2h0cykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdTdGFydFJvd3MgKz0gbWF4Um93SGVpZ2h0IC0gcm93SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGlmIChyb3dIZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb2Rld29yZHMgPSByb3dJbmRpY2F0b3JDb2x1bW4uZ2V0Q29kZXdvcmRzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCByb3cgLyppbnQqLyA9IDA7IG1pc3NpbmdTdGFydFJvd3MgPiAwICYmIGNvZGV3b3Jkc1tyb3ddID09IG51bGw7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ1N0YXJ0Um93cy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1pc3NpbmdFbmRSb3dzID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyAvKmludCovID0gcm93SGVpZ2h0cy5sZW5ndGggLSAxOyByb3cgPj0gMDsgcm93LS0pIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nRW5kUm93cyArPSBtYXhSb3dIZWlnaHQgLSByb3dIZWlnaHRzW3Jvd107XG4gICAgICAgICAgICAgICAgaWYgKHJvd0hlaWdodHNbcm93XSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgcm93IC8qaW50Ki8gPSBjb2Rld29yZHMubGVuZ3RoIC0gMTsgbWlzc2luZ0VuZFJvd3MgPiAwICYmIGNvZGV3b3Jkc1tyb3ddID09IG51bGw7IHJvdy0tKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ0VuZFJvd3MtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3dJbmRpY2F0b3JDb2x1bW4uZ2V0Qm91bmRpbmdCb3goKS5hZGRNaXNzaW5nUm93cyhtaXNzaW5nU3RhcnRSb3dzLCBtaXNzaW5nRW5kUm93cywgcm93SW5kaWNhdG9yQ29sdW1uLmlzTGVmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0TWF4KHZhbHVlcykge1xuICAgICAgICAgICAgbGV0IG1heFZhbHVlID0gLTE7XG4gICAgICAgICAgICBmb3IgKGxldCB2YWx1ZSAvKmludCovIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIG1heFZhbHVlID0gTWF0aC5tYXgobWF4VmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXhWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0QmFyY29kZU1ldGFkYXRhKGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4sIHJpZ2h0Um93SW5kaWNhdG9yQ29sdW1uKSB7XG4gICAgICAgICAgICBsZXQgbGVmdEJhcmNvZGVNZXRhZGF0YTtcbiAgICAgICAgICAgIGlmIChsZWZ0Um93SW5kaWNhdG9yQ29sdW1uID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAobGVmdEJhcmNvZGVNZXRhZGF0YSA9IGxlZnRSb3dJbmRpY2F0b3JDb2x1bW4uZ2V0QmFyY29kZU1ldGFkYXRhKCkpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmlnaHRSb3dJbmRpY2F0b3JDb2x1bW4gPT0gbnVsbCA/IG51bGwgOiByaWdodFJvd0luZGljYXRvckNvbHVtbi5nZXRCYXJjb2RlTWV0YWRhdGEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByaWdodEJhcmNvZGVNZXRhZGF0YTtcbiAgICAgICAgICAgIGlmIChyaWdodFJvd0luZGljYXRvckNvbHVtbiA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgKHJpZ2h0QmFyY29kZU1ldGFkYXRhID0gcmlnaHRSb3dJbmRpY2F0b3JDb2x1bW4uZ2V0QmFyY29kZU1ldGFkYXRhKCkpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdEJhcmNvZGVNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZWZ0QmFyY29kZU1ldGFkYXRhLmdldENvbHVtbkNvdW50KCkgIT09IHJpZ2h0QmFyY29kZU1ldGFkYXRhLmdldENvbHVtbkNvdW50KCkgJiZcbiAgICAgICAgICAgICAgICBsZWZ0QmFyY29kZU1ldGFkYXRhLmdldEVycm9yQ29ycmVjdGlvbkxldmVsKCkgIT09IHJpZ2h0QmFyY29kZU1ldGFkYXRhLmdldEVycm9yQ29ycmVjdGlvbkxldmVsKCkgJiZcbiAgICAgICAgICAgICAgICBsZWZ0QmFyY29kZU1ldGFkYXRhLmdldFJvd0NvdW50KCkgIT09IHJpZ2h0QmFyY29kZU1ldGFkYXRhLmdldFJvd0NvdW50KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsZWZ0QmFyY29kZU1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRSb3dJbmRpY2F0b3JDb2x1bW4oaW1hZ2UsIGJvdW5kaW5nQm94LCBzdGFydFBvaW50LCBsZWZ0VG9SaWdodCwgbWluQ29kZXdvcmRXaWR0aCwgbWF4Q29kZXdvcmRXaWR0aCkge1xuICAgICAgICAgICAgbGV0IHJvd0luZGljYXRvckNvbHVtbiA9IG5ldyBEZXRlY3Rpb25SZXN1bHRSb3dJbmRpY2F0b3JDb2x1bW4oYm91bmRpbmdCb3gsIGxlZnRUb1JpZ2h0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5jcmVtZW50ID0gaSA9PT0gMCA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRDb2x1bW4gPSBNYXRoLnRydW5jKE1hdGgudHJ1bmMoc3RhcnRQb2ludC5nZXRYKCkpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbWFnZVJvdyAvKmludCovID0gTWF0aC50cnVuYyhNYXRoLnRydW5jKHN0YXJ0UG9pbnQuZ2V0WSgpKSk7IGltYWdlUm93IDw9IGJvdW5kaW5nQm94LmdldE1heFkoKSAmJlxuICAgICAgICAgICAgICAgICAgICBpbWFnZVJvdyA+PSBib3VuZGluZ0JveC5nZXRNaW5ZKCk7IGltYWdlUm93ICs9IGluY3JlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29kZXdvcmQgPSBQREY0MTdTY2FubmluZ0RlY29kZXIuZGV0ZWN0Q29kZXdvcmQoaW1hZ2UsIDAsIGltYWdlLmdldFdpZHRoKCksIGxlZnRUb1JpZ2h0LCBzdGFydENvbHVtbiwgaW1hZ2VSb3csIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZXdvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93SW5kaWNhdG9yQ29sdW1uLnNldENvZGV3b3JkKGltYWdlUm93LCBjb2Rld29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVmdFRvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydENvbHVtbiA9IGNvZGV3b3JkLmdldFN0YXJ0WCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRDb2x1bW4gPSBjb2Rld29yZC5nZXRFbmRYKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm93SW5kaWNhdG9yQ29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZGV0ZWN0aW9uUmVzdWx0XG4gICAgICAgICAqIEBwYXJhbSBCYXJjb2RlVmFsdWVcbiAgICAgICAgICogQHBhcmFtIHBhcmFtMlxuICAgICAgICAgKiBAcGFyYW0gcGFyYW0zXG4gICAgICAgICAqIEBwYXJhbSBiYXJjb2RlTWF0cml4XG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhZGp1c3RDb2Rld29yZENvdW50KGRldGVjdGlvblJlc3VsdCwgYmFyY29kZU1hdHJpeCkge1xuICAgICAgICAgICAgbGV0IGJhcmNvZGVNYXRyaXgwMSA9IGJhcmNvZGVNYXRyaXhbMF1bMV07XG4gICAgICAgICAgICBsZXQgbnVtYmVyT2ZDb2Rld29yZHMgPSBiYXJjb2RlTWF0cml4MDEuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGxldCBjYWxjdWxhdGVkTnVtYmVyT2ZDb2Rld29yZHMgPSBkZXRlY3Rpb25SZXN1bHQuZ2V0QmFyY29kZUNvbHVtbkNvdW50KCkgKlxuICAgICAgICAgICAgICAgIGRldGVjdGlvblJlc3VsdC5nZXRCYXJjb2RlUm93Q291bnQoKSAtXG4gICAgICAgICAgICAgICAgUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmdldE51bWJlck9mRUNDb2RlV29yZHMoZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVFQ0xldmVsKCkpO1xuICAgICAgICAgICAgaWYgKG51bWJlck9mQ29kZXdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxjdWxhdGVkTnVtYmVyT2ZDb2Rld29yZHMgPCAxIHx8IGNhbGN1bGF0ZWROdW1iZXJPZkNvZGV3b3JkcyA+IFBERjQxN0NvbW1vbi5NQVhfQ09ERVdPUkRTX0lOX0JBUkNPREUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgTm90Rm91bmRFeGNlcHRpb24uZ2V0Tm90Rm91bmRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYXJjb2RlTWF0cml4MDEuc2V0VmFsdWUoY2FsY3VsYXRlZE51bWJlck9mQ29kZXdvcmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG51bWJlck9mQ29kZXdvcmRzWzBdICE9PSBjYWxjdWxhdGVkTnVtYmVyT2ZDb2Rld29yZHMpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgY2FsY3VsYXRlZCBvbmUgaXMgbW9yZSByZWxpYWJsZSBhcyBpdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJvdyBpbmRpY2F0b3IgY29sdW1uc1xuICAgICAgICAgICAgICAgIGJhcmNvZGVNYXRyaXgwMS5zZXRWYWx1ZShjYWxjdWxhdGVkTnVtYmVyT2ZDb2Rld29yZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZGV0ZWN0aW9uUmVzdWx0XG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb25cbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNyZWF0ZURlY29kZXJSZXN1bHQoZGV0ZWN0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICBsZXQgYmFyY29kZU1hdHJpeCA9IFBERjQxN1NjYW5uaW5nRGVjb2Rlci5jcmVhdGVCYXJjb2RlTWF0cml4KGRldGVjdGlvblJlc3VsdCk7XG4gICAgICAgICAgICBQREY0MTdTY2FubmluZ0RlY29kZXIuYWRqdXN0Q29kZXdvcmRDb3VudChkZXRlY3Rpb25SZXN1bHQsIGJhcmNvZGVNYXRyaXgpO1xuICAgICAgICAgICAgbGV0IGVyYXN1cmVzIC8qQ29sbGVjdGlvbjxJbnRlZ2VyPiovID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBsZXQgY29kZXdvcmRzID0gbmV3IEludDMyQXJyYXkoZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVSb3dDb3VudCgpICogZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVDb2x1bW5Db3VudCgpKTtcbiAgICAgICAgICAgIGxldCBhbWJpZ3VvdXNJbmRleFZhbHVlc0xpc3QgPSAvKkxpc3Q8aW50W10+Ki8gW107XG4gICAgICAgICAgICBsZXQgYW1iaWd1b3VzSW5kZXhlc0xpc3QgPSAvKkNvbGxlY3Rpb248SW50ZWdlcj4qLyBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyAvKmludCovID0gMDsgcm93IDwgZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVSb3dDb3VudCgpOyByb3crKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiAvKmludCovID0gMDsgY29sdW1uIDwgZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVDb2x1bW5Db3VudCgpOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gYmFyY29kZU1hdHJpeFtyb3ddW2NvbHVtbiArIDFdLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2Rld29yZEluZGV4ID0gcm93ICogZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVDb2x1bW5Db3VudCgpICsgY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJhc3VyZXMucHVzaChjb2Rld29yZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2Rld29yZHNbY29kZXdvcmRJbmRleF0gPSB2YWx1ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbWJpZ3VvdXNJbmRleGVzTGlzdC5wdXNoKGNvZGV3b3JkSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1iaWd1b3VzSW5kZXhWYWx1ZXNMaXN0LnB1c2godmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbWJpZ3VvdXNJbmRleFZhbHVlcyA9IG5ldyBBcnJheShhbWJpZ3VvdXNJbmRleFZhbHVlc0xpc3QubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBhbWJpZ3VvdXNJbmRleFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFtYmlndW91c0luZGV4VmFsdWVzW2ldID0gYW1iaWd1b3VzSW5kZXhWYWx1ZXNMaXN0W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBERjQxN1NjYW5uaW5nRGVjb2Rlci5jcmVhdGVEZWNvZGVyUmVzdWx0RnJvbUFtYmlndW91c1ZhbHVlcyhkZXRlY3Rpb25SZXN1bHQuZ2V0QmFyY29kZUVDTGV2ZWwoKSwgY29kZXdvcmRzLCBQREY0MTdDb21tb24udG9JbnRBcnJheShlcmFzdXJlcyksIFBERjQxN0NvbW1vbi50b0ludEFycmF5KGFtYmlndW91c0luZGV4ZXNMaXN0KSwgYW1iaWd1b3VzSW5kZXhWYWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBkZWFscyB3aXRoIHRoZSBmYWN0LCB0aGF0IHRoZSBkZWNvZGluZyBwcm9jZXNzIGRvZXNuJ3QgYWx3YXlzIHlpZWxkIGEgc2luZ2xlIG1vc3QgbGlrZWx5IHZhbHVlLiBUaGVcbiAgICAgICAgICogY3VycmVudCBlcnJvciBjb3JyZWN0aW9uIGltcGxlbWVudGF0aW9uIGRvZXNuJ3QgZGVhbCB3aXRoIGVyYXN1cmVzIHZlcnkgd2VsbCwgc28gaXQncyBiZXR0ZXIgdG8gcHJvdmlkZSBhIHZhbHVlXG4gICAgICAgICAqIGZvciB0aGVzZSBhbWJpZ3VvdXMgY29kZXdvcmRzIGluc3RlYWQgb2YgdHJlYXRpbmcgaXQgYXMgYW4gZXJhc3VyZS4gVGhlIHByb2JsZW0gaXMgdGhhdCB3ZSBkb24ndCBrbm93IHdoaWNoIG9mXG4gICAgICAgICAqIHRoZSBhbWJpZ3VvdXMgdmFsdWVzIHRvIGNob29zZS4gV2UgdHJ5IGRlY29kZSB1c2luZyB0aGUgZmlyc3QgdmFsdWUsIGFuZCBpZiB0aGF0IGZhaWxzLCB3ZSB1c2UgYW5vdGhlciBvZiB0aGVcbiAgICAgICAgICogYW1iaWd1b3VzIHZhbHVlcyBhbmQgdHJ5IHRvIGRlY29kZSBhZ2Fpbi4gVGhpcyB1c3VhbGx5IG9ubHkgaGFwcGVucyBvbiB2ZXJ5IGhhcmQgdG8gcmVhZCBhbmQgZGVjb2RlIGJhcmNvZGVzLFxuICAgICAgICAgKiBzbyBkZWNvZGluZyB0aGUgbm9ybWFsIGJhcmNvZGVzIGlzIG5vdCBhZmZlY3RlZCBieSB0aGlzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZXJhc3VyZUFycmF5IGNvbnRhaW5zIHRoZSBpbmRleGVzIG9mIGVyYXN1cmVzXG4gICAgICAgICAqIEBwYXJhbSBhbWJpZ3VvdXNJbmRleGVzIGFycmF5IHdpdGggdGhlIGluZGV4ZXMgdGhhdCBoYXZlIG1vcmUgdGhhbiBvbmUgbW9zdCBsaWtlbHkgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIGFtYmlndW91c0luZGV4VmFsdWVzIHR3byBkaW1lbnNpb25hbCBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSBhbWJpZ3VvdXMgdmFsdWVzLiBUaGUgZmlyc3QgZGltZW5zaW9uIG11c3RcbiAgICAgICAgICogYmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBhbWJpZ3VvdXNJbmRleGVzIGFycmF5XG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBjcmVhdGVEZWNvZGVyUmVzdWx0RnJvbUFtYmlndW91c1ZhbHVlcyhlY0xldmVsLCBjb2Rld29yZHMsIGVyYXN1cmVBcnJheSwgYW1iaWd1b3VzSW5kZXhlcywgYW1iaWd1b3VzSW5kZXhWYWx1ZXMpIHtcbiAgICAgICAgICAgIGxldCBhbWJpZ3VvdXNJbmRleENvdW50ID0gbmV3IEludDMyQXJyYXkoYW1iaWd1b3VzSW5kZXhlcy5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IHRyaWVzID0gMTAwO1xuICAgICAgICAgICAgd2hpbGUgKHRyaWVzLS0gPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMDsgaSA8IGFtYmlndW91c0luZGV4Q291bnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzW2FtYmlndW91c0luZGV4ZXNbaV1dID0gYW1iaWd1b3VzSW5kZXhWYWx1ZXNbaV1bYW1iaWd1b3VzSW5kZXhDb3VudFtpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQREY0MTdTY2FubmluZ0RlY29kZXIuZGVjb2RlQ29kZXdvcmRzKGNvZGV3b3JkcywgZWNMZXZlbCwgZXJhc3VyZUFycmF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaWdub3JlZCA9IGVyciBpbnN0YW5jZW9mIENoZWNrc3VtRXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW1iaWd1b3VzSW5kZXhDb3VudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ2hlY2tzdW1FeGNlcHRpb24uZ2V0Q2hlY2tzdW1JbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgYW1iaWd1b3VzSW5kZXhDb3VudC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW1iaWd1b3VzSW5kZXhDb3VudFtpXSA8IGFtYmlndW91c0luZGV4VmFsdWVzW2ldLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtYmlndW91c0luZGV4Q291bnRbaV0rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1iaWd1b3VzSW5kZXhDb3VudFtpXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gYW1iaWd1b3VzSW5kZXhDb3VudC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ2hlY2tzdW1FeGNlcHRpb24uZ2V0Q2hlY2tzdW1JbnN0YW5jZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgQ2hlY2tzdW1FeGNlcHRpb24uZ2V0Q2hlY2tzdW1JbnN0YW5jZSgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjcmVhdGVCYXJjb2RlTWF0cml4KGRldGVjdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgLy8gbGV0IGJhcmNvZGVNYXRyaXg6IEJhcmNvZGVWYWx1ZVtdW10gPVxuICAgICAgICAgICAgLy8gbmV3IEJhcmNvZGVWYWx1ZVtkZXRlY3Rpb25SZXN1bHQuZ2V0QmFyY29kZVJvd0NvdW50KCldW2RldGVjdGlvblJlc3VsdC5nZXRCYXJjb2RlQ29sdW1uQ291bnQoKSArIDJdO1xuICAgICAgICAgICAgbGV0IGJhcmNvZGVNYXRyaXggPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBkZXRlY3Rpb25SZXN1bHQuZ2V0QmFyY29kZVJvd0NvdW50KCkgfSwgKCkgPT4gbmV3IEFycmF5KGRldGVjdGlvblJlc3VsdC5nZXRCYXJjb2RlQ29sdW1uQ291bnQoKSArIDIpKTtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyAvKmludCovID0gMDsgcm93IDwgYmFyY29kZU1hdHJpeC5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIC8qaW50Ki8gPSAwOyBjb2x1bW4gPCBiYXJjb2RlTWF0cml4W3Jvd10ubGVuZ3RoOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICBiYXJjb2RlTWF0cml4W3Jvd11bY29sdW1uXSA9IG5ldyBCYXJjb2RlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY29sdW1uID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGRldGVjdGlvblJlc3VsdENvbHVtbiAvKkRldGVjdGlvblJlc3VsdENvbHVtbiovIG9mIGRldGVjdGlvblJlc3VsdC5nZXREZXRlY3Rpb25SZXN1bHRDb2x1bW5zKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0ZWN0aW9uUmVzdWx0Q29sdW1uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29kZXdvcmQgLypDb2Rld29yZCovIG9mIGRldGVjdGlvblJlc3VsdENvbHVtbi5nZXRDb2Rld29yZHMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGV3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93TnVtYmVyID0gY29kZXdvcmQuZ2V0Um93TnVtYmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd051bWJlciA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dOdW1iZXIgPj0gYmFyY29kZU1hdHJpeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgbW9yZSByb3dzIHRoYW4gdGhlIGJhcmNvZGUgbWV0YWRhdGEgYWxsb3dzIGZvciwgaWdub3JlIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJjb2RlTWF0cml4W3Jvd051bWJlcl1bY29sdW1uXS5zZXRWYWx1ZShjb2Rld29yZC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29sdW1uKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmFyY29kZU1hdHJpeDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgaXNWYWxpZEJhcmNvZGVDb2x1bW4oZGV0ZWN0aW9uUmVzdWx0LCBiYXJjb2RlQ29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFyY29kZUNvbHVtbiA+PSAwICYmIGJhcmNvZGVDb2x1bW4gPD0gZGV0ZWN0aW9uUmVzdWx0LmdldEJhcmNvZGVDb2x1bW5Db3VudCgpICsgMTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0U3RhcnRDb2x1bW4oZGV0ZWN0aW9uUmVzdWx0LCBiYXJjb2RlQ29sdW1uLCBpbWFnZVJvdywgbGVmdFRvUmlnaHQpIHtcbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSBsZWZ0VG9SaWdodCA/IDEgOiAtMTtcbiAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmlzVmFsaWRCYXJjb2RlQ29sdW1uKGRldGVjdGlvblJlc3VsdCwgYmFyY29kZUNvbHVtbiAtIG9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICBjb2Rld29yZCA9IGRldGVjdGlvblJlc3VsdC5nZXREZXRlY3Rpb25SZXN1bHRDb2x1bW4oYmFyY29kZUNvbHVtbiAtIG9mZnNldCkuZ2V0Q29kZXdvcmQoaW1hZ2VSb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvZGV3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdFRvUmlnaHQgPyBjb2Rld29yZC5nZXRFbmRYKCkgOiBjb2Rld29yZC5nZXRTdGFydFgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvZGV3b3JkID0gZGV0ZWN0aW9uUmVzdWx0LmdldERldGVjdGlvblJlc3VsdENvbHVtbihiYXJjb2RlQ29sdW1uKS5nZXRDb2Rld29yZE5lYXJieShpbWFnZVJvdyk7XG4gICAgICAgICAgICBpZiAoY29kZXdvcmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0VG9SaWdodCA/IGNvZGV3b3JkLmdldFN0YXJ0WCgpIDogY29kZXdvcmQuZ2V0RW5kWCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFBERjQxN1NjYW5uaW5nRGVjb2Rlci5pc1ZhbGlkQmFyY29kZUNvbHVtbihkZXRlY3Rpb25SZXN1bHQsIGJhcmNvZGVDb2x1bW4gLSBvZmZzZXQpKSB7XG4gICAgICAgICAgICAgICAgY29kZXdvcmQgPSBkZXRlY3Rpb25SZXN1bHQuZ2V0RGV0ZWN0aW9uUmVzdWx0Q29sdW1uKGJhcmNvZGVDb2x1bW4gLSBvZmZzZXQpLmdldENvZGV3b3JkTmVhcmJ5KGltYWdlUm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2Rld29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnRUb1JpZ2h0ID8gY29kZXdvcmQuZ2V0RW5kWCgpIDogY29kZXdvcmQuZ2V0U3RhcnRYKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2tpcHBlZENvbHVtbnMgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKFBERjQxN1NjYW5uaW5nRGVjb2Rlci5pc1ZhbGlkQmFyY29kZUNvbHVtbihkZXRlY3Rpb25SZXN1bHQsIGJhcmNvZGVDb2x1bW4gLSBvZmZzZXQpKSB7XG4gICAgICAgICAgICAgICAgYmFyY29kZUNvbHVtbiAtPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcHJldmlvdXNSb3dDb2Rld29yZCAvKkNvZGV3b3JkKi8gb2YgZGV0ZWN0aW9uUmVzdWx0LmdldERldGVjdGlvblJlc3VsdENvbHVtbihiYXJjb2RlQ29sdW1uKS5nZXRDb2Rld29yZHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNSb3dDb2Rld29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnRUb1JpZ2h0ID8gcHJldmlvdXNSb3dDb2Rld29yZC5nZXRFbmRYKCkgOiBwcmV2aW91c1Jvd0NvZGV3b3JkLmdldFN0YXJ0WCgpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZENvbHVtbnMgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocHJldmlvdXNSb3dDb2Rld29yZC5nZXRFbmRYKCkgLSBwcmV2aW91c1Jvd0NvZGV3b3JkLmdldFN0YXJ0WCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBza2lwcGVkQ29sdW1ucysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxlZnRUb1JpZ2h0ID8gZGV0ZWN0aW9uUmVzdWx0LmdldEJvdW5kaW5nQm94KCkuZ2V0TWluWCgpIDogZGV0ZWN0aW9uUmVzdWx0LmdldEJvdW5kaW5nQm94KCkuZ2V0TWF4WCgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBkZXRlY3RDb2Rld29yZChpbWFnZSwgbWluQ29sdW1uLCBtYXhDb2x1bW4sIGxlZnRUb1JpZ2h0LCBzdGFydENvbHVtbiwgaW1hZ2VSb3csIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpIHtcbiAgICAgICAgICAgIHN0YXJ0Q29sdW1uID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmFkanVzdENvZGV3b3JkU3RhcnRDb2x1bW4oaW1hZ2UsIG1pbkNvbHVtbiwgbWF4Q29sdW1uLCBsZWZ0VG9SaWdodCwgc3RhcnRDb2x1bW4sIGltYWdlUm93KTtcbiAgICAgICAgICAgIC8vIHdlIHVzdWFsbHkga25vdyBmYWlybHkgZXhhY3Qgbm93IGhvdyBsb25nIGEgY29kZXdvcmQgaXMuIFdlIHNob3VsZCBwcm92aWRlIG1pbmltdW0gYW5kIG1heGltdW0gZXhwZWN0ZWQgbGVuZ3RoXG4gICAgICAgICAgICAvLyBhbmQgdHJ5IHRvIGFkanVzdCB0aGUgcmVhZCBwaXhlbHMsIGUuZy4gcmVtb3ZlIHNpbmdsZSBwaXhlbCBlcnJvcnMgb3IgdHJ5IHRvIGN1dCBvZmYgZXhjZWVkaW5nIHBpeGVscy5cbiAgICAgICAgICAgIC8vIG1pbiBhbmQgbWF4Q29kZXdvcmRXaWR0aCBzaG91bGQgbm90IGJlIHVzZWQgYXMgdGhleSBhcmUgY2FsY3VsYXRlZCBmb3IgdGhlIHdob2xlIGJhcmNvZGUgYW4gY2FuIGJlIGluYWNjdXJhdGVcbiAgICAgICAgICAgIC8vIGZvciB0aGUgY3VycmVudCBwb3NpdGlvblxuICAgICAgICAgICAgbGV0IG1vZHVsZUJpdENvdW50ID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmdldE1vZHVsZUJpdENvdW50KGltYWdlLCBtaW5Db2x1bW4sIG1heENvbHVtbiwgbGVmdFRvUmlnaHQsIHN0YXJ0Q29sdW1uLCBpbWFnZVJvdyk7XG4gICAgICAgICAgICBpZiAobW9kdWxlQml0Q291bnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGVuZENvbHVtbjtcbiAgICAgICAgICAgIGxldCBjb2Rld29yZEJpdENvdW50ID0gTWF0aFV0aWxzLnN1bShtb2R1bGVCaXRDb3VudCk7XG4gICAgICAgICAgICBpZiAobGVmdFRvUmlnaHQpIHtcbiAgICAgICAgICAgICAgICBlbmRDb2x1bW4gPSBzdGFydENvbHVtbiArIGNvZGV3b3JkQml0Q291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgbW9kdWxlQml0Q291bnQubGVuZ3RoIC8gMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0bXBDb3VudCA9IG1vZHVsZUJpdENvdW50W2ldO1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVCaXRDb3VudFtpXSA9IG1vZHVsZUJpdENvdW50W21vZHVsZUJpdENvdW50Lmxlbmd0aCAtIDEgLSBpXTtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlQml0Q291bnRbbW9kdWxlQml0Q291bnQubGVuZ3RoIC0gMSAtIGldID0gdG1wQ291bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVuZENvbHVtbiA9IHN0YXJ0Q29sdW1uO1xuICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1uID0gZW5kQ29sdW1uIC0gY29kZXdvcmRCaXRDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE8gaW1wbGVtZW50IGNoZWNrIGZvciB3aWR0aCBhbmQgY29ycmVjdGlvbiBvZiBibGFjayBhbmQgd2hpdGUgYmFyc1xuICAgICAgICAgICAgLy8gdXNlIHN0YXJ0IChhbmQgbWF5YmUgc3RvcCBwYXR0ZXJuKSB0byBkZXRlcm1pbmUgaWYgYmxhY2sgYmFycyBhcmUgd2lkZXIgdGhhbiB3aGl0ZSBiYXJzLiBJZiBzbywgYWRqdXN0LlxuICAgICAgICAgICAgLy8gc2hvdWxkIHByb2JhYmx5IGRvbmUgb25seSBmb3IgY29kZXdvcmRzIHdpdGggYSBsb3QgbW9yZSB0aGFuIDE3IGJpdHMuXG4gICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGZpeGVzIDEwLTEucG5nLCB3aGljaCBoYXMgd2lkZSBibGFjayBiYXJzIGFuZCBzbWFsbCB3aGl0ZSBiYXJzXG4gICAgICAgICAgICAvLyAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgbW9kdWxlQml0Q291bnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgICAgaWYgKGkgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgbW9kdWxlQml0Q291bnRbaV0tLTtcbiAgICAgICAgICAgIC8vICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICAgICBtb2R1bGVCaXRDb3VudFtpXSsrO1xuICAgICAgICAgICAgLy8gICAgICB9XG4gICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAvLyBXZSBjb3VsZCBhbHNvIHVzZSB0aGUgd2lkdGggb2Ygc3Vycm91bmRpbmcgY29kZXdvcmRzIGZvciBtb3JlIGFjY3VyYXRlIHJlc3VsdHMsIGJ1dCB0aGlzIHNlZW1zXG4gICAgICAgICAgICAvLyBzdWZmaWNpZW50IGZvciBub3dcbiAgICAgICAgICAgIGlmICghUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmNoZWNrQ29kZXdvcmRTa2V3KGNvZGV3b3JkQml0Q291bnQsIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgY291bGQgdHJ5IHRvIHVzZSB0aGUgc3RhcnRYIGFuZCBlbmRYIHBvc2l0aW9uIG9mIHRoZSBjb2Rld29yZCBpbiB0aGUgc2FtZSBjb2x1bW4gaW4gdGhlIHByZXZpb3VzIHJvdyxcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGJpdCBjb3VudCBmcm9tIGl0IGFuZCBub3JtYWxpemUgaXQgdG8gOC4gVGhpcyB3b3VsZCBoZWxwIHdpdGggc2luZ2xlIHBpeGVsIGVycm9ycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBkZWNvZGVkVmFsdWUgPSBQREY0MTdDb2Rld29yZERlY29kZXIuZ2V0RGVjb2RlZFZhbHVlKG1vZHVsZUJpdENvdW50KTtcbiAgICAgICAgICAgIGxldCBjb2Rld29yZCA9IFBERjQxN0NvbW1vbi5nZXRDb2Rld29yZChkZWNvZGVkVmFsdWUpO1xuICAgICAgICAgICAgaWYgKGNvZGV3b3JkID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2Rld29yZChzdGFydENvbHVtbiwgZW5kQ29sdW1uLCBQREY0MTdTY2FubmluZ0RlY29kZXIuZ2V0Q29kZXdvcmRCdWNrZXROdW1iZXIoZGVjb2RlZFZhbHVlKSwgY29kZXdvcmQpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRNb2R1bGVCaXRDb3VudChpbWFnZSwgbWluQ29sdW1uLCBtYXhDb2x1bW4sIGxlZnRUb1JpZ2h0LCBzdGFydENvbHVtbiwgaW1hZ2VSb3cpIHtcbiAgICAgICAgICAgIGxldCBpbWFnZUNvbHVtbiA9IHN0YXJ0Q29sdW1uO1xuICAgICAgICAgICAgbGV0IG1vZHVsZUJpdENvdW50ID0gbmV3IEludDMyQXJyYXkoOCk7XG4gICAgICAgICAgICBsZXQgbW9kdWxlTnVtYmVyID0gMDtcbiAgICAgICAgICAgIGxldCBpbmNyZW1lbnQgPSBsZWZ0VG9SaWdodCA/IDEgOiAtMTtcbiAgICAgICAgICAgIGxldCBwcmV2aW91c1BpeGVsVmFsdWUgPSBsZWZ0VG9SaWdodDtcbiAgICAgICAgICAgIHdoaWxlICgobGVmdFRvUmlnaHQgPyBpbWFnZUNvbHVtbiA8IG1heENvbHVtbiA6IGltYWdlQ29sdW1uID49IG1pbkNvbHVtbikgJiZcbiAgICAgICAgICAgICAgICBtb2R1bGVOdW1iZXIgPCBtb2R1bGVCaXRDb3VudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGltYWdlQ29sdW1uLCBpbWFnZVJvdykgPT09IHByZXZpb3VzUGl4ZWxWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVCaXRDb3VudFttb2R1bGVOdW1iZXJdKys7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlQ29sdW1uICs9IGluY3JlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZU51bWJlcisrO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BpeGVsVmFsdWUgPSAhcHJldmlvdXNQaXhlbFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb2R1bGVOdW1iZXIgPT09IG1vZHVsZUJpdENvdW50Lmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgICgoaW1hZ2VDb2x1bW4gPT09IChsZWZ0VG9SaWdodCA/IG1heENvbHVtbiA6IG1pbkNvbHVtbikpICYmXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZU51bWJlciA9PT0gbW9kdWxlQml0Q291bnQubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlQml0Q291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0TnVtYmVyT2ZFQ0NvZGVXb3JkcyhiYXJjb2RlRUNMZXZlbCkge1xuICAgICAgICAgICAgcmV0dXJuIDIgPDwgYmFyY29kZUVDTGV2ZWw7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGFkanVzdENvZGV3b3JkU3RhcnRDb2x1bW4oaW1hZ2UsIG1pbkNvbHVtbiwgbWF4Q29sdW1uLCBsZWZ0VG9SaWdodCwgY29kZXdvcmRTdGFydENvbHVtbiwgaW1hZ2VSb3cpIHtcbiAgICAgICAgICAgIGxldCBjb3JyZWN0ZWRTdGFydENvbHVtbiA9IGNvZGV3b3JkU3RhcnRDb2x1bW47XG4gICAgICAgICAgICBsZXQgaW5jcmVtZW50ID0gbGVmdFRvUmlnaHQgPyAtMSA6IDE7XG4gICAgICAgICAgICAvLyB0aGVyZSBzaG91bGQgYmUgbm8gYmxhY2sgcGl4ZWxzIGJlZm9yZSB0aGUgc3RhcnQgY29sdW1uLiBJZiB0aGVyZSBhcmUsIHRoZW4gd2UgbmVlZCB0byBzdGFydCBlYXJsaWVyLlxuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgICAgIHdoaWxlICgobGVmdFRvUmlnaHQgPyBjb3JyZWN0ZWRTdGFydENvbHVtbiA+PSBtaW5Db2x1bW4gOiBjb3JyZWN0ZWRTdGFydENvbHVtbiA8IG1heENvbHVtbikgJiZcbiAgICAgICAgICAgICAgICAgICAgbGVmdFRvUmlnaHQgPT09IGltYWdlLmdldChjb3JyZWN0ZWRTdGFydENvbHVtbiwgaW1hZ2VSb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhjb2Rld29yZFN0YXJ0Q29sdW1uIC0gY29ycmVjdGVkU3RhcnRDb2x1bW4pID4gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLkNPREVXT1JEX1NLRVdfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvZGV3b3JkU3RhcnRDb2x1bW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdGVkU3RhcnRDb2x1bW4gKz0gaW5jcmVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmNyZW1lbnQgPSAtaW5jcmVtZW50O1xuICAgICAgICAgICAgICAgIGxlZnRUb1JpZ2h0ID0gIWxlZnRUb1JpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvcnJlY3RlZFN0YXJ0Q29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjaGVja0NvZGV3b3JkU2tldyhjb2Rld29yZFNpemUsIG1pbkNvZGV3b3JkV2lkdGgsIG1heENvZGV3b3JkV2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5Db2Rld29yZFdpZHRoIC0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLkNPREVXT1JEX1NLRVdfU0laRSA8PSBjb2Rld29yZFNpemUgJiZcbiAgICAgICAgICAgICAgICBjb2Rld29yZFNpemUgPD0gbWF4Q29kZXdvcmRXaWR0aCArIFBERjQxN1NjYW5uaW5nRGVjb2Rlci5DT0RFV09SRF9TS0VXX1NJWkU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uLFxuICAgICAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZGVjb2RlQ29kZXdvcmRzKGNvZGV3b3JkcywgZWNMZXZlbCwgZXJhc3VyZXMpIHtcbiAgICAgICAgICAgIGlmIChjb2Rld29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbnVtRUNDb2Rld29yZHMgPSAxIDw8IChlY0xldmVsICsgMSk7XG4gICAgICAgICAgICBsZXQgY29ycmVjdGVkRXJyb3JzQ291bnQgPSBQREY0MTdTY2FubmluZ0RlY29kZXIuY29ycmVjdEVycm9ycyhjb2Rld29yZHMsIGVyYXN1cmVzLCBudW1FQ0NvZGV3b3Jkcyk7XG4gICAgICAgICAgICBQREY0MTdTY2FubmluZ0RlY29kZXIudmVyaWZ5Q29kZXdvcmRDb3VudChjb2Rld29yZHMsIG51bUVDQ29kZXdvcmRzKTtcbiAgICAgICAgICAgIC8vIERlY29kZSB0aGUgY29kZXdvcmRzXG4gICAgICAgICAgICBsZXQgZGVjb2RlclJlc3VsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMi5kZWNvZGUoY29kZXdvcmRzLCAnJyArIGVjTGV2ZWwpO1xuICAgICAgICAgICAgZGVjb2RlclJlc3VsdC5zZXRFcnJvcnNDb3JyZWN0ZWQoY29ycmVjdGVkRXJyb3JzQ291bnQpO1xuICAgICAgICAgICAgZGVjb2RlclJlc3VsdC5zZXRFcmFzdXJlcyhlcmFzdXJlcy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGRlY29kZXJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIDxwPkdpdmVuIGRhdGEgYW5kIGVycm9yLWNvcnJlY3Rpb24gY29kZXdvcmRzIHJlY2VpdmVkLCBwb3NzaWJseSBjb3JydXB0ZWQgYnkgZXJyb3JzLCBhdHRlbXB0cyB0b1xuICAgICAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gY29kZXdvcmRzICAgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHNcbiAgICAgICAgICogQHBhcmFtIGVyYXN1cmVzIHBvc2l0aW9ucyBvZiBhbnkga25vd24gZXJhc3VyZXNcbiAgICAgICAgICogQHBhcmFtIG51bUVDQ29kZXdvcmRzIG51bWJlciBvZiBlcnJvciBjb3JyZWN0aW9uIGNvZGV3b3JkcyB0aGF0IGFyZSBhdmFpbGFibGUgaW4gY29kZXdvcmRzXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24gaWYgZXJyb3IgY29ycmVjdGlvbiBmYWlsc1xuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGNvcnJlY3RFcnJvcnMoY29kZXdvcmRzLCBlcmFzdXJlcywgbnVtRUNDb2Rld29yZHMpIHtcbiAgICAgICAgICAgIGlmIChlcmFzdXJlcyAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgZXJhc3VyZXMubGVuZ3RoID4gbnVtRUNDb2Rld29yZHMgLyAyICsgUERGNDE3U2Nhbm5pbmdEZWNvZGVyLk1BWF9FUlJPUlMgfHxcbiAgICAgICAgICAgICAgICBudW1FQ0NvZGV3b3JkcyA8IDAgfHxcbiAgICAgICAgICAgICAgICBudW1FQ0NvZGV3b3JkcyA+IFBERjQxN1NjYW5uaW5nRGVjb2Rlci5NQVhfRUNfQ09ERVdPUkRTKSB7XG4gICAgICAgICAgICAgICAgLy8gVG9vIG1hbnkgZXJyb3JzIG9yIEVDIENvZGV3b3JkcyBpcyBjb3JydXB0ZWRcbiAgICAgICAgICAgICAgICB0aHJvdyBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmVycm9yQ29ycmVjdGlvbi5kZWNvZGUoY29kZXdvcmRzLCBudW1FQ0NvZGV3b3JkcywgZXJhc3VyZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZnkgdGhhdCBhbGwgaXMgT0sgd2l0aCB0aGUgY29kZXdvcmQgYXJyYXkuXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgdmVyaWZ5Q29kZXdvcmRDb3VudChjb2Rld29yZHMsIG51bUVDQ29kZXdvcmRzKSB7XG4gICAgICAgICAgICBpZiAoY29kZXdvcmRzLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgICAgICAvLyBDb2Rld29yZCBhcnJheSBzaXplIHNob3VsZCBiZSBhdCBsZWFzdCA0IGFsbG93aW5nIGZvclxuICAgICAgICAgICAgICAgIC8vIENvdW50IENXLCBBdCBsZWFzdCBvbmUgRGF0YSBDVywgRXJyb3IgQ29ycmVjdGlvbiBDVywgRXJyb3IgQ29ycmVjdGlvbiBDV1xuICAgICAgICAgICAgICAgIHRocm93IEZvcm1hdEV4Y2VwdGlvbi5nZXRGb3JtYXRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IGNvZGV3b3JkLCB0aGUgU3ltYm9sIExlbmd0aCBEZXNjcmlwdG9yLCBzaGFsbCBhbHdheXMgZW5jb2RlIHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YVxuICAgICAgICAgICAgLy8gY29kZXdvcmRzIGluIHRoZSBzeW1ib2wsIGluY2x1ZGluZyB0aGUgU3ltYm9sIExlbmd0aCBEZXNjcmlwdG9yIGl0c2VsZiwgZGF0YSBjb2Rld29yZHMgYW5kIHBhZFxuICAgICAgICAgICAgLy8gY29kZXdvcmRzLCBidXQgZXhjbHVkaW5nIHRoZSBudW1iZXIgb2YgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMuXG4gICAgICAgICAgICBsZXQgbnVtYmVyT2ZDb2Rld29yZHMgPSBjb2Rld29yZHNbMF07XG4gICAgICAgICAgICBpZiAobnVtYmVyT2ZDb2Rld29yZHMgPiBjb2Rld29yZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVtYmVyT2ZDb2Rld29yZHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0byB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheSAtIDggKEFsbG93IGZvciBhdCBsZWFzdCBsZXZlbCAzIEVycm9yIENvcnJlY3Rpb24gKDggRXJyb3IgQ29kZXdvcmRzKVxuICAgICAgICAgICAgICAgIGlmIChudW1FQ0NvZGV3b3JkcyA8IGNvZGV3b3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZXdvcmRzWzBdID0gY29kZXdvcmRzLmxlbmd0aCAtIG51bUVDQ29kZXdvcmRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRCaXRDb3VudEZvckNvZGV3b3JkKGNvZGV3b3JkKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkoOCk7XG4gICAgICAgICAgICBsZXQgcHJldmlvdXNWYWx1ZSA9IDA7XG4gICAgICAgICAgICBsZXQgaSA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGNvZGV3b3JkICYgMHgxKSAhPT0gcHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gY29kZXdvcmQgJiAweDE7XG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRbaV0rKztcbiAgICAgICAgICAgICAgICBjb2Rld29yZCA+Pj0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGdldENvZGV3b3JkQnVja2V0TnVtYmVyKGNvZGV3b3JkKSB7XG4gICAgICAgICAgICBpZiAoY29kZXdvcmQgaW5zdGFuY2VvZiBJbnQzMkFycmF5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29kZXdvcmRCdWNrZXROdW1iZXJfSW50MzJBcnJheShjb2Rld29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2Rld29yZEJ1Y2tldE51bWJlcl9udW1iZXIoY29kZXdvcmQpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRDb2Rld29yZEJ1Y2tldE51bWJlcl9udW1iZXIoY29kZXdvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBQREY0MTdTY2FubmluZ0RlY29kZXIuZ2V0Q29kZXdvcmRCdWNrZXROdW1iZXIoUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmdldEJpdENvdW50Rm9yQ29kZXdvcmQoY29kZXdvcmQpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0Q29kZXdvcmRCdWNrZXROdW1iZXJfSW50MzJBcnJheShtb2R1bGVCaXRDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIChtb2R1bGVCaXRDb3VudFswXSAtIG1vZHVsZUJpdENvdW50WzJdICsgbW9kdWxlQml0Q291bnRbNF0gLSBtb2R1bGVCaXRDb3VudFs2XSArIDkpICUgOTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgdG9TdHJpbmcoYmFyY29kZU1hdHJpeCkge1xuICAgICAgICAgICAgbGV0IGZvcm1hdHRlciA9IG5ldyBGb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIC8vIHRyeSAobGV0IGZvcm1hdHRlciA9IG5ldyBGb3JtYXR0ZXIoKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93IC8qaW50Ki8gPSAwOyByb3cgPCBiYXJjb2RlTWF0cml4Lmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCdSb3cgJTJkOiAnLCByb3cpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiAvKmludCovID0gMDsgY29sdW1uIDwgYmFyY29kZU1hdHJpeFtyb3ddLmxlbmd0aDsgY29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhcmNvZGVWYWx1ZSA9IGJhcmNvZGVNYXRyaXhbcm93XVtjb2x1bW5dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmFyY29kZVZhbHVlLmdldFZhbHVlKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCcgICAgICAgICcsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyLmZvcm1hdCgnJTRkKCUyZCknLCBiYXJjb2RlVmFsdWUuZ2V0VmFsdWUoKVswXSwgYmFyY29kZVZhbHVlLmdldENvbmZpZGVuY2UoYmFyY29kZVZhbHVlLmdldFZhbHVlKClbMF0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIuZm9ybWF0KCclbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlci50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qZmluYWwqLyBQREY0MTdTY2FubmluZ0RlY29kZXIuQ09ERVdPUkRfU0tFV19TSVpFID0gMjtcbiAgICAvKmZpbmFsKi8gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLk1BWF9FUlJPUlMgPSAzO1xuICAgIC8qZmluYWwqLyBQREY0MTdTY2FubmluZ0RlY29kZXIuTUFYX0VDX0NPREVXT1JEUyA9IDUxMjtcbiAgICAvKmZpbmFsKi8gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmVycm9yQ29ycmVjdGlvbiA9IG5ldyBFcnJvckNvcnJlY3Rpb24oKTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgLy8gaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIC8vIGltcG9ydCBqYXZhLnV0aWwuTWFwO1xuICAgIC8qKlxuICAgICAqIFRoaXMgaW1wbGVtZW50YXRpb24gY2FuIGRldGVjdCBhbmQgZGVjb2RlIFBERjQxNyBjb2RlcyBpbiBhbiBpbWFnZS5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgR3VlbnRoZXIgR3JhdVxuICAgICAqL1xuICAgIC8qcHVibGljIGZpbmFsKi8gY2xhc3MgUERGNDE3UmVhZGVyIHtcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgLypmaW5hbCBSZXN1bHRbXSovIEVNUFRZX1JFU1VMVF9BUlJBWTogUmVzdWx0W10gPSBuZXcgUmVzdWx0KFswXSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUERGNDE3IGNvZGUgaW4gYW4gaW1hZ2UuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gYSBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb250ZW50IGVuY29kZWQgYnkgdGhlIFBERjQxNyBjb2RlXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYSBQREY0MTcgY29kZSBjYW5ub3QgYmUgZm91bmQsXG4gICAgICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUERGNDE3IGNhbm5vdCBiZSBkZWNvZGVkXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICBkZWNvZGUoaW1hZ2UsIGhpbnRzID0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFBERjQxN1JlYWRlci5kZWNvZGUoaW1hZ2UsIGhpbnRzLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwgfHwgcmVzdWx0Lmxlbmd0aCA9PT0gMCB8fCByZXN1bHRbMF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uLmdldE5vdEZvdW5kSW5zdGFuY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBCaW5hcnlCaXRtYXBcbiAgICAgICAgICogQHBhcmFtIGltYWdlXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIC8vICAgQE92ZXJyaWRlXG4gICAgICAgIGRlY29kZU11bHRpcGxlKGltYWdlLCBoaW50cyA9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBERjQxN1JlYWRlci5kZWNvZGUoaW1hZ2UsIGhpbnRzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZWQgaW5zdGFuY2VvZiBGb3JtYXRFeGNlcHRpb24gfHwgaWdub3JlZCBpbnN0YW5jZW9mIENoZWNrc3VtRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uLmdldE5vdEZvdW5kSW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgaWdub3JlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGltYWdlXG4gICAgICAgICAqIEBwYXJhbSBoaW50c1xuICAgICAgICAgKiBAcGFyYW0gbXVsdGlwbGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvblxuICAgICAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbsOfXG4gICAgICAgICAqIEB0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBkZWNvZGUoaW1hZ2UsIGhpbnRzLCBtdWx0aXBsZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgY29uc3QgZGV0ZWN0b3JSZXN1bHQgPSBEZXRlY3RvciQzLmRldGVjdE11bHRpcGxlKGltYWdlLCBoaW50cywgbXVsdGlwbGUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludHMgb2YgZGV0ZWN0b3JSZXN1bHQuZ2V0UG9pbnRzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNvZGVyUmVzdWx0ID0gUERGNDE3U2Nhbm5pbmdEZWNvZGVyLmRlY29kZShkZXRlY3RvclJlc3VsdC5nZXRCaXRzKCksIHBvaW50c1s0XSwgcG9pbnRzWzVdLCBwb2ludHNbNl0sIHBvaW50c1s3XSwgUERGNDE3UmVhZGVyLmdldE1pbkNvZGV3b3JkV2lkdGgocG9pbnRzKSwgUERGNDE3UmVhZGVyLmdldE1heENvZGV3b3JkV2lkdGgocG9pbnRzKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFJlc3VsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdCQxLlBERl80MTcpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OX0xFVkVMLCBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGRmNDE3UmVzdWx0TWV0YWRhdGEgPSBkZWNvZGVyUmVzdWx0LmdldE90aGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBkZjQxN1Jlc3VsdE1ldGFkYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZSQxLlBERjQxN19FWFRSQV9NRVRBREFUQSwgcGRmNDE3UmVzdWx0TWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzLm1hcCh4ID0+IHgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRNYXhXaWR0aChwMSwgcDIpIHtcbiAgICAgICAgICAgIGlmIChwMSA9PSBudWxsIHx8IHAyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBNYXRoLnRydW5jKE1hdGguYWJzKHAxLmdldFgoKSAtIHAyLmdldFgoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXRNaW5XaWR0aChwMSwgcDIpIHtcbiAgICAgICAgICAgIGlmIChwMSA9PSBudWxsIHx8IHAyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSW50ZWdlci5NQVhfVkFMVUU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhNYXRoLmFicyhwMS5nZXRYKCkgLSBwMi5nZXRYKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0TWF4Q29kZXdvcmRXaWR0aChwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLm1heChNYXRoLm1heChQREY0MTdSZWFkZXIuZ2V0TWF4V2lkdGgocFswXSwgcFs0XSksIFBERjQxN1JlYWRlci5nZXRNYXhXaWR0aChwWzZdLCBwWzJdKSAqIFBERjQxN0NvbW1vbi5NT0RVTEVTX0lOX0NPREVXT1JEIC9cbiAgICAgICAgICAgICAgICBQREY0MTdDb21tb24uTU9EVUxFU19JTl9TVE9QX1BBVFRFUk4pLCBNYXRoLm1heChQREY0MTdSZWFkZXIuZ2V0TWF4V2lkdGgocFsxXSwgcFs1XSksIFBERjQxN1JlYWRlci5nZXRNYXhXaWR0aChwWzddLCBwWzNdKSAqIFBERjQxN0NvbW1vbi5NT0RVTEVTX0lOX0NPREVXT1JEIC9cbiAgICAgICAgICAgICAgICBQREY0MTdDb21tb24uTU9EVUxFU19JTl9TVE9QX1BBVFRFUk4pKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGdldE1pbkNvZGV3b3JkV2lkdGgocCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5taW4oTWF0aC5taW4oUERGNDE3UmVhZGVyLmdldE1pbldpZHRoKHBbMF0sIHBbNF0pLCBQREY0MTdSZWFkZXIuZ2V0TWluV2lkdGgocFs2XSwgcFsyXSkgKiBQREY0MTdDb21tb24uTU9EVUxFU19JTl9DT0RFV09SRCAvXG4gICAgICAgICAgICAgICAgUERGNDE3Q29tbW9uLk1PRFVMRVNfSU5fU1RPUF9QQVRURVJOKSwgTWF0aC5taW4oUERGNDE3UmVhZGVyLmdldE1pbldpZHRoKHBbMV0sIHBbNV0pLCBQREY0MTdSZWFkZXIuZ2V0TWluV2lkdGgocFs3XSwgcFszXSkgKiBQREY0MTdDb21tb24uTU9EVUxFU19JTl9DT0RFV09SRCAvXG4gICAgICAgICAgICAgICAgUERGNDE3Q29tbW9uLk1PRFVMRVNfSU5fU1RPUF9QQVRURVJOKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICByZXNldCgpIHtcbiAgICAgICAgICAgIC8vIG5vdGhpbmcgbmVlZHMgdG8gYmUgcmVzZXRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi5cbiAgICAgKi9cbiAgICBjbGFzcyBSZWFkZXJFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIH1cbiAgICBSZWFkZXJFeGNlcHRpb24ua2luZCA9ICdSZWFkZXJFeGNlcHRpb24nO1xuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqL1xuICAgIC8qKlxuICAgICAqIE11bHRpRm9ybWF0UmVhZGVyIGlzIGEgY29udmVuaWVuY2UgY2xhc3MgYW5kIHRoZSBtYWluIGVudHJ5IHBvaW50IGludG8gdGhlIGxpYnJhcnkgZm9yIG1vc3QgdXNlcy5cbiAgICAgKiBCeSBkZWZhdWx0IGl0IGF0dGVtcHRzIHRvIGRlY29kZSBhbGwgYmFyY29kZSBmb3JtYXRzIHRoYXQgdGhlIGxpYnJhcnkgc3VwcG9ydHMuIE9wdGlvbmFsbHksIHlvdVxuICAgICAqIGNhbiBwcm92aWRlIGEgaGludHMgb2JqZWN0IHRvIHJlcXVlc3QgZGlmZmVyZW50IGJlaGF2aW9yLCBmb3IgZXhhbXBsZSBvbmx5IGRlY29kaW5nIFFSIGNvZGVzLlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKVxuICAgICAqL1xuICAgIGNsYXNzIE11bHRpRm9ybWF0UmVhZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzc1xuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSB2ZXJib3NlIGlmICd0cnVlJyBsb2dzIHdpbGwgYmUgZHVtcGVkIHRvIGNvbnNvbGUsIG90aGVyd2lzZSBoaWRkZW4uXG4gICAgICAgICAqIEBwYXJhbSBoaW50cyBUaGUgaGludHMgdG8gdXNlLCBjbGVhcmluZyB0aGUgcHJldmlvdXMgc3RhdGUuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcih2ZXJib3NlLCBoaW50cykge1xuICAgICAgICAgICAgdGhpcy52ZXJib3NlID0gKHZlcmJvc2UgPT09IHRydWUpO1xuICAgICAgICAgICAgaWYgKGhpbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaW50cyhoaW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgdmVyc2lvbiBvZiBkZWNvZGUgaG9ub3JzIHRoZSBpbnRlbnQgb2YgUmVhZGVyLmRlY29kZShCaW5hcnlCaXRtYXApIGluIHRoYXQgaXRcbiAgICAgICAgICogcGFzc2VzIG51bGwgYXMgYSBoaW50IHRvIHRoZSBkZWNvZGVycy4gSG93ZXZlciwgdGhhdCBtYWtlcyBpdCBpbmVmZmljaWVudCB0byBjYWxsIHJlcGVhdGVkbHkuXG4gICAgICAgICAqIFVzZSBzZXRIaW50cygpIGZvbGxvd2VkIGJ5IGRlY29kZVdpdGhTdGF0ZSgpIGZvciBjb250aW51b3VzIHNjYW4gYXBwbGljYXRpb25zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gaW1hZ2UgVGhlIHBpeGVsIGRhdGEgdG8gZGVjb2RlXG4gICAgICAgICAqIEByZXR1cm4gVGhlIGNvbnRlbnRzIG9mIHRoZSBpbWFnZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIEFueSBlcnJvcnMgd2hpY2ggb2NjdXJyZWRcbiAgICAgICAgICovXG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgLy8gcHVibGljIGRlY29kZShpbWFnZTogQmluYXJ5Qml0bWFwKTogUmVzdWx0IHtcbiAgICAgICAgLy8gICBzZXRIaW50cyhudWxsKVxuICAgICAgICAvLyAgIHJldHVybiBkZWNvZGVJbnRlcm5hbChpbWFnZSlcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlIGFuIGltYWdlIHVzaW5nIHRoZSBoaW50cyBwcm92aWRlZC4gRG9lcyBub3QgaG9ub3IgZXhpc3Rpbmcgc3RhdGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBpbWFnZSBUaGUgcGl4ZWwgZGF0YSB0byBkZWNvZGVcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIFRoZSBoaW50cyB0byB1c2UsIGNsZWFyaW5nIHRoZSBwcmV2aW91cyBzdGF0ZS5cbiAgICAgICAgICogQHJldHVybiBUaGUgY29udGVudHMgb2YgdGhlIGltYWdlXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gQW55IGVycm9ycyB3aGljaCBvY2N1cnJlZFxuICAgICAgICAgKi9cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBkZWNvZGUoaW1hZ2UsIGhpbnRzKSB7XG4gICAgICAgICAgICBpZiAoaGludHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnRzKGhpbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUludGVybmFsKGltYWdlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlIGFuIGltYWdlIHVzaW5nIHRoZSBzdGF0ZSBzZXQgdXAgYnkgY2FsbGluZyBzZXRIaW50cygpIHByZXZpb3VzbHkuIENvbnRpbnVvdXMgc2NhblxuICAgICAgICAgKiBjbGllbnRzIHdpbGwgZ2V0IGEgPGI+bGFyZ2U8L2I+IHNwZWVkIGluY3JlYXNlIGJ5IHVzaW5nIHRoaXMgaW5zdGVhZCBvZiBkZWNvZGUoKS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGltYWdlIFRoZSBwaXhlbCBkYXRhIHRvIGRlY29kZVxuICAgICAgICAgKiBAcmV0dXJuIFRoZSBjb250ZW50cyBvZiB0aGUgaW1hZ2VcbiAgICAgICAgICpcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBBbnkgZXJyb3JzIHdoaWNoIG9jY3VycmVkXG4gICAgICAgICAqL1xuICAgICAgICBkZWNvZGVXaXRoU3RhdGUoaW1hZ2UpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0byBzZXQgdXAgdGhlIGRlZmF1bHQgc3RhdGUgc28gd2UgZG9uJ3QgY3Jhc2hcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRlcnMgPT09IG51bGwgfHwgdGhpcy5yZWFkZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnRzKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlSW50ZXJuYWwoaW1hZ2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBhZGRzIHN0YXRlIHRvIHRoZSBNdWx0aUZvcm1hdFJlYWRlci4gQnkgc2V0dGluZyB0aGUgaGludHMgb25jZSwgc3Vic2VxdWVudCBjYWxsc1xuICAgICAgICAgKiB0byBkZWNvZGVXaXRoU3RhdGUoaW1hZ2UpIGNhbiByZXVzZSB0aGUgc2FtZSBzZXQgb2YgcmVhZGVycyB3aXRob3V0IHJlYWxsb2NhdGluZyBtZW1vcnkuIFRoaXNcbiAgICAgICAgICogaXMgaW1wb3J0YW50IGZvciBwZXJmb3JtYW5jZSBpbiBjb250aW51b3VzIHNjYW4gY2xpZW50cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGhpbnRzIFRoZSBzZXQgb2YgaGludHMgdG8gdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIGRlY29kZShpbWFnZSlcbiAgICAgICAgICovXG4gICAgICAgIHNldEhpbnRzKGhpbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XG4gICAgICAgICAgICBjb25zdCB0cnlIYXJkZXIgPSAhaXNOdWxsT3JVbmRlZmluZWQoaGludHMpXG4gICAgICAgICAgICAgICAgJiYgaGludHMuZ2V0KERlY29kZUhpbnRUeXBlJDEuVFJZX0hBUkRFUikgPT09IHRydWU7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXRzID0gaXNOdWxsT3JVbmRlZmluZWQoaGludHMpID8gbnVsbCA6IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZSQxLlBPU1NJQkxFX0ZPUk1BVFMpO1xuICAgICAgICAgICAgY29uc3QgcmVhZGVycyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChmb3JtYXRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkZE9uZURSZWFkZXIgPSBmb3JtYXRzLnNvbWUoZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBmID09PSBCYXJjb2RlRm9ybWF0JDEuVVBDX0EgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPT09IEJhcmNvZGVGb3JtYXQkMS5VUENfRSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZiA9PT0gQmFyY29kZUZvcm1hdCQxLkVBTl8xMyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZiA9PT0gQmFyY29kZUZvcm1hdCQxLkVBTl84IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmID09PSBCYXJjb2RlRm9ybWF0JDEuQ09EQUJBUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZiA9PT0gQmFyY29kZUZvcm1hdCQxLkNPREVfMzkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPT09IEJhcmNvZGVGb3JtYXQkMS5DT0RFXzkzIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmID09PSBCYXJjb2RlRm9ybWF0JDEuQ09ERV8xMjggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPT09IEJhcmNvZGVGb3JtYXQkMS5JVEYgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPT09IEJhcmNvZGVGb3JtYXQkMS5SU1NfMTQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPT09IEJhcmNvZGVGb3JtYXQkMS5SU1NfRVhQQU5ERUQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFB1dCAxRCByZWFkZXJzIHVwZnJvbnQgaW4gXCJub3JtYWxcIiBtb2RlXG4gICAgICAgICAgICAgICAgaWYgKGFkZE9uZURSZWFkZXIgJiYgIXRyeUhhcmRlcikge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXJzLnB1c2gobmV3IE11bHRpRm9ybWF0T25lRFJlYWRlcihoaW50cywgdGhpcy52ZXJib3NlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5RUl9DT0RFKSkge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXJzLnB1c2gobmV3IFFSQ29kZVJlYWRlcigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLkRBVEFfTUFUUklYKSkge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXJzLnB1c2gobmV3IERhdGFNYXRyaXhSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3JtYXRzLmluY2x1ZGVzKEJhcmNvZGVGb3JtYXQkMS5BWlRFQykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBBenRlY1JlYWRlcigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1hdHMuaW5jbHVkZXMoQmFyY29kZUZvcm1hdCQxLlBERl80MTcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgUERGNDE3UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiAoZm9ybWF0cy5pbmNsdWRlcyhCYXJjb2RlRm9ybWF0Lk1BWElDT0RFKSkge1xuICAgICAgICAgICAgICAgIC8vICAgIHJlYWRlcnMucHVzaChuZXcgTWF4aUNvZGVSZWFkZXIoKSlcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgLy8gQXQgZW5kIGluIFwidHJ5IGhhcmRlclwiIG1vZGVcbiAgICAgICAgICAgICAgICBpZiAoYWRkT25lRFJlYWRlciAmJiB0cnlIYXJkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBNdWx0aUZvcm1hdE9uZURSZWFkZXIoaGludHMsIHRoaXMudmVyYm9zZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWFkZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmICghdHJ5SGFyZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgTXVsdGlGb3JtYXRPbmVEUmVhZGVyKGhpbnRzLCB0aGlzLnZlcmJvc2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBRUkNvZGVSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBEYXRhTWF0cml4UmVhZGVyKCkpO1xuICAgICAgICAgICAgICAgIHJlYWRlcnMucHVzaChuZXcgQXp0ZWNSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBQREY0MTdSZWFkZXIoKSk7XG4gICAgICAgICAgICAgICAgLy8gcmVhZGVycy5wdXNoKG5ldyBNYXhpQ29kZVJlYWRlcigpKVxuICAgICAgICAgICAgICAgIGlmICh0cnlIYXJkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVycy5wdXNoKG5ldyBNdWx0aUZvcm1hdE9uZURSZWFkZXIoaGludHMsIHRoaXMudmVyYm9zZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVhZGVycyA9IHJlYWRlcnM7IC8vIC50b0FycmF5KG5ldyBSZWFkZXJbcmVhZGVycy5zaXplKCldKVxuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgcmVzZXQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkZXJzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5yZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZXNldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlSW50ZXJuYWwoaW1hZ2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRlcnMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVhZGVyRXhjZXB0aW9uKCdObyByZWFkZXJzIHdoZXJlIHNlbGVjdGVkLCBub3RoaW5nIGNhbiBiZSByZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgdGhpcy5yZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIGRlY29kZSB3aXRoICR7cmVhZGVyfSByZWFkZXIuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5kZWNvZGUoaW1hZ2UsIHRoaXMuaGludHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4IGluc3RhbmNlb2YgUmVhZGVyRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBCYWQgRXhjZXB0aW9uLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignTm8gTXVsdGlGb3JtYXQgUmVhZGVycyB3ZXJlIGFibGUgdG8gZGV0ZWN0IHRoZSBjb2RlLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xhc3MgQnJvd3Nlck11bHRpRm9ybWF0UmVhZGVyIGV4dGVuZHMgQnJvd3NlckNvZGVSZWFkZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihoaW50cyA9IG51bGwsIHRpbWVCZXR3ZWVuU2NhbnNNaWxsaXMgPSA1MDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBNdWx0aUZvcm1hdFJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLnNldEhpbnRzKGhpbnRzKTtcbiAgICAgICAgICAgIHN1cGVyKHJlYWRlciwgdGltZUJldHdlZW5TY2Fuc01pbGxpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJ3cml0ZSBkZWNvZGVCaXRtYXAgdG8gY2FsbCBkZWNvZGVXaXRoU3RhdGUsIHdoaWNoIHdpbGwgcGF5XG4gICAgICAgICAqIGF0dGVudGlvbiB0byB0aGUgaGludHMgc2V0IGluIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlQml0bWFwKGJpbmFyeUJpdG1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZGVyLmRlY29kZVdpdGhTdGF0ZShiaW5hcnlCaXRtYXApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgTW92aW5nIHRvIEB6eGluZy9icm93c2VyXG4gICAgICpcbiAgICAgKiBRUiBDb2RlIHJlYWRlciB0byB1c2UgZnJvbSBicm93c2VyLlxuICAgICAqL1xuICAgIGNsYXNzIEJyb3dzZXJQREY0MTdSZWFkZXIgZXh0ZW5kcyBCcm93c2VyQ29kZVJlYWRlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEJyb3dzZXJQREY0MTdSZWFkZXIuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZUJldHdlZW5TY2Fuc01pbGxpcz01MDBdIHRoZSB0aW1lIGRlbGF5IGJldHdlZW4gc3Vic2VxdWVudCBkZWNvZGUgdHJpZXNcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKHRpbWVCZXR3ZWVuU2NhbnNNaWxsaXMgPSA1MDApIHtcbiAgICAgICAgICAgIHN1cGVyKG5ldyBQREY0MTdSZWFkZXIoKSwgdGltZUJldHdlZW5TY2Fuc01pbGxpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBNb3ZpbmcgdG8gQHp4aW5nL2Jyb3dzZXJcbiAgICAgKlxuICAgICAqIFFSIENvZGUgcmVhZGVyIHRvIHVzZSBmcm9tIGJyb3dzZXIuXG4gICAgICovXG4gICAgY2xhc3MgQnJvd3NlclFSQ29kZVJlYWRlciBleHRlbmRzIEJyb3dzZXJDb2RlUmVhZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQnJvd3NlclFSQ29kZVJlYWRlci5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lQmV0d2VlblNjYW5zTWlsbGlzPTUwMF0gdGhlIHRpbWUgZGVsYXkgYmV0d2VlbiBzdWJzZXF1ZW50IGRlY29kZSB0cmllc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IodGltZUJldHdlZW5TY2Fuc01pbGxpcyA9IDUwMCkge1xuICAgICAgICAgICAgc3VwZXIobmV3IFFSQ29kZVJlYWRlcigpLCB0aW1lQmV0d2VlblNjYW5zTWlsbGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki9cbiAgICAvKipcbiAgICAgKiBUaGVzZSBhcmUgYSBzZXQgb2YgaGludHMgdGhhdCB5b3UgbWF5IHBhc3MgdG8gV3JpdGVycyB0byBzcGVjaWZ5IHRoZWlyIGJlaGF2aW9yLlxuICAgICAqXG4gICAgICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbilcbiAgICAgKi9cbiAgICB2YXIgRW5jb2RlSGludFR5cGU7XG4gICAgKGZ1bmN0aW9uIChFbmNvZGVIaW50VHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoYXQgZGVncmVlIG9mIGVycm9yIGNvcnJlY3Rpb24gdG8gdXNlLCBmb3IgZXhhbXBsZSBpbiBRUiBDb2Rlcy5cbiAgICAgICAgICogVHlwZSBkZXBlbmRzIG9uIHRoZSBlbmNvZGVyLiBGb3IgZXhhbXBsZSBmb3IgUVIgY29kZXMgaXQncyB0eXBlXG4gICAgICAgICAqIHtAbGluayBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyLkVycm9yQ29ycmVjdGlvbkxldmVsIEVycm9yQ29ycmVjdGlvbkxldmVsfS5cbiAgICAgICAgICogRm9yIEF6dGVjIGl0IGlzIG9mIHR5cGUge0BsaW5rIEludGVnZXJ9LCByZXByZXNlbnRpbmcgdGhlIG1pbmltYWwgcGVyY2VudGFnZSBvZiBlcnJvciBjb3JyZWN0aW9uIHdvcmRzLlxuICAgICAgICAgKiBGb3IgUERGNDE3IGl0IGlzIG9mIHR5cGUge0BsaW5rIEludGVnZXJ9LCB2YWxpZCB2YWx1ZXMgYmVpbmcgMCB0byA4LlxuICAgICAgICAgKiBJbiBhbGwgY2FzZXMsIGl0IGNhbiBhbHNvIGJlIGEge0BsaW5rIFN0cmluZ30gcmVwcmVzZW50YXRpb24gb2YgdGhlIGRlc2lyZWQgdmFsdWUgYXMgd2VsbC5cbiAgICAgICAgICogTm90ZTogYW4gQXp0ZWMgc3ltYm9sIHNob3VsZCBoYXZlIGEgbWluaW11bSBvZiAyNSUgRUMgd29yZHMuXG4gICAgICAgICAqL1xuICAgICAgICBFbmNvZGVIaW50VHlwZVtFbmNvZGVIaW50VHlwZVtcIkVSUk9SX0NPUlJFQ1RJT05cIl0gPSAwXSA9IFwiRVJST1JfQ09SUkVDVElPTlwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoYXQgY2hhcmFjdGVyIGVuY29kaW5nIHRvIHVzZSB3aGVyZSBhcHBsaWNhYmxlICh0eXBlIHtAbGluayBTdHJpbmd9KVxuICAgICAgICAgKi9cbiAgICAgICAgRW5jb2RlSGludFR5cGVbRW5jb2RlSGludFR5cGVbXCJDSEFSQUNURVJfU0VUXCJdID0gMV0gPSBcIkNIQVJBQ1RFUl9TRVRcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgbWF0cml4IHNoYXBlIGZvciBEYXRhIE1hdHJpeCAodHlwZSB7QGxpbmsgY29tLmdvb2dsZS56eGluZy5kYXRhbWF0cml4LmVuY29kZXIuU3ltYm9sU2hhcGVIaW50fSlcbiAgICAgICAgICovXG4gICAgICAgIEVuY29kZUhpbnRUeXBlW0VuY29kZUhpbnRUeXBlW1wiREFUQV9NQVRSSVhfU0hBUEVcIl0gPSAyXSA9IFwiREFUQV9NQVRSSVhfU0hBUEVcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhIG1pbmltdW0gYmFyY29kZSBzaXplICh0eXBlIHtAbGluayBEaW1lbnNpb259KS4gT25seSBhcHBsaWNhYmxlIHRvIERhdGEgTWF0cml4IG5vdy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgdXNlIHdpZHRoL2hlaWdodCBwYXJhbXMgaW5cbiAgICAgICAgICoge0BsaW5rIGNvbS5nb29nbGUuenhpbmcuZGF0YW1hdHJpeC5EYXRhTWF0cml4V3JpdGVyI2VuY29kZShTdHJpbmcsIEJhcmNvZGVGb3JtYXQsIGludCwgaW50KX1cbiAgICAgICAgICovXG4gICAgICAgIC8qQERlcHJlY2F0ZWQqL1xuICAgICAgICBFbmNvZGVIaW50VHlwZVtFbmNvZGVIaW50VHlwZVtcIk1JTl9TSVpFXCJdID0gM10gPSBcIk1JTl9TSVpFXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYSBtYXhpbXVtIGJhcmNvZGUgc2l6ZSAodHlwZSB7QGxpbmsgRGltZW5zaW9ufSkuIE9ubHkgYXBwbGljYWJsZSB0byBEYXRhIE1hdHJpeCBub3cuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHdpdGhvdXQgcmVwbGFjZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIC8qQERlcHJlY2F0ZWQqL1xuICAgICAgICBFbmNvZGVIaW50VHlwZVtFbmNvZGVIaW50VHlwZVtcIk1BWF9TSVpFXCJdID0gNF0gPSBcIk1BWF9TSVpFXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgbWFyZ2luLCBpbiBwaXhlbHMsIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIGJhcmNvZGUuIFRoZSBtZWFuaW5nIGNhbiB2YXJ5XG4gICAgICAgICAqIGJ5IGZvcm1hdDsgZm9yIGV4YW1wbGUgaXQgY29udHJvbHMgbWFyZ2luIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGJhcmNvZGUgaG9yaXpvbnRhbGx5IGZvclxuICAgICAgICAgKiBtb3N0IDFEIGZvcm1hdHMuIChUeXBlIHtAbGluayBJbnRlZ2VyfSwgb3Ige0BsaW5rIFN0cmluZ30gcmVwcmVzZW50YXRpb24gb2YgdGhlIGludGVnZXIgdmFsdWUpLlxuICAgICAgICAgKi9cbiAgICAgICAgRW5jb2RlSGludFR5cGVbRW5jb2RlSGludFR5cGVbXCJNQVJHSU5cIl0gPSA1XSA9IFwiTUFSR0lOXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0byB1c2UgY29tcGFjdCBtb2RlIGZvciBQREY0MTcgKHR5cGUge0BsaW5rIEJvb2xlYW59LCBvciBcInRydWVcIiBvciBcImZhbHNlXCJcbiAgICAgICAgICoge0BsaW5rIFN0cmluZ30gdmFsdWUpLlxuICAgICAgICAgKi9cbiAgICAgICAgRW5jb2RlSGludFR5cGVbRW5jb2RlSGludFR5cGVbXCJQREY0MTdfQ09NUEFDVFwiXSA9IDZdID0gXCJQREY0MTdfQ09NUEFDVFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoYXQgY29tcGFjdGlvbiBtb2RlIHRvIHVzZSBmb3IgUERGNDE3ICh0eXBlXG4gICAgICAgICAqIHtAbGluayBjb20uZ29vZ2xlLnp4aW5nLnBkZjQxNy5lbmNvZGVyLkNvbXBhY3Rpb24gQ29tcGFjdGlvbn0gb3Ige0BsaW5rIFN0cmluZ30gdmFsdWUgb2Ygb25lIG9mIGl0c1xuICAgICAgICAgKiBlbnVtIHZhbHVlcykuXG4gICAgICAgICAqL1xuICAgICAgICBFbmNvZGVIaW50VHlwZVtFbmNvZGVIaW50VHlwZVtcIlBERjQxN19DT01QQUNUSU9OXCJdID0gN10gPSBcIlBERjQxN19DT01QQUNUSU9OXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgYW5kIGNvbHVtbnMgZm9yIFBERjQxNyAodHlwZVxuICAgICAgICAgKiB7QGxpbmsgY29tLmdvb2dsZS56eGluZy5wZGY0MTcuZW5jb2Rlci5EaW1lbnNpb25zIERpbWVuc2lvbnN9KS5cbiAgICAgICAgICovXG4gICAgICAgIEVuY29kZUhpbnRUeXBlW0VuY29kZUhpbnRUeXBlW1wiUERGNDE3X0RJTUVOU0lPTlNcIl0gPSA4XSA9IFwiUERGNDE3X0RJTUVOU0lPTlNcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgcmVxdWlyZWQgbnVtYmVyIG9mIGxheWVycyBmb3IgYW4gQXp0ZWMgY29kZS5cbiAgICAgICAgICogQSBuZWdhdGl2ZSBudW1iZXIgKC0xLCAtMiwgLTMsIC00KSBzcGVjaWZpZXMgYSBjb21wYWN0IEF6dGVjIGNvZGUuXG4gICAgICAgICAqIDAgaW5kaWNhdGVzIHRvIHVzZSB0aGUgbWluaW11bSBudW1iZXIgb2YgbGF5ZXJzICh0aGUgZGVmYXVsdCkuXG4gICAgICAgICAqIEEgcG9zaXRpdmUgbnVtYmVyICgxLCAyLCAuLiAzMikgc3BlY2lmaWVzIGEgbm9ybWFsIChub24tY29tcGFjdCkgQXp0ZWMgY29kZS5cbiAgICAgICAgICogKFR5cGUge0BsaW5rIEludGVnZXJ9LCBvciB7QGxpbmsgU3RyaW5nfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW50ZWdlciB2YWx1ZSkuXG4gICAgICAgICAqL1xuICAgICAgICBFbmNvZGVIaW50VHlwZVtFbmNvZGVIaW50VHlwZVtcIkFaVEVDX0xBWUVSU1wiXSA9IDldID0gXCJBWlRFQ19MQVlFUlNcIjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgZXhhY3QgdmVyc2lvbiBvZiBRUiBjb2RlIHRvIGJlIGVuY29kZWQuXG4gICAgICAgICAqIChUeXBlIHtAbGluayBJbnRlZ2VyfSwgb3Ige0BsaW5rIFN0cmluZ30gcmVwcmVzZW50YXRpb24gb2YgdGhlIGludGVnZXIgdmFsdWUpLlxuICAgICAgICAgKi9cbiAgICAgICAgRW5jb2RlSGludFR5cGVbRW5jb2RlSGludFR5cGVbXCJRUl9WRVJTSU9OXCJdID0gMTBdID0gXCJRUl9WRVJTSU9OXCI7XG4gICAgfSkoRW5jb2RlSGludFR5cGUgfHwgKEVuY29kZUhpbnRUeXBlID0ge30pKTtcbiAgICB2YXIgRW5jb2RlSGludFR5cGUkMSA9IEVuY29kZUhpbnRUeXBlO1xuXG4gICAgLyoqXG4gICAgICogPHA+SW1wbGVtZW50cyBSZWVkLVNvbG9tb24gZW5jb2RpbmcsIGFzIHRoZSBuYW1lIGltcGxpZXMuPC9wPlxuICAgICAqXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKiBAYXV0aG9yIFdpbGxpYW0gUnVja2xpZGdlXG4gICAgICovXG4gICAgY2xhc3MgUmVlZFNvbG9tb25FbmNvZGVyIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcmVlZCBzb2xvbW9uIGVycm9yLWNvcnJlY3RpbmcgZW5jb2RpbmcgY29uc3RydWN0b3IgaXMgY3JlYXRlZCBieVxuICAgICAgICAgKiBwYXNzaW5nIGFzIEdhbG9pcyBGaWVsZCB3aXRoIG9mIHNpemUgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBjb2RlXG4gICAgICAgICAqIHdvcmRzIChzeW1ib2xzKSBpbiB0aGUgYWxwaGFiZXQgKHRoZSBudW1iZXIgb2YgdmFsdWVzIGluIGVhY2hcbiAgICAgICAgICogZWxlbWVudCBvZiBhcnJheXMgdGhhdCBhcmUgZW5jb2RlZC9kZWNvZGVkKS5cbiAgICAgICAgICogQHBhcmFtIGZpZWxkIEEgZ2Fsb2lzIGZpZWxkIHdpdGggYSBudW1iZXIgb2YgZWxlbWVudHMgZXF1YWwgdG8gdGhlIHNpemVcbiAgICAgICAgICogb2YgdGhlIGFscGhhYmV0IG9mIHN5bWJvbHMgdG8gZW5jb2RlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkR2VuZXJhdG9ycyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRHZW5lcmF0b3JzLnB1c2gobmV3IEdlbmVyaWNHRlBvbHkoZmllbGQsIEludDMyQXJyYXkuZnJvbShbMV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRHZW5lcmF0b3IoZGVncmVlIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZEdlbmVyYXRvcnMgPSB0aGlzLmNhY2hlZEdlbmVyYXRvcnM7XG4gICAgICAgICAgICBpZiAoZGVncmVlID49IGNhY2hlZEdlbmVyYXRvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxhc3RHZW5lcmF0b3IgPSBjYWNoZWRHZW5lcmF0b3JzW2NhY2hlZEdlbmVyYXRvcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGQgPSBjYWNoZWRHZW5lcmF0b3JzLmxlbmd0aDsgZCA8PSBkZWdyZWU7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0R2VuZXJhdG9yID0gbGFzdEdlbmVyYXRvci5tdWx0aXBseShuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgSW50MzJBcnJheS5mcm9tKFsxLCBmaWVsZC5leHAoZCAtIDEgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpXSkpKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkR2VuZXJhdG9ycy5wdXNoKG5leHRHZW5lcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0R2VuZXJhdG9yID0gbmV4dEdlbmVyYXRvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkR2VuZXJhdG9yc1tkZWdyZWVdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiA8cD5FbmNvZGUgYSBzZXF1ZW5jZSBvZiBjb2RlIHdvcmRzIChzeW1ib2xzKSB1c2luZyBSZWVkLVNvbG9tb24gdG8gYWxsb3cgZGVjb2RlcnNcbiAgICAgICAgICogdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycyB0aGF0IG1heSBoYXZlIGJlZW4gaW50cm9kdWNlZCB3aGVuIHRoZSByZXN1bHRpbmdcbiAgICAgICAgICogZGF0YSBpcyBzdG9yZWQgb3IgdHJhbnNtaXR0ZWQuPC9wPlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdG9FbmNvZGUgYXJyYXkgdXNlZCBmb3IgYm90aCBhbmQgb3V0cHV0LiBDYWxsZXIgaW5pdGlhbGl6ZXMgdGhlIGFycmF5IHdpdGhcbiAgICAgICAgICogdGhlIGNvZGUgd29yZHMgKHN5bWJvbHMpIHRvIGJlIGVuY29kZWQgZm9sbG93ZWQgYnkgZW1wdHkgZWxlbWVudHMgYWxsb2NhdGVkIHRvIG1ha2VcbiAgICAgICAgICogc3BhY2UgZm9yIGVycm9yLWNvcnJlY3Rpb24gY29kZSB3b3JkcyBpbiB0aGUgZW5jb2RlZCBvdXRwdXQuIFRoZSBhcnJheSBjb250YWluc1xuICAgICAgICAgKiB0aGUgZW5jZG9kZWQgb3V0cHV0IHdoZW4gZW5jb2RlIHJldHVybnMuIENvZGUgd29yZHMgYXJlIGVuY29kZWQgYXMgbnVtYmVycyBmcm9tXG4gICAgICAgICAqIDAgdG8gbi0xLCB3aGVyZSBuIGlzIHRoZSBudW1iZXIgb2YgcG9zc2libGUgY29kZSB3b3JkcyAoc3ltYm9scyksIGFzIGRldGVybWluZWRcbiAgICAgICAgICogYnkgdGhlIHNpemUgb2YgdGhlIEdhbG9pcyBGaWVsZCBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yIG9mIHRoaXMgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0gZWNCeXRlcyB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHJlc2VydmVkIGluIHRoZSBhcnJheSAoZmlyc3QgcGFyYW1ldGVyKVxuICAgICAgICAgKiB0byBzdG9yZSBlcnJvci1jb3JyZWN0aW9uIGNvZGUgd29yZHMuIFRodXMsIHRoZSBudW1iZXIgb2YgY29kZSB3b3JkcyAoc3ltYm9scylcbiAgICAgICAgICogdG8gZW5jb2RlIGluIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgdGh1cyB0b0VuY29kZS5sZW5ndGggLSBlY0J5dGVzLlxuICAgICAgICAgKiBOb3RlLCB0aGUgdXNlIG9mIFwiYnl0ZXNcIiBpbiB0aGUgbmFtZSBvZiB0aGlzIHBhcmFtZXRlciBpcyBtaXNsZWFkaW5nLCBhcyB0aGVyZSBtYXlcbiAgICAgICAgICogYmUgbW9yZSBvciBmZXdlciB0aGFuIDI1NiBzeW1ib2xzIGJlaW5nIGVuY29kZWQsIGFzIGRldGVybWluZWQgYnkgdGhlIG51bWJlciBvZlxuICAgICAgICAgKiBlbGVtZW50cyBpbiB0aGUgR2Fsb2lzIEZpZWxkIHBhc3NlZCBhcyBhIGNvbnN0cnVjdG9yIHRvIHRoaXMgb2JqZWN0LlxuICAgICAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB0aHJvd24gaW4gcmVzcG9uc2UgdG8gdmFsaWRhdGlvbiBlcnJyb3MuXG4gICAgICAgICAqL1xuICAgICAgICBlbmNvZGUodG9FbmNvZGUsIGVjQnl0ZXMgLyppbnQqLykge1xuICAgICAgICAgICAgaWYgKGVjQnl0ZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdObyBlcnJvciBjb3JyZWN0aW9uIGJ5dGVzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkYXRhQnl0ZXMgPSB0b0VuY29kZS5sZW5ndGggLSBlY0J5dGVzO1xuICAgICAgICAgICAgaWYgKGRhdGFCeXRlcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignTm8gZGF0YSBieXRlcyBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdG9yID0gdGhpcy5idWlsZEdlbmVyYXRvcihlY0J5dGVzKTtcbiAgICAgICAgICAgIGNvbnN0IGluZm9Db2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkYXRhQnl0ZXMpO1xuICAgICAgICAgICAgU3lzdGVtLmFycmF5Y29weSh0b0VuY29kZSwgMCwgaW5mb0NvZWZmaWNpZW50cywgMCwgZGF0YUJ5dGVzKTtcbiAgICAgICAgICAgIGxldCBpbmZvID0gbmV3IEdlbmVyaWNHRlBvbHkodGhpcy5maWVsZCwgaW5mb0NvZWZmaWNpZW50cyk7XG4gICAgICAgICAgICBpbmZvID0gaW5mby5tdWx0aXBseUJ5TW9ub21pYWwoZWNCeXRlcywgMSk7XG4gICAgICAgICAgICBjb25zdCByZW1haW5kZXIgPSBpbmZvLmRpdmlkZShnZW5lcmF0b3IpWzFdO1xuICAgICAgICAgICAgY29uc3QgY29lZmZpY2llbnRzID0gcmVtYWluZGVyLmdldENvZWZmaWNpZW50cygpO1xuICAgICAgICAgICAgY29uc3QgbnVtWmVyb0NvZWZmaWNpZW50cyA9IGVjQnl0ZXMgLSBjb2VmZmljaWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1aZXJvQ29lZmZpY2llbnRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0b0VuY29kZVtkYXRhQnl0ZXMgKyBpXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KGNvZWZmaWNpZW50cywgMCwgdG9FbmNvZGUsIGRhdGFCeXRlcyArIG51bVplcm9Db2VmZmljaWVudHMsIGNvZWZmaWNpZW50cy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGF1dGhvciBTYXRvcnUgVGFrYWJheWFzaGlcbiAgICAgKiBAYXV0aG9yIERhbmllbCBTd2l0a2luXG4gICAgICogQGF1dGhvciBTZWFuIE93ZW5cbiAgICAgKi9cbiAgICBjbGFzcyBNYXNrVXRpbCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBseSBtYXNrIHBlbmFsdHkgcnVsZSAxIGFuZCByZXR1cm4gdGhlIHBlbmFsdHkuIEZpbmQgcmVwZXRpdGl2ZSBjZWxscyB3aXRoIHRoZSBzYW1lIGNvbG9yIGFuZFxuICAgICAgICAgKiBnaXZlIHBlbmFsdHkgdG8gdGhlbS4gRXhhbXBsZTogMDAwMDAgb3IgMTExMTEuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgYXBwbHlNYXNrUGVuYWx0eVJ1bGUxKG1hdHJpeCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hc2tVdGlsLmFwcGx5TWFza1BlbmFsdHlSdWxlMUludGVybmFsKG1hdHJpeCwgdHJ1ZSkgKyBNYXNrVXRpbC5hcHBseU1hc2tQZW5hbHR5UnVsZTFJbnRlcm5hbChtYXRyaXgsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwbHkgbWFzayBwZW5hbHR5IHJ1bGUgMiBhbmQgcmV0dXJuIHRoZSBwZW5hbHR5LiBGaW5kIDJ4MiBibG9ja3Mgd2l0aCB0aGUgc2FtZSBjb2xvciBhbmQgZ2l2ZVxuICAgICAgICAgKiBwZW5hbHR5IHRvIHRoZW0uIFRoaXMgaXMgYWN0dWFsbHkgZXF1aXZhbGVudCB0byB0aGUgc3BlYydzIHJ1bGUsIHdoaWNoIGlzIHRvIGZpbmQgTXhOIGJsb2NrcyBhbmQgZ2l2ZSBhXG4gICAgICAgICAqIHBlbmFsdHkgcHJvcG9ydGlvbmFsIHRvIChNLTEpeChOLTEpLCBiZWNhdXNlIHRoaXMgaXMgdGhlIG51bWJlciBvZiAyeDIgYmxvY2tzIGluc2lkZSBzdWNoIGEgYmxvY2suXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgYXBwbHlNYXNrUGVuYWx0eVJ1bGUyKG1hdHJpeCkge1xuICAgICAgICAgICAgbGV0IHBlbmFsdHkgPSAwO1xuICAgICAgICAgICAgY29uc3QgYXJyYXkgPSBtYXRyaXguZ2V0QXJyYXkoKTtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gbWF0cml4LmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBtYXRyaXguZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodCAtIDE7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5WSA9IGFycmF5W3ldO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGggLSAxOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhcnJheVlbeF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gYXJyYXlZW3ggKyAxXSAmJiB2YWx1ZSA9PT0gYXJyYXlbeSArIDFdW3hdICYmIHZhbHVlID09PSBhcnJheVt5ICsgMV1beCArIDFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5hbHR5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTWFza1V0aWwuTjIgKiBwZW5hbHR5O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBseSBtYXNrIHBlbmFsdHkgcnVsZSAzIGFuZCByZXR1cm4gdGhlIHBlbmFsdHkuIEZpbmQgY29uc2VjdXRpdmUgcnVucyBvZiAxOjE6MzoxOjE6NFxuICAgICAgICAgKiBzdGFydGluZyB3aXRoIGJsYWNrLCBvciA0OjE6MTozOjE6MSBzdGFydGluZyB3aXRoIHdoaXRlLCBhbmQgZ2l2ZSBwZW5hbHR5IHRvIHRoZW0uICBJZiB3ZVxuICAgICAgICAgKiBmaW5kIHBhdHRlcm5zIGxpa2UgMDAwMDEwMTExMDEwMDAwLCB3ZSBnaXZlIHBlbmFsdHkgb25jZS5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhcHBseU1hc2tQZW5hbHR5UnVsZTMobWF0cml4KSB7XG4gICAgICAgICAgICBsZXQgbnVtUGVuYWx0aWVzID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gbWF0cml4LmdldEFycmF5KCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IG1hdHJpeC5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gbWF0cml4LmdldEhlaWdodCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheVkgPSBhcnJheVt5XTsgLy8gV2UgY2FuIGF0IGxlYXN0IG9wdGltaXplIHRoaXMgYWNjZXNzXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ICsgNiA8IHdpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVlbeF0gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgMV0gPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgMl0gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgM10gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgNF0gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgNV0gPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5WVt4ICsgNl0gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChNYXNrVXRpbC5pc1doaXRlSG9yaXpvbnRhbChhcnJheVksIHggLSA0LCB4KSB8fCBNYXNrVXRpbC5pc1doaXRlSG9yaXpvbnRhbChhcnJheVksIHggKyA3LCB4ICsgMTEpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtUGVuYWx0aWVzKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgKyA2IDwgaGVpZ2h0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVt5XVt4XSA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbeSArIDFdW3hdID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVt5ICsgMl1beF0gPT09IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W3kgKyAzXVt4XSA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbeSArIDRdW3hdID09PSAxICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVt5ICsgNV1beF0gPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W3kgKyA2XVt4XSA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKE1hc2tVdGlsLmlzV2hpdGVWZXJ0aWNhbChhcnJheSwgeCwgeSAtIDQsIHkpIHx8IE1hc2tVdGlsLmlzV2hpdGVWZXJ0aWNhbChhcnJheSwgeCwgeSArIDcsIHkgKyAxMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1QZW5hbHRpZXMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudW1QZW5hbHRpZXMgKiBNYXNrVXRpbC5OMztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgaXNXaGl0ZUhvcml6b250YWwocm93QXJyYXksIGZyb20gLyppbnQqLywgdG8gLyppbnQqLykge1xuICAgICAgICAgICAgZnJvbSA9IE1hdGgubWF4KGZyb20sIDApO1xuICAgICAgICAgICAgdG8gPSBNYXRoLm1pbih0bywgcm93QXJyYXkubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyb3dBcnJheVtpXSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGlzV2hpdGVWZXJ0aWNhbChhcnJheSwgY29sIC8qaW50Ki8sIGZyb20gLyppbnQqLywgdG8gLyppbnQqLykge1xuICAgICAgICAgICAgZnJvbSA9IE1hdGgubWF4KGZyb20sIDApO1xuICAgICAgICAgICAgdG8gPSBNYXRoLm1pbih0bywgYXJyYXkubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhcnJheVtpXVtjb2xdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwbHkgbWFzayBwZW5hbHR5IHJ1bGUgNCBhbmQgcmV0dXJuIHRoZSBwZW5hbHR5LiBDYWxjdWxhdGUgdGhlIHJhdGlvIG9mIGRhcmsgY2VsbHMgYW5kIGdpdmVcbiAgICAgICAgICogcGVuYWx0eSBpZiB0aGUgcmF0aW8gaXMgZmFyIGZyb20gNTAlLiBJdCBnaXZlcyAxMCBwZW5hbHR5IGZvciA1JSBkaXN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhcHBseU1hc2tQZW5hbHR5UnVsZTQobWF0cml4KSB7XG4gICAgICAgICAgICBsZXQgbnVtRGFya0NlbGxzID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gbWF0cml4LmdldEFycmF5KCk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IG1hdHJpeC5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gbWF0cml4LmdldEhlaWdodCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5WSA9IGFycmF5W3ldO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlZW3hdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBudW1EYXJrQ2VsbHMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG51bVRvdGFsQ2VsbHMgPSBtYXRyaXguZ2V0SGVpZ2h0KCkgKiBtYXRyaXguZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpdmVQZXJjZW50VmFyaWFuY2VzID0gTWF0aC5mbG9vcihNYXRoLmFicyhudW1EYXJrQ2VsbHMgKiAyIC0gbnVtVG90YWxDZWxscykgKiAxMCAvIG51bVRvdGFsQ2VsbHMpO1xuICAgICAgICAgICAgcmV0dXJuIGZpdmVQZXJjZW50VmFyaWFuY2VzICogTWFza1V0aWwuTjQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybiB0aGUgbWFzayBiaXQgZm9yIFwiZ2V0TWFza1BhdHRlcm5cIiBhdCBcInhcIiBhbmQgXCJ5XCIuIFNlZSA4Ljggb2YgSklTWDA1MTA6MjAwNCBmb3IgbWFza1xuICAgICAgICAgKiBwYXR0ZXJuIGNvbmRpdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0RGF0YU1hc2tCaXQobWFza1BhdHRlcm4gLyppbnQqLywgeCAvKmludCovLCB5IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGxldCBpbnRlcm1lZGlhdGU7IC8qaW50Ki9cbiAgICAgICAgICAgIGxldCB0ZW1wOyAvKmludCovXG4gICAgICAgICAgICBzd2l0Y2ggKG1hc2tQYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBpbnRlcm1lZGlhdGUgPSAoeSArIHgpICYgMHgxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGludGVybWVkaWF0ZSA9IHkgJiAweDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlID0geCAlIDM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlID0gKHkgKyB4KSAlIDM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlID0gKE1hdGguZmxvb3IoeSAvIDIpICsgTWF0aC5mbG9vcih4IC8gMykpICYgMHgxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSB5ICogeDtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlID0gKHRlbXAgJiAweDEpICsgKHRlbXAgJSAzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICB0ZW1wID0geSAqIHg7XG4gICAgICAgICAgICAgICAgICAgIGludGVybWVkaWF0ZSA9ICgodGVtcCAmIDB4MSkgKyAodGVtcCAlIDMpKSAmIDB4MTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICB0ZW1wID0geSAqIHg7XG4gICAgICAgICAgICAgICAgICAgIGludGVybWVkaWF0ZSA9ICgodGVtcCAlIDMpICsgKCh5ICsgeCkgJiAweDEpKSAmIDB4MTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignSW52YWxpZCBtYXNrIHBhdHRlcm46ICcgKyBtYXNrUGF0dGVybik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJtZWRpYXRlID09PSAwO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGFwcGx5TWFza1BlbmFsdHlSdWxlMS4gV2UgbmVlZCB0aGlzIGZvciBkb2luZyB0aGlzIGNhbGN1bGF0aW9uIGluIGJvdGhcbiAgICAgICAgICogdmVydGljYWwgYW5kIGhvcml6b250YWwgb3JkZXJzIHJlc3BlY3RpdmVseS5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhcHBseU1hc2tQZW5hbHR5UnVsZTFJbnRlcm5hbChtYXRyaXgsIGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgbGV0IHBlbmFsdHkgPSAwO1xuICAgICAgICAgICAgY29uc3QgaUxpbWl0ID0gaXNIb3Jpem9udGFsID8gbWF0cml4LmdldEhlaWdodCgpIDogbWF0cml4LmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBqTGltaXQgPSBpc0hvcml6b250YWwgPyBtYXRyaXguZ2V0V2lkdGgoKSA6IG1hdHJpeC5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gbWF0cml4LmdldEFycmF5KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlMaW1pdDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG51bVNhbWVCaXRDZWxscyA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHByZXZCaXQgPSAtMTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGpMaW1pdDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdCA9IGlzSG9yaXpvbnRhbCA/IGFycmF5W2ldW2pdIDogYXJyYXlbal1baV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaXQgPT09IHByZXZCaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bVNhbWVCaXRDZWxscysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bVNhbWVCaXRDZWxscyA+PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuYWx0eSArPSBNYXNrVXRpbC5OMSArIChudW1TYW1lQml0Q2VsbHMgLSA1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bVNhbWVCaXRDZWxscyA9IDE7IC8vIEluY2x1ZGUgdGhlIGNlbGwgaXRzZWxmLlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkJpdCA9IGJpdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobnVtU2FtZUJpdENlbGxzID49IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuYWx0eSArPSBNYXNrVXRpbC5OMSArIChudW1TYW1lQml0Q2VsbHMgLSA1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGVuYWx0eTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBQZW5hbHR5IHdlaWdodHMgZnJvbSBzZWN0aW9uIDYuOC4yLjFcbiAgICBNYXNrVXRpbC5OMSA9IDM7XG4gICAgTWFza1V0aWwuTjIgPSAzO1xuICAgIE1hc2tVdGlsLk4zID0gNDA7XG4gICAgTWFza1V0aWwuTjQgPSAxMDtcblxuICAgIC8qKlxuICAgICAqIEpBVkFQT1JUOiBUaGUgb3JpZ2luYWwgY29kZSB3YXMgYSAyRCBhcnJheSBvZiBpbnRzLCBidXQgc2luY2UgaXQgb25seSBldmVyIGdldHMgYXNzaWduZWRcbiAgICAgKiAtMSwgMCwgYW5kIDEsIEknbSBnb2luZyB0byB1c2UgbGVzcyBtZW1vcnkgYW5kIGdvIHdpdGggYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKVxuICAgICAqL1xuICAgIGNsYXNzIEJ5dGVNYXRyaXgge1xuICAgICAgICBjb25zdHJ1Y3Rvcih3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBBcnJheShoZWlnaHQpOyAvLyBbaGVpZ2h0XVt3aWR0aF1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBoZWlnaHQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ5dGVzW2ldID0gbmV3IFVpbnQ4QXJyYXkod2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGdldCh4IC8qaW50Ki8sIHkgLyppbnQqLykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXNbeV1beF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gYW4gaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gYXMgYnl0ZXMsIGluIHJvdy1tYWpvciBvcmRlci4gYXJyYXlbeV1beF0gcmVwcmVzZW50cyBwb2ludCAoeCx5KVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0QXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ieXRlcztcbiAgICAgICAgfVxuICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogcHJlZmZlciB0byBsZXQgdHdvIG1ldGhvZHMgaW5zdGVhZCBvZiBvdmVycmlkZSB0byBhdm9pZCB0eXBlIGNvbXBhcmlzb24gaW5zaWRlXG4gICAgICAgIHNldE51bWJlcih4IC8qaW50Ki8sIHkgLyppbnQqLywgdmFsdWUgLypieXRlfGludCovKSB7XG4gICAgICAgICAgICB0aGlzLmJ5dGVzW3ldW3hdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHVibGljIHNldCh4OiBudW1iZXIgLyppbnQqLywgeTogbnVtYmVyIC8qaW50Ki8sIHZhbHVlOiBudW1iZXIgLyppbnQqLyk6IHZvaWQge1xuICAgICAgICAvLyAgIGJ5dGVzW3ldW3hdID0gKGJ5dGUpIHZhbHVlXG4gICAgICAgIC8vIH1cbiAgICAgICAgc2V0Qm9vbGVhbih4IC8qaW50Ki8sIHkgLyppbnQqLywgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYnl0ZXNbeV1beF0gPSAvKihieXRlKSAqLyAodmFsdWUgPyAxIDogMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXIodmFsdWUgLypieXRlKi8pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYUJ5dGUgb2YgdGhpcy5ieXRlcykge1xuICAgICAgICAgICAgICAgIEFycmF5cy5maWxsKGFCeXRlLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXF1YWxzKG8pIHtcbiAgICAgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBCeXRlTWF0cml4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG90aGVyID0gbztcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoICE9PSBvdGhlci53aWR0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCAhPT0gb3RoZXIuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyArK3kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBieXRlc1kgPSB0aGlzLmJ5dGVzW3ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyQnl0ZXNZID0gb3RoZXIuYnl0ZXNbeV07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDAsIHdpZHRoID0gdGhpcy53aWR0aDsgeCA8IHdpZHRoOyArK3gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ5dGVzWVt4XSAhPT0gb3RoZXJCeXRlc1lbeF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyaW5nQnVpbGRlcigpOyAvLyAoMiAqIHdpZHRoICogaGVpZ2h0ICsgMilcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwLCBoZWlnaHQgPSB0aGlzLmhlaWdodDsgeSA8IGhlaWdodDsgKyt5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnl0ZXNZID0gdGhpcy5ieXRlc1t5XTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMCwgd2lkdGggPSB0aGlzLndpZHRoOyB4IDwgd2lkdGg7ICsreCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ5dGVzWVt4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJyAwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnIDEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnICAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKCdcXG4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBhdXRob3Igc2F0b3J1eEBnb29nbGUuY29tIChTYXRvcnUgVGFrYWJheWFzaGkpIC0gY3JlYXRvclxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pIC0gcG9ydGVkIGZyb20gQysrXG4gICAgICovXG4gICAgY2xhc3MgUVJDb2RlIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLm1hc2tQYXR0ZXJuID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TW9kZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RUNMZXZlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVjTGV2ZWw7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0VmVyc2lvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgZ2V0TWFza1BhdHRlcm4oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrUGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBnZXRNYXRyaXgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7IC8vICgyMDApXG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kKCc8PFxcbicpO1xuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnIG1vZGU6ICcpO1xuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLm1vZGUgPyB0aGlzLm1vZGUudG9TdHJpbmcoKSA6ICdudWxsJyk7XG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kKCdcXG4gZWNMZXZlbDogJyk7XG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kKHRoaXMuZWNMZXZlbCA/IHRoaXMuZWNMZXZlbC50b1N0cmluZygpIDogJ251bGwnKTtcbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJ1xcbiB2ZXJzaW9uOiAnKTtcbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQodGhpcy52ZXJzaW9uID8gdGhpcy52ZXJzaW9uLnRvU3RyaW5nKCkgOiAnbnVsbCcpO1xuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXFxuIG1hc2tQYXR0ZXJuOiAnKTtcbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQodGhpcy5tYXNrUGF0dGVybi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJ1xcbiBtYXRyaXg6XFxuJyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLm1hdHJpeC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJ1xcbiBtYXRyaXg6IG51bGxcXG4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoJz4+XFxuJyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TW9kZSh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc2V0RUNMZXZlbCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5lY0xldmVsID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIHNldE1hc2tQYXR0ZXJuKHZhbHVlIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHRoaXMubWFza1BhdHRlcm4gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRNYXRyaXgodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgXCJtYXNrX3BhdHRlcm5cIiBpcyB2YWxpZC5cbiAgICAgICAgc3RhdGljIGlzVmFsaWRNYXNrUGF0dGVybihtYXNrUGF0dGVybiAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFza1BhdHRlcm4gPj0gMCAmJiBtYXNrUGF0dGVybiA8IFFSQ29kZS5OVU1fTUFTS19QQVRURVJOUztcbiAgICAgICAgfVxuICAgIH1cbiAgICBRUkNvZGUuTlVNX01BU0tfUEFUVEVSTlMgPSA4O1xuXG4gICAgLyoqXG4gICAgICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLlxuICAgICAqL1xuICAgIGNsYXNzIFdyaXRlckV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgfVxuICAgIFdyaXRlckV4Y2VwdGlvbi5raW5kID0gJ1dyaXRlckV4Y2VwdGlvbic7XG5cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIHNhdG9ydXhAZ29vZ2xlLmNvbSAoU2F0b3J1IFRha2FiYXlhc2hpKSAtIGNyZWF0b3JcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKSAtIHBvcnRlZCBmcm9tIEMrK1xuICAgICAqL1xuICAgIGNsYXNzIE1hdHJpeFV0aWwge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgYWxsIGNlbGxzIHRvIC0xIChUWVBFU0NSSVBUUE9SVDogMjU1KS4gIC0xIChUWVBFU0NSSVBUUE9SVDogMjU1KSBtZWFucyB0aGF0IHRoZSBjZWxsIGlzIGVtcHR5IChub3Qgc2V0IHlldCkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEpBVkFQT1JUOiBXZSBzaG91bGRuJ3QgbmVlZCB0byBkbyB0aGlzIGF0IGFsbC4gVGhlIGNvZGUgc2hvdWxkIGJlIHJld3JpdHRlbiB0byBiZWdpbiBlbmNvZGluZ1xuICAgICAgICAvLyB3aXRoIHRoZSBCeXRlTWF0cml4IGluaXRpYWxpemVkIGFsbCB0byB6ZXJvLlxuICAgICAgICBzdGF0aWMgY2xlYXJNYXRyaXgobWF0cml4KSB7XG4gICAgICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogd2UgdXNlIFVpbnRBcnJheSBzZSBjaGFuZ2VkIGhlcmUgZnJvbSAtMSB0byAyNTVcbiAgICAgICAgICAgIG1hdHJpeC5jbGVhcigvKihieXRlKSAqLyAvKi0xKi8gMjU1KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCdWlsZCAyRCBtYXRyaXggb2YgUVIgQ29kZSBmcm9tIFwiZGF0YUJpdHNcIiB3aXRoIFwiZWNMZXZlbFwiLCBcInZlcnNpb25cIiBhbmQgXCJnZXRNYXNrUGF0dGVyblwiLiBPblxuICAgICAgICAvLyBzdWNjZXNzLCBzdG9yZSB0aGUgcmVzdWx0IGluIFwibWF0cml4XCIgYW5kIHJldHVybiB0cnVlLlxuICAgICAgICBzdGF0aWMgYnVpbGRNYXRyaXgoZGF0YUJpdHMsIGVjTGV2ZWwsIHZlcnNpb24sIG1hc2tQYXR0ZXJuIC8qaW50Ki8sIG1hdHJpeCkge1xuICAgICAgICAgICAgTWF0cml4VXRpbC5jbGVhck1hdHJpeChtYXRyaXgpO1xuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZEJhc2ljUGF0dGVybnModmVyc2lvbiwgbWF0cml4KTtcbiAgICAgICAgICAgIC8vIFR5cGUgaW5mb3JtYXRpb24gYXBwZWFyIHdpdGggYW55IHZlcnNpb24uXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkVHlwZUluZm8oZWNMZXZlbCwgbWFza1BhdHRlcm4sIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBWZXJzaW9uIGluZm8gYXBwZWFyIGlmIHZlcnNpb24gPj0gNy5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwubWF5YmVFbWJlZFZlcnNpb25JbmZvKHZlcnNpb24sIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBEYXRhIHNob3VsZCBiZSBlbWJlZGRlZCBhdCBlbmQuXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkRGF0YUJpdHMoZGF0YUJpdHMsIG1hc2tQYXR0ZXJuLCBtYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVtYmVkIGJhc2ljIHBhdHRlcm5zLiBPbiBzdWNjZXNzLCBtb2RpZnkgdGhlIG1hdHJpeCBhbmQgcmV0dXJuIHRydWUuXG4gICAgICAgIC8vIFRoZSBiYXNpYyBwYXR0ZXJucyBhcmU6XG4gICAgICAgIC8vIC0gUG9zaXRpb24gZGV0ZWN0aW9uIHBhdHRlcm5zXG4gICAgICAgIC8vIC0gVGltaW5nIHBhdHRlcm5zXG4gICAgICAgIC8vIC0gRGFyayBkb3QgYXQgdGhlIGxlZnQgYm90dG9tIGNvcm5lclxuICAgICAgICAvLyAtIFBvc2l0aW9uIGFkanVzdG1lbnQgcGF0dGVybnMsIGlmIG5lZWQgYmVcbiAgICAgICAgc3RhdGljIGVtYmVkQmFzaWNQYXR0ZXJucyh2ZXJzaW9uLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIC8vIExldCdzIGdldCBzdGFydGVkIHdpdGggZW1iZWRkaW5nIGJpZyBzcXVhcmVzIGF0IGNvcm5lcnMuXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkUG9zaXRpb25EZXRlY3Rpb25QYXR0ZXJuc0FuZFNlcGFyYXRvcnMobWF0cml4KTtcbiAgICAgICAgICAgIC8vIFRoZW4sIGVtYmVkIHRoZSBkYXJrIGRvdCBhdCB0aGUgbGVmdCBib3R0b20gY29ybmVyLlxuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZERhcmtEb3RBdExlZnRCb3R0b21Db3JuZXIobWF0cml4KTtcbiAgICAgICAgICAgIC8vIFBvc2l0aW9uIGFkanVzdG1lbnQgcGF0dGVybnMgYXBwZWFyIGlmIHZlcnNpb24gPj0gMi5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwubWF5YmVFbWJlZFBvc2l0aW9uQWRqdXN0bWVudFBhdHRlcm5zKHZlcnNpb24sIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBUaW1pbmcgcGF0dGVybnMgc2hvdWxkIGJlIGVtYmVkZGVkIGFmdGVyIHBvc2l0aW9uIGFkai4gcGF0dGVybnMuXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkVGltaW5nUGF0dGVybnMobWF0cml4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbWJlZCB0eXBlIGluZm9ybWF0aW9uLiBPbiBzdWNjZXNzLCBtb2RpZnkgdGhlIG1hdHJpeC5cbiAgICAgICAgc3RhdGljIGVtYmVkVHlwZUluZm8oZWNMZXZlbCwgbWFza1BhdHRlcm4gLyppbnQqLywgbWF0cml4KSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlSW5mb0JpdHMgPSBuZXcgQml0QXJyYXkoKTtcbiAgICAgICAgICAgIE1hdHJpeFV0aWwubWFrZVR5cGVJbmZvQml0cyhlY0xldmVsLCBtYXNrUGF0dGVybiwgdHlwZUluZm9CaXRzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBzaXplID0gdHlwZUluZm9CaXRzLmdldFNpemUoKTsgaSA8IHNpemU7ICsraSkge1xuICAgICAgICAgICAgICAgIC8vIFBsYWNlIGJpdHMgaW4gTFNCIHRvIE1TQiBvcmRlci4gIExTQiAobGVhc3Qgc2lnbmlmaWNhbnQgYml0KSBpcyB0aGUgbGFzdCB2YWx1ZSBpblxuICAgICAgICAgICAgICAgIC8vIFwidHlwZUluZm9CaXRzXCIuXG4gICAgICAgICAgICAgICAgY29uc3QgYml0ID0gdHlwZUluZm9CaXRzLmdldCh0eXBlSW5mb0JpdHMuZ2V0U2l6ZSgpIC0gMSAtIGkpO1xuICAgICAgICAgICAgICAgIC8vIFR5cGUgaW5mbyBiaXRzIGF0IHRoZSBsZWZ0IHRvcCBjb3JuZXIuIFNlZSA4Ljkgb2YgSklTWDA1MTA6MjAwNCAocC40NikuXG4gICAgICAgICAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBNYXRyaXhVdGlsLlRZUEVfSU5GT19DT09SRElOQVRFU1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCB4MSA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkxID0gY29vcmRpbmF0ZXNbMV07XG4gICAgICAgICAgICAgICAgbWF0cml4LnNldEJvb2xlYW4oeDEsIHkxLCBiaXQpO1xuICAgICAgICAgICAgICAgIGlmIChpIDwgOCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCB0b3AgY29ybmVyLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB4MiA9IG1hdHJpeC5nZXRXaWR0aCgpIC0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkyID0gODtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldEJvb2xlYW4oeDIsIHkyLCBiaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBib3R0b20gY29ybmVyLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB4MiA9IDg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHkyID0gbWF0cml4LmdldEhlaWdodCgpIC0gNyArIChpIC0gOCk7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXRCb29sZWFuKHgyLCB5MiwgYml0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW1iZWQgdmVyc2lvbiBpbmZvcm1hdGlvbiBpZiBuZWVkIGJlLiBPbiBzdWNjZXNzLCBtb2RpZnkgdGhlIG1hdHJpeCBhbmQgcmV0dXJuIHRydWUuXG4gICAgICAgIC8vIFNlZSA4LjEwIG9mIEpJU1gwNTEwOjIwMDQgKHAuNDcpIGZvciBob3cgdG8gZW1iZWQgdmVyc2lvbiBpbmZvcm1hdGlvbi5cbiAgICAgICAgc3RhdGljIG1heWJlRW1iZWRWZXJzaW9uSW5mbyh2ZXJzaW9uLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKSA8IDcpIHsgLy8gVmVyc2lvbiBpbmZvIGlzIG5lY2Vzc2FyeSBpZiB2ZXJzaW9uID49IDcuXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBEb24ndCBuZWVkIHZlcnNpb24gaW5mby5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25JbmZvQml0cyA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgTWF0cml4VXRpbC5tYWtlVmVyc2lvbkluZm9CaXRzKHZlcnNpb24sIHZlcnNpb25JbmZvQml0cyk7XG4gICAgICAgICAgICBsZXQgYml0SW5kZXggPSA2ICogMyAtIDE7IC8vIEl0IHdpbGwgZGVjcmVhc2UgZnJvbSAxNyB0byAwLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyArK2kpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAvLyBQbGFjZSBiaXRzIGluIExTQiAobGVhc3Qgc2lnbmlmaWNhbnQgYml0KSB0byBNU0Igb3JkZXIuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdCA9IHZlcnNpb25JbmZvQml0cy5nZXQoYml0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBiaXRJbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IGJvdHRvbSBjb3JuZXIuXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXRCb29sZWFuKGksIG1hdHJpeC5nZXRIZWlnaHQoKSAtIDExICsgaiwgYml0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgYm90dG9tIGNvcm5lci5cbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldEJvb2xlYW4obWF0cml4LmdldEhlaWdodCgpIC0gMTEgKyBqLCBpLCBiaXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbWJlZCBcImRhdGFCaXRzXCIgdXNpbmcgXCJnZXRNYXNrUGF0dGVyblwiLiBPbiBzdWNjZXNzLCBtb2RpZnkgdGhlIG1hdHJpeCBhbmQgcmV0dXJuIHRydWUuXG4gICAgICAgIC8vIEZvciBkZWJ1Z2dpbmcgcHVycG9zZXMsIGl0IHNraXBzIG1hc2tpbmcgcHJvY2VzcyBpZiBcImdldE1hc2tQYXR0ZXJuXCIgaXMgLTEoVFlQRVNDUklQVFBPUlQ6IDI1NSkuXG4gICAgICAgIC8vIFNlZSA4Ljcgb2YgSklTWDA1MTA6MjAwNCAocC4zOCkgZm9yIGhvdyB0byBlbWJlZCBkYXRhIGJpdHMuXG4gICAgICAgIHN0YXRpYyBlbWJlZERhdGFCaXRzKGRhdGFCaXRzLCBtYXNrUGF0dGVybiAvKmludCovLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGxldCBiaXRJbmRleCA9IDA7XG4gICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gLTE7XG4gICAgICAgICAgICAvLyBTdGFydCBmcm9tIHRoZSByaWdodCBib3R0b20gY2VsbC5cbiAgICAgICAgICAgIGxldCB4ID0gbWF0cml4LmdldFdpZHRoKCkgLSAxO1xuICAgICAgICAgICAgbGV0IHkgPSBtYXRyaXguZ2V0SGVpZ2h0KCkgLSAxO1xuICAgICAgICAgICAgd2hpbGUgKHggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB0aGUgdmVydGljYWwgdGltaW5nIHBhdHRlcm4uXG4gICAgICAgICAgICAgICAgaWYgKHggPT09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgeCAtPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAoeSA+PSAwICYmIHkgPCBtYXRyaXguZ2V0SGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHh4ID0geCAtIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHRoZSBjZWxsIGlmIGl0J3Mgbm90IGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFNYXRyaXhVdGlsLmlzRW1wdHkobWF0cml4LmdldCh4eCwgeSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYml0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdEluZGV4IDwgZGF0YUJpdHMuZ2V0U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0ID0gZGF0YUJpdHMuZ2V0KGJpdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2JpdEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFkZGluZyBiaXQuIElmIHRoZXJlIGlzIG5vIGJpdCBsZWZ0LCB3ZSdsbCBmaWxsIHRoZSBsZWZ0IGNlbGxzIHdpdGggMCwgYXMgZGVzY3JpYmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gOC40Ljkgb2YgSklTWDA1MTA6MjAwNCAocC4gMjQpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBtYXNraW5nIGlmIG1hc2tfcGF0dGVybiBpcyAtMSAoVFlQRVNDUklQVFBPUlQ6IDI1NSkuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFza1BhdHRlcm4gIT09IDI1NSAmJiBNYXNrVXRpbC5nZXREYXRhTWFza0JpdChtYXNrUGF0dGVybiwgeHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0ID0gIWJpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXRCb29sZWFuKHh4LCB5LCBiaXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHkgKz0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAtZGlyZWN0aW9uOyAvLyBSZXZlcnNlIHRoZSBkaXJlY3Rpb24uXG4gICAgICAgICAgICAgICAgeSArPSBkaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgeCAtPSAyOyAvLyBNb3ZlIHRvIHRoZSBsZWZ0LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWxsIGJpdHMgc2hvdWxkIGJlIGNvbnN1bWVkLlxuICAgICAgICAgICAgaWYgKGJpdEluZGV4ICE9PSBkYXRhQml0cy5nZXRTaXplKCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdOb3QgYWxsIGJpdHMgY29uc3VtZWQ6ICcgKyBiaXRJbmRleCArICcvJyArIGRhdGFCaXRzLmdldFNpemUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgc2V0IChvbmU6IHRvKSBpbiB0aGUgXCJ2YWx1ZVwiLiBUaGUgbW9zdFxuICAgICAgICAvLyBzaWduaWZpY2FudCBiaXQgaXMgcG9zaXRpb24gMzIuIElmIHRoZXJlIGlzIG5vIGJpdCBzZXQsIHJldHVybiAwLiBFeGFtcGxlczpcbiAgICAgICAgLy8gLSBmaW5kTVNCU2V0KDApID0+IDBcbiAgICAgICAgLy8gLSBmaW5kTVNCU2V0KDEpID0+IDFcbiAgICAgICAgLy8gLSBmaW5kTVNCU2V0KDI1NSkgPT4gOFxuICAgICAgICBzdGF0aWMgZmluZE1TQlNldCh2YWx1ZSAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gMzIgLSBJbnRlZ2VyLm51bWJlck9mTGVhZGluZ1plcm9zKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWxjdWxhdGUgQkNIIChCb3NlLUNoYXVkaHVyaS1Ib2NxdWVuZ2hlbSkgY29kZSBmb3IgXCJ2YWx1ZVwiIHVzaW5nIHBvbHlub21pYWwgXCJwb2x5XCIuIFRoZSBCQ0hcbiAgICAgICAgLy8gY29kZSBpcyB1c2VkIGZvciBlbmNvZGluZyB0eXBlIGluZm9ybWF0aW9uIGFuZCB2ZXJzaW9uIGluZm9ybWF0aW9uLlxuICAgICAgICAvLyBFeGFtcGxlOiBDYWxjdWxhdGlvbiBvZiB2ZXJzaW9uIGluZm9ybWF0aW9uIG9mIDcuXG4gICAgICAgIC8vIGYoeCkgaXMgY3JlYXRlZCBmcm9tIDcuXG4gICAgICAgIC8vICAgLSA3ID0gMDAwMTExIGluIDYgYml0c1xuICAgICAgICAvLyAgIC0gZih4KSA9IHheMiArIHheMSArIHheMFxuICAgICAgICAvLyBnKHgpIGlzIGdpdmVuIGJ5IHRoZSBzdGFuZGFyZCAocC4gNjcpXG4gICAgICAgIC8vICAgLSBnKHgpID0geF4xMiArIHheMTEgKyB4XjEwICsgeF45ICsgeF44ICsgeF41ICsgeF4yICsgMVxuICAgICAgICAvLyBNdWx0aXBseSBmKHgpIGJ5IHheKDE4IC0gNilcbiAgICAgICAgLy8gICAtIGYnKHgpID0gZih4KSAqIHheKDE4IC0gNilcbiAgICAgICAgLy8gICAtIGYnKHgpID0geF4xNCArIHheMTMgKyB4XjEyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcmVtYWluZGVyIG9mIGYnKHgpIC8gZyh4KVxuICAgICAgICAvLyAgICAgICAgIHheMlxuICAgICAgICAvLyAgICAgICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXG4gICAgICAgIC8vICAgZyh4KSApeF4xNCArIHheMTMgKyB4XjEyXG4gICAgICAgIC8vICAgICAgICAgeF4xNCArIHheMTMgKyB4XjEyICsgeF4xMSArIHheMTAgKyB4XjcgKyB4XjQgKyB4XjJcbiAgICAgICAgLy8gICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHheMTEgKyB4XjEwICsgeF43ICsgeF40ICsgeF4yXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZSByZW1haW5kZXIgaXMgeF4xMSArIHheMTAgKyB4XjcgKyB4XjQgKyB4XjJcbiAgICAgICAgLy8gRW5jb2RlIGl0IGluIGJpbmFyeTogMTEwMDEwMDEwMTAwXG4gICAgICAgIC8vIFRoZSByZXR1cm4gdmFsdWUgaXMgMHhjOTQgKDExMDAgMTAwMSAwMTAwKVxuICAgICAgICAvL1xuICAgICAgICAvLyBTaW5jZSBhbGwgY29lZmZpY2llbnRzIGluIHRoZSBwb2x5bm9taWFscyBhcmUgMSBvciAwLCB3ZSBjYW4gZG8gdGhlIGNhbGN1bGF0aW9uIGJ5IGJpdFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBXZSBkb24ndCBjYXJlIGlmIGNvZWZmaWNpZW50cyBhcmUgcG9zaXRpdmUgb3IgbmVnYXRpdmUuXG4gICAgICAgIHN0YXRpYyBjYWxjdWxhdGVCQ0hDb2RlKHZhbHVlIC8qaW50Ki8sIHBvbHkgLyppbnQqLykge1xuICAgICAgICAgICAgaWYgKHBvbHkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCcwIHBvbHlub21pYWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHBvbHkgaXMgXCIxIDExMTEgMDAxMCAwMTAxXCIgKHZlcnNpb24gaW5mbyBwb2x5KSwgbXNiU2V0SW5Qb2x5IGlzIDEzLiBXZSdsbCBzdWJ0cmFjdCAxXG4gICAgICAgICAgICAvLyBmcm9tIDEzIHRvIG1ha2UgaXQgMTIuXG4gICAgICAgICAgICBjb25zdCBtc2JTZXRJblBvbHkgPSBNYXRyaXhVdGlsLmZpbmRNU0JTZXQocG9seSk7XG4gICAgICAgICAgICB2YWx1ZSA8PD0gbXNiU2V0SW5Qb2x5IC0gMTtcbiAgICAgICAgICAgIC8vIERvIHRoZSBkaXZpc2lvbiBidXNpbmVzcyB1c2luZyBleGNsdXNpdmUtb3Igb3BlcmF0aW9ucy5cbiAgICAgICAgICAgIHdoaWxlIChNYXRyaXhVdGlsLmZpbmRNU0JTZXQodmFsdWUpID49IG1zYlNldEluUG9seSkge1xuICAgICAgICAgICAgICAgIHZhbHVlIF49IHBvbHkgPDwgKE1hdHJpeFV0aWwuZmluZE1TQlNldCh2YWx1ZSkgLSBtc2JTZXRJblBvbHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm93IHRoZSBcInZhbHVlXCIgaXMgdGhlIHJlbWFpbmRlciAoaS5lLiB0aGUgQkNIIGNvZGUpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBiaXQgdmVjdG9yIG9mIHR5cGUgaW5mb3JtYXRpb24uIE9uIHN1Y2Nlc3MsIHN0b3JlIHRoZSByZXN1bHQgaW4gXCJiaXRzXCIgYW5kIHJldHVybiB0cnVlLlxuICAgICAgICAvLyBFbmNvZGUgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCBhbmQgbWFzayBwYXR0ZXJuLiBTZWUgOC45IG9mXG4gICAgICAgIC8vIEpJU1gwNTEwOjIwMDQgKHAuNDUpIGZvciBkZXRhaWxzLlxuICAgICAgICBzdGF0aWMgbWFrZVR5cGVJbmZvQml0cyhlY0xldmVsLCBtYXNrUGF0dGVybiAvKmludCovLCBiaXRzKSB7XG4gICAgICAgICAgICBpZiAoIVFSQ29kZS5pc1ZhbGlkTWFza1BhdHRlcm4obWFza1BhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbignSW52YWxpZCBtYXNrIHBhdHRlcm4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHR5cGVJbmZvID0gKGVjTGV2ZWwuZ2V0Qml0cygpIDw8IDMpIHwgbWFza1BhdHRlcm47XG4gICAgICAgICAgICBiaXRzLmFwcGVuZEJpdHModHlwZUluZm8sIDUpO1xuICAgICAgICAgICAgY29uc3QgYmNoQ29kZSA9IE1hdHJpeFV0aWwuY2FsY3VsYXRlQkNIQ29kZSh0eXBlSW5mbywgTWF0cml4VXRpbC5UWVBFX0lORk9fUE9MWSk7XG4gICAgICAgICAgICBiaXRzLmFwcGVuZEJpdHMoYmNoQ29kZSwgMTApO1xuICAgICAgICAgICAgY29uc3QgbWFza0JpdHMgPSBuZXcgQml0QXJyYXkoKTtcbiAgICAgICAgICAgIG1hc2tCaXRzLmFwcGVuZEJpdHMoTWF0cml4VXRpbC5UWVBFX0lORk9fTUFTS19QQVRURVJOLCAxNSk7XG4gICAgICAgICAgICBiaXRzLnhvcihtYXNrQml0cyk7XG4gICAgICAgICAgICBpZiAoYml0cy5nZXRTaXplKCkgIT09IDE1KSB7IC8vIEp1c3QgaW4gY2FzZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdzaG91bGQgbm90IGhhcHBlbiBidXQgd2UgZ290OiAnICsgYml0cy5nZXRTaXplKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2UgYml0IHZlY3RvciBvZiB2ZXJzaW9uIGluZm9ybWF0aW9uLiBPbiBzdWNjZXNzLCBzdG9yZSB0aGUgcmVzdWx0IGluIFwiYml0c1wiIGFuZCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgLy8gU2VlIDguMTAgb2YgSklTWDA1MTA6MjAwNCAocC40NSkgZm9yIGRldGFpbHMuXG4gICAgICAgIHN0YXRpYyBtYWtlVmVyc2lvbkluZm9CaXRzKHZlcnNpb24sIGJpdHMpIHtcbiAgICAgICAgICAgIGJpdHMuYXBwZW5kQml0cyh2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKSwgNik7XG4gICAgICAgICAgICBjb25zdCBiY2hDb2RlID0gTWF0cml4VXRpbC5jYWxjdWxhdGVCQ0hDb2RlKHZlcnNpb24uZ2V0VmVyc2lvbk51bWJlcigpLCBNYXRyaXhVdGlsLlZFUlNJT05fSU5GT19QT0xZKTtcbiAgICAgICAgICAgIGJpdHMuYXBwZW5kQml0cyhiY2hDb2RlLCAxMik7XG4gICAgICAgICAgICBpZiAoYml0cy5nZXRTaXplKCkgIT09IDE4KSB7IC8vIEp1c3QgaW4gY2FzZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdzaG91bGQgbm90IGhhcHBlbiBidXQgd2UgZ290OiAnICsgYml0cy5nZXRTaXplKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIFwidmFsdWVcIiBpcyBlbXB0eS5cbiAgICAgICAgc3RhdGljIGlzRW1wdHkodmFsdWUgLyppbnQqLykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSAyNTU7IC8vIC0xXG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGVtYmVkVGltaW5nUGF0dGVybnMobWF0cml4KSB7XG4gICAgICAgICAgICAvLyAtOCBpcyBmb3Igc2tpcHBpbmcgcG9zaXRpb24gZGV0ZWN0aW9uIHBhdHRlcm5zICg3OiBzaXplKSwgYW5kIHR3byBob3Jpem9udGFsL3ZlcnRpY2FsXG4gICAgICAgICAgICAvLyBzZXBhcmF0aW9uIHBhdHRlcm5zICgxOiBzaXplKS4gVGh1cywgOCA9IDcgKyAxLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDg7IGkgPCBtYXRyaXguZ2V0V2lkdGgoKSAtIDg7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpdCA9IChpICsgMSkgJSAyO1xuICAgICAgICAgICAgICAgIC8vIEhvcml6b250YWwgbGluZS5cbiAgICAgICAgICAgICAgICBpZiAoTWF0cml4VXRpbC5pc0VtcHR5KG1hdHJpeC5nZXQoaSwgNikpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXROdW1iZXIoaSwgNiwgYml0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVmVydGljYWwgbGluZS5cbiAgICAgICAgICAgICAgICBpZiAoTWF0cml4VXRpbC5pc0VtcHR5KG1hdHJpeC5nZXQoNiwgaSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXROdW1iZXIoNiwgaSwgYml0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW1iZWQgdGhlIGxvbmVseSBkYXJrIGRvdCBhdCBsZWZ0IGJvdHRvbSBjb3JuZXIuIEpJU1gwNTEwOjIwMDQgKHAuNDYpXG4gICAgICAgIHN0YXRpYyBlbWJlZERhcmtEb3RBdExlZnRCb3R0b21Db3JuZXIobWF0cml4KSB7XG4gICAgICAgICAgICBpZiAobWF0cml4LmdldCg4LCBtYXRyaXguZ2V0SGVpZ2h0KCkgLSA4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hdHJpeC5zZXROdW1iZXIoOCwgbWF0cml4LmdldEhlaWdodCgpIC0gOCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGVtYmVkSG9yaXpvbnRhbFNlcGFyYXRpb25QYXR0ZXJuKHhTdGFydCAvKmludCovLCB5U3RhcnQgLyppbnQqLywgbWF0cml4KSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDg7ICsreCkge1xuICAgICAgICAgICAgICAgIGlmICghTWF0cml4VXRpbC5pc0VtcHR5KG1hdHJpeC5nZXQoeFN0YXJ0ICsgeCwgeVN0YXJ0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXRyaXguc2V0TnVtYmVyKHhTdGFydCArIHgsIHlTdGFydCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGVtYmVkVmVydGljYWxTZXBhcmF0aW9uUGF0dGVybih4U3RhcnQgLyppbnQqLywgeVN0YXJ0IC8qaW50Ki8sIG1hdHJpeCkge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCA3OyArK3kpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU1hdHJpeFV0aWwuaXNFbXB0eShtYXRyaXguZ2V0KHhTdGFydCwgeVN0YXJ0ICsgeSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWF0cml4LnNldE51bWJlcih4U3RhcnQsIHlTdGFydCArIHksIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBlbWJlZFBvc2l0aW9uQWRqdXN0bWVudFBhdHRlcm4oeFN0YXJ0IC8qaW50Ki8sIHlTdGFydCAvKmludCovLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgNTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0dGVyblkgPSBNYXRyaXhVdGlsLlBPU0lUSU9OX0FESlVTVE1FTlRfUEFUVEVSTlt5XTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDU7ICsreCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0TnVtYmVyKHhTdGFydCArIHgsIHlTdGFydCArIHksIHBhdHRlcm5ZW3hdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGVtYmVkUG9zaXRpb25EZXRlY3Rpb25QYXR0ZXJuKHhTdGFydCAvKmludCovLCB5U3RhcnQgLyppbnQqLywgbWF0cml4KSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IDc7ICsreSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm5ZID0gTWF0cml4VXRpbC5QT1NJVElPTl9ERVRFQ1RJT05fUEFUVEVSTlt5XTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDc7ICsreCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0TnVtYmVyKHhTdGFydCArIHgsIHlTdGFydCArIHksIHBhdHRlcm5ZW3hdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW1iZWQgcG9zaXRpb24gZGV0ZWN0aW9uIHBhdHRlcm5zIGFuZCBzdXJyb3VuZGluZyB2ZXJ0aWNhbC9ob3Jpem9udGFsIHNlcGFyYXRvcnMuXG4gICAgICAgIHN0YXRpYyBlbWJlZFBvc2l0aW9uRGV0ZWN0aW9uUGF0dGVybnNBbmRTZXBhcmF0b3JzKG1hdHJpeCkge1xuICAgICAgICAgICAgLy8gRW1iZWQgdGhyZWUgYmlnIHNxdWFyZXMgYXQgY29ybmVycy5cbiAgICAgICAgICAgIGNvbnN0IHBkcFdpZHRoID0gTWF0cml4VXRpbC5QT1NJVElPTl9ERVRFQ1RJT05fUEFUVEVSTlswXS5sZW5ndGg7XG4gICAgICAgICAgICAvLyBMZWZ0IHRvcCBjb3JuZXIuXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkUG9zaXRpb25EZXRlY3Rpb25QYXR0ZXJuKDAsIDAsIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBSaWdodCB0b3AgY29ybmVyLlxuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZFBvc2l0aW9uRGV0ZWN0aW9uUGF0dGVybihtYXRyaXguZ2V0V2lkdGgoKSAtIHBkcFdpZHRoLCAwLCBtYXRyaXgpO1xuICAgICAgICAgICAgLy8gTGVmdCBib3R0b20gY29ybmVyLlxuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZFBvc2l0aW9uRGV0ZWN0aW9uUGF0dGVybigwLCBtYXRyaXguZ2V0V2lkdGgoKSAtIHBkcFdpZHRoLCBtYXRyaXgpO1xuICAgICAgICAgICAgLy8gRW1iZWQgaG9yaXpvbnRhbCBzZXBhcmF0aW9uIHBhdHRlcm5zIGFyb3VuZCB0aGUgc3F1YXJlcy5cbiAgICAgICAgICAgIGNvbnN0IGhzcFdpZHRoID0gODtcbiAgICAgICAgICAgIC8vIExlZnQgdG9wIGNvcm5lci5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwuZW1iZWRIb3Jpem9udGFsU2VwYXJhdGlvblBhdHRlcm4oMCwgaHNwV2lkdGggLSAxLCBtYXRyaXgpO1xuICAgICAgICAgICAgLy8gUmlnaHQgdG9wIGNvcm5lci5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwuZW1iZWRIb3Jpem9udGFsU2VwYXJhdGlvblBhdHRlcm4obWF0cml4LmdldFdpZHRoKCkgLSBoc3BXaWR0aCwgaHNwV2lkdGggLSAxLCBtYXRyaXgpO1xuICAgICAgICAgICAgLy8gTGVmdCBib3R0b20gY29ybmVyLlxuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZEhvcml6b250YWxTZXBhcmF0aW9uUGF0dGVybigwLCBtYXRyaXguZ2V0V2lkdGgoKSAtIGhzcFdpZHRoLCBtYXRyaXgpO1xuICAgICAgICAgICAgLy8gRW1iZWQgdmVydGljYWwgc2VwYXJhdGlvbiBwYXR0ZXJucyBhcm91bmQgdGhlIHNxdWFyZXMuXG4gICAgICAgICAgICBjb25zdCB2c3BTaXplID0gNztcbiAgICAgICAgICAgIC8vIExlZnQgdG9wIGNvcm5lci5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwuZW1iZWRWZXJ0aWNhbFNlcGFyYXRpb25QYXR0ZXJuKHZzcFNpemUsIDAsIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBSaWdodCB0b3AgY29ybmVyLlxuICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZFZlcnRpY2FsU2VwYXJhdGlvblBhdHRlcm4obWF0cml4LmdldEhlaWdodCgpIC0gdnNwU2l6ZSAtIDEsIDAsIG1hdHJpeCk7XG4gICAgICAgICAgICAvLyBMZWZ0IGJvdHRvbSBjb3JuZXIuXG4gICAgICAgICAgICBNYXRyaXhVdGlsLmVtYmVkVmVydGljYWxTZXBhcmF0aW9uUGF0dGVybih2c3BTaXplLCBtYXRyaXguZ2V0SGVpZ2h0KCkgLSB2c3BTaXplLCBtYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVtYmVkIHBvc2l0aW9uIGFkanVzdG1lbnQgcGF0dGVybnMgaWYgbmVlZCBiZS5cbiAgICAgICAgc3RhdGljIG1heWJlRW1iZWRQb3NpdGlvbkFkanVzdG1lbnRQYXR0ZXJucyh2ZXJzaW9uLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKSA8IDIpIHsgLy8gVGhlIHBhdHRlcm5zIGFwcGVhciBpZiB2ZXJzaW9uID49IDJcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHZlcnNpb24uZ2V0VmVyc2lvbk51bWJlcigpIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gTWF0cml4VXRpbC5QT1NJVElPTl9BREpVU1RNRU5UX1BBVFRFUk5fQ09PUkRJTkFURV9UQUJMRVtpbmRleF07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpICE9PSBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoeSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBsZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IGNvb3JkaW5hdGVzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPj0gMCAmJiBNYXRyaXhVdGlsLmlzRW1wdHkobWF0cml4LmdldCh4LCB5KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2VsbCBpcyB1bnNldCwgd2UgZW1iZWQgdGhlIHBvc2l0aW9uIGFkanVzdG1lbnQgcGF0dGVybiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0yIGlzIG5lY2Vzc2FyeSBzaW5jZSB0aGUgeC95IGNvb3JkaW5hdGVzIHBvaW50IHRvIHRoZSBjZW50ZXIgb2YgdGhlIHBhdHRlcm4sIG5vdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWZ0IHRvcCBjb3JuZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4VXRpbC5lbWJlZFBvc2l0aW9uQWRqdXN0bWVudFBhdHRlcm4oeCAtIDIsIHkgLSAyLCBtYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIE1hdHJpeFV0aWwuUE9TSVRJT05fREVURUNUSU9OX1BBVFRFUk4gPSBBcnJheS5mcm9tKFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAxLCAxLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMCwgMCwgMCwgMCwgMCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDAsIDEsIDEsIDEsIDAsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAwLCAxLCAxLCAxLCAwLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMCwgMSwgMSwgMSwgMCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDAsIDAsIDAsIDAsIDAsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAxLCAxLCAxLCAxXSksXG4gICAgXSk7XG4gICAgTWF0cml4VXRpbC5QT1NJVElPTl9BREpVU1RNRU5UX1BBVFRFUk4gPSBBcnJheS5mcm9tKFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAxLCAxLCAxLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMCwgMCwgMCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzEsIDAsIDEsIDAsIDFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsxLCAwLCAwLCAwLCAxXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgMSwgMSwgMSwgMV0pLFxuICAgIF0pO1xuICAgIC8vIEZyb20gQXBwZW5kaXggRS4gVGFibGUgMSwgSklTMDUxMFg6MjAwNCAoNzE6IHApLiBUaGUgdGFibGUgd2FzIGRvdWJsZS1jaGVja2VkIGJ5IGtvbWF0c3UuXG4gICAgTWF0cml4VXRpbC5QT1NJVElPTl9BREpVU1RNRU5UX1BBVFRFUk5fQ09PUkRJTkFURV9UQUJMRSA9IEFycmF5LmZyb20oW1xuICAgICAgICBJbnQzMkFycmF5LmZyb20oWy0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMTgsIC0xLCAtMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDIyLCAtMSwgLTEsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgLTEsIC0xLCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIC0xLCAtMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCAtMSwgLTEsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyMiwgMzgsIC0xLCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDQyLCAtMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA0NiwgLTEsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyOCwgNTAsIC0xLCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCAtMSwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDMyLCA1OCwgLTEsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIC0xLCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2LCA2NiwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA0OCwgNzAsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OCwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODIsIC0xLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAtMSwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgLTEsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0LCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OCwgMTAyLCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyOCwgNTQsIDgwLCAxMDYsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDMyLCA1OCwgODQsIDExMCwgLTEsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAtMSwgLTFdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwLCAxMTgsIC0xLCAtMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4LCAxMjIsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjYsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDUyLCA3OCwgMTA0LCAxMzAsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU2LCA4MiwgMTA4LCAxMzQsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzgsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDIsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDYsIC0xXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OCwgMTAyLCAxMjYsIDE1MF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI0LCA1MCwgNzYsIDEwMiwgMTI4LCAxNTRdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAyOCwgNTQsIDgwLCAxMDYsIDEzMiwgMTU4XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4LCA4NCwgMTEwLCAxMzYsIDE2Ml0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksXG4gICAgXSk7XG4gICAgLy8gVHlwZSBpbmZvIGNlbGxzIGF0IHRoZSBsZWZ0IHRvcCBjb3JuZXIuXG4gICAgTWF0cml4VXRpbC5UWVBFX0lORk9fQ09PUkRJTkFURVMgPSBBcnJheS5mcm9tKFtcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs4LCAwXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbOCwgMV0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzgsIDJdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs4LCAzXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbOCwgNF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzgsIDVdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs4LCA3XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbOCwgOF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzcsIDhdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFs1LCA4XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbNCwgOF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzMsIDhdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFsyLCA4XSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbMSwgOF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oWzAsIDhdKSxcbiAgICBdKTtcbiAgICAvLyBGcm9tIEFwcGVuZGl4IEQgaW4gSklTWDA1MTA6MjAwNCAocC4gNjcpXG4gICAgTWF0cml4VXRpbC5WRVJTSU9OX0lORk9fUE9MWSA9IDB4MWYyNTsgLy8gMSAxMTExIDAwMTAgMDEwMVxuICAgIC8vIEZyb20gQXBwZW5kaXggQyBpbiBKSVNYMDUxMDoyMDA0IChwLjY1KS5cbiAgICBNYXRyaXhVdGlsLlRZUEVfSU5GT19QT0xZID0gMHg1Mzc7XG4gICAgTWF0cml4VXRpbC5UWVBFX0lORk9fTUFTS19QQVRURVJOID0gMHg1NDEyO1xuXG4gICAgLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZW5jb2RlciB7Ki9cbiAgICBjbGFzcyBCbG9ja1BhaXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihkYXRhQnl0ZXMsIGVycm9yQ29ycmVjdGlvbkJ5dGVzKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFCeXRlcyA9IGRhdGFCeXRlcztcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDb3JyZWN0aW9uQnl0ZXMgPSBlcnJvckNvcnJlY3Rpb25CeXRlcztcbiAgICAgICAgfVxuICAgICAgICBnZXREYXRhQnl0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RXJyb3JDb3JyZWN0aW9uQnl0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25CeXRlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki9cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsqL1xuICAgIC8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki9cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yIHNhdG9ydXhAZ29vZ2xlLmNvbSAoU2F0b3J1IFRha2FiYXlhc2hpKSAtIGNyZWF0b3JcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKSAtIHBvcnRlZCBmcm9tIEMrK1xuICAgICAqL1xuICAgIGNsYXNzIEVuY29kZXIge1xuICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0byBVVEY4LCB0aGUgZGVmYXVsdCBmb3IganNcbiAgICAgICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICAgICAgLy8gVGhlIG1hc2sgcGVuYWx0eSBjYWxjdWxhdGlvbiBpcyBjb21wbGljYXRlZC4gIFNlZSBUYWJsZSAyMSBvZiBKSVNYMDUxMDoyMDA0IChwLjQ1KSBmb3IgZGV0YWlscy5cbiAgICAgICAgLy8gQmFzaWNhbGx5IGl0IGFwcGxpZXMgZm91ciBydWxlcyBhbmQgc3VtbWF0ZSBhbGwgcGVuYWx0aWVzLlxuICAgICAgICBzdGF0aWMgY2FsY3VsYXRlTWFza1BlbmFsdHkobWF0cml4KSB7XG4gICAgICAgICAgICByZXR1cm4gTWFza1V0aWwuYXBwbHlNYXNrUGVuYWx0eVJ1bGUxKG1hdHJpeClcbiAgICAgICAgICAgICAgICArIE1hc2tVdGlsLmFwcGx5TWFza1BlbmFsdHlSdWxlMihtYXRyaXgpXG4gICAgICAgICAgICAgICAgKyBNYXNrVXRpbC5hcHBseU1hc2tQZW5hbHR5UnVsZTMobWF0cml4KVxuICAgICAgICAgICAgICAgICsgTWFza1V0aWwuYXBwbHlNYXNrUGVuYWx0eVJ1bGU0KG1hdHJpeCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSBjb250ZW50IHRleHQgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwgdG8gdXNlXG4gICAgICAgICAqIEByZXR1cm4ge0BsaW5rIFFSQ29kZX0gcmVwcmVzZW50aW5nIHRoZSBlbmNvZGVkIFFSIGNvZGVcbiAgICAgICAgICogQHRocm93cyBXcml0ZXJFeGNlcHRpb24gaWYgZW5jb2RpbmcgY2FuJ3Qgc3VjY2VlZCwgYmVjYXVzZSBvZiBmb3IgZXhhbXBsZSBpbnZhbGlkIGNvbnRlbnRcbiAgICAgICAgICogICBvciBjb25maWd1cmF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIGVuY29kZShjb250ZW50OiBzdHJpbmcsIGVjTGV2ZWw6IEVycm9yQ29ycmVjdGlvbkxldmVsKTogUVJDb2RlIC8qdGhyb3dzIFdyaXRlckV4Y2VwdGlvbiovIHtcbiAgICAgICAgLy8gICByZXR1cm4gZW5jb2RlKGNvbnRlbnQsIGVjTGV2ZWwsIG51bGwpXG4gICAgICAgIC8vIH1cbiAgICAgICAgc3RhdGljIGVuY29kZShjb250ZW50LCBlY0xldmVsLCBoaW50cyA9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIERldGVybWluZSB3aGF0IGNoYXJhY3RlciBlbmNvZGluZyBoYXMgYmVlbiBzcGVjaWZpZWQgYnkgdGhlIGNhbGxlciwgaWYgYW55XG4gICAgICAgICAgICBsZXQgZW5jb2RpbmcgPSBFbmNvZGVyLkRFRkFVTFRfQllURV9NT0RFX0VOQ09ESU5HO1xuICAgICAgICAgICAgY29uc3QgaGFzRW5jb2RpbmdIaW50ID0gaGludHMgIT09IG51bGwgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5DSEFSQUNURVJfU0VUKTtcbiAgICAgICAgICAgIGlmIChoYXNFbmNvZGluZ0hpbnQpIHtcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9IGhpbnRzLmdldChFbmNvZGVIaW50VHlwZSQxLkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQaWNrIGFuIGVuY29kaW5nIG1vZGUgYXBwcm9wcmlhdGUgZm9yIHRoZSBjb250ZW50LiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCBhdHRlbXB0IHRvIHVzZVxuICAgICAgICAgICAgLy8gbXVsdGlwbGUgbW9kZXMgLyBzZWdtZW50cyBldmVuIGlmIHRoYXQgd2VyZSBtb3JlIGVmZmljaWVudC4gVHdvdWxkIGJlIG5pY2UuXG4gICAgICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5jaG9vc2VNb2RlKGNvbnRlbnQsIGVuY29kaW5nKTtcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzdG9yZSB0aGUgaGVhZGVyIGluZm9ybWF0aW9uLCBsaWtlIG1vZGUgYW5kXG4gICAgICAgICAgICAvLyBsZW5ndGgsIGFzIHdlbGwgYXMgXCJoZWFkZXJcIiBzZWdtZW50cyBsaWtlIGFuIEVDSSBzZWdtZW50LlxuICAgICAgICAgICAgY29uc3QgaGVhZGVyQml0cyA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgLy8gQXBwZW5kIEVDSSBzZWdtZW50IGlmIGFwcGxpY2FibGVcbiAgICAgICAgICAgIGlmIChtb2RlID09PSBNb2RlJDEuQllURSAmJiAoaGFzRW5jb2RpbmdIaW50IHx8IEVuY29kZXIuREVGQVVMVF9CWVRFX01PREVfRU5DT0RJTkcgIT09IGVuY29kaW5nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVjaSA9IENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUoZW5jb2RpbmcpO1xuICAgICAgICAgICAgICAgIGlmIChlY2kgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEVDSShlY2ksIGhlYWRlckJpdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIChXaXRoIEVDSSBpbiBwbGFjZSwpIFdyaXRlIHRoZSBtb2RlIG1hcmtlclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRNb2RlSW5mbyhtb2RlLCBoZWFkZXJCaXRzKTtcbiAgICAgICAgICAgIC8vIENvbGxlY3QgZGF0YSB3aXRoaW4gdGhlIG1haW4gc2VnbWVudCwgc2VwYXJhdGVseSwgdG8gY291bnQgaXRzIHNpemUgaWYgbmVlZGVkLiBEb24ndCBhZGQgaXQgdG9cbiAgICAgICAgICAgIC8vIG1haW4gcGF5bG9hZCB5ZXQuXG4gICAgICAgICAgICBjb25zdCBkYXRhQml0cyA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRCeXRlcyhjb250ZW50LCBtb2RlLCBkYXRhQml0cywgZW5jb2RpbmcpO1xuICAgICAgICAgICAgbGV0IHZlcnNpb247XG4gICAgICAgICAgICBpZiAoaGludHMgIT09IG51bGwgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5RUl9WRVJTSU9OKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb25OdW1iZXIgPSBOdW1iZXIucGFyc2VJbnQoaGludHMuZ2V0KEVuY29kZUhpbnRUeXBlJDEuUVJfVkVSU0lPTikudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIHZlcnNpb24gPSBWZXJzaW9uJDEuZ2V0VmVyc2lvbkZvck51bWJlcih2ZXJzaW9uTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiaXRzTmVlZGVkID0gdGhpcy5jYWxjdWxhdGVCaXRzTmVlZGVkKG1vZGUsIGhlYWRlckJpdHMsIGRhdGFCaXRzLCB2ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2lsbEZpdChiaXRzTmVlZGVkLCB2ZXJzaW9uLCBlY0xldmVsKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdEYXRhIHRvbyBiaWcgZm9yIHJlcXVlc3RlZCB2ZXJzaW9uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbiA9IHRoaXMucmVjb21tZW5kVmVyc2lvbihlY0xldmVsLCBtb2RlLCBoZWFkZXJCaXRzLCBkYXRhQml0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJBbmREYXRhQml0cyA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgaGVhZGVyQW5kRGF0YUJpdHMuYXBwZW5kQml0QXJyYXkoaGVhZGVyQml0cyk7XG4gICAgICAgICAgICAvLyBGaW5kIFwibGVuZ3RoXCIgb2YgbWFpbiBzZWdtZW50IGFuZCB3cml0ZSBpdFxuICAgICAgICAgICAgY29uc3QgbnVtTGV0dGVycyA9IG1vZGUgPT09IE1vZGUkMS5CWVRFID8gZGF0YUJpdHMuZ2V0U2l6ZUluQnl0ZXMoKSA6IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRMZW5ndGhJbmZvKG51bUxldHRlcnMsIHZlcnNpb24sIG1vZGUsIGhlYWRlckFuZERhdGFCaXRzKTtcbiAgICAgICAgICAgIC8vIFB1dCBkYXRhIHRvZ2V0aGVyIGludG8gdGhlIG92ZXJhbGwgcGF5bG9hZFxuICAgICAgICAgICAgaGVhZGVyQW5kRGF0YUJpdHMuYXBwZW5kQml0QXJyYXkoZGF0YUJpdHMpO1xuICAgICAgICAgICAgY29uc3QgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7XG4gICAgICAgICAgICBjb25zdCBudW1EYXRhQnl0ZXMgPSB2ZXJzaW9uLmdldFRvdGFsQ29kZXdvcmRzKCkgLSBlY0Jsb2Nrcy5nZXRUb3RhbEVDQ29kZXdvcmRzKCk7XG4gICAgICAgICAgICAvLyBUZXJtaW5hdGUgdGhlIGJpdHMgcHJvcGVybHkuXG4gICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZUJpdHMobnVtRGF0YUJ5dGVzLCBoZWFkZXJBbmREYXRhQml0cyk7XG4gICAgICAgICAgICAvLyBJbnRlcmxlYXZlIGRhdGEgYml0cyB3aXRoIGVycm9yIGNvcnJlY3Rpb24gY29kZS5cbiAgICAgICAgICAgIGNvbnN0IGZpbmFsQml0cyA9IHRoaXMuaW50ZXJsZWF2ZVdpdGhFQ0J5dGVzKGhlYWRlckFuZERhdGFCaXRzLCB2ZXJzaW9uLmdldFRvdGFsQ29kZXdvcmRzKCksIG51bURhdGFCeXRlcywgZWNCbG9ja3MuZ2V0TnVtQmxvY2tzKCkpO1xuICAgICAgICAgICAgY29uc3QgcXJDb2RlID0gbmV3IFFSQ29kZSgpO1xuICAgICAgICAgICAgcXJDb2RlLnNldEVDTGV2ZWwoZWNMZXZlbCk7XG4gICAgICAgICAgICBxckNvZGUuc2V0TW9kZShtb2RlKTtcbiAgICAgICAgICAgIHFyQ29kZS5zZXRWZXJzaW9uKHZlcnNpb24pO1xuICAgICAgICAgICAgLy8gIENob29zZSB0aGUgbWFzayBwYXR0ZXJuIGFuZCBzZXQgdG8gXCJxckNvZGVcIi5cbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpO1xuICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gbmV3IEJ5dGVNYXRyaXgoZGltZW5zaW9uLCBkaW1lbnNpb24pO1xuICAgICAgICAgICAgY29uc3QgbWFza1BhdHRlcm4gPSB0aGlzLmNob29zZU1hc2tQYXR0ZXJuKGZpbmFsQml0cywgZWNMZXZlbCwgdmVyc2lvbiwgbWF0cml4KTtcbiAgICAgICAgICAgIHFyQ29kZS5zZXRNYXNrUGF0dGVybihtYXNrUGF0dGVybik7XG4gICAgICAgICAgICAvLyBCdWlsZCB0aGUgbWF0cml4IGFuZCBzZXQgaXQgdG8gXCJxckNvZGVcIi5cbiAgICAgICAgICAgIE1hdHJpeFV0aWwuYnVpbGRNYXRyaXgoZmluYWxCaXRzLCBlY0xldmVsLCB2ZXJzaW9uLCBtYXNrUGF0dGVybiwgbWF0cml4KTtcbiAgICAgICAgICAgIHFyQ29kZS5zZXRNYXRyaXgobWF0cml4KTtcbiAgICAgICAgICAgIHJldHVybiBxckNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY2lkZXMgdGhlIHNtYWxsZXN0IHZlcnNpb24gb2YgUVIgY29kZSB0aGF0IHdpbGwgY29udGFpbiBhbGwgb2YgdGhlIHByb3ZpZGVkIGRhdGEuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0aHJvd3MgV3JpdGVyRXhjZXB0aW9uIGlmIHRoZSBkYXRhIGNhbm5vdCBmaXQgaW4gYW55IHZlcnNpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyByZWNvbW1lbmRWZXJzaW9uKGVjTGV2ZWwsIG1vZGUsIGhlYWRlckJpdHMsIGRhdGFCaXRzKSB7XG4gICAgICAgICAgICAvLyBIYXJkIHBhcnQ6IG5lZWQgdG8ga25vdyB2ZXJzaW9uIHRvIGtub3cgaG93IG1hbnkgYml0cyBsZW5ndGggdGFrZXMuIEJ1dCBuZWVkIHRvIGtub3cgaG93IG1hbnlcbiAgICAgICAgICAgIC8vIGJpdHMgaXQgdGFrZXMgdG8ga25vdyB2ZXJzaW9uLiBGaXJzdCB3ZSB0YWtlIGEgZ3Vlc3MgYXQgdmVyc2lvbiBieSBhc3N1bWluZyB2ZXJzaW9uIHdpbGwgYmVcbiAgICAgICAgICAgIC8vIHRoZSBtaW5pbXVtLCAxOlxuICAgICAgICAgICAgY29uc3QgcHJvdmlzaW9uYWxCaXRzTmVlZGVkID0gdGhpcy5jYWxjdWxhdGVCaXRzTmVlZGVkKG1vZGUsIGhlYWRlckJpdHMsIGRhdGFCaXRzLCBWZXJzaW9uJDEuZ2V0VmVyc2lvbkZvck51bWJlcigxKSk7XG4gICAgICAgICAgICBjb25zdCBwcm92aXNpb25hbFZlcnNpb24gPSB0aGlzLmNob29zZVZlcnNpb24ocHJvdmlzaW9uYWxCaXRzTmVlZGVkLCBlY0xldmVsKTtcbiAgICAgICAgICAgIC8vIFVzZSB0aGF0IGd1ZXNzIHRvIGNhbGN1bGF0ZSB0aGUgcmlnaHQgdmVyc2lvbi4gSSBhbSBzdGlsbCBub3Qgc3VyZSB0aGlzIHdvcmtzIGluIDEwMCUgb2YgY2FzZXMuXG4gICAgICAgICAgICBjb25zdCBiaXRzTmVlZGVkID0gdGhpcy5jYWxjdWxhdGVCaXRzTmVlZGVkKG1vZGUsIGhlYWRlckJpdHMsIGRhdGFCaXRzLCBwcm92aXNpb25hbFZlcnNpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hvb3NlVmVyc2lvbihiaXRzTmVlZGVkLCBlY0xldmVsKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY2FsY3VsYXRlQml0c05lZWRlZChtb2RlLCBoZWFkZXJCaXRzLCBkYXRhQml0cywgdmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlckJpdHMuZ2V0U2l6ZSgpICsgbW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikgKyBkYXRhQml0cy5nZXRTaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gdGhlIGNvZGUgcG9pbnQgb2YgdGhlIHRhYmxlIHVzZWQgaW4gYWxwaGFudW1lcmljIG1vZGUgb3JcbiAgICAgICAgICogIC0xIGlmIHRoZXJlIGlzIG5vIGNvcnJlc3BvbmRpbmcgY29kZSBpbiB0aGUgdGFibGUuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0QWxwaGFudW1lcmljQ29kZShjb2RlIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGlmIChjb2RlIDwgRW5jb2Rlci5BTFBIQU5VTUVSSUNfVEFCTEUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVuY29kZXIuQUxQSEFOVU1FUklDX1RBQkxFW2NvZGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgY2hvb3NlTW9kZShjb250ZW50OiBzdHJpbmcpOiBNb2RlIHtcbiAgICAgICAgLy8gICByZXR1cm4gY2hvb3NlTW9kZShjb250ZW50LCBudWxsKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hvb3NlIHRoZSBiZXN0IG1vZGUgYnkgZXhhbWluaW5nIHRoZSBjb250ZW50LiBOb3RlIHRoYXQgJ2VuY29kaW5nJyBpcyB1c2VkIGFzIGEgaGludDtcbiAgICAgICAgICogaWYgaXQgaXMgU2hpZnRfSklTLCBhbmQgdGhlIGlucHV0IGlzIG9ubHkgZG91YmxlLWJ5dGUgS2FuamksIHRoZW4gd2UgcmV0dXJuIHtAbGluayBNb2RlI0tBTkpJfS5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBjaG9vc2VNb2RlKGNvbnRlbnQsIGVuY29kaW5nID0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKENoYXJhY3RlclNldEVDSS5TSklTLmdldE5hbWUoKSA9PT0gZW5jb2RpbmcgJiYgdGhpcy5pc09ubHlEb3VibGVCeXRlS2FuamkoY29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAvLyBDaG9vc2UgS2FuamkgbW9kZSBpZiBhbGwgaW5wdXQgYXJlIGRvdWJsZS1ieXRlIGNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kZSQxLktBTkpJO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGhhc051bWVyaWMgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBoYXNBbHBoYW51bWVyaWMgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBjb250ZW50Lmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbnRlbnQuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChFbmNvZGVyLmlzRGlnaXQoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzTnVtZXJpYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ2V0QWxwaGFudW1lcmljQ29kZShjLmNoYXJDb2RlQXQoMCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBoYXNBbHBoYW51bWVyaWMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZGUkMS5CWVRFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNBbHBoYW51bWVyaWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kZSQxLkFMUEhBTlVNRVJJQztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNOdW1lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZGUkMS5OVU1FUklDO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIE1vZGUkMS5CWVRFO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBpc09ubHlEb3VibGVCeXRlS2FuamkoY29udGVudCkge1xuICAgICAgICAgICAgbGV0IGJ5dGVzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBieXRlcyA9IFN0cmluZ0VuY29kaW5nLmVuY29kZShjb250ZW50LCBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyk7IC8vIGNvbnRlbnQuZ2V0Qnl0ZXMoXCJTaGlmdF9KSVNcIikpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBieXRlc1tpXSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgaWYgKChieXRlMSA8IDB4ODEgfHwgYnl0ZTEgPiAweDlGKSAmJiAoYnl0ZTEgPCAweEUwIHx8IGJ5dGUxID4gMHhFQikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBjaG9vc2VNYXNrUGF0dGVybihiaXRzLCBlY0xldmVsLCB2ZXJzaW9uLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIGxldCBtaW5QZW5hbHR5ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7IC8vIExvd2VyIHBlbmFsdHkgaXMgYmV0dGVyLlxuICAgICAgICAgICAgbGV0IGJlc3RNYXNrUGF0dGVybiA9IC0xO1xuICAgICAgICAgICAgLy8gV2UgdHJ5IGFsbCBtYXNrIHBhdHRlcm5zIHRvIGNob29zZSB0aGUgYmVzdCBvbmUuXG4gICAgICAgICAgICBmb3IgKGxldCBtYXNrUGF0dGVybiA9IDA7IG1hc2tQYXR0ZXJuIDwgUVJDb2RlLk5VTV9NQVNLX1BBVFRFUk5TOyBtYXNrUGF0dGVybisrKSB7XG4gICAgICAgICAgICAgICAgTWF0cml4VXRpbC5idWlsZE1hdHJpeChiaXRzLCBlY0xldmVsLCB2ZXJzaW9uLCBtYXNrUGF0dGVybiwgbWF0cml4KTtcbiAgICAgICAgICAgICAgICBsZXQgcGVuYWx0eSA9IHRoaXMuY2FsY3VsYXRlTWFza1BlbmFsdHkobWF0cml4KTtcbiAgICAgICAgICAgICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUGVuYWx0eSA9IHBlbmFsdHk7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RNYXNrUGF0dGVybiA9IG1hc2tQYXR0ZXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBiZXN0TWFza1BhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGNob29zZVZlcnNpb24obnVtSW5wdXRCaXRzIC8qaW50Ki8sIGVjTGV2ZWwpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHZlcnNpb25OdW0gPSAxOyB2ZXJzaW9uTnVtIDw9IDQwOyB2ZXJzaW9uTnVtKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gVmVyc2lvbiQxLmdldFZlcnNpb25Gb3JOdW1iZXIodmVyc2lvbk51bSk7XG4gICAgICAgICAgICAgICAgaWYgKEVuY29kZXIud2lsbEZpdChudW1JbnB1dEJpdHMsIHZlcnNpb24sIGVjTGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oJ0RhdGEgdG9vIGJpZycpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIG51bWJlciBvZiBpbnB1dCBiaXRzIHdpbGwgZml0IGluIGEgY29kZSB3aXRoIHRoZSBzcGVjaWZpZWQgdmVyc2lvbiBhbmRcbiAgICAgICAgICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyB3aWxsRml0KG51bUlucHV0Qml0cyAvKmludCovLCB2ZXJzaW9uLCBlY0xldmVsKSB7XG4gICAgICAgICAgICAvLyBJbiB0aGUgZm9sbG93aW5nIGNvbW1lbnRzLCB3ZSB1c2UgbnVtYmVycyBvZiBWZXJzaW9uIDctSC5cbiAgICAgICAgICAgIC8vIG51bUJ5dGVzID0gMTk2XG4gICAgICAgICAgICBjb25zdCBudW1CeXRlcyA9IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIC8vIGdldE51bUVDQnl0ZXMgPSAxMzBcbiAgICAgICAgICAgIGNvbnN0IGVjQmxvY2tzID0gdmVyc2lvbi5nZXRFQ0Jsb2Nrc0ZvckxldmVsKGVjTGV2ZWwpO1xuICAgICAgICAgICAgY29uc3QgbnVtRWNCeXRlcyA9IGVjQmxvY2tzLmdldFRvdGFsRUNDb2Rld29yZHMoKTtcbiAgICAgICAgICAgIC8vIGdldE51bURhdGFCeXRlcyA9IDE5NiAtIDEzMCA9IDY2XG4gICAgICAgICAgICBjb25zdCBudW1EYXRhQnl0ZXMgPSBudW1CeXRlcyAtIG51bUVjQnl0ZXM7XG4gICAgICAgICAgICBjb25zdCB0b3RhbElucHV0Qnl0ZXMgPSAobnVtSW5wdXRCaXRzICsgNykgLyA4O1xuICAgICAgICAgICAgcmV0dXJuIG51bURhdGFCeXRlcyA+PSB0b3RhbElucHV0Qnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRlcm1pbmF0ZSBiaXRzIGFzIGRlc2NyaWJlZCBpbiA4LjQuOCBhbmQgOC40Ljkgb2YgSklTWDA1MTA6MjAwNCAocC4yNCkuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgdGVybWluYXRlQml0cyhudW1EYXRhQnl0ZXMgLyppbnQqLywgYml0cykge1xuICAgICAgICAgICAgY29uc3QgY2FwYWNpdHkgPSBudW1EYXRhQnl0ZXMgKiA4O1xuICAgICAgICAgICAgaWYgKGJpdHMuZ2V0U2l6ZSgpID4gY2FwYWNpdHkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdkYXRhIGJpdHMgY2Fubm90IGZpdCBpbiB0aGUgUVIgQ29kZScgKyBiaXRzLmdldFNpemUoKSArICcgPiAnICtcbiAgICAgICAgICAgICAgICAgICAgY2FwYWNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0ICYmIGJpdHMuZ2V0U2l6ZSgpIDwgY2FwYWNpdHk7ICsraSkge1xuICAgICAgICAgICAgICAgIGJpdHMuYXBwZW5kQml0KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFwcGVuZCB0ZXJtaW5hdGlvbiBiaXRzLiBTZWUgOC40Ljggb2YgSklTWDA1MTA6MjAwNCAocC4yNCkgZm9yIGRldGFpbHMuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbGFzdCBieXRlIGlzbid0IDgtYml0IGFsaWduZWQsIHdlJ2xsIGFkZCBwYWRkaW5nIGJpdHMuXG4gICAgICAgICAgICBjb25zdCBudW1CaXRzSW5MYXN0Qnl0ZSA9IGJpdHMuZ2V0U2l6ZSgpICYgMHgwNztcbiAgICAgICAgICAgIGlmIChudW1CaXRzSW5MYXN0Qnl0ZSA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gbnVtQml0c0luTGFzdEJ5dGU7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbW9yZSBzcGFjZSwgd2UnbGwgZmlsbCB0aGUgc3BhY2Ugd2l0aCBwYWRkaW5nIHBhdHRlcm5zIGRlZmluZWQgaW4gOC40LjkgKHAuMjQpLlxuICAgICAgICAgICAgY29uc3QgbnVtUGFkZGluZ0J5dGVzID0gbnVtRGF0YUJ5dGVzIC0gYml0cy5nZXRTaXplSW5CeXRlcygpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1QYWRkaW5nQnl0ZXM7ICsraSkge1xuICAgICAgICAgICAgICAgIGJpdHMuYXBwZW5kQml0cygoaSAmIDB4MDEpID09PSAwID8gMHhFQyA6IDB4MTEsIDgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJpdHMuZ2V0U2l6ZSgpICE9PSBjYXBhY2l0eSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oJ0JpdHMgc2l6ZSBkb2VzIG5vdCBlcXVhbCBjYXBhY2l0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgbnVtYmVyIG9mIGRhdGEgYnl0ZXMgYW5kIG51bWJlciBvZiBlcnJvciBjb3JyZWN0aW9uIGJ5dGVzIGZvciBibG9jayBpZCBcImJsb2NrSURcIi4gU3RvcmVcbiAgICAgICAgICogdGhlIHJlc3VsdCBpbiBcIm51bURhdGFCeXRlc0luQmxvY2tcIiwgYW5kIFwibnVtRUNCeXRlc0luQmxvY2tcIi4gU2VlIHRhYmxlIDEyIGluIDguNS4xIG9mXG4gICAgICAgICAqIEpJU1gwNTEwOjIwMDQgKHAuMzApXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZ2V0TnVtRGF0YUJ5dGVzQW5kTnVtRUNCeXRlc0ZvckJsb2NrSUQobnVtVG90YWxCeXRlcyAvKmludCovLCBudW1EYXRhQnl0ZXMgLyppbnQqLywgbnVtUlNCbG9ja3MgLyppbnQqLywgYmxvY2tJRCAvKmludCovLCBudW1EYXRhQnl0ZXNJbkJsb2NrLCBudW1FQ0J5dGVzSW5CbG9jaykge1xuICAgICAgICAgICAgaWYgKGJsb2NrSUQgPj0gbnVtUlNCbG9ja3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdCbG9jayBJRCB0b28gbGFyZ2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG51bVJzQmxvY2tzSW5Hcm91cDIgPSAxOTYgJSA1ID0gMVxuICAgICAgICAgICAgY29uc3QgbnVtUnNCbG9ja3NJbkdyb3VwMiA9IG51bVRvdGFsQnl0ZXMgJSBudW1SU0Jsb2NrcztcbiAgICAgICAgICAgIC8vIG51bVJzQmxvY2tzSW5Hcm91cDEgPSA1IC0gMSA9IDRcbiAgICAgICAgICAgIGNvbnN0IG51bVJzQmxvY2tzSW5Hcm91cDEgPSBudW1SU0Jsb2NrcyAtIG51bVJzQmxvY2tzSW5Hcm91cDI7XG4gICAgICAgICAgICAvLyBudW1Ub3RhbEJ5dGVzSW5Hcm91cDEgPSAxOTYgLyA1ID0gMzlcbiAgICAgICAgICAgIGNvbnN0IG51bVRvdGFsQnl0ZXNJbkdyb3VwMSA9IE1hdGguZmxvb3IobnVtVG90YWxCeXRlcyAvIG51bVJTQmxvY2tzKTtcbiAgICAgICAgICAgIC8vIG51bVRvdGFsQnl0ZXNJbkdyb3VwMiA9IDM5ICsgMSA9IDQwXG4gICAgICAgICAgICBjb25zdCBudW1Ub3RhbEJ5dGVzSW5Hcm91cDIgPSBudW1Ub3RhbEJ5dGVzSW5Hcm91cDEgKyAxO1xuICAgICAgICAgICAgLy8gbnVtRGF0YUJ5dGVzSW5Hcm91cDEgPSA2NiAvIDUgPSAxM1xuICAgICAgICAgICAgY29uc3QgbnVtRGF0YUJ5dGVzSW5Hcm91cDEgPSBNYXRoLmZsb29yKG51bURhdGFCeXRlcyAvIG51bVJTQmxvY2tzKTtcbiAgICAgICAgICAgIC8vIG51bURhdGFCeXRlc0luR3JvdXAyID0gMTMgKyAxID0gMTRcbiAgICAgICAgICAgIGNvbnN0IG51bURhdGFCeXRlc0luR3JvdXAyID0gbnVtRGF0YUJ5dGVzSW5Hcm91cDEgKyAxO1xuICAgICAgICAgICAgLy8gbnVtRWNCeXRlc0luR3JvdXAxID0gMzkgLSAxMyA9IDI2XG4gICAgICAgICAgICBjb25zdCBudW1FY0J5dGVzSW5Hcm91cDEgPSBudW1Ub3RhbEJ5dGVzSW5Hcm91cDEgLSBudW1EYXRhQnl0ZXNJbkdyb3VwMTtcbiAgICAgICAgICAgIC8vIG51bUVjQnl0ZXNJbkdyb3VwMiA9IDQwIC0gMTQgPSAyNlxuICAgICAgICAgICAgY29uc3QgbnVtRWNCeXRlc0luR3JvdXAyID0gbnVtVG90YWxCeXRlc0luR3JvdXAyIC0gbnVtRGF0YUJ5dGVzSW5Hcm91cDI7XG4gICAgICAgICAgICAvLyBTYW5pdHkgY2hlY2tzLlxuICAgICAgICAgICAgLy8gMjYgPSAyNlxuICAgICAgICAgICAgaWYgKG51bUVjQnl0ZXNJbkdyb3VwMSAhPT0gbnVtRWNCeXRlc0luR3JvdXAyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbignRUMgYnl0ZXMgbWlzbWF0Y2gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIDUgPSA0ICsgMS5cbiAgICAgICAgICAgIGlmIChudW1SU0Jsb2NrcyAhPT0gbnVtUnNCbG9ja3NJbkdyb3VwMSArIG51bVJzQmxvY2tzSW5Hcm91cDIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdSUyBibG9ja3MgbWlzbWF0Y2gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIDE5NiA9ICgxMyArIDI2KSAqIDQgKyAoMTQgKyAyNikgKiAxXG4gICAgICAgICAgICBpZiAobnVtVG90YWxCeXRlcyAhPT1cbiAgICAgICAgICAgICAgICAoKG51bURhdGFCeXRlc0luR3JvdXAxICsgbnVtRWNCeXRlc0luR3JvdXAxKSAqXG4gICAgICAgICAgICAgICAgICAgIG51bVJzQmxvY2tzSW5Hcm91cDEpICtcbiAgICAgICAgICAgICAgICAgICAgKChudW1EYXRhQnl0ZXNJbkdyb3VwMiArIG51bUVjQnl0ZXNJbkdyb3VwMikgKlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtUnNCbG9ja3NJbkdyb3VwMikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdUb3RhbCBieXRlcyBtaXNtYXRjaCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJsb2NrSUQgPCBudW1Sc0Jsb2Nrc0luR3JvdXAxKSB7XG4gICAgICAgICAgICAgICAgbnVtRGF0YUJ5dGVzSW5CbG9ja1swXSA9IG51bURhdGFCeXRlc0luR3JvdXAxO1xuICAgICAgICAgICAgICAgIG51bUVDQnl0ZXNJbkJsb2NrWzBdID0gbnVtRWNCeXRlc0luR3JvdXAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbnVtRGF0YUJ5dGVzSW5CbG9ja1swXSA9IG51bURhdGFCeXRlc0luR3JvdXAyO1xuICAgICAgICAgICAgICAgIG51bUVDQnl0ZXNJbkJsb2NrWzBdID0gbnVtRWNCeXRlc0luR3JvdXAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcmxlYXZlIFwiYml0c1wiIHdpdGggY29ycmVzcG9uZGluZyBlcnJvciBjb3JyZWN0aW9uIGJ5dGVzLiBPbiBzdWNjZXNzLCBzdG9yZSB0aGUgcmVzdWx0IGluXG4gICAgICAgICAqIFwicmVzdWx0XCIuIFRoZSBpbnRlcmxlYXZlIHJ1bGUgaXMgY29tcGxpY2F0ZWQuIFNlZSA4LjYgb2YgSklTWDA1MTA6MjAwNCAocC4zNykgZm9yIGRldGFpbHMuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgaW50ZXJsZWF2ZVdpdGhFQ0J5dGVzKGJpdHMsIG51bVRvdGFsQnl0ZXMgLyppbnQqLywgbnVtRGF0YUJ5dGVzIC8qaW50Ki8sIG51bVJTQmxvY2tzIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIC8vIFwiYml0c1wiIG11c3QgaGF2ZSBcImdldE51bURhdGFCeXRlc1wiIGJ5dGVzIG9mIGRhdGEuXG4gICAgICAgICAgICBpZiAoYml0cy5nZXRTaXplSW5CeXRlcygpICE9PSBudW1EYXRhQnl0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCdOdW1iZXIgb2YgYml0cyBhbmQgZGF0YSBieXRlcyBkb2VzIG5vdCBtYXRjaCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU3RlcCAxLiAgRGl2aWRlIGRhdGEgYnl0ZXMgaW50byBibG9ja3MgYW5kIGdlbmVyYXRlIGVycm9yIGNvcnJlY3Rpb24gYnl0ZXMgZm9yIHRoZW0uIFdlJ2xsXG4gICAgICAgICAgICAvLyBzdG9yZSB0aGUgZGl2aWRlZCBkYXRhIGJ5dGVzIGJsb2NrcyBhbmQgZXJyb3IgY29ycmVjdGlvbiBieXRlcyBibG9ja3MgaW50byBcImJsb2Nrc1wiLlxuICAgICAgICAgICAgbGV0IGRhdGFCeXRlc09mZnNldCA9IDA7XG4gICAgICAgICAgICBsZXQgbWF4TnVtRGF0YUJ5dGVzID0gMDtcbiAgICAgICAgICAgIGxldCBtYXhOdW1FY0J5dGVzID0gMDtcbiAgICAgICAgICAgIC8vIFNpbmNlLCB3ZSBrbm93IHRoZSBudW1iZXIgb2YgcmVlZHNvbG1vbiBibG9ja3MsIHdlIGNhbiBpbml0aWFsaXplIHRoZSB2ZWN0b3Igd2l0aCB0aGUgbnVtYmVyLlxuICAgICAgICAgICAgY29uc3QgYmxvY2tzID0gbmV3IEFycmF5KCk7IC8vIG5ldyBBcnJheTxCbG9ja1BhaXI+KG51bVJTQmxvY2tzKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1SU0Jsb2NrczsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVtRGF0YUJ5dGVzSW5CbG9jayA9IG5ldyBJbnQzMkFycmF5KDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bUVjQnl0ZXNJbkJsb2NrID0gbmV3IEludDMyQXJyYXkoMSk7XG4gICAgICAgICAgICAgICAgRW5jb2Rlci5nZXROdW1EYXRhQnl0ZXNBbmROdW1FQ0J5dGVzRm9yQmxvY2tJRChudW1Ub3RhbEJ5dGVzLCBudW1EYXRhQnl0ZXMsIG51bVJTQmxvY2tzLCBpLCBudW1EYXRhQnl0ZXNJbkJsb2NrLCBudW1FY0J5dGVzSW5CbG9jayk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IG51bURhdGFCeXRlc0luQmxvY2tbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XG4gICAgICAgICAgICAgICAgYml0cy50b0J5dGVzKDggKiBkYXRhQnl0ZXNPZmZzZXQsIGRhdGFCeXRlcywgMCwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZWNCeXRlcyA9IEVuY29kZXIuZ2VuZXJhdGVFQ0J5dGVzKGRhdGFCeXRlcywgbnVtRWNCeXRlc0luQmxvY2tbMF0pO1xuICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKG5ldyBCbG9ja1BhaXIoZGF0YUJ5dGVzLCBlY0J5dGVzKSk7XG4gICAgICAgICAgICAgICAgbWF4TnVtRGF0YUJ5dGVzID0gTWF0aC5tYXgobWF4TnVtRGF0YUJ5dGVzLCBzaXplKTtcbiAgICAgICAgICAgICAgICBtYXhOdW1FY0J5dGVzID0gTWF0aC5tYXgobWF4TnVtRWNCeXRlcywgZWNCeXRlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGRhdGFCeXRlc09mZnNldCArPSBudW1EYXRhQnl0ZXNJbkJsb2NrWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bURhdGFCeXRlcyAhPT0gZGF0YUJ5dGVzT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbignRGF0YSBieXRlcyBkb2VzIG5vdCBtYXRjaCBvZmZzZXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgLy8gRmlyc3QsIHBsYWNlIGRhdGEgYmxvY2tzLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhOdW1EYXRhQnl0ZXM7ICsraSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2sgb2YgYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFCeXRlcyA9IGJsb2NrLmdldERhdGFCeXRlcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGRhdGFCeXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmRCaXRzKGRhdGFCeXRlc1tpXSwgOCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGVuLCBwbGFjZSBlcnJvciBjb3JyZWN0aW9uIGJsb2Nrcy5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4TnVtRWNCeXRlczsgKytpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBibG9jayBvZiBibG9ja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWNCeXRlcyA9IGJsb2NrLmdldEVycm9yQ29ycmVjdGlvbkJ5dGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZWNCeXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmRCaXRzKGVjQnl0ZXNbaV0sIDgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bVRvdGFsQnl0ZXMgIT09IHJlc3VsdC5nZXRTaXplSW5CeXRlcygpKSB7IC8vIFNob3VsZCBiZSBzYW1lLlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oJ0ludGVybGVhdmluZyBlcnJvcjogJyArIG51bVRvdGFsQnl0ZXMgKyAnIGFuZCAnICtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmdldFNpemVJbkJ5dGVzKCkgKyAnIGRpZmZlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIGdlbmVyYXRlRUNCeXRlcyhkYXRhQnl0ZXMsIG51bUVjQnl0ZXNJbkJsb2NrIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IG51bURhdGFCeXRlcyA9IGRhdGFCeXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCB0b0VuY29kZSA9IG5ldyBJbnQzMkFycmF5KG51bURhdGFCeXRlcyArIG51bUVjQnl0ZXNJbkJsb2NrKTsgLy8gaW50W251bURhdGFCeXRlcyArIG51bUVjQnl0ZXNJbkJsb2NrXVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1EYXRhQnl0ZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIHRvRW5jb2RlW2ldID0gZGF0YUJ5dGVzW2ldICYgMHhGRjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBSZWVkU29sb21vbkVuY29kZXIoR2VuZXJpY0dGLlFSX0NPREVfRklFTERfMjU2KS5lbmNvZGUodG9FbmNvZGUsIG51bUVjQnl0ZXNJbkJsb2NrKTtcbiAgICAgICAgICAgIGNvbnN0IGVjQnl0ZXMgPSBuZXcgVWludDhBcnJheShudW1FY0J5dGVzSW5CbG9jayk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUVjQnl0ZXNJbkJsb2NrOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlY0J5dGVzW2ldID0gLyooYnl0ZSkgKi8gdG9FbmNvZGVbbnVtRGF0YUJ5dGVzICsgaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWNCeXRlcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwZW5kIG1vZGUgaW5mby4gT24gc3VjY2Vzcywgc3RvcmUgdGhlIHJlc3VsdCBpbiBcImJpdHNcIi5cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhcHBlbmRNb2RlSW5mbyhtb2RlLCBiaXRzKSB7XG4gICAgICAgICAgICBiaXRzLmFwcGVuZEJpdHMobW9kZS5nZXRCaXRzKCksIDQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBlbmQgbGVuZ3RoIGluZm8uIE9uIHN1Y2Nlc3MsIHN0b3JlIHRoZSByZXN1bHQgaW4gXCJiaXRzXCIuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgYXBwZW5kTGVuZ3RoSW5mbyhudW1MZXR0ZXJzIC8qaW50Ki8sIHZlcnNpb24sIG1vZGUsIGJpdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bUJpdHMgPSBtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKTtcbiAgICAgICAgICAgIGlmIChudW1MZXR0ZXJzID49ICgxIDw8IG51bUJpdHMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbihudW1MZXR0ZXJzICsgJyBpcyBiaWdnZXIgdGhhbiAnICsgKCgxIDw8IG51bUJpdHMpIC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKG51bUxldHRlcnMsIG51bUJpdHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBlbmQgXCJieXRlc1wiIGluIFwibW9kZVwiIG1vZGUgKGVuY29kaW5nKSBpbnRvIFwiYml0c1wiLiBPbiBzdWNjZXNzLCBzdG9yZSB0aGUgcmVzdWx0IGluIFwiYml0c1wiLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGFwcGVuZEJ5dGVzKGNvbnRlbnQsIG1vZGUsIGJpdHMsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5OVU1FUklDOlxuICAgICAgICAgICAgICAgICAgICBFbmNvZGVyLmFwcGVuZE51bWVyaWNCeXRlcyhjb250ZW50LCBiaXRzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNb2RlJDEuQUxQSEFOVU1FUklDOlxuICAgICAgICAgICAgICAgICAgICBFbmNvZGVyLmFwcGVuZEFscGhhbnVtZXJpY0J5dGVzKGNvbnRlbnQsIGJpdHMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1vZGUkMS5CWVRFOlxuICAgICAgICAgICAgICAgICAgICBFbmNvZGVyLmFwcGVuZDhCaXRCeXRlcyhjb250ZW50LCBiaXRzLCBlbmNvZGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTW9kZSQxLktBTkpJOlxuICAgICAgICAgICAgICAgICAgICBFbmNvZGVyLmFwcGVuZEthbmppQnl0ZXMoY29udGVudCwgYml0cyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oJ0ludmFsaWQgbW9kZTogJyArIG1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXREaWdpdChzaW5nbGVDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGVDaGFyYWN0ZXIuY2hhckNvZGVBdCgwKSAtIDQ4O1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBpc0RpZ2l0KHNpbmdsZUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgY29uc3QgY24gPSBFbmNvZGVyLmdldERpZ2l0KHNpbmdsZUNoYXJhY3Rlcik7XG4gICAgICAgICAgICByZXR1cm4gY24gPj0gMCAmJiBjbiA8PSA5O1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBhcHBlbmROdW1lcmljQnl0ZXMoY29udGVudCwgYml0cykge1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bTEgPSBFbmNvZGVyLmdldERpZ2l0KGNvbnRlbnQuY2hhckF0KGkpKTtcbiAgICAgICAgICAgICAgICBpZiAoaSArIDIgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIHRocmVlIG51bWVyaWMgbGV0dGVycyBpbiB0ZW4gYml0cy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtMiA9IEVuY29kZXIuZ2V0RGlnaXQoY29udGVudC5jaGFyQXQoaSArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtMyA9IEVuY29kZXIuZ2V0RGlnaXQoY29udGVudC5jaGFyQXQoaSArIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKG51bTEgKiAxMDAgKyBudW0yICogMTAgKyBudW0zLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSArIDEgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIHR3byBudW1lcmljIGxldHRlcnMgaW4gc2V2ZW4gYml0cy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtMiA9IEVuY29kZXIuZ2V0RGlnaXQoY29udGVudC5jaGFyQXQoaSArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKG51bTEgKiAxMCArIG51bTIsIDcpO1xuICAgICAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgb25lIG51bWVyaWMgbGV0dGVyIGluIGZvdXIgYml0cy5cbiAgICAgICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKG51bTEsIDQpO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBhcHBlbmRBbHBoYW51bWVyaWNCeXRlcyhjb250ZW50LCBiaXRzKSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBjb250ZW50Lmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZTEgPSBFbmNvZGVyLmdldEFscGhhbnVtZXJpY0NvZGUoY29udGVudC5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICAgICAgICBpZiAoY29kZTEgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUyID0gRW5jb2Rlci5nZXRBbHBoYW51bWVyaWNDb2RlKGNvbnRlbnQuY2hhckNvZGVBdChpICsgMSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZTIgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV3JpdGVyRXhjZXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIHR3byBhbHBoYW51bWVyaWMgbGV0dGVycyBpbiAxMSBiaXRzLlxuICAgICAgICAgICAgICAgICAgICBiaXRzLmFwcGVuZEJpdHMoY29kZTEgKiA0NSArIGNvZGUyLCAxMSk7XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBvbmUgYWxwaGFudW1lcmljIGxldHRlciBpbiBzaXggYml0cy5cbiAgICAgICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKGNvZGUxLCA2KTtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgYXBwZW5kOEJpdEJ5dGVzKGNvbnRlbnQsIGJpdHMsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBsZXQgYnl0ZXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJ5dGVzID0gU3RyaW5nRW5jb2RpbmcuZW5jb2RlKGNvbnRlbnQsIGVuY29kaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoICh1ZWUgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBXcml0ZXJFeGNlcHRpb24odWVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBieXRlcy5sZW5ndGg7IGkgIT09IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IGJ5dGVzW2ldO1xuICAgICAgICAgICAgICAgIGJpdHMuYXBwZW5kQml0cyhiLCA4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHRocm93cyBXcml0ZXJFeGNlcHRpb25cbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBhcHBlbmRLYW5qaUJ5dGVzKGNvbnRlbnQsIGJpdHMpIHtcbiAgICAgICAgICAgIGxldCBieXRlcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYnl0ZXMgPSBTdHJpbmdFbmNvZGluZy5lbmNvZGUoY29udGVudCwgQ2hhcmFjdGVyU2V0RUNJLlNKSVMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKHVlZSAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbih1ZWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gYnl0ZXNbaV0gJiAweEZGO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gYnl0ZXNbaSArIDFdICYgMHhGRjtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gKChieXRlMSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgYnl0ZTI7XG4gICAgICAgICAgICAgICAgbGV0IHN1YnRyYWN0ZWQgPSAtMTtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA+PSAweDgxNDAgJiYgY29kZSA8PSAweDlmZmMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VidHJhY3RlZCA9IGNvZGUgLSAweDgxNDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPj0gMHhlMDQwICYmIGNvZGUgPD0gMHhlYmJmKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnRyYWN0ZWQgPSBjb2RlIC0gMHhjMTQwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3VidHJhY3RlZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdyaXRlckV4Y2VwdGlvbignSW52YWxpZCBieXRlIHNlcXVlbmNlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWQgPSAoKHN1YnRyYWN0ZWQgPj4gOCkgKiAweGMwKSArIChzdWJ0cmFjdGVkICYgMHhmZik7XG4gICAgICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKGVuY29kZWQsIDEzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgYXBwZW5kRUNJKGVjaSwgYml0cykge1xuICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKE1vZGUkMS5FQ0kuZ2V0Qml0cygpLCA0KTtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgY29ycmVjdCBmb3IgdmFsdWVzIHVwIHRvIDEyNywgd2hpY2ggaXMgYWxsIHdlIG5lZWQgbm93LlxuICAgICAgICAgICAgYml0cy5hcHBlbmRCaXRzKGVjaS5nZXRWYWx1ZSgpLCA4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGUgb3JpZ2luYWwgdGFibGUgaXMgZGVmaW5lZCBpbiB0aGUgdGFibGUgNSBvZiBKSVNYMDUxMDoyMDA0IChwLjE5KS5cbiAgICBFbmNvZGVyLkFMUEhBTlVNRVJJQ19UQUJMRSA9IEludDMyQXJyYXkuZnJvbShbXG4gICAgICAgIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLFxuICAgICAgICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSxcbiAgICAgICAgMzYsIC0xLCAtMSwgLTEsIDM3LCAzOCwgLTEsIC0xLCAtMSwgLTEsIDM5LCA0MCwgLTEsIDQxLCA0MiwgNDMsXG4gICAgICAgIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDQ0LCAtMSwgLTEsIC0xLCAtMSwgLTEsXG4gICAgICAgIC0xLCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1LCAxNiwgMTcsIDE4LCAxOSwgMjAsIDIxLCAyMiwgMjMsIDI0LFxuICAgICAgICAyNSwgMjYsIDI3LCAyOCwgMjksIDMwLCAzMSwgMzIsIDMzLCAzNCwgMzUsIC0xLCAtMSwgLTEsIC0xLCAtMSxcbiAgICBdKTtcbiAgICBFbmNvZGVyLkRFRkFVTFRfQllURV9NT0RFX0VOQ09ESU5HID0gQ2hhcmFjdGVyU2V0RUNJLlVURjguZ2V0TmFtZSgpOyAvLyBcIklTTy04ODU5LTFcIlxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgTW92aW5nIHRvIEB6eGluZy9icm93c2VyXG4gICAgICovXG4gICAgY2xhc3MgQnJvd3NlclFSQ29kZVN2Z1dyaXRlciB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcml0ZXMgYW5kIHJlbmRlcnMgYSBRUkNvZGUgU1ZHIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBjb250ZW50c1xuICAgICAgICAgKiBAcGFyYW0gd2lkdGhcbiAgICAgICAgICogQHBhcmFtIGhlaWdodFxuICAgICAgICAgKiBAcGFyYW0gaGludHNcbiAgICAgICAgICovXG4gICAgICAgIHdyaXRlKGNvbnRlbnRzLCB3aWR0aCwgaGVpZ2h0LCBoaW50cyA9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdGb3VuZCBlbXB0eSBjb250ZW50cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgKGZvcm1hdCAhPSBCYXJjb2RlRm9ybWF0LlFSX0NPREUpIHtcbiAgICAgICAgICAgIC8vICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkNhbiBvbmx5IGVuY29kZSBRUl9DT0RFLCBidXQgZ290IFwiICsgZm9ybWF0KVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgaWYgKHdpZHRoIDwgMCB8fCBoZWlnaHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignUmVxdWVzdGVkIGRpbWVuc2lvbnMgYXJlIHRvbyBzbWFsbDogJyArIHdpZHRoICsgJ3gnICsgaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlcnJvckNvcnJlY3Rpb25MZXZlbCA9IEVycm9yQ29ycmVjdGlvbkxldmVsLkw7XG4gICAgICAgICAgICBsZXQgcXVpZXRab25lID0gQnJvd3NlclFSQ29kZVN2Z1dyaXRlci5RVUlFVF9aT05FX1NJWkU7XG4gICAgICAgICAgICBpZiAoaGludHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvcnJlY3Rpb25MZXZlbCA9IEVycm9yQ29ycmVjdGlvbkxldmVsLmZyb21TdHJpbmcoaGludHMuZ2V0KEVuY29kZUhpbnRUeXBlJDEuRVJST1JfQ09SUkVDVElPTikudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGhpbnRzLmdldChFbmNvZGVIaW50VHlwZSQxLk1BUkdJTikpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVpZXRab25lID0gTnVtYmVyLnBhcnNlSW50KGhpbnRzLmdldChFbmNvZGVIaW50VHlwZSQxLk1BUkdJTikudG9TdHJpbmcoKSwgMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBFbmNvZGVyLmVuY29kZShjb250ZW50cywgZXJyb3JDb3JyZWN0aW9uTGV2ZWwsIGhpbnRzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclJlc3VsdChjb2RlLCB3aWR0aCwgaGVpZ2h0LCBxdWlldFpvbmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJzIHRoZSByZXN1bHQgYW5kIHRoZW4gYXBwZW5kcyBpdCB0byB0aGUgRE9NLlxuICAgICAgICAgKi9cbiAgICAgICAgd3JpdGVUb0RvbShjb250YWluZXJFbGVtZW50LCBjb250ZW50cywgd2lkdGgsIGhlaWdodCwgaGludHMgPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRhaW5lckVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdmdFbGVtZW50ID0gdGhpcy53cml0ZShjb250ZW50cywgd2lkdGgsIGhlaWdodCwgaGludHMpO1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckVsZW1lbnQpXG4gICAgICAgICAgICAgICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChzdmdFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogTm90ZSB0aGF0IHRoZSBpbnB1dCBtYXRyaXggdXNlcyAwID09IHdoaXRlLCAxID09IGJsYWNrLlxuICAgICAgICAgKiBUaGUgb3V0cHV0IG1hdHJpeCB1c2VzIDAgPT0gYmxhY2ssIDI1NSA9PSB3aGl0ZSAoaS5lLiBhbiA4IGJpdCBncmV5c2NhbGUgYml0bWFwKS5cbiAgICAgICAgICovXG4gICAgICAgIHJlbmRlclJlc3VsdChjb2RlLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcXVpZXRab25lIC8qaW50Ki8pIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gY29kZS5nZXRNYXRyaXgoKTtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlucHV0V2lkdGggPSBpbnB1dC5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRIZWlnaHQgPSBpbnB1dC5nZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIGNvbnN0IHFyV2lkdGggPSBpbnB1dFdpZHRoICsgKHF1aWV0Wm9uZSAqIDIpO1xuICAgICAgICAgICAgY29uc3QgcXJIZWlnaHQgPSBpbnB1dEhlaWdodCArIChxdWlldFpvbmUgKiAyKTtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFdpZHRoID0gTWF0aC5tYXgod2lkdGgsIHFyV2lkdGgpO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0SGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCBxckhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZSA9IE1hdGgubWluKE1hdGguZmxvb3Iob3V0cHV0V2lkdGggLyBxcldpZHRoKSwgTWF0aC5mbG9vcihvdXRwdXRIZWlnaHQgLyBxckhlaWdodCkpO1xuICAgICAgICAgICAgLy8gUGFkZGluZyBpbmNsdWRlcyBib3RoIHRoZSBxdWlldCB6b25lIGFuZCB0aGUgZXh0cmEgd2hpdGUgcGl4ZWxzIHRvIGFjY29tbW9kYXRlIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgICAgIC8vIGRpbWVuc2lvbnMuIEZvciBleGFtcGxlLCBpZiBpbnB1dCBpcyAyNXgyNSB0aGUgUVIgd2lsbCBiZSAzM3gzMyBpbmNsdWRpbmcgdGhlIHF1aWV0IHpvbmUuXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdGVkIHNpemUgaXMgMjAweDE2MCwgdGhlIG11bHRpcGxlIHdpbGwgYmUgNCwgZm9yIGEgUVIgb2YgMTMyeDEzMi4gVGhlc2Ugd2lsbFxuICAgICAgICAgICAgLy8gaGFuZGxlIGFsbCB0aGUgcGFkZGluZyBmcm9tIDEwMHgxMDAgKHRoZSBhY3R1YWwgUVIpIHVwIHRvIDIwMHgxNjAuXG4gICAgICAgICAgICBjb25zdCBsZWZ0UGFkZGluZyA9IE1hdGguZmxvb3IoKG91dHB1dFdpZHRoIC0gKGlucHV0V2lkdGggKiBtdWx0aXBsZSkpIC8gMik7XG4gICAgICAgICAgICBjb25zdCB0b3BQYWRkaW5nID0gTWF0aC5mbG9vcigob3V0cHV0SGVpZ2h0IC0gKGlucHV0SGVpZ2h0ICogbXVsdGlwbGUpKSAvIDIpO1xuICAgICAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IHRoaXMuY3JlYXRlU1ZHRWxlbWVudChvdXRwdXRXaWR0aCwgb3V0cHV0SGVpZ2h0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGlucHV0WSA9IDAsIG91dHB1dFkgPSB0b3BQYWRkaW5nOyBpbnB1dFkgPCBpbnB1dEhlaWdodDsgaW5wdXRZKyssIG91dHB1dFkgKz0gbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBXcml0ZSB0aGUgY29udGVudHMgb2YgdGhpcyByb3cgb2YgdGhlIGJhcmNvZGVcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbnB1dFggPSAwLCBvdXRwdXRYID0gbGVmdFBhZGRpbmc7IGlucHV0WCA8IGlucHV0V2lkdGg7IGlucHV0WCsrLCBvdXRwdXRYICs9IG11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5nZXQoaW5wdXRYLCBpbnB1dFkpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdmdSZWN0RWxlbWVudCA9IHRoaXMuY3JlYXRlU3ZnUmVjdEVsZW1lbnQob3V0cHV0WCwgb3V0cHV0WSwgbXVsdGlwbGUsIG11bHRpcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnUmVjdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN2Z0VsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBTVkcgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHcgU1ZHJ3Mgd2lkdGggYXR0cmlidXRlXG4gICAgICAgICAqIEBwYXJhbSBoIFNWRydzIGhlaWdodCBhdHRyaWJ1dGVcbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVNWR0VsZW1lbnQodywgaCkge1xuICAgICAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhCcm93c2VyUVJDb2RlU3ZnV3JpdGVyLlNWR19OUywgJ3N2ZycpO1xuICAgICAgICAgICAgc3ZnRWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnaGVpZ2h0Jywgdy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHN2Z0VsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJywgaC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJldHVybiBzdmdFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgU1ZHIHJlY3QgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHggRWxlbWVudCdzIHggY29vcmRpbmF0ZVxuICAgICAgICAgKiBAcGFyYW0geSBFbGVtZW50J3MgeSBjb29yZGluYXRlXG4gICAgICAgICAqIEBwYXJhbSB3IEVsZW1lbnQncyB3aWR0aCBhdHRyaWJ1dGVcbiAgICAgICAgICogQHBhcmFtIGggRWxlbWVudCdzIGhlaWdodCBhdHRyaWJ1dGVcbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVN2Z1JlY3RFbGVtZW50KHgsIHksIHcsIGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoQnJvd3NlclFSQ29kZVN2Z1dyaXRlci5TVkdfTlMsICdyZWN0Jyk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnaGVpZ2h0Jywgdy50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJywgaC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgJ2ZpbGwnLCAnIzAwMDAwMCcpO1xuICAgICAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQnJvd3NlclFSQ29kZVN2Z1dyaXRlci5RVUlFVF9aT05FX1NJWkUgPSA0O1xuICAgIC8qKlxuICAgICAqIFNWRyBtYXJrdXAgTmFtZVNwYWNlXG4gICAgICovXG4gICAgQnJvd3NlclFSQ29kZVN2Z1dyaXRlci5TVkdfTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuXG4gICAgLyppbXBvcnQgamF2YS51dGlsLk1hcDsqL1xuICAgIC8qKlxuICAgICAqIFRoaXMgb2JqZWN0IHJlbmRlcnMgYSBRUiBDb2RlIGFzIGEgQml0TWF0cml4IDJEIGFycmF5IG9mIGdyZXlzY2FsZSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKVxuICAgICAqL1xuICAgIGNsYXNzIFFSQ29kZVdyaXRlciB7XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgLy8gcHVibGljIGVuY29kZShjb250ZW50czogc3RyaW5nLCBmb3JtYXQ6IEJhcmNvZGVGb3JtYXQsIHdpZHRoOiBudW1iZXIgLyppbnQqLywgaGVpZ2h0OiBudW1iZXIgLyppbnQqLyk6IEJpdE1hdHJpeFxuICAgICAgICAvLyAgICAgLyp0aHJvd3MgV3JpdGVyRXhjZXB0aW9uICovIHtcbiAgICAgICAgLy8gICByZXR1cm4gZW5jb2RlKGNvbnRlbnRzLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQsIG51bGwpXG4gICAgICAgIC8vIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBlbmNvZGUoY29udGVudHMsIGZvcm1hdCwgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8sIGhpbnRzKSB7XG4gICAgICAgICAgICBpZiAoY29udGVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignRm91bmQgZW1wdHkgY29udGVudHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3JtYXQgIT09IEJhcmNvZGVGb3JtYXQkMS5RUl9DT0RFKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignQ2FuIG9ubHkgZW5jb2RlIFFSX0NPREUsIGJ1dCBnb3QgJyArIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2lkdGggPCAwIHx8IGhlaWdodCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKGBSZXF1ZXN0ZWQgZGltZW5zaW9ucyBhcmUgdG9vIHNtYWxsOiAke3dpZHRofXgke2hlaWdodH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlcnJvckNvcnJlY3Rpb25MZXZlbCA9IEVycm9yQ29ycmVjdGlvbkxldmVsLkw7XG4gICAgICAgICAgICBsZXQgcXVpZXRab25lID0gUVJDb2RlV3JpdGVyLlFVSUVUX1pPTkVfU0laRTtcbiAgICAgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IGhpbnRzLmdldChFbmNvZGVIaW50VHlwZSQxLkVSUk9SX0NPUlJFQ1RJT04pKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyhoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KEVuY29kZUhpbnRUeXBlJDEuTUFSR0lOKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWlldFpvbmUgPSBOdW1iZXIucGFyc2VJbnQoaGludHMuZ2V0KEVuY29kZUhpbnRUeXBlJDEuTUFSR0lOKS50b1N0cmluZygpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29kZSA9IEVuY29kZXIuZW5jb2RlKGNvbnRlbnRzLCBlcnJvckNvcnJlY3Rpb25MZXZlbCwgaGludHMpO1xuICAgICAgICAgICAgcmV0dXJuIFFSQ29kZVdyaXRlci5yZW5kZXJSZXN1bHQoY29kZSwgd2lkdGgsIGhlaWdodCwgcXVpZXRab25lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGlucHV0IG1hdHJpeCB1c2VzIDAgPT0gd2hpdGUsIDEgPT0gYmxhY2ssIHdoaWxlIHRoZSBvdXRwdXQgbWF0cml4IHVzZXNcbiAgICAgICAgLy8gMCA9PSBibGFjaywgMjU1ID09IHdoaXRlIChpLmUuIGFuIDggYml0IGdyZXlzY2FsZSBiaXRtYXApLlxuICAgICAgICBzdGF0aWMgcmVuZGVyUmVzdWx0KGNvZGUsIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBxdWlldFpvbmUgLyppbnQqLykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBjb2RlLmdldE1hdHJpeCgpO1xuICAgICAgICAgICAgaWYgKGlucHV0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5wdXRXaWR0aCA9IGlucHV0LmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEhlaWdodCA9IGlucHV0LmdldEhlaWdodCgpO1xuICAgICAgICAgICAgY29uc3QgcXJXaWR0aCA9IGlucHV0V2lkdGggKyAocXVpZXRab25lICogMik7XG4gICAgICAgICAgICBjb25zdCBxckhlaWdodCA9IGlucHV0SGVpZ2h0ICsgKHF1aWV0Wm9uZSAqIDIpO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0V2lkdGggPSBNYXRoLm1heCh3aWR0aCwgcXJXaWR0aCk7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRIZWlnaHQgPSBNYXRoLm1heChoZWlnaHQsIHFySGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxlID0gTWF0aC5taW4oTWF0aC5mbG9vcihvdXRwdXRXaWR0aCAvIHFyV2lkdGgpLCBNYXRoLmZsb29yKG91dHB1dEhlaWdodCAvIHFySGVpZ2h0KSk7XG4gICAgICAgICAgICAvLyBQYWRkaW5nIGluY2x1ZGVzIGJvdGggdGhlIHF1aWV0IHpvbmUgYW5kIHRoZSBleHRyYSB3aGl0ZSBwaXhlbHMgdG8gYWNjb21tb2RhdGUgdGhlIHJlcXVlc3RlZFxuICAgICAgICAgICAgLy8gZGltZW5zaW9ucy4gRm9yIGV4YW1wbGUsIGlmIGlucHV0IGlzIDI1eDI1IHRoZSBRUiB3aWxsIGJlIDMzeDMzIGluY2x1ZGluZyB0aGUgcXVpZXQgem9uZS5cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0ZWQgc2l6ZSBpcyAyMDB4MTYwLCB0aGUgbXVsdGlwbGUgd2lsbCBiZSA0LCBmb3IgYSBRUiBvZiAxMzJ4MTMyLiBUaGVzZSB3aWxsXG4gICAgICAgICAgICAvLyBoYW5kbGUgYWxsIHRoZSBwYWRkaW5nIGZyb20gMTAweDEwMCAodGhlIGFjdHVhbCBRUikgdXAgdG8gMjAweDE2MC5cbiAgICAgICAgICAgIGNvbnN0IGxlZnRQYWRkaW5nID0gTWF0aC5mbG9vcigob3V0cHV0V2lkdGggLSAoaW5wdXRXaWR0aCAqIG11bHRpcGxlKSkgLyAyKTtcbiAgICAgICAgICAgIGNvbnN0IHRvcFBhZGRpbmcgPSBNYXRoLmZsb29yKChvdXRwdXRIZWlnaHQgLSAoaW5wdXRIZWlnaHQgKiBtdWx0aXBsZSkpIC8gMik7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBuZXcgQml0TWF0cml4KG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5wdXRZID0gMCwgb3V0cHV0WSA9IHRvcFBhZGRpbmc7IGlucHV0WSA8IGlucHV0SGVpZ2h0OyBpbnB1dFkrKywgb3V0cHV0WSArPSBtdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBjb250ZW50cyBvZiB0aGlzIHJvdyBvZiB0aGUgYmFyY29kZVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlucHV0WCA9IDAsIG91dHB1dFggPSBsZWZ0UGFkZGluZzsgaW5wdXRYIDwgaW5wdXRXaWR0aDsgaW5wdXRYKyssIG91dHB1dFggKz0gbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmdldChpbnB1dFgsIGlucHV0WSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zZXRSZWdpb24ob3V0cHV0WCwgb3V0cHV0WSwgbXVsdGlwbGUsIG11bHRpcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUVJDb2RlV3JpdGVyLlFVSUVUX1pPTkVfU0laRSA9IDQ7XG5cbiAgICAvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGZhY3RvcnkgY2xhc3Mgd2hpY2ggZmluZHMgdGhlIGFwcHJvcHJpYXRlIFdyaXRlciBzdWJjbGFzcyBmb3IgdGhlIEJhcmNvZGVGb3JtYXRcbiAgICAgKiByZXF1ZXN0ZWQgYW5kIGVuY29kZXMgdGhlIGJhcmNvZGUgd2l0aCB0aGUgc3VwcGxpZWQgY29udGVudHMuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKVxuICAgICAqL1xuICAgIGNsYXNzIE11bHRpRm9ybWF0V3JpdGVyIHtcbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICAvLyBwdWJsaWMgZW5jb2RlKGNvbnRlbnRzOiBzdHJpbmcsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogQmFyY29kZUZvcm1hdCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG51bWJlciAvKmludCovLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bWJlciAvKmludCovKTogQml0TWF0cml4IC8qdGhyb3dzIFdyaXRlckV4Y2VwdGlvbiAqLyB7XG4gICAgICAgIC8vICAgcmV0dXJuIGVuY29kZShjb250ZW50cywgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCBudWxsKVxuICAgICAgICAvLyB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZW5jb2RlKGNvbnRlbnRzLCBmb3JtYXQsIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBoaW50cykge1xuICAgICAgICAgICAgbGV0IHdyaXRlcjtcbiAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgLy8gY2FzZSBCYXJjb2RlRm9ybWF0LkVBTl84OlxuICAgICAgICAgICAgICAgIC8vICAgd3JpdGVyID0gbmV3IEVBTjhXcml0ZXIoKVxuICAgICAgICAgICAgICAgIC8vICAgYnJlYWtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIEJhcmNvZGVGb3JtYXQuVVBDX0U6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgVVBDRVdyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgQmFyY29kZUZvcm1hdC5FQU5fMTM6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgRUFOMTNXcml0ZXIoKVxuICAgICAgICAgICAgICAgIC8vICAgYnJlYWtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIEJhcmNvZGVGb3JtYXQuVVBDX0E6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgVVBDQVdyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgQmFyY29kZUZvcm1hdCQxLlFSX0NPREU6XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9IG5ldyBRUkNvZGVXcml0ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gY2FzZSBCYXJjb2RlRm9ybWF0LkNPREVfMzk6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgQ29kZTM5V3JpdGVyKClcbiAgICAgICAgICAgICAgICAvLyAgIGJyZWFrXG4gICAgICAgICAgICAgICAgLy8gY2FzZSBCYXJjb2RlRm9ybWF0LkNPREVfOTM6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgQ29kZTkzV3JpdGVyKClcbiAgICAgICAgICAgICAgICAvLyAgIGJyZWFrXG4gICAgICAgICAgICAgICAgLy8gY2FzZSBCYXJjb2RlRm9ybWF0LkNPREVfMTI4OlxuICAgICAgICAgICAgICAgIC8vICAgd3JpdGVyID0gbmV3IENvZGUxMjhXcml0ZXIoKVxuICAgICAgICAgICAgICAgIC8vICAgYnJlYWtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIEJhcmNvZGVGb3JtYXQuSVRGOlxuICAgICAgICAgICAgICAgIC8vICAgd3JpdGVyID0gbmV3IElURldyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgQmFyY29kZUZvcm1hdC5QREZfNDE3OlxuICAgICAgICAgICAgICAgIC8vICAgd3JpdGVyID0gbmV3IFBERjQxN1dyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgQmFyY29kZUZvcm1hdC5DT0RBQkFSOlxuICAgICAgICAgICAgICAgIC8vICAgd3JpdGVyID0gbmV3IENvZGFCYXJXcml0ZXIoKVxuICAgICAgICAgICAgICAgIC8vICAgYnJlYWtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIEJhcmNvZGVGb3JtYXQuREFUQV9NQVRSSVg6XG4gICAgICAgICAgICAgICAgLy8gICB3cml0ZXIgPSBuZXcgRGF0YU1hdHJpeFdyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgQmFyY29kZUZvcm1hdC5BWlRFQzpcbiAgICAgICAgICAgICAgICAvLyAgIHdyaXRlciA9IG5ldyBBenRlY1dyaXRlcigpXG4gICAgICAgICAgICAgICAgLy8gICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ05vIGVuY29kZXIgYXZhaWxhYmxlIGZvciBmb3JtYXQgJyArIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyLmVuY29kZShjb250ZW50cywgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCBoaW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIFRoaXMgb2JqZWN0IGV4dGVuZHMgTHVtaW5hbmNlU291cmNlIGFyb3VuZCBhbiBhcnJheSBvZiBZVVYgZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBjYW1lcmEgZHJpdmVyLFxuICAgICAqIHdpdGggdGhlIG9wdGlvbiB0byBjcm9wIHRvIGEgcmVjdGFuZ2xlIHdpdGhpbiB0aGUgZnVsbCBkYXRhLiBUaGlzIGNhbiBiZSB1c2VkIHRvIGV4Y2x1ZGVcbiAgICAgKiBzdXBlcmZsdW91cyBwaXhlbHMgYXJvdW5kIHRoZSBwZXJpbWV0ZXIgYW5kIHNwZWVkIHVwIGRlY29kaW5nLlxuICAgICAqXG4gICAgICogSXQgd29ya3MgZm9yIGFueSBwaXhlbCBmb3JtYXQgd2hlcmUgdGhlIFkgY2hhbm5lbCBpcyBwbGFuYXIgYW5kIGFwcGVhcnMgZmlyc3QsIGluY2x1ZGluZ1xuICAgICAqIFlDYkNyXzQyMF9TUCBhbmQgWUNiQ3JfNDIyX1NQLlxuICAgICAqXG4gICAgICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbilcbiAgICAgKi9cbiAgICBjbGFzcyBQbGFuYXJZVVZMdW1pbmFuY2VTb3VyY2UgZXh0ZW5kcyBMdW1pbmFuY2VTb3VyY2Uge1xuICAgICAgICBjb25zdHJ1Y3Rvcih5dXZEYXRhLCBkYXRhV2lkdGggLyppbnQqLywgZGF0YUhlaWdodCAvKmludCovLCBsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcmV2ZXJzZUhvcml6b250YWwpIHtcbiAgICAgICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy55dXZEYXRhID0geXV2RGF0YTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVdpZHRoID0gZGF0YVdpZHRoO1xuICAgICAgICAgICAgdGhpcy5kYXRhSGVpZ2h0ID0gZGF0YUhlaWdodDtcbiAgICAgICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgICAgIGlmIChsZWZ0ICsgd2lkdGggPiBkYXRhV2lkdGggfHwgdG9wICsgaGVpZ2h0ID4gZGF0YUhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oJ0Nyb3AgcmVjdGFuZ2xlIGRvZXMgbm90IGZpdCB3aXRoaW4gaW1hZ2UgZGF0YS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXZlcnNlSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZUhvcml6b250YWwod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBnZXRSb3coeSAvKmludCovLCByb3cpIHtcbiAgICAgICAgICAgIGlmICh5IDwgMCB8fCB5ID49IHRoaXMuZ2V0SGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdSZXF1ZXN0ZWQgcm93IGlzIG91dHNpZGUgdGhlIGltYWdlOiAnICsgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93Lmxlbmd0aCA8IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7XG4gICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHRoaXMueXV2RGF0YSwgb2Zmc2V0LCByb3csIDAsIHdpZHRoKTtcbiAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBnZXRNYXRyaXgoKSB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZVxuICAgICAgICAgICAgLy8gb3JpZ2luYWwgZGF0YS4gVGhlIGRvY3Mgc3BlY2lmaWNhbGx5IHdhcm4gdGhhdCByZXN1bHQubGVuZ3RoIG11c3QgYmUgaWdub3JlZC5cbiAgICAgICAgICAgIGlmICh3aWR0aCA9PT0gdGhpcy5kYXRhV2lkdGggJiYgaGVpZ2h0ID09PSB0aGlzLmRhdGFIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55dXZEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXJlYSA9IHdpZHRoICogaGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGFyZWEpO1xuICAgICAgICAgICAgbGV0IGlucHV0T2Zmc2V0ID0gdGhpcy50b3AgKiB0aGlzLmRhdGFXaWR0aCArIHRoaXMubGVmdDtcbiAgICAgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS5cbiAgICAgICAgICAgIGlmICh3aWR0aCA9PT0gdGhpcy5kYXRhV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHRoaXMueXV2RGF0YSwgaW5wdXRPZmZzZXQsIG1hdHJpeCwgMCwgYXJlYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBjb3B5IG9uZSBjcm9wcGVkIHJvdyBhdCBhIHRpbWUuXG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoO1xuICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkodGhpcy55dXZEYXRhLCBpbnB1dE9mZnNldCwgbWF0cml4LCBvdXRwdXRPZmZzZXQsIHdpZHRoKTtcbiAgICAgICAgICAgICAgICBpbnB1dE9mZnNldCArPSB0aGlzLmRhdGFXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRyaXg7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBpc0Nyb3BTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKkBPdmVycmlkZSovXG4gICAgICAgIGNyb3AobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGxhbmFyWVVWTHVtaW5hbmNlU291cmNlKHRoaXMueXV2RGF0YSwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3AsIHdpZHRoLCBoZWlnaHQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJUaHVtYm5haWwoKSB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKSAvIFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZS5USFVNQk5BSUxfU0NBTEVfRkFDVE9SO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoKSAvIFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZS5USFVNQk5BSUxfU0NBTEVfRkFDVE9SO1xuICAgICAgICAgICAgY29uc3QgcGl4ZWxzID0gbmV3IEludDMyQXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgeXV2ID0gdGhpcy55dXZEYXRhO1xuICAgICAgICAgICAgbGV0IGlucHV0T2Zmc2V0ID0gdGhpcy50b3AgKiB0aGlzLmRhdGFXaWR0aCArIHRoaXMubGVmdDtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRPZmZzZXQgPSB5ICogd2lkdGg7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyZXkgPSB5dXZbaW5wdXRPZmZzZXQgKyB4ICogUGxhbmFyWVVWTHVtaW5hbmNlU291cmNlLlRIVU1CTkFJTF9TQ0FMRV9GQUNUT1JdICYgMHhmZjtcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW291dHB1dE9mZnNldCArIHhdID0gMHhGRjAwMDAwMCB8IChncmV5ICogMHgwMDAxMDEwMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlucHV0T2Zmc2V0ICs9IHRoaXMuZGF0YVdpZHRoICogUGxhbmFyWVVWTHVtaW5hbmNlU291cmNlLlRIVU1CTkFJTF9TQ0FMRV9GQUNUT1I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGl4ZWxzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHdpZHRoIG9mIGltYWdlIGZyb20ge0BsaW5rICNyZW5kZXJUaHVtYm5haWwoKX1cbiAgICAgICAgICovXG4gICAgICAgIGdldFRodW1ibmFpbFdpZHRoKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lkdGgoKSAvIFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZS5USFVNQk5BSUxfU0NBTEVfRkFDVE9SO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIGhlaWdodCBvZiBpbWFnZSBmcm9tIHtAbGluayAjcmVuZGVyVGh1bWJuYWlsKCl9XG4gICAgICAgICAqL1xuICAgICAgICBnZXRUaHVtYm5haWxIZWlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIZWlnaHQoKSAvIFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZS5USFVNQk5BSUxfU0NBTEVfRkFDVE9SO1xuICAgICAgICB9XG4gICAgICAgIHJldmVyc2VIb3Jpem9udGFsKHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICBjb25zdCB5dXZEYXRhID0gdGhpcy55dXZEYXRhO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDAsIHJvd1N0YXJ0ID0gdGhpcy50b3AgKiB0aGlzLmRhdGFXaWR0aCArIHRoaXMubGVmdDsgeSA8IGhlaWdodDsgeSsrLCByb3dTdGFydCArPSB0aGlzLmRhdGFXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pZGRsZSA9IHJvd1N0YXJ0ICsgd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHgxID0gcm93U3RhcnQsIHgyID0gcm93U3RhcnQgKyB3aWR0aCAtIDE7IHgxIDwgbWlkZGxlOyB4MSsrLCB4Mi0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB5dXZEYXRhW3gxXTtcbiAgICAgICAgICAgICAgICAgICAgeXV2RGF0YVt4MV0gPSB5dXZEYXRhW3gyXTtcbiAgICAgICAgICAgICAgICAgICAgeXV2RGF0YVt4Ml0gPSB0ZW1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnZlcnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZS5USFVNQk5BSUxfU0NBTEVfRkFDVE9SID0gMjtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogVGhpcyBjbGFzcyBpcyB1c2VkIHRvIGhlbHAgZGVjb2RlIGltYWdlcyBmcm9tIGZpbGVzIHdoaWNoIGFycml2ZSBhcyBSR0IgZGF0YSBmcm9tXG4gICAgICogYW4gQVJHQiBwaXhlbCBhcnJheS4gSXQgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pXG4gICAgICogQGF1dGhvciBCZXRhbWlub3NcbiAgICAgKi9cbiAgICBjbGFzcyBSR0JMdW1pbmFuY2VTb3VyY2UgZXh0ZW5kcyBMdW1pbmFuY2VTb3VyY2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcihsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykge1xuICAgICAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLmRhdGFXaWR0aCA9IGRhdGFXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUhlaWdodCA9IGRhdGFIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5XG4gICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHdpZHRoICogaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IHNpemU7IG9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsID0gbHVtaW5hbmNlc1tvZmZzZXRdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gKHBpeGVsID4+IDE2KSAmIDB4ZmY7IC8vIHJlZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnMiA9IChwaXhlbCA+PiA3KSAmIDB4MWZlOyAvLyAyICogZ3JlZW5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IHBpeGVsICYgMHhmZjsgLy8gYmx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgZ3JlZW4tZmF2b3VyaW5nIGF2ZXJhZ2UgY2hlYXBseVxuICAgICAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbHVtaW5hbmNlc1VpbnQ4QXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhV2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRvcCkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9wID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxlZnQgKyB3aWR0aCA+IHRoaXMuZGF0YVdpZHRoIHx8IHRoaXMudG9wICsgaGVpZ2h0ID4gdGhpcy5kYXRhSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignQ3JvcCByZWN0YW5nbGUgZG9lcyBub3QgZml0IHdpdGhpbiBpbWFnZSBkYXRhLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZ2V0Um93KHkgLyppbnQqLywgcm93KSB7XG4gICAgICAgICAgICBpZiAoeSA8IDAgfHwgeSA+PSB0aGlzLmdldEhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBpZiAocm93ID09PSBudWxsIHx8IHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdy5sZW5ndGggPCB3aWR0aCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAoeSArIHRoaXMudG9wKSAqIHRoaXMuZGF0YVdpZHRoICsgdGhpcy5sZWZ0O1xuICAgICAgICAgICAgU3lzdGVtLmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIG9mZnNldCwgcm93LCAwLCB3aWR0aCk7XG4gICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgZ2V0TWF0cml4KCkge1xuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNhbGxlciBhc2tzIGZvciB0aGUgZW50aXJlIHVuZGVybHlpbmcgaW1hZ2UsIHNhdmUgdGhlIGNvcHkgYW5kIGdpdmUgdGhlbSB0aGVcbiAgICAgICAgICAgIC8vIG9yaWdpbmFsIGRhdGEuIFRoZSBkb2NzIHNwZWNpZmljYWxseSB3YXJuIHRoYXQgcmVzdWx0Lmxlbmd0aCBtdXN0IGJlIGlnbm9yZWQuXG4gICAgICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubHVtaW5hbmNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFyZWEgPSB3aWR0aCAqIGhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBVaW50OENsYW1wZWRBcnJheShhcmVhKTtcbiAgICAgICAgICAgIGxldCBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7XG4gICAgICAgICAgICAvLyBJZiB0aGUgd2lkdGggbWF0Y2hlcyB0aGUgZnVsbCB3aWR0aCBvZiB0aGUgdW5kZXJseWluZyBkYXRhLCBwZXJmb3JtIGEgc2luZ2xlIGNvcHkuXG4gICAgICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRyaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLlxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dE9mZnNldCA9IHkgKiB3aWR0aDtcbiAgICAgICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHRoaXMubHVtaW5hbmNlcywgaW5wdXRPZmZzZXQsIG1hdHJpeCwgb3V0cHV0T2Zmc2V0LCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0cml4O1xuICAgICAgICB9XG4gICAgICAgIC8qQE92ZXJyaWRlKi9cbiAgICAgICAgaXNDcm9wU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLypAT3ZlcnJpZGUqL1xuICAgICAgICBjcm9wKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJHQkx1bWluYW5jZVNvdXJjZSh0aGlzLmx1bWluYW5jZXMsIHdpZHRoLCBoZWlnaHQsIHRoaXMuZGF0YVdpZHRoLCB0aGlzLmRhdGFIZWlnaHQsIHRoaXMubGVmdCArIGxlZnQsIHRoaXMudG9wICsgdG9wKTtcbiAgICAgICAgfVxuICAgICAgICBpbnZlcnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSnVzdCB0byBtYWtlIGEgc2hvcnRjdXQgYmV0d2VlbiBKYXZhIGNvZGUgYW5kIFRTIGNvZGUuXG4gICAgICovXG4gICAgY2xhc3MgQ2hhcnNldCBleHRlbmRzIENoYXJhY3RlclNldEVDSSB7XG4gICAgICAgIHN0YXRpYyBmb3JOYW1lKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlclNldEVDSUJ5TmFtZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp1c3QgdG8gbWFrZSBhIHNob3J0Y3V0IGJldHdlZW4gSmF2YSBjb2RlIGFuZCBUUyBjb2RlLlxuICAgICAqL1xuICAgIGNsYXNzIFN0YW5kYXJkQ2hhcnNldHMge1xuICAgIH1cbiAgICBTdGFuZGFyZENoYXJzZXRzLklTT184ODU5XzEgPSBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xO1xuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgLyoqXG4gICAgICogQXp0ZWMgMkQgY29kZSByZXByZXNlbnRhdGlvblxuICAgICAqXG4gICAgICogQGF1dGhvciBSdXN0YW0gQWJkdWxsYWV2XG4gICAgICovXG4gICAgLypwdWJsaWMgZmluYWwqLyBjbGFzcyBBenRlY0NvZGUge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybiB7QGNvZGUgdHJ1ZX0gaWYgY29tcGFjdCBpbnN0ZWFkIG9mIGZ1bGwgbW9kZVxuICAgICAgICAgKi9cbiAgICAgICAgaXNDb21wYWN0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFjdDtcbiAgICAgICAgfVxuICAgICAgICBzZXRDb21wYWN0KGNvbXBhY3QpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFjdCA9IGNvbXBhY3Q7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gc2l6ZSBpbiBwaXhlbHMgKHdpZHRoIGFuZCBoZWlnaHQpXG4gICAgICAgICAqL1xuICAgICAgICBnZXRTaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRTaXplKHNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gbnVtYmVyIG9mIGxldmVsc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TGF5ZXJzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHNldExheWVycyhsYXllcnMpIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJzID0gbGF5ZXJzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBkYXRhIGNvZGV3b3Jkc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q29kZVdvcmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29kZVdvcmRzO1xuICAgICAgICB9XG4gICAgICAgIHNldENvZGVXb3Jkcyhjb2RlV29yZHMpIHtcbiAgICAgICAgICAgIHRoaXMuY29kZVdvcmRzID0gY29kZVdvcmRzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBzeW1ib2wgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIGdldE1hdHJpeCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgICAgICAgfVxuICAgICAgICBzZXRNYXRyaXgobWF0cml4KSB7XG4gICAgICAgICAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIENvbGxlY3Rpb25zIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzaW5nbGV0b25MaXN0KFQpIG1ldGhvZCBpcyB1c2VkIHRvIHJldHVybiBhbiBpbW11dGFibGUgbGlzdCBjb250YWluaW5nIG9ubHkgdGhlIHNwZWNpZmllZCBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgc2luZ2xldG9uTGlzdChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gW2l0ZW1dO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWluKENvbGxlY3Rpb248PyBleHRlbmRzIFQ+LCBDb21wYXJhdG9yPD8gc3VwZXIgVD4pIG1ldGhvZCBpcyB1c2VkIHRvIHJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IG9mIHRoZSBnaXZlbiBjb2xsZWN0aW9uLCBhY2NvcmRpbmcgdG8gdGhlIG9yZGVyIGluZHVjZWQgYnkgdGhlIHNwZWNpZmllZCBjb21wYXJhdG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIG1pbihjb2xsZWN0aW9uLCBjb21wYXJhdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5zb3J0KGNvbXBhcmF0b3IpWzBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgY2xhc3MgVG9rZW4ge1xuICAgICAgICBjb25zdHJ1Y3RvcihwcmV2aW91cykge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91cyA9IHByZXZpb3VzO1xuICAgICAgICB9XG4gICAgICAgIGdldFByZXZpb3VzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICogQ29weXJpZ2h0IDIwMTMgWlhpbmcgYXV0aG9yc1xuICAgICpcbiAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAqXG4gICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICpcbiAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgKi9cbiAgICAvKmZpbmFsKi8gY2xhc3MgU2ltcGxlVG9rZW4gZXh0ZW5kcyBUb2tlbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHByZXZpb3VzLCB2YWx1ZSwgYml0Q291bnQpIHtcbiAgICAgICAgICAgIHN1cGVyKHByZXZpb3VzKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuYml0Q291bnQgPSBiaXRDb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQE92ZXJyaWRlXG4gICAgICAgICAqL1xuICAgICAgICBhcHBlbmRUbyhiaXRBcnJheSwgdGV4dCkge1xuICAgICAgICAgICAgYml0QXJyYXkuYXBwZW5kQml0cyh0aGlzLnZhbHVlLCB0aGlzLmJpdENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBhZGQodmFsdWUsIGJpdENvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVRva2VuKHRoaXMsIHZhbHVlLCBiaXRDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkQmluYXJ5U2hpZnQoc3RhcnQsIGJ5dGVDb3VudCkge1xuICAgICAgICAgICAgLy8gbm8tb3AgY2FuJ3QgYmluYXJ5IHNoaWZ0IGEgc2ltcGxlIHRva2VuXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2FkZEJpbmFyeVNoaWZ0IG9uIFNpbXBsZVRva2VuLCB0aGlzIHNpbXBseSByZXR1cm5zIGEgY29weSBvZiB0aGlzIHRva2VuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVRva2VuKHRoaXMsIHN0YXJ0LCBieXRlQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAT3ZlcnJpZGVcbiAgICAgICAgICovXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy52YWx1ZSAmICgoMSA8PCB0aGlzLmJpdENvdW50KSAtIDEpO1xuICAgICAgICAgICAgdmFsdWUgfD0gMSA8PCB0aGlzLmJpdENvdW50O1xuICAgICAgICAgICAgcmV0dXJuICc8JyArIEludGVnZXIudG9CaW5hcnlTdHJpbmcodmFsdWUgfCAoMSA8PCB0aGlzLmJpdENvdW50KSkuc3Vic3RyaW5nKDEpICsgJz4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgLypmaW5hbCovIGNsYXNzIEJpbmFyeVNoaWZ0VG9rZW4gZXh0ZW5kcyBTaW1wbGVUb2tlbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHByZXZpb3VzLCBiaW5hcnlTaGlmdFN0YXJ0LCBiaW5hcnlTaGlmdEJ5dGVDb3VudCkge1xuICAgICAgICAgICAgc3VwZXIocHJldmlvdXMsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5iaW5hcnlTaGlmdFN0YXJ0ID0gYmluYXJ5U2hpZnRTdGFydDtcbiAgICAgICAgICAgIHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPSBiaW5hcnlTaGlmdEJ5dGVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQE92ZXJyaWRlXG4gICAgICAgICAqL1xuICAgICAgICBhcHBlbmRUbyhiaXRBcnJheSwgdGV4dCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCAoaSA9PT0gMzEgJiYgdGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCA8PSA2MikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBhIGhlYWRlciBiZWZvcmUgdGhlIGZpcnN0IGNoYXJhY3RlciwgYW5kIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFyYWN0ZXIgMzEgd2hlbiB0aGUgdG90YWwgYnl0ZSBjb2RlIGlzIDw9IDYyXG4gICAgICAgICAgICAgICAgICAgIGJpdEFycmF5LmFwcGVuZEJpdHMoMzEsIDUpOyAvLyBCSU5BUllfU0hJRlRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPiA2Mikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYml0QXJyYXkuYXBwZW5kQml0cyh0aGlzLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50IC0gMzEsIDE2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxIDw9IGJpbmFyeVNoaWZ0Qnl0ZUNvZGUgPD0gNjJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdEFycmF5LmFwcGVuZEJpdHMoTWF0aC5taW4odGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCwgMzEpLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDMyIDw9IGJpbmFyeVNoaWZ0Q291bnQgPD0gNjIgYW5kIGkgPT0gMzFcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdEFycmF5LmFwcGVuZEJpdHModGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCAtIDMxLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiaXRBcnJheS5hcHBlbmRCaXRzKHRleHRbdGhpcy5iaW5hcnlTaGlmdFN0YXJ0ICsgaV0sIDgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFkZEJpbmFyeVNoaWZ0KHN0YXJ0LCBieXRlQ291bnQpIHtcbiAgICAgICAgICAgIC8vIGludCBiaXRDb3VudCA9IChieXRlQ291bnQgKiA4KSArIChieXRlQ291bnQgPD0gMzEgPyAxMCA6IGJ5dGVDb3VudCA8PSA2MiA/IDIwIDogMjEpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaW5hcnlTaGlmdFRva2VuKHRoaXMsIHN0YXJ0LCBieXRlQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAT3ZlcnJpZGVcbiAgICAgICAgICovXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuICc8JyArIHRoaXMuYmluYXJ5U2hpZnRTdGFydCArICc6OicgKyAodGhpcy5iaW5hcnlTaGlmdFN0YXJ0ICsgdGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCAtIDEpICsgJz4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkQmluYXJ5U2hpZnQodG9rZW4sIHN0YXJ0LCBieXRlQ291bnQpIHtcbiAgICAgICAgLy8gaW50IGJpdENvdW50ID0gKGJ5dGVDb3VudCAqIDgpICsgKGJ5dGVDb3VudCA8PSAzMSA/IDEwIDogYnl0ZUNvdW50IDw9IDYyID8gMjAgOiAyMSk7XG4gICAgICAgIHJldHVybiBuZXcgQmluYXJ5U2hpZnRUb2tlbih0b2tlbiwgc3RhcnQsIGJ5dGVDb3VudCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZCh0b2tlbiwgdmFsdWUsIGJpdENvdW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlVG9rZW4odG9rZW4sIHZhbHVlLCBiaXRDb3VudCk7XG4gICAgfVxuXG4gICAgY29uc3QgLypmaW5hbCovIE1PREVfTkFNRVMgPSBbXG4gICAgICAgICdVUFBFUicsXG4gICAgICAgICdMT1dFUicsXG4gICAgICAgICdESUdJVCcsXG4gICAgICAgICdNSVhFRCcsXG4gICAgICAgICdQVU5DVCdcbiAgICBdO1xuICAgIGNvbnN0IC8qZmluYWwqLyBNT0RFX1VQUEVSID0gMDsgLy8gNSBiaXRzXG4gICAgY29uc3QgLypmaW5hbCovIE1PREVfTE9XRVIgPSAxOyAvLyA1IGJpdHNcbiAgICBjb25zdCAvKmZpbmFsKi8gTU9ERV9ESUdJVCA9IDI7IC8vIDQgYml0c1xuICAgIGNvbnN0IC8qZmluYWwqLyBNT0RFX01JWEVEID0gMzsgLy8gNSBiaXRzXG4gICAgY29uc3QgLypmaW5hbCovIE1PREVfUFVOQ1QgPSA0OyAvLyA1IGJpdHNcbiAgICBjb25zdCBFTVBUWV9UT0tFTiA9IG5ldyBTaW1wbGVUb2tlbihudWxsLCAwLCAwKTtcblxuICAgIC8vIFRoZSBMYXRjaCBUYWJsZSBzaG93cywgZm9yIGVhY2ggcGFpciBvZiBNb2RlcywgdGhlIG9wdGltYWwgbWV0aG9kIGZvclxuICAgIC8vIGdldHRpbmcgZnJvbSBvbmUgbW9kZSB0byBhbm90aGVyLiAgSW4gdGhlIHdvcnN0IHBvc3NpYmxlIGNhc2UsIHRoaXMgY2FuXG4gICAgLy8gYmUgdXAgdG8gMTQgYml0cy4gIEluIHRoZSBiZXN0IHBvc3NpYmxlIGNhc2UsIHdlIGFyZSBhbHJlYWR5IHRoZXJlIVxuICAgIC8vIFRoZSBoaWdoIGhhbGYtd29yZCBvZiBlYWNoIGVudHJ5IGdpdmVzIHRoZSBudW1iZXIgb2YgYml0cy5cbiAgICAvLyBUaGUgbG93IGhhbGYtd29yZCBvZiBlYWNoIGVudHJ5IGFyZSB0aGUgYWN0dWFsIGJpdHMgbmVjZXNzYXJ5IHRvIGNoYW5nZVxuICAgIGNvbnN0IExBVENIX1RBQkxFID0gW1xuICAgICAgICBJbnQzMkFycmF5LmZyb20oW1xuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICg1IDw8IDE2KSArIDI4LFxuICAgICAgICAgICAgKDUgPDwgMTYpICsgMzAsXG4gICAgICAgICAgICAoNSA8PCAxNikgKyAyOSxcbiAgICAgICAgICAgICgxMCA8PCAxNikgKyAoMjkgPDwgNSkgKyAzMCAvLyBVUFBFUiAtPiBNSVhFRCAtPiBQVU5DVFxuICAgICAgICBdKSxcbiAgICAgICAgSW50MzJBcnJheS5mcm9tKFtcbiAgICAgICAgICAgICg5IDw8IDE2KSArICgzMCA8PCA0KSArIDE0LFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICg1IDw8IDE2KSArIDMwLFxuICAgICAgICAgICAgKDUgPDwgMTYpICsgMjksXG4gICAgICAgICAgICAoMTAgPDwgMTYpICsgKDI5IDw8IDUpICsgMzAgLy8gTE9XRVIgLT4gTUlYRUQgLT4gUFVOQ1RcbiAgICAgICAgXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbXG4gICAgICAgICAgICAoNCA8PCAxNikgKyAxNCxcbiAgICAgICAgICAgICg5IDw8IDE2KSArICgxNCA8PCA1KSArIDI4LFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICg5IDw8IDE2KSArICgxNCA8PCA1KSArIDI5LFxuICAgICAgICAgICAgKDE0IDw8IDE2KSArICgxNCA8PCAxMCkgKyAoMjkgPDwgNSkgKyAzMFxuICAgICAgICAgICAgLy8gRElHSVQgLT4gVVBQRVIgLT4gTUlYRUQgLT4gUFVOQ1RcbiAgICAgICAgXSksXG4gICAgICAgIEludDMyQXJyYXkuZnJvbShbXG4gICAgICAgICAgICAoNSA8PCAxNikgKyAyOSxcbiAgICAgICAgICAgICg1IDw8IDE2KSArIDI4LFxuICAgICAgICAgICAgKDEwIDw8IDE2KSArICgyOSA8PCA1KSArIDMwLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICg1IDw8IDE2KSArIDMwIC8vIE1JWEVEIC0+IFBVTkNUXG4gICAgICAgIF0pLFxuICAgICAgICBJbnQzMkFycmF5LmZyb20oW1xuICAgICAgICAgICAgKDUgPDwgMTYpICsgMzEsXG4gICAgICAgICAgICAoMTAgPDwgMTYpICsgKDMxIDw8IDUpICsgMjgsXG4gICAgICAgICAgICAoMTAgPDwgMTYpICsgKDMxIDw8IDUpICsgMzAsXG4gICAgICAgICAgICAoMTAgPDwgMTYpICsgKDMxIDw8IDUpICsgMjksXG4gICAgICAgICAgICAwXG4gICAgICAgIF0pXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIHN0YXRpY19TSElGVF9UQUJMRShTSElGVF9UQUJMRSkge1xuICAgICAgICBmb3IgKGxldCB0YWJsZSAvKkludDMyQXJyYXkqLyBvZiBTSElGVF9UQUJMRSkge1xuICAgICAgICAgICAgQXJyYXlzLmZpbGwodGFibGUsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBTSElGVF9UQUJMRVtNT0RFX1VQUEVSXVtNT0RFX1BVTkNUXSA9IDA7XG4gICAgICAgIFNISUZUX1RBQkxFW01PREVfTE9XRVJdW01PREVfUFVOQ1RdID0gMDtcbiAgICAgICAgU0hJRlRfVEFCTEVbTU9ERV9MT1dFUl1bTU9ERV9VUFBFUl0gPSAyODtcbiAgICAgICAgU0hJRlRfVEFCTEVbTU9ERV9NSVhFRF1bTU9ERV9QVU5DVF0gPSAwO1xuICAgICAgICBTSElGVF9UQUJMRVtNT0RFX0RJR0lUXVtNT0RFX1BVTkNUXSA9IDA7XG4gICAgICAgIFNISUZUX1RBQkxFW01PREVfRElHSVRdW01PREVfVVBQRVJdID0gMTU7XG4gICAgICAgIHJldHVybiBTSElGVF9UQUJMRTtcbiAgICB9XG4gICAgY29uc3QgLypmaW5hbCovIFNISUZUX1RBQkxFID0gc3RhdGljX1NISUZUX1RBQkxFKEFycmF5cy5jcmVhdGVJbnQzMkFycmF5KDYsIDYpKTsgLy8gbW9kZSBzaGlmdCBjb2RlcywgcGVyIHRhYmxlXG5cbiAgICAvKlxuICAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAgKlxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICAgICAqXG4gICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAgKlxuICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIFN0YXRlIHJlcHJlc2VudHMgYWxsIGluZm9ybWF0aW9uIGFib3V0IGEgc2VxdWVuY2UgbmVjZXNzYXJ5IHRvIGdlbmVyYXRlIHRoZSBjdXJyZW50IG91dHB1dC5cbiAgICAgKiBOb3RlIHRoYXQgYSBzdGF0ZSBpcyBpbW11dGFibGUuXG4gICAgICovXG4gICAgLypmaW5hbCovIGNsYXNzIFN0YXRlIHtcbiAgICAgICAgY29uc3RydWN0b3IodG9rZW4sIG1vZGUsIGJpbmFyeUJ5dGVzLCBiaXRDb3VudCkge1xuICAgICAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgICAgIHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPSBiaW5hcnlCeXRlcztcbiAgICAgICAgICAgIHRoaXMuYml0Q291bnQgPSBiaXRDb3VudDtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBtYXRjaCB0aGUgdG9rZW5cbiAgICAgICAgICAgIC8vIGludCBiaW5hcnlTaGlmdEJpdENvdW50ID0gKGJpbmFyeVNoaWZ0Qnl0ZUNvdW50ICogOCkgK1xuICAgICAgICAgICAgLy8gICAgKGJpbmFyeVNoaWZ0Qnl0ZUNvdW50ID09PSAwID8gMCA6XG4gICAgICAgICAgICAvLyAgICAgYmluYXJ5U2hpZnRCeXRlQ291bnQgPD0gMzEgPyAxMCA6XG4gICAgICAgICAgICAvLyAgICAgYmluYXJ5U2hpZnRCeXRlQ291bnQgPD0gNjIgPyAyMCA6IDIxKTtcbiAgICAgICAgICAgIC8vIGFzc2VydCB0aGlzLmJpdENvdW50ID09PSB0b2tlbi5nZXRUb3RhbEJpdENvdW50KCkgKyBiaW5hcnlTaGlmdEJpdENvdW50O1xuICAgICAgICB9XG4gICAgICAgIGdldE1vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlO1xuICAgICAgICB9XG4gICAgICAgIGdldFRva2VuKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgZ2V0QmluYXJ5U2hpZnRCeXRlQ291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBnZXRCaXRDb3VudCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJpdENvdW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzdGF0ZSByZXByZXNlbnRpbmcgdGhpcyBzdGF0ZSB3aXRoIGEgbGF0Y2ggdG8gYSAobm90XG4gICAgICAgIC8vIG5lY2Vzc2FyeSBkaWZmZXJlbnQpIG1vZGUsIGFuZCB0aGVuIGEgY29kZS5cbiAgICAgICAgbGF0Y2hBbmRBcHBlbmQobW9kZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGFzc2VydCBiaW5hcnlTaGlmdEJ5dGVDb3VudCA9PT0gMDtcbiAgICAgICAgICAgIGxldCBiaXRDb3VudCA9IHRoaXMuYml0Q291bnQ7XG4gICAgICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLnRva2VuO1xuICAgICAgICAgICAgaWYgKG1vZGUgIT09IHRoaXMubW9kZSkge1xuICAgICAgICAgICAgICAgIGxldCBsYXRjaCA9IExBVENIX1RBQkxFW3RoaXMubW9kZV1bbW9kZV07XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBhZGQodG9rZW4sIGxhdGNoICYgMHhmZmZmLCBsYXRjaCA+PiAxNik7XG4gICAgICAgICAgICAgICAgYml0Q291bnQgKz0gbGF0Y2ggPj4gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGF0Y2hNb2RlQml0Q291bnQgPSBtb2RlID09PSBNT0RFX0RJR0lUID8gNCA6IDU7XG4gICAgICAgICAgICB0b2tlbiA9IGFkZCh0b2tlbiwgdmFsdWUsIGxhdGNoTW9kZUJpdENvdW50KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhdGUodG9rZW4sIG1vZGUsIDAsIGJpdENvdW50ICsgbGF0Y2hNb2RlQml0Q291bnQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzdGF0ZSByZXByZXNlbnRpbmcgdGhpcyBzdGF0ZSwgd2l0aCBhIHRlbXBvcmFyeSBzaGlmdFxuICAgICAgICAvLyB0byBhIGRpZmZlcmVudCBtb2RlIHRvIG91dHB1dCBhIHNpbmdsZSB2YWx1ZS5cbiAgICAgICAgc2hpZnRBbmRBcHBlbmQobW9kZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGFzc2VydCBiaW5hcnlTaGlmdEJ5dGVDb3VudCA9PT0gMCAmJiB0aGlzLm1vZGUgIT09IG1vZGU7XG4gICAgICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLnRva2VuO1xuICAgICAgICAgICAgbGV0IHRoaXNNb2RlQml0Q291bnQgPSB0aGlzLm1vZGUgPT09IE1PREVfRElHSVQgPyA0IDogNTtcbiAgICAgICAgICAgIC8vIFNoaWZ0cyBleGlzdCBvbmx5IHRvIFVQUEVSIGFuZCBQVU5DVCwgYm90aCB3aXRoIHRva2VucyBzaXplIDUuXG4gICAgICAgICAgICB0b2tlbiA9IGFkZCh0b2tlbiwgU0hJRlRfVEFCTEVbdGhpcy5tb2RlXVttb2RlXSwgdGhpc01vZGVCaXRDb3VudCk7XG4gICAgICAgICAgICB0b2tlbiA9IGFkZCh0b2tlbiwgdmFsdWUsIDUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdGF0ZSh0b2tlbiwgdGhpcy5tb2RlLCAwLCB0aGlzLmJpdENvdW50ICsgdGhpc01vZGVCaXRDb3VudCArIDUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzdGF0ZSByZXByZXNlbnRpbmcgdGhpcyBzdGF0ZSwgYnV0IGFuIGFkZGl0aW9uYWwgY2hhcmFjdGVyXG4gICAgICAgIC8vIG91dHB1dCBpbiBCaW5hcnkgU2hpZnQgbW9kZS5cbiAgICAgICAgYWRkQmluYXJ5U2hpZnRDaGFyKGluZGV4KSB7XG4gICAgICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLnRva2VuO1xuICAgICAgICAgICAgbGV0IG1vZGUgPSB0aGlzLm1vZGU7XG4gICAgICAgICAgICBsZXQgYml0Q291bnQgPSB0aGlzLmJpdENvdW50O1xuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gTU9ERV9QVU5DVCB8fCB0aGlzLm1vZGUgPT09IE1PREVfRElHSVQpIHtcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgYmluYXJ5U2hpZnRCeXRlQ291bnQgPT09IDA7XG4gICAgICAgICAgICAgICAgbGV0IGxhdGNoID0gTEFUQ0hfVEFCTEVbbW9kZV1bTU9ERV9VUFBFUl07XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBhZGQodG9rZW4sIGxhdGNoICYgMHhmZmZmLCBsYXRjaCA+PiAxNik7XG4gICAgICAgICAgICAgICAgYml0Q291bnQgKz0gbGF0Y2ggPj4gMTY7XG4gICAgICAgICAgICAgICAgbW9kZSA9IE1PREVfVVBQRVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZGVsdGFCaXRDb3VudCA9IHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPT09IDAgfHwgdGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCA9PT0gMzFcbiAgICAgICAgICAgICAgICA/IDE4XG4gICAgICAgICAgICAgICAgOiB0aGlzLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50ID09PSA2MlxuICAgICAgICAgICAgICAgICAgICA/IDlcbiAgICAgICAgICAgICAgICAgICAgOiA4O1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTdGF0ZSh0b2tlbiwgbW9kZSwgdGhpcy5iaW5hcnlTaGlmdEJ5dGVDb3VudCArIDEsIGJpdENvdW50ICsgZGVsdGFCaXRDb3VudCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmJpbmFyeVNoaWZ0Qnl0ZUNvdW50ID09PSAyMDQ3ICsgMzEpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgc3RyaW5nIGlzIGFzIGxvbmcgYXMgaXQncyBhbGxvd2VkIHRvIGJlLiAgV2Ugc2hvdWxkIGVuZCBpdC5cbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZW5kQmluYXJ5U2hpZnQoaW5kZXggKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBzdGF0ZSBpZGVudGljYWwgdG8gdGhpcyBvbmUsIGJ1dCB3ZSBhcmUgbm8gbG9uZ2VyIGluXG4gICAgICAgIC8vIEJpbmFyeSBTaGlmdCBtb2RlLlxuICAgICAgICBlbmRCaW5hcnlTaGlmdChpbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b2tlbiA9IHRoaXMudG9rZW47XG4gICAgICAgICAgICB0b2tlbiA9IGFkZEJpbmFyeVNoaWZ0KHRva2VuLCBpbmRleCAtIHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQsIHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQpO1xuICAgICAgICAgICAgLy8gYXNzZXJ0IHRva2VuLmdldFRvdGFsQml0Q291bnQoKSA9PT0gdGhpcy5iaXRDb3VudDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhdGUodG9rZW4sIHRoaXMubW9kZSwgMCwgdGhpcy5iaXRDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIFwidGhpc1wiIHN0YXRlIGlzIGJldHRlciAoZXF1YWw6IG9yKSB0byBiZSBpbiB0aGFuIFwidGhhdFwiXG4gICAgICAgIC8vIHN0YXRlIHVuZGVyIGFsbCBwb3NzaWJsZSBjaXJjdW1zdGFuY2VzLlxuICAgICAgICBpc0JldHRlclRoYW5PckVxdWFsVG8ob3RoZXIpIHtcbiAgICAgICAgICAgIGxldCBuZXdNb2RlQml0Q291bnQgPSB0aGlzLmJpdENvdW50ICsgKExBVENIX1RBQkxFW3RoaXMubW9kZV1bb3RoZXIubW9kZV0gPj4gMTYpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYmluYXJ5U2hpZnRCeXRlQ291bnQgPCBvdGhlci5iaW5hcnlTaGlmdEJ5dGVDb3VudCkge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBhZGRpdGlvbmFsIEIvUyBlbmNvZGluZyBjb3N0IG9mIG90aGVyLCBpZiBhbnlcbiAgICAgICAgICAgICAgICBuZXdNb2RlQml0Q291bnQgKz1cbiAgICAgICAgICAgICAgICAgICAgU3RhdGUuY2FsY3VsYXRlQmluYXJ5U2hpZnRDb3N0KG90aGVyKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGF0ZS5jYWxjdWxhdGVCaW5hcnlTaGlmdENvc3QodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50ID4gb3RoZXIuYmluYXJ5U2hpZnRCeXRlQ291bnQgJiZcbiAgICAgICAgICAgICAgICBvdGhlci5iaW5hcnlTaGlmdEJ5dGVDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIHBvc3NpYmxlIGFkZGl0aW9uYWwgY29zdCAoaXQ6IGgpXG4gICAgICAgICAgICAgICAgbmV3TW9kZUJpdENvdW50ICs9IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld01vZGVCaXRDb3VudCA8PSBvdGhlci5iaXRDb3VudDtcbiAgICAgICAgfVxuICAgICAgICB0b0JpdEFycmF5KHRleHQpIHtcbiAgICAgICAgICAgIC8vIFJldmVyc2UgdGhlIHRva2Vucywgc28gdGhhdCB0aGV5IGFyZSBpbiB0aGUgb3JkZXIgdGhhdCB0aGV5IHNob3VsZFxuICAgICAgICAgICAgLy8gYmUgb3V0cHV0XG4gICAgICAgICAgICBsZXQgc3ltYm9scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdG9rZW4gPSB0aGlzLmVuZEJpbmFyeVNoaWZ0KHRleHQubGVuZ3RoKS50b2tlbjsgdG9rZW4gIT09IG51bGw7IHRva2VuID0gdG9rZW4uZ2V0UHJldmlvdXMoKSkge1xuICAgICAgICAgICAgICAgIHN5bWJvbHMudW5zaGlmdCh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYml0QXJyYXkgPSBuZXcgQml0QXJyYXkoKTtcbiAgICAgICAgICAgIC8vIEFkZCBlYWNoIHRva2VuIHRvIHRoZSByZXN1bHQuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN5bWJvbCBvZiBzeW1ib2xzKSB7XG4gICAgICAgICAgICAgICAgc3ltYm9sLmFwcGVuZFRvKGJpdEFycmF5LCB0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFzc2VydCBiaXRBcnJheS5nZXRTaXplKCkgPT09IHRoaXMuYml0Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gYml0QXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBPdmVycmlkZVxuICAgICAgICAgKi9cbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuZm9ybWF0KCclcyBiaXRzPSVkIGJ5dGVzPSVkJywgTU9ERV9OQU1FU1t0aGlzLm1vZGVdLCB0aGlzLmJpdENvdW50LCB0aGlzLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgY2FsY3VsYXRlQmluYXJ5U2hpZnRDb3N0KHN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuYmluYXJ5U2hpZnRCeXRlQ291bnQgPiA2Mikge1xuICAgICAgICAgICAgICAgIHJldHVybiAyMTsgLy8gQi9TIHdpdGggZXh0ZW5kZWQgbGVuZ3RoXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuYmluYXJ5U2hpZnRCeXRlQ291bnQgPiAzMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAyMDsgLy8gdHdvIEIvU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmJpbmFyeVNoaWZ0Qnl0ZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxMDsgLy8gb25lIEIvU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3RhdGUuSU5JVElBTF9TVEFURSA9IG5ldyBTdGF0ZShFTVBUWV9UT0tFTiwgTU9ERV9VUFBFUiwgMCwgMCk7XG5cbiAgICBmdW5jdGlvbiBzdGF0aWNfQ0hBUl9NQVAoQ0hBUl9NQVApIHtcbiAgICAgICAgY29uc3Qgc3BhY2VDaGFyQ29kZSA9IFN0cmluZ1V0aWxzLmdldENoYXJDb2RlKCcgJyk7XG4gICAgICAgIGNvbnN0IHBvaW50Q2hhckNvZGUgPSBTdHJpbmdVdGlscy5nZXRDaGFyQ29kZSgnLicpO1xuICAgICAgICBjb25zdCBjb21tYUNoYXJDb2RlID0gU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJywnKTtcbiAgICAgICAgQ0hBUl9NQVBbTU9ERV9VUFBFUl1bc3BhY2VDaGFyQ29kZV0gPSAxO1xuICAgICAgICBjb25zdCB6VXBwZXJDaGFyQ29kZSA9IFN0cmluZ1V0aWxzLmdldENoYXJDb2RlKCdaJyk7XG4gICAgICAgIGNvbnN0IGFVcHBlckNoYXJDb2RlID0gU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJ0EnKTtcbiAgICAgICAgZm9yIChsZXQgYyA9IGFVcHBlckNoYXJDb2RlOyBjIDw9IHpVcHBlckNoYXJDb2RlOyBjKyspIHtcbiAgICAgICAgICAgIENIQVJfTUFQW01PREVfVVBQRVJdW2NdID0gYyAtIGFVcHBlckNoYXJDb2RlICsgMjtcbiAgICAgICAgfVxuICAgICAgICBDSEFSX01BUFtNT0RFX0xPV0VSXVtzcGFjZUNoYXJDb2RlXSA9IDE7XG4gICAgICAgIGNvbnN0IHpMb3dlckNoYXJDb2RlID0gU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJ3onKTtcbiAgICAgICAgY29uc3QgYUxvd2VyQ2hhckNvZGUgPSBTdHJpbmdVdGlscy5nZXRDaGFyQ29kZSgnYScpO1xuICAgICAgICBmb3IgKGxldCBjID0gYUxvd2VyQ2hhckNvZGU7IGMgPD0gekxvd2VyQ2hhckNvZGU7IGMrKykge1xuICAgICAgICAgICAgQ0hBUl9NQVBbTU9ERV9MT1dFUl1bY10gPSBjIC0gYUxvd2VyQ2hhckNvZGUgKyAyO1xuICAgICAgICB9XG4gICAgICAgIENIQVJfTUFQW01PREVfRElHSVRdW3NwYWNlQ2hhckNvZGVdID0gMTtcbiAgICAgICAgY29uc3QgbmluZUNoYXJDb2RlID0gU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJzknKTtcbiAgICAgICAgY29uc3QgemVyb0NoYXJDb2RlID0gU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJzAnKTtcbiAgICAgICAgZm9yIChsZXQgYyA9IHplcm9DaGFyQ29kZTsgYyA8PSBuaW5lQ2hhckNvZGU7IGMrKykge1xuICAgICAgICAgICAgQ0hBUl9NQVBbTU9ERV9ESUdJVF1bY10gPSBjIC0gemVyb0NoYXJDb2RlICsgMjtcbiAgICAgICAgfVxuICAgICAgICBDSEFSX01BUFtNT0RFX0RJR0lUXVtjb21tYUNoYXJDb2RlXSA9IDEyO1xuICAgICAgICBDSEFSX01BUFtNT0RFX0RJR0lUXVtwb2ludENoYXJDb2RlXSA9IDEzO1xuICAgICAgICBjb25zdCBtaXhlZFRhYmxlID0gW1xuICAgICAgICAgICAgJ1xceDAwJyxcbiAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICdcXHgwMScsXG4gICAgICAgICAgICAnXFx4MDInLFxuICAgICAgICAgICAgJ1xceDAzJyxcbiAgICAgICAgICAgICdcXHgwNCcsXG4gICAgICAgICAgICAnXFx4MDUnLFxuICAgICAgICAgICAgJ1xceDA2JyxcbiAgICAgICAgICAgICdcXHgwNycsXG4gICAgICAgICAgICAnXFxiJyxcbiAgICAgICAgICAgICdcXHQnLFxuICAgICAgICAgICAgJ1xcbicsXG4gICAgICAgICAgICAnXFx4MGInLFxuICAgICAgICAgICAgJ1xcZicsXG4gICAgICAgICAgICAnXFxyJyxcbiAgICAgICAgICAgICdcXHgxYicsXG4gICAgICAgICAgICAnXFx4MWMnLFxuICAgICAgICAgICAgJ1xceDFkJyxcbiAgICAgICAgICAgICdcXHgxZScsXG4gICAgICAgICAgICAnXFx4MWYnLFxuICAgICAgICAgICAgJ0AnLFxuICAgICAgICAgICAgJ1xcXFwnLFxuICAgICAgICAgICAgJ14nLFxuICAgICAgICAgICAgJ18nLFxuICAgICAgICAgICAgJ2AnLFxuICAgICAgICAgICAgJ3wnLFxuICAgICAgICAgICAgJ34nLFxuICAgICAgICAgICAgJ1xceDdmJ1xuICAgICAgICBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1peGVkVGFibGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIENIQVJfTUFQW01PREVfTUlYRURdW1N0cmluZ1V0aWxzLmdldENoYXJDb2RlKG1peGVkVGFibGVbaV0pXSA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHVuY3RUYWJsZSA9IFtcbiAgICAgICAgICAgICdcXHgwMCcsXG4gICAgICAgICAgICAnXFxyJyxcbiAgICAgICAgICAgICdcXHgwMCcsXG4gICAgICAgICAgICAnXFx4MDAnLFxuICAgICAgICAgICAgJ1xceDAwJyxcbiAgICAgICAgICAgICdcXHgwMCcsXG4gICAgICAgICAgICAnIScsXG4gICAgICAgICAgICAnXFwnJyxcbiAgICAgICAgICAgICcjJyxcbiAgICAgICAgICAgICckJyxcbiAgICAgICAgICAgICclJyxcbiAgICAgICAgICAgICcmJyxcbiAgICAgICAgICAgICdcXCcnLFxuICAgICAgICAgICAgJygnLFxuICAgICAgICAgICAgJyknLFxuICAgICAgICAgICAgJyonLFxuICAgICAgICAgICAgJysnLFxuICAgICAgICAgICAgJywnLFxuICAgICAgICAgICAgJy0nLFxuICAgICAgICAgICAgJy4nLFxuICAgICAgICAgICAgJy8nLFxuICAgICAgICAgICAgJzonLFxuICAgICAgICAgICAgJzsnLFxuICAgICAgICAgICAgJzwnLFxuICAgICAgICAgICAgJz0nLFxuICAgICAgICAgICAgJz4nLFxuICAgICAgICAgICAgJz8nLFxuICAgICAgICAgICAgJ1snLFxuICAgICAgICAgICAgJ10nLFxuICAgICAgICAgICAgJ3snLFxuICAgICAgICAgICAgJ30nXG4gICAgICAgIF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVuY3RUYWJsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmdldENoYXJDb2RlKHB1bmN0VGFibGVbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgIENIQVJfTUFQW01PREVfUFVOQ1RdW1N0cmluZ1V0aWxzLmdldENoYXJDb2RlKHB1bmN0VGFibGVbaV0pXSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENIQVJfTUFQO1xuICAgIH1cbiAgICBjb25zdCBDSEFSX01BUCA9IHN0YXRpY19DSEFSX01BUChBcnJheXMuY3JlYXRlSW50MzJBcnJheSg1LCAyNTYpKTtcblxuICAgIC8qXG4gICAgICogQ29weXJpZ2h0IDIwMTMgWlhpbmcgYXV0aG9yc1xuICAgICAqXG4gICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgICpcbiAgICAgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICAgICAqXG4gICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogVGhpcyBwcm9kdWNlcyBuZWFybHkgb3B0aW1hbCBlbmNvZGluZ3Mgb2YgdGV4dCBpbnRvIHRoZSBmaXJzdC1sZXZlbCBvZlxuICAgICAqIGVuY29kaW5nIHVzZWQgYnkgQXp0ZWMgY29kZS5cbiAgICAgKlxuICAgICAqIEl0IHVzZXMgYSBkeW5hbWljIGFsZ29yaXRobS4gIEZvciBlYWNoIHByZWZpeCBvZiB0aGUgc3RyaW5nLCBpdCBkZXRlcm1pbmVzXG4gICAgICogYSBzZXQgb2YgZW5jb2RpbmdzIHRoYXQgY291bGQgbGVhZCB0byB0aGlzIHByZWZpeC4gIFdlIHJlcGVhdGVkbHkgYWRkIGFcbiAgICAgKiBjaGFyYWN0ZXIgYW5kIGdlbmVyYXRlIGEgbmV3IHNldCBvZiBvcHRpbWFsIGVuY29kaW5ncyB1bnRpbCB3ZSBoYXZlIHJlYWRcbiAgICAgKiB0aHJvdWdoIHRoZSBlbnRpcmUgaW5wdXQuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIEZyYW5rIFllbGxpblxuICAgICAqIEBhdXRob3IgUnVzdGFtIEFiZHVsbGFldlxuICAgICAqL1xuICAgIC8qcHVibGljIGZpbmFsKi8gY2xhc3MgSGlnaExldmVsRW5jb2RlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHRleHQpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm4gdGV4dCByZXByZXNlbnRlZCBieSB0aGlzIGVuY29kZXIgZW5jb2RlZCBhcyBhIHtAbGluayBCaXRBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIGVuY29kZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwYWNlQ2hhckNvZGUgPSBTdHJpbmdVdGlscy5nZXRDaGFyQ29kZSgnICcpO1xuICAgICAgICAgICAgY29uc3QgbGluZUJyZWFrQ2hhckNvZGUgPSBTdHJpbmdVdGlscy5nZXRDaGFyQ29kZSgnXFxuJyk7XG4gICAgICAgICAgICBsZXQgc3RhdGVzID0gQ29sbGVjdGlvbnMuc2luZ2xldG9uTGlzdChTdGF0ZS5JTklUSUFMX1NUQVRFKTtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnRleHQubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhaXJDb2RlO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0Q2hhciA9IGluZGV4ICsgMSA8IHRoaXMudGV4dC5sZW5ndGggPyB0aGlzLnRleHRbaW5kZXggKyAxXSA6IDA7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnRleHRbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJ1xccicpOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFpckNvZGUgPSBuZXh0Q2hhciA9PT0gbGluZUJyZWFrQ2hhckNvZGUgPyAyIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0cmluZ1V0aWxzLmdldENoYXJDb2RlKCcuJyk6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWlyQ29kZSA9IG5leHRDaGFyID09PSBzcGFjZUNoYXJDb2RlID8gMyA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTdHJpbmdVdGlscy5nZXRDaGFyQ29kZSgnLCcpOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFpckNvZGUgPSBuZXh0Q2hhciA9PT0gc3BhY2VDaGFyQ29kZSA/IDQgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUoJzonKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaXJDb2RlID0gbmV4dENoYXIgPT09IHNwYWNlQ2hhckNvZGUgPyA1IDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFpckNvZGUgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFpckNvZGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgb25lIG9mIHRoZSBmb3VyIHNwZWNpYWwgUFVOQ1QgcGFpcnMuICBUcmVhdCB0aGVtIHNwZWNpYWxseS5cbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGEgbmV3IHNldCBvZiBzdGF0ZXMgZm9yIHRoZSB0d28gbmV3IGNoYXJhY3RlcnMuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlcyA9IEhpZ2hMZXZlbEVuY29kZXIudXBkYXRlU3RhdGVMaXN0Rm9yUGFpcihzdGF0ZXMsIGluZGV4LCBwYWlyQ29kZSk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgYSBuZXcgc2V0IG9mIHN0YXRlcyBmb3IgdGhlIG5ldyBjaGFyYWN0ZXIuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlcyA9IHRoaXMudXBkYXRlU3RhdGVMaXN0Rm9yQ2hhcihzdGF0ZXMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBhcmUgbGVmdCB3aXRoIGEgc2V0IG9mIHN0YXRlcy4gIEZpbmQgdGhlIHNob3J0ZXN0IG9uZS5cbiAgICAgICAgICAgIGNvbnN0IG1pblN0YXRlID0gQ29sbGVjdGlvbnMubWluKHN0YXRlcywgKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5nZXRCaXRDb3VudCgpIC0gYi5nZXRCaXRDb3VudCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IGl0IHRvIGEgYml0IGFycmF5LCBhbmQgcmV0dXJuLlxuICAgICAgICAgICAgcmV0dXJuIG1pblN0YXRlLnRvQml0QXJyYXkodGhpcy50ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSB1cGRhdGUgYSBzZXQgb2Ygc3RhdGVzIGZvciBhIG5ldyBjaGFyYWN0ZXIgYnkgdXBkYXRpbmcgZWFjaCBzdGF0ZVxuICAgICAgICAvLyBmb3IgdGhlIG5ldyBjaGFyYWN0ZXIsIG1lcmdpbmcgdGhlIHJlc3VsdHMsIGFuZCB0aGVuIHJlbW92aW5nIHRoZVxuICAgICAgICAvLyBub24tb3B0aW1hbCBzdGF0ZXMuXG4gICAgICAgIHVwZGF0ZVN0YXRlTGlzdEZvckNoYXIoc3RhdGVzLCBpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzdGF0ZSAvKlN0YXRlKi8gb2Ygc3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUZvckNoYXIoc3RhdGUsIGluZGV4LCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEhpZ2hMZXZlbEVuY29kZXIuc2ltcGxpZnlTdGF0ZXMocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gYSBzZXQgb2Ygc3RhdGVzIHRoYXQgcmVwcmVzZW50IHRoZSBwb3NzaWJsZSB3YXlzIG9mIHVwZGF0aW5nIHRoaXNcbiAgICAgICAgLy8gc3RhdGUgZm9yIHRoZSBuZXh0IGNoYXJhY3Rlci4gIFRoZSByZXN1bHRpbmcgc2V0IG9mIHN0YXRlcyBhcmUgYWRkZWQgdG9cbiAgICAgICAgLy8gdGhlIFwicmVzdWx0XCIgbGlzdC5cbiAgICAgICAgdXBkYXRlU3RhdGVGb3JDaGFyKHN0YXRlLCBpbmRleCwgcmVzdWx0KSB7XG4gICAgICAgICAgICBsZXQgY2ggPSAodGhpcy50ZXh0W2luZGV4XSAmIDB4ZmYpO1xuICAgICAgICAgICAgbGV0IGNoYXJJbkN1cnJlbnRUYWJsZSA9IENIQVJfTUFQW3N0YXRlLmdldE1vZGUoKV1bY2hdID4gMDtcbiAgICAgICAgICAgIGxldCBzdGF0ZU5vQmluYXJ5ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAobGV0IG1vZGUgLyppbnQqLyA9IDA7IG1vZGUgPD0gTU9ERV9QVU5DVDsgbW9kZSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoYXJJbk1vZGUgPSBDSEFSX01BUFttb2RlXVtjaF07XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJJbk1vZGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZU5vQmluYXJ5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgY3JlYXRlIHN0YXRlTm9CaW5hcnkgdGhlIGZpcnN0IHRpbWUgaXQncyByZXF1aXJlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlTm9CaW5hcnkgPSBzdGF0ZS5lbmRCaW5hcnlTaGlmdChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGdlbmVyYXRpbmcgdGhlIGNoYXJhY3RlciBieSBsYXRjaGluZyB0byBpdHMgbW9kZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJJbkN1cnJlbnRUYWJsZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSA9PT0gc3RhdGUuZ2V0TW9kZSgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlID09PSBNT0RFX0RJR0lUKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIGlzIGluIHRoZSBjdXJyZW50IHRhYmxlLCB3ZSBkb24ndCB3YW50IHRvIGxhdGNoIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbnkgb3RoZXIgbW9kZSBleGNlcHQgcG9zc2libHkgZGlnaXQgKHdoaWNoIHVzZXMgb25seSA0IGJpdHMpLiAgQW55XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciBsYXRjaCB3b3VsZCBiZSBlcXVhbGx5IHN1Y2Nlc3NmdWwgKmFmdGVyKiB0aGlzIGNoYXJhY3RlciwgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3b3VsZG4ndCBzYXZlIGFueSBiaXRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF0Y2hTdGF0ZSA9IHN0YXRlTm9CaW5hcnkubGF0Y2hBbmRBcHBlbmQobW9kZSwgY2hhckluTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsYXRjaFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgZ2VuZXJhdGluZyB0aGUgY2hhcmFjdGVyIGJ5IHN3aXRjaGluZyB0byBpdHMgbW9kZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFySW5DdXJyZW50VGFibGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIFNISUZUX1RBQkxFW3N0YXRlLmdldE1vZGUoKV1bbW9kZV0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQgbmV2ZXIgbWFrZXMgc2Vuc2UgdG8gdGVtcG9yYXJpbHkgc2hpZnQgdG8gYW5vdGhlciBtb2RlIGlmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhcmFjdGVyIGV4aXN0cyBpbiB0aGUgY3VycmVudCBtb2RlLiAgVGhhdCBjYW4gbmV2ZXIgc2F2ZSBiaXRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hpZnRTdGF0ZSA9IHN0YXRlTm9CaW5hcnkuc2hpZnRBbmRBcHBlbmQobW9kZSwgY2hhckluTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChzaGlmdFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5nZXRCaW5hcnlTaGlmdEJ5dGVDb3VudCgpID4gMCB8fFxuICAgICAgICAgICAgICAgIENIQVJfTUFQW3N0YXRlLmdldE1vZGUoKV1bY2hdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gSXQncyBuZXZlciB3b3J0aHdoaWxlIHRvIGdvIGludG8gYmluYXJ5IHNoaWZ0IG1vZGUgaWYgeW91J3JlIG5vdCBhbHJlYWR5XG4gICAgICAgICAgICAgICAgLy8gaW4gYmluYXJ5IHNoaWZ0IG1vZGUsIGFuZCB0aGUgY2hhcmFjdGVyIGV4aXN0cyBpbiB5b3VyIGN1cnJlbnQgbW9kZS5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IGNhbiBuZXZlciBzYXZlIGJpdHMgb3ZlciBqdXN0IG91dHB1dHRpbmcgdGhlIGNoYXIgaW4gdGhlIGN1cnJlbnQgbW9kZS5cbiAgICAgICAgICAgICAgICBsZXQgYmluYXJ5U3RhdGUgPSBzdGF0ZS5hZGRCaW5hcnlTaGlmdENoYXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJpbmFyeVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgdXBkYXRlU3RhdGVMaXN0Rm9yUGFpcihzdGF0ZXMsIGluZGV4LCBwYWlyQ29kZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzdGF0ZSAvKlN0YXRlKi8gb2Ygc3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUZvclBhaXIoc3RhdGUsIGluZGV4LCBwYWlyQ29kZSwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5U3RhdGVzKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHVwZGF0ZVN0YXRlRm9yUGFpcihzdGF0ZSwgaW5kZXgsIHBhaXJDb2RlLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGxldCBzdGF0ZU5vQmluYXJ5ID0gc3RhdGUuZW5kQmluYXJ5U2hpZnQoaW5kZXgpO1xuICAgICAgICAgICAgLy8gUG9zc2liaWxpdHkgMS4gIExhdGNoIHRvIEMuTU9ERV9QVU5DVCwgYW5kIHRoZW4gYXBwZW5kIHRoaXMgY29kZVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goc3RhdGVOb0JpbmFyeS5sYXRjaEFuZEFwcGVuZChNT0RFX1BVTkNULCBwYWlyQ29kZSkpO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmdldE1vZGUoKSAhPT0gTU9ERV9QVU5DVCkge1xuICAgICAgICAgICAgICAgIC8vIFBvc3NpYmlsaXR5IDIuICBTaGlmdCB0byBDLk1PREVfUFVOQ1QsIGFuZCB0aGVuIGFwcGVuZCB0aGlzIGNvZGUuXG4gICAgICAgICAgICAgICAgLy8gRXZlcnkgc3RhdGUgZXhjZXB0IEMuTU9ERV9QVU5DVCAoaGFuZGxlZCBhYm92ZSkgY2FuIHNoaWZ0XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goc3RhdGVOb0JpbmFyeS5zaGlmdEFuZEFwcGVuZChNT0RFX1BVTkNULCBwYWlyQ29kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhaXJDb2RlID09PSAzIHx8IHBhaXJDb2RlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgLy8gYm90aCBjaGFyYWN0ZXJzIGFyZSBpbiBESUdJVFMuICBTb21ldGltZXMgYmV0dGVyIHRvIGp1c3QgYWRkIHR3byBkaWdpdHNcbiAgICAgICAgICAgICAgICBsZXQgZGlnaXRTdGF0ZSA9IHN0YXRlTm9CaW5hcnlcbiAgICAgICAgICAgICAgICAgICAgLmxhdGNoQW5kQXBwZW5kKE1PREVfRElHSVQsIDE2IC0gcGFpckNvZGUpIC8vIHBlcmlvZCBvciBjb21tYSBpbiBESUdJVFxuICAgICAgICAgICAgICAgICAgICAubGF0Y2hBbmRBcHBlbmQoTU9ERV9ESUdJVCwgMSk7IC8vIHNwYWNlIGluIERJR0lUXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZGlnaXRTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuZ2V0QmluYXJ5U2hpZnRCeXRlQ291bnQoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBJdCBvbmx5IG1ha2VzIHNlbnNlIHRvIGRvIHRoZSBjaGFyYWN0ZXJzIGFzIGJpbmFyeSBpZiB3ZSdyZSBhbHJlYWR5XG4gICAgICAgICAgICAgICAgLy8gaW4gYmluYXJ5IG1vZGUuXG4gICAgICAgICAgICAgICAgbGV0IGJpbmFyeVN0YXRlID0gc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgLmFkZEJpbmFyeVNoaWZ0Q2hhcihpbmRleClcbiAgICAgICAgICAgICAgICAgICAgLmFkZEJpbmFyeVNoaWZ0Q2hhcihpbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJpbmFyeVN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgc2ltcGxpZnlTdGF0ZXMoc3RhdGVzKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5ld1N0YXRlIG9mIHN0YXRlcykge1xuICAgICAgICAgICAgICAgIGxldCBhZGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2xkU3RhdGUgb2YgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRTdGF0ZS5pc0JldHRlclRoYW5PckVxdWFsVG8obmV3U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0ZS5pc0JldHRlclRoYW5PckVxdWFsVG8ob2xkU3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRvci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoeCA9PiB4ICE9PSBvbGRTdGF0ZSk7IC8vIHJlbW92ZSBvbGQgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWRkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDb3B5cmlnaHQgMjAxMyBaWGluZyBhdXRob3JzXG4gICAgICpcbiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgKlxuICAgICAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICpcbiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgKi9cbiAgICAvLyBwYWNrYWdlIGNvbS5nb29nbGUuenhpbmcuYXp0ZWMuZW5jb2RlcjtcbiAgICAvLyBpbXBvcnQgY29tLmdvb2dsZS56eGluZy5jb21tb24uQml0QXJyYXk7XG4gICAgLy8gaW1wb3J0IGNvbS5nb29nbGUuenhpbmcuY29tbW9uLkJpdE1hdHJpeDtcbiAgICAvLyBpbXBvcnQgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24uR2VuZXJpY0dGO1xuICAgIC8vIGltcG9ydCBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbi5SZWVkU29sb21vbkVuY29kZXI7XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIEF6dGVjIDJEIGJhcmNvZGVzLlxuICAgICAqXG4gICAgICogQGF1dGhvciBSdXN0YW0gQWJkdWxsYWV2XG4gICAgICovXG4gICAgLypwdWJsaWMgZmluYWwqLyBjbGFzcyBFbmNvZGVyJDEge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYmluYXJ5IGNvbnRlbnQgYXMgYW4gQXp0ZWMgc3ltYm9sXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIGlucHV0IGRhdGEgc3RyaW5nXG4gICAgICAgICAqIEByZXR1cm4gQXp0ZWMgc3ltYm9sIG1hdHJpeCB3aXRoIG1ldGFkYXRhXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgZW5jb2RlQnl0ZXMoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIEVuY29kZXIkMS5lbmNvZGUoZGF0YSwgRW5jb2RlciQxLkRFRkFVTFRfRUNfUEVSQ0VOVCwgRW5jb2RlciQxLkRFRkFVTFRfQVpURUNfTEFZRVJTKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYmluYXJ5IGNvbnRlbnQgYXMgYW4gQXp0ZWMgc3ltYm9sXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIGlucHV0IGRhdGEgc3RyaW5nXG4gICAgICAgICAqIEBwYXJhbSBtaW5FQ0NQZXJjZW50IG1pbmltYWwgcGVyY2VudGFnZSBvZiBlcnJvciBjaGVjayB3b3JkcyAoQWNjb3JkaW5nIHRvIElTTy9JRUMgMjQ3Nzg6MjAwOCxcbiAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgYSBtaW5pbXVtIG9mIDIzJSArIDMgd29yZHMgaXMgcmVjb21tZW5kZWQpXG4gICAgICAgICAqIEBwYXJhbSB1c2VyU3BlY2lmaWVkTGF5ZXJzIGlmIG5vbi16ZXJvLCBhIHVzZXItc3BlY2lmaWVkIHZhbHVlIGZvciB0aGUgbnVtYmVyIG9mIGxheWVyc1xuICAgICAgICAgKiBAcmV0dXJuIEF6dGVjIHN5bWJvbCBtYXRyaXggd2l0aCBtZXRhZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGVuY29kZShkYXRhLCBtaW5FQ0NQZXJjZW50LCB1c2VyU3BlY2lmaWVkTGF5ZXJzKSB7XG4gICAgICAgICAgICAvLyBIaWdoLWxldmVsIGVuY29kZVxuICAgICAgICAgICAgbGV0IGJpdHMgPSBuZXcgSGlnaExldmVsRW5jb2RlcihkYXRhKS5lbmNvZGUoKTtcbiAgICAgICAgICAgIC8vIHN0dWZmIGJpdHMgYW5kIGNob29zZSBzeW1ib2wgc2l6ZVxuICAgICAgICAgICAgbGV0IGVjY0JpdHMgPSBJbnRlZ2VyLnRydW5jRGl2aXNpb24oKGJpdHMuZ2V0U2l6ZSgpICogbWluRUNDUGVyY2VudCksIDEwMCkgKyAxMTtcbiAgICAgICAgICAgIGxldCB0b3RhbFNpemVCaXRzID0gYml0cy5nZXRTaXplKCkgKyBlY2NCaXRzO1xuICAgICAgICAgICAgbGV0IGNvbXBhY3Q7XG4gICAgICAgICAgICBsZXQgbGF5ZXJzO1xuICAgICAgICAgICAgbGV0IHRvdGFsQml0c0luTGF5ZXI7XG4gICAgICAgICAgICBsZXQgd29yZFNpemU7XG4gICAgICAgICAgICBsZXQgc3R1ZmZlZEJpdHM7XG4gICAgICAgICAgICBpZiAodXNlclNwZWNpZmllZExheWVycyAhPT0gRW5jb2RlciQxLkRFRkFVTFRfQVpURUNfTEFZRVJTKSB7XG4gICAgICAgICAgICAgICAgY29tcGFjdCA9IHVzZXJTcGVjaWZpZWRMYXllcnMgPCAwO1xuICAgICAgICAgICAgICAgIGxheWVycyA9IE1hdGguYWJzKHVzZXJTcGVjaWZpZWRMYXllcnMpO1xuICAgICAgICAgICAgICAgIGlmIChsYXllcnMgPiAoY29tcGFjdCA/IEVuY29kZXIkMS5NQVhfTkJfQklUU19DT01QQUNUIDogRW5jb2RlciQxLk1BWF9OQl9CSVRTKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZ1V0aWxzLmZvcm1hdCgnSWxsZWdhbCB2YWx1ZSAlcyBmb3IgbGF5ZXJzJywgdXNlclNwZWNpZmllZExheWVycykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3RhbEJpdHNJbkxheWVyID0gRW5jb2RlciQxLnRvdGFsQml0c0luTGF5ZXIobGF5ZXJzLCBjb21wYWN0KTtcbiAgICAgICAgICAgICAgICB3b3JkU2l6ZSA9IEVuY29kZXIkMS5XT1JEX1NJWkVbbGF5ZXJzXTtcbiAgICAgICAgICAgICAgICBsZXQgdXNhYmxlQml0c0luTGF5ZXJzID0gdG90YWxCaXRzSW5MYXllciAtICh0b3RhbEJpdHNJbkxheWVyICUgd29yZFNpemUpO1xuICAgICAgICAgICAgICAgIHN0dWZmZWRCaXRzID0gRW5jb2RlciQxLnN0dWZmQml0cyhiaXRzLCB3b3JkU2l6ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0dWZmZWRCaXRzLmdldFNpemUoKSArIGVjY0JpdHMgPiB1c2FibGVCaXRzSW5MYXllcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignRGF0YSB0byBsYXJnZSBmb3IgdXNlciBzcGVjaWZpZWQgbGF5ZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhY3QgJiYgc3R1ZmZlZEJpdHMuZ2V0U2l6ZSgpID4gd29yZFNpemUgKiA2NCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb21wYWN0IGZvcm1hdCBvbmx5IGFsbG93cyA2NCBkYXRhIHdvcmRzLCB0aG91Z2ggQzQgY2FuIGhvbGQgbW9yZSB3b3JkcyB0aGFuIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignRGF0YSB0byBsYXJnZSBmb3IgdXNlciBzcGVjaWZpZWQgbGF5ZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB3b3JkU2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgc3R1ZmZlZEJpdHMgPSBudWxsO1xuICAgICAgICAgICAgICAgIC8vIFdlIGxvb2sgYXQgdGhlIHBvc3NpYmxlIHRhYmxlIHNpemVzIGluIHRoZSBvcmRlciBDb21wYWN0MSwgQ29tcGFjdDIsIENvbXBhY3QzLFxuICAgICAgICAgICAgICAgIC8vIENvbXBhY3Q0LCBOb3JtYWw0LC4uLiAgTm9ybWFsKGkpIGZvciBpIDwgNCBpc24ndCB0eXBpY2FsbHkgdXNlZCBzaW5jZSBDb21wYWN0KGkrMSlcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGUgc2FtZSBzaXplLCBidXQgaGFzIG1vcmUgZGF0YS5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID4gRW5jb2RlciQxLk1BWF9OQl9CSVRTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCdEYXRhIHRvbyBsYXJnZSBmb3IgYW4gQXp0ZWMgY29kZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhY3QgPSBpIDw9IDM7XG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IGNvbXBhY3QgPyBpICsgMSA6IGk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQml0c0luTGF5ZXIgPSBFbmNvZGVyJDEudG90YWxCaXRzSW5MYXllcihsYXllcnMsIGNvbXBhY3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxTaXplQml0cyA+IHRvdGFsQml0c0luTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFtSZV1zdHVmZiB0aGUgYml0cyBpZiB0aGlzIGlzIHRoZSBmaXJzdCBvcHBvcnR1bml0eSwgb3IgaWYgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdvcmRTaXplIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHVmZmVkQml0cyA9PSBudWxsIHx8IHdvcmRTaXplICE9PSBFbmNvZGVyJDEuV09SRF9TSVpFW2xheWVyc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRTaXplID0gRW5jb2RlciQxLldPUkRfU0laRVtsYXllcnNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZmZlZEJpdHMgPSBFbmNvZGVyJDEuc3R1ZmZCaXRzKGJpdHMsIHdvcmRTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgdXNhYmxlQml0c0luTGF5ZXJzID0gdG90YWxCaXRzSW5MYXllciAtICh0b3RhbEJpdHNJbkxheWVyICUgd29yZFNpemUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGFjdCAmJiBzdHVmZmVkQml0cy5nZXRTaXplKCkgPiB3b3JkU2l6ZSAqIDY0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wYWN0IGZvcm1hdCBvbmx5IGFsbG93cyA2NCBkYXRhIHdvcmRzLCB0aG91Z2ggQzQgY2FuIGhvbGQgbW9yZSB3b3JkcyB0aGFuIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHVmZmVkQml0cy5nZXRTaXplKCkgKyBlY2NCaXRzIDw9IHVzYWJsZUJpdHNJbkxheWVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbWVzc2FnZUJpdHMgPSBFbmNvZGVyJDEuZ2VuZXJhdGVDaGVja1dvcmRzKHN0dWZmZWRCaXRzLCB0b3RhbEJpdHNJbkxheWVyLCB3b3JkU2l6ZSk7XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBtb2RlIG1lc3NhZ2VcbiAgICAgICAgICAgIGxldCBtZXNzYWdlU2l6ZUluV29yZHMgPSBzdHVmZmVkQml0cy5nZXRTaXplKCkgLyB3b3JkU2l6ZTtcbiAgICAgICAgICAgIGxldCBtb2RlTWVzc2FnZSA9IEVuY29kZXIkMS5nZW5lcmF0ZU1vZGVNZXNzYWdlKGNvbXBhY3QsIGxheWVycywgbWVzc2FnZVNpemVJbldvcmRzKTtcbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHN5bWJvbFxuICAgICAgICAgICAgbGV0IGJhc2VNYXRyaXhTaXplID0gKGNvbXBhY3QgPyAxMSA6IDE0KSArIGxheWVycyAqIDQ7IC8vIG5vdCBpbmNsdWRpbmcgYWxpZ25tZW50IGxpbmVzXG4gICAgICAgICAgICBsZXQgYWxpZ25tZW50TWFwID0gbmV3IEludDMyQXJyYXkoYmFzZU1hdHJpeFNpemUpO1xuICAgICAgICAgICAgbGV0IG1hdHJpeFNpemU7XG4gICAgICAgICAgICBpZiAoY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGFsaWdubWVudCBtYXJrcyBpbiBjb21wYWN0IG1vZGUsIGFsaWdubWVudE1hcCBpcyBhIG5vLW9wXG4gICAgICAgICAgICAgICAgbWF0cml4U2l6ZSA9IGJhc2VNYXRyaXhTaXplO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBhbGlnbm1lbnRNYXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50TWFwW2ldID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRyaXhTaXplID0gYmFzZU1hdHJpeFNpemUgKyAxICsgMiAqIEludGVnZXIudHJ1bmNEaXZpc2lvbigoSW50ZWdlci50cnVuY0RpdmlzaW9uKGJhc2VNYXRyaXhTaXplLCAyKSAtIDEpLCAxNSk7XG4gICAgICAgICAgICAgICAgbGV0IG9yaWdDZW50ZXIgPSBJbnRlZ2VyLnRydW5jRGl2aXNpb24oYmFzZU1hdHJpeFNpemUsIDIpO1xuICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBJbnRlZ2VyLnRydW5jRGl2aXNpb24obWF0cml4U2l6ZSwgMik7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMDsgaSA8IG9yaWdDZW50ZXI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3T2Zmc2V0ID0gaSArIEludGVnZXIudHJ1bmNEaXZpc2lvbihpLCAxNSk7XG4gICAgICAgICAgICAgICAgICAgIGFsaWdubWVudE1hcFtvcmlnQ2VudGVyIC0gaSAtIDFdID0gY2VudGVyIC0gbmV3T2Zmc2V0IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ25tZW50TWFwW29yaWdDZW50ZXIgKyBpXSA9IGNlbnRlciArIG5ld09mZnNldCArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG1hdHJpeCA9IG5ldyBCaXRNYXRyaXgobWF0cml4U2l6ZSk7XG4gICAgICAgICAgICAvLyBkcmF3IGRhdGEgYml0c1xuICAgICAgICAgICAgZm9yIChsZXQgaSAvKmludCovID0gMCwgcm93T2Zmc2V0ID0gMDsgaSA8IGxheWVyczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJvd1NpemUgPSAobGF5ZXJzIC0gaSkgKiA0ICsgKGNvbXBhY3QgPyA5IDogMTIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogLyppbnQqLyA9IDA7IGogPCByb3dTaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbk9mZnNldCA9IGogKiAyO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrIC8qaW50Ki8gPSAwOyBrIDwgMjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUJpdHMuZ2V0KHJvd09mZnNldCArIGNvbHVtbk9mZnNldCArIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChhbGlnbm1lbnRNYXBbaSAqIDIgKyBrXSwgYWxpZ25tZW50TWFwW2kgKiAyICsgal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCaXRzLmdldChyb3dPZmZzZXQgKyByb3dTaXplICogMiArIGNvbHVtbk9mZnNldCArIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChhbGlnbm1lbnRNYXBbaSAqIDIgKyBqXSwgYWxpZ25tZW50TWFwW2Jhc2VNYXRyaXhTaXplIC0gMSAtIGkgKiAyIC0ga10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCaXRzLmdldChyb3dPZmZzZXQgKyByb3dTaXplICogNCArIGNvbHVtbk9mZnNldCArIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChhbGlnbm1lbnRNYXBbYmFzZU1hdHJpeFNpemUgLSAxIC0gaSAqIDIgLSBrXSwgYWxpZ25tZW50TWFwW2Jhc2VNYXRyaXhTaXplIC0gMSAtIGkgKiAyIC0gal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCaXRzLmdldChyb3dPZmZzZXQgKyByb3dTaXplICogNiArIGNvbHVtbk9mZnNldCArIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChhbGlnbm1lbnRNYXBbYmFzZU1hdHJpeFNpemUgLSAxIC0gaSAqIDIgLSBqXSwgYWxpZ25tZW50TWFwW2kgKiAyICsga10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvd09mZnNldCArPSByb3dTaXplICogODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRyYXcgbW9kZSBtZXNzYWdlXG4gICAgICAgICAgICBFbmNvZGVyJDEuZHJhd01vZGVNZXNzYWdlKG1hdHJpeCwgY29tcGFjdCwgbWF0cml4U2l6ZSwgbW9kZU1lc3NhZ2UpO1xuICAgICAgICAgICAgLy8gZHJhdyBhbGlnbm1lbnQgbWFya3NcbiAgICAgICAgICAgIGlmIChjb21wYWN0KSB7XG4gICAgICAgICAgICAgICAgRW5jb2RlciQxLmRyYXdCdWxsc0V5ZShtYXRyaXgsIEludGVnZXIudHJ1bmNEaXZpc2lvbihtYXRyaXhTaXplLCAyKSwgNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBFbmNvZGVyJDEuZHJhd0J1bGxzRXllKG1hdHJpeCwgSW50ZWdlci50cnVuY0RpdmlzaW9uKG1hdHJpeFNpemUsIDIpLCA3KTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwLCBqID0gMDsgaSA8IEludGVnZXIudHJ1bmNEaXZpc2lvbihiYXNlTWF0cml4U2l6ZSwgMikgLSAxOyBpICs9IDE1LCBqICs9IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgLyppbnQqLyA9IEludGVnZXIudHJ1bmNEaXZpc2lvbihtYXRyaXhTaXplLCAyKSAmIDE7IGsgPCBtYXRyaXhTaXplOyBrICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoSW50ZWdlci50cnVuY0RpdmlzaW9uKG1hdHJpeFNpemUsIDIpIC0gaiwgayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KEludGVnZXIudHJ1bmNEaXZpc2lvbihtYXRyaXhTaXplLCAyKSArIGosIGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChrLCBJbnRlZ2VyLnRydW5jRGl2aXNpb24obWF0cml4U2l6ZSwgMikgLSBqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoaywgSW50ZWdlci50cnVuY0RpdmlzaW9uKG1hdHJpeFNpemUsIDIpICsgaik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYXp0ZWMgPSBuZXcgQXp0ZWNDb2RlKCk7XG4gICAgICAgICAgICBhenRlYy5zZXRDb21wYWN0KGNvbXBhY3QpO1xuICAgICAgICAgICAgYXp0ZWMuc2V0U2l6ZShtYXRyaXhTaXplKTtcbiAgICAgICAgICAgIGF6dGVjLnNldExheWVycyhsYXllcnMpO1xuICAgICAgICAgICAgYXp0ZWMuc2V0Q29kZVdvcmRzKG1lc3NhZ2VTaXplSW5Xb3Jkcyk7XG4gICAgICAgICAgICBhenRlYy5zZXRNYXRyaXgobWF0cml4KTtcbiAgICAgICAgICAgIHJldHVybiBhenRlYztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZHJhd0J1bGxzRXllKG1hdHJpeCwgY2VudGVyLCBzaXplKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpIC8qaW50Ki8gPSAwOyBpIDwgc2l6ZTsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiAvKmludCovID0gY2VudGVyIC0gaTsgaiA8PSBjZW50ZXIgKyBpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChqLCBjZW50ZXIgLSBpKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChqLCBjZW50ZXIgKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChjZW50ZXIgLSBpLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChjZW50ZXIgKyBpLCBqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXRyaXguc2V0KGNlbnRlciAtIHNpemUsIGNlbnRlciAtIHNpemUpO1xuICAgICAgICAgICAgbWF0cml4LnNldChjZW50ZXIgLSBzaXplICsgMSwgY2VudGVyIC0gc2l6ZSk7XG4gICAgICAgICAgICBtYXRyaXguc2V0KGNlbnRlciAtIHNpemUsIGNlbnRlciAtIHNpemUgKyAxKTtcbiAgICAgICAgICAgIG1hdHJpeC5zZXQoY2VudGVyICsgc2l6ZSwgY2VudGVyIC0gc2l6ZSk7XG4gICAgICAgICAgICBtYXRyaXguc2V0KGNlbnRlciArIHNpemUsIGNlbnRlciAtIHNpemUgKyAxKTtcbiAgICAgICAgICAgIG1hdHJpeC5zZXQoY2VudGVyICsgc2l6ZSwgY2VudGVyICsgc2l6ZSAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZW5lcmF0ZU1vZGVNZXNzYWdlKGNvbXBhY3QsIGxheWVycywgbWVzc2FnZVNpemVJbldvcmRzKSB7XG4gICAgICAgICAgICBsZXQgbW9kZU1lc3NhZ2UgPSBuZXcgQml0QXJyYXkoKTtcbiAgICAgICAgICAgIGlmIChjb21wYWN0KSB7XG4gICAgICAgICAgICAgICAgbW9kZU1lc3NhZ2UuYXBwZW5kQml0cyhsYXllcnMgLSAxLCAyKTtcbiAgICAgICAgICAgICAgICBtb2RlTWVzc2FnZS5hcHBlbmRCaXRzKG1lc3NhZ2VTaXplSW5Xb3JkcyAtIDEsIDYpO1xuICAgICAgICAgICAgICAgIG1vZGVNZXNzYWdlID0gRW5jb2RlciQxLmdlbmVyYXRlQ2hlY2tXb3Jkcyhtb2RlTWVzc2FnZSwgMjgsIDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZU1lc3NhZ2UuYXBwZW5kQml0cyhsYXllcnMgLSAxLCA1KTtcbiAgICAgICAgICAgICAgICBtb2RlTWVzc2FnZS5hcHBlbmRCaXRzKG1lc3NhZ2VTaXplSW5Xb3JkcyAtIDEsIDExKTtcbiAgICAgICAgICAgICAgICBtb2RlTWVzc2FnZSA9IEVuY29kZXIkMS5nZW5lcmF0ZUNoZWNrV29yZHMobW9kZU1lc3NhZ2UsIDQwLCA0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RlTWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZHJhd01vZGVNZXNzYWdlKG1hdHJpeCwgY29tcGFjdCwgbWF0cml4U2l6ZSwgbW9kZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGxldCBjZW50ZXIgPSBJbnRlZ2VyLnRydW5jRGl2aXNpb24obWF0cml4U2l6ZSwgMik7XG4gICAgICAgICAgICBpZiAoY29tcGFjdCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IGNlbnRlciAtIDMgKyBpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZU1lc3NhZ2UuZ2V0KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KG9mZnNldCwgY2VudGVyIC0gNSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVNZXNzYWdlLmdldChpICsgNykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoY2VudGVyICsgNSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZU1lc3NhZ2UuZ2V0KDIwIC0gaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQob2Zmc2V0LCBjZW50ZXIgKyA1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZU1lc3NhZ2UuZ2V0KDI3IC0gaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoY2VudGVyIC0gNSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBjZW50ZXIgLSA1ICsgaSArIEludGVnZXIudHJ1bmNEaXZpc2lvbihpLCA1KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVNZXNzYWdlLmdldChpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChvZmZzZXQsIGNlbnRlciAtIDcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlTWVzc2FnZS5nZXQoaSArIDEwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChjZW50ZXIgKyA3LCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlTWVzc2FnZS5nZXQoMjkgLSBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChvZmZzZXQsIGNlbnRlciArIDcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlTWVzc2FnZS5nZXQoMzkgLSBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNldChjZW50ZXIgLSA3LCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZW5lcmF0ZUNoZWNrV29yZHMoYml0QXJyYXksIHRvdGFsQml0cywgd29yZFNpemUpIHtcbiAgICAgICAgICAgIC8vIGJpdEFycmF5IGlzIGd1YXJhbnRlZWQgdG8gYmUgYSBtdWx0aXBsZSBvZiB0aGUgd29yZFNpemUsIHNvIG5vIHBhZGRpbmcgbmVlZGVkXG4gICAgICAgICAgICBsZXQgbWVzc2FnZVNpemVJbldvcmRzID0gYml0QXJyYXkuZ2V0U2l6ZSgpIC8gd29yZFNpemU7XG4gICAgICAgICAgICBsZXQgcnMgPSBuZXcgUmVlZFNvbG9tb25FbmNvZGVyKEVuY29kZXIkMS5nZXRHRih3b3JkU2l6ZSkpO1xuICAgICAgICAgICAgbGV0IHRvdGFsV29yZHMgPSBJbnRlZ2VyLnRydW5jRGl2aXNpb24odG90YWxCaXRzLCB3b3JkU2l6ZSk7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZVdvcmRzID0gRW5jb2RlciQxLmJpdHNUb1dvcmRzKGJpdEFycmF5LCB3b3JkU2l6ZSwgdG90YWxXb3Jkcyk7XG4gICAgICAgICAgICBycy5lbmNvZGUobWVzc2FnZVdvcmRzLCB0b3RhbFdvcmRzIC0gbWVzc2FnZVNpemVJbldvcmRzKTtcbiAgICAgICAgICAgIGxldCBzdGFydFBhZCA9IHRvdGFsQml0cyAlIHdvcmRTaXplO1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2VCaXRzID0gbmV3IEJpdEFycmF5KCk7XG4gICAgICAgICAgICBtZXNzYWdlQml0cy5hcHBlbmRCaXRzKDAsIHN0YXJ0UGFkKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVzc2FnZVdvcmQgLyo6IGludCovIG9mIEFycmF5LmZyb20obWVzc2FnZVdvcmRzKSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VCaXRzLmFwcGVuZEJpdHMobWVzc2FnZVdvcmQsIHdvcmRTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlQml0cztcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgYml0c1RvV29yZHMoc3R1ZmZlZEJpdHMsIHdvcmRTaXplLCB0b3RhbFdvcmRzKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IG5ldyBJbnQzMkFycmF5KHRvdGFsV29yZHMpO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIG4gPSBzdHVmZmVkQml0cy5nZXRTaXplKCkgLyB3b3JkU2l6ZTsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiAvKmludCovID0gMDsgaiA8IHdvcmRTaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgfD0gc3R1ZmZlZEJpdHMuZ2V0KGkgKiB3b3JkU2l6ZSArIGopID8gKDEgPDwgd29yZFNpemUgLSBqIC0gMSkgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZXNzYWdlW2ldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0R0Yod29yZFNpemUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAod29yZFNpemUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHZW5lcmljR0YuQVpURUNfUEFSQU07XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjtcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHZW5lcmljR0YuQVpURUNfREFUQV84O1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHZW5lcmljR0YuQVpURUNfREFUQV8xMDtcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2VuZXJpY0dGLkFaVEVDX0RBVEFfMTI7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignVW5zdXBwb3J0ZWQgd29yZCBzaXplICcgKyB3b3JkU2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHN0dWZmQml0cyhiaXRzLCB3b3JkU2l6ZSkge1xuICAgICAgICAgICAgbGV0IG91dCA9IG5ldyBCaXRBcnJheSgpO1xuICAgICAgICAgICAgbGV0IG4gPSBiaXRzLmdldFNpemUoKTtcbiAgICAgICAgICAgIGxldCBtYXNrID0gKDEgPDwgd29yZFNpemUpIC0gMjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgLyppbnQqLyA9IDA7IGkgPCBuOyBpICs9IHdvcmRTaXplKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdvcmQgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogLyppbnQqLyA9IDA7IGogPCB3b3JkU2l6ZTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpICsgaiA+PSBuIHx8IGJpdHMuZ2V0KGkgKyBqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29yZCB8PSAxIDw8ICh3b3JkU2l6ZSAtIDEgLSBqKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHdvcmQgJiBtYXNrKSA9PT0gbWFzaykge1xuICAgICAgICAgICAgICAgICAgICBvdXQuYXBwZW5kQml0cyh3b3JkICYgbWFzaywgd29yZFNpemUpO1xuICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCh3b3JkICYgbWFzaykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LmFwcGVuZEJpdHMod29yZCB8IDEsIHdvcmRTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LmFwcGVuZEJpdHMod29yZCwgd29yZFNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHRvdGFsQml0c0luTGF5ZXIobGF5ZXJzLCBjb21wYWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gKChjb21wYWN0ID8gODggOiAxMTIpICsgMTYgKiBsYXllcnMpICogbGF5ZXJzO1xuICAgICAgICB9XG4gICAgfVxuICAgIEVuY29kZXIkMS5ERUZBVUxUX0VDX1BFUkNFTlQgPSAzMzsgLy8gZGVmYXVsdCBtaW5pbWFsIHBlcmNlbnRhZ2Ugb2YgZXJyb3IgY2hlY2sgd29yZHNcbiAgICBFbmNvZGVyJDEuREVGQVVMVF9BWlRFQ19MQVlFUlMgPSAwO1xuICAgIEVuY29kZXIkMS5NQVhfTkJfQklUUyA9IDMyO1xuICAgIEVuY29kZXIkMS5NQVhfTkJfQklUU19DT01QQUNUID0gNDtcbiAgICBFbmNvZGVyJDEuV09SRF9TSVpFID0gSW50MzJBcnJheS5mcm9tKFtcbiAgICAgICAgNCwgNiwgNiwgOCwgOCwgOCwgOCwgOCwgOCwgMTAsIDEwLCAxMCwgMTAsIDEwLCAxMCwgMTAsIDEwLCAxMCwgMTAsIDEwLCAxMCwgMTAsIDEwLFxuICAgICAgICAxMiwgMTIsIDEyLCAxMiwgMTIsIDEyLCAxMiwgMTIsIDEyLCAxMlxuICAgIF0pO1xuXG4gICAgLypcbiAgICAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnNcbiAgICAqXG4gICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gICAgKlxuICAgICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAgICAqXG4gICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICAgICovXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhbiBBenRlYyBjb2RlIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uXG4gICAgICovXG4gICAgLypwdWJsaWMgZmluYWwqLyBjbGFzcyBBenRlY1dyaXRlciB7XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICBlbmNvZGUoY29udGVudHMsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlV2l0aEhpbnRzKGNvbnRlbnRzLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEBPdmVycmlkZVxuICAgICAgICBlbmNvZGVXaXRoSGludHMoY29udGVudHMsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgaGludHMpIHtcbiAgICAgICAgICAgIGxldCBjaGFyc2V0ID0gU3RhbmRhcmRDaGFyc2V0cy5JU09fODg1OV8xO1xuICAgICAgICAgICAgbGV0IGVjY1BlcmNlbnQgPSBFbmNvZGVyJDEuREVGQVVMVF9FQ19QRVJDRU5UO1xuICAgICAgICAgICAgbGV0IGxheWVycyA9IEVuY29kZXIkMS5ERUZBVUxUX0FaVEVDX0xBWUVSUztcbiAgICAgICAgICAgIGlmIChoaW50cyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhpbnRzLmhhcyhFbmNvZGVIaW50VHlwZSQxLkNIQVJBQ1RFUl9TRVQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJzZXQgPSBDaGFyc2V0LmZvck5hbWUoaGludHMuZ2V0KEVuY29kZUhpbnRUeXBlJDEuQ0hBUkFDVEVSX1NFVCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoaW50cy5oYXMoRW5jb2RlSGludFR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OKSkge1xuICAgICAgICAgICAgICAgICAgICBlY2NQZXJjZW50ID0gSW50ZWdlci5wYXJzZUludChoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5FUlJPUl9DT1JSRUNUSU9OKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhpbnRzLmhhcyhFbmNvZGVIaW50VHlwZSQxLkFaVEVDX0xBWUVSUykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gSW50ZWdlci5wYXJzZUludChoaW50cy5nZXQoRW5jb2RlSGludFR5cGUkMS5BWlRFQ19MQVlFUlMpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBBenRlY1dyaXRlci5lbmNvZGVMYXllcnMoY29udGVudHMsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgY2hhcnNldCwgZWNjUGVyY2VudCwgbGF5ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZW5jb2RlTGF5ZXJzKGNvbnRlbnRzLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQsIGNoYXJzZXQsIGVjY1BlcmNlbnQsIGxheWVycykge1xuICAgICAgICAgICAgaWYgKGZvcm1hdCAhPT0gQmFyY29kZUZvcm1hdCQxLkFaVEVDKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbignQ2FuIG9ubHkgZW5jb2RlIEFaVEVDLCBidXQgZ290ICcgKyBmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGF6dGVjID0gRW5jb2RlciQxLmVuY29kZShTdHJpbmdVdGlscy5nZXRCeXRlcyhjb250ZW50cywgY2hhcnNldCksIGVjY1BlcmNlbnQsIGxheWVycyk7XG4gICAgICAgICAgICByZXR1cm4gQXp0ZWNXcml0ZXIucmVuZGVyUmVzdWx0KGF6dGVjLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgcmVuZGVyUmVzdWx0KGNvZGUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGNvZGUuZ2V0TWF0cml4KCk7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbnB1dFdpZHRoID0gaW5wdXQuZ2V0V2lkdGgoKTtcbiAgICAgICAgICAgIGxldCBpbnB1dEhlaWdodCA9IGlucHV0LmdldEhlaWdodCgpO1xuICAgICAgICAgICAgbGV0IG91dHB1dFdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGlucHV0V2lkdGgpO1xuICAgICAgICAgICAgbGV0IG91dHB1dEhlaWdodCA9IE1hdGgubWF4KGhlaWdodCwgaW5wdXRIZWlnaHQpO1xuICAgICAgICAgICAgbGV0IG11bHRpcGxlID0gTWF0aC5taW4ob3V0cHV0V2lkdGggLyBpbnB1dFdpZHRoLCBvdXRwdXRIZWlnaHQgLyBpbnB1dEhlaWdodCk7XG4gICAgICAgICAgICBsZXQgbGVmdFBhZGRpbmcgPSAob3V0cHV0V2lkdGggLSAoaW5wdXRXaWR0aCAqIG11bHRpcGxlKSkgLyAyO1xuICAgICAgICAgICAgbGV0IHRvcFBhZGRpbmcgPSAob3V0cHV0SGVpZ2h0IC0gKGlucHV0SGVpZ2h0ICogbXVsdGlwbGUpKSAvIDI7XG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gbmV3IEJpdE1hdHJpeChvdXRwdXRXaWR0aCwgb3V0cHV0SGVpZ2h0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGlucHV0WSAvKmludCovID0gMCwgb3V0cHV0WSA9IHRvcFBhZGRpbmc7IGlucHV0WSA8IGlucHV0SGVpZ2h0OyBpbnB1dFkrKywgb3V0cHV0WSArPSBtdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBjb250ZW50cyBvZiB0aGlzIHJvdyBvZiB0aGUgYmFyY29kZVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGlucHV0WCAvKmludCovID0gMCwgb3V0cHV0WCA9IGxlZnRQYWRkaW5nOyBpbnB1dFggPCBpbnB1dFdpZHRoOyBpbnB1dFgrKywgb3V0cHV0WCArPSBtdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZ2V0KGlucHV0WCwgaW5wdXRZKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNldFJlZ2lvbihvdXRwdXRYLCBvdXRwdXRZLCBtdWx0aXBsZSwgbXVsdGlwbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydHMuQWJzdHJhY3RFeHBhbmRlZERlY29kZXIgPSBBYnN0cmFjdEV4cGFuZGVkRGVjb2RlcjtcbiAgICBleHBvcnRzLkFyZ3VtZW50RXhjZXB0aW9uID0gQXJndW1lbnRFeGNlcHRpb247XG4gICAgZXhwb3J0cy5Bcml0aG1ldGljRXhjZXB0aW9uID0gQXJpdGhtZXRpY0V4Y2VwdGlvbjtcbiAgICBleHBvcnRzLkF6dGVjQ29kZSA9IEF6dGVjQ29kZTtcbiAgICBleHBvcnRzLkF6dGVjQ29kZVJlYWRlciA9IEF6dGVjUmVhZGVyO1xuICAgIGV4cG9ydHMuQXp0ZWNDb2RlV3JpdGVyID0gQXp0ZWNXcml0ZXI7XG4gICAgZXhwb3J0cy5BenRlY0RlY29kZXIgPSBEZWNvZGVyO1xuICAgIGV4cG9ydHMuQXp0ZWNEZXRlY3RvciA9IERldGVjdG9yO1xuICAgIGV4cG9ydHMuQXp0ZWNEZXRlY3RvclJlc3VsdCA9IEF6dGVjRGV0ZWN0b3JSZXN1bHQ7XG4gICAgZXhwb3J0cy5BenRlY0VuY29kZXIgPSBFbmNvZGVyJDE7XG4gICAgZXhwb3J0cy5BenRlY0hpZ2hMZXZlbEVuY29kZXIgPSBIaWdoTGV2ZWxFbmNvZGVyO1xuICAgIGV4cG9ydHMuQXp0ZWNQb2ludCA9IFBvaW50O1xuICAgIGV4cG9ydHMuQmFyY29kZUZvcm1hdCA9IEJhcmNvZGVGb3JtYXQkMTtcbiAgICBleHBvcnRzLkJpbmFyaXplciA9IEJpbmFyaXplcjtcbiAgICBleHBvcnRzLkJpbmFyeUJpdG1hcCA9IEJpbmFyeUJpdG1hcDtcbiAgICBleHBvcnRzLkJpdEFycmF5ID0gQml0QXJyYXk7XG4gICAgZXhwb3J0cy5CaXRNYXRyaXggPSBCaXRNYXRyaXg7XG4gICAgZXhwb3J0cy5CaXRTb3VyY2UgPSBCaXRTb3VyY2U7XG4gICAgZXhwb3J0cy5Ccm93c2VyQXp0ZWNDb2RlUmVhZGVyID0gQnJvd3NlckF6dGVjQ29kZVJlYWRlcjtcbiAgICBleHBvcnRzLkJyb3dzZXJCYXJjb2RlUmVhZGVyID0gQnJvd3NlckJhcmNvZGVSZWFkZXI7XG4gICAgZXhwb3J0cy5Ccm93c2VyQ29kZVJlYWRlciA9IEJyb3dzZXJDb2RlUmVhZGVyO1xuICAgIGV4cG9ydHMuQnJvd3NlckRhdGFtYXRyaXhDb2RlUmVhZGVyID0gQnJvd3NlckRhdGFtYXRyaXhDb2RlUmVhZGVyO1xuICAgIGV4cG9ydHMuQnJvd3Nlck11bHRpRm9ybWF0UmVhZGVyID0gQnJvd3Nlck11bHRpRm9ybWF0UmVhZGVyO1xuICAgIGV4cG9ydHMuQnJvd3NlclBERjQxN1JlYWRlciA9IEJyb3dzZXJQREY0MTdSZWFkZXI7XG4gICAgZXhwb3J0cy5Ccm93c2VyUVJDb2RlUmVhZGVyID0gQnJvd3NlclFSQ29kZVJlYWRlcjtcbiAgICBleHBvcnRzLkJyb3dzZXJRUkNvZGVTdmdXcml0ZXIgPSBCcm93c2VyUVJDb2RlU3ZnV3JpdGVyO1xuICAgIGV4cG9ydHMuQ2hhcmFjdGVyU2V0RUNJID0gQ2hhcmFjdGVyU2V0RUNJO1xuICAgIGV4cG9ydHMuQ2hlY2tzdW1FeGNlcHRpb24gPSBDaGVja3N1bUV4Y2VwdGlvbjtcbiAgICBleHBvcnRzLkNvZGUxMjhSZWFkZXIgPSBDb2RlMTI4UmVhZGVyO1xuICAgIGV4cG9ydHMuQ29kZTM5UmVhZGVyID0gQ29kZTM5UmVhZGVyO1xuICAgIGV4cG9ydHMuRGF0YU1hdHJpeERlY29kZWRCaXRTdHJlYW1QYXJzZXIgPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyO1xuICAgIGV4cG9ydHMuRGF0YU1hdHJpeFJlYWRlciA9IERhdGFNYXRyaXhSZWFkZXI7XG4gICAgZXhwb3J0cy5EZWNvZGVIaW50VHlwZSA9IERlY29kZUhpbnRUeXBlJDE7XG4gICAgZXhwb3J0cy5EZWNvZGVyUmVzdWx0ID0gRGVjb2RlclJlc3VsdDtcbiAgICBleHBvcnRzLkRlZmF1bHRHcmlkU2FtcGxlciA9IERlZmF1bHRHcmlkU2FtcGxlcjtcbiAgICBleHBvcnRzLkRldGVjdG9yUmVzdWx0ID0gRGV0ZWN0b3JSZXN1bHQ7XG4gICAgZXhwb3J0cy5FQU4xM1JlYWRlciA9IEVBTjEzUmVhZGVyO1xuICAgIGV4cG9ydHMuRW5jb2RlSGludFR5cGUgPSBFbmNvZGVIaW50VHlwZSQxO1xuICAgIGV4cG9ydHMuRXhjZXB0aW9uID0gRXhjZXB0aW9uO1xuICAgIGV4cG9ydHMuRm9ybWF0RXhjZXB0aW9uID0gRm9ybWF0RXhjZXB0aW9uO1xuICAgIGV4cG9ydHMuR2VuZXJpY0dGID0gR2VuZXJpY0dGO1xuICAgIGV4cG9ydHMuR2VuZXJpY0dGUG9seSA9IEdlbmVyaWNHRlBvbHk7XG4gICAgZXhwb3J0cy5HbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXI7XG4gICAgZXhwb3J0cy5HcmlkU2FtcGxlciA9IEdyaWRTYW1wbGVyO1xuICAgIGV4cG9ydHMuR3JpZFNhbXBsZXJJbnN0YW5jZSA9IEdyaWRTYW1wbGVySW5zdGFuY2U7XG4gICAgZXhwb3J0cy5IVE1MQ2FudmFzRWxlbWVudEx1bWluYW5jZVNvdXJjZSA9IEhUTUxDYW52YXNFbGVtZW50THVtaW5hbmNlU291cmNlO1xuICAgIGV4cG9ydHMuSHlicmlkQmluYXJpemVyID0gSHlicmlkQmluYXJpemVyO1xuICAgIGV4cG9ydHMuSVRGUmVhZGVyID0gSVRGUmVhZGVyO1xuICAgIGV4cG9ydHMuSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uO1xuICAgIGV4cG9ydHMuSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gSWxsZWdhbFN0YXRlRXhjZXB0aW9uO1xuICAgIGV4cG9ydHMuSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZTtcbiAgICBleHBvcnRzLkx1bWluYW5jZVNvdXJjZSA9IEx1bWluYW5jZVNvdXJjZTtcbiAgICBleHBvcnRzLk1hdGhVdGlscyA9IE1hdGhVdGlscztcbiAgICBleHBvcnRzLk11bHRpRm9ybWF0T25lRFJlYWRlciA9IE11bHRpRm9ybWF0T25lRFJlYWRlcjtcbiAgICBleHBvcnRzLk11bHRpRm9ybWF0UmVhZGVyID0gTXVsdGlGb3JtYXRSZWFkZXI7XG4gICAgZXhwb3J0cy5NdWx0aUZvcm1hdFdyaXRlciA9IE11bHRpRm9ybWF0V3JpdGVyO1xuICAgIGV4cG9ydHMuTm90Rm91bmRFeGNlcHRpb24gPSBOb3RGb3VuZEV4Y2VwdGlvbjtcbiAgICBleHBvcnRzLk9uZURSZWFkZXIgPSBPbmVEUmVhZGVyO1xuICAgIGV4cG9ydHMuUERGNDE3RGVjb2RlZEJpdFN0cmVhbVBhcnNlciA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMjtcbiAgICBleHBvcnRzLlBERjQxN0RlY29kZXJFcnJvckNvcnJlY3Rpb24gPSBFcnJvckNvcnJlY3Rpb247XG4gICAgZXhwb3J0cy5QREY0MTdSZWFkZXIgPSBQREY0MTdSZWFkZXI7XG4gICAgZXhwb3J0cy5QREY0MTdSZXN1bHRNZXRhZGF0YSA9IFBERjQxN1Jlc3VsdE1ldGFkYXRhO1xuICAgIGV4cG9ydHMuUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybTtcbiAgICBleHBvcnRzLlBsYW5hcllVVkx1bWluYW5jZVNvdXJjZSA9IFBsYW5hcllVVkx1bWluYW5jZVNvdXJjZTtcbiAgICBleHBvcnRzLlFSQ29kZUJ5dGVNYXRyaXggPSBCeXRlTWF0cml4O1xuICAgIGV4cG9ydHMuUVJDb2RlRGF0YU1hc2sgPSBEYXRhTWFzaztcbiAgICBleHBvcnRzLlFSQ29kZURlY29kZWRCaXRTdHJlYW1QYXJzZXIgPSBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDE7XG4gICAgZXhwb3J0cy5RUkNvZGVEZWNvZGVyRXJyb3JDb3JyZWN0aW9uTGV2ZWwgPSBFcnJvckNvcnJlY3Rpb25MZXZlbDtcbiAgICBleHBvcnRzLlFSQ29kZURlY29kZXJGb3JtYXRJbmZvcm1hdGlvbiA9IEZvcm1hdEluZm9ybWF0aW9uO1xuICAgIGV4cG9ydHMuUVJDb2RlRW5jb2RlciA9IEVuY29kZXI7XG4gICAgZXhwb3J0cy5RUkNvZGVFbmNvZGVyUVJDb2RlID0gUVJDb2RlO1xuICAgIGV4cG9ydHMuUVJDb2RlTWFza1V0aWwgPSBNYXNrVXRpbDtcbiAgICBleHBvcnRzLlFSQ29kZU1hdHJpeFV0aWwgPSBNYXRyaXhVdGlsO1xuICAgIGV4cG9ydHMuUVJDb2RlTW9kZSA9IE1vZGUkMTtcbiAgICBleHBvcnRzLlFSQ29kZVJlYWRlciA9IFFSQ29kZVJlYWRlcjtcbiAgICBleHBvcnRzLlFSQ29kZVZlcnNpb24gPSBWZXJzaW9uJDE7XG4gICAgZXhwb3J0cy5RUkNvZGVXcml0ZXIgPSBRUkNvZGVXcml0ZXI7XG4gICAgZXhwb3J0cy5SR0JMdW1pbmFuY2VTb3VyY2UgPSBSR0JMdW1pbmFuY2VTb3VyY2U7XG4gICAgZXhwb3J0cy5SU1MxNFJlYWRlciA9IFJTUzE0UmVhZGVyO1xuICAgIGV4cG9ydHMuUlNTRXhwYW5kZWRSZWFkZXIgPSBSU1NFeHBhbmRlZFJlYWRlcjtcbiAgICBleHBvcnRzLlJlYWRlckV4Y2VwdGlvbiA9IFJlYWRlckV4Y2VwdGlvbjtcbiAgICBleHBvcnRzLlJlZWRTb2xvbW9uRGVjb2RlciA9IFJlZWRTb2xvbW9uRGVjb2RlcjtcbiAgICBleHBvcnRzLlJlZWRTb2xvbW9uRW5jb2RlciA9IFJlZWRTb2xvbW9uRW5jb2RlcjtcbiAgICBleHBvcnRzLlJlZWRTb2xvbW9uRXhjZXB0aW9uID0gUmVlZFNvbG9tb25FeGNlcHRpb247XG4gICAgZXhwb3J0cy5SZXN1bHQgPSBSZXN1bHQ7XG4gICAgZXhwb3J0cy5SZXN1bHRNZXRhZGF0YVR5cGUgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTtcbiAgICBleHBvcnRzLlJlc3VsdFBvaW50ID0gUmVzdWx0UG9pbnQ7XG4gICAgZXhwb3J0cy5TdHJpbmdVdGlscyA9IFN0cmluZ1V0aWxzO1xuICAgIGV4cG9ydHMuVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24gPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbjtcbiAgICBleHBvcnRzLlZpZGVvSW5wdXREZXZpY2UgPSBWaWRlb0lucHV0RGV2aWNlO1xuICAgIGV4cG9ydHMuV2hpdGVSZWN0YW5nbGVEZXRlY3RvciA9IFdoaXRlUmVjdGFuZ2xlRGV0ZWN0b3I7XG4gICAgZXhwb3J0cy5Xcml0ZXJFeGNlcHRpb24gPSBXcml0ZXJFeGNlcHRpb247XG4gICAgZXhwb3J0cy5aWGluZ0FycmF5cyA9IEFycmF5cztcbiAgICBleHBvcnRzLlpYaW5nQ2hhcnNldCA9IENoYXJzZXQ7XG4gICAgZXhwb3J0cy5aWGluZ0ludGVnZXIgPSBJbnRlZ2VyO1xuICAgIGV4cG9ydHMuWlhpbmdTdGFuZGFyZENoYXJzZXRzID0gU3RhbmRhcmRDaGFyc2V0cztcbiAgICBleHBvcnRzLlpYaW5nU3RyaW5nQnVpbGRlciA9IFN0cmluZ0J1aWxkZXI7XG4gICAgZXhwb3J0cy5aWGluZ1N0cmluZ0VuY29kaW5nID0gU3RyaW5nRW5jb2Rpbmc7XG4gICAgZXhwb3J0cy5aWGluZ1N5c3RlbSA9IFN5c3RlbTtcbiAgICBleHBvcnRzLmNyZWF0ZUFic3RyYWN0RXhwYW5kZWREZWNvZGVyID0gY3JlYXRlRGVjb2RlcjtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iLCJpbXBvcnQgKiBhcyBaWGluZyBmcm9tIFwiLi4vdGhpcmRfcGFydHkvenhpbmctanMudW1kXCI7XG5pbXBvcnQgeyBRcmNvZGVSZXN1bHRGb3JtYXQsIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cyB9IGZyb20gXCIuL2NvcmVcIjtcbnZhciBaWGluZ0h0bWw1UXJjb2RlRGVjb2RlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gWlhpbmdIdG1sNVFyY29kZURlY29kZXIocmVxdWVzdGVkRm9ybWF0cywgdmVyYm9zZSwgbG9nZ2VyKSB7XG4gICAgICAgIHRoaXMuZm9ybWF0TWFwID0gbmV3IE1hcChbXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlFSX0NPREUsIFpYaW5nLkJhcmNvZGVGb3JtYXQuUVJfQ09ERV0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkFaVEVDLCBaWGluZy5CYXJjb2RlRm9ybWF0LkFaVEVDXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09EQUJBUiwgWlhpbmcuQmFyY29kZUZvcm1hdC5DT0RBQkFSXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09ERV8zOSwgWlhpbmcuQmFyY29kZUZvcm1hdC5DT0RFXzM5XSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09ERV85MywgWlhpbmcuQmFyY29kZUZvcm1hdC5DT0RFXzkzXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09ERV8xMjgsXG4gICAgICAgICAgICAgICAgWlhpbmcuQmFyY29kZUZvcm1hdC5DT0RFXzEyOFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuREFUQV9NQVRSSVgsXG4gICAgICAgICAgICAgICAgWlhpbmcuQmFyY29kZUZvcm1hdC5EQVRBX01BVFJJWFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuTUFYSUNPREUsXG4gICAgICAgICAgICAgICAgWlhpbmcuQmFyY29kZUZvcm1hdC5NQVhJQ09ERVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuSVRGLCBaWGluZy5CYXJjb2RlRm9ybWF0LklURl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkVBTl8xMywgWlhpbmcuQmFyY29kZUZvcm1hdC5FQU5fMTNdLFxuICAgICAgICAgICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5FQU5fOCwgWlhpbmcuQmFyY29kZUZvcm1hdC5FQU5fOF0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlBERl80MTcsIFpYaW5nLkJhcmNvZGVGb3JtYXQuUERGXzQxN10sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlJTU18xNCwgWlhpbmcuQmFyY29kZUZvcm1hdC5SU1NfMTRdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5SU1NfRVhQQU5ERUQsXG4gICAgICAgICAgICAgICAgWlhpbmcuQmFyY29kZUZvcm1hdC5SU1NfRVhQQU5ERURcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlVQQ19BLCBaWGluZy5CYXJjb2RlRm9ybWF0LlVQQ19BXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuVVBDX0UsIFpYaW5nLkJhcmNvZGVGb3JtYXQuVVBDX0VdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5VUENfRUFOX0VYVEVOU0lPTixcbiAgICAgICAgICAgICAgICBaWGluZy5CYXJjb2RlRm9ybWF0LlVQQ19FQU5fRVhURU5TSU9OXG4gICAgICAgICAgICBdXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLnJldmVyc2VGb3JtYXRNYXAgPSB0aGlzLmNyZWF0ZVJldmVyc2VGb3JtYXRNYXAoKTtcbiAgICAgICAgaWYgKCFaWGluZykge1xuICAgICAgICAgICAgdGhyb3cgXCJVc2UgaHRtbDVxcmNvZGUubWluLmpzIHdpdGhvdXQgZWRpdCwgWlhpbmcgbm90IGZvdW5kLlwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHZlcmJvc2U7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB2YXIgZm9ybWF0cyA9IHRoaXMuY3JlYXRlWlhpbmdGb3JtYXRzKHJlcXVlc3RlZEZvcm1hdHMpO1xuICAgICAgICB2YXIgaGludHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIGhpbnRzLnNldChaWGluZy5EZWNvZGVIaW50VHlwZS5QT1NTSUJMRV9GT1JNQVRTLCBmb3JtYXRzKTtcbiAgICAgICAgaGludHMuc2V0KFpYaW5nLkRlY29kZUhpbnRUeXBlLlRSWV9IQVJERVIsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5oaW50cyA9IGhpbnRzO1xuICAgIH1cbiAgICBaWGluZ0h0bWw1UXJjb2RlRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQXN5bmMgPSBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuZGVjb2RlKGNhbnZhcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBaWGluZ0h0bWw1UXJjb2RlRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICB2YXIgenhpbmdEZWNvZGVyID0gbmV3IFpYaW5nLk11bHRpRm9ybWF0UmVhZGVyKHRoaXMudmVyYm9zZSwgdGhpcy5oaW50cyk7XG4gICAgICAgIHZhciBsdW1pbmFuY2VTb3VyY2UgPSBuZXcgWlhpbmcuSFRNTENhbnZhc0VsZW1lbnRMdW1pbmFuY2VTb3VyY2UoY2FudmFzKTtcbiAgICAgICAgdmFyIGJpbmFyeUJpdG1hcCA9IG5ldyBaWGluZy5CaW5hcnlCaXRtYXAobmV3IFpYaW5nLkh5YnJpZEJpbmFyaXplcihsdW1pbmFuY2VTb3VyY2UpKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHp4aW5nRGVjb2Rlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHJlc3VsdC50ZXh0LFxuICAgICAgICAgICAgZm9ybWF0OiBRcmNvZGVSZXN1bHRGb3JtYXQuY3JlYXRlKHRoaXMudG9IdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMocmVzdWx0LmZvcm1hdCkpLFxuICAgICAgICAgICAgZGVidWdEYXRhOiB0aGlzLmNyZWF0ZURlYnVnRGF0YSgpXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBaWGluZ0h0bWw1UXJjb2RlRGVjb2Rlci5wcm90b3R5cGUuY3JlYXRlUmV2ZXJzZUZvcm1hdE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5mb3JtYXRNYXAuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSwgXykge1xuICAgICAgICAgICAgcmVzdWx0LnNldCh2YWx1ZSwga2V5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBaWGluZ0h0bWw1UXJjb2RlRGVjb2Rlci5wcm90b3R5cGUudG9IdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMgPSBmdW5jdGlvbiAoenhpbmdGb3JtYXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJldmVyc2VGb3JtYXRNYXAuaGFzKHp4aW5nRm9ybWF0KSkge1xuICAgICAgICAgICAgdGhyb3cgXCJyZXZlcnNlRm9ybWF0TWFwIGRvZXNuJ3QgaGF2ZSBcIi5jb25jYXQoenhpbmdGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJldmVyc2VGb3JtYXRNYXAuZ2V0KHp4aW5nRm9ybWF0KTtcbiAgICB9O1xuICAgIFpYaW5nSHRtbDVRcmNvZGVEZWNvZGVyLnByb3RvdHlwZS5jcmVhdGVaWGluZ0Zvcm1hdHMgPSBmdW5jdGlvbiAocmVxdWVzdGVkRm9ybWF0cykge1xuICAgICAgICB2YXIgenhpbmdGb3JtYXRzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVxdWVzdGVkRm9ybWF0c18xID0gcmVxdWVzdGVkRm9ybWF0czsgX2kgPCByZXF1ZXN0ZWRGb3JtYXRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVxdWVzdGVkRm9ybWF0ID0gcmVxdWVzdGVkRm9ybWF0c18xW19pXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdE1hcC5oYXMocmVxdWVzdGVkRm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHp4aW5nRm9ybWF0cy5wdXNoKHRoaXMuZm9ybWF0TWFwLmdldChyZXF1ZXN0ZWRGb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZ0Vycm9yKFwiXCIuY29uY2F0KHJlcXVlc3RlZEZvcm1hdCwgXCIgaXMgbm90IHN1cHBvcnRlZCBieVwiKVxuICAgICAgICAgICAgICAgICAgICArIFwiWlhpbmdIdG1sNVFyY29kZVNoaW1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHp4aW5nRm9ybWF0cztcbiAgICB9O1xuICAgIFpYaW5nSHRtbDVRcmNvZGVEZWNvZGVyLnByb3RvdHlwZS5jcmVhdGVEZWJ1Z0RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7IGRlY29kZXJOYW1lOiBcInp4aW5nLWpzXCIgfTtcbiAgICB9O1xuICAgIHJldHVybiBaWGluZ0h0bWw1UXJjb2RlRGVjb2Rlcjtcbn0oKSk7XG5leHBvcnQgeyBaWGluZ0h0bWw1UXJjb2RlRGVjb2RlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9enhpbmctaHRtbDUtcXJjb2RlLWRlY29kZXIuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0IHsgUXJjb2RlUmVzdWx0Rm9ybWF0LCBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMgfSBmcm9tIFwiLi9jb3JlXCI7XG52YXIgQmFyY29kZURldGVjdG9yRGVsZWdhdGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhcmNvZGVEZXRlY3RvckRlbGVnYXRlKHJlcXVlc3RlZEZvcm1hdHMsIHZlcmJvc2UsIGxvZ2dlcikge1xuICAgICAgICB0aGlzLmZvcm1hdE1hcCA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5RUl9DT0RFLCBcInFyX2NvZGVcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkFaVEVDLCBcImF6dGVjXCJdLFxuICAgICAgICAgICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5DT0RBQkFSLCBcImNvZGFiYXJcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREVfMzksIFwiY29kZV8zOVwiXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09ERV85MywgXCJjb2RlXzkzXCJdLFxuICAgICAgICAgICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5DT0RFXzEyOCwgXCJjb2RlXzEyOFwiXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuREFUQV9NQVRSSVgsIFwiZGF0YV9tYXRyaXhcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLklURiwgXCJpdGZcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkVBTl8xMywgXCJlYW5fMTNcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkVBTl84LCBcImVhbl84XCJdLFxuICAgICAgICAgICAgW0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5QREZfNDE3LCBcInBkZjQxN1wiXSxcbiAgICAgICAgICAgIFtIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuVVBDX0EsIFwidXBjX2FcIl0sXG4gICAgICAgICAgICBbSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlVQQ19FLCBcInVwY19lXCJdXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLnJldmVyc2VGb3JtYXRNYXAgPSB0aGlzLmNyZWF0ZVJldmVyc2VGb3JtYXRNYXAoKTtcbiAgICAgICAgaWYgKCFCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlVzZSBodG1sNXFyY29kZS5taW4uanMgd2l0aG91dCBlZGl0LCBVc2UgXCJcbiAgICAgICAgICAgICAgICArIFwiQmFyY29kZURldGVjdG9yRGVsZWdhdGUgb25seSBpZiBpdCBpc1N1cHBvcnRlZCgpO1wiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHZlcmJvc2U7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB2YXIgZm9ybWF0cyA9IHRoaXMuY3JlYXRlQmFyY29kZURldGVjdG9yRm9ybWF0cyhyZXF1ZXN0ZWRGb3JtYXRzKTtcbiAgICAgICAgdGhpcy5kZXRlY3RvciA9IG5ldyBCYXJjb2RlRGV0ZWN0b3IoZm9ybWF0cyk7XG4gICAgICAgIGlmICghdGhpcy5kZXRlY3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgXCJCYXJjb2RlRGV0ZWN0b3IgZGV0ZWN0b3Igbm90IHN1cHBvcnRlZFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIEJhcmNvZGVEZXRlY3RvckRlbGVnYXRlLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIShcIkJhcmNvZGVEZXRlY3RvclwiIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHVtbXlEZXRlY3RvciA9IG5ldyBCYXJjb2RlRGV0ZWN0b3IoeyBmb3JtYXRzOiBbXCJxcl9jb2RlXCJdIH0pO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGR1bW15RGV0ZWN0b3IgIT09IFwidW5kZWZpbmVkXCI7XG4gICAgfTtcbiAgICBCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZS5wcm90b3R5cGUuZGVjb2RlQXN5bmMgPSBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBiYXJjb2RlcywgbGFyZ2VzdEJhcmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCwgdGhpcy5kZXRlY3Rvci5kZXRlY3QoY2FudmFzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhcmNvZGVzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXJjb2RlcyB8fCBiYXJjb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIk5vIGJhcmNvZGUgb3IgUVIgY29kZSBkZXRlY3RlZC5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlc3RCYXJjb2RlID0gdGhpcy5zZWxlY3RMYXJnZXN0QmFyY29kZShiYXJjb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbGFyZ2VzdEJhcmNvZGUucmF3VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogUXJjb2RlUmVzdWx0Rm9ybWF0LmNyZWF0ZSh0aGlzLnRvSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzKGxhcmdlc3RCYXJjb2RlLmZvcm1hdCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0RhdGE6IHRoaXMuY3JlYXRlRGVidWdEYXRhKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZS5wcm90b3R5cGUuc2VsZWN0TGFyZ2VzdEJhcmNvZGUgPSBmdW5jdGlvbiAoYmFyY29kZXMpIHtcbiAgICAgICAgdmFyIGxhcmdlc3RCYXJjb2RlID0gbnVsbDtcbiAgICAgICAgdmFyIG1heEFyZWEgPSAwO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGJhcmNvZGVzXzEgPSBiYXJjb2RlczsgX2kgPCBiYXJjb2Rlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGJhcmNvZGUgPSBiYXJjb2Rlc18xW19pXTtcbiAgICAgICAgICAgIHZhciBhcmVhID0gYmFyY29kZS5ib3VuZGluZ0JveC53aWR0aCAqIGJhcmNvZGUuYm91bmRpbmdCb3guaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKGFyZWEgPiBtYXhBcmVhKSB7XG4gICAgICAgICAgICAgICAgbWF4QXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhcmNvZGUgPSBiYXJjb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbGFyZ2VzdEJhcmNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IFwiTm8gbGFyZ2VzdCBiYXJjb2RlIGZvdW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhcmdlc3RCYXJjb2RlO1xuICAgIH07XG4gICAgQmFyY29kZURldGVjdG9yRGVsZWdhdGUucHJvdG90eXBlLmNyZWF0ZUJhcmNvZGVEZXRlY3RvckZvcm1hdHMgPSBmdW5jdGlvbiAocmVxdWVzdGVkRm9ybWF0cykge1xuICAgICAgICB2YXIgZm9ybWF0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHJlcXVlc3RlZEZvcm1hdHNfMSA9IHJlcXVlc3RlZEZvcm1hdHM7IF9pIDwgcmVxdWVzdGVkRm9ybWF0c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RlZEZvcm1hdCA9IHJlcXVlc3RlZEZvcm1hdHNfMVtfaV07XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXRNYXAuaGFzKHJlcXVlc3RlZEZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXRzLnB1c2godGhpcy5mb3JtYXRNYXAuZ2V0KHJlcXVlc3RlZEZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIlwiLmNvbmNhdChyZXF1ZXN0ZWRGb3JtYXQsIFwiIGlzIG5vdCBzdXBwb3J0ZWQgYnlcIilcbiAgICAgICAgICAgICAgICAgICAgKyBcIkJhcmNvZGVEZXRlY3RvckRlbGVnYXRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1hdHM6IGZvcm1hdHMgfTtcbiAgICB9O1xuICAgIEJhcmNvZGVEZXRlY3RvckRlbGVnYXRlLnByb3RvdHlwZS50b0h0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cyA9IGZ1bmN0aW9uIChiYXJjb2RlRGV0ZWN0b3JGb3JtYXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJldmVyc2VGb3JtYXRNYXAuaGFzKGJhcmNvZGVEZXRlY3RvckZvcm1hdCkpIHtcbiAgICAgICAgICAgIHRocm93IFwicmV2ZXJzZUZvcm1hdE1hcCBkb2Vzbid0IGhhdmUgXCIuY29uY2F0KGJhcmNvZGVEZXRlY3RvckZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZUZvcm1hdE1hcC5nZXQoYmFyY29kZURldGVjdG9yRm9ybWF0KTtcbiAgICB9O1xuICAgIEJhcmNvZGVEZXRlY3RvckRlbGVnYXRlLnByb3RvdHlwZS5jcmVhdGVSZXZlcnNlRm9ybWF0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmZvcm1hdE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBfKSB7XG4gICAgICAgICAgICByZXN1bHQuc2V0KHZhbHVlLCBrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEJhcmNvZGVEZXRlY3RvckRlbGVnYXRlLnByb3RvdHlwZS5jcmVhdGVEZWJ1Z0RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7IGRlY29kZXJOYW1lOiBcIkJhcmNvZGVEZXRlY3RvclwiIH07XG4gICAgfTtcbiAgICByZXR1cm4gQmFyY29kZURldGVjdG9yRGVsZWdhdGU7XG59KCkpO1xuZXhwb3J0IHsgQmFyY29kZURldGVjdG9yRGVsZWdhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZS1iYXItY29kZS1kZXRlY3Rvci5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyBaWGluZ0h0bWw1UXJjb2RlRGVjb2RlciB9IGZyb20gXCIuL3p4aW5nLWh0bWw1LXFyY29kZS1kZWNvZGVyXCI7XG5pbXBvcnQgeyBCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZSB9IGZyb20gXCIuL25hdGl2ZS1iYXItY29kZS1kZXRlY3RvclwiO1xudmFyIEh0bWw1UXJjb2RlU2hpbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSHRtbDVRcmNvZGVTaGltKHJlcXVlc3RlZEZvcm1hdHMsIHVzZUJhckNvZGVEZXRlY3RvcklmU3VwcG9ydGVkLCB2ZXJib3NlLCBsb2dnZXIpIHtcbiAgICAgICAgdGhpcy5FWEVDVVRJT05TX1RPX1JFUE9SVF9QRVJGT1JNQU5DRSA9IDEwMDtcbiAgICAgICAgdGhpcy5leGVjdXRpb25zID0gMDtcbiAgICAgICAgdGhpcy5leGVjdXRpb25SZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMud2FzUHJpbWFyeURlY29kZXJVc2VkSW5MYXN0RGVjb2RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHZlcmJvc2U7XG4gICAgICAgIGlmICh1c2VCYXJDb2RlRGV0ZWN0b3JJZlN1cHBvcnRlZFxuICAgICAgICAgICAgJiYgQmFyY29kZURldGVjdG9yRGVsZWdhdGUuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5wcmltYXJ5RGVjb2RlciA9IG5ldyBCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZShyZXF1ZXN0ZWRGb3JtYXRzLCB2ZXJib3NlLCBsb2dnZXIpO1xuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlEZWNvZGVyID0gbmV3IFpYaW5nSHRtbDVRcmNvZGVEZWNvZGVyKHJlcXVlc3RlZEZvcm1hdHMsIHZlcmJvc2UsIGxvZ2dlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaW1hcnlEZWNvZGVyID0gbmV3IFpYaW5nSHRtbDVRcmNvZGVEZWNvZGVyKHJlcXVlc3RlZEZvcm1hdHMsIHZlcmJvc2UsIGxvZ2dlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSHRtbDVRcmNvZGVTaGltLnByb3RvdHlwZS5kZWNvZGVBc3luYyA9IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsICwgMywgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB0aGlzLmdldERlY29kZXIoKS5kZWNvZGVBc3luYyhjYW52YXMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIsIF9hLnNlbnQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zc2libHlMb2dQZXJmb3JtYW5jZShzdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2hpbS5wcm90b3R5cGUuZGVjb2RlUm9idXN0bHlBc3luYyA9IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZSwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsIDQsIDVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgdGhpcy5wcmltYXJ5RGVjb2Rlci5kZWNvZGVBc3luYyhjYW52YXMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIsIF9hLnNlbnQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWNvbmRhcnlEZWNvZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLnNlY29uZGFyeURlY29kZXIuZGVjb2RlQXN5bmMoY2FudmFzKV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcl8xO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3NpYmx5TG9nUGVyZm9ybWFuY2Uoc3RhcnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbN107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNoaW0ucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWNvbmRhcnlEZWNvZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmltYXJ5RGVjb2RlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy53YXNQcmltYXJ5RGVjb2RlclVzZWRJbkxhc3REZWNvZGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLndhc1ByaW1hcnlEZWNvZGVyVXNlZEluTGFzdERlY29kZSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmltYXJ5RGVjb2RlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhc1ByaW1hcnlEZWNvZGVyVXNlZEluTGFzdERlY29kZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRhcnlEZWNvZGVyO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTaGltLnByb3RvdHlwZS5wb3NzaWJseUxvZ1BlcmZvcm1hbmNlID0gZnVuY3Rpb24gKHN0YXJ0VGltZSkge1xuICAgICAgICBpZiAoIXRoaXMudmVyYm9zZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBleGVjdXRpb25UaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIHRoaXMuZXhlY3V0aW9uUmVzdWx0cy5wdXNoKGV4ZWN1dGlvblRpbWUpO1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbnMrKztcbiAgICAgICAgdGhpcy5wb3NzaWJseUZsdXNoUGVyZm9ybWFuY2VSZXBvcnQoKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2hpbS5wcm90b3R5cGUucG9zc2libHlGbHVzaFBlcmZvcm1hbmNlUmVwb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5leGVjdXRpb25zIDwgdGhpcy5FWEVDVVRJT05TX1RPX1JFUE9SVF9QRVJGT1JNQU5DRSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5leGVjdXRpb25SZXN1bHRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGV4ZWN1dGlvblRpbWUgPSBfYVtfaV07XG4gICAgICAgICAgICBzdW0gKz0gZXhlY3V0aW9uVGltZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWVhbiA9IHN1bSAvIHRoaXMuZXhlY3V0aW9uUmVzdWx0cy5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXCIuY29uY2F0KG1lYW4sIFwiIG1zIGZvciBcIikuY29uY2F0KHRoaXMuZXhlY3V0aW9uUmVzdWx0cy5sZW5ndGgsIFwiIGxhc3QgcnVucy5cIikpO1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbnMgPSAwO1xuICAgICAgICB0aGlzLmV4ZWN1dGlvblJlc3VsdHMgPSBbXTtcbiAgICB9O1xuICAgIHJldHVybiBIdG1sNVFyY29kZVNoaW07XG59KCkpO1xuZXhwb3J0IHsgSHRtbDVRcmNvZGVTaGltIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2RlLWRlY29kZXIuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBBYnN0cmFjdENhbWVyYUNhcGFiaWxpdHkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0Q2FtZXJhQ2FwYWJpbGl0eShuYW1lLCB0cmFjaykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnRyYWNrID0gdHJhY2s7XG4gICAgfVxuICAgIEFic3RyYWN0Q2FtZXJhQ2FwYWJpbGl0eS5wcm90b3R5cGUuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFjay5nZXRDYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lIGluIHRoaXMudHJhY2suZ2V0Q2FwYWJpbGl0aWVzKCk7XG4gICAgfTtcbiAgICBBYnN0cmFjdENhbWVyYUNhcGFiaWxpdHkucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBjb25zdHJhaW50ID0ge307XG4gICAgICAgIGNvbnN0cmFpbnRbdGhpcy5uYW1lXSA9IHZhbHVlO1xuICAgICAgICB2YXIgY29uc3RyYWludHMgPSB7IGFkdmFuY2VkOiBbY29uc3RyYWludF0gfTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2suYXBwbHlDb25zdHJhaW50cyhjb25zdHJhaW50cyk7XG4gICAgfTtcbiAgICBBYnN0cmFjdENhbWVyYUNhcGFiaWxpdHkucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB0aGlzLnRyYWNrLmdldFNldHRpbmdzKCk7XG4gICAgICAgIGlmICh0aGlzLm5hbWUgaW4gc2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHZhciBzZXR0aW5nVmFsdWUgPSBzZXR0aW5nc1t0aGlzLm5hbWVdO1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBBYnN0cmFjdENhbWVyYUNhcGFiaWxpdHk7XG59KCkpO1xudmFyIEFic3RyYWN0UmFuZ2VDYW1lcmFDYXBhYmlsaXR5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHkobmFtZSwgdHJhY2spIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG5hbWUsIHRyYWNrKSB8fCB0aGlzO1xuICAgIH1cbiAgICBBYnN0cmFjdFJhbmdlQ2FtZXJhQ2FwYWJpbGl0eS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXBhYmlsaXRpZXMoKS5taW47XG4gICAgfTtcbiAgICBBYnN0cmFjdFJhbmdlQ2FtZXJhQ2FwYWJpbGl0eS5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXBhYmlsaXRpZXMoKS5tYXg7XG4gICAgfTtcbiAgICBBYnN0cmFjdFJhbmdlQ2FtZXJhQ2FwYWJpbGl0eS5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKCkuc3RlcDtcbiAgICB9O1xuICAgIEFic3RyYWN0UmFuZ2VDYW1lcmFDYXBhYmlsaXR5LnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY29uc3RyYWludCA9IHt9O1xuICAgICAgICBjb25zdHJhaW50W3RoaXMubmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdmFyIGNvbnN0cmFpbnRzID0geyBhZHZhbmNlZDogW2NvbnN0cmFpbnRdIH07XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrLmFwcGx5Q29uc3RyYWludHMoY29uc3RyYWludHMpO1xuICAgIH07XG4gICAgQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHkucHJvdG90eXBlLmdldENhcGFiaWxpdGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mYWlsSWZOb3RTdXBwb3J0ZWQoKTtcbiAgICAgICAgdmFyIGNhcGFiaWxpdGllcyA9IHRoaXMudHJhY2suZ2V0Q2FwYWJpbGl0aWVzKCk7XG4gICAgICAgIHZhciBjYXBhYmlsaXR5ID0gY2FwYWJpbGl0aWVzW3RoaXMubmFtZV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW46IGNhcGFiaWxpdHkubWluLFxuICAgICAgICAgICAgbWF4OiBjYXBhYmlsaXR5Lm1heCxcbiAgICAgICAgICAgIHN0ZXA6IGNhcGFiaWxpdHkuc3RlcCxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEFic3RyYWN0UmFuZ2VDYW1lcmFDYXBhYmlsaXR5LnByb3RvdHlwZS5mYWlsSWZOb3RTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodGhpcy5uYW1lLCBcIiBjYXBhYmlsaXR5IG5vdCBzdXBwb3J0ZWRcIikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHk7XG59KEFic3RyYWN0Q2FtZXJhQ2FwYWJpbGl0eSkpO1xudmFyIFpvb21GZWF0dXJlSW1wbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpvb21GZWF0dXJlSW1wbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBab29tRmVhdHVyZUltcGwodHJhY2spIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIFwiem9vbVwiLCB0cmFjaykgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFpvb21GZWF0dXJlSW1wbDtcbn0oQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHkpKTtcbnZhciBUb3JjaEZlYXR1cmVJbXBsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVG9yY2hGZWF0dXJlSW1wbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUb3JjaEZlYXR1cmVJbXBsKHRyYWNrKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBcInRvcmNoXCIsIHRyYWNrKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVG9yY2hGZWF0dXJlSW1wbDtcbn0oQWJzdHJhY3RDYW1lcmFDYXBhYmlsaXR5KSk7XG52YXIgQ2FtZXJhQ2FwYWJpbGl0aWVzSW1wbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FtZXJhQ2FwYWJpbGl0aWVzSW1wbCh0cmFjaykge1xuICAgICAgICB0aGlzLnRyYWNrID0gdHJhY2s7XG4gICAgfVxuICAgIENhbWVyYUNhcGFiaWxpdGllc0ltcGwucHJvdG90eXBlLnpvb21GZWF0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvb21GZWF0dXJlSW1wbCh0aGlzLnRyYWNrKTtcbiAgICB9O1xuICAgIENhbWVyYUNhcGFiaWxpdGllc0ltcGwucHJvdG90eXBlLnRvcmNoRmVhdHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb3JjaEZlYXR1cmVJbXBsKHRoaXMudHJhY2spO1xuICAgIH07XG4gICAgcmV0dXJuIENhbWVyYUNhcGFiaWxpdGllc0ltcGw7XG59KCkpO1xudmFyIFJlbmRlcmVkQ2FtZXJhSW1wbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVuZGVyZWRDYW1lcmFJbXBsKHBhcmVudEVsZW1lbnQsIG1lZGlhU3RyZWFtLCBjYWxsYmFja3MpIHtcbiAgICAgICAgdGhpcy5pc0Nsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50O1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtID0gbWVkaWFTdHJlYW07XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgICAgICB0aGlzLnN1cmZhY2UgPSB0aGlzLmNyZWF0ZVZpZGVvRWxlbWVudCh0aGlzLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGgpO1xuICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZCh0aGlzLnN1cmZhY2UpO1xuICAgIH1cbiAgICBSZW5kZXJlZENhbWVyYUltcGwucHJvdG90eXBlLmNyZWF0ZVZpZGVvRWxlbWVudCA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICAgICAgICB2YXIgdmlkZW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuICAgICAgICB2aWRlb0VsZW1lbnQuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdCh3aWR0aCwgXCJweFwiKTtcbiAgICAgICAgdmlkZW9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHZpZGVvRWxlbWVudC5tdXRlZCA9IHRydWU7XG4gICAgICAgIHZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLCBcInRydWVcIik7XG4gICAgICAgIHZpZGVvRWxlbWVudC5wbGF5c0lubGluZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB2aWRlb0VsZW1lbnQ7XG4gICAgfTtcbiAgICBSZW5kZXJlZENhbWVyYUltcGwucHJvdG90eXBlLnNldHVwU3VyZmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdXJmYWNlLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlJlbmRlcmVkQ2FtZXJhSW1wbCB2aWRlbyBzdXJmYWNlIG9uYWJvcnQoKSBjYWxsZWRcIjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdXJmYWNlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlJlbmRlcmVkQ2FtZXJhSW1wbCB2aWRlbyBzdXJmYWNlIG9uZXJyb3IoKSBjYWxsZWRcIjtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uVmlkZW9TdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2aWRlb1dpZHRoID0gX3RoaXMuc3VyZmFjZS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHZhciB2aWRlb0hlaWdodCA9IF90aGlzLnN1cmZhY2UuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2tzLm9uUmVuZGVyU3VyZmFjZVJlYWR5KHZpZGVvV2lkdGgsIHZpZGVvSGVpZ2h0KTtcbiAgICAgICAgICAgIF90aGlzLnN1cmZhY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIiwgb25WaWRlb1N0YXJ0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdXJmYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5aW5nXCIsIG9uVmlkZW9TdGFydCk7XG4gICAgICAgIHRoaXMuc3VyZmFjZS5zcmNPYmplY3QgPSB0aGlzLm1lZGlhU3RyZWFtO1xuICAgICAgICB0aGlzLnN1cmZhY2UucGxheSgpO1xuICAgIH07XG4gICAgUmVuZGVyZWRDYW1lcmFJbXBsLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRFbGVtZW50LCBtZWRpYVN0cmVhbSwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJlZENhbWVyYSwgYXNwZWN0UmF0aW9Db25zdHJhaW50O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRDYW1lcmEgPSBuZXcgUmVuZGVyZWRDYW1lcmFJbXBsKHBhcmVudEVsZW1lbnQsIG1lZGlhU3RyZWFtLCBjYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmFzcGVjdFJhdGlvKSByZXR1cm4gWzMsIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNwZWN0UmF0aW9Db25zdHJhaW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvOiBvcHRpb25zLmFzcGVjdFJhdGlvXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCByZW5kZXJlZENhbWVyYS5nZXRGaXJzdFRyYWNrT3JGYWlsKCkuYXBwbHlDb25zdHJhaW50cyhhc3BlY3RSYXRpb0NvbnN0cmFpbnQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlZENhbWVyYS5zZXR1cFN1cmZhY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgcmVuZGVyZWRDYW1lcmFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuZmFpbElmQ2xvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgXCJUaGUgUmVuZGVyZWRDYW1lcmEgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQuXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuZ2V0Rmlyc3RUcmFja09yRmFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mYWlsSWZDbG9zZWQoKTtcbiAgICAgICAgaWYgKHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IFwiTm8gdmlkZW8gdHJhY2tzIGZvdW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZmFpbElmQ2xvc2VkKCk7XG4gICAgICAgIHRoaXMuc3VyZmFjZS5wYXVzZSgpO1xuICAgIH07XG4gICAgUmVuZGVyZWRDYW1lcmFJbXBsLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAob25SZXN1bWVDYWxsYmFjaykge1xuICAgICAgICB0aGlzLmZhaWxJZkNsb3NlZCgpO1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb25WaWRlb1Jlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQob25SZXN1bWVDYWxsYmFjaywgMjAwKTtcbiAgICAgICAgICAgICR0aGlzLnN1cmZhY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIiwgb25WaWRlb1Jlc3VtZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3VyZmFjZS5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLCBvblZpZGVvUmVzdW1lKTtcbiAgICAgICAgdGhpcy5zdXJmYWNlLnBsYXkoKTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZmFpbElmQ2xvc2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cmZhY2UucGF1c2VkO1xuICAgIH07XG4gICAgUmVuZGVyZWRDYW1lcmFJbXBsLnByb3RvdHlwZS5nZXRTdXJmYWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZhaWxJZkNsb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdXJmYWNlO1xuICAgIH07XG4gICAgUmVuZGVyZWRDYW1lcmFJbXBsLnByb3RvdHlwZS5nZXRSdW5uaW5nVHJhY2tDYXBhYmlsaXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHJhY2tPckZhaWwoKS5nZXRDYXBhYmlsaXRpZXMoKTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuZ2V0UnVubmluZ1RyYWNrU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHJhY2tPckZhaWwoKS5nZXRTZXR0aW5ncygpO1xuICAgIH07XG4gICAgUmVuZGVyZWRDYW1lcmFJbXBsLnByb3RvdHlwZS5hcHBseVZpZGVvQ29uc3RyYWludHMgPSBmdW5jdGlvbiAoY29uc3RyYWludHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFzcGVjdFJhdGlvXCIgaW4gY29uc3RyYWludHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJDaGFuZ2luZyAnYXNwZWN0UmF0aW8nIGluIHJ1bi10aW1lIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHRoaXMuZ2V0Rmlyc3RUcmFja09yRmFpbCgpLmFwcGx5Q29uc3RyYWludHMoY29uc3RyYWludHMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCBfKSB7XG4gICAgICAgICAgICB2YXIgdHJhY2tzID0gJHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgICAgIHZhciB0cmFja3NUb0Nsb3NlID0gdHJhY2tzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciB0cmFja3NDbG9zZWQgPSAwO1xuICAgICAgICAgICAgJHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlb1RyYWNrKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMubWVkaWFTdHJlYW0ucmVtb3ZlVHJhY2sodmlkZW9UcmFjayk7XG4gICAgICAgICAgICAgICAgdmlkZW9UcmFjay5zdG9wKCk7XG4gICAgICAgICAgICAgICAgKyt0cmFja3NDbG9zZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrc0Nsb3NlZCA+PSB0cmFja3NUb0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCgkdGhpcy5zdXJmYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlbmRlcmVkQ2FtZXJhSW1wbC5wcm90b3R5cGUuZ2V0Q2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbWVyYUNhcGFiaWxpdGllc0ltcGwodGhpcy5nZXRGaXJzdFRyYWNrT3JGYWlsKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlbmRlcmVkQ2FtZXJhSW1wbDtcbn0oKSk7XG52YXIgQ2FtZXJhSW1wbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FtZXJhSW1wbChtZWRpYVN0cmVhbSkge1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtID0gbWVkaWFTdHJlYW07XG4gICAgfVxuICAgIENhbWVyYUltcGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChwYXJlbnRFbGVtZW50LCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiwgUmVuZGVyZWRDYW1lcmFJbXBsLmNyZWF0ZShwYXJlbnRFbGVtZW50LCB0aGlzLm1lZGlhU3RyZWFtLCBvcHRpb25zLCBjYWxsYmFja3MpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENhbWVyYUltcGwuY3JlYXRlID0gZnVuY3Rpb24gKHZpZGVvQ29uc3RyYWludHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnN0cmFpbnRzLCBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwibmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBub3Qgc3VwcG9ydGVkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHZpZGVvQ29uc3RyYWludHNcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBuZXcgQ2FtZXJhSW1wbChtZWRpYVN0cmVhbSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDYW1lcmFJbXBsO1xufSgpKTtcbmV4cG9ydCB7IENhbWVyYUltcGwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvcmUtaW1wbC5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyBDYW1lcmFJbXBsIH0gZnJvbSBcIi4vY29yZS1pbXBsXCI7XG52YXIgQ2FtZXJhRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FtZXJhRmFjdG9yeSgpIHtcbiAgICB9XG4gICAgQ2FtZXJhRmFjdG9yeS5mYWlsSWZOb3RTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIG5vdCBzdXBwb3J0ZWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBuZXcgQ2FtZXJhRmFjdG9yeSgpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENhbWVyYUZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICh2aWRlb0NvbnN0cmFpbnRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIsIENhbWVyYUltcGwuY3JlYXRlKHZpZGVvQ29uc3RyYWludHMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDYW1lcmFGYWN0b3J5O1xufSgpKTtcbmV4cG9ydCB7IENhbWVyYUZhY3RvcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZhY3Rvcmllcy5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyBIdG1sNVFyY29kZVN0cmluZ3MgfSBmcm9tIFwiLi4vc3RyaW5nc1wiO1xudmFyIENhbWVyYVJldHJpZXZlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FtZXJhUmV0cmlldmVyKCkge1xuICAgIH1cbiAgICBDYW1lcmFSZXRyaWV2ZXIucmV0cmlldmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2FtZXJhUmV0cmlldmVyLmdldENhbWVyYXNGcm9tTWVkaWFEZXZpY2VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1zdCA9IE1lZGlhU3RyZWFtVHJhY2s7XG4gICAgICAgIGlmIChNZWRpYVN0cmVhbVRyYWNrICYmIG1zdC5nZXRTb3VyY2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2FtZXJhUmV0cmlldmVyLmdldENhbWVyYXNGcm9tTWVkaWFTdHJlYW1UcmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDYW1lcmFSZXRyaWV2ZXIucmVqZWN0V2l0aEVycm9yKCk7XG4gICAgfTtcbiAgICBDYW1lcmFSZXRyaWV2ZXIucmVqZWN0V2l0aEVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gSHRtbDVRcmNvZGVTdHJpbmdzLnVuYWJsZVRvUXVlcnlTdXBwb3J0ZWREZXZpY2VzKCk7XG4gICAgICAgIGlmICghQ2FtZXJhUmV0cmlldmVyLmlzSHR0cHNPckxvY2FsaG9zdCgpKSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBIdG1sNVFyY29kZVN0cmluZ3MuaW5zZWN1cmVDb250ZXh0Q2FtZXJhUXVlcnlFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvck1lc3NhZ2UpO1xuICAgIH07XG4gICAgQ2FtZXJhUmV0cmlldmVyLmlzSHR0cHNPckxvY2FsaG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaG9zdCA9IGxvY2F0aW9uLmhvc3Quc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICByZXR1cm4gaG9zdCA9PT0gXCIxMjcuMC4wLjFcIiB8fCBob3N0ID09PSBcImxvY2FsaG9zdFwiO1xuICAgIH07XG4gICAgQ2FtZXJhUmV0cmlldmVyLmdldENhbWVyYXNGcm9tTWVkaWFEZXZpY2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2xvc2VBY3RpdmVTdHJlYW1zLCBtZWRpYVN0cmVhbSwgZGV2aWNlcywgcmVzdWx0cywgX2ksIGRldmljZXNfMSwgZGV2aWNlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VBY3RpdmVTdHJlYW1zID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFja3MgPSBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRyYWNrc18xID0gdHJhY2tzOyBfaSA8IHRyYWNrc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IGZhbHNlLCB2aWRlbzogdHJ1ZSB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZXMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgZGV2aWNlc18xID0gZGV2aWNlczsgX2kgPCBkZXZpY2VzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlID0gZGV2aWNlc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLmtpbmQgPT09IFwidmlkZW9pbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZGV2aWNlLmRldmljZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRldmljZS5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUFjdGl2ZVN0cmVhbXMobWVkaWFTdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCByZXN1bHRzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDYW1lcmFSZXRyaWV2ZXIuZ2V0Q2FtZXJhc0Zyb21NZWRpYVN0cmVhbVRyYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIF8pIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChzb3VyY2VJbmZvcykge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzb3VyY2VJbmZvc18xID0gc291cmNlSW5mb3M7IF9pIDwgc291cmNlSW5mb3NfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUluZm8gPSBzb3VyY2VJbmZvc18xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZUluZm8ua2luZCA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzb3VyY2VJbmZvLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzb3VyY2VJbmZvLmxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBtc3QgPSBNZWRpYVN0cmVhbVRyYWNrO1xuICAgICAgICAgICAgbXN0LmdldFNvdXJjZXMoY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDYW1lcmFSZXRyaWV2ZXI7XG59KCkpO1xuZXhwb3J0IHsgQ2FtZXJhUmV0cmlldmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyaWV2ZXIuanMubWFwIiwiZXhwb3J0IHZhciBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZTtcbihmdW5jdGlvbiAoSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUpIHtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZVtIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZVtcIlVOS05PV05cIl0gPSAwXSA9IFwiVU5LTk9XTlwiO1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlW0h0bWw1UXJjb2RlU2Nhbm5lclN0YXRlW1wiTk9UX1NUQVJURURcIl0gPSAxXSA9IFwiTk9UX1NUQVJURURcIjtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZVtIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZVtcIlNDQU5OSU5HXCJdID0gMl0gPSBcIlNDQU5OSU5HXCI7XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyU3RhdGVbSHRtbDVRcmNvZGVTY2FubmVyU3RhdGVbXCJQQVVTRURcIl0gPSAzXSA9IFwiUEFVU0VEXCI7XG59KShIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZSB8fCAoSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUgPSB7fSkpO1xudmFyIFN0YXRlTWFuYWdlckltcGwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlTWFuYWdlckltcGwoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZS5OT1RfU1RBUlRFRDtcbiAgICAgICAgdGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZSA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlVOS05PV047XG4gICAgfVxuICAgIFN0YXRlTWFuYWdlckltcGwucHJvdG90eXBlLmRpcmVjdFRyYW5zaXRpb24gPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgdGhpcy5mYWlsSWZUcmFuc2l0aW9uT25nb2luZygpO1xuICAgICAgICB0aGlzLnZhbGlkYXRlVHJhbnNpdGlvbihuZXdTdGF0ZSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB9O1xuICAgIFN0YXRlTWFuYWdlckltcGwucHJvdG90eXBlLnN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChuZXdTdGF0ZSkge1xuICAgICAgICB0aGlzLmZhaWxJZlRyYW5zaXRpb25PbmdvaW5nKCk7XG4gICAgICAgIHRoaXMudmFsaWRhdGVUcmFuc2l0aW9uKG5ld1N0YXRlKTtcbiAgICAgICAgdGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFN0YXRlTWFuYWdlckltcGwucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9uR29pbmdUcmFuc2FjdGlvbk5ld1N0YXRlXG4gICAgICAgICAgICA9PT0gSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuVU5LTk9XTikge1xuICAgICAgICAgICAgdGhyb3cgXCJUcmFuc2FjdGlvbiBpcyBhbHJlYWR5IGNhbmNlbGxlZCwgY2Fubm90IGV4ZWN1dGUoKS5cIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGVtcE5ld1N0YXRlID0gdGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZTtcbiAgICAgICAgdGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZSA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlVOS05PV047XG4gICAgICAgIHRoaXMuZGlyZWN0VHJhbnNpdGlvbih0ZW1wTmV3U3RhdGUpO1xuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VySW1wbC5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZVxuICAgICAgICAgICAgPT09IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlVOS05PV04pIHtcbiAgICAgICAgICAgIHRocm93IFwiVHJhbnNhY3Rpb24gaXMgYWxyZWFkeSBjYW5jZWxsZWQsIGNhbm5vdCBjYW5jZWwoKS5cIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uR29pbmdUcmFuc2FjdGlvbk5ld1N0YXRlID0gSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuVU5LTk9XTjtcbiAgICB9O1xuICAgIFN0YXRlTWFuYWdlckltcGwucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIFN0YXRlTWFuYWdlckltcGwucHJvdG90eXBlLmZhaWxJZlRyYW5zaXRpb25PbmdvaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vbkdvaW5nVHJhbnNhY3Rpb25OZXdTdGF0ZVxuICAgICAgICAgICAgIT09IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlVOS05PV04pIHtcbiAgICAgICAgICAgIHRocm93IFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYSBuZXcgc3RhdGUsIGFscmVhZHkgdW5kZXIgdHJhbnNpdGlvblwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdGF0ZU1hbmFnZXJJbXBsLnByb3RvdHlwZS52YWxpZGF0ZVRyYW5zaXRpb24gPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlVOS05PV046XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJUcmFuc2l0aW9uIGZyb20gdW5rbm93biBpcyBub3QgYWxsb3dlZFwiO1xuICAgICAgICAgICAgY2FzZSBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZS5OT1RfU1RBUlRFRDpcbiAgICAgICAgICAgICAgICB0aGlzLmZhaWxJZk5ld1N0YXRlSXMobmV3U3RhdGUsIFtIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZS5QQVVTRURdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuU0NBTk5JTkc6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlBBVVNFRDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VySW1wbC5wcm90b3R5cGUuZmFpbElmTmV3U3RhdGVJcyA9IGZ1bmN0aW9uIChuZXdTdGF0ZSwgZGlzYWxsb3dlZFN0YXRlc1RvVHJhbnNpdGlvbikge1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRpc2FsbG93ZWRTdGF0ZXNUb1RyYW5zaXRpb25fMSA9IGRpc2FsbG93ZWRTdGF0ZXNUb1RyYW5zaXRpb247IF9pIDwgZGlzYWxsb3dlZFN0YXRlc1RvVHJhbnNpdGlvbl8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGRpc2FsbG93ZWRTdGF0ZSA9IGRpc2FsbG93ZWRTdGF0ZXNUb1RyYW5zaXRpb25fMVtfaV07XG4gICAgICAgICAgICBpZiAobmV3U3RhdGUgPT09IGRpc2FsbG93ZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiQ2Fubm90IHRyYW5zaXRpb24gZnJvbSBcIi5jb25jYXQodGhpcy5zdGF0ZSwgXCIgdG8gXCIpLmNvbmNhdChuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZU1hbmFnZXJJbXBsO1xufSgpKTtcbnZhciBTdGF0ZU1hbmFnZXJQcm94eSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVNYW5hZ2VyUHJveHkoc3RhdGVNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyID0gc3RhdGVNYW5hZ2VyO1xuICAgIH1cbiAgICBTdGF0ZU1hbmFnZXJQcm94eS5wcm90b3R5cGUuc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlTWFuYWdlci5zdGFydFRyYW5zaXRpb24obmV3U3RhdGUpO1xuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VyUHJveHkucHJvdG90eXBlLmRpcmVjdFRyYW5zaXRpb24gPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuZGlyZWN0VHJhbnNpdGlvbihuZXdTdGF0ZSk7XG4gICAgfTtcbiAgICBTdGF0ZU1hbmFnZXJQcm94eS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpO1xuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VyUHJveHkucHJvdG90eXBlLmNhblNjYW5GaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKSA9PT0gSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuTk9UX1NUQVJURUQ7XG4gICAgfTtcbiAgICBTdGF0ZU1hbmFnZXJQcm94eS5wcm90b3R5cGUuaXNTY2FubmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkgIT09IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLk5PVF9TVEFSVEVEO1xuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VyUHJveHkucHJvdG90eXBlLmlzU3RyaWN0bHlTY2FubmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkgPT09IEh0bWw1UXJjb2RlU2Nhbm5lclN0YXRlLlNDQU5OSU5HO1xuICAgIH07XG4gICAgU3RhdGVNYW5hZ2VyUHJveHkucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKSA9PT0gSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuUEFVU0VEO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlTWFuYWdlclByb3h5O1xufSgpKTtcbmV4cG9ydCB7IFN0YXRlTWFuYWdlclByb3h5IH07XG52YXIgU3RhdGVNYW5hZ2VyRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVNYW5hZ2VyRmFjdG9yeSgpIHtcbiAgICB9XG4gICAgU3RhdGVNYW5hZ2VyRmFjdG9yeS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGVNYW5hZ2VyUHJveHkobmV3IFN0YXRlTWFuYWdlckltcGwoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVNYW5hZ2VyRmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZU1hbmFnZXJGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZS1tYW5hZ2VyLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgeyBCYXNlTG9nZ2dlciwgSHRtbDVRcmNvZGVSZXN1bHRGYWN0b3J5LCBIdG1sNVFyY29kZUVycm9yRmFjdG9yeSwgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLCBpc1ZhbGlkSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLCBIdG1sNVFyY29kZUNvbnN0YW50cywgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tIFwiLi9jb3JlXCI7XG5pbXBvcnQgeyBIdG1sNVFyY29kZVN0cmluZ3MgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XG5pbXBvcnQgeyBWaWRlb0NvbnN0cmFpbnRzVXRpbCB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBIdG1sNVFyY29kZVNoaW0gfSBmcm9tIFwiLi9jb2RlLWRlY29kZXJcIjtcbmltcG9ydCB7IENhbWVyYUZhY3RvcnkgfSBmcm9tIFwiLi9jYW1lcmEvZmFjdG9yaWVzXCI7XG5pbXBvcnQgeyBDYW1lcmFSZXRyaWV2ZXIgfSBmcm9tIFwiLi9jYW1lcmEvcmV0cmlldmVyXCI7XG5pbXBvcnQgeyBTdGF0ZU1hbmFnZXJGYWN0b3J5LCBIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZSB9IGZyb20gXCIuL3N0YXRlLW1hbmFnZXJcIjtcbnZhciBDb25zdGFudHMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25zdGFudHMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29uc3RhbnRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIENvbnN0YW50cy5ERUZBVUxUX1dJRFRIID0gMzAwO1xuICAgIENvbnN0YW50cy5ERUZBVUxUX1dJRFRIX09GRlNFVCA9IDI7XG4gICAgQ29uc3RhbnRzLkZJTEVfU0NBTl9NSU5fSEVJR0hUID0gMzAwO1xuICAgIENvbnN0YW50cy5GSUxFX1NDQU5fSElEREVOX0NBTlZBU19QQURESU5HID0gMTAwO1xuICAgIENvbnN0YW50cy5NSU5fUVJfQk9YX1NJWkUgPSA1MDtcbiAgICBDb25zdGFudHMuU0hBREVEX0xFRlQgPSAxO1xuICAgIENvbnN0YW50cy5TSEFERURfUklHSFQgPSAyO1xuICAgIENvbnN0YW50cy5TSEFERURfVE9QID0gMztcbiAgICBDb25zdGFudHMuU0hBREVEX0JPVFRPTSA9IDQ7XG4gICAgQ29uc3RhbnRzLlNIQURFRF9SRUdJT05fRUxFTUVOVF9JRCA9IFwicXItc2hhZGVkLXJlZ2lvblwiO1xuICAgIENvbnN0YW50cy5WRVJCT1NFID0gZmFsc2U7XG4gICAgQ29uc3RhbnRzLkJPUkRFUl9TSEFERVJfREVGQVVMVF9DT0xPUiA9IFwiI2ZmZmZmZlwiO1xuICAgIENvbnN0YW50cy5CT1JERVJfU0hBREVSX01BVENIX0NPTE9SID0gXCJyZ2IoOTAsIDE5MywgNTYpXCI7XG4gICAgcmV0dXJuIENvbnN0YW50cztcbn0oSHRtbDVRcmNvZGVDb25zdGFudHMpKTtcbnZhciBJbnRlcm5hbEh0bWw1UXJjb2RlQ29uZmlnID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlcm5hbEh0bWw1UXJjb2RlQ29uZmlnKGNvbmZpZywgbG9nZ2VyKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLmZwcyA9IENvbnN0YW50cy5TQ0FOX0RFRkFVTFRfRlBTO1xuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlRmxpcCA9IENvbnN0YW50cy5ERUZBVUxUX0RJU0FCTEVfRkxJUDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjb25maWcuZnBzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcHMgPSBjb25maWcuZnBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlRmxpcCA9IGNvbmZpZy5kaXNhYmxlRmxpcCA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucXJib3ggPSBjb25maWcucXJib3g7XG4gICAgICAgICAgICB0aGlzLmFzcGVjdFJhdGlvID0gY29uZmlnLmFzcGVjdFJhdGlvO1xuICAgICAgICAgICAgdGhpcy52aWRlb0NvbnN0cmFpbnRzID0gY29uZmlnLnZpZGVvQ29uc3RyYWludHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSW50ZXJuYWxIdG1sNVFyY29kZUNvbmZpZy5wcm90b3R5cGUuaXNNZWRpYVN0cmVhbUNvbnN0cmFpbnRzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52aWRlb0NvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2dFcnJvcihcIkVtcHR5IHZpZGVvQ29uc3RyYWludHNcIiwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFZpZGVvQ29uc3RyYWludHNVdGlsLmlzTWVkaWFTdHJlYW1Db25zdHJhaW50c1ZhbGlkKHRoaXMudmlkZW9Db25zdHJhaW50cywgdGhpcy5sb2dnZXIpO1xuICAgIH07XG4gICAgSW50ZXJuYWxIdG1sNVFyY29kZUNvbmZpZy5wcm90b3R5cGUuaXNTaGFkZWRCb3hFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucXJib3gpO1xuICAgIH07XG4gICAgSW50ZXJuYWxIdG1sNVFyY29kZUNvbmZpZy5jcmVhdGUgPSBmdW5jdGlvbiAoY29uZmlnLCBsb2dnZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbEh0bWw1UXJjb2RlQ29uZmlnKGNvbmZpZywgbG9nZ2VyKTtcbiAgICB9O1xuICAgIHJldHVybiBJbnRlcm5hbEh0bWw1UXJjb2RlQ29uZmlnO1xufSgpKTtcbnZhciBIdG1sNVFyY29kZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSHRtbDVRcmNvZGUoZWxlbWVudElkLCBjb25maWdPclZlcmJvc2l0eUZsYWcpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW52YXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY2FubmVyUGF1c2VkVWlFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNCb3JkZXJTaGFkZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5ib3JkZXJTaGFkZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5xck1hdGNoID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlZENhbWVyYSA9IG51bGw7XG4gICAgICAgIHRoaXMucXJSZWdpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RTY2FuSW1hZ2VGaWxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1NjYW5uaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKSkge1xuICAgICAgICAgICAgdGhyb3cgXCJIVE1MIEVsZW1lbnQgd2l0aCBpZD1cIi5jb25jYXQoZWxlbWVudElkLCBcIiBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IGZhbHNlO1xuICAgICAgICB2YXIgZXhwZXJpbWVudGFsRmVhdHVyZUNvbmZpZztcbiAgICAgICAgdmFyIGNvbmZpZ09iamVjdDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWdPclZlcmJvc2l0eUZsYWcgPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHRoaXMudmVyYm9zZSA9IGNvbmZpZ09yVmVyYm9zaXR5RmxhZyA9PT0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWdPclZlcmJvc2l0eUZsYWcpIHtcbiAgICAgICAgICAgIGNvbmZpZ09iamVjdCA9IGNvbmZpZ09yVmVyYm9zaXR5RmxhZztcbiAgICAgICAgICAgIHRoaXMudmVyYm9zZSA9IGNvbmZpZ09iamVjdC52ZXJib3NlID09PSB0cnVlO1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsRmVhdHVyZUNvbmZpZyA9IGNvbmZpZ09iamVjdC5leHBlcmltZW50YWxGZWF0dXJlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBCYXNlTG9nZ2dlcih0aGlzLnZlcmJvc2UpO1xuICAgICAgICB0aGlzLnFyY29kZSA9IG5ldyBIdG1sNVFyY29kZVNoaW0odGhpcy5nZXRTdXBwb3J0ZWRGb3JtYXRzKGNvbmZpZ09yVmVyYm9zaXR5RmxhZyksIHRoaXMuZ2V0VXNlQmFyQ29kZURldGVjdG9ySWZTdXBwb3J0ZWQoY29uZmlnT2JqZWN0KSwgdGhpcy52ZXJib3NlLCB0aGlzLmxvZ2dlcik7XG4gICAgICAgIHRoaXMuZm9yZXZlclNjYW5UaW1lb3V0O1xuICAgICAgICB0aGlzLnNob3VsZFNjYW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlclByb3h5ID0gU3RhdGVNYW5hZ2VyRmFjdG9yeS5jcmVhdGUoKTtcbiAgICB9XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKGNhbWVyYUlkT3JDb25maWcsIGNvbmZpZ3VyYXRpb24sIHFyQ29kZVN1Y2Nlc3NDYWxsYmFjaywgcXJDb2RlRXJyb3JDYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIWNhbWVyYUlkT3JDb25maWcpIHtcbiAgICAgICAgICAgIHRocm93IFwiY2FtZXJhSWRPckNvbmZpZyBpcyByZXF1aXJlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcXJDb2RlU3VjY2Vzc0NhbGxiYWNrXG4gICAgICAgICAgICB8fCB0eXBlb2YgcXJDb2RlU3VjY2Vzc0NhbGxiYWNrICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgXCJxckNvZGVTdWNjZXNzQ2FsbGJhY2sgaXMgcmVxdWlyZWQgYW5kIHNob3VsZCBiZSBhIGZ1bmN0aW9uLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxckNvZGVFcnJvckNhbGxiYWNrSW50ZXJuYWw7XG4gICAgICAgIGlmIChxckNvZGVFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBxckNvZGVFcnJvckNhbGxiYWNrSW50ZXJuYWwgPSBxckNvZGVFcnJvckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXJDb2RlRXJyb3JDYWxsYmFja0ludGVybmFsXG4gICAgICAgICAgICAgICAgPSB0aGlzLnZlcmJvc2UgPyB0aGlzLmxvZ2dlci5sb2cgOiBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGludGVybmFsQ29uZmlnID0gSW50ZXJuYWxIdG1sNVFyY29kZUNvbmZpZy5jcmVhdGUoY29uZmlndXJhdGlvbiwgdGhpcy5sb2dnZXIpO1xuICAgICAgICB0aGlzLmNsZWFyRWxlbWVudCgpO1xuICAgICAgICB2YXIgdmlkZW9Db25zdHJhaW50c0F2YWlsYWJsZUFuZFZhbGlkID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnRlcm5hbENvbmZpZy52aWRlb0NvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICBpZiAoIWludGVybmFsQ29uZmlnLmlzTWVkaWFTdHJlYW1Db25zdHJhaW50c1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2dFcnJvcihcIid2aWRlb0NvbnN0cmFpbnRzJyBpcyBub3QgdmFsaWQgJ01lZGlhU3RyZWFtQ29uc3RyYWludHMsIFwiXG4gICAgICAgICAgICAgICAgICAgICsgXCJpdCB3aWxsIGJlIGlnbm9yZWQuJ1wiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZGVvQ29uc3RyYWludHNBdmFpbGFibGVBbmRWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFyZVZpZGVvQ29uc3RyYWludHNFbmFibGVkID0gdmlkZW9Db25zdHJhaW50c0F2YWlsYWJsZUFuZFZhbGlkO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElkKTtcbiAgICAgICAgdmFyIHJvb3RFbGVtZW50V2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoXG4gICAgICAgICAgICA/IGVsZW1lbnQuY2xpZW50V2lkdGggOiBDb25zdGFudHMuREVGQVVMVF9XSURUSDtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgdGhpcy5zaG91bGRTY2FuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHRvU2Nhbm5pbmdTdGF0ZUNoYW5nZVRyYW5zYWN0aW9uID0gdGhpcy5zdGF0ZU1hbmFnZXJQcm94eS5zdGFydFRyYW5zaXRpb24oSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuU0NBTk5JTkcpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHZpZGVvQ29uc3RyYWludHMgPSBhcmVWaWRlb0NvbnN0cmFpbnRzRW5hYmxlZFxuICAgICAgICAgICAgICAgID8gaW50ZXJuYWxDb25maWcudmlkZW9Db25zdHJhaW50c1xuICAgICAgICAgICAgICAgIDogJHRoaXMuY3JlYXRlVmlkZW9Db25zdHJhaW50cyhjYW1lcmFJZE9yQ29uZmlnKTtcbiAgICAgICAgICAgIGlmICghdmlkZW9Db25zdHJhaW50cykge1xuICAgICAgICAgICAgICAgIHRvU2Nhbm5pbmdTdGF0ZUNoYW5nZVRyYW5zYWN0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHJlamVjdChcInZpZGVvQ29uc3RyYWludHMgc2hvdWxkIGJlIGRlZmluZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbWVyYVJlbmRlcmluZ09wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIGlmICghYXJlVmlkZW9Db25zdHJhaW50c0VuYWJsZWQgfHwgaW50ZXJuYWxDb25maWcuYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFSZW5kZXJpbmdPcHRpb25zLmFzcGVjdFJhdGlvID0gaW50ZXJuYWxDb25maWcuYXNwZWN0UmF0aW87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVuZGVyaW5nQ2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgICAgIG9uUmVuZGVyU3VyZmFjZVJlYWR5OiBmdW5jdGlvbiAodmlld2ZpbmRlcldpZHRoLCB2aWV3ZmluZGVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnNldHVwVWkodmlld2ZpbmRlcldpZHRoLCB2aWV3ZmluZGVySGVpZ2h0LCBpbnRlcm5hbENvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmlzU2Nhbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5mb3JldmVyU2NhbihpbnRlcm5hbENvbmZpZywgcXJDb2RlU3VjY2Vzc0NhbGxiYWNrLCBxckNvZGVFcnJvckNhbGxiYWNrSW50ZXJuYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBDYW1lcmFGYWN0b3J5LmZhaWxJZk5vdFN1cHBvcnRlZCgpLnRoZW4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBmYWN0b3J5LmNyZWF0ZSh2aWRlb0NvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uIChjYW1lcmEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbWVyYS5yZW5kZXIoX3RoaXMuZWxlbWVudCwgY2FtZXJhUmVuZGVyaW5nT3B0aW9ucywgcmVuZGVyaW5nQ2FsbGJhY2tzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlbmRlcmVkQ2FtZXJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW5kZXJlZENhbWVyYSA9IHJlbmRlcmVkQ2FtZXJhO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9TY2FubmluZ1N0YXRlQ2hhbmdlVHJhbnNhY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvU2Nhbm5pbmdTdGF0ZUNoYW5nZVRyYW5zYWN0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvU2Nhbm5pbmdTdGF0ZUNoYW5nZVRyYW5zYWN0aW9uLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoSHRtbDVRcmNvZGVTdHJpbmdzLmVycm9yR2V0dGluZ1VzZXJNZWRpYShlcnJvcikpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICB0b1NjYW5uaW5nU3RhdGVDaGFuZ2VUcmFuc2FjdGlvbi5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICByZWplY3QoSHRtbDVRcmNvZGVTdHJpbmdzLmNhbWVyYVN0cmVhbWluZ05vdFN1cHBvcnRlZCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uIChzaG91bGRQYXVzZVZpZGVvKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZU1hbmFnZXJQcm94eS5pc1N0cmljdGx5U2Nhbm5pbmcoKSkge1xuICAgICAgICAgICAgdGhyb3cgXCJDYW5ub3QgcGF1c2UsIHNjYW5uZXIgaXMgbm90IHNjYW5uaW5nLlwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGVNYW5hZ2VyUHJveHkuZGlyZWN0VHJhbnNpdGlvbihIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZS5QQVVTRUQpO1xuICAgICAgICB0aGlzLnNob3dQYXVzZWRTdGF0ZSgpO1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2hvdWxkUGF1c2VWaWRlbykgfHwgc2hvdWxkUGF1c2VWaWRlbyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgc2hvdWxkUGF1c2VWaWRlbyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRQYXVzZVZpZGVvICYmIHRoaXMucmVuZGVyZWRDYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRDYW1lcmEucGF1c2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlTWFuYWdlclByb3h5LmlzUGF1c2VkKCkpIHtcbiAgICAgICAgICAgIHRocm93IFwiQ2Fubm90IHJlc3VsdCwgc2Nhbm5lciBpcyBub3QgcGF1c2VkLlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZENhbWVyYSkge1xuICAgICAgICAgICAgdGhyb3cgXCJyZW5kZXJlZENhbWVyYSBkb2Vzbid0IGV4aXN0IHdoaWxlIHRyeWluZyByZXN1bWUoKVwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uVG9TY2FubmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICR0aGlzLnN0YXRlTWFuYWdlclByb3h5LmRpcmVjdFRyYW5zaXRpb24oSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuU0NBTk5JTkcpO1xuICAgICAgICAgICAgJHRoaXMuaGlkZVBhdXNlZFN0YXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZENhbWVyYS5pc1BhdXNlZCgpKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uVG9TY2FubmluZygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRDYW1lcmEucmVzdW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb25Ub1NjYW5uaW5nKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZU1hbmFnZXJQcm94eS5nZXRTdGF0ZSgpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZU1hbmFnZXJQcm94eS5pc1NjYW5uaW5nKCkpIHtcbiAgICAgICAgICAgIHRocm93IFwiQ2Fubm90IHN0b3AsIHNjYW5uZXIgaXMgbm90IHJ1bm5pbmcgb3IgcGF1c2VkLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0b1N0b3BwZWRTdGF0ZVRyYW5zYWN0aW9uID0gdGhpcy5zdGF0ZU1hbmFnZXJQcm94eS5zdGFydFRyYW5zaXRpb24oSHRtbDVRcmNvZGVTY2FubmVyU3RhdGUuTk9UX1NUQVJURUQpO1xuICAgICAgICB0aGlzLnNob3VsZFNjYW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZm9yZXZlclNjYW5UaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mb3JldmVyU2NhblRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZW1vdmVRclJlZ2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGlsZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDb25zdGFudHMuU0hBREVEX1JFR0lPTl9FTEVNRU5UX0lEKTtcbiAgICAgICAgICAgIGlmIChjaGlsZEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVkQ2FtZXJhLmNsb3NlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkdGhpcy5yZW5kZXJlZENhbWVyYSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoJHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQoJHRoaXMuY2FudmFzRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgJHRoaXMuY2FudmFzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1vdmVRclJlZ2lvbigpO1xuICAgICAgICAgICAgaWYgKCR0aGlzLnFyUmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMucXJSZWdpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCR0aGlzLmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvU3RvcHBlZFN0YXRlVHJhbnNhY3Rpb24uZXhlY3V0ZSgpO1xuICAgICAgICAgICAgJHRoaXMuaGlkZVBhdXNlZFN0YXRlKCk7XG4gICAgICAgICAgICAkdGhpcy5pc1NjYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnNjYW5GaWxlID0gZnVuY3Rpb24gKGltYWdlRmlsZSwgc2hvd0ltYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYW5GaWxlVjIoaW1hZ2VGaWxlLCBzaG93SW1hZ2UpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaHRtbDVxcmNvZGVSZXN1bHQpIHsgcmV0dXJuIGh0bWw1cXJjb2RlUmVzdWx0LmRlY29kZWRUZXh0OyB9KTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5zY2FuRmlsZVYyID0gZnVuY3Rpb24gKGltYWdlRmlsZSwgc2hvd0ltYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghaW1hZ2VGaWxlIHx8ICEoaW1hZ2VGaWxlIGluc3RhbmNlb2YgRmlsZSkpIHtcbiAgICAgICAgICAgIHRocm93IFwiaW1hZ2VGaWxlIGFyZ3VtZW50IGlzIG1hbmRhdG9yeSBhbmQgc2hvdWxkIGJlIGluc3RhbmNlIFwiXG4gICAgICAgICAgICAgICAgKyBcIm9mIEZpbGUuIFVzZSAnZXZlbnQudGFyZ2V0LmZpbGVzWzBdJy5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2hvd0ltYWdlKSkge1xuICAgICAgICAgICAgc2hvd0ltYWdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc3RhdGVNYW5hZ2VyUHJveHkuY2FuU2NhbkZpbGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgXCJDYW5ub3Qgc3RhcnQgZmlsZSBzY2FuIC0gb25nb2luZyBjYW1lcmEgc2NhblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfdGhpcy5wb3NzaWJseUNsb3NlTGFzdFNjYW5JbWFnZUZpbGUoKTtcbiAgICAgICAgICAgIF90aGlzLmNsZWFyRWxlbWVudCgpO1xuICAgICAgICAgICAgX3RoaXMubGFzdFNjYW5JbWFnZUZpbGUgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGltYWdlRmlsZSk7XG4gICAgICAgICAgICB2YXIgaW5wdXRJbWFnZSA9IG5ldyBJbWFnZTtcbiAgICAgICAgICAgIGlucHV0SW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZVdpZHRoID0gaW5wdXRJbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VIZWlnaHQgPSBpbnB1dEltYWdlLmhlaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF90aGlzLmVsZW1lbnRJZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcldpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aFxuICAgICAgICAgICAgICAgICAgICA/IGVsZW1lbnQuY2xpZW50V2lkdGggOiBDb25zdGFudHMuREVGQVVMVF9XSURUSDtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVySGVpZ2h0ID0gTWF0aC5tYXgoZWxlbWVudC5jbGllbnRIZWlnaHQgPyBlbGVtZW50LmNsaWVudEhlaWdodCA6IGltYWdlSGVpZ2h0LCBDb25zdGFudHMuRklMRV9TQ0FOX01JTl9IRUlHSFQpO1xuICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBfdGhpcy5jb21wdXRlQ2FudmFzRHJhd0NvbmZpZyhpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCwgY29udGFpbmVyV2lkdGgsIGNvbnRhaW5lckhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3dJbWFnZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUNhbnZhcyA9IF90aGlzLmNyZWF0ZUNhbnZhc0VsZW1lbnQoY29udGFpbmVyV2lkdGgsIGNvbnRhaW5lckhlaWdodCwgXCJxci1jYW52YXMtdmlzaWJsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh2aXNpYmxlQ2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHRfMSA9IHZpc2libGVDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHRfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJVbmFibGUgdG8gZ2V0IDJkIGNvbnRleHQgZnJvbSBjYW52YXNcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0XzEuY2FudmFzLndpZHRoID0gY29udGFpbmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRfMS5jYW52YXMuaGVpZ2h0ID0gY29udGFpbmVySGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0XzEuZHJhd0ltYWdlKGlucHV0SW1hZ2UsIDAsIDAsIGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0LCBjb25maWcueCwgY29uZmlnLnksIGNvbmZpZy53aWR0aCwgY29uZmlnLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gQ29uc3RhbnRzLkZJTEVfU0NBTl9ISURERU5fQ0FOVkFTX1BBRERJTkc7XG4gICAgICAgICAgICAgICAgdmFyIGhpZGRlbkltYWdlV2lkdGggPSBNYXRoLm1heChpbnB1dEltYWdlLndpZHRoLCBjb25maWcud2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciBoaWRkZW5JbWFnZUhlaWdodCA9IE1hdGgubWF4KGlucHV0SW1hZ2UuaGVpZ2h0LCBjb25maWcuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB2YXIgaGlkZGVuQ2FudmFzV2lkdGggPSBoaWRkZW5JbWFnZVdpZHRoICsgMiAqIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgdmFyIGhpZGRlbkNhbnZhc0hlaWdodCA9IGhpZGRlbkltYWdlSGVpZ2h0ICsgMiAqIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgdmFyIGhpZGRlbkNhbnZhcyA9IF90aGlzLmNyZWF0ZUNhbnZhc0VsZW1lbnQoaGlkZGVuQ2FudmFzV2lkdGgsIGhpZGRlbkNhbnZhc0hlaWdodCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChoaWRkZW5DYW52YXMpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gaGlkZGVuQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJVbmFibGUgdG8gZ2V0IDJkIGNvbnRleHQgZnJvbSBjYW52YXNcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5jYW52YXMud2lkdGggPSBoaWRkZW5DYW52YXNXaWR0aDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBoaWRkZW5DYW52YXNIZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW5wdXRJbWFnZSwgMCwgMCwgaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQsIHBhZGRpbmcsIHBhZGRpbmcsIGhpZGRlbkltYWdlV2lkdGgsIGhpZGRlbkltYWdlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5xcmNvZGUuZGVjb2RlUm9idXN0bHlBc3luYyhoaWRkZW5DYW52YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEh0bWw1UXJjb2RlUmVzdWx0RmFjdG9yeS5jcmVhdGVGcm9tUXJjb2RlUmVzdWx0KHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiUVIgY29kZSBwYXJzZSBlcnJvciwgZXJyb3IgPSBcIi5jb25jYXQoZXhjZXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlucHV0SW1hZ2Uub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgIGlucHV0SW1hZ2Uub25hYm9ydCA9IHJlamVjdDtcbiAgICAgICAgICAgIGlucHV0SW1hZ2Uub25zdGFsbGVkID0gcmVqZWN0O1xuICAgICAgICAgICAgaW5wdXRJbWFnZS5vbnN1c3BlbmQgPSByZWplY3Q7XG4gICAgICAgICAgICBpbnB1dEltYWdlLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1hZ2VGaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJFbGVtZW50KCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5nZXRDYW1lcmFzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQ2FtZXJhUmV0cmlldmVyLnJldHJpZXZlKCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZ2V0UnVubmluZ1RyYWNrQ2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZW5kZXJlZENhbWVyYU9yRmFpbCgpLmdldFJ1bm5pbmdUcmFja0NhcGFiaWxpdGllcygpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLmdldFJ1bm5pbmdUcmFja1NldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZW5kZXJlZENhbWVyYU9yRmFpbCgpLmdldFJ1bm5pbmdUcmFja1NldHRpbmdzKCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZ2V0UnVubmluZ1RyYWNrQ2FtZXJhQ2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZW5kZXJlZENhbWVyYU9yRmFpbCgpLmdldENhcGFiaWxpdGllcygpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLmFwcGx5VmlkZW9Db25zdHJhaW50cyA9IGZ1bmN0aW9uICh2aWRlb0NvbnN0YWludHMpIHtcbiAgICAgICAgaWYgKCF2aWRlb0NvbnN0YWludHMpIHtcbiAgICAgICAgICAgIHRocm93IFwidmlkZW9Db25zdGFpbnRzIGlzIHJlcXVpcmVkIGFyZ3VtZW50LlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFWaWRlb0NvbnN0cmFpbnRzVXRpbC5pc01lZGlhU3RyZWFtQ29uc3RyYWludHNWYWxpZCh2aWRlb0NvbnN0YWludHMsIHRoaXMubG9nZ2VyKSkge1xuICAgICAgICAgICAgdGhyb3cgXCJpbnZhbGlkIHZpZGVvQ29uc3RhaW50cyBwYXNzZWQsIGNoZWNrIGxvZ3MgZm9yIG1vcmUgZGV0YWlsc1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlbmRlcmVkQ2FtZXJhT3JGYWlsKCkuYXBwbHlWaWRlb0NvbnN0cmFpbnRzKHZpZGVvQ29uc3RhaW50cyk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZ2V0UmVuZGVyZWRDYW1lcmFPckZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkQ2FtZXJhID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IFwiU2Nhbm5pbmcgaXMgbm90IGluIHJ1bm5pbmcgc3RhdGUsIGNhbGwgdGhpcyBBUEkgb25seSB3aGVuXCJcbiAgICAgICAgICAgICAgICArIFwiIFFSIGNvZGUgc2Nhbm5pbmcgdXNpbmcgY2FtZXJhIGlzIGluIHJ1bm5pbmcgc3RhdGUuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZWRDYW1lcmE7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZ2V0U3VwcG9ydGVkRm9ybWF0cyA9IGZ1bmN0aW9uIChjb25maWdPclZlcmJvc2l0eUZsYWcpIHtcbiAgICAgICAgdmFyIGFsbEZvcm1hdHMgPSBbXG4gICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuUVJfQ09ERSxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5BWlRFQyxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5DT0RBQkFSLFxuICAgICAgICAgICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkNPREVfMzksXG4gICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuQ09ERV85MyxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5DT0RFXzEyOCxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5EQVRBX01BVFJJWCxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5NQVhJQ09ERSxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5JVEYsXG4gICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuRUFOXzEzLFxuICAgICAgICAgICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLkVBTl84LFxuICAgICAgICAgICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlBERl80MTcsXG4gICAgICAgICAgICBIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMuUlNTXzE0LFxuICAgICAgICAgICAgSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzLlJTU19FWFBBTkRFRCxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5VUENfQSxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5VUENfRSxcbiAgICAgICAgICAgIEh0bWw1UXJjb2RlU3VwcG9ydGVkRm9ybWF0cy5VUENfRUFOX0VYVEVOU0lPTixcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKCFjb25maWdPclZlcmJvc2l0eUZsYWdcbiAgICAgICAgICAgIHx8IHR5cGVvZiBjb25maWdPclZlcmJvc2l0eUZsYWcgPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhbGxGb3JtYXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29uZmlnT3JWZXJib3NpdHlGbGFnLmZvcm1hdHNUb1N1cHBvcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBhbGxGb3JtYXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb25maWdPclZlcmJvc2l0eUZsYWcuZm9ybWF0c1RvU3VwcG9ydCkpIHtcbiAgICAgICAgICAgIHRocm93IFwiY29uZmlnT3JWZXJib3NpdHlGbGFnLmZvcm1hdHNUb1N1cHBvcnQgc2hvdWxkIGJlIHVuZGVmaW5lZCBcIlxuICAgICAgICAgICAgICAgICsgXCJvciBhbiBhcnJheS5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnT3JWZXJib3NpdHlGbGFnLmZvcm1hdHNUb1N1cHBvcnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcIkF0bGVhc3QgMSBmb3JtYXRzVG9TdXBwb3J0IGlzIG5lZWRlZC5cIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3VwcG9ydGVkRm9ybWF0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY29uZmlnT3JWZXJib3NpdHlGbGFnLmZvcm1hdHNUb1N1cHBvcnQ7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRIdG1sNVFyY29kZVN1cHBvcnRlZEZvcm1hdHMoZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHN1cHBvcnRlZEZvcm1hdHMucHVzaChmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcIkludmFsaWQgZm9ybWF0OiBcIi5jb25jYXQoZm9ybWF0LCBcIiBwYXNzZWQgaW4gY29uZmlnLCBpZ25vcmluZy5cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdXBwb3J0ZWRGb3JtYXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJOb25lIG9mIGZvcm1hdHNUb1N1cHBvcnQgbWF0Y2ggc3VwcG9ydGVkIHZhbHVlcy5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwcG9ydGVkRm9ybWF0cztcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5nZXRVc2VCYXJDb2RlRGV0ZWN0b3JJZlN1cHBvcnRlZCA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGNvbmZpZykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoY29uZmlnLnVzZUJhckNvZGVEZXRlY3RvcklmU3VwcG9ydGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy51c2VCYXJDb2RlRGV0ZWN0b3JJZlN1cHBvcnRlZCAhPT0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGNvbmZpZy5leHBlcmltZW50YWxGZWF0dXJlcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBleHBlcmltZW50YWxGZWF0dXJlcyA9IGNvbmZpZy5leHBlcmltZW50YWxGZWF0dXJlcztcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGV4cGVyaW1lbnRhbEZlYXR1cmVzLnVzZUJhckNvZGVEZXRlY3RvcklmU3VwcG9ydGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cGVyaW1lbnRhbEZlYXR1cmVzLnVzZUJhckNvZGVEZXRlY3RvcklmU3VwcG9ydGVkICE9PSBmYWxzZTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS52YWxpZGF0ZVFyYm94U2l6ZSA9IGZ1bmN0aW9uICh2aWV3ZmluZGVyV2lkdGgsIHZpZXdmaW5kZXJIZWlnaHQsIGludGVybmFsQ29uZmlnKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBxcmJveFNpemUgPSBpbnRlcm5hbENvbmZpZy5xcmJveDtcbiAgICAgICAgdGhpcy52YWxpZGF0ZVFyYm94Q29uZmlnKHFyYm94U2l6ZSk7XG4gICAgICAgIHZhciBxckRpbWVuc2lvbnMgPSB0aGlzLnRvUXJkaW1lbnNpb25zKHZpZXdmaW5kZXJXaWR0aCwgdmlld2ZpbmRlckhlaWdodCwgcXJib3hTaXplKTtcbiAgICAgICAgdmFyIHZhbGlkYXRlTWluU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgICAgICBpZiAoc2l6ZSA8IENvbnN0YW50cy5NSU5fUVJfQk9YX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIm1pbmltdW0gc2l6ZSBvZiAnY29uZmlnLnFyYm94JyBkaW1lbnNpb24gdmFsdWUgaXNcIlxuICAgICAgICAgICAgICAgICAgICArIFwiIFwiLmNvbmNhdChDb25zdGFudHMuTUlOX1FSX0JPWF9TSVpFLCBcInB4LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNvcnJlY3RXaWR0aEJhc2VkT25Sb290RWxlbWVudFNpemUgPSBmdW5jdGlvbiAoY29uZmlnV2lkdGgpIHtcbiAgICAgICAgICAgIGlmIChjb25maWdXaWR0aCA+IHZpZXdmaW5kZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci53YXJuKFwiYHFyYm94LndpZHRoYCBvciBgcXJib3hgIGlzIGxhcmdlciB0aGFuIHRoZVwiXG4gICAgICAgICAgICAgICAgICAgICsgXCIgd2lkdGggb2YgdGhlIHJvb3QgZWxlbWVudC4gVGhlIHdpZHRoIHdpbGwgYmUgdHJ1bmNhdGVkXCJcbiAgICAgICAgICAgICAgICAgICAgKyBcIiB0byB0aGUgd2lkdGggb2Ygcm9vdCBlbGVtZW50LlwiKTtcbiAgICAgICAgICAgICAgICBjb25maWdXaWR0aCA9IHZpZXdmaW5kZXJXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWdXaWR0aDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFsaWRhdGVNaW5TaXplKHFyRGltZW5zaW9ucy53aWR0aCk7XG4gICAgICAgIHZhbGlkYXRlTWluU2l6ZShxckRpbWVuc2lvbnMuaGVpZ2h0KTtcbiAgICAgICAgcXJEaW1lbnNpb25zLndpZHRoID0gY29ycmVjdFdpZHRoQmFzZWRPblJvb3RFbGVtZW50U2l6ZShxckRpbWVuc2lvbnMud2lkdGgpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnZhbGlkYXRlUXJib3hDb25maWcgPSBmdW5jdGlvbiAocXJib3hTaXplKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcXJib3hTaXplID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBxcmJveFNpemUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxcmJveFNpemUud2lkdGggPT09IHVuZGVmaW5lZCB8fCBxcmJveFNpemUuaGVpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IFwiSW52YWxpZCBpbnN0YW5jZSBvZiBRckRpbWVuc2lvbnMgcGFzc2VkIGZvciBcIlxuICAgICAgICAgICAgICAgICsgXCInY29uZmlnLnFyYm94Jy4gQm90aCAnd2lkdGgnIGFuZCAnaGVpZ2h0JyBzaG91bGQgYmUgc2V0LlwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUudG9RcmRpbWVuc2lvbnMgPSBmdW5jdGlvbiAodmlld2ZpbmRlcldpZHRoLCB2aWV3ZmluZGVySGVpZ2h0LCBxcmJveFNpemUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBxcmJveFNpemUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHdpZHRoOiBxcmJveFNpemUsIGhlaWdodDogcXJib3hTaXplIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHFyYm94U2l6ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBxcmJveFNpemUodmlld2ZpbmRlcldpZHRoLCB2aWV3ZmluZGVySGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInFyYm94IGNvbmZpZyB3YXMgcGFzc2VkIGFzIGEgZnVuY3Rpb24gYnV0IGl0IGZhaWxlZCB3aXRoIFwiXG4gICAgICAgICAgICAgICAgICAgICsgXCJ1bmtub3duIGVycm9yXCIgKyBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHFyYm94U2l6ZTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5zZXR1cFVpID0gZnVuY3Rpb24gKHZpZXdmaW5kZXJXaWR0aCwgdmlld2ZpbmRlckhlaWdodCwgaW50ZXJuYWxDb25maWcpIHtcbiAgICAgICAgaWYgKGludGVybmFsQ29uZmlnLmlzU2hhZGVkQm94RW5hYmxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUXJib3hTaXplKHZpZXdmaW5kZXJXaWR0aCwgdmlld2ZpbmRlckhlaWdodCwgaW50ZXJuYWxDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxcmJveFNpemUgPSBpc051bGxPclVuZGVmaW5lZChpbnRlcm5hbENvbmZpZy5xcmJveCkgP1xuICAgICAgICAgICAgeyB3aWR0aDogdmlld2ZpbmRlcldpZHRoLCBoZWlnaHQ6IHZpZXdmaW5kZXJIZWlnaHQgfSA6IGludGVybmFsQ29uZmlnLnFyYm94O1xuICAgICAgICB0aGlzLnZhbGlkYXRlUXJib3hDb25maWcocXJib3hTaXplKTtcbiAgICAgICAgdmFyIHFyRGltZW5zaW9ucyA9IHRoaXMudG9RcmRpbWVuc2lvbnModmlld2ZpbmRlcldpZHRoLCB2aWV3ZmluZGVySGVpZ2h0LCBxcmJveFNpemUpO1xuICAgICAgICBpZiAocXJEaW1lbnNpb25zLmhlaWdodCA+IHZpZXdmaW5kZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJbSHRtbDVRcmNvZGVdIGNvbmZpZy5xcmJveCBoYXMgaGVpZ2h0IHRoYXQgaXNcIlxuICAgICAgICAgICAgICAgICsgXCJncmVhdGVyIHRoYW4gdGhlIGhlaWdodCBvZiB0aGUgdmlkZW8gc3RyZWFtLiBTaGFkaW5nIHdpbGwgYmVcIlxuICAgICAgICAgICAgICAgICsgXCIgaWdub3JlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2hvdWxkU2hhZGluZ0JlQXBwbGllZCA9IGludGVybmFsQ29uZmlnLmlzU2hhZGVkQm94RW5hYmxlZCgpXG4gICAgICAgICAgICAmJiBxckRpbWVuc2lvbnMuaGVpZ2h0IDw9IHZpZXdmaW5kZXJIZWlnaHQ7XG4gICAgICAgIHZhciBkZWZhdWx0UXJSZWdpb24gPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHdpZHRoOiB2aWV3ZmluZGVyV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHZpZXdmaW5kZXJIZWlnaHRcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHFyUmVnaW9uID0gc2hvdWxkU2hhZGluZ0JlQXBwbGllZFxuICAgICAgICAgICAgPyB0aGlzLmdldFNoYWRlZFJlZ2lvbkJvdW5kcyh2aWV3ZmluZGVyV2lkdGgsIHZpZXdmaW5kZXJIZWlnaHQsIHFyRGltZW5zaW9ucylcbiAgICAgICAgICAgIDogZGVmYXVsdFFyUmVnaW9uO1xuICAgICAgICB2YXIgY2FudmFzRWxlbWVudCA9IHRoaXMuY3JlYXRlQ2FudmFzRWxlbWVudChxclJlZ2lvbi53aWR0aCwgcXJSZWdpb24uaGVpZ2h0KTtcbiAgICAgICAgdmFyIGNvbnRleHRBdHRyaWJ1dGVzID0geyB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUgfTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXNFbGVtZW50LmdldENvbnRleHQoXCIyZFwiLCBjb250ZXh0QXR0cmlidXRlcyk7XG4gICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gcXJSZWdpb24ud2lkdGg7XG4gICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IHFyUmVnaW9uLmhlaWdodDtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZChjYW52YXNFbGVtZW50KTtcbiAgICAgICAgaWYgKHNob3VsZFNoYWRpbmdCZUFwcGxpZWQpIHtcbiAgICAgICAgICAgIHRoaXMucG9zc2libHlJbnNlcnRTaGFkaW5nRWxlbWVudCh0aGlzLmVsZW1lbnQsIHZpZXdmaW5kZXJXaWR0aCwgdmlld2ZpbmRlckhlaWdodCwgcXJEaW1lbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZVNjYW5uZXJQYXVzZWRVaUVsZW1lbnQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5xclJlZ2lvbiA9IHFyUmVnaW9uO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmNhbnZhc0VsZW1lbnQgPSBjYW52YXNFbGVtZW50O1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLmNyZWF0ZVNjYW5uZXJQYXVzZWRVaUVsZW1lbnQgPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHNjYW5uZXJQYXVzZWRVaUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzY2FubmVyUGF1c2VkVWlFbGVtZW50LmlubmVyVGV4dCA9IEh0bWw1UXJjb2RlU3RyaW5ncy5zY2FubmVyUGF1c2VkKCk7XG4gICAgICAgIHNjYW5uZXJQYXVzZWRVaUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBzY2FubmVyUGF1c2VkVWlFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBzY2FubmVyUGF1c2VkVWlFbGVtZW50LnN0eWxlLnRvcCA9IFwiMHB4XCI7XG4gICAgICAgIHNjYW5uZXJQYXVzZWRVaUVsZW1lbnQuc3R5bGUuekluZGV4ID0gXCIxXCI7XG4gICAgICAgIHNjYW5uZXJQYXVzZWRVaUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiYSg5LCA5LCA5LCAwLjQ2KVwiO1xuICAgICAgICBzY2FubmVyUGF1c2VkVWlFbGVtZW50LnN0eWxlLmNvbG9yID0gXCIjRkZFQ0VDXCI7XG4gICAgICAgIHNjYW5uZXJQYXVzZWRVaUVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgc2Nhbm5lclBhdXNlZFVpRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICByb290RWxlbWVudC5hcHBlbmRDaGlsZChzY2FubmVyUGF1c2VkVWlFbGVtZW50KTtcbiAgICAgICAgdGhpcy5zY2FubmVyUGF1c2VkVWlFbGVtZW50ID0gc2Nhbm5lclBhdXNlZFVpRWxlbWVudDtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5zY2FuQ29udGV4dCA9IGZ1bmN0aW9uIChxckNvZGVTdWNjZXNzQ2FsbGJhY2ssIHFyQ29kZUVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVNYW5hZ2VyUHJveHkuaXNQYXVzZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXJjb2RlLmRlY29kZUFzeW5jKHRoaXMuY2FudmFzRWxlbWVudClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHFyQ29kZVN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQudGV4dCwgSHRtbDVRcmNvZGVSZXN1bHRGYWN0b3J5LmNyZWF0ZUZyb21RcmNvZGVSZXN1bHQocmVzdWx0KSk7XG4gICAgICAgICAgICBfdGhpcy5wb3NzaWJseVVwZGF0ZVNoYWRlcnModHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBfdGhpcy5wb3NzaWJseVVwZGF0ZVNoYWRlcnMoZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IEh0bWw1UXJjb2RlU3RyaW5ncy5jb2RlUGFyc2VFcnJvcihlcnJvcik7XG4gICAgICAgICAgICBxckNvZGVFcnJvckNhbGxiYWNrKGVycm9yTWVzc2FnZSwgSHRtbDVRcmNvZGVFcnJvckZhY3RvcnkuY3JlYXRlRnJvbShlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZm9yZXZlclNjYW4gPSBmdW5jdGlvbiAoaW50ZXJuYWxDb25maWcsIHFyQ29kZVN1Y2Nlc3NDYWxsYmFjaywgcXJDb2RlRXJyb3JDYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkU2Nhbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZENhbWVyYSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWRlb0VsZW1lbnQgPSB0aGlzLnJlbmRlcmVkQ2FtZXJhLmdldFN1cmZhY2UoKTtcbiAgICAgICAgdmFyIHdpZHRoUmF0aW8gPSB2aWRlb0VsZW1lbnQudmlkZW9XaWR0aCAvIHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgdmFyIGhlaWdodFJhdGlvID0gdmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0IC8gdmlkZW9FbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgaWYgKCF0aGlzLnFyUmVnaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBcInFyUmVnaW9uIHVuZGVmaW5lZCB3aGVuIGxvY2FsTWVkaWFTdHJlYW0gaXMgcmVhZHkuXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNXaWR0aE9mZnNldCA9IHRoaXMucXJSZWdpb24ud2lkdGggKiB3aWR0aFJhdGlvO1xuICAgICAgICB2YXIgc0hlaWdodE9mZnNldCA9IHRoaXMucXJSZWdpb24uaGVpZ2h0ICogaGVpZ2h0UmF0aW87XG4gICAgICAgIHZhciBzeE9mZnNldCA9IHRoaXMucXJSZWdpb24ueCAqIHdpZHRoUmF0aW87XG4gICAgICAgIHZhciBzeU9mZnNldCA9IHRoaXMucXJSZWdpb24ueSAqIGhlaWdodFJhdGlvO1xuICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHZpZGVvRWxlbWVudCwgc3hPZmZzZXQsIHN5T2Zmc2V0LCBzV2lkdGhPZmZzZXQsIHNIZWlnaHRPZmZzZXQsIDAsIDAsIHRoaXMucXJSZWdpb24ud2lkdGgsIHRoaXMucXJSZWdpb24uaGVpZ2h0KTtcbiAgICAgICAgdmFyIHRyaWdnZXJOZXh0U2NhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmZvcmV2ZXJTY2FuVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmZvcmV2ZXJTY2FuKGludGVybmFsQ29uZmlnLCBxckNvZGVTdWNjZXNzQ2FsbGJhY2ssIHFyQ29kZUVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgfSwgX3RoaXMuZ2V0VGltZW91dEZwcyhpbnRlcm5hbENvbmZpZy5mcHMpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zY2FuQ29udGV4dChxckNvZGVTdWNjZXNzQ2FsbGJhY2ssIHFyQ29kZUVycm9yQ2FsbGJhY2spXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaXNTdWNjZXNzZnVsbCkge1xuICAgICAgICAgICAgaWYgKCFpc1N1Y2Nlc3NmdWxsICYmIGludGVybmFsQ29uZmlnLmRpc2FibGVGbGlwICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGV4dC50cmFuc2xhdGUoX3RoaXMuY29udGV4dC5jYW52YXMud2lkdGgsIDApO1xuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRleHQuc2NhbGUoLTEsIDEpO1xuICAgICAgICAgICAgICAgIF90aGlzLnNjYW5Db250ZXh0KHFyQ29kZVN1Y2Nlc3NDYWxsYmFjaywgcXJDb2RlRXJyb3JDYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyTmV4dFNjYW4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJOZXh0U2NhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2dFcnJvcihcIkVycm9yIGhhcHBlbmQgd2hpbGUgc2Nhbm5pbmcgY29udGV4dFwiLCBlcnJvcik7XG4gICAgICAgICAgICB0cmlnZ2VyTmV4dFNjYW4oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuY3JlYXRlVmlkZW9Db25zdHJhaW50cyA9IGZ1bmN0aW9uIChjYW1lcmFJZE9yQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FtZXJhSWRPckNvbmZpZyA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkZXZpY2VJZDogeyBleGFjdDogY2FtZXJhSWRPckNvbmZpZyB9IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNhbWVyYUlkT3JDb25maWcgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdmFyIGZhY2luZ01vZGVLZXkgPSBcImZhY2luZ01vZGVcIjtcbiAgICAgICAgICAgIHZhciBkZXZpY2VJZEtleSA9IFwiZGV2aWNlSWRcIjtcbiAgICAgICAgICAgIHZhciBhbGxvd2VkRmFjaW5nTW9kZVZhbHVlc18xID0geyBcInVzZXJcIjogdHJ1ZSwgXCJlbnZpcm9ubWVudFwiOiB0cnVlIH07XG4gICAgICAgICAgICB2YXIgZXhhY3RLZXkgPSBcImV4YWN0XCI7XG4gICAgICAgICAgICB2YXIgaXNWYWxpZEZhY2luZ01vZGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbiBhbGxvd2VkRmFjaW5nTW9kZVZhbHVlc18xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJjb25maWcgaGFzIGludmFsaWQgJ2ZhY2luZ01vZGUnIHZhbHVlID0gXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCInXCIuY29uY2F0KHZhbHVlLCBcIidcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoY2FtZXJhSWRPckNvbmZpZyk7XG4gICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIidjYW1lcmFJZE9yQ29uZmlnJyBvYmplY3Qgc2hvdWxkIGhhdmUgZXhhY3RseSAxIGtleSxcIlxuICAgICAgICAgICAgICAgICAgICArIFwiIGlmIHBhc3NlZCBhcyBhbiBvYmplY3QsIGZvdW5kIFwiLmNvbmNhdChrZXlzLmxlbmd0aCwgXCIga2V5c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhjYW1lcmFJZE9yQ29uZmlnKVswXTtcbiAgICAgICAgICAgIGlmIChrZXkgIT09IGZhY2luZ01vZGVLZXkgJiYga2V5ICE9PSBkZXZpY2VJZEtleSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiT25seSAnXCIuY29uY2F0KGZhY2luZ01vZGVLZXksIFwiJyBhbmQgJ1wiKS5jb25jYXQoZGV2aWNlSWRLZXksIFwiJyBcIilcbiAgICAgICAgICAgICAgICAgICAgKyBcIiBhcmUgc3VwcG9ydGVkIGZvciAnY2FtZXJhSWRPckNvbmZpZydcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgPT09IGZhY2luZ01vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmFjaW5nTW9kZSA9IGNhbWVyYUlkT3JDb25maWcuZmFjaW5nTW9kZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZhY2luZ01vZGUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZEZhY2luZ01vZGVWYWx1ZShmYWNpbmdNb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZmFjaW5nTW9kZTogZmFjaW5nTW9kZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmYWNpbmdNb2RlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4YWN0S2V5IGluIGZhY2luZ01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkRmFjaW5nTW9kZVZhbHVlKGZhY2luZ01vZGVbXCJcIi5jb25jYXQoZXhhY3RLZXkpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFjaW5nTW9kZVtcIlwiLmNvbmNhdChleGFjdEtleSldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCInZmFjaW5nTW9kZScgc2hvdWxkIGJlIHN0cmluZyBvciBvYmplY3Qgd2l0aFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBcIi5jb25jYXQoZXhhY3RLZXksIFwiIGFzIGtleS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlXzEgPSAodHlwZW9mIGZhY2luZ01vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIkludmFsaWQgdHlwZSBvZiAnZmFjaW5nTW9kZScgPSBcIi5jb25jYXQodHlwZV8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGV2aWNlSWQgPSBjYW1lcmFJZE9yQ29uZmlnLmRldmljZUlkO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGV2aWNlSWQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkZXZpY2VJZDogZGV2aWNlSWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRldmljZUlkID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4YWN0S2V5IGluIGRldmljZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUlkOiB7IGV4YWN0OiBkZXZpY2VJZFtcIlwiLmNvbmNhdChleGFjdEtleSldIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIidkZXZpY2VJZCcgc2hvdWxkIGJlIHN0cmluZyBvciBvYmplY3Qgd2l0aFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBcIi5jb25jYXQoZXhhY3RLZXksIFwiIGFzIGtleS5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlXzIgPSAodHlwZW9mIGRldmljZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJJbnZhbGlkIHR5cGUgb2YgJ2RldmljZUlkJyA9IFwiLmNvbmNhdCh0eXBlXzIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9ICh0eXBlb2YgY2FtZXJhSWRPckNvbmZpZyk7XG4gICAgICAgIHRocm93IFwiSW52YWxpZCB0eXBlIG9mICdjYW1lcmFJZE9yQ29uZmlnJyA9IFwiLmNvbmNhdCh0eXBlKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5jb21wdXRlQ2FudmFzRHJhd0NvbmZpZyA9IGZ1bmN0aW9uIChpbWFnZVdpZHRoLCBpbWFnZUhlaWdodCwgY29udGFpbmVyV2lkdGgsIGNvbnRhaW5lckhlaWdodCkge1xuICAgICAgICBpZiAoaW1hZ2VXaWR0aCA8PSBjb250YWluZXJXaWR0aFxuICAgICAgICAgICAgJiYgaW1hZ2VIZWlnaHQgPD0gY29udGFpbmVySGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgeG9mZnNldCA9IChjb250YWluZXJXaWR0aCAtIGltYWdlV2lkdGgpIC8gMjtcbiAgICAgICAgICAgIHZhciB5b2Zmc2V0ID0gKGNvbnRhaW5lckhlaWdodCAtIGltYWdlSGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHg6IHhvZmZzZXQsXG4gICAgICAgICAgICAgICAgeTogeW9mZnNldCxcbiAgICAgICAgICAgICAgICB3aWR0aDogaW1hZ2VXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlSGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGZvcm1lckltYWdlV2lkdGggPSBpbWFnZVdpZHRoO1xuICAgICAgICAgICAgdmFyIGZvcm1lckltYWdlSGVpZ2h0ID0gaW1hZ2VIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoaW1hZ2VXaWR0aCA+IGNvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VIZWlnaHQgPSAoY29udGFpbmVyV2lkdGggLyBpbWFnZVdpZHRoKSAqIGltYWdlSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSBjb250YWluZXJXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbWFnZUhlaWdodCA+IGNvbnRhaW5lckhlaWdodCkge1xuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSAoY29udGFpbmVySGVpZ2h0IC8gaW1hZ2VIZWlnaHQpICogaW1hZ2VXaWR0aDtcbiAgICAgICAgICAgICAgICBpbWFnZUhlaWdodCA9IGNvbnRhaW5lckhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIkltYWdlIGRvd25zYW1wbGVkIGZyb20gXCJcbiAgICAgICAgICAgICAgICArIFwiXCIuY29uY2F0KGZvcm1lckltYWdlV2lkdGgsIFwiWFwiKS5jb25jYXQoZm9ybWVySW1hZ2VIZWlnaHQpXG4gICAgICAgICAgICAgICAgKyBcIiB0byBcIi5jb25jYXQoaW1hZ2VXaWR0aCwgXCJYXCIpLmNvbmNhdChpbWFnZUhlaWdodCwgXCIuXCIpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVDYW52YXNEcmF3Q29uZmlnKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0LCBjb250YWluZXJXaWR0aCwgY29udGFpbmVySGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLmNsZWFyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVNYW5hZ2VyUHJveHkuaXNTY2FubmluZygpKSB7XG4gICAgICAgICAgICB0aHJvdyBcIkNhbm5vdCBjbGVhciB3aGlsZSBzY2FuIGlzIG9uZ29pbmcsIGNsb3NlIGl0IGZpcnN0LlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbGVtZW50SWQpO1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUucG9zc2libHlVcGRhdGVTaGFkZXJzID0gZnVuY3Rpb24gKHFyTWF0Y2gpIHtcbiAgICAgICAgaWYgKHRoaXMucXJNYXRjaCA9PT0gcXJNYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0JvcmRlclNoYWRlcnNcbiAgICAgICAgICAgICYmIHRoaXMuYm9yZGVyU2hhZGVyc1xuICAgICAgICAgICAgJiYgdGhpcy5ib3JkZXJTaGFkZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5ib3JkZXJTaGFkZXJzLmZvckVhY2goZnVuY3Rpb24gKHNoYWRlcikge1xuICAgICAgICAgICAgICAgIHNoYWRlci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBxck1hdGNoXG4gICAgICAgICAgICAgICAgICAgID8gQ29uc3RhbnRzLkJPUkRFUl9TSEFERVJfTUFUQ0hfQ09MT1JcbiAgICAgICAgICAgICAgICAgICAgOiBDb25zdGFudHMuQk9SREVSX1NIQURFUl9ERUZBVUxUX0NPTE9SO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xck1hdGNoID0gcXJNYXRjaDtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5wb3NzaWJseUNsb3NlTGFzdFNjYW5JbWFnZUZpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxhc3RTY2FuSW1hZ2VGaWxlKSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMubGFzdFNjYW5JbWFnZUZpbGUpO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbkltYWdlRmlsZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5jcmVhdGVDYW52YXNFbGVtZW50ID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIGN1c3RvbUlkKSB7XG4gICAgICAgIHZhciBjYW52YXNXaWR0aCA9IHdpZHRoO1xuICAgICAgICB2YXIgY2FudmFzSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB2YXIgY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNhbnZhc0VsZW1lbnQuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChjYW52YXNXaWR0aCwgXCJweFwiKTtcbiAgICAgICAgY2FudmFzRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChjYW52YXNIZWlnaHQsIFwicHhcIik7XG4gICAgICAgIGNhbnZhc0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBjYW52YXNFbGVtZW50LmlkID0gaXNOdWxsT3JVbmRlZmluZWQoY3VzdG9tSWQpXG4gICAgICAgICAgICA/IFwicXItY2FudmFzXCIgOiBjdXN0b21JZDtcbiAgICAgICAgcmV0dXJuIGNhbnZhc0VsZW1lbnQ7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuZ2V0U2hhZGVkUmVnaW9uQm91bmRzID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIHFyYm94U2l6ZSkge1xuICAgICAgICBpZiAocXJib3hTaXplLndpZHRoID4gd2lkdGggfHwgcXJib3hTaXplLmhlaWdodCA+IGhlaWdodCkge1xuICAgICAgICAgICAgdGhyb3cgXCInY29uZmlnLnFyYm94JyBkaW1lbnNpb25zIHNob3VsZCBub3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBcIlxuICAgICAgICAgICAgICAgICsgXCJkaW1lbnNpb25zIG9mIHRoZSByb290IEhUTUwgZWxlbWVudC5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogKHdpZHRoIC0gcXJib3hTaXplLndpZHRoKSAvIDIsXG4gICAgICAgICAgICB5OiAoaGVpZ2h0IC0gcXJib3hTaXplLmhlaWdodCkgLyAyLFxuICAgICAgICAgICAgd2lkdGg6IHFyYm94U2l6ZS53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogcXJib3hTaXplLmhlaWdodFxuICAgICAgICB9O1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGUucHJvdG90eXBlLnBvc3NpYmx5SW5zZXJ0U2hhZGluZ0VsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgd2lkdGgsIGhlaWdodCwgcXJib3hTaXplKSB7XG4gICAgICAgIGlmICgod2lkdGggLSBxcmJveFNpemUud2lkdGgpIDwgMSB8fCAoaGVpZ2h0IC0gcXJib3hTaXplLmhlaWdodCkgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNoYWRpbmdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc2hhZGluZ0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIHZhciByaWdodExlZnRCb3JkZXJTaXplID0gKHdpZHRoIC0gcXJib3hTaXplLndpZHRoKSAvIDI7XG4gICAgICAgIHZhciB0b3BCb3R0b21Cb3JkZXJTaXplID0gKGhlaWdodCAtIHFyYm94U2l6ZS5oZWlnaHQpIC8gMjtcbiAgICAgICAgc2hhZGluZ0VsZW1lbnQuc3R5bGUuYm9yZGVyTGVmdFxuICAgICAgICAgICAgPSBcIlwiLmNvbmNhdChyaWdodExlZnRCb3JkZXJTaXplLCBcInB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC40OClcIik7XG4gICAgICAgIHNoYWRpbmdFbGVtZW50LnN0eWxlLmJvcmRlclJpZ2h0XG4gICAgICAgICAgICA9IFwiXCIuY29uY2F0KHJpZ2h0TGVmdEJvcmRlclNpemUsIFwicHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQ4KVwiKTtcbiAgICAgICAgc2hhZGluZ0VsZW1lbnQuc3R5bGUuYm9yZGVyVG9wXG4gICAgICAgICAgICA9IFwiXCIuY29uY2F0KHRvcEJvdHRvbUJvcmRlclNpemUsIFwicHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQ4KVwiKTtcbiAgICAgICAgc2hhZGluZ0VsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tXG4gICAgICAgICAgICA9IFwiXCIuY29uY2F0KHRvcEJvdHRvbUJvcmRlclNpemUsIFwicHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQ4KVwiKTtcbiAgICAgICAgc2hhZGluZ0VsZW1lbnQuc3R5bGUuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG4gICAgICAgIHNoYWRpbmdFbGVtZW50LnN0eWxlLnRvcCA9IFwiMHB4XCI7XG4gICAgICAgIHNoYWRpbmdFbGVtZW50LnN0eWxlLmJvdHRvbSA9IFwiMHB4XCI7XG4gICAgICAgIHNoYWRpbmdFbGVtZW50LnN0eWxlLmxlZnQgPSBcIjBweFwiO1xuICAgICAgICBzaGFkaW5nRWxlbWVudC5zdHlsZS5yaWdodCA9IFwiMHB4XCI7XG4gICAgICAgIHNoYWRpbmdFbGVtZW50LmlkID0gXCJcIi5jb25jYXQoQ29uc3RhbnRzLlNIQURFRF9SRUdJT05fRUxFTUVOVF9JRCk7XG4gICAgICAgIGlmICgod2lkdGggLSBxcmJveFNpemUud2lkdGgpIDwgMTFcbiAgICAgICAgICAgIHx8IChoZWlnaHQgLSBxcmJveFNpemUuaGVpZ2h0KSA8IDExKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0JvcmRlclNoYWRlcnMgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzbWFsbFNpemUgPSA1O1xuICAgICAgICAgICAgdmFyIGxhcmdlU2l6ZSA9IDQwO1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRTaGFkZXJCb3JkZXJzKHNoYWRpbmdFbGVtZW50LCBsYXJnZVNpemUsIHNtYWxsU2l6ZSwgLXNtYWxsU2l6ZSwgbnVsbCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmluc2VydFNoYWRlckJvcmRlcnMoc2hhZGluZ0VsZW1lbnQsIGxhcmdlU2l6ZSwgc21hbGxTaXplLCAtc21hbGxTaXplLCBudWxsLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmluc2VydFNoYWRlckJvcmRlcnMoc2hhZGluZ0VsZW1lbnQsIGxhcmdlU2l6ZSwgc21hbGxTaXplLCBudWxsLCAtc21hbGxTaXplLCAwLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0U2hhZGVyQm9yZGVycyhzaGFkaW5nRWxlbWVudCwgbGFyZ2VTaXplLCBzbWFsbFNpemUsIG51bGwsIC1zbWFsbFNpemUsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0U2hhZGVyQm9yZGVycyhzaGFkaW5nRWxlbWVudCwgc21hbGxTaXplLCBsYXJnZVNpemUgKyBzbWFsbFNpemUsIC1zbWFsbFNpemUsIG51bGwsIC1zbWFsbFNpemUsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRTaGFkZXJCb3JkZXJzKHNoYWRpbmdFbGVtZW50LCBzbWFsbFNpemUsIGxhcmdlU2l6ZSArIHNtYWxsU2l6ZSwgbnVsbCwgLXNtYWxsU2l6ZSwgLXNtYWxsU2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmluc2VydFNoYWRlckJvcmRlcnMoc2hhZGluZ0VsZW1lbnQsIHNtYWxsU2l6ZSwgbGFyZ2VTaXplICsgc21hbGxTaXplLCAtc21hbGxTaXplLCBudWxsLCAtc21hbGxTaXplLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmluc2VydFNoYWRlckJvcmRlcnMoc2hhZGluZ0VsZW1lbnQsIHNtYWxsU2l6ZSwgbGFyZ2VTaXplICsgc21hbGxTaXplLCBudWxsLCAtc21hbGxTaXplLCAtc21hbGxTaXplLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmhhc0JvcmRlclNoYWRlcnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKHNoYWRpbmdFbGVtZW50KTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5pbnNlcnRTaGFkZXJCb3JkZXJzID0gZnVuY3Rpb24gKHNoYWRlckVsZW0sIHdpZHRoLCBoZWlnaHQsIHRvcCwgYm90dG9tLCBzaWRlLCBpc0xlZnQpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBlbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENvbnN0YW50cy5CT1JERVJfU0hBREVSX0RFRkFVTFRfQ09MT1I7XG4gICAgICAgIGVsZW0uc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdCh3aWR0aCwgXCJweFwiKTtcbiAgICAgICAgZWxlbS5zdHlsZS5oZWlnaHQgPSBcIlwiLmNvbmNhdChoZWlnaHQsIFwicHhcIik7XG4gICAgICAgIGlmICh0b3AgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGVsZW0uc3R5bGUudG9wID0gXCJcIi5jb25jYXQodG9wLCBcInB4XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib3R0b20gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuYm90dG9tID0gXCJcIi5jb25jYXQoYm90dG9tLCBcInB4XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0xlZnQpIHtcbiAgICAgICAgICAgIGVsZW0uc3R5bGUubGVmdCA9IFwiXCIuY29uY2F0KHNpZGUsIFwicHhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtLnN0eWxlLnJpZ2h0ID0gXCJcIi5jb25jYXQoc2lkZSwgXCJweFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYm9yZGVyU2hhZGVycykge1xuICAgICAgICAgICAgdGhpcy5ib3JkZXJTaGFkZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ib3JkZXJTaGFkZXJzLnB1c2goZWxlbSk7XG4gICAgICAgIHNoYWRlckVsZW0uYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuc2hvd1BhdXNlZFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2Nhbm5lclBhdXNlZFVpRWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgXCJbaW50ZXJuYWwgZXJyb3JdIHNjYW5uZXIgcGF1c2VkIFVJIGVsZW1lbnQgbm90IGZvdW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2FubmVyUGF1c2VkVWlFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZS5wcm90b3R5cGUuaGlkZVBhdXNlZFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2Nhbm5lclBhdXNlZFVpRWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgXCJbaW50ZXJuYWwgZXJyb3JdIHNjYW5uZXIgcGF1c2VkIFVJIGVsZW1lbnQgbm90IGZvdW5kXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2FubmVyUGF1c2VkVWlFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlLnByb3RvdHlwZS5nZXRUaW1lb3V0RnBzID0gZnVuY3Rpb24gKGZwcykge1xuICAgICAgICByZXR1cm4gMTAwMCAvIGZwcztcbiAgICB9O1xuICAgIHJldHVybiBIdG1sNVFyY29kZTtcbn0oKSk7XG5leHBvcnQgeyBIdG1sNVFyY29kZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHRtbDUtcXJjb2RlLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBDYW1lcmFQZXJtaXNzaW9ucyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FtZXJhUGVybWlzc2lvbnMoKSB7XG4gICAgfVxuICAgIENhbWVyYVBlcm1pc3Npb25zLmhhc1Blcm1pc3Npb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGV2aWNlcywgX2ksIGRldmljZXNfMSwgZGV2aWNlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQsIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlcyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBkZXZpY2VzXzEgPSBkZXZpY2VzOyBfaSA8IGRldmljZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2UgPSBkZXZpY2VzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2Uua2luZCA9PT0gXCJ2aWRlb2lucHV0XCIgJiYgZGV2aWNlLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgdHJ1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbWVyYVBlcm1pc3Npb25zO1xufSgpKTtcbmV4cG9ydCB7IENhbWVyYVBlcm1pc3Npb25zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZXJtaXNzaW9ucy5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzIH0gZnJvbSBcIi4uLy4uL3N0cmluZ3NcIjtcbmltcG9ydCB7IEJhc2VVaUVsZW1lbnRGYWN0b3J5LCBQdWJsaWNVaUVsZW1lbnRJZEFuZENsYXNzZXMgfSBmcm9tIFwiLi9iYXNlXCI7XG52YXIgVG9yY2hDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUb3JjaENvbnRyb2xsZXIodG9yY2hDYXBhYmlsaXR5LCBidXR0b25Db250cm9sbGVyLCBvblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuaXNUb3JjaE9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMudG9yY2hDYXBhYmlsaXR5ID0gdG9yY2hDYXBhYmlsaXR5O1xuICAgICAgICB0aGlzLmJ1dHRvbkNvbnRyb2xsZXIgPSBidXR0b25Db250cm9sbGVyO1xuICAgICAgICB0aGlzLm9uVG9yY2hBY3Rpb25GYWlsdXJlQ2FsbGJhY2sgPSBvblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrO1xuICAgIH1cbiAgICBUb3JjaENvbnRyb2xsZXIucHJvdG90eXBlLmlzVG9yY2hFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1RvcmNoT247XG4gICAgfTtcbiAgICBUb3JjaENvbnRyb2xsZXIucHJvdG90eXBlLmZsaXBTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlzVG9yY2hPbkV4cGVjdGVkLCBlcnJvcl8xO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25Db250cm9sbGVyLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVG9yY2hPbkV4cGVjdGVkID0gIXRoaXMuaXNUb3JjaE9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCB0aGlzLnRvcmNoQ2FwYWJpbGl0eS5hcHBseShpc1RvcmNoT25FeHBlY3RlZCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVpQmFzZWRPbkxhdGVzdFNldHRpbmdzKHRoaXMudG9yY2hDYXBhYmlsaXR5LnZhbHVlKCksIGlzVG9yY2hPbkV4cGVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BhZ2F0ZUZhaWx1cmUoaXNUb3JjaE9uRXhwZWN0ZWQsIGVycm9yXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25Db250cm9sbGVyLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFRvcmNoQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVWlCYXNlZE9uTGF0ZXN0U2V0dGluZ3MgPSBmdW5jdGlvbiAoaXNUb3JjaE9uLCBpc1RvcmNoT25FeHBlY3RlZCkge1xuICAgICAgICBpZiAoaXNUb3JjaE9uID09PSBpc1RvcmNoT25FeHBlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5idXR0b25Db250cm9sbGVyLnNldFRleHQoaXNUb3JjaE9uRXhwZWN0ZWRcbiAgICAgICAgICAgICAgICA/IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudG9yY2hPZmZCdXR0b24oKVxuICAgICAgICAgICAgICAgIDogSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy50b3JjaE9uQnV0dG9uKCkpO1xuICAgICAgICAgICAgdGhpcy5pc1RvcmNoT24gPSBpc1RvcmNoT25FeHBlY3RlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGFnYXRlRmFpbHVyZShpc1RvcmNoT25FeHBlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idXR0b25Db250cm9sbGVyLmVuYWJsZSgpO1xuICAgIH07XG4gICAgVG9yY2hDb250cm9sbGVyLnByb3RvdHlwZS5wcm9wYWdhdGVGYWlsdXJlID0gZnVuY3Rpb24gKGlzVG9yY2hPbkV4cGVjdGVkLCBlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gaXNUb3JjaE9uRXhwZWN0ZWRcbiAgICAgICAgICAgID8gSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy50b3JjaE9uRmFpbGVkTWVzc2FnZSgpXG4gICAgICAgICAgICA6IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudG9yY2hPZmZGYWlsZWRNZXNzYWdlKCk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IFwiOyBFcnJvciA9IFwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrKGVycm9yTWVzc2FnZSk7XG4gICAgfTtcbiAgICBUb3JjaENvbnRyb2xsZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzVG9yY2hPbiA9IGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIFRvcmNoQ29udHJvbGxlcjtcbn0oKSk7XG52YXIgVG9yY2hCdXR0b24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvcmNoQnV0dG9uKHRvcmNoQ2FwYWJpbGl0eSwgb25Ub3JjaEFjdGlvbkZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uVG9yY2hBY3Rpb25GYWlsdXJlQ2FsbGJhY2sgPSBvblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrO1xuICAgICAgICB0aGlzLnRvcmNoQnV0dG9uXG4gICAgICAgICAgICA9IEJhc2VVaUVsZW1lbnRGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgUHVibGljVWlFbGVtZW50SWRBbmRDbGFzc2VzLlRPUkNIX0JVVFRPTl9JRCk7XG4gICAgICAgIHRoaXMudG9yY2hDb250cm9sbGVyID0gbmV3IFRvcmNoQ29udHJvbGxlcih0b3JjaENhcGFiaWxpdHksIHRoaXMsIG9uVG9yY2hBY3Rpb25GYWlsdXJlQ2FsbGJhY2spO1xuICAgIH1cbiAgICBUb3JjaEJ1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHBhcmVudEVsZW1lbnQsIHRvcmNoQnV0dG9uT3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRvcmNoQnV0dG9uLmlubmVyVGV4dFxuICAgICAgICAgICAgPSBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnRvcmNoT25CdXR0b24oKTtcbiAgICAgICAgdGhpcy50b3JjaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gdG9yY2hCdXR0b25PcHRpb25zLmRpc3BsYXk7XG4gICAgICAgIHRoaXMudG9yY2hCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9IHRvcmNoQnV0dG9uT3B0aW9ucy5tYXJnaW5MZWZ0O1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRvcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoXykgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQsICR0aGlzLnRvcmNoQ29udHJvbGxlci5mbGlwU3RhdGUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy50b3JjaENvbnRyb2xsZXIuaXNUb3JjaEVuYWJsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRvcmNoQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoUHVibGljVWlFbGVtZW50SWRBbmRDbGFzc2VzLlRPUkNIX0JVVFRPTl9DTEFTU19UT1JDSF9PRkYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRvcmNoQnV0dG9uLmNsYXNzTGlzdC5hZGQoUHVibGljVWlFbGVtZW50SWRBbmRDbGFzc2VzLlRPUkNIX0JVVFRPTl9DTEFTU19UT1JDSF9PTik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy50b3JjaEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFB1YmxpY1VpRWxlbWVudElkQW5kQ2xhc3Nlcy5UT1JDSF9CVVRUT05fQ0xBU1NfVE9SQ0hfT04pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRvcmNoQnV0dG9uLmNsYXNzTGlzdC5hZGQoUHVibGljVWlFbGVtZW50SWRBbmRDbGFzc2VzLlRPUkNIX0JVVFRPTl9DTEFTU19UT1JDSF9PRkYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0pO1xuICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9yY2hCdXR0b24pO1xuICAgIH07XG4gICAgVG9yY2hCdXR0b24ucHJvdG90eXBlLnVwZGF0ZVRvcmNoQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uICh0b3JjaENhcGFiaWxpdHkpIHtcbiAgICAgICAgdGhpcy50b3JjaENvbnRyb2xsZXIgPSBuZXcgVG9yY2hDb250cm9sbGVyKHRvcmNoQ2FwYWJpbGl0eSwgdGhpcywgdGhpcy5vblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrKTtcbiAgICB9O1xuICAgIFRvcmNoQnV0dG9uLnByb3RvdHlwZS5nZXRUb3JjaEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9yY2hCdXR0b247XG4gICAgfTtcbiAgICBUb3JjaEJ1dHRvbi5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b3JjaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfTtcbiAgICBUb3JjaEJ1dHRvbi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b3JjaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICB9O1xuICAgIFRvcmNoQnV0dG9uLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvcmNoQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFRvcmNoQnV0dG9uLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudG9yY2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9O1xuICAgIFRvcmNoQnV0dG9uLnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgdGhpcy50b3JjaEJ1dHRvbi5pbm5lclRleHQgPSB0ZXh0O1xuICAgIH07XG4gICAgVG9yY2hCdXR0b24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvcmNoQnV0dG9uLmlubmVyVGV4dCA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudG9yY2hPbkJ1dHRvbigpO1xuICAgICAgICB0aGlzLnRvcmNoQ29udHJvbGxlci5yZXNldCgpO1xuICAgIH07XG4gICAgVG9yY2hCdXR0b24uY3JlYXRlID0gZnVuY3Rpb24gKHBhcmVudEVsZW1lbnQsIHRvcmNoQ2FwYWJpbGl0eSwgdG9yY2hCdXR0b25PcHRpb25zLCBvblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBidXR0b24gPSBuZXcgVG9yY2hCdXR0b24odG9yY2hDYXBhYmlsaXR5LCBvblRvcmNoQWN0aW9uRmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgICAgYnV0dG9uLnJlbmRlcihwYXJlbnRFbGVtZW50LCB0b3JjaEJ1dHRvbk9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH07XG4gICAgcmV0dXJuIFRvcmNoQnV0dG9uO1xufSgpKTtcbmV4cG9ydCB7IFRvcmNoQnV0dG9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b3JjaC1idXR0b24uanMubWFwIiwiaW1wb3J0IHsgSHRtbDVRcmNvZGVDb25zdGFudHMsIEh0bWw1UXJjb2RlU2NhblR5cGUsIEh0bWw1UXJjb2RlRXJyb3JGYWN0b3J5LCBCYXNlTG9nZ2dlciwgaXNOdWxsT3JVbmRlZmluZWQsIGNsaXAsIH0gZnJvbSBcIi4vY29yZVwiO1xuaW1wb3J0IHsgSHRtbDVRcmNvZGUsIH0gZnJvbSBcIi4vaHRtbDUtcXJjb2RlXCI7XG5pbXBvcnQgeyBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLCB9IGZyb20gXCIuL3N0cmluZ3NcIjtcbmltcG9ydCB7IEFTU0VUX0ZJTEVfU0NBTiwgQVNTRVRfQ0FNRVJBX1NDQU4sIH0gZnJvbSBcIi4vaW1hZ2UtYXNzZXRzXCI7XG5pbXBvcnQgeyBQZXJzaXN0ZWREYXRhTWFuYWdlciB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCB7IExpYnJhcnlJbmZvQ29udGFpbmVyIH0gZnJvbSBcIi4vdWlcIjtcbmltcG9ydCB7IENhbWVyYVBlcm1pc3Npb25zIH0gZnJvbSBcIi4vY2FtZXJhL3Blcm1pc3Npb25zXCI7XG5pbXBvcnQgeyBTY2FuVHlwZVNlbGVjdG9yIH0gZnJvbSBcIi4vdWkvc2Nhbm5lci9zY2FuLXR5cGUtc2VsZWN0b3JcIjtcbmltcG9ydCB7IFRvcmNoQnV0dG9uIH0gZnJvbSBcIi4vdWkvc2Nhbm5lci90b3JjaC1idXR0b25cIjtcbmltcG9ydCB7IEZpbGVTZWxlY3Rpb25VaSB9IGZyb20gXCIuL3VpL3NjYW5uZXIvZmlsZS1zZWxlY3Rpb24tdWlcIjtcbmltcG9ydCB7IEJhc2VVaUVsZW1lbnRGYWN0b3J5LCBQdWJsaWNVaUVsZW1lbnRJZEFuZENsYXNzZXMgfSBmcm9tIFwiLi91aS9zY2FubmVyL2Jhc2VcIjtcbmltcG9ydCB7IENhbWVyYVNlbGVjdGlvblVpIH0gZnJvbSBcIi4vdWkvc2Nhbm5lci9jYW1lcmEtc2VsZWN0aW9uLXVpXCI7XG5pbXBvcnQgeyBDYW1lcmFab29tVWkgfSBmcm9tIFwiLi91aS9zY2FubmVyL2NhbWVyYS16b29tLXVpXCI7XG52YXIgSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzO1xuKGZ1bmN0aW9uIChIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXMpIHtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXNbSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzW1wiU1RBVFVTX0RFRkFVTFRcIl0gPSAwXSA9IFwiU1RBVFVTX0RFRkFVTFRcIjtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXNbSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzW1wiU1RBVFVTX1NVQ0NFU1NcIl0gPSAxXSA9IFwiU1RBVFVTX1NVQ0NFU1NcIjtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXNbSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzW1wiU1RBVFVTX1dBUk5JTkdcIl0gPSAyXSA9IFwiU1RBVFVTX1dBUk5JTkdcIjtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXNbSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzW1wiU1RBVFVTX1JFUVVFU1RJTkdfUEVSTUlTU0lPTlwiXSA9IDNdID0gXCJTVEFUVVNfUkVRVUVTVElOR19QRVJNSVNTSU9OXCI7XG59KShIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXMgfHwgKEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cyA9IHt9KSk7XG5mdW5jdGlvbiB0b0h0bWw1UXJjb2RlQ2FtZXJhU2NhbkNvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmcHM6IGNvbmZpZy5mcHMsXG4gICAgICAgIHFyYm94OiBjb25maWcucXJib3gsXG4gICAgICAgIGFzcGVjdFJhdGlvOiBjb25maWcuYXNwZWN0UmF0aW8sXG4gICAgICAgIGRpc2FibGVGbGlwOiBjb25maWcuZGlzYWJsZUZsaXAsXG4gICAgICAgIHZpZGVvQ29uc3RyYWludHM6IGNvbmZpZy52aWRlb0NvbnN0cmFpbnRzXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvSHRtbDVRcmNvZGVGdWxsQ29uZmlnKGNvbmZpZywgdmVyYm9zZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZvcm1hdHNUb1N1cHBvcnQ6IGNvbmZpZy5mb3JtYXRzVG9TdXBwb3J0LFxuICAgICAgICB1c2VCYXJDb2RlRGV0ZWN0b3JJZlN1cHBvcnRlZDogY29uZmlnLnVzZUJhckNvZGVEZXRlY3RvcklmU3VwcG9ydGVkLFxuICAgICAgICBleHBlcmltZW50YWxGZWF0dXJlczogY29uZmlnLmV4cGVyaW1lbnRhbEZlYXR1cmVzLFxuICAgICAgICB2ZXJib3NlOiB2ZXJib3NlXG4gICAgfTtcbn1cbnZhciBIdG1sNVFyY29kZVNjYW5uZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEh0bWw1UXJjb2RlU2Nhbm5lcihlbGVtZW50SWQsIGNvbmZpZywgdmVyYm9zZSkge1xuICAgICAgICB0aGlzLmxhc3RNYXRjaEZvdW5kID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW1lcmFTY2FuSW1hZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmZpbGVTY2FuSW1hZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmZpbGVTZWxlY3Rpb25VaSA9IG51bGw7XG4gICAgICAgIHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuY3JlYXRlQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHZlcmJvc2UgPT09IHRydWU7XG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKSkge1xuICAgICAgICAgICAgdGhyb3cgXCJIVE1MIEVsZW1lbnQgd2l0aCBpZD1cIi5jb25jYXQoZWxlbWVudElkLCBcIiBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2FuVHlwZVNlbGVjdG9yID0gbmV3IFNjYW5UeXBlU2VsZWN0b3IodGhpcy5jb25maWcuc3VwcG9ydGVkU2NhblR5cGVzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50U2NhblR5cGUgPSB0aGlzLnNjYW5UeXBlU2VsZWN0b3IuZ2V0RGVmYXVsdFNjYW5UeXBlKCk7XG4gICAgICAgIHRoaXMuc2VjdGlvblN3YXBBbGxvd2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgQmFzZUxvZ2dnZXIodGhpcy52ZXJib3NlKTtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZWREYXRhTWFuYWdlciA9IG5ldyBQZXJzaXN0ZWREYXRhTWFuYWdlcigpO1xuICAgICAgICBpZiAoY29uZmlnLnJlbWVtYmVyTGFzdFVzZWRDYW1lcmEgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVkRGF0YU1hbmFnZXIucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChxckNvZGVTdWNjZXNzQ2FsbGJhY2ssIHFyQ29kZUVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5sYXN0TWF0Y2hGb3VuZCA9IG51bGw7XG4gICAgICAgIHRoaXMucXJDb2RlU3VjY2Vzc0NhbGxiYWNrXG4gICAgICAgICAgICA9IGZ1bmN0aW9uIChkZWNvZGVkVGV4dCwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHFyQ29kZVN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBxckNvZGVTdWNjZXNzQ2FsbGJhY2soZGVjb2RlZFRleHQsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubGFzdE1hdGNoRm91bmQgPT09IGRlY29kZWRUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGFzdE1hdGNoRm91bmQgPSBkZWNvZGVkVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0SGVhZGVyTWVzc2FnZShIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmxhc3RNYXRjaChkZWNvZGVkVGV4dCksIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfU1VDQ0VTUyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgdGhpcy5xckNvZGVFcnJvckNhbGxiYWNrID1cbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKHFyQ29kZUVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcXJDb2RlRXJyb3JDYWxsYmFjayhlcnJvck1lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbGVtZW50SWQpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgXCJIVE1MIEVsZW1lbnQgd2l0aCBpZD1cIi5jb25jYXQodGhpcy5lbGVtZW50SWQsIFwiIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5jcmVhdGVCYXNpY0xheW91dChjb250YWluZXIpO1xuICAgICAgICB0aGlzLmh0bWw1UXJjb2RlID0gbmV3IEh0bWw1UXJjb2RlKHRoaXMuZ2V0U2NhblJlZ2lvbklkKCksIHRvSHRtbDVRcmNvZGVGdWxsQ29uZmlnKHRoaXMuY29uZmlnLCB0aGlzLnZlcmJvc2UpKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoc2hvdWxkUGF1c2VWaWRlbykge1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2hvdWxkUGF1c2VWaWRlbykgfHwgc2hvdWxkUGF1c2VWaWRlbyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgc2hvdWxkUGF1c2VWaWRlbyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0SHRtbDVRcmNvZGVPckZhaWwoKS5wYXVzZShzaG91bGRQYXVzZVZpZGVvKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmdldEh0bWw1UXJjb2RlT3JGYWlsKCkucmVzdW1lKCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRIdG1sNVFyY29kZU9yRmFpbCgpLmdldFN0YXRlKCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZW1wdHlIdG1sQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1haW5Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfdGhpcy5lbGVtZW50SWQpO1xuICAgICAgICAgICAgaWYgKG1haW5Db250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBtYWluQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgX3RoaXMucmVzZXRCYXNpY0xheW91dChtYWluQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaHRtbDVRcmNvZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5odG1sNVFyY29kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmh0bWw1UXJjb2RlLmlzU2Nhbm5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaHRtbDVRcmNvZGUuc3RvcCgpLnRoZW4oZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaHRtbDVRcmNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaHRtbDVRcmNvZGUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5SHRtbENvbnRhaW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy52ZXJib3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZ0Vycm9yKFwiVW5hYmxlIHRvIHN0b3AgcXJjb2RlIHNjYW5uZXJcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5odG1sNVFyY29kZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICBlbXB0eUh0bWxDb250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0UnVubmluZ1RyYWNrQ2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRIdG1sNVFyY29kZU9yRmFpbCgpLmdldFJ1bm5pbmdUcmFja0NhcGFiaWxpdGllcygpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5nZXRSdW5uaW5nVHJhY2tTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SHRtbDVRcmNvZGVPckZhaWwoKS5nZXRSdW5uaW5nVHJhY2tTZXR0aW5ncygpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5hcHBseVZpZGVvQ29uc3RyYWludHMgPSBmdW5jdGlvbiAodmlkZW9Db25zdGFpbnRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEh0bWw1UXJjb2RlT3JGYWlsKCkuYXBwbHlWaWRlb0NvbnN0cmFpbnRzKHZpZGVvQ29uc3RhaW50cyk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmdldEh0bWw1UXJjb2RlT3JGYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaHRtbDVRcmNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IFwiQ29kZSBzY2FubmVyIG5vdCBpbml0aWFsaXplZC5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5odG1sNVFyY29kZTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuY3JlYXRlQ29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5mcHMpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuZnBzID0gSHRtbDVRcmNvZGVDb25zdGFudHMuU0NBTl9ERUZBVUxUX0ZQUztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWcucmVtZW1iZXJMYXN0VXNlZENhbWVyYSAhPT0gKCFIdG1sNVFyY29kZUNvbnN0YW50cy5ERUZBVUxUX1JFTUVNQkVSX0xBU1RfQ0FNRVJBX1VTRUQpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnJlbWVtYmVyTGFzdFVzZWRDYW1lcmFcbiAgICAgICAgICAgICAgICAgICAgPSBIdG1sNVFyY29kZUNvbnN0YW50cy5ERUZBVUxUX1JFTUVNQkVSX0xBU1RfQ0FNRVJBX1VTRUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5zdXBwb3J0ZWRTY2FuVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuc3VwcG9ydGVkU2NhblR5cGVzXG4gICAgICAgICAgICAgICAgICAgID0gSHRtbDVRcmNvZGVDb25zdGFudHMuREVGQVVMVF9TVVBQT1JURURfU0NBTl9UWVBFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnBzOiBIdG1sNVFyY29kZUNvbnN0YW50cy5TQ0FOX0RFRkFVTFRfRlBTLFxuICAgICAgICAgICAgcmVtZW1iZXJMYXN0VXNlZENhbWVyYTogSHRtbDVRcmNvZGVDb25zdGFudHMuREVGQVVMVF9SRU1FTUJFUl9MQVNUX0NBTUVSQV9VU0VELFxuICAgICAgICAgICAgc3VwcG9ydGVkU2NhblR5cGVzOiBIdG1sNVFyY29kZUNvbnN0YW50cy5ERUZBVUxUX1NVUFBPUlRFRF9TQ0FOX1RZUEVcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuY3JlYXRlQmFzaWNMYXlvdXQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgcGFyZW50LnN0eWxlLnBhZGRpbmcgPSBcIjBweFwiO1xuICAgICAgICBwYXJlbnQuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgc2lsdmVyXCI7XG4gICAgICAgIHRoaXMuY3JlYXRlSGVhZGVyKHBhcmVudCk7XG4gICAgICAgIHZhciBxckNvZGVTY2FuUmVnaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIHNjYW5SZWdpb25JZCA9IHRoaXMuZ2V0U2NhblJlZ2lvbklkKCk7XG4gICAgICAgIHFyQ29kZVNjYW5SZWdpb24uaWQgPSBzY2FuUmVnaW9uSWQ7XG4gICAgICAgIHFyQ29kZVNjYW5SZWdpb24uc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgcXJDb2RlU2NhblJlZ2lvbi5zdHlsZS5taW5IZWlnaHQgPSBcIjEwMHB4XCI7XG4gICAgICAgIHFyQ29kZVNjYW5SZWdpb24uc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHFyQ29kZVNjYW5SZWdpb24pO1xuICAgICAgICBpZiAoU2NhblR5cGVTZWxlY3Rvci5pc0NhbWVyYVNjYW5UeXBlKHRoaXMuY3VycmVudFNjYW5UeXBlKSkge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRDYW1lcmFTY2FuSW1hZ2VUb1NjYW5SZWdpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0RmlsZVNjYW5JbWFnZVRvU2NhblJlZ2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxckNvZGVEYXNoYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgZGFzaGJvYXJkSWQgPSB0aGlzLmdldERhc2hib2FyZElkKCk7XG4gICAgICAgIHFyQ29kZURhc2hib2FyZC5pZCA9IGRhc2hib2FyZElkO1xuICAgICAgICBxckNvZGVEYXNoYm9hcmQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHFyQ29kZURhc2hib2FyZCk7XG4gICAgICAgIHRoaXMuc2V0dXBJbml0aWFsRGFzaGJvYXJkKHFyQ29kZURhc2hib2FyZCk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLnJlc2V0QmFzaWNMYXlvdXQgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lcikge1xuICAgICAgICBtYWluQ29udGFpbmVyLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5zZXR1cEluaXRpYWxEYXNoYm9hcmQgPSBmdW5jdGlvbiAoZGFzaGJvYXJkKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlU2VjdGlvbihkYXNoYm9hcmQpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNlY3Rpb25Db250cm9sUGFuZWwoKTtcbiAgICAgICAgaWYgKHRoaXMuc2NhblR5cGVTZWxlY3Rvci5oYXNNb3JlVGhhbk9uZVNjYW5UeXBlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VjdGlvblN3YXAoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5jcmVhdGVIZWFkZXIgPSBmdW5jdGlvbiAoZGFzaGJvYXJkKSB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBoZWFkZXIuc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgICAgIGhlYWRlci5zdHlsZS5tYXJnaW4gPSBcIjBweFwiO1xuICAgICAgICBkYXNoYm9hcmQuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgICAgICAgdmFyIGxpYnJhcnlJbmZvID0gbmV3IExpYnJhcnlJbmZvQ29udGFpbmVyKCk7XG4gICAgICAgIGxpYnJhcnlJbmZvLnJlbmRlckludG8oaGVhZGVyKTtcbiAgICAgICAgdmFyIGhlYWRlck1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBoZWFkZXJNZXNzYWdlQ29udGFpbmVyLmlkID0gdGhpcy5nZXRIZWFkZXJNZXNzYWdlQ29udGFpbmVySWQoKTtcbiAgICAgICAgaGVhZGVyTWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGhlYWRlck1lc3NhZ2VDb250YWluZXIuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgaGVhZGVyTWVzc2FnZUNvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9IFwiMTRweFwiO1xuICAgICAgICBoZWFkZXJNZXNzYWdlQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSBcIjJweCAxMHB4XCI7XG4gICAgICAgIGhlYWRlck1lc3NhZ2VDb250YWluZXIuc3R5bGUubWFyZ2luID0gXCI0cHhcIjtcbiAgICAgICAgaGVhZGVyTWVzc2FnZUNvbnRhaW5lci5zdHlsZS5ib3JkZXJUb3AgPSBcIjFweCBzb2xpZCAjZjZmNmY2XCI7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXJNZXNzYWdlQ29udGFpbmVyKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuY3JlYXRlU2VjdGlvbiA9IGZ1bmN0aW9uIChkYXNoYm9hcmQpIHtcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzZWN0aW9uLmlkID0gdGhpcy5nZXREYXNoYm9hcmRTZWN0aW9uSWQoKTtcbiAgICAgICAgc2VjdGlvbi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICBzZWN0aW9uLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHggMHB4IDEwcHggMHB4XCI7XG4gICAgICAgIHNlY3Rpb24uc3R5bGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgICAgIGRhc2hib2FyZC5hcHBlbmRDaGlsZChzZWN0aW9uKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuY3JlYXRlQ2FtZXJhTGlzdFVpID0gZnVuY3Rpb24gKHNjcENhbWVyYVNjYW5SZWdpb24sIHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyLCByZXF1ZXN0UGVybWlzc2lvbkJ1dHRvbikge1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICAkdGhpcy5zaG93SGlkZVNjYW5UeXBlU3dhcExpbmsoZmFsc2UpO1xuICAgICAgICAkdGhpcy5zZXRIZWFkZXJNZXNzYWdlKEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuY2FtZXJhUGVybWlzc2lvblJlcXVlc3RpbmcoKSk7XG4gICAgICAgIHZhciBjcmVhdGVQZXJtaXNzaW9uQnV0dG9uSWZOb3RFeGlzdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXJlcXVlc3RQZXJtaXNzaW9uQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuY3JlYXRlUGVybWlzc2lvbkJ1dHRvbihzY3BDYW1lcmFTY2FuUmVnaW9uLCByZXF1ZXN0UGVybWlzc2lvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEh0bWw1UXJjb2RlLmdldENhbWVyYXMoKS50aGVuKGZ1bmN0aW9uIChjYW1lcmFzKSB7XG4gICAgICAgICAgICAkdGhpcy5wZXJzaXN0ZWREYXRhTWFuYWdlci5zZXRIYXNQZXJtaXNzaW9uKHRydWUpO1xuICAgICAgICAgICAgJHRoaXMuc2hvd0hpZGVTY2FuVHlwZVN3YXBMaW5rKHRydWUpO1xuICAgICAgICAgICAgJHRoaXMucmVzZXRIZWFkZXJNZXNzYWdlKCk7XG4gICAgICAgICAgICBpZiAoY2FtZXJhcyAmJiBjYW1lcmFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzY3BDYW1lcmFTY2FuUmVnaW9uLnJlbW92ZUNoaWxkKHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5yZW5kZXJDYW1lcmFTZWxlY3Rpb24oY2FtZXJhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5zZXRIZWFkZXJNZXNzYWdlKEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Mubm9DYW1lcmFGb3VuZCgpLCBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXMuU1RBVFVTX1dBUk5JTkcpO1xuICAgICAgICAgICAgICAgIGNyZWF0ZVBlcm1pc3Npb25CdXR0b25JZk5vdEV4aXN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICR0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLnNldEhhc1Blcm1pc3Npb24oZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQZXJtaXNzaW9uQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVBlcm1pc3Npb25CdXR0b25JZk5vdEV4aXN0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHRoaXMuc2V0SGVhZGVyTWVzc2FnZShlcnJvciwgSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzLlNUQVRVU19XQVJOSU5HKTtcbiAgICAgICAgICAgICR0aGlzLnNob3dIaWRlU2NhblR5cGVTd2FwTGluayh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmNyZWF0ZVBlcm1pc3Npb25CdXR0b24gPSBmdW5jdGlvbiAoc2NwQ2FtZXJhU2NhblJlZ2lvbiwgcmVxdWVzdFBlcm1pc3Npb25Db250YWluZXIpIHtcbiAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJlcXVlc3RQZXJtaXNzaW9uQnV0dG9uID0gQmFzZVVpRWxlbWVudEZhY3RvcnlcbiAgICAgICAgICAgIC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHRoaXMuZ2V0Q2FtZXJhUGVybWlzc2lvbkJ1dHRvbklkKCkpO1xuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbkJ1dHRvbi5pbm5lclRleHRcbiAgICAgICAgICAgID0gSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5jYW1lcmFQZXJtaXNzaW9uVGl0bGUoKTtcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlcXVlc3RQZXJtaXNzaW9uQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICR0aGlzLmNyZWF0ZUNhbWVyYUxpc3RVaShzY3BDYW1lcmFTY2FuUmVnaW9uLCByZXF1ZXN0UGVybWlzc2lvbkNvbnRhaW5lciwgcmVxdWVzdFBlcm1pc3Npb25CdXR0b24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25Db250YWluZXIuYXBwZW5kQ2hpbGQocmVxdWVzdFBlcm1pc3Npb25CdXR0b24pO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5jcmVhdGVQZXJtaXNzaW9uc1VpID0gZnVuY3Rpb24gKHNjcENhbWVyYVNjYW5SZWdpb24sIHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKSB7XG4gICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChTY2FuVHlwZVNlbGVjdG9yLmlzQ2FtZXJhU2NhblR5cGUodGhpcy5jdXJyZW50U2NhblR5cGUpXG4gICAgICAgICAgICAmJiB0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLmhhc0NhbWVyYVBlcm1pc3Npb25zKCkpIHtcbiAgICAgICAgICAgIENhbWVyYVBlcm1pc3Npb25zLmhhc1Blcm1pc3Npb25zKCkudGhlbihmdW5jdGlvbiAoaGFzUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3JlYXRlQ2FtZXJhTGlzdFVpKHNjcENhbWVyYVNjYW5SZWdpb24sIHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLnNldEhhc1Blcm1pc3Npb24oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5jcmVhdGVQZXJtaXNzaW9uQnV0dG9uKHNjcENhbWVyYVNjYW5SZWdpb24sIHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgICR0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLnNldEhhc1Blcm1pc3Npb24oZmFsc2UpO1xuICAgICAgICAgICAgICAgICR0aGlzLmNyZWF0ZVBlcm1pc3Npb25CdXR0b24oc2NwQ2FtZXJhU2NhblJlZ2lvbiwgcmVxdWVzdFBlcm1pc3Npb25Db250YWluZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jcmVhdGVQZXJtaXNzaW9uQnV0dG9uKHNjcENhbWVyYVNjYW5SZWdpb24sIHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuY3JlYXRlU2VjdGlvbkNvbnRyb2xQYW5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdldERhc2hib2FyZFNlY3Rpb25JZCgpKTtcbiAgICAgICAgdmFyIHNlY3Rpb25Db250cm9sUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKHNlY3Rpb25Db250cm9sUGFuZWwpO1xuICAgICAgICB2YXIgc2NwQ2FtZXJhU2NhblJlZ2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNjcENhbWVyYVNjYW5SZWdpb24uaWQgPSB0aGlzLmdldERhc2hib2FyZFNlY3Rpb25DYW1lcmFTY2FuUmVnaW9uSWQoKTtcbiAgICAgICAgc2NwQ2FtZXJhU2NhblJlZ2lvbi5zdHlsZS5kaXNwbGF5XG4gICAgICAgICAgICA9IFNjYW5UeXBlU2VsZWN0b3IuaXNDYW1lcmFTY2FuVHlwZSh0aGlzLmN1cnJlbnRTY2FuVHlwZSlcbiAgICAgICAgICAgICAgICA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xuICAgICAgICBzZWN0aW9uQ29udHJvbFBhbmVsLmFwcGVuZENoaWxkKHNjcENhbWVyYVNjYW5SZWdpb24pO1xuICAgICAgICB2YXIgcmVxdWVzdFBlcm1pc3Npb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbkNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICBzY3BDYW1lcmFTY2FuUmVnaW9uLmFwcGVuZENoaWxkKHJlcXVlc3RQZXJtaXNzaW9uQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHRoaXMuc2NhblR5cGVTZWxlY3Rvci5pc0NhbWVyYVNjYW5SZXF1aXJlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVBlcm1pc3Npb25zVWkoc2NwQ2FtZXJhU2NhblJlZ2lvbiwgcmVxdWVzdFBlcm1pc3Npb25Db250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyRmlsZVNjYW5VaShzZWN0aW9uQ29udHJvbFBhbmVsKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUucmVuZGVyRmlsZVNjYW5VaSA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIHNob3dPblJlbmRlciA9IFNjYW5UeXBlU2VsZWN0b3IuaXNGaWxlU2NhblR5cGUodGhpcy5jdXJyZW50U2NhblR5cGUpO1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb25GaWxlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgaWYgKCEkdGhpcy5odG1sNVFyY29kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IFwiaHRtbDVRcmNvZGUgbm90IGRlZmluZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghU2NhblR5cGVTZWxlY3Rvci5pc0ZpbGVTY2FuVHlwZSgkdGhpcy5jdXJyZW50U2NhblR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHRoaXMuc2V0SGVhZGVyTWVzc2FnZShIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmxvYWRpbmdJbWFnZSgpKTtcbiAgICAgICAgICAgICR0aGlzLmh0bWw1UXJjb2RlLnNjYW5GaWxlVjIoZmlsZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaHRtbDVxcmNvZGVSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5yZXNldEhlYWRlck1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5xckNvZGVTdWNjZXNzQ2FsbGJhY2soaHRtbDVxcmNvZGVSZXN1bHQuZGVjb2RlZFRleHQsIGh0bWw1cXJjb2RlUmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICR0aGlzLnNldEhlYWRlck1lc3NhZ2UoZXJyb3IsIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfV0FSTklORyk7XG4gICAgICAgICAgICAgICAgJHRoaXMucXJDb2RlRXJyb3JDYWxsYmFjayhlcnJvciwgSHRtbDVRcmNvZGVFcnJvckZhY3RvcnkuY3JlYXRlRnJvbShlcnJvcikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlsZVNlbGVjdGlvblVpID0gRmlsZVNlbGVjdGlvblVpLmNyZWF0ZShwYXJlbnQsIHNob3dPblJlbmRlciwgb25GaWxlU2VsZWN0ZWQpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5yZW5kZXJDYW1lcmFTZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2FtZXJhcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2NwQ2FtZXJhU2NhblJlZ2lvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0RGFzaGJvYXJkU2VjdGlvbkNhbWVyYVNjYW5SZWdpb25JZCgpKTtcbiAgICAgICAgc2NwQ2FtZXJhU2NhblJlZ2lvbi5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICB2YXIgY2FtZXJhWm9vbVVpID0gQ2FtZXJhWm9vbVVpLmNyZWF0ZShzY3BDYW1lcmFTY2FuUmVnaW9uLCBmYWxzZSk7XG4gICAgICAgIHZhciByZW5kZXJDYW1lcmFab29tVWlJZlN1cHBvcnRlZCA9IGZ1bmN0aW9uIChjYW1lcmFDYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICAgIHZhciB6b29tQ2FwYWJpbGl0eSA9IGNhbWVyYUNhcGFiaWxpdGllcy56b29tRmVhdHVyZSgpO1xuICAgICAgICAgICAgaWYgKCF6b29tQ2FwYWJpbGl0eS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FtZXJhWm9vbVVpLnNldE9uQ2FtZXJhWm9vbVZhbHVlQ2hhbmdlQ2FsbGJhY2soZnVuY3Rpb24gKHpvb21WYWx1ZSkge1xuICAgICAgICAgICAgICAgIHpvb21DYXBhYmlsaXR5LmFwcGx5KHpvb21WYWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0Wm9vbSA9IDE7XG4gICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLmRlZmF1bHRab29tVmFsdWVJZlN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRab29tID0gX3RoaXMuY29uZmlnLmRlZmF1bHRab29tVmFsdWVJZlN1cHBvcnRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHRab29tID0gY2xpcChkZWZhdWx0Wm9vbSwgem9vbUNhcGFiaWxpdHkubWluKCksIHpvb21DYXBhYmlsaXR5Lm1heCgpKTtcbiAgICAgICAgICAgIGNhbWVyYVpvb21VaS5zZXRWYWx1ZXMoem9vbUNhcGFiaWxpdHkubWluKCksIHpvb21DYXBhYmlsaXR5Lm1heCgpLCBkZWZhdWx0Wm9vbSwgem9vbUNhcGFiaWxpdHkuc3RlcCgpKTtcbiAgICAgICAgICAgIGNhbWVyYVpvb21VaS5zaG93KCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjYW1lcmFTZWxlY3RVaSA9IENhbWVyYVNlbGVjdGlvblVpLmNyZWF0ZShzY3BDYW1lcmFTY2FuUmVnaW9uLCBjYW1lcmFzKTtcbiAgICAgICAgdmFyIGNhbWVyYUFjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB2YXIgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24gPSBCYXNlVWlFbGVtZW50RmFjdG9yeS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFB1YmxpY1VpRWxlbWVudElkQW5kQ2xhc3Nlcy5DQU1FUkFfU1RBUlRfQlVUVE9OX0lEKTtcbiAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uaW5uZXJUZXh0XG4gICAgICAgICAgICA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3Muc2NhbkJ1dHRvblN0YXJ0U2Nhbm5pbmdUZXh0KCk7XG4gICAgICAgIGNhbWVyYUFjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbik7XG4gICAgICAgIHZhciBjYW1lcmFBY3Rpb25TdG9wQnV0dG9uID0gQmFzZVVpRWxlbWVudEZhY3RvcnkuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBQdWJsaWNVaUVsZW1lbnRJZEFuZENsYXNzZXMuQ0FNRVJBX1NUT1BfQlVUVE9OX0lEKTtcbiAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5pbm5lclRleHRcbiAgICAgICAgICAgID0gSHRtbDVRcmNvZGVTY2FubmVyU3RyaW5ncy5zY2FuQnV0dG9uU3RvcFNjYW5uaW5nVGV4dCgpO1xuICAgICAgICBjYW1lcmFBY3Rpb25TdG9wQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNhbWVyYUFjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW1lcmFBY3Rpb25TdG9wQnV0dG9uKTtcbiAgICAgICAgdmFyIHRvcmNoQnV0dG9uO1xuICAgICAgICB2YXIgY3JlYXRlQW5kU2hvd1RvcmNoQnV0dG9uSWZTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2FtZXJhQ2FwYWJpbGl0aWVzKSB7XG4gICAgICAgICAgICBpZiAoIWNhbWVyYUNhcGFiaWxpdGllcy50b3JjaEZlYXR1cmUoKS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvcmNoQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcmNoQnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0b3JjaEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHRvcmNoQnV0dG9uID0gVG9yY2hCdXR0b24uY3JlYXRlKGNhbWVyYUFjdGlvbkNvbnRhaW5lciwgY2FtZXJhQ2FwYWJpbGl0aWVzLnRvcmNoRmVhdHVyZSgpLCB7IGRpc3BsYXk6IFwibm9uZVwiLCBtYXJnaW5MZWZ0OiBcIjVweFwiIH0sIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2V0SGVhZGVyTWVzc2FnZShlcnJvck1lc3NhZ2UsIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfV0FSTklORyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3JjaEJ1dHRvbi51cGRhdGVUb3JjaENhcGFiaWxpdHkoY2FtZXJhQ2FwYWJpbGl0aWVzLnRvcmNoRmVhdHVyZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvcmNoQnV0dG9uLnNob3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2NwQ2FtZXJhU2NhblJlZ2lvbi5hcHBlbmRDaGlsZChjYW1lcmFBY3Rpb25Db250YWluZXIpO1xuICAgICAgICB2YXIgcmVzZXRDYW1lcmFBY3Rpb25TdGFydEJ1dHRvbiA9IGZ1bmN0aW9uIChzaG91bGRTaG93KSB7XG4gICAgICAgICAgICBpZiAoIXNob3VsZFNob3cpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbi5pbm5lclRleHRcbiAgICAgICAgICAgICAgICA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3NcbiAgICAgICAgICAgICAgICAgICAgLnNjYW5CdXR0b25TdGFydFNjYW5uaW5nVGV4dCgpO1xuICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzaG91bGRTaG93KSB7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNhbWVyYUFjdGlvblN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uaW5uZXJUZXh0XG4gICAgICAgICAgICAgICAgPSBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLnNjYW5CdXR0b25TY2FubmluZ1N0YXJ0aW5nKCk7XG4gICAgICAgICAgICBjYW1lcmFTZWxlY3RVaS5kaXNhYmxlKCk7XG4gICAgICAgICAgICBjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gXCIwLjVcIjtcbiAgICAgICAgICAgIGlmIChfdGhpcy5zY2FuVHlwZVNlbGVjdG9yLmhhc01vcmVUaGFuT25lU2NhblR5cGUoKSkge1xuICAgICAgICAgICAgICAgICR0aGlzLnNob3dIaWRlU2NhblR5cGVTd2FwTGluayhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkdGhpcy5yZXNldEhlYWRlck1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHZhciBjYW1lcmFJZCA9IGNhbWVyYVNlbGVjdFVpLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAkdGhpcy5wZXJzaXN0ZWREYXRhTWFuYWdlci5zZXRMYXN0VXNlZENhbWVyYUlkKGNhbWVyYUlkKTtcbiAgICAgICAgICAgICR0aGlzLmh0bWw1UXJjb2RlLnN0YXJ0KGNhbWVyYUlkLCB0b0h0bWw1UXJjb2RlQ2FtZXJhU2NhbkNvbmZpZygkdGhpcy5jb25maWcpLCAkdGhpcy5xckNvZGVTdWNjZXNzQ2FsbGJhY2ssICR0aGlzLnFyQ29kZUVycm9yQ2FsbGJhY2spXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFBY3Rpb25TdG9wQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgICAgICAgICAgICByZXNldENhbWVyYUFjdGlvblN0YXJ0QnV0dG9uKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FtZXJhQ2FwYWJpbGl0aWVzID0gJHRoaXMuaHRtbDVRcmNvZGUuZ2V0UnVubmluZ1RyYWNrQ2FtZXJhQ2FwYWJpbGl0aWVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5zaG93VG9yY2hCdXR0b25JZlN1cHBvcnRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVBbmRTaG93VG9yY2hCdXR0b25JZlN1cHBvcnRlZChjYW1lcmFDYXBhYmlsaXRpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLnNob3dab29tU2xpZGVySWZTdXBwb3J0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ2FtZXJhWm9vbVVpSWZTdXBwb3J0ZWQoY2FtZXJhQ2FwYWJpbGl0aWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5zaG93SGlkZVNjYW5UeXBlU3dhcExpbmsodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2FtZXJhU2VsZWN0VWkuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDYW1lcmFBY3Rpb25TdGFydEJ1dHRvbih0cnVlKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5zZXRIZWFkZXJNZXNzYWdlKGVycm9yLCBIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXMuU1RBVFVTX1dBUk5JTkcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY2FtZXJhU2VsZWN0VWkuaGFzU2luZ2xlSXRlbSgpKSB7XG4gICAgICAgICAgICBjYW1lcmFBY3Rpb25TdGFydEJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGNhbWVyYUFjdGlvblN0b3BCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChfKSB7XG4gICAgICAgICAgICBpZiAoISR0aGlzLmh0bWw1UXJjb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJodG1sNVFyY29kZSBub3QgZGVmaW5lZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAkdGhpcy5odG1sNVFyY29kZS5zdG9wKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zY2FuVHlwZVNlbGVjdG9yLmhhc01vcmVUaGFuT25lU2NhblR5cGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5zaG93SGlkZVNjYW5UeXBlU3dhcExpbmsodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbWVyYVNlbGVjdFVpLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgIGNhbWVyYUFjdGlvblN0YXJ0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgICAgICAgICAgICAgaWYgKHRvcmNoQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcmNoQnV0dG9uLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRvcmNoQnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FtZXJhWm9vbVVpLnJlbW92ZU9uQ2FtZXJhWm9vbVZhbHVlQ2hhbmdlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICBjYW1lcmFab29tVWkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICR0aGlzLmluc2VydENhbWVyYVNjYW5JbWFnZVRvU2NhblJlZ2lvbigpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RvcEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICR0aGlzLnNldEhlYWRlck1lc3NhZ2UoZXJyb3IsIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfV0FSTklORyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgkdGhpcy5wZXJzaXN0ZWREYXRhTWFuYWdlci5nZXRMYXN0VXNlZENhbWVyYUlkKCkpIHtcbiAgICAgICAgICAgIHZhciBjYW1lcmFJZCA9ICR0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLmdldExhc3RVc2VkQ2FtZXJhSWQoKTtcbiAgICAgICAgICAgIGlmIChjYW1lcmFTZWxlY3RVaS5oYXNWYWx1ZShjYW1lcmFJZCkpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmFTZWxlY3RVaS5zZXRWYWx1ZShjYW1lcmFJZCk7XG4gICAgICAgICAgICAgICAgY2FtZXJhQWN0aW9uU3RhcnRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICR0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLnJlc2V0TGFzdFVzZWRDYW1lcmFJZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmNyZWF0ZVNlY3Rpb25Td2FwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgVEVYVF9JRl9DQU1FUkFfU0NBTl9TRUxFQ1RFRCA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudGV4dElmQ2FtZXJhU2NhblNlbGVjdGVkKCk7XG4gICAgICAgIHZhciBURVhUX0lGX0ZJTEVfU0NBTl9TRUxFQ1RFRCA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MudGV4dElmRmlsZVNjYW5TZWxlY3RlZCgpO1xuICAgICAgICB2YXIgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0RGFzaGJvYXJkU2VjdGlvbklkKCkpO1xuICAgICAgICB2YXIgc3dpdGNoQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc3dpdGNoQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIHZhciBzd2l0Y2hTY2FuVHlwZUxpbmsgPSBCYXNlVWlFbGVtZW50RmFjdG9yeS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB0aGlzLmdldERhc2hib2FyZFNlY3Rpb25Td2FwTGlua0lkKCkpO1xuICAgICAgICBzd2l0Y2hTY2FuVHlwZUxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xuICAgICAgICBzd2l0Y2hTY2FuVHlwZUxpbmsuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgIHN3aXRjaFNjYW5UeXBlTGluay5pbm5lclRleHRcbiAgICAgICAgICAgID0gU2NhblR5cGVTZWxlY3Rvci5pc0NhbWVyYVNjYW5UeXBlKHRoaXMuY3VycmVudFNjYW5UeXBlKVxuICAgICAgICAgICAgICAgID8gVEVYVF9JRl9DQU1FUkFfU0NBTl9TRUxFQ1RFRCA6IFRFWFRfSUZfRklMRV9TQ0FOX1NFTEVDVEVEO1xuICAgICAgICBzd2l0Y2hTY2FuVHlwZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghJHRoaXMuc2VjdGlvblN3YXBBbGxvd2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLnZlcmJvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubG9nZ2VyLmxvZ0Vycm9yKFwiU2VjdGlvbiBzd2FwIGNhbGxlZCB3aGVuIG5vdCBhbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkdGhpcy5yZXNldEhlYWRlck1lc3NhZ2UoKTtcbiAgICAgICAgICAgICR0aGlzLmZpbGVTZWxlY3Rpb25VaS5yZXNldFZhbHVlKCk7XG4gICAgICAgICAgICAkdGhpcy5zZWN0aW9uU3dhcEFsbG93ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChTY2FuVHlwZVNlbGVjdG9yLmlzQ2FtZXJhU2NhblR5cGUoJHRoaXMuY3VycmVudFNjYW5UeXBlKSkge1xuICAgICAgICAgICAgICAgICR0aGlzLmNsZWFyU2NhblJlZ2lvbigpO1xuICAgICAgICAgICAgICAgICR0aGlzLmdldENhbWVyYVNjYW5SZWdpb24oKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgJHRoaXMuZmlsZVNlbGVjdGlvblVpLnNob3coKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2hTY2FuVHlwZUxpbmsuaW5uZXJUZXh0ID0gVEVYVF9JRl9GSUxFX1NDQU5fU0VMRUNURUQ7XG4gICAgICAgICAgICAgICAgJHRoaXMuY3VycmVudFNjYW5UeXBlID0gSHRtbDVRcmNvZGVTY2FuVHlwZS5TQ0FOX1RZUEVfRklMRTtcbiAgICAgICAgICAgICAgICAkdGhpcy5pbnNlcnRGaWxlU2NhbkltYWdlVG9TY2FuUmVnaW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5jbGVhclNjYW5SZWdpb24oKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5nZXRDYW1lcmFTY2FuUmVnaW9uKCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAkdGhpcy5maWxlU2VsZWN0aW9uVWkuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHN3aXRjaFNjYW5UeXBlTGluay5pbm5lclRleHQgPSBURVhUX0lGX0NBTUVSQV9TQ0FOX1NFTEVDVEVEO1xuICAgICAgICAgICAgICAgICR0aGlzLmN1cnJlbnRTY2FuVHlwZSA9IEh0bWw1UXJjb2RlU2NhblR5cGUuU0NBTl9UWVBFX0NBTUVSQTtcbiAgICAgICAgICAgICAgICAkdGhpcy5pbnNlcnRDYW1lcmFTY2FuSW1hZ2VUb1NjYW5SZWdpb24oKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5zdGFydENhbWVyYVNjYW5JZlBlcm1pc3Npb25FeGlzdHNPblN3YXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR0aGlzLnNlY3Rpb25Td2FwQWxsb3dlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBzd2l0Y2hDb250YWluZXIuYXBwZW5kQ2hpbGQoc3dpdGNoU2NhblR5cGVMaW5rKTtcbiAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChzd2l0Y2hDb250YWluZXIpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5zdGFydENhbWVyYVNjYW5JZlBlcm1pc3Npb25FeGlzdHNPblN3YXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlZERhdGFNYW5hZ2VyLmhhc0NhbWVyYVBlcm1pc3Npb25zKCkpIHtcbiAgICAgICAgICAgIENhbWVyYVBlcm1pc3Npb25zLmhhc1Blcm1pc3Npb25zKCkudGhlbihmdW5jdGlvbiAoaGFzUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzUGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcm1pc3Npb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkdGhpcy5nZXRDYW1lcmFQZXJtaXNzaW9uQnV0dG9uSWQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGVybWlzc2lvbkJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZ0Vycm9yKFwiUGVybWlzc2lvbiBidXR0b24gbm90IGZvdW5kLCBmYWlsO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiUGVybWlzc2lvbiBidXR0b24gbm90IGZvdW5kXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbkJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucGVyc2lzdGVkRGF0YU1hbmFnZXIuc2V0SGFzUGVybWlzc2lvbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5wZXJzaXN0ZWREYXRhTWFuYWdlci5zZXRIYXNQZXJtaXNzaW9uKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLnJlc2V0SGVhZGVyTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2VEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdldEhlYWRlck1lc3NhZ2VDb250YWluZXJJZCgpKTtcbiAgICAgICAgbWVzc2FnZURpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLnNldEhlYWRlck1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZVRleHQsIHNjYW5uZXJTdGF0dXMpIHtcbiAgICAgICAgaWYgKCFzY2FubmVyU3RhdHVzKSB7XG4gICAgICAgICAgICBzY2FubmVyU3RhdHVzID0gSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzLlNUQVRVU19ERUZBVUxUO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXNzYWdlRGl2ID0gdGhpcy5nZXRIZWFkZXJNZXNzYWdlRGl2KCk7XG4gICAgICAgIG1lc3NhZ2VEaXYuaW5uZXJUZXh0ID0gbWVzc2FnZVRleHQ7XG4gICAgICAgIG1lc3NhZ2VEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgc3dpdGNoIChzY2FubmVyU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfU1VDQ0VTUzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGl2LnN0eWxlLmJhY2tncm91bmQgPSBcInJnYmEoMTA2LCAxNzUsIDgwLCAwLjI2KVwiO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VEaXYuc3R5bGUuY29sb3IgPSBcIiM0Nzc3MzVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSHRtbDVRcmNvZGVTY2FubmVyU3RhdHVzLlNUQVRVU19XQVJOSU5HOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2VEaXYuc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiYSgyMDMsIDM2LCA0OSwgMC4xNClcIjtcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGl2LnN0eWxlLmNvbG9yID0gXCIjY2IyNDMxXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEh0bWw1UXJjb2RlU2Nhbm5lclN0YXR1cy5TVEFUVVNfREVGQVVMVDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2JhKDAsIDAsIDAsIDApXCI7XG4gICAgICAgICAgICAgICAgbWVzc2FnZURpdi5zdHlsZS5jb2xvciA9IFwicmdiKDE3LCAxNywgMTcpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuc2hvd0hpZGVTY2FuVHlwZVN3YXBMaW5rID0gZnVuY3Rpb24gKHNob3VsZERpc3BsYXkpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NhblR5cGVTZWxlY3Rvci5oYXNNb3JlVGhhbk9uZVNjYW5UeXBlKCkpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGREaXNwbGF5ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uU3dhcEFsbG93ZWQgPSBzaG91bGREaXNwbGF5O1xuICAgICAgICAgICAgdGhpcy5nZXREYXNoYm9hcmRTZWN0aW9uU3dhcExpbmsoKS5zdHlsZS5kaXNwbGF5XG4gICAgICAgICAgICAgICAgPSBzaG91bGREaXNwbGF5ID8gXCJpbmxpbmUtYmxvY2tcIiA6IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIdG1sNVFyY29kZVNjYW5uZXIucHJvdG90eXBlLmluc2VydENhbWVyYVNjYW5JbWFnZVRvU2NhblJlZ2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHFyQ29kZVNjYW5SZWdpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdldFNjYW5SZWdpb25JZCgpKTtcbiAgICAgICAgaWYgKHRoaXMuY2FtZXJhU2NhbkltYWdlKSB7XG4gICAgICAgICAgICBxckNvZGVTY2FuUmVnaW9uLmlubmVySFRNTCA9IFwiPGJyPlwiO1xuICAgICAgICAgICAgcXJDb2RlU2NhblJlZ2lvbi5hcHBlbmRDaGlsZCh0aGlzLmNhbWVyYVNjYW5JbWFnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW1lcmFTY2FuSW1hZ2UgPSBuZXcgSW1hZ2U7XG4gICAgICAgIHRoaXMuY2FtZXJhU2NhbkltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uIChfKSB7XG4gICAgICAgICAgICBxckNvZGVTY2FuUmVnaW9uLmlubmVySFRNTCA9IFwiPGJyPlwiO1xuICAgICAgICAgICAgcXJDb2RlU2NhblJlZ2lvbi5hcHBlbmRDaGlsZCgkdGhpcy5jYW1lcmFTY2FuSW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNhbWVyYVNjYW5JbWFnZS53aWR0aCA9IDY0O1xuICAgICAgICB0aGlzLmNhbWVyYVNjYW5JbWFnZS5zdHlsZS5vcGFjaXR5ID0gXCIwLjhcIjtcbiAgICAgICAgdGhpcy5jYW1lcmFTY2FuSW1hZ2Uuc3JjID0gQVNTRVRfQ0FNRVJBX1NDQU47XG4gICAgICAgIHRoaXMuY2FtZXJhU2NhbkltYWdlLmFsdCA9IEh0bWw1UXJjb2RlU2Nhbm5lclN0cmluZ3MuY2FtZXJhU2NhbkFsdFRleHQoKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuaW5zZXJ0RmlsZVNjYW5JbWFnZVRvU2NhblJlZ2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHFyQ29kZVNjYW5SZWdpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdldFNjYW5SZWdpb25JZCgpKTtcbiAgICAgICAgaWYgKHRoaXMuZmlsZVNjYW5JbWFnZSkge1xuICAgICAgICAgICAgcXJDb2RlU2NhblJlZ2lvbi5pbm5lckhUTUwgPSBcIjxicj5cIjtcbiAgICAgICAgICAgIHFyQ29kZVNjYW5SZWdpb24uYXBwZW5kQ2hpbGQodGhpcy5maWxlU2NhbkltYWdlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbGVTY2FuSW1hZ2UgPSBuZXcgSW1hZ2U7XG4gICAgICAgIHRoaXMuZmlsZVNjYW5JbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgcXJDb2RlU2NhblJlZ2lvbi5pbm5lckhUTUwgPSBcIjxicj5cIjtcbiAgICAgICAgICAgIHFyQ29kZVNjYW5SZWdpb24uYXBwZW5kQ2hpbGQoJHRoaXMuZmlsZVNjYW5JbWFnZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlsZVNjYW5JbWFnZS53aWR0aCA9IDY0O1xuICAgICAgICB0aGlzLmZpbGVTY2FuSW1hZ2Uuc3R5bGUub3BhY2l0eSA9IFwiMC44XCI7XG4gICAgICAgIHRoaXMuZmlsZVNjYW5JbWFnZS5zcmMgPSBBU1NFVF9GSUxFX1NDQU47XG4gICAgICAgIHRoaXMuZmlsZVNjYW5JbWFnZS5hbHQgPSBIdG1sNVFyY29kZVNjYW5uZXJTdHJpbmdzLmZpbGVTY2FuQWx0VGV4dCgpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5jbGVhclNjYW5SZWdpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBxckNvZGVTY2FuUmVnaW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5nZXRTY2FuUmVnaW9uSWQoKSk7XG4gICAgICAgIHFyQ29kZVNjYW5SZWdpb24uaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0RGFzaGJvYXJkU2VjdGlvbklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5lbGVtZW50SWQsIFwiX19kYXNoYm9hcmRfc2VjdGlvblwiKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0RGFzaGJvYXJkU2VjdGlvbkNhbWVyYVNjYW5SZWdpb25JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuZWxlbWVudElkLCBcIl9fZGFzaGJvYXJkX3NlY3Rpb25fY3NyXCIpO1xuICAgIH07XG4gICAgSHRtbDVRcmNvZGVTY2FubmVyLnByb3RvdHlwZS5nZXREYXNoYm9hcmRTZWN0aW9uU3dhcExpbmtJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFB1YmxpY1VpRWxlbWVudElkQW5kQ2xhc3Nlcy5TQ0FOX1RZUEVfQ0hBTkdFX0FOQ0hPUl9JRDtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0U2NhblJlZ2lvbklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5lbGVtZW50SWQsIFwiX19zY2FuX3JlZ2lvblwiKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0RGFzaGJvYXJkSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmVsZW1lbnRJZCwgXCJfX2Rhc2hib2FyZFwiKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0SGVhZGVyTWVzc2FnZUNvbnRhaW5lcklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5lbGVtZW50SWQsIFwiX19oZWFkZXJfbWVzc2FnZVwiKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0Q2FtZXJhUGVybWlzc2lvbkJ1dHRvbklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUHVibGljVWlFbGVtZW50SWRBbmRDbGFzc2VzLkNBTUVSQV9QRVJNSVNTSU9OX0JVVFRPTl9JRDtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0Q2FtZXJhU2NhblJlZ2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0RGFzaGJvYXJkU2VjdGlvbkNhbWVyYVNjYW5SZWdpb25JZCgpKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0RGFzaGJvYXJkU2VjdGlvblN3YXBMaW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5nZXREYXNoYm9hcmRTZWN0aW9uU3dhcExpbmtJZCgpKTtcbiAgICB9O1xuICAgIEh0bWw1UXJjb2RlU2Nhbm5lci5wcm90b3R5cGUuZ2V0SGVhZGVyTWVzc2FnZURpdiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0SGVhZGVyTWVzc2FnZUNvbnRhaW5lcklkKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIEh0bWw1UXJjb2RlU2Nhbm5lcjtcbn0oKSk7XG5leHBvcnQgeyBIdG1sNVFyY29kZVNjYW5uZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0bWw1LXFyY29kZS1zY2FubmVyLmpzLm1hcCIsIjx0ZW1wbGF0ZT5cclxuICA8ZGl2PlxyXG4gICAgPHA+U2NhbiBiYXJjb2RlIG9yIFFSIGNvZGU8L3A+XHJcbiAgICA8ZGl2IGlkPVwicXItY29kZS1yZWFkZXJcIj48L2Rpdj5cclxuICAgIDxwPlNjYW5uZWQgY29kZSB7eyBxckNvZGVUZXh0IH19PC9wPlxyXG4gICAgPHEtaW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkNhcmQgbmFtZVwiIHYtbW9kZWw9XCJjYXJkTmFtZVwiPjwvcS1pbnB1dD5cclxuICAgIDxxLWlucHV0XHJcbiAgICAgIGZpbGxlZFxyXG4gICAgICBwbGFjZWhvbGRlcj1cIlBpY2sgYSBjb2xvciBmb3IgeW91ciBjYXJkXCJcclxuICAgICAgdi1tb2RlbD1cImNvbG9yXCJcclxuICAgICAgY2xhc3M9XCJteS1pbnB1dFwiXHJcbiAgICA+XHJcbiAgICAgIDx0ZW1wbGF0ZSB2LXNsb3Q6YXBwZW5kPlxyXG4gICAgICAgIDxxLWljb24gbmFtZT1cImNvbG9yaXplXCIgY2xhc3M9XCJjdXJzb3ItcG9pbnRlclwiPlxyXG4gICAgICAgICAgPHEtcG9wdXAtcHJveHkgY292ZXIgdHJhbnNpdGlvbi1zaG93PVwic2NhbGVcIiB0cmFuc2l0aW9uLWhpZGU9XCJzY2FsZVwiPlxyXG4gICAgICAgICAgICA8cS1jb2xvciBuby1mb290ZXIgdi1tb2RlbD1cImNvbG9yXCIgLz5cclxuICAgICAgICAgIDwvcS1wb3B1cC1wcm94eT5cclxuICAgICAgICA8L3EtaWNvbj5cclxuICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvcS1pbnB1dD5cclxuICAgIDxkaXYgY2xhc3M9XCJzYXZlLWNhcmRfX2NvbnRhaW5lclwiPlxyXG4gICAgICA8cS1idG4gY2xhc3M9XCJzYXZlLWJ0blwiIEBjbGljaz1cImFkZENhcmRcIiBsYWJlbD1cIlNhdmUgY2FyZFwiIC8+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmltcG9ydCB7IHVzZVF1YXNhciB9IGZyb20gXCJxdWFzYXJcIjtcclxuaW1wb3J0IHsgSHRtbDVRcmNvZGUgfSBmcm9tIFwiaHRtbDUtcXJjb2RlXCI7XHJcbmltcG9ydCB7IEh0bWw1UXJjb2RlU2Nhbm5lciB9IGZyb20gXCJodG1sNS1xcmNvZGVcIjtcclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGVtaXRzOiBbXCJjYXJkU2F2ZWRTdWNjZXNzZnVsbHlcIl0sXHJcbiAgcHJvcHM6IFtcInN0b3BDYW1lcmFcIl0sXHJcbiAgZGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHFyQ29kZVNjYW5uZXI6IG51bGwsXHJcbiAgICAgIHFyQ29kZVRleHQ6IFwiXCIsXHJcbiAgICAgIGNvZGVGb3JtYXQ6IFwiXCIsXHJcbiAgICAgIGNhcmROYW1lOiBcIlwiLFxyXG4gICAgICAkcTogdXNlUXVhc2FyKCksXHJcbiAgICAgIGNvbG9yOiBcIlwiLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGFzeW5jIG1vdW50ZWQoKSB7XHJcbiAgICAvLyBUT0RPOiBjaGVjayBwZXJtaXNzaW9ucyBhY2NvcmRpbmcgdG8gcGxhdGZvcm1cclxuICAgIGxldCBwZXJtaXNzaW9ucyA9IGNvcmRvdmEucGx1Z2lucy5wZXJtaXNzaW9ucztcclxuICAgIGF3YWl0IHBlcm1pc3Npb25zLnJlcXVlc3RQZXJtaXNzaW9uKFxyXG4gICAgICBwZXJtaXNzaW9ucy5DQU1FUkEsXHJcbiAgICAgIHRoaXMuc3VjY2VzcyxcclxuICAgICAgdGhpcy5lcnJvclxyXG4gICAgKTtcclxuICAgIC8vIGxldCBodG1sNVFyY29kZVNjYW5uZXIgPSBuZXcgSHRtbDVRcmNvZGVTY2FubmVyKFxyXG4gICAgLy8gICBcInFyLWNvZGUtcmVhZGVyXCIsXHJcbiAgICAvLyAgIHsgZnBzOiAzMCwgcXJib3g6IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDAgfSB9LFxyXG4gICAgLy8gICAvKiB2ZXJib3NlPSAqLyBmYWxzZVxyXG4gICAgLy8gKTtcclxuICAgIC8vIGh0bWw1UXJjb2RlU2Nhbm5lci5yZW5kZXIodGhpcy5vblNjYW5TdWNjZXNzLCB0aGlzLm9uU2NhbkZhaWx1cmUpO1xyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgYXN5bmMgYWRkQ2FyZCgpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgY29kZTogdGhpcy5xckNvZGVUZXh0LFxyXG4gICAgICAgICAgZm9ybWF0OiB0aGlzLmNvZGVGb3JtYXQsXHJcbiAgICAgICAgICBuYW1lOiB0aGlzLmNhcmROYW1lLFxyXG4gICAgICAgICAgY29sb3I6IHRoaXMuY29sb3IsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhcGkucG9zdChcIi9jYXJkc1wiLCBkYXRhKTtcclxuICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xyXG4gICAgICAgICAgdGhpcy4kZW1pdChcImNhcmRTYXZlZFN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgIHRoaXMucXJDb2RlU2Nhbm5lci5zdG9wKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdGhpcy4kcS5ub3RpZnkoe1xyXG4gICAgICAgICAgdHlwZTogXCJuZWdhdGl2ZVwiLFxyXG4gICAgICAgICAgcG9zaXRpb246IFwidG9wXCIsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nIVwiLFxyXG4gICAgICAgICAgY29sb3I6IFwibmVnYXRpdmVcIixcclxuICAgICAgICAgIHRpbWVvdXQ6IFwiMjUwMFwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25TY2FuU3VjY2VzcyhkZWNvZGVkVGV4dCwgZGVjb2RlZFJlc3VsdCkge1xyXG4gICAgICB0aGlzLnFyQ29kZVRleHQgPSBkZWNvZGVkVGV4dDtcclxuICAgICAgdGhpcy5jb2RlRm9ybWF0ID0gZGVjb2RlZFJlc3VsdC5yZXN1bHQuZm9ybWF0LmZvcm1hdE5hbWU7XHJcbiAgICAgIHRoaXMucXJDb2RlU2Nhbm5lci5wYXVzZSh0cnVlKTtcclxuICAgIH0sXHJcbiAgICBvblNjYW5GYWlsdXJlKGVycm9yKSB7XHJcbiAgICAgIC8vIGhhbmRsZSBzY2FuIGZhaWx1cmUsIHVzdWFsbHkgYmV0dGVyIHRvIGlnbm9yZSBhbmQga2VlcCBzY2FubmluZy5cclxuICAgICAgLy8gZm9yIGV4YW1wbGU6XHJcbiAgICAgIGNvbnNvbGUud2FybihgQ29kZSBzY2FuIGVycm9yID0gJHtlcnJvcn1gKTtcclxuICAgIH0sXHJcbiAgICBlcnJvcigpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwiQ2FtZXJhIHBlcm1pc3Npb24gaXMgbm90IHR1cm5lZCBvblwiKTtcclxuICAgIH0sXHJcbiAgICBzdWNjZXNzKHN0YXR1cykge1xyXG4gICAgICBpZiAoIXN0YXR1cy5oYXNQZXJtaXNzaW9uKSBlcnJvcigpO1xyXG4gICAgICB0aGlzLnFyQ29kZVNjYW5uZXIgPSBuZXcgSHRtbDVRcmNvZGUoXCJxci1jb2RlLXJlYWRlclwiKTtcclxuICAgICAgdGhpcy5xckNvZGVTY2FubmVyLnN0YXJ0KFxyXG4gICAgICAgIHsgZmFjaW5nTW9kZTogXCJlbnZpcm9ubWVudFwiIH0sXHJcbiAgICAgICAgeyBxcmJveDogMjUwIH0sXHJcbiAgICAgICAgdGhpcy5vblNjYW5TdWNjZXNzXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgd2F0Y2g6IHtcclxuICAgIC8vIHdoZW5ldmVyIHF1ZXN0aW9uIGNoYW5nZXMsIHRoaXMgZnVuY3Rpb24gd2lsbCBydW5cclxuICAgIHN0b3BDYW1lcmEoYWZ0ZXIsIGJlZm9yZSkge1xyXG4gICAgICBpZiAoYWZ0ZXIpIHRoaXMucXJDb2RlU2Nhbm5lci5zdG9wKHRydWUpO1xyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuLnNhdmUtYnRuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAkY3lhbi05O1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW46IDEwcHg7XHJcbn1cclxuLnNhdmUtY2FyZF9fY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbn1cclxuI3FyLWNvZGUtcmVhZGVyIHtcclxuICAvLyB3aWR0aDogMzAwcHg7XHJcbiAgLy8gaGVpZ2h0OiAzMDBweDtcclxufVxyXG48L3N0eWxlPlxyXG4iLCI8dGVtcGxhdGU+XHJcbiAgPHEtY2FyZCBjbGFzcz1cImNhcmQtY29udGFpbmVyXCIgOnN0eWxlPVwieyBiYWNrZ3JvdW5kQ29sb3I6IGNhcmRJbmZvLmNvbG9yIH1cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLW5hbWUgdGV4dC13aGl0ZVwiPnt7IGNhcmRJbmZvLm5hbWUgfX08L2Rpdj5cclxuICA8L3EtY2FyZD5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQ+XHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBuYW1lOiBcIkZpZGVsaXR5Q2FyZFwiLFxyXG4gIHByb3BzOiBbXCJjYXJkSW5mb1wiXSxcclxufTtcclxuPC9zY3JpcHQ+XHJcblxyXG48c3R5bGUgc2NvcGVkPlxyXG4uY2FyZC1uYW1lIHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBtaXgtYmxlbmQtbW9kZTogZGlmZmVyZW5jZTtcclxufVxyXG4uY2FyZC1jb250YWluZXIge1xyXG4gIGhlaWdodDogMTAwcHg7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbn1cclxuLmNvZGUtaW1nIHtcclxuICB3aWR0aDogNzBweDtcclxufVxyXG48L3N0eWxlPlxyXG4iLCI8dGVtcGxhdGU+XHJcbiAgPGRpdiBjbGFzcz1cImZpZGVsaXktcGFnZVwiPlxyXG4gICAgPGRpdiB2LWlmPVwidXNlclN0b3JlLmF1dGhVc2VyXCIgY2xhc3M9XCJmaWRlbGl0eS1wYWdlLWluZm9cIj5cclxuICAgICAgPGRpdiBzdHlsZT1cIndpZHRoOiAxMDAlXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZpZGVsaXR5LXBhZ2VfX3RpdGxlXCIgdi1pZj1cImNhcmRzLmxlbmd0aFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtaDZcIj5BbGwgY2FyZHM8L2Rpdj5cclxuICAgICAgICAgIDxxLWJ0blxyXG4gICAgICAgICAgICBjbGFzcz1cIm5ld2NhcmQtYnRuXCJcclxuICAgICAgICAgICAgQGNsaWNrPVwib3BlbkFkZE5ld0NhcmREaWFsb2dcIlxyXG4gICAgICAgICAgICBsYWJlbD1cIk5ldyBDYXJkXCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiB2LWlmPVwiY2FyZHMubGVuZ3RoXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlkZWxpdHktY2FyZHMtc3R5bGVcIj5cclxuICAgICAgICAgICAgPEZpZGVsaXR5Q2FyZFxyXG4gICAgICAgICAgICAgIHYtZm9yPVwiY2FyZCBpbiBjYXJkc1wiXHJcbiAgICAgICAgICAgICAgOmtleT1cImNhcmRcIlxyXG4gICAgICAgICAgICAgIDpjYXJkSW5mbz1cImNhcmRcIlxyXG4gICAgICAgICAgICAgIEBjbGljaz1cIm9wZW5DYXJkRGV0YWlsc0RpYWxvZyhjYXJkKVwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPEVtcHR5RGF0YVxyXG4gICAgICAgICAgdi1lbHNlXHJcbiAgICAgICAgICA6aW1hZ2U9XCJpbWFnZUNhcmRzXCJcclxuICAgICAgICAgIDp0aXRsZT1cInRpdGxlQ2FyZHNcIlxyXG4gICAgICAgICAgOm1lc3NhZ2U9XCJtZXNzYWdlQ2FyZHNcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDx0ZW1wbGF0ZSB2LXNsb3Q6YnV0dG9uPlxyXG4gICAgICAgICAgICA8cS1idG5cclxuICAgICAgICAgICAgICBjbGFzcz1cImJ0blwiXHJcbiAgICAgICAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjMjY3Mzc4OyBjb2xvcjogI2ZmZlwiXHJcbiAgICAgICAgICAgICAgbGFiZWw9XCJBZGQgY2FyZFwiXHJcbiAgICAgICAgICAgICAgQGNsaWNrPVwic2hvd05ld0NhcmREaWFsb2cgPSB0cnVlXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgPC9FbXB0eURhdGE+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8RW1wdHlTdGF0ZSB2LWVsc2UgOmltYWdlPVwiaW1hZ2VcIiA6dGl0bGU9XCJ0aXRsZVwiIDptZXNzYWdlPVwibWVzc2FnZVwiPlxyXG4gICAgPC9FbXB0eVN0YXRlPlxyXG4gIDwvZGl2PlxyXG5cclxuICA8cS1kaWFsb2cgbWF4aW1pemVkIHYtbW9kZWw9XCJzaG93RGV0YWlsZWRDYXJkRGlhbG9nXCI+XHJcbiAgICA8cS1jYXJkPlxyXG4gICAgICA8cS1jYXJkLXNlY3Rpb24gY2xhc3M9XCJyb3cgaXRlbXMtY2VudGVyIHEtcGItbm9uZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWg2XCI+Q2FyZCBEZXRhaWxzPC9kaXY+XHJcbiAgICAgICAgPHEtc3BhY2UgLz5cclxuICAgICAgICA8cS1idG4gaWNvbj1cImNsb3NlXCIgZmxhdCByb3VuZCBkZW5zZSB2LWNsb3NlLXBvcHVwIC8+XHJcbiAgICAgIDwvcS1jYXJkLXNlY3Rpb24+XHJcblxyXG4gICAgICA8cS1jYXJkLXNlY3Rpb24+XHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgOnN0eWxlPVwieyBiYWNrZ3JvdW5kQ29sb3I6IHNlbGVjdGVkQ2FyZEluZm8uY29sb3IgfVwiXHJcbiAgICAgICAgICBjbGFzcz1cImRldGFpbGVkLWNhcmQtY29udGFpbmVyXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1oNSBjYXJkLXRleHRcIj57eyBzZWxlY3RlZENhcmRJbmZvLm5hbWUgfX08L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXJjb2RlLWJhY2tncm91bmRcIj5cclxuICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgIGNsYXNzPVwiY29kZS1pbWdcIlxyXG4gICAgICAgICAgICAgIDpzcmM9XCJgaHR0cDovL2J3aXBqcy1hcGkubWV0YWZsb29yLmNvbS8/YmNpZD0ke3NlbGVjdGVkQ2FyZEluZm8uZm9ybWF0XHJcbiAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCdfJylcclxuICAgICAgICAgICAgICAgIC5qb2luKCcnKX0mdGV4dD0ke3NlbGVjdGVkQ2FyZEluZm8uY29kZX0mJHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FyZEluZm8uZm9ybWF0ID09PSAnUVJfQ09ERScgPyAnJyA6ICcmaW5jbHVkZXRleHQnXHJcbiAgICAgICAgICAgICAgfWBcIlxyXG4gICAgICAgICAgICAgIGFsdD1cIlwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cclxuICAgICAgPHEtY2FyZC1zZWN0aW9uIGNsYXNzPVwicm93IGl0ZW1zLWNlbnRlciBxLXBiLW5vbmVcIj5cclxuICAgICAgICA8cS1idG5cclxuICAgICAgICAgIGNsYXNzPVwiYnRuXCJcclxuICAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogIzI2NzM3ODsgY29sb3I6ICNmZmZcIlxyXG4gICAgICAgICAgbGFiZWw9XCJFZGl0IGNhcmRcIlxyXG4gICAgICAgICAgQGNsaWNrPVwic2hvd0VkaXRDYXJkID0gdHJ1ZVwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8cS1zcGFjZSAvPlxyXG4gICAgICAgIDxxLWJ0blxyXG4gICAgICAgICAgY2xhc3M9XCJidG5cIlxyXG4gICAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjMjY3Mzc4OyBjb2xvcjogI2ZmZlwiXHJcbiAgICAgICAgICBsYWJlbD1cIlJlbW92ZSBjYXJkXCJcclxuICAgICAgICAgIEBjbGljaz1cInNob3dEZWxldGVDYXJkID0gdHJ1ZVwiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cclxuICAgIDwvcS1jYXJkPlxyXG4gIDwvcS1kaWFsb2c+XHJcblxyXG4gIDxxLWRpYWxvZyBtYXhpbWl6ZWQgdi1tb2RlbD1cInNob3dOZXdDYXJkRGlhbG9nXCI+XHJcbiAgICA8cS1jYXJkPlxyXG4gICAgICA8cS1jYXJkLXNlY3Rpb24gY2xhc3M9XCJyb3cgaXRlbXMtY2VudGVyIHEtcGItbm9uZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWg2XCI+Q2FyZCBTY2FubmVyPC9kaXY+XHJcbiAgICAgICAgPHEtc3BhY2UgLz5cclxuICAgICAgICA8cS1idG5cclxuICAgICAgICAgIGljb249XCJjbG9zZVwiXHJcbiAgICAgICAgICBmbGF0XHJcbiAgICAgICAgICByb3VuZFxyXG4gICAgICAgICAgZGVuc2VcclxuICAgICAgICAgIHYtY2xvc2UtcG9wdXBcclxuICAgICAgICAgIEBjbGljaz1cInN0b3BDYW1lcmEgPSB0cnVlXCJcclxuICAgICAgICAvPlxyXG4gICAgICA8L3EtY2FyZC1zZWN0aW9uPlxyXG5cclxuICAgICAgPHEtY2FyZC1zZWN0aW9uPlxyXG4gICAgICAgIDxCYXJjb2RlU2Nhbm5lclxyXG4gICAgICAgICAgQGNhcmRTYXZlZFN1Y2Nlc3NmdWxseT1cIm9uQ2FyZFNhdmVkXCJcclxuICAgICAgICAgIDpzdG9wQ2FtZXJhPVwic3RvcENhbWVyYVwiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cclxuICAgIDwvcS1jYXJkPlxyXG4gIDwvcS1kaWFsb2c+XHJcblxyXG4gIDxxLWRpYWxvZyB2LW1vZGVsPVwic2hvd0RlbGV0ZUNhcmRcIiBwZXJzaXN0ZW50PlxyXG4gICAgPHEtY2FyZD5cclxuICAgICAgPHEtY2FyZC1zZWN0aW9uIGNsYXNzPVwicm93IGl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwicS1tbC1zbVwiXHJcbiAgICAgICAgICA+QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZVxyXG4gICAgICAgICAge3sgc2VsZWN0ZWRDYXJkSW5mby5uYW1lIH19IGNhcmQ/PC9zcGFuXHJcbiAgICAgICAgPlxyXG4gICAgICA8L3EtY2FyZC1zZWN0aW9uPlxyXG5cclxuICAgICAgPHEtY2FyZC1hY3Rpb25zIGFsaWduPVwicmlnaHRcIj5cclxuICAgICAgICA8cS1idG4gZmxhdCBsYWJlbD1cIkNhbmNlbFwiIGNvbG9yPVwicHJpbWFyeVwiIHYtY2xvc2UtcG9wdXAgLz5cclxuICAgICAgICA8cS1idG5cclxuICAgICAgICAgIGZsYXRcclxuICAgICAgICAgIGxhYmVsPVwiRGVsZXRlXCJcclxuICAgICAgICAgIGNvbG9yPVwicmVkXCJcclxuICAgICAgICAgIEBjbGljaz1cImRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSW5mbylcIlxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvcS1jYXJkLWFjdGlvbnM+XHJcbiAgICA8L3EtY2FyZD5cclxuICA8L3EtZGlhbG9nPlxyXG5cclxuICA8cS1kaWFsb2cgdi1tb2RlbD1cInNob3dFZGl0Q2FyZFwiIHBlcnNpc3RlbnQ+XHJcbiAgICA8cS1jYXJkIGNsYXNzPVwiZWRpdC1jYXJkX19xLWNhcmRcIj5cclxuICAgICAgPHEtY2FyZC1zZWN0aW9uIGNsYXNzPVwicm93IGl0ZW1zLWNlbnRlciBlZGl0LWNhcmRfX3EtY2FyZF9fc2VjdGlvbi0xXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJxLW1sLXNtXCI+RWRpdCB7eyBzZWxlY3RlZENhcmRJbmZvLm5hbWUgfX0gY2FyZDwvc3Bhbj5cclxuICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cclxuXHJcbiAgICAgIDxxLWNhcmQtc2VjdGlvbiBjbGFzcz1cImVkaXQtY2FyZF9fcS1jYXJkX19zZWN0aW9uLTJcIj5cclxuICAgICAgICA8cS1pbnB1dCB2LW1vZGVsPVwiY2FyZE5hbWVcIiB0eXBlPVwidGV4dFwiIGxhYmVsPVwiQ2FyZCBuYW1lXCIgLz5cclxuICAgICAgICA8cS1pbnB1dFxyXG4gICAgICAgICAgZmlsbGVkXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBpY2sgYSBjb2xvclwiXHJcbiAgICAgICAgICB2LW1vZGVsPVwiY2FyZENvbG9yXCJcclxuICAgICAgICAgIGNsYXNzPVwibXktaW5wdXRcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDx0ZW1wbGF0ZSB2LXNsb3Q6YXBwZW5kPlxyXG4gICAgICAgICAgICA8cS1pY29uIG5hbWU9XCJjb2xvcml6ZVwiIGNsYXNzPVwiY3Vyc29yLXBvaW50ZXJcIj5cclxuICAgICAgICAgICAgICA8cS1wb3B1cC1wcm94eVxyXG4gICAgICAgICAgICAgICAgY292ZXJcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tc2hvdz1cInNjYWxlXCJcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24taGlkZT1cInNjYWxlXCJcclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8cS1jb2xvciBuby1mb290ZXIgdi1tb2RlbD1cImNhcmRDb2xvclwiIC8+XHJcbiAgICAgICAgICAgICAgPC9xLXBvcHVwLXByb3h5PlxyXG4gICAgICAgICAgICA8L3EtaWNvbj5cclxuICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgPC9xLWlucHV0PlxyXG4gICAgICA8L3EtY2FyZC1zZWN0aW9uPlxyXG5cclxuICAgICAgPHEtY2FyZC1hY3Rpb25zIGFsaWduPVwicmlnaHRcIj5cclxuICAgICAgICA8cS1idG4gZmxhdCBsYWJlbD1cIkNhbmNlbFwiIGNvbG9yPVwicmVkXCIgdi1jbG9zZS1wb3B1cCAvPlxyXG4gICAgICAgIDxxLWJ0blxyXG4gICAgICAgICAgZmxhdFxyXG4gICAgICAgICAgbGFiZWw9XCJTYXZlXCJcclxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXHJcbiAgICAgICAgICBAY2xpY2s9XCJlZGl0Q2FyZChzZWxlY3RlZENhcmRJbmZvKVwiXHJcbiAgICAgICAgLz5cclxuICAgICAgPC9xLWNhcmQtYWN0aW9ucz5cclxuICAgIDwvcS1jYXJkPlxyXG4gIDwvcS1kaWFsb2c+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5pbXBvcnQgeyB1c2VVc2VyU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmVzL1VzZXJTdG9yZVwiO1xyXG5pbXBvcnQgeyB1c2VEYXNoSGVhZGVyU3RvcmUgfSBmcm9tIFwic3JjL3N0b3Jlcy9kYXNoLWhlYWRlclwiO1xyXG5pbXBvcnQgRW1wdHlTdGF0ZSBmcm9tIFwic3JjL2NvbXBvbmVudHMvY3VzdG9tZXIvRW1wdHlTdGF0ZS52dWVcIjtcclxuaW1wb3J0IEVtcHR5RGF0YSBmcm9tIFwic3JjL2NvbXBvbmVudHMvY3VzdG9tZXIvRW1wdHlEYXRhLnZ1ZVwiO1xyXG5pbXBvcnQgQmFyY29kZVNjYW5uZXIgZnJvbSBcInNyYy9jb21wb25lbnRzL2N1c3RvbWVyL0JhcmNvZGVTY2FubmVyLnZ1ZVwiO1xyXG5pbXBvcnQgRmlkZWxpdHlDYXJkIGZyb20gXCJzcmMvY29tcG9uZW50cy9jdXN0b21lci9GaWRlbGl0eUNhcmQudnVlXCI7XHJcbmltcG9ydCB1c2VRdWFzYXIgZnJvbSBcInF1YXNhci9zcmMvY29tcG9zYWJsZXMvdXNlLXF1YXNhci5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIG5hbWU6IFwiRmlkZWxpdHlQYWdlXCIsXHJcbiAgY29tcG9uZW50czoge1xyXG4gICAgRW1wdHlTdGF0ZSxcclxuICAgIEVtcHR5RGF0YSxcclxuICAgIEJhcmNvZGVTY2FubmVyLFxyXG4gICAgRmlkZWxpdHlDYXJkLFxyXG4gIH0sXHJcbiAgZGF0YSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGltYWdlOiBcIkVtcHR5U3RhdGUuc3ZnXCIsXHJcbiAgICAgIHRpdGxlOiBcIk9vb3BzISBZb3UgYXJlIG5vdCBsb2dnZWQgaW4hXCIsXHJcbiAgICAgIG1lc3NhZ2U6IFwiTG9nIGluIHRvIGFjY2VzcyB5b3VyIGNhcmRzXCIsXHJcbiAgICAgIGltYWdlQ2FyZHM6IFwiRmlkZWxpdHlDYXJkLnN2Z1wiLFxyXG4gICAgICB0aXRsZUNhcmRzOiBcIk9vb3BzISBObyBjYXJkcyB0byBzaG93IVwiLFxyXG4gICAgICBtZXNzYWdlQ2FyZHM6IFwiQWRkIHlvdXIgZmlyc3QgY2FyZC5cIixcclxuICAgICAgY2FyZHM6IFtdLFxyXG4gICAgICBzZWxlY3RlZENhcmRJbmZvOiBudWxsLFxyXG4gICAgICBzaG93TmV3Q2FyZERpYWxvZzogZmFsc2UsXHJcbiAgICAgIHNob3dEZXRhaWxlZENhcmREaWFsb2c6IGZhbHNlLFxyXG4gICAgICBzaG93RGVsZXRlQ2FyZDogZmFsc2UsXHJcbiAgICAgIHNob3dFZGl0Q2FyZDogZmFsc2UsXHJcbiAgICAgIGNhcmROYW1lOiBcIlwiLFxyXG4gICAgICBjYXJkQ29sb3I6IFwiXCIsXHJcbiAgICAgICRxOiB1c2VRdWFzYXIoKSxcclxuICAgICAgZGFzaEhlYWRlcjogdXNlRGFzaEhlYWRlclN0b3JlKCksXHJcbiAgICAgIHVzZXJTdG9yZTogdXNlVXNlclN0b3JlKCksXHJcbiAgICAgIHN0b3BDYW1lcmE6IGZhbHNlLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGFzeW5jIG1vdW50ZWQoKSB7XHJcbiAgICBjb25zdCBkYXNoSGVhZGVyID0gdXNlRGFzaEhlYWRlclN0b3JlKCk7XHJcbiAgICBkYXNoSGVhZGVyLiRwYXRjaCh7XHJcbiAgICAgIHRpdGxlOiBcIkZpZGVsaXR5IENhcmRzXCIsXHJcbiAgICAgIHNob3dCYWNrSWNvbjogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLnVzZXJTdG9yZS5hdXRoVXNlcikge1xyXG4gICAgICBhd2FpdCB0aGlzLmZldGNoRmlkZWxpdHlDYXJkcygpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgbWV0aG9kczoge1xyXG4gICAgb3BlbkFkZE5ld0NhcmREaWFsb2coKSB7XHJcbiAgICAgIHRoaXMuc3RvcENhbWVyYSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNob3dOZXdDYXJkRGlhbG9nID0gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICBvcGVuQ2FyZERldGFpbHNEaWFsb2coY2FyZCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkQ2FyZEluZm8gPSBjYXJkO1xyXG4gICAgICB0aGlzLnNob3dEZXRhaWxlZENhcmREaWFsb2cgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNhcmROYW1lID0gdGhpcy5zZWxlY3RlZENhcmRJbmZvLm5hbWU7XHJcbiAgICAgIHRoaXMuY2FyZENvbG9yID0gdGhpcy5zZWxlY3RlZENhcmRJbmZvLmNvbG9yO1xyXG4gICAgfSxcclxuICAgIGFzeW5jIGZldGNoRmlkZWxpdHlDYXJkcygpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0KFwiL2NhcmRzXCIpO1xyXG4gICAgICAgIHRoaXMuY2FyZHMgPSByZXMuZGF0YS5jYXJkcztcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdGhpcy4kcS5ub3RpZnkoe1xyXG4gICAgICAgICAgdHlwZTogXCJuZWdhdGl2ZVwiLFxyXG4gICAgICAgICAgcG9zaXRpb246IFwidG9wXCIsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nIVwiLFxyXG4gICAgICAgICAgY29sb3I6IFwibmVnYXRpdmVcIixcclxuICAgICAgICAgIHRpbWVvdXQ6IFwiMjUwMFwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgb25DYXJkU2F2ZWQoKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hGaWRlbGl0eUNhcmRzKCk7XHJcbiAgICAgIHRoaXMuc2hvd05ld0NhcmREaWFsb2cgPSBmYWxzZTtcclxuICAgICAgdGhpcy4kcS5ub3RpZnkoe1xyXG4gICAgICAgIHR5cGU6IFwicG9zaXRpdmVcIixcclxuICAgICAgICBwb3NpdGlvbjogXCJ0b3BcIixcclxuICAgICAgICBtZXNzYWdlOiBcIkNhcmQgc2F2ZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgICAgY29sb3I6IFwicG9zaXRpdmVcIixcclxuICAgICAgICB0aW1lb3V0OiBcIjI1MDBcIixcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgZWRpdENhcmQoKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuY2FyZE5hbWUsXHJcbiAgICAgICAgICBjb2xvcjogdGhpcy5jYXJkQ29sb3IsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhcGkucGF0Y2goXHJcbiAgICAgICAgICBgY2FyZHMvcGF0Y2gtY2FyZC8ke3RoaXMuc2VsZWN0ZWRDYXJkSW5mby5faWR9YCxcclxuICAgICAgICAgIGRhdGFcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoRmlkZWxpdHlDYXJkcygpO1xyXG4gICAgICAgICAgdGhpcy5zaG93RWRpdENhcmQgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMuc2hvd0RldGFpbGVkQ2FyZERpYWxvZyA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy4kcS5ub3RpZnkoe1xyXG4gICAgICAgICAgICB0eXBlOiBcInBvc2l0aXZlXCIsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcFwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZpZGVsaXR5IENhcmQgZWRpdGVkXCIsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcInBvc2l0aXZlXCIsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IFwiMjUwMFwiLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0aGlzLiRxLm5vdGlmeSh7XHJcbiAgICAgICAgICB0eXBlOiBcInBvc2l0aXZlXCIsXHJcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3BcIixcclxuICAgICAgICAgIG1lc3NhZ2U6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmchXCIsXHJcbiAgICAgICAgICBjb2xvcjogXCJwb3NpdGl2ZVwiLFxyXG4gICAgICAgICAgdGltZW91dDogXCIyNTAwXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhc3luYyBkZWxldGVDYXJkKHNlbGVjdGVkQ2FyZEluZm8pIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRhcGkuZGVsZXRlKFxyXG4gICAgICAgICAgYGNhcmRzL2RlbGV0ZS1jYXJkLyR7c2VsZWN0ZWRDYXJkSW5mby5faWR9YFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hGaWRlbGl0eUNhcmRzKCk7XHJcbiAgICAgICAgICB0aGlzLnNob3dEZWxldGVDYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLnNob3dEZXRhaWxlZENhcmREaWFsb2cgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHtcclxuICAgICAgICAgICAgdHlwZTogXCJwb3NpdGl2ZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3BcIixcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJGaWRlbGl0eSBDYXJkIGRlbGV0ZWRcIixcclxuICAgICAgICAgICAgY29sb3I6IFwicG9zaXRpdmVcIixcclxuICAgICAgICAgICAgdGltZW91dDogXCIyNTAwXCIsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRoaXMuJHEubm90aWZ5KHtcclxuICAgICAgICAgIHR5cGU6IFwicG9zaXRpdmVcIixcclxuICAgICAgICAgIHBvc2l0aW9uOiBcInRvcFwiLFxyXG4gICAgICAgICAgbWVzc2FnZTogXCJTb21ldGhpbmcgd2VudCB3cm9uZyFcIixcclxuICAgICAgICAgIGNvbG9yOiBcInBvc2l0aXZlXCIsXHJcbiAgICAgICAgICB0aW1lb3V0OiBcIjI1MDBcIixcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9LFxyXG59O1xyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuLmZpZGVsaXR5LXBhZ2UtaW5mbyB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDAgMTZweDtcclxufVxyXG4ucS1pbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAzMDBweDtcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG59XHJcbi5maWRlbGl0eS1wYWdlX190aXRsZSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG4uZmlkZWxpdHktY2FyZHMtc3R5bGUge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ2FwOiA1cHg7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xyXG59XHJcbi5uZXdjYXJkLWJ0biB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogJGN5YW4tOTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgbWFyZ2luOiAxMHB4O1xyXG59XHJcbi5pbGx1c3RyYXRpb24ge1xyXG4gIGhlaWdodDogNDB2aDtcclxuICBwYWRkaW5nLXRvcDogNTBweDtcclxuICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoI2JiZWFlYywgI2VlZWVlZSA3NSUpO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG4uYmFyY29kZS1iYWNrZ3JvdW5kIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBwYWRkaW5nOiAyNXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBnYXA6IDIwcHg7XHJcbn1cclxuLmRldGFpbGVkLWNhcmQtY29udGFpbmVyIHtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG4uY2FyZC10ZXh0IHtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMjVweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbWl4LWJsZW5kLW1vZGU6IGRpZmZlcmVuY2U7XHJcbn1cclxuLmVkaXQtY2FyZF9fcS1jYXJkIHtcclxuICAucS1pbnB1dCB7XHJcbiAgICBtYXJnaW4tdG9wOiA4cHg7XHJcbiAgfVxyXG59XHJcbi5lZGl0LWNhcmRfX3EtY2FyZF9fc2VjdGlvbi0xIHtcclxuICBwYWRkaW5nLWJvdHRvbTogMHB4O1xyXG59XHJcbi5lZGl0LWNhcmRfX3EtY2FyZF9fc2VjdGlvbi0yIHtcclxuICBwYWRkaW5nLXRvcDogMHB4O1xyXG59XHJcbjwvc3R5bGU+XHJcbiJdLCJuYW1lcyI6WyJoIiwibW9kZWwiLCJ2IiwiSHRtbDVRcmNvZGVTdXBwb3J0ZWRGb3JtYXRzIiwiRGVjb2RlZFRleHRUeXBlIiwiSHRtbDVRcmNvZGVTY2FuVHlwZSIsIkh0bWw1UXJjb2RlQ29uc3RhbnRzIiwiUXJjb2RlUmVzdWx0Rm9ybWF0IiwiSHRtbDVRcmNvZGVSZXN1bHRGYWN0b3J5IiwiSHRtbDVRcmNvZGVFcnJvclR5cGVzIiwiSHRtbDVRcmNvZGVFcnJvckZhY3RvcnkiLCJlcnJvciIsIkJhc2VMb2dnZ2VyIiwiSHRtbDVRcmNvZGVTdHJpbmdzIiwiVmlkZW9Db25zdHJhaW50c1V0aWwiLCJ0aGlzIiwiZXhwb3J0cyIsImlzTnVsbE9yVW5kZWZpbmVkIiwiX19leHRlbmRzIiwiQ3VzdG9tRXJyb3IiLCJEZWNvZGVIaW50VHlwZSIsIkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMiLCJsb2NhbEx1bWluYW5jZXMiLCJfX2F3YWl0ZXIiLCJnbG9iYWwiLCJCYXJjb2RlRm9ybWF0IiwiUmVzdWx0TWV0YWRhdGFUeXBlIiwiVGFibGUiLCJjeCIsImN5IiwicmVzdWx0UG9pbnQiLCJudW1lcmljIiwic3RvcCIsInZhbHVlIiwiTW9kZSIsIkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzIiwiRGF0YU1hc2tWYWx1ZXMiLCJNb2RlVmFsdWVzIiwiY29sdW1uIiwiRW5jb2RlSGludFR5cGUiLCJTSElGVF9UQUJMRSIsIkNIQVJfTUFQIiwiYWRkIiwiWlhpbmdIdG1sNVFyY29kZURlY29kZXIiLCJaWGluZy5CYXJjb2RlRm9ybWF0IiwiWlhpbmcuRGVjb2RlSGludFR5cGUiLCJaWGluZy5NdWx0aUZvcm1hdFJlYWRlciIsIlpYaW5nLkhUTUxDYW52YXNFbGVtZW50THVtaW5hbmNlU291cmNlIiwiWlhpbmcuQmluYXJ5Qml0bWFwIiwiWlhpbmcuSHlicmlkQmluYXJpemVyIiwiX19nZW5lcmF0b3IiLCJCYXJjb2RlRGV0ZWN0b3JEZWxlZ2F0ZSIsIkh0bWw1UXJjb2RlU2hpbSIsImQiLCJiIiwiQWJzdHJhY3RDYW1lcmFDYXBhYmlsaXR5IiwiQWJzdHJhY3RSYW5nZUNhbWVyYUNhcGFiaWxpdHkiLCJab29tRmVhdHVyZUltcGwiLCJUb3JjaEZlYXR1cmVJbXBsIiwiQ2FtZXJhQ2FwYWJpbGl0aWVzSW1wbCIsIlJlbmRlcmVkQ2FtZXJhSW1wbCIsIkNhbWVyYUltcGwiLCJDYW1lcmFGYWN0b3J5IiwiQ2FtZXJhUmV0cmlldmVyIiwiX2kiLCJIdG1sNVFyY29kZVNjYW5uZXJTdGF0ZSIsIlN0YXRlTWFuYWdlckltcGwiLCJTdGF0ZU1hbmFnZXJQcm94eSIsIlN0YXRlTWFuYWdlckZhY3RvcnkiLCJDb25zdGFudHMiLCJJbnRlcm5hbEh0bWw1UXJjb2RlQ29uZmlnIiwiSHRtbDVRcmNvZGUiLCJIdG1sNVFyY29kZVNjYW5uZXJTdGF0dXMiLCJfc2ZjX21haW4iLCJfaG9pc3RlZF8xIiwiX3dpdGhTY29wZUlkIiwiX2NyZWF0ZUVsZW1lbnRWTm9kZSIsIl9ob2lzdGVkXzMiLCJfY3JlYXRlRWxlbWVudEJsb2NrIiwiX2hvaXN0ZWRfMiIsIl90b0Rpc3BsYXlTdHJpbmciLCJfY3JlYXRlVk5vZGUiLCJfY3JlYXRlQmxvY2siLCJfbm9ybWFsaXplU3R5bGUiLCJfb3BlbkJsb2NrIiwiX0ZyYWdtZW50IiwiX3JlbmRlckxpc3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFNLFNBQVM7QUFFUixTQUFTLFNBQVUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFDLEdBQUk7QUFDeEMsUUFBTSxRQUFRLE1BQU07QUFFcEIsTUFBSSxLQUFLLE1BQU0sQ0FBQztBQUNoQixNQUFJLEtBQUssTUFBTSxDQUFDO0FBQ2hCLE1BQUksS0FBSyxNQUFNLENBQUM7QUFFaEIsTUFDRSxJQUFJLE9BQ0QsSUFBSSxPQUNKLElBQUksT0FDSCxTQUFTLElBQUksS0FDakI7QUFDQSxVQUFNLElBQUksVUFBVSw2REFBNkQ7QUFBQSxFQUNsRjtBQUVELE1BQUksU0FDQyxLQUFLLE1BQU0sTUFBTSxJQUFJLEdBQUcsSUFBSSxLQUFLLEdBQUcsU0FBUyxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQ3pEO0FBRUosU0FBTyxPQUFRLElBQUksS0FBSyxJQUFJLEtBQUssS0FBTSxLQUFLLElBQUksU0FBUyxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUk7QUFDMUU7QUFFTyxTQUFTLFlBQWEsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFDLEdBQUk7QUFDM0MsU0FBTyxNQUFPLE1BQU0sU0FBUyxN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QSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFXO0FBQUEsTUFBVztBQUFBLE1BQVc7QUFBQSxJQUMzRjtBQUNJLFlBQVEsY0FBYztBQUFBLE1BQ2xCO0FBQUEsTUFBVztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUMzRjtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFXO0FBQUEsTUFBVztBQUFBLE1BQVc7QUFBQSxJQUMzRjtBQUNJLFlBQVEsY0FBYztBQUFBLE1BR2xCO0FBQUEsTUFBVztBQUFBLE1BQUs7QUFBQSxNQUFPO0FBQUEsTUFBTztBQUFBLE1BQU87QUFBQSxNQUFPO0FBQUEsTUFBTztBQUFBLE1BQU87QUFBQSxNQUFPO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUM3RTtBQUFBLE1BQVE7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQVE7QUFBQSxNQUFRO0FBQUEsTUFBUTtBQUFBLE1BQVE7QUFBQSxNQUFRO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDNUU7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFTO0FBQUEsTUFBVztBQUFBLE1BQVc7QUFBQSxNQUFXO0FBQUEsSUFDakU7QUFDSSxZQUFRLGNBQWM7QUFBQSxNQUNsQjtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBUTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFL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QUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ2xDLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUNsQyxXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDbEMsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdB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T0FBTyxZQUFZLGlCQUFpQixFQUFFO0FBQUEsTUFDdkMsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxZQUFZLGlCQUFpQixFQUFFO0FBQUEsTUFDdkMsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLElBQ2pCO0FBQ0ksZ0JBQVkscUNBQXFDO0FBQUEsTUFFN0MsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNULENBQUMsT0FBTyxDQUFDO0FBQUEsTUFDVCxDQUFDLE9BQU8sQ0FBQztBQUFBLE1BQ1QsQ0FBQyxPQUFPLENBQUM7QUFBQSxNQUNU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QUNyQyxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJLEtBQUssRUFBRTtBQUFBLE1BQ25DLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxHQUFHO0FBQUEsTUFDcEMsQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLEdBQUcsSUFBSSxJQUFJLEdBQUc7QUFBQSxNQUNuQyxDQUFDLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksRUFBRTtBQUFBLE1BQ2xDLENBQUMsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHO0FBQUEsTUFDbkMsQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEdBQUc7QUFBQSxNQUN0QyxDQUFDLElBQUksSUFBSSxJQUFJLEtBQUssSUFBSSxLQUFLLEtBQUssR0FBRztBQUFBLE1BQ25DLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxHQUFHO0FBQUEsTUFDdEMsQ0FBQyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUc7QUFBQSxNQUNqQyxDQUFDLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssR0FBRztBQUFBLE1BQ3ZDLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxHQUFHO0FBQUEsTUFDdEMsQ0FBQyxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEdBQUc7QUFBQSxNQUNwQyxDQUFDLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQztBQUFBLE1BQ2pDLENBQUMsR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEtBQUssS0FBSyxFQUFFO0FBQUEsTUFDakMsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLEdBQUc7QUFBQSxNQUNuQyxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLEtBQUssR0FBRztBQUFBLE1BQ2xD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LENBQUM7QUFBQSxVQUMvRCxJQUFJLFFBQVEsR0FBRyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsVUFDL0QsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLFVBQ2hFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxVQUNoRSxJQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsVUFDakUsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFVBQ2pFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxVQUNqRSxJQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsVUFDakUsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFVBQ2pFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxVQUNoRSxJQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsVUFDakUsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFVBQ2pFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxVQUNqRSxJQUFJLFFBQVEsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsVUFDbkUsSUFBSSxRQUFRLElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFVBQ25FLElBQUksUUFBUSxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxVQUNuRSxJQUFJLFFBQVEsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLFVBQ3BGLElBQUksUUFBUSxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksSUFBSSxTQUFTLEdBQUcsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFBQSxVQUM1RCxJQUFJLFFBQVEsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsVUFDOUQsSUFBSSxRQUFRLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLFVBQ2hFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJ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TUFBSztBQUFBLE1BQ2xFO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsSUFDckU7QUFLSSwyQkFBdUIsdUJBQXVCO0FBQUEsTUFDMUM7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDakU7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDakU7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLElBQy9EO0FBRUksMkJBQXVCLHdCQUF3Qix1QkFBdUI7QUFDdEUsMkJBQXVCLHdCQUF3QjtBQUFBLE1BQzNDO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUN0RTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUssT0FBTyxhQUFhLEdBQUc7QUFBQSxJQUMvRztBQXVCSSxVQUFNLFVBQVU7QUFBQSxNQUNaLGNBQWM7QUFDVixhQUFLLFlBQVksSUFBSSxtQkFBbUIsVUFBVSxxQkFBcUI7QUFBQSxNQUMxRTtBQUFBLE1BVUQsT0FBTyxNQUFNO0FBRVQsY0FBTSxTQUFTLElBQUksZ0JBQWdCLElBQUk7QUFDdkMsY0FBTSxVQUFVLE9BQU87QUFFdkIsY0FBTSxZQUFZLE9BQU87QUFFekIsY0FBTSxhQUFhLFVBQVUsY0FBYyxXQUFXLE9BQU87QUFFN0QsWUFBSSxhQUFhO0FBQ2pCLGlCQUFTLE1BQU0sWUFBWTtBQUN2Qix3QkFBYyxHQUFHO1FBQ3BCO0FBQ0QsY0FBTSxjQUFjLElBQUksV0FBVyxVQUFVO0FBQzdDLGNBQU0sa0JBQWtCLFdBQVc7QUFFbkMsaUJBQVMsSUFBSSxHQUFHLElBQUksaUJBQWlCLEtBQUs7QUFDdEMsZ0JBQU0sWUFBWSxXQUFXO0FBQzdCLGdCQUFNLGdCQUFnQixVQUFVO0FBQ2hDLGdCQUFNLG1CQUFtQixVQUFVO0FBQ25DLGVBQUssY0FBYyxlQUFlLGdCQUFnQjtBQUNsRCxtQkFBUyxJQUFJLEdBQUcsSUFBSSxrQkFBa0IsS0FBSztBQUV2Qyx3QkFBWSxJQUFJLGtCQUFrQixLQUFLLGNBQWM7QUFBQSxVQUN4RDtBQUFBLFFBQ0o7QUFFRCxlQUFPLHVCQUF1QixPQUFPLFdBQVc7QUFBQSxNQUNuRDtBQUFBLE1BU0QsY0FBYyxlQUFlLGtCQUFrQjtBQUczQyxjQUFNLGdCQUFnQixJQUFJLFdBQVcsYUFBYTtBQUlsRCxZQUFJO0FBQ0EsZUFBSyxVQUFVLE9BQU8sZUFBZSxjQUFjLFNBQVMsZ0JBQWdCO0FBQUEsUUFDL0UsU0FDTSxTQUFQO0FBQ0ksZ0JBQU0sSUFBSSxrQkFBaUI7QUFBQSxRQUM5QjtBQUdELGlCQUFTLElBQUksR0FBRyxJQUFJLGtCQUFrQixLQUFLO0FBQ3ZDLHdCQUFjLEtBQUssY0FBYztBQUFBLFFBQ3BDO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFRRCxVQUFNLFdBQVc7QUFBQSxNQUNiLFlBQVksT0FBTztBQUNmLGFBQUssUUFBUTtBQUNiLGFBQUssb0JBQW9CLElBQUksdUJBQXVCLEtBQUssS0FBSztBQUFBLE1BQ2pFO0FBQUEsTUFPRCxTQUFTO0FBQ0wsY0FBTSxlQUFlLEtBQUssa0JBQWtCLE9BQU07QUFDbEQsWUFBSSxTQUFTLEtBQUssYUFBYSxZQUFZO0FBQzNDLGlCQUFTLEtBQUssYUFBYSxNQUFNO0FBQ2pDLGVBQU8sS0FBSyxLQUFLLGdCQUFnQixNQUFNO0FBQ3ZDLFlBQUksQ0FBQyxPQUFPLElBQUk7QUFDWixnQkFBTSxJQUFJLGtCQUFpQjtBQUFBLFFBQzlCO0FBQ0QsaUJBQVMsS0FBSyxvQkFBb0IsTUFBTTtBQUN4QyxjQUFNLFVBQVUsT0FBTztBQUN2QixjQUFNLGFBQWEsT0FBTztBQUMxQixjQUFNLGNBQWMsT0FBTztBQUMzQixjQUFNLFdBQVcsT0FBTztBQUN4QixZQUFJLGVBQWUsS0FBSyxtQkFBbUIsU0FBUyxRQUFRLElBQUk7QUFDaEUsWUFBSSxpQkFBaUIsS0FBSyxtQkFBbUIsYUFBYSxRQUFRLElBQUk7QUFDdEUsYUFBSyxlQUFlLE9BQVUsR0FBRztBQUM3QiwwQkFBZ0I7QUFBQSxRQUNuQjtBQUNELGFBQUssaUJBQWlCLE9BQVUsR0FBRztBQUMvQiw0QkFBa0I7QUFBQSxRQUNyQjtBQUNELFlBQUksSUFBSSxlQUFlLElBQUksa0JBQWtCLElBQUksaUJBQWlCLElBQUksY0FBYztBQUVoRix5QkFBZSxpQkFBaUIsS0FBSyxJQUFJLGNBQWMsY0FBYztBQUFBLFFBQ3hFO0FBQ0QsWUFBSSxPQUFPLFdBQVcsV0FBVyxLQUFLLE9BQU8sU0FBUyxZQUFZLGFBQWEsVUFBVSxjQUFjLGNBQWM7QUFDckgsZUFBTyxJQUFJLGVBQWUsTUFBTSxDQUFDLFNBQVMsWUFBWSxhQUFhLFFBQVEsQ0FBQztBQUFBLE1BQy9FO0FBQUEsTUFDRCxPQUFPLFdBQVcsT0FBTyxJQUFJLEtBQUs7QUFDOUIsWUFBSSxLQUFLLEdBQUcsS0FBTSxJQUFHLE1BQU0sS0FBTSxNQUFLLE1BQU07QUFDNUMsWUFBSSxLQUFLLEdBQUcsS0FBTSxJQUFHLE1BQU0sS0FBTSxNQUFLLE1BQU07QUFDNUMsZUFBTyxJQUFJLFlBQVksTUFBTSxLQUFNLElBQUcsR0FBRyxNQUFNLFNBQVMsQ0FBQztBQUFBLE1BQzVEO0FBQUEsTUFDRCxPQUFPLFNBQVMsT0FBTyxPQUFPLE9BQU87QUFDakMsWUFBSSxJQUFJLE1BQU07QUFDZCxZQUFJLElBQUksTUFBTTtBQUNkLFlBQUksSUFBSSxPQUFPO0FBQ1gsZUFBSztBQUFBLFFBQ1IsT0FDSTtBQUNELGVBQUs7QUFBQSxRQUNSO0FBQ0QsWUFBSSxJQUFJLE9BQU87QUFDWCxlQUFLO0FBQUEsUUFDUixPQUNJO0FBQ0QsZUFBSztBQUFBLFFBQ1I7QUFDRCxlQUFPLElBQUksWUFBWSxHQUFHLENBQUM7QUFBQSxNQUM5QjtBQUFBLE1BSUQsYUFBYSxjQUFjO0FBR3ZCLFlBQUksU0FBUyxhQUFhO0FBQzFCLFlBQUksU0FBUyxhQUFhO0FBQzFCLFlBQUksU0FBUyxhQUFhO0FBQzFCLFlBQUksU0FBUyxhQUFhO0FBQzFCLFlBQUksT0FBTyxLQUFLLG1CQUFtQixRQUFRLE1BQU07QUFDakQsWUFBSSxPQUFPLEtBQUssbUJBQW1CLFFBQVEsTUFBTTtBQUNqRCxZQUFJLE9BQU8sS0FBSyxtQkFBbUIsUUFBUSxNQUFNO0FBQ2pELFlBQUksT0FBTyxLQUFLLG1CQUFtQixRQUFRLE1BQU07QUFJakQsWUFBSSxNQUFNO0FBQ1YsWUFBSSxTQUFTLENBQUMsUUFBUSxRQUFRLFFBQVEsTUFBTTtBQUM1QyxZQUFJLE1BQU0sTUFBTTtBQUNaLGdCQUFNO0FBQ04saUJBQU8sS0FBSztBQUNaLGlCQUFPLEtBQUs7QUFDWixpQkFBTyxLQUFLO0FBQ1osaUJBQU8sS0FBSztBQUFBLFFBQ2Y7QUFDRCxZQUFJLE1BQU0sTUFBTTtBQUNaLGdCQUFNO0FBQ04saUJBQU8sS0FBSztBQUNaLGlCQUFPLEtBQUs7QUFDWixpQkFBTyxLQUFLO0FBQ1osaUJBQU8sS0FBSztBQUFBLFFBQ2Y7QUFDRCxZQUFJLE1BQU0sTUFBTTtBQUNaLGlCQUFPLEtBQUs7QUFDWixpQkFBTyxLQUFLO0FBQ1osaUJBQU8sS0FBSztBQUNaLGlCQUFPLEtBQUs7QUFBQSxRQUNmO0FBQ0QsZUFBTztBQUFBLE1BQ1Y7QUFBQSxNQUlELGFBQWEsUUFBUTtBQUlqQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUdwQixZQUFJLEtBQUssS0FBSyxtQkFBbUIsUUFBUSxNQUFNO0FBQy9DLFlBQUksVUFBVSxXQUFXLFdBQVcsUUFBUSxTQUFTLEtBQUssS0FBSyxDQUFDO0FBQ2hFLFlBQUksVUFBVSxXQUFXLFdBQVcsUUFBUSxTQUFTLEtBQUssS0FBSyxDQUFDO0FBQ2hFLFlBQUksT0FBTyxLQUFLLG1CQUFtQixTQUFTLE1BQU07QUFDbEQsWUFBSSxPQUFPLEtBQUssbUJBQW1CLFNBQVMsTUFBTTtBQUlsRCxZQUFJLE9BQU8sTUFBTTtBQUViLGlCQUFPLEtBQUs7QUFDWixpQkFBTyxLQUFLO0FBQ1osaUJBQU8sS0FBSztBQUNaLGlCQUFPLEtBQUs7QUFBQSxRQUNmLE9BQ0k7QUFFRCxpQkFBTyxLQUFLO0FBQ1osaUJBQU8sS0FBSztBQUNaLGlCQUFPLEtBQUs7QUFDWixpQkFBTyxLQUFLO0FBQUEsUUFDZjtBQUNELGVBQU87QUFBQSxNQUNWO0FBQUEsTUFJRCxnQkFBZ0IsUUFBUTtBQUlwQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUNwQixZQUFJLFNBQVMsT0FBTztBQUVwQixZQUFJLFFBQVEsS0FBSyxtQkFBbUIsUUFBUSxNQUFNO0FBQ2xELFlBQUksVUFBVSxLQUFLLG1CQUFtQixRQUFRLE1BQU07QUFDcEQsWUFBSSxVQUFVLFdBQVcsV0FBVyxRQUFRLFNBQVMsVUFBVSxLQUFLLENBQUM7QUFDckUsWUFBSSxVQUFVLFdBQVcsV0FBVyxRQUFRLFNBQVMsUUFBUSxLQUFLLENBQUM7QUFDbkUsZ0JBQVEsS0FBSyxtQkFBbUIsU0FBUyxNQUFNO0FBQy9DLGtCQUFVLEtBQUssbUJBQW1CLFNBQVMsTUFBTTtBQUNqRCxZQUFJLGFBQWEsSUFBSSxZQUFZLE9BQU8sS0FBTSxLQUFJLE9BQU8sS0FBTSxJQUFHLE9BQU8sS0FBTSxNQUFLLFFBQVEsSUFBSSxPQUFPLFVBQVUsT0FBTyxLQUFJLElBQUssT0FBTyxLQUFNLE1BQUssUUFBUSxFQUFFO0FBQzdKLFlBQUksYUFBYSxJQUFJLFlBQVksT0FBTyxLQUFNLEtBQUksT0FBTyxLQUFNLElBQUcsT0FBTyxLQUFNLE1BQUssVUFBVSxJQUFJLE9BQU8sVUFBVSxPQUFPLEtBQUksSUFBSyxPQUFPLEtBQU0sTUFBSyxVQUFVLEVBQUU7QUFDakssWUFBSSxDQUFDLEtBQUssUUFBUSxVQUFVLEdBQUc7QUFDM0IsY0FBSSxLQUFLLFFBQVEsVUFBVSxHQUFHO0FBQzFCLG1CQUFPO0FBQUEsVUFDVjtBQUNELGlCQUFPO0FBQUEsUUFDVjtBQUNELFlBQUksQ0FBQyxLQUFLLFFBQVEsVUFBVSxHQUFHO0FBQzNCLGlCQUFPO0FBQUEsUUFDVjtBQUNELFlBQUksUUFBUSxLQUFLLG1CQUFtQixTQUFTLFVBQVUsSUFBSSxLQUFLLG1CQUFtQixTQUFTLFVBQVU7QUFDdEcsWUFBSSxRQUFRLEtBQUssbUJBQW1CLFNBQVMsVUFBVSxJQUFJLEtBQUssbUJBQW1CLFNBQVMsVUFBVTtBQUN0RyxZQUFJLFFBQVEsT0FBTztBQUNmLGlCQUFPO0FBQUEsUUFDVixPQUNJO0FBQ0QsaUJBQU87QUFBQSxRQUNWO0FBQUEsTUFDSjtBQUFBLE1BSUQsb0JBQW9CLFFBQVE7QUFJeEIsWUFBSSxTQUFTLE9BQU87QUFDcEIsWUFBSSxTQUFTLE9BQU87QUFDcEIsWUFBSSxTQUFTLE9BQU87QUFDcEIsWUFBSSxTQUFTLE9BQU87QUFFcEIsWUFBSSxPQUFPLEtBQUssbUJBQW1CLFFBQVEsTUFBTSxJQUFJO0FBQ3JELFlBQUksT0FBTyxLQUFLLG1CQUFtQixRQUFRLE1BQU0sSUFBSTtBQUVyRCxZQUFJLFVBQVUsV0FBVyxXQUFXLFFBQVEsUUFBUSxPQUFPLENBQUM7QUFDNUQsWUFBSSxVQUFVLFdBQVcsV0FBVyxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBRTVELGVBQU8sS0FBSyxtQkFBbUIsU0FBUyxNQUFNLElBQUk7QUFDbEQsZUFBTyxLQUFLLG1CQUFtQixTQUFTLE1BQU0sSUFBSTtBQUNsRCxhQUFLLE9BQU8sT0FBVSxHQUFHO0FBQ3JCLGtCQUFRO0FBQUEsUUFDWDtBQUNELGFBQUssT0FBTyxPQUFVLEdBQUc7QUFDckIsa0JBQVE7QUFBQSxRQUNYO0FBR0QsWUFBSSxXQUFXLE9BQU8sS0FBSSxJQUFLLE9BQU8sU0FBUyxPQUFPLEtBQU0sSUFBRyxPQUFPLEtBQUksS0FBTTtBQUNoRixZQUFJLFdBQVcsT0FBTyxLQUFJLElBQUssT0FBTyxTQUFTLE9BQU8sS0FBTSxJQUFHLE9BQU8sS0FBSSxLQUFNO0FBQ2hGLGlCQUFTLFdBQVcsU0FBUyxRQUFRLFNBQVMsT0FBTztBQUNyRCxpQkFBUyxXQUFXLFNBQVMsUUFBUSxTQUFTLE9BQU87QUFDckQsaUJBQVMsV0FBVyxTQUFTLFFBQVEsU0FBUyxPQUFPO0FBQ3JELGlCQUFTLFdBQVcsU0FBUyxRQUFRLFNBQVMsT0FBTztBQUNyRCxZQUFJO0FBQ0osWUFBSTtBQUVKLGtCQUFVLFdBQVcsV0FBVyxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBQ3hELGtCQUFVLFdBQVcsV0FBVyxTQUFTLFFBQVEsT0FBTyxDQUFDO0FBQ3pELGtCQUFVLFdBQVcsV0FBVyxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBQ3hELGtCQUFVLFdBQVcsV0FBVyxTQUFTLFFBQVEsT0FBTyxDQUFDO0FBQ3pELGtCQUFVLFdBQVcsV0FBVyxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBQ3hELGtCQUFVLFdBQVcsV0FBVyxTQUFTLFFBQVEsT0FBTyxDQUFDO0FBQ3pELGtCQUFVLFdBQVcsV0FBVyxRQUFRLFFBQVEsT0FBTyxDQUFDO0FBQ3hELGtCQUFVLFdBQVcsV0FBVyxTQUFTLFFBQVEsT0FBTyxDQUFDO0FBQ3pELGVBQU8sQ0FBQyxTQUFTLFNBQVMsU0FBUyxPQUFPO0FBQUEsTUFDN0M7QUFBQSxNQUNELFFBQVEsR0FBRztBQUNQLGVBQU8sRUFBRSxLQUFJLEtBQU0sS0FBSyxFQUFFLEtBQU0sSUFBRyxLQUFLLE1BQU0sU0FBUSxLQUFNLEVBQUUsS0FBSSxJQUFLLEtBQUssRUFBRSxLQUFJLElBQUssS0FBSyxNQUFNO01BQ3JHO0FBQUEsTUFDRCxPQUFPLFdBQVcsT0FBTyxTQUFTLFlBQVksYUFBYSxVQUFVLFlBQVksWUFBWTtBQUN6RixjQUFNLFVBQVUsb0JBQW9CO0FBQ3BDLGVBQU8sUUFBUSxXQUFXLE9BQU8sWUFBWSxZQUFZLEtBQUssS0FBSyxhQUFhLEtBQUssS0FBSyxhQUFhLEtBQUssYUFBYSxLQUFLLEtBQUssYUFBYSxLQUFLLFFBQVEsS0FBSSxHQUFJLFFBQVEsS0FBSSxHQUFJLFNBQVMsS0FBSSxHQUFJLFNBQVMsS0FBSSxHQUFJLFlBQVksS0FBSSxHQUFJLFlBQVksS0FBSSxHQUFJLFdBQVcsS0FBSSxHQUFJLFdBQVcsS0FBSSxDQUFFO0FBQUEsTUFDdFM7QUFBQSxNQUlELG1CQUFtQixNQUFNLElBQUk7QUFFekIsWUFBSSxRQUFRLEtBQUssTUFBTSxLQUFLLEtBQU0sQ0FBQTtBQUNsQyxZQUFJLFFBQVEsS0FBSyxNQUFNLEtBQUssS0FBTSxDQUFBO0FBQ2xDLFlBQUksTUFBTSxLQUFLLE1BQU0sR0FBRyxLQUFNLENBQUE7QUFDOUIsWUFBSSxNQUFNLEtBQUssTUFBTSxHQUFHLEtBQU0sQ0FBQTtBQUM5QixZQUFJLFFBQVEsS0FBSyxJQUFJLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxNQUFNLEtBQUs7QUFDeEQsWUFBSSxPQUFPO0FBQ1AsY0FBSSxPQUFPO0FBQ1gsa0JBQVE7QUFDUixrQkFBUTtBQUNSLGlCQUFPO0FBQ1AsZ0JBQU07QUFDTixnQkFBTTtBQUFBLFFBQ1Q7QUFDRCxZQUFJLEtBQUssS0FBSyxJQUFJLE1BQU0sS0FBSztBQUM3QixZQUFJLEtBQUssS0FBSyxJQUFJLE1BQU0sS0FBSztBQUM3QixZQUFJdkIsU0FBUSxDQUFDLEtBQUs7QUFDbEIsWUFBSSxRQUFRLFFBQVEsTUFBTSxJQUFJO0FBQzlCLFlBQUksUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUM5QixZQUFJLGNBQWM7QUFDbEIsWUFBSSxVQUFVLEtBQUssTUFBTSxJQUFJLFFBQVEsUUFBUSxPQUFPLFFBQVEsUUFBUSxLQUFLO0FBQ3pFLGlCQUFTLElBQUksT0FBTyxJQUFJLE9BQU8sTUFBTSxLQUFLLEtBQUssT0FBTztBQUNsRCxjQUFJLFVBQVUsS0FBSyxNQUFNLElBQUksUUFBUSxJQUFJLEdBQUcsUUFBUSxJQUFJLENBQUM7QUFDekQsY0FBSSxZQUFZLFNBQVM7QUFDckI7QUFDQSxzQkFBVTtBQUFBLFVBQ2I7QUFDRCxVQUFBQSxVQUFTO0FBQ1QsY0FBSUEsU0FBUSxHQUFHO0FBQ1gsZ0JBQUksTUFBTSxLQUFLO0FBQ1g7QUFBQSxZQUNIO0FBQ0QsaUJBQUs7QUFDTCxZQUFBQSxVQUFTO0FBQUEsVUFDWjtBQUFBLFFBQ0o7QUFDRCxlQUFPO0FBQUEsTUFDVjtBQUFBLElBQ0o7QUFzQkQsVUFBTSxpQkFBaUI7QUFBQSxNQUNuQixjQUFjO0FBQ1YsYUFBSyxVQUFVLElBQUk7TUFDdEI7QUFBQSxNQWNELE9BQU8sT0FBTyxRQUFRLE1BQU07QUFDeEIsWUFBSTtBQUNKLFlBQUk7QUFDSixZQUFJLFNBQVMsUUFBUSxNQUFNLElBQUksaUJBQWlCLFlBQVksR0FBRztBQUMzRCxnQkFBTSxPQUFPLGlCQUFpQixnQkFBZ0IsTUFBTSxlQUFnQixDQUFBO0FBQ3BFLDBCQUFnQixLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3hDLG1CQUFTLGlCQUFpQjtBQUFBLFFBQzdCLE9BQ0k7QUFDRCxnQkFBTSxpQkFBaUIsSUFBSSxXQUFXLE1BQU0sZUFBZ0IsQ0FBQSxFQUFFO0FBQzlELDBCQUFnQixLQUFLLFFBQVEsT0FBTyxlQUFlLFFBQU8sQ0FBRTtBQUM1RCxtQkFBUyxlQUFlO1FBQzNCO0FBQ0QsY0FBTSxXQUFXLGNBQWM7QUFDL0IsY0FBTSxTQUFTLElBQUksT0FBTyxjQUFjLFFBQU8sR0FBSSxVQUFVLElBQUksU0FBUyxRQUFRLFFBQVEsZ0JBQWdCLGFBQWEsT0FBTyxrQkFBaUIsQ0FBRTtBQUNqSixjQUFNLGVBQWUsY0FBYztBQUNuQyxZQUFJLGdCQUFnQixNQUFNO0FBQ3RCLGlCQUFPLFlBQVkscUJBQXFCLGVBQWUsWUFBWTtBQUFBLFFBQ3RFO0FBQ0QsY0FBTSxVQUFVLGNBQWM7QUFDOUIsWUFBSSxXQUFXLE1BQU07QUFDakIsaUJBQU8sWUFBWSxxQkFBcUIsd0JBQXdCLE9BQU87QUFBQSxRQUMxRTtBQUNELGVBQU87QUFBQSxNQUNWO0FBQUEsTUFFRCxRQUFRO0FBQUEsTUFFUDtBQUFBLE1BU0QsT0FBTyxnQkFBZ0IsT0FBTztBQUMxQixjQUFNLGVBQWUsTUFBTTtBQUMzQixjQUFNLG1CQUFtQixNQUFNO0FBQy9CLFlBQUksZ0JBQWdCLFFBQVEsb0JBQW9CLE1BQU07QUFDbEQsZ0JBQU0sSUFBSSxrQkFBaUI7QUFBQSxRQUM5QjtBQUNELGNBQU0sYUFBYSxLQUFLLFdBQVcsY0FBYyxLQUFLO0FBQ3RELFlBQUksTUFBTSxhQUFhO0FBQ3ZCLGNBQU0sU0FBUyxpQkFBaUI7QUFDaEMsWUFBSSxPQUFPLGFBQWE7QUFDeEIsY0FBTSxRQUFRLGlCQUFpQjtBQUMvQixjQUFNLGVBQWUsUUFBUSxPQUFPLEtBQUs7QUFDekMsY0FBTSxnQkFBZ0IsU0FBUyxNQUFNLEtBQUs7QUFDMUMsWUFBSSxlQUFlLEtBQUssZ0JBQWdCLEdBQUc7QUFDdkMsZ0JBQU0sSUFBSSxrQkFBaUI7QUFBQSxRQUM5QjtBQUlELGNBQU0sUUFBUSxhQUFhO0FBQzNCLGVBQU87QUFDUCxnQkFBUTtBQUVSLGNBQU0sT0FBTyxJQUFJLFVBQVUsYUFBYSxZQUFZO0FBQ3BELGlCQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsS0FBSztBQUNuQyxnQkFBTSxVQUFVLE1BQU0sSUFBSTtBQUMxQixtQkFBUyxJQUFJLEdBQUcsSUFBSSxhQUFhLEtBQUs7QUFDbEMsZ0JBQUksTUFBTSxJQUFJLE9BQU8sSUFBSSxZQUFZLE9BQU8sR0FBRztBQUMzQyxtQkFBSyxJQUFJLEdBQUcsQ0FBQztBQUFBLFlBQ2hCO0FBQUEsVUFDSjtBQUFBLFFBQ0o7QUFDRCxlQUFPO0FBQUEsTUFDVjtBQUFBLE1BQ0QsT0FBTyxXQUFXLGNBQWMsT0FBTztBQUNuQyxjQUFNLFFBQVEsTUFBTTtBQUNwQixZQUFJLElBQUksYUFBYTtBQUNyQixjQUFNLElBQUksYUFBYTtBQUN2QixlQUFPLElBQUksU0FBUyxNQUFNLElBQUksR0FBRyxDQUFDLEdBQUc7QUFDakM7QUFBQSxRQUNIO0FBQ0QsWUFBSSxNQUFNLE9BQU87QUFDYixnQkFBTSxJQUFJLGtCQUFpQjtBQUFBLFFBQzlCO0FBQ0QsY0FBTSxhQUFhLElBQUksYUFBYTtBQUNwQyxZQUFJLGVBQWUsR0FBRztBQUNsQixnQkFBTSxJQUFJLGtCQUFpQjtBQUFBLFFBQzlCO0FBQ0QsZUFBTztBQUFBLE1BQ1Y7QUFBQSxJQUNKO0FBQ0QscUJBQWlCLFlBQVk7QUFPN0IsVUFBTSxvQ0FBb0Msa0JBQWtCO0FBQUEsTUFLeEQsWUFBWSx5QkFBeUIsS0FBSztBQUN0QyxjQUFNLElBQUksb0JBQW9CLHNCQUFzQjtBQUFBLE1BQ3ZEO0FBQUEsSUFDSjtBQWlCRCxRQUFJO0FBQ0osS0FBQyxTQUFVd0IsNkJBQTRCO0FBQ25DLE1BQUFBLDRCQUEyQkEsNEJBQTJCLE9BQU8sS0FBSztBQUNsRSxNQUFBQSw0QkFBMkJBLDRCQUEyQixPQUFPLEtBQUs7QUFDbEUsTUFBQUEsNEJBQTJCQSw0QkFBMkIsT0FBTyxLQUFLO0FBQ2xFLE1BQUFBLDRCQUEyQkEsNEJBQTJCLE9BQU8sS0FBSztBQUFBLElBQ3JFLEdBQUUsK0JBQStCLDZCQUE2QixDQUFFLEVBQUM7QUFPbEUsVUFBTSxxQkFBcUI7QUFBQSxNQUN2QixZQUFZLE9BQU8sYUFBYSxNQUFjO0FBQzFDLGFBQUssUUFBUTtBQUNiLGFBQUssY0FBYztBQUNuQixhQUFLLE9BQU87QUFDWiw2QkFBcUIsU0FBUyxJQUFJLE1BQU0sSUFBSTtBQUM1Qyw2QkFBcUIsVUFBVSxJQUFJLE9BQU8sSUFBSTtBQUFBLE1BQ2pEO0FBQUEsTUFDRCxXQUFXO0FBQ1AsZUFBTyxLQUFLO0FBQUEsTUFDZjtBQUFBLE1BQ0QsVUFBVTtBQUNOLGVBQU8sS0FBSztBQUFBLE1BQ2Y7QUFBQSxNQUNELE9BQU8sV0FBVyxHQUFHO0FBQ2pCLGdCQUFRO0FBQUEsZUFDQztBQUFLLG1CQUFPLHFCQUFxQjtBQUFBLGVBQ2pDO0FBQUssbUJBQU8scUJBQXFCO0FBQUEsZUFDakM7QUFBSyxtQkFBTyxxQkFBcUI7QUFBQSxlQUNqQztBQUFLLG1CQUFPLHFCQUFxQjtBQUFBO0FBQzdCLGtCQUFNLElBQUksa0JBQWtCLElBQUksZUFBZTtBQUFBO0FBQUEsTUFFL0Q7QUFBQSxNQUNELFdBQVc7QUFDUCxlQUFPLEtBQUs7QUFBQSxNQUNmO0FBQUEsTUFDRCxPQUFPLEdBQUc7QUFDTixZQUFJLEVBQUUsYUFBYSx1QkFBdUI7QUFDdEMsaUJBQU87QUFBQSxRQUNWO0FBQ0QsY0FBTSxRQUFRO0FBQ2QsZUFBTyxLQUFLLFVBQVUsTUFBTTtBQUFBLE1BQy9CO0FBQUEsTUFLRCxPQUFPLFFBQVEsTUFBYztBQUN6QixZQUFJLE9BQU8sS0FBSyxRQUFRLHFCQUFxQixTQUFTLE1BQU07QUFDeEQsZ0JBQU0sSUFBSSx5QkFBd0I7QUFBQSxRQUNyQztBQUNELGVBQU8scUJBQXFCLFNBQVMsSUFBSSxJQUFJO0FBQUEsTUFDaEQ7QUFBQSxJQUNKO0FBQ0QseUJBQXFCLFdBQVcsb0JBQUk7QUFDcEMseUJBQXFCLFlBQVksb0JBQUk7QUFFckMseUJBQXFCLElBQUksSUFBSSxxQkFBcUIsMkJBQTJCLEdBQUcsS0FBSyxDQUFJO0FBRXpGLHlCQUFxQixJQUFJLElBQUkscUJBQXFCLDJCQUEyQixHQUFHLEtBQUssQ0FBSTtBQUV6Rix5QkFBcUIsSUFBSSxJQUFJLHFCQUFxQiwyQkFBMkIsR0FBRyxLQUFLLENBQUk7QUFFekYseUJBQXFCLElBQUksSUFBSSxxQkFBcUIsMkJBQTJCLEdBQUcsS0FBSyxDQUFJO0FBeUJ6RixVQUFNLGtCQUFrQjtBQUFBLE1BQ3BCLFlBQVksWUFBb0I7QUFFNUIsYUFBSyx1QkFBdUIscUJBQXFCLFFBQVMsY0FBYyxJQUFLLENBQUk7QUFFakYsYUFBSyxXQUF3QixhQUFhO0FBQUEsTUFDN0M7QUFBQSxNQUNELE9BQU8saUJBQWlCLEdBQVcsR0FBVztBQUMxQyxlQUFPLFFBQVEsU0FBUyxJQUFJLENBQUM7QUFBQSxNQUNoQztBQUFBLE1BUUQsT0FBTyx3QkFBd0IsbUJBQTJCLG1CQUEyQjtBQUNqRixjQUFNLGFBQWEsa0JBQWtCLDBCQUEwQixtQkFBbUIsaUJBQWlCO0FBQ25HLFlBQUksZUFBZSxNQUFNO0FBQ3JCLGlCQUFPO0FBQUEsUUFDVjtBQUlELGVBQU8sa0JBQWtCLDBCQUEwQixvQkFBb0Isa0JBQWtCLHFCQUFxQixvQkFBb0Isa0JBQWtCLG1CQUFtQjtBQUFBLE1BQzFLO0FBQUEsTUFDRCxPQUFPLDBCQUEwQixtQkFBMkIsbUJBQTJCO0FBRW5GLFlBQUksaUJBQWlCLE9BQU87QUFDNUIsWUFBSSxpQkFBaUI7QUFDckIsbUJBQVcsY0FBYyxrQkFBa0IsMkJBQTJCO0FBQ2xFLGdCQUFNLGFBQWEsV0FBVztBQUM5QixjQUFJLGVBQWUscUJBQXFCLGVBQWUsbUJBQW1CO0FBRXRFLG1CQUFPLElBQUksa0JBQWtCLFdBQVcsRUFBRTtBQUFBLFVBQzdDO0FBQ0QsY0FBSSxpQkFBaUIsa0JBQWtCLGlCQUFpQixtQkFBbUIsVUFBVTtBQUNyRixjQUFJLGlCQUFpQixnQkFBZ0I7QUFDakMsNkJBQWlCLFdBQVc7QUFDNUIsNkJBQWlCO0FBQUEsVUFDcEI7QUFDRCxjQUFJLHNCQUFzQixtQkFBbUI7QUFFekMsNkJBQWlCLGtCQUFrQixpQkFBaUIsbUJBQW1CLFVBQVU7QUFDakYsZ0JBQUksaUJBQWlCLGdCQUFnQjtBQUNqQywrQkFBaUIsV0FBVztBQUM1QiwrQkFBaUI7QUFBQSxZQUNwQjtBQUFBLFVBQ0o7QUFBQSxRQUNKO0FBR0QsWUFBSSxrQkFBa0IsR0FBRztBQUNyQixpQkFBTyxJQUFJLGtCQUFrQixjQUFjO0FBQUEsUUFDOUM7QUFDRCxlQUFPO0FBQUEsTUFDVjtBQUFBLE1BQ0QsMEJBQTBCO0FBQ3RCLGVBQU8sS0FBSztBQUFBLE1BQ2Y7QUFBQSxNQUNELGNBQWM7QUFDVixlQUFPLEtBQUs7QUFBQSxNQUNmO0FBQUEsTUFFRCxXQUFXO0FBQ1AsZUFBUSxLQUFLLHFCQUFxQixRQUFTLEtBQUksSUFBSyxLQUFLO0FBQUEsTUFDNUQ7QUFBQSxNQUVELE9BQU8sR0FBRztBQUNOLFlBQUksRUFBRSxhQUFhLG9CQUFvQjtBQUNuQyxpQkFBTztBQUFBLFFBQ1Y7QUFDRCxjQUFNLFFBQVE7QUFDZCxlQUFPLEtBQUsseUJBQXlCLE1BQU0sd0JBQ3ZDLEtBQUssYUFBYSxNQUFNO0FBQUEsTUFDL0I7QUFBQSxJQUNKO0FBQ0Qsc0JBQWtCLHNCQUFzQjtBQUl4QyxzQkFBa0IsNEJBQTRCO0FBQUEsTUFDMUMsV0FBVyxLQUFLLENBQUMsT0FBUSxDQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLENBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsQ0FBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxDQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLENBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsQ0FBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxDQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLENBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsQ0FBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxDQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxNQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE1BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsTUFBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxNQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE1BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsS0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxNQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE1BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE9BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxNQUFRLEVBQUksQ0FBQztBQUFBLE1BQzlCLFdBQVcsS0FBSyxDQUFDLE1BQVEsRUFBSSxDQUFDO0FBQUEsTUFDOUIsV0FBVyxLQUFLLENBQUMsT0FBUSxFQUFJLENBQUM7QUFBQSxNQUM5QixXQUFXLEtBQUssQ0FBQyxPQUFRLEVBQUksQ0FBQztBQUFBLElBQ3RDO0FBUUksVUFBTSxXQUFXO0FBQUEsTUFDYixZQUFZLHdC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QVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNwQztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNwQztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNwQztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNwQztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLElBQ25DLENBQUs7QUFJRCxjQUFVLFdBQVc7QUFBQSxNQUNqQixJQUFJLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxHQUFHLElBQUksV0FBVyxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQUEsTUFDeEwsSUFBSSxVQUFVLEdBQUcsV0FBVyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ2pNLElBQUksVUFBVSxHQUFHLFdBQVcsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNqTSxJQUFJLFVBQVUsR0FBRyxXQUFXLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQUEsTUFDaE0sSUFBSSxVQUFVLEdBQUcsV0FBVyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDdE8sSUFBSSxVQUFVLEdBQUcsV0FBVyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ2pNLElBQUksVUFBVSxHQUFHLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDek8sSUFBSSxVQUFVLEdBQUcsV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDM1AsSUFBSSxVQUFVLEdBQUcsV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDNVAsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzlRLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzVQLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUM5USxJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUM5UCxJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUN0UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNuUixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNwUixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUN2UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUN0UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUN2UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUN4UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDelEsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDdlAsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUM5UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzdSLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDN1IsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFBQSxNQUM3UixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzdSLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNsUyxJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDbFMsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3JTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxHQUFHLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNuUyxJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7QUFBQSxNQUNsUixJQUFJLFVBQVUsSUFBSSxXQUFXLEtBQUssQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksR0FBRyxHQUFHLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQUEsTUFDclMsSUFBSSxVQUFVLElBQUksV0FBVyxLQUFLLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ25TLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzFTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3hTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzFTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQzFTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3pTLElBQUksVUFBVSxJQUFJLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksV0FBVyxJQUFJLElBQUksTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLFdBQVcsSUFBSSxJQUFJLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxNQUFNLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksRUFBRSxHQUFHLElBQUksTUFBTSxJQUFJLEVB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QUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQ25HO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUNuRztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVM7QUFBQSxNQUFTO0FBQUEsTUFDbkc7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLElBQzFCLENBQUs7QUFJRCxpQkFBYSxpQkFBaUIsV0FBVyxLQUFLO0FBQUEsTUFDMUM7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDM0c7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDdkc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUM3RztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUN6RztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3ZHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzNHO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzFHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDMUc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUM1RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQ3hHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzFHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQzFHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQzNHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDdkc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDMUc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDM0c7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDN0c7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUN6RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3hHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUM1RztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDekc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDeEc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUN4RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFDMUc7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFLO0FBQUEsTUFDM0c7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUk7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDMUc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDM0c7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUN6RztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzNHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQzdHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQ3hHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUN4RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQzdHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUN6RztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzRztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDM0c7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDM0c7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDM0c7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDeEc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQzdHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDeEc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQzlHO0FBQUEsTUFBTTtBQUFBLE1BQUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQUs7QUFBQSxNQUFJO0FBQUEsTUFBSTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQzdHO0FBQUEsTUFBSTtBQUFBLE1BQUs7QUFBQSxNQUFJO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUN6RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDNUc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFDMUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUN2RztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUN2RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUM1RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3ZHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDdkc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzFHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQzNHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUMxRztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQ3hHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUM1RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUM1RztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFDNUc7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQzFHO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBRztBQUFBLE1BQU07QUFBQSxNQUFHO0FBQUEsTUFBTTtBQUFBLE1BQUc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUN6RztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQUk7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQUs7QUFBQSxNQUFJO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzNHO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUM1RztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDN0c7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzVHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDMUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzRztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFDekc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDekc7QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFJO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUN2RztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFJO0FBQUEsTUFBSztBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUN6RztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUc7QUFBQSxNQUFHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUk7QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQ3hHO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQzNHO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQ3pHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUMxRztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3hHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFDNUc7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUMzRztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQzFHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBSTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQUs7QUFBQSxNQUFHO0FBQUEsTUFBSztBQUFBLE1BQUc7QUFBQSxNQUMxRztBQUFBLE1BQUs7QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUk7QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQ3ZHO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFLO0FBQUEsTUFBTTtBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1BQUs7QUFBQSxNQUFNO0FBQUEsTUFDeEc7QUFBQSxNQUFLO0FBQUEsTUFBSztBQUFBLE1BQU07QUFBQSxNQUFNO0FBQUEsTUFBTTtBQUFBLE1B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LEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDL0IsV0FBVyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUMvQixXQUFXLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQy9CLFdBQVcsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQUEsSUFDdkMsQ0FBSztBQUVELGVBQVcsK0NBQStDLE1BQU0sS0FBSztBQUFBLE1BQ2pFLFdBQVcsS0FBSyxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzNDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzVDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQztBQUFBLE1BQzdDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQzlDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQzlDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQzlDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQzlDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLE1BQzlDLFdBQVcsS0FBSyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLElBQ3RELENBQUs7QUFFRCxlQUFXLHdCQUF3QixNQUFNLEtBQUs7QUFBQSxNQUMxQyxXQUFXLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ3RCLFdBQVcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDdEIsV0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUN0QixXQUFXLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ3RCLFdBQVcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDdEIsV0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUN0QixXQUFXLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ3RCLFdBQVcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDdEIsV0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUN0QixXQUFXLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ3RCLFdBQVcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDdEIsV0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxNQUN0QixXQUFXLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUFBLE1BQ3RCLFdBQVcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQUEsTUFDdEIsV0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxJQUM5QixDQUFLO0FBRUQsZUFBVyxvQkFBb0I7QUFFL0IsZUFBVyxpQkFBaUI7QUFDNUIsZUFB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
