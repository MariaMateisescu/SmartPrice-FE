import{E as le,Q as Y}from"./EmptyData.b660cb60.js";import{Q as J,a as re,b as L}from"./QTabPanels.77282e54.js";import{Q as ce}from"./QTabs.8fcd658a.js";import{Q as de}from"./QSeparator.4868ea1d.js";import{bB as Z,y as _,a3 as w,b8 as $,aG as ue,aC as ee,ap as h,bO as ie,bL as z,cq as te,ci as pe,am as me,b_ as ve,cc as fe,bU as he,bi as ge,_ as ae,bK as se,bI as oe,o as r,c as S,a as d,N as T,ac as n,bd as m,a4 as g,a5 as b,T as N,bJ as _e,aS as O,aR as A,bf as ye,bN as W,ab as G,aO as Re,aM as Se}from"./index.57906317.js";import{T as we}from"./TouchPan.859cbc0f.js";import{b as Te}from"./format.2a3572e1.js";import{Q as ne,a as P}from"./QCard.b3cb71f9.js";import{a as be}from"./QDialog.2961ca77.js";import{C as Ie}from"./ClosePopup.2ed4cfab.js";import{E as Ce}from"./EmptyState.70d5d69e.js";import"./use-timeout.240583eb.js";import"./selection.e7aa8224.js";import"./use-cache.b0833c75.js";import"./uid.42677368.js";import"./QResizeObserver.c98a61c9.js";import"./rtl.b51694b1.js";import"./QInput.ccad9cd2.js";const D=40,X=20;var ke=Z({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:{default:void 0}},emits:["refresh"],setup(e,{slots:s,emit:l}){const{proxy:v}=me(),{$q:t}=v,i=_("pull"),f=_(0),c=_(!1),u=_(-D),o=_(!1),y=_({}),V=w(()=>({opacity:f.value,transform:`translateY(${u.value}px) rotate(${f.value*360}deg)`})),j=w(()=>"q-pull-to-refresh__puller row flex-center"+(o.value===!0?" q-pull-to-refresh__puller--animating":"")+(e.bgColor!==void 0?` bg-${e.bgColor}`:""));function M(p){if(p.isFinal===!0){c.value===!0&&(c.value=!1,i.value==="pulled"?(i.value="refreshing",x({pos:X}),k()):i.value==="pull"&&x({pos:-D,ratio:0}));return}if(o.value===!0||i.value==="refreshing")return!1;if(p.isFirst===!0){if(fe(U)!==0||p.direction!=="down")return c.value===!0&&(c.value=!1,i.value="pull",x({pos:-D,ratio:0})),!1;c.value=!0;const{top:q,left:F}=I.getBoundingClientRect();y.value={top:q+"px",left:F+"px",width:window.getComputedStyle(I).getPropertyValue("width")}}he(p.evt);const C=Math.min(140,Math.max(0,p.distance.y));u.value=C-D,f.value=Te(C/(X+D),0,1);const a=u.value>X?"pulled":"pull";i.value!==a&&(i.value=a)}const H=w(()=>{const p={down:!0};return e.noMouse!==!0&&(p.mouse=!0),[[we,M,void 0,p]]}),B=w(()=>`q-pull-to-refresh__content${c.value===!0?" no-pointer-events":""}`);function k(){l("refresh",()=>{x({pos:-D,ratio:0},()=>{i.value="pull"})})}let I,U,R=null;function x({pos:p,ratio:C},a){o.value=!0,u.value=p,C!==void 0&&(f.value=C),R!==null&&clearTimeout(R),R=setTimeout(()=>{R=null,o.value=!1,a&&a()},300)}function Q(){U=ve(I,e.scrollTarget)}return $(()=>e.scrollTarget,Q),ue(()=>{I=v.$el,Q()}),ee(()=>{R!==null&&clearTimeout(R)}),Object.assign(v,{trigger:k,updateScrollTarget:Q}),()=>{const p=[h("div",{class:B.value},ie(s.default)),h("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:y.value},[h("div",{class:j.value,style:V.value},[i.value!=="refreshing"?h(z,{name:e.icon||t.iconSet.pullToRefresh.icon,color:e.color,size:"32px"}):h(te,{size:"24px",color:e.color})])])];return pe("div",{class:"q-pull-to-refresh"},p,"main",e.disable===!1,()=>H.value)}}});const xe={ratio:[String,Number]};function qe(e,s){return w(()=>{const l=Number(e.ratio||(s!==void 0?s.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Fe=16/9;var E=Z({name:"QImg",props:{...xe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Fe},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:s,emit:l}){const v=_(e.initialRatio),t=qe(e,v);let i=null,f=!1;const c=[_(null),_(k())],u=_(0),o=_(!1),y=_(!1),V=w(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),j=w(()=>({width:e.width,height:e.height})),M=w(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),H=w(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));$(()=>B(),I);function B(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function k(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function I(a){i!==null&&(clearTimeout(i),i=null),y.value=!1,a===null?(o.value=!1,c[u.value^1].value=k()):o.value=!0,c[u.value].value=a}function U({target:a}){f!==!0&&(i!==null&&(clearTimeout(i),i=null),v.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,R(a,1))}function R(a,q){f===!0||q===1e3||(a.complete===!0?x(a):i=setTimeout(()=>{i=null,R(a,q+1)},50))}function x(a){f!==!0&&(u.value=u.value^1,c[u.value].value=null,o.value=!1,y.value=!1,l("load",a.currentSrc||a.src))}function Q(a){i!==null&&(clearTimeout(i),i=null),o.value=!1,y.value=!0,c[u.value].value=null,c[u.value^1].value=k(),l("error",a)}function p(a){const q=c[a].value,F={key:"img_"+a,class:M.value,style:H.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...q};return u.value===a?(F.class+=" q-img__image--waiting",Object.assign(F,{onLoad:U,onError:Q})):F.class+=" q-img__image--loaded",h("div",{class:"q-img__container absolute-full",key:"img"+a},h("img",F))}function C(){return o.value!==!0?h("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ie(s[y.value===!0?"error":"default"])):h("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},s.loading!==void 0?s.loading():e.noSpinner===!0?void 0:[h(te,{color:e.spinnerColor,size:e.spinnerSize})])}return I(B()),ee(()=>{f=!0,i!==null&&(clearTimeout(i),i=null)}),()=>{const a=[];return t.value!==null&&a.push(h("div",{key:"filler",style:t.value})),y.value!==!0&&(c[0].value!==null&&a.push(p(0)),c[1].value!==null&&a.push(p(1))),a.push(h(ge,{name:"q-transition--fade"},C)),h("div",{class:V.value,style:j.value,role:"img","aria-label":e.alt},a)}}});const De="M0 0h24v24H0z@@fill:none;&&M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z";const ze={name:"RecipeCard",props:["recipeInfo","isSaved"],data(){return{$q:se(),userStore:oe()}},created(){this.matFavoriteBorder=De},emits:["recipeSaved","recipeUnsaved","detailedRecipe","addToFavNoUser"],methods:{async onAddToFavourites(){if(this.userStore.$state.authUser)try{const e=await this.$api.patch(`/recipes/save/${this.recipeInfo.id}`);this.$emit("recipeSaved",this.recipeInfo)}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}else this.$emit("addToFavNoUser")},async onRemoveFromFavourites(){try{const e=await this.$api.patch(`/recipes/unsave/${this.recipeInfo.id}`);this.$emit("recipeUnsaved",this.recipeInfo)}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}}}},Qe={class:"recipe-card__title"};function Pe(e,s,l,v,t,i){return r(),S(N,null,[d("div",Qe,T(l.recipeInfo.title),1),n(ne,{class:"recipe-card"},{default:m(()=>[d("div",{class:"asd",onClick:s[0]||(s[0]=f=>e.$emit("detailedRecipe",l.recipeInfo))},[l.recipeInfo.image?(r(),g(E,{key:0,class:"recipe-card__image",src:l.recipeInfo.image},null,8,["src"])):b("",!0),l.recipeInfo.image?b("",!0):(r(),g(E,{key:1,class:"recipe-card__image",src:"src/assets/recipe-placeholder.jpg"}))]),l.isSaved?b("",!0):(r(),g(z,{key:0,name:"favorite_border",class:"recipe-card__heart",onClick:i.onAddToFavourites},null,8,["onClick"])),l.isSaved?(r(),g(z,{key:1,name:"favorite",class:"recipe-card__heart",onClick:i.onRemoveFromFavourites},null,8,["onClick"])):b("",!0)]),_:1})],64)}var Be=ae(ze,[["render",Pe],["__scopeId","data-v-3f58e32a"]]);const Ue={name:"InspirationPage",components:{EmptyState:Ce,EmptyData:le,RecipeCard:Be},data(){return{image:"EmptyState.svg",title:"Ooops! You are not logged in!",message:"Log in to see recipes",tab:"allRecipes",recipes:null,savedRecipes:null,savedRecipesIds:[],showDetailedRecipe:!1,detailedRecipeToShow:null,$q:se()}},async mounted(){_e().$patch({title:"Inspiration",showBackIcon:!1});try{await this.fetchRandomRecipes(),this.userStore.authUser&&await this.fetchSavedRecipes()}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}},methods:{async fetchRandomRecipes(){const e={method:"GET",url:"https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/random",params:{number:"20"},headers:{"X-RapidAPI-Key":"18d015036fmsh1f9646ee7a98b64p14e225jsn03879d1a3eaf","X-RapidAPI-Host":"spoonacular-recipe-food-nutrition-v1.p.rapidapi.com"}},s=await this.$api.request(e);this.recipes=s.data.recipes},async fetchSavedRecipes(){const e=await this.$api.get("/recipes/savedRecipes");this.savedRecipesIds=e.data.savedRecipes;const s={method:"GET",url:"https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/informationBulk",params:{ids:e.data.savedRecipes.join(",")},headers:{"X-RapidAPI-Key":"18d015036fmsh1f9646ee7a98b64p14e225jsn03879d1a3eaf","X-RapidAPI-Host":"spoonacular-recipe-food-nutrition-v1.p.rapidapi.com"}},l=await this.$api.request(s);this.savedRecipes||(this.savedRecipes=[]),this.savedRecipes=[...this.savedRecipes,...l.data]},addRecipeToSavedRecipes(e){this.savedRecipes.unshift(e),this.savedRecipesIds.unshift(e.id)},removeRecipeFromSavedRecipes(e){const s=this.savedRecipes.indexOf(e);s>-1&&this.savedRecipes.splice(s,1);const l=this.savedRecipesIds.indexOf(e.id);s>-1&&this.savedRecipesIds.splice(l,1)},async createShoppingListFromRecipe(){const e=[];this.detailedRecipeToShow.extendedIngredients.map(v=>{const t=v.amount+" "+v.unit+" "+v.nameClean;e.push(t)});const s={name:this.detailedRecipeToShow.title,selectedProducts:e,isRecipe:this.detailedRecipeToShow.id};(await this.$api.post("/shopping-lists/create-shopping-list",s)).status===200&&this.$q.notify({type:"positive",position:"top",message:"Shopping list created successfully",color:"positive",timeout:"2500"})},showDetailedRecipeDialog(e){this.showDetailedRecipe=!0,this.detailedRecipeToShow=e},check(e){return!!this.savedRecipesIds.includes(e)},async refresh(e){await this.fetchRandomRecipes(),e()}},setup(){return{userStore:oe()}}},K=e=>(Re("data-v-4281d17a"),e=e(),Se(),e),Ne={key:0,class:"row justify-center loading-spinner"},Ee={key:1,class:"inspiration-page"},Ve=K(()=>d("div",{class:"text-h6"},"Browse for recipes",-1)),je={key:0,class:"row justify-center loading-spinner"},Me={key:1},He=K(()=>d("div",{class:"text-h6"},"Saved recipes",-1)),Le={class:"recipe-info-close-btn"},Oe={class:"asd"},Ae={class:"detailed-recipe-title"},Ge={class:"flex justify-between"},Xe={class:"ready-in"},Ke=["href"],Ye={class:"ready-in"},Je={class:"recipe-ingredients"},We={class:"you-will-need"},Ze=K(()=>d("div",null,"Instructions:",-1)),$e=["innerHTML"];function ei(e,s,l,v,t,i){const f=O("RecipeCard"),c=O("EmptyData"),u=O("EmptyState");return t.recipes?(r(),S("div",Ee,[d("div",null,[n(ce,{modelValue:t.tab,"onUpdate:modelValue":s[0]||(s[0]=o=>t.tab=o),dense:"",class:"text-grey","active-color":"cyan-9","indicator-color":"cyan-9",align:"justify","narrow-indicator":""},{default:m(()=>[n(J,{name:"allRecipes",label:"All recipes"}),n(J,{name:"myRecipes",label:"My recipes"})]),_:1},8,["modelValue"]),n(de),n(ke,{onRefresh:i.refresh,color:"cyan-9"},{default:m(()=>[n(re,{modelValue:t.tab,"onUpdate:modelValue":s[2]||(s[2]=o=>t.tab=o),animated:""},{default:m(()=>[n(L,{name:"allRecipes",class:"all-recipes"},{default:m(()=>[Ve,(r(!0),S(N,null,A(t.recipes,o=>(r(),g(f,{key:o.id,recipeInfo:o,isSaved:i.check(o.id),onRecipeSaved:i.addRecipeToSavedRecipes,onRecipeUnsaved:i.removeRecipeFromSavedRecipes,onDetailedRecipe:i.showDetailedRecipeDialog,onAddToFavNoUser:s[1]||(s[1]=y=>t.tab="myRecipes")},null,8,["recipeInfo","isSaved","onRecipeSaved","onRecipeUnsaved","onDetailedRecipe"]))),128)),t.recipes.length?b("",!0):(r(),g(c,{key:0,image:"Void.svg",title:"Nothing to show",message:""}))]),_:1}),v.userStore.authUser?(r(),g(L,{key:0,name:"myRecipes"},{default:m(()=>[t.savedRecipes?(r(),S("div",Me,[He,(r(!0),S(N,null,A(t.savedRecipes,o=>(r(),g(f,{key:o.id,recipeInfo:o,isSaved:i.check(o.id),onRecipeUnsaved:i.removeRecipeFromSavedRecipes,onDetailedRecipe:i.showDetailedRecipeDialog},null,8,["recipeInfo","isSaved","onRecipeUnsaved","onDetailedRecipe"]))),128)),t.savedRecipes&&!t.savedRecipes.length?(r(),g(c,{key:0,image:"Void.svg",title:"Nothing to show",message:"Save a recipe"})):b("",!0)])):(r(),S("div",je,[n(Y,{color:"cyan-9",size:"5em"})]))]),_:1})):(r(),g(L,{key:1,name:"myRecipes",style:{padding:"0px"}},{default:m(()=>[n(u,{image:t.image,title:t.title,message:t.message,hasTabs:!0},null,8,["image","title","message"])]),_:1}))]),_:1},8,["modelValue"])]),_:1},8,["onRefresh"])]),n(be,{seamless:"",maximized:"",modelValue:t.showDetailedRecipe,"onUpdate:modelValue":s[3]||(s[3]=o=>t.showDetailedRecipe=o)},{default:m(()=>[n(ne,null,{default:m(()=>[n(P,{class:"recipe-info-upper-section"},{default:m(()=>[d("div",Le,[ye(n(W,{icon:"close",flat:"",round:"",dense:"",size:"lg"},null,512),[[Ie]])]),d("div",Oe,[t.detailedRecipeToShow.image?(r(),g(E,{key:0,src:t.detailedRecipeToShow.image,alt:"Recipe image",class:"recipe-info-image"},null,8,["src"])):b("",!0),t.detailedRecipeToShow.image?b("",!0):(r(),g(E,{key:1,class:"recipe-card__image",src:"src/assets/recipe-placeholder.jpg"}))])]),_:1}),n(P,null,{default:m(()=>[d("div",Ae,T(t.detailedRecipeToShow.title),1)]),_:1}),n(P,{style:{"font-size":"16px"}},{default:m(()=>[d("div",Ge,[d("div",Xe,[n(z,{name:"restaurant",color:"blue-grey-9"}),G(" "+T(t.detailedRecipeToShow.servings)+" "+T(t.detailedRecipeToShow.servings>1?"servings":"serving"),1)]),d("div",null,[n(z,{name:"link",size:"22px",class:"q-mr-xs"}),d("a",{href:t.detailedRecipeToShow.sourceUrl,style:{"text-decoration":"none"}},"See recipe",8,Ke)])]),d("div",Ye,[n(z,{name:"schedule",color:"blue-grey-9"}),G(" Ready in "+T(t.detailedRecipeToShow.readyInMinutes)+" minutes ",1)])]),_:1}),n(P,{style:{"font-size":"16px"}},{default:m(()=>[d("div",Je,[d("div",We,[G(" You will need: "),d("div",null,[n(W,{color:"cyan-9",icon:"add_shopping_cart",round:"",onClick:i.createShoppingListFromRecipe},null,8,["onClick"])])]),(r(!0),S(N,null,A(t.detailedRecipeToShow.extendedIngredients,o=>(r(),S("li",{key:o.id},T(o.amount)+" "+T(o.unit)+" "+T(o.nameClean),1))),128))])]),_:1}),n(P,{style:{"font-size":"16px"}},{default:m(()=>[Ze,d("div",{innerHTML:t.detailedRecipeToShow.instructions},null,8,$e)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(r(),S("div",Ne,[n(Y,{color:"cyan-9",size:"5em"})]))}var yi=ae(Ue,[["render",ei],["__scopeId","data-v-4281d17a"]]);export{yi as default};
