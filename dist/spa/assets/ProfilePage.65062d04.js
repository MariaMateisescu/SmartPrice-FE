import{Q as r}from"./QInput.30f6c217.js";import{_ as c,bK as f,bJ as p,bI as g,aS as h,o as l,c as u,a,ac as t,bd as n,bN as y,N as v,a4 as C,bL as d}from"./index.99128b48.js";import{Q as k}from"./QToggle.14c22f5f.js";import{E as P}from"./EmptyState.c2d7a636.js";import"./use-timeout.c6d80fee.js";import"./uid.42677368.js";import"./ClosePopup.45393387.js";import"./QCard.f619c392.js";import"./use-checkbox.2d34fff5.js";import"./QDialog.e7626b2d.js";const _={name:"ProfilePage",components:{EmptyState:P},data(){return{image:"EmptyState.svg",title:"Ooops! You are not logged in!",message:"Log in to view your profile",imageCards:"FidelityCard.svg",titleCards:"Ooops! No cards to show!",messageCards:"Add your first card.",name:"",email:"",passwordCurrent:"",password:"",passwordConfirm:"",isPwd:!0,isPwdConfirm:!0,darkMode:null,$q:f(),dashHeader:p(),userStore:g()}},async mounted(){const i=p();i.$patch({title:"Account information",showBackIcon:!1}),this.darkMode=i.$state.darkMode,this.userStore.authUser&&(this.name=this.userStore.authUser.name,this.email=this.userStore.authUser.email)},methods:{toggleDarkMode(i){this.$q.dark.set(i),this.dashHeader.$patch({darkMode:i})},async onSaveChanges(){try{const i={name:this.name,passwordCurrent:this.passwordCurrent,password:this.password,passwordConfirm:this.passwordConfirm};(await this.$api.patch("/users/updateMyPassword",i)).data.status==="success"&&(console.log("succes"),this.$q.notify({type:"positive",position:"top",message:"Changes saved successfully",color:"positive",timeout:"2500"}),this.passwordCurrent="",this.password="",this.passwordConfirm="")}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}}}},b={class:"profile-page"},V={key:0,class:"profile-page-info"},S={style:{width:"100%"}},U={class:"inputs-style"},x={class:"flex toggle-dark"},M={style:{"padding-left":"18px"}};function N(i,s,E,Q,e,m){const w=h("EmptyState");return l(),u("div",b,[e.userStore.authUser?(l(),u("div",V,[a("div",S,[a("div",U,[t(r,{readonly:"",disable:"",filled:"",rounded:"",outlined:"",modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.email=o),type:"email",label:"Email",class:"email_input"},null,8,["modelValue"]),t(r,{rounded:"",outlined:"",modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=o=>e.name=o),label:"Name"},null,8,["modelValue"]),t(r,{rounded:"",outlined:"",modelValue:e.passwordCurrent,"onUpdate:modelValue":s[3]||(s[3]=o=>e.passwordCurrent=o),type:e.isPwd?"password":"text",label:"Current Password"},{append:n(()=>[t(d,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=o=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),t(r,{rounded:"",outlined:"",modelValue:e.password,"onUpdate:modelValue":s[5]||(s[5]=o=>e.password=o),type:e.isPwd?"password":"text",label:"New Password"},{append:n(()=>[t(d,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[4]||(s[4]=o=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),t(r,{hint:"Password should have at least 8 characters",rounded:"",outlined:"",modelValue:e.passwordConfirm,"onUpdate:modelValue":s[7]||(s[7]=o=>e.passwordConfirm=o),type:e.isPwdConfirm?"password":"text",label:"Confirm New Password"},{append:n(()=>[t(d,{name:e.isPwdConfirm?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[6]||(s[6]=o=>e.isPwdConfirm=!e.isPwdConfirm)},null,8,["name"])]),_:1},8,["modelValue","type"]),t(y,{class:"savechanges-btn",onClick:m.onSaveChanges,label:"Save Changes"},null,8,["onClick"])]),a("div",x,[a("div",M," Switch to "+v(e.darkMode?"light mode":"dark mode"),1),t(k,{modelValue:e.darkMode,"onUpdate:modelValue":[s[8]||(s[8]=o=>e.darkMode=o),m.toggleDarkMode],"checked-icon":"dark_mode",color:"cyan-9",size:"xl","unchecked-icon":"light_mode"},null,8,["modelValue","onUpdate:modelValue"])])])])):(l(),C(w,{key:1,image:e.image,title:e.title,message:e.message},null,8,["image","title","message"]))])}var J=c(_,[["render",N],["__scopeId","data-v-297bd0c2"]]);export{J as default};
