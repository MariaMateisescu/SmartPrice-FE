import{b8 as V,c3 as H,aG as Q,am as U,az as k,c4 as w,y as C,aK as N,c5 as O,ap as j,X as I,c6 as B,c7 as W,a3 as M,bR as K,bX as L,c8 as X}from"./index.6c1463e3.js";const oe={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ae=["beforeShow","show","beforeHide","hide"];function ie({showing:e,canShow:t,hideOnRouteChange:o,handleShow:i,handleHide:a,processOnMount:p}){const r=U(),{props:s,emit:l,proxy:P}=r;let u;function g(n){e.value===!0?E(n):v(n)}function v(n){if(s.disable===!0||n!==void 0&&n.qAnchorHandled===!0||t!==void 0&&t(n)!==!0)return;const h=s["onUpdate:modelValue"]!==void 0;h===!0&&(l("update:modelValue",!0),u=n,k(()=>{u===n&&(u=void 0)})),(s.modelValue===null||h===!1)&&F(n)}function F(n){e.value!==!0&&(e.value=!0,l("beforeShow",n),i!==void 0?i(n):l("show",n))}function E(n){if(s.disable===!0)return;const h=s["onUpdate:modelValue"]!==void 0;h===!0&&(l("update:modelValue",!1),u=n,k(()=>{u===n&&(u=void 0)})),(s.modelValue===null||h===!1)&&$(n)}function $(n){e.value!==!1&&(e.value=!1,l("beforeHide",n),a!==void 0?a(n):l("hide",n))}function _(n){s.disable===!0&&n===!0?s["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):n===!0!==e.value&&(n===!0?F:$)(u)}V(()=>s.modelValue,_),o!==void 0&&H(r)===!0&&V(()=>P.$route.fullPath,()=>{o.value===!0&&e.value===!0&&E()}),p===!0&&Q(()=>{_(s.modelValue)});const q={show:v,hide:E,toggle:g};return Object.assign(P,q),q}let f=[],b=[];function S(e){b=b.filter(t=>t!==e)}function z(e){S(e),b.push(e)}function T(e){S(e),b.length===0&&f.length!==0&&(f[f.length-1](),f=[])}function se(e){b.length===0?e():f.push(e)}function le(e){f=f.filter(t=>t!==e)}const y=[];function R(e){return y.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function x(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return w(e)}else if(e.__qPortal===!0){const o=w(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=w(e)}while(e!=null)}function J(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=x(e,t);continue}e.hide(t)}e=w(e)}}function Y(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function ue(e,t,o,i){const a=C(!1),p=C(!1);let r=null;const s={},l=i==="dialog"&&Y(e);function P(g){if(g===!0){T(s),p.value=!0;return}p.value=!1,a.value===!1&&(l===!1&&r===null&&(r=B(!1,i)),a.value=!0,y.push(e.proxy),z(s))}function u(g){if(p.value=!1,g!==!0)return;T(s),a.value=!1;const v=y.indexOf(e.proxy);v!==-1&&y.splice(v,1),r!==null&&(W(r),r=null)}return N(()=>{u(!0)}),e.proxy.__qPortal=!0,O(e.proxy,"contentEl",()=>t.value),{showPortal:P,hidePortal:u,portalIsActive:a,portalIsAccessible:p,renderPortal:()=>l===!0?o():a.value===!0?[j(I,{to:r},o())]:void 0}}const re={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function fe(e,t=()=>{},o=()=>{}){return{transitionProps:M(()=>{const i=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:M(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const d=[];let m;function Z(e){m=e.keyCode===27}function ee(){m===!0&&(m=!1)}function te(e){m===!0&&(m=!1,K(e,27)===!0&&d[d.length-1](e))}function A(e){window[e]("keydown",Z),window[e]("blur",ee),window[e]("keyup",te),m=!1}function de(e){L.is.desktop===!0&&(d.push(e),d.length===1&&A("addEventListener"))}function ce(e){const t=d.indexOf(e);t>-1&&(d.splice(t,1),d.length===0&&A("removeEventListener"))}const c=[];function G(e){c[c.length-1](e)}function pe(e){L.is.desktop===!0&&(c.push(e),c.length===1&&document.body.addEventListener("focusin",G))}function he(e){const t=c.indexOf(e);t>-1&&(c.splice(t,1),c.length===0&&document.body.removeEventListener("focusin",G))}function D(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var me=X({name:"close-popup",beforeMount(e,{value:t}){const o={depth:D(t),handler(i){o.depth!==0&&setTimeout(()=>{const a=R(e);a!==void 0&&J(a,i,o.depth)})},handlerKey(i){K(i,13)===!0&&o.handler(i)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=D(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});export{me as C,re as a,ae as b,fe as c,ie as d,ue as e,pe as f,ce as g,se as h,x as i,de as j,le as k,y as p,he as r,oe as u};
