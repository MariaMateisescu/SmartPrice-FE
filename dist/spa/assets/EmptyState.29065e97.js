import{_ as p,bI as k,ce as b,o as d,c as g,a,ac as t,bd as u,bK as y,bM as n,T as P,aO as C,aM as S,aS as _,N as h,bf as D,a4 as w,a5 as v,d as U}from"./index.34950785.js";import{Q as F,a as A}from"./QDialog.fe157533.js";import{Q as x,a as $}from"./QCard.d2345bc1.js";import{C as z}from"./ClosePopup.b7f1f5d3.js";import{Q as m}from"./QInput.8e10a7f4.js";var q="/assets/Login.4f29e780.svg";const Q={name:"LoginPage",data(){return{email:"",password:"",isPwd:!0,useUser:k(),$q:b(),emailRules:[s=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)||"Please enter a valid email"]}},emits:["emitForgotPassword","emitSignup"],methods:{async login(){if(this.$refs.emailRef.validate(),!this.$refs.emailRef.hasError)try{const s={email:this.email,password:this.password},e=await this.$api.post("/users/login",s);e.data.status==="success"&&(this.$q.notify({type:"positive",position:"top",message:"Logged in successfully",color:"positive",timeout:"2500"}),localStorage.setItem("token",e.data.token),this.useUser.setUser(e.data.data.user),this.$api.defaults.headers.common.Authorization=`Bearer ${localStorage.getItem("token")}`,e.data.data.user.role==="admin"?this.$router.push("/administration"):this.$router.push("/"))}catch{this.$q.notify({type:"negative",position:"top",message:"Invalid email or password!",color:"negative",timeout:"2500"})}}}},R=s=>(C("data-v-3039f0d1"),s=s(),S(),s),B=R(()=>a("div",{class:"illustration"},[a("img",{class:"illustration_img",src:q,alt:"Login Illustration"})],-1)),Z={class:"login"},N={class:"inline-style"},T=R(()=>a("p",null,"Don't have an account?",-1));function M(s,e,r,f,o,l){return d(),g(P,null,[B,a("div",Z,[t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=i=>o.email=i),type:"email",label:"Email",rules:o.emailRules,ref:"emailRef"},null,8,["modelValue","rules"]),t(m,{rounded:"",outlined:"",modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=i=>o.password=i),type:o.isPwd?"password":"text",label:"Password"},{append:u(()=>[t(y,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=i=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),t(n,{flat:"",class:"forgot-pass-btn",label:"Forgot password",onClick:e[3]||(e[3]=i=>this.$emit("emitForgotPassword"))}),t(n,{class:"login-btn",onClick:l.login,label:"Log In"},null,8,["onClick"]),a("div",N,[T,t(n,{class:"signup-btn",flat:"",label:"Sign Up",onClick:e[4]||(e[4]=i=>this.$emit("emitSignup"))})])])],64)}var G=p(Q,[["render",M],["__scopeId","data-v-3039f0d1"]]),K="/assets/SignUp.b2a3c213.svg";const O={name:"SignupPage",data(){return{name:"",email:"",password:"",passwordConfirm:"",isPwd:!0,isPwdConfirm:!0,useUser:k(),$q:b(),nameRules:[s=>s!==null&&s!==""||"Please type your name"],emailRules:[s=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)||"Please enter a valid email"],passwordRules:[s=>s.length>=6||"Password should have at least 6 characters"]}},emits:["emitLogin"],methods:{async onSignup(){if(this.$refs.nameRef.validate(),this.$refs.emailRef.validate(),this.$refs.passwordRef.validate(),this.$refs.passwordConfirmRef.validate(),!this.$refs.nameRef.hasError&&!this.$refs.emailRef.hasError&&!this.$refs.passwordRef.hasError&&!this.$refs.passwordConfirmRef.hasError)try{const s={name:this.name,email:this.email,password:this.password,passwordConfirm:this.passwordConfirm},e=await this.$api.post("/users/signup",s);e.data.status==="success"&&(this.$q.notify({type:"positive",position:"top",message:"Account created successfully",color:"positive",timeout:"2500"}),localStorage.setItem("token",e.data.token),this.$api.defaults.headers.common.Authorization=`Bearer ${localStorage.getItem("token")}`,this.$router.push("/"),this.useUser.setUser(e.data.data.user))}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}}},computed:{passwordConfirmRules(){return[s=>s.length>=6||"Password should have at least 6 characters",s=>s===this.password||"Passwords do not match"]}}},V=s=>(C("data-v-036fd69e"),s=s(),S(),s),j=V(()=>a("div",{class:"illustration"},[a("img",{class:"illustration_img",src:K,alt:"Signup Illustration"})],-1)),H={class:"signup"},J={class:"inline-style"},W=V(()=>a("p",null,"Already have an account?",-1));function X(s,e,r,f,o,l){return d(),g(P,null,[j,a("div",H,[t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.name=i),label:"Name",rules:o.nameRules,ref:"nameRef"},null,8,["modelValue","rules"]),t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=i=>o.email=i),type:"email",label:"Email",rules:o.emailRules,ref:"emailRef"},null,8,["modelValue","rules"]),t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=i=>o.password=i),type:o.isPwd?"password":"text",label:"Password",rules:o.passwordRules,ref:"passwordRef"},{append:u(()=>[t(y,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=i=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.passwordConfirm,"onUpdate:modelValue":e[5]||(e[5]=i=>o.passwordConfirm=i),type:o.isPwdConfirm?"password":"text",label:"Confirm Password",rules:l.passwordConfirmRules,ref:"passwordConfirmRef"},{append:u(()=>[t(y,{name:o.isPwdConfirm?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=i=>o.isPwdConfirm=!o.isPwdConfirm)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),t(n,{class:"signup-btn",onClick:l.onSignup,label:"Sign Up"},null,8,["onClick"]),a("div",J,[W,t(n,{class:"login-btn",flat:"",label:"Log in",onClick:e[6]||(e[6]=i=>this.$emit("emitLogin"))})])])],64)}var Y=p(O,[["render",X],["__scopeId","data-v-036fd69e"]]),ee="/assets/ForgotPassword.db33b154.svg";const se={name:"ForgotPasswordPage",data(){return{email:"",$q:b(),emailRules:[s=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)||"Please enter a valid email"]}},emits:["emitLogin"],methods:{async onSendCode(){if(this.$refs.emailRef.validate(),!this.$refs.emailRef.hasError)try{const s={email:this.email};(await this.$api.post("users/forgotPassword",s)).data.status==="success"&&this.$q.notify({type:"positive",position:"top",message:"Code sent to the provided email.",color:"positive",timeout:"2500"})}catch{this.$q.notify({type:"negative",position:"top",message:"Something went wrong!",color:"negative",timeout:"2500"})}}}},c=s=>(C("data-v-2e1d7d1a"),s=s(),S(),s),oe=c(()=>a("div",{class:"illustration"},[a("img",{class:"illustration_img",src:ee,alt:"Forogt Password Illustration"})],-1)),te={class:"forgot-password"},ie=c(()=>a("h3",{class:"forgot-password__header"},"Forgot Password?",-1)),ae=c(()=>a("p",null,"Enter your email address to retrieve your password",-1)),le={class:"inline-style"},ne=c(()=>a("p",null,"Go back to",-1));function re(s,e,r,f,o,l){return d(),g(P,null,[oe,a("div",te,[ie,ae,t(m,{rounded:"","no-error-icon":"","lazy-rules":"ondemand",outlined:"",modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=i=>o.email=i),type:"email",label:"Email",rules:o.emailRules,ref:"emailRef"},null,8,["modelValue","rules"]),t(n,{class:"forgot-password-btn",onClick:l.onSendCode,label:"Send Code"},null,8,["onClick"]),a("div",le,[ne,t(n,{class:"login-btn",flat:"",label:"Log In",onClick:e[1]||(e[1]=i=>this.$emit("emitLogin"))})])])],64)}var de=p(se,[["render",re],["__scopeId","data-v-2e1d7d1a"]]);const ue={name:"EmptyState",props:["image","title","message","hasTabs"],data(){return{showAuthDialog:!1,state:""}},components:{LoginDialog:G,SignupDialog:Y,ForgotPasswordDialog:de},methods:{onLogin(){this.state="Log In",this.showAuthDialog=!0},onSignup(){this.state="Sign Up",this.showAuthDialog=!0},onForgotPassword(){this.state="Forgot Password",this.showAuthDialog=!0}}},me=["src"],pe={class:"empty-state__title"},ge={class:"message"},ce={class:"text-h6"};function fe(s,e,r,f,o,l){const i=_("LoginDialog"),L=_("SignupDialog"),I=_("ForgotPasswordDialog");return d(),g("div",{class:U(["empty-state",{"with-tabs-height":r.hasTabs,"without-tabs-height":!r.hasTabs}])},[a("img",{src:`${r.image}`,alt:""},null,8,me),a("div",pe,h(r.title),1),a("div",ge,h(r.message),1),a("div",null,[t(n,{class:"btn",style:{"background-color":"#00838f",color:"#fff"},label:"Log In",onClick:l.onLogin},null,8,["onClick"]),t(n,{class:"btn",style:{"background-color":"#00838f",color:"#fff"},label:"Sign Up",onClick:l.onSignup},null,8,["onClick"]),t(A,{modelValue:o.showAuthDialog,"onUpdate:modelValue":e[0]||(e[0]=E=>o.showAuthDialog=E),seamless:"",position:"bottom"},{default:u(()=>[t(x,{class:"q-card__height"},{default:u(()=>[t($,{class:"row items-center q-pb-none"},{default:u(()=>[a("div",ce,h(this.state),1),t(F),D(t(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[z]])]),_:1}),t($,null,{default:u(()=>[this.state==="Log In"?(d(),w(i,{key:0,onEmitForgotPassword:l.onForgotPassword,onEmitSignup:l.onSignup},null,8,["onEmitForgotPassword","onEmitSignup"])):v("",!0),this.state==="Sign Up"?(d(),w(L,{key:1,onEmitLogin:l.onLogin},null,8,["onEmitLogin"])):v("",!0),this.state==="Forgot Password"?(d(),w(I,{key:2,onEmitLogin:l.onLogin},null,8,["onEmitLogin"])):v("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])],2)}var be=p(ue,[["render",fe],["__scopeId","data-v-145b72bf"]]);export{be as E};
